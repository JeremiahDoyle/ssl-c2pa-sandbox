/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/cert-requests/route";
exports.ids = ["app/api/cert-requests/route"];
exports.modules = {

/***/ "(rsc)/./app/api/cert-requests/route.ts":
/*!****************************************!*\
  !*** ./app/api/cert-requests/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./lib/env.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n/* harmony import */ var _lib_ids__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/ids */ \"(rsc)/./lib/ids.ts\");\n/* harmony import */ var _lib_rateLimit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/rateLimit */ \"(rsc)/./lib/rateLimit.ts\");\n\n\n\n\n\n\n// Env shape is validated via getEnv()\nconst ReqSchema = zod__WEBPACK_IMPORTED_MODULE_5__.object({\n    csr: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1),\n    profileId: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n    conformingProductId: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n    subject: zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        CN: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        O: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        C: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n    }).optional()\n});\nasync function POST(req) {\n    const reqId = (0,_lib_ids__WEBPACK_IMPORTED_MODULE_3__.rid)();\n    try {\n        const env = (0,_lib_env__WEBPACK_IMPORTED_MODULE_1__.getEnv)();\n        const ip = req.headers.get('x-forwarded-for') || 'unknown';\n        const limited = (0,_lib_rateLimit__WEBPACK_IMPORTED_MODULE_4__.rateLimit)({\n            key: `cert:${ip}`,\n            capacity: 30,\n            refillPerSec: 0.5\n        }); // ~30/min\n        if (!limited.ok) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Rate limit exceeded',\n                reqId\n            }, {\n                status: 429\n            });\n        }\n        const body = await req.json().catch(()=>({}));\n        const parsed = ReqSchema.safeParse(body);\n        if (!parsed.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid request',\n                reqId\n            }, {\n                status: 400\n            });\n        }\n        if (!env.AUTH_TOKEN) {\n            // Preview fallback: return a stub certificate so the UI can proceed.\n            const stubCert = `-----BEGIN CERTIFICATE-----\\n${btoa('preview cert')}\\n-----END CERTIFICATE-----`;\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info('Preview stub certificate returned (no secrets configured)', {\n                reqId\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                certificatePem: stubCert,\n                requestId: reqId\n            });\n        }\n        // Forward to issuance API\n        try {\n            // Transform to upstream schema:\n            // {\n            //   certificate_profile_id,\n            //   certificate_signing_request,\n            //   conforming_product_id,\n            //   experimental: { CN, O, C }\n            // }\n            const bodyOut = {\n                certificate_profile_id: parsed.data.profileId || env.CERT_PROFILE_ID,\n                certificate_signing_request: parsed.data.csr,\n                conforming_product_id: parsed.data.conformingProductId || env.CONFORMING_PRODUCT_ID\n            };\n            if (parsed.data.subject) {\n                bodyOut.experimental = {\n                    ...parsed.data.subject\n                };\n            }\n            const res = await fetch(`${env.API_BASE}/api/v1/certificate-requests`, {\n                method: 'POST',\n                headers: {\n                    'content-type': 'application/json',\n                    'authorization': `Bearer ${env.AUTH_TOKEN}`\n                },\n                body: JSON.stringify(bodyOut)\n            });\n            const json = await res.json().catch(()=>({}));\n            if (!res.ok) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('Issuance API error', {\n                    reqId,\n                    status: res.status\n                });\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: json?.error || 'Issuance failed',\n                    reqId\n                }, {\n                    status: res.status\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                certificatePem: json.certificatePem,\n                requestId: reqId,\n                meta: json.meta\n            });\n        } catch (e) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('Issuance forward error', {\n                reqId,\n                error: e?.message || String(e)\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Upstream error',\n                reqId\n            }, {\n                status: 502\n            });\n        }\n    } catch (e) {\n        const msg = e instanceof Error ? e.message : String(e);\n        _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('cert-requests error', {\n            reqId,\n            error: msg\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Server error',\n            reqId\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBnZXRFbnYgfSBmcm9tICdAL2xpYi9lbnYnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC9saWIvbG9nZ2VyJztcbmltcG9ydCB7IHJpZCB9IGZyb20gJ0AvbGliL2lkcyc7XG5pbXBvcnQgeyByYXRlTGltaXQgfSBmcm9tICdAL2xpYi9yYXRlTGltaXQnO1xuXG4vLyBFbnYgc2hhcGUgaXMgdmFsaWRhdGVkIHZpYSBnZXRFbnYoKVxuXG5jb25zdCBSZXFTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGNzcjogei5zdHJpbmcoKS5taW4oMSksXG4gIHByb2ZpbGVJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBjb25mb3JtaW5nUHJvZHVjdElkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN1YmplY3Q6IHoub2JqZWN0KHsgQ046IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgTzogei5zdHJpbmcoKS5vcHRpb25hbCgpLCBDOiB6LnN0cmluZygpLm9wdGlvbmFsKCkgfSkub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcbiAgY29uc3QgcmVxSWQgPSByaWQoKTtcbiAgdHJ5IHtcbiAgICBjb25zdCBlbnYgPSBnZXRFbnYoKTtcbiAgICBjb25zdCBpcCA9IHJlcS5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgJ3Vua25vd24nO1xuICAgIGNvbnN0IGxpbWl0ZWQgPSByYXRlTGltaXQoeyBrZXk6IGBjZXJ0OiR7aXB9YCwgY2FwYWNpdHk6IDMwLCByZWZpbGxQZXJTZWM6IDAuNSB9KTsgLy8gfjMwL21pblxuICAgIGlmICghbGltaXRlZC5vaykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdSYXRlIGxpbWl0IGV4Y2VlZGVkJywgcmVxSWQgfSwgeyBzdGF0dXM6IDQyOSB9KTtcbiAgICB9XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgY29uc3QgcGFyc2VkID0gUmVxU2NoZW1hLnNhZmVQYXJzZShib2R5KTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdCcsIHJlcUlkIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFlbnYuQVVUSF9UT0tFTikge1xuICAgICAgLy8gUHJldmlldyBmYWxsYmFjazogcmV0dXJuIGEgc3R1YiBjZXJ0aWZpY2F0ZSBzbyB0aGUgVUkgY2FuIHByb2NlZWQuXG4gICAgICBjb25zdCBzdHViQ2VydCA9IGAtLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS1cXG4ke2J0b2EoJ3ByZXZpZXcgY2VydCcpfVxcbi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS1gO1xuICAgICAgbG9nZ2VyLmluZm8oJ1ByZXZpZXcgc3R1YiBjZXJ0aWZpY2F0ZSByZXR1cm5lZCAobm8gc2VjcmV0cyBjb25maWd1cmVkKScsIHsgcmVxSWQgfSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBjZXJ0aWZpY2F0ZVBlbTogc3R1YkNlcnQsIHJlcXVlc3RJZDogcmVxSWQgfSk7XG4gICAgfVxuXG4gICAgLy8gRm9yd2FyZCB0byBpc3N1YW5jZSBBUElcbiAgICB0cnkge1xuICAgICAgLy8gVHJhbnNmb3JtIHRvIHVwc3RyZWFtIHNjaGVtYTpcbiAgICAgIC8vIHtcbiAgICAgIC8vICAgY2VydGlmaWNhdGVfcHJvZmlsZV9pZCxcbiAgICAgIC8vICAgY2VydGlmaWNhdGVfc2lnbmluZ19yZXF1ZXN0LFxuICAgICAgLy8gICBjb25mb3JtaW5nX3Byb2R1Y3RfaWQsXG4gICAgICAvLyAgIGV4cGVyaW1lbnRhbDogeyBDTiwgTywgQyB9XG4gICAgICAvLyB9XG4gICAgICBjb25zdCBib2R5T3V0OiBhbnkgPSB7XG4gICAgICAgIGNlcnRpZmljYXRlX3Byb2ZpbGVfaWQ6IHBhcnNlZC5kYXRhLnByb2ZpbGVJZCB8fCBlbnYuQ0VSVF9QUk9GSUxFX0lELFxuICAgICAgICBjZXJ0aWZpY2F0ZV9zaWduaW5nX3JlcXVlc3Q6IHBhcnNlZC5kYXRhLmNzcixcbiAgICAgICAgY29uZm9ybWluZ19wcm9kdWN0X2lkOiBwYXJzZWQuZGF0YS5jb25mb3JtaW5nUHJvZHVjdElkIHx8IGVudi5DT05GT1JNSU5HX1BST0RVQ1RfSUQsXG4gICAgICB9O1xuICAgICAgaWYgKHBhcnNlZC5kYXRhLnN1YmplY3QpIHtcbiAgICAgICAgYm9keU91dC5leHBlcmltZW50YWwgPSB7IC4uLnBhcnNlZC5kYXRhLnN1YmplY3QgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7ZW52LkFQSV9CQVNFfS9hcGkvdjEvY2VydGlmaWNhdGUtcmVxdWVzdHNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnYXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtlbnYuQVVUSF9UT0tFTn1gLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5T3V0KSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICBsb2dnZXIud2FybignSXNzdWFuY2UgQVBJIGVycm9yJywgeyByZXFJZCwgc3RhdHVzOiByZXMuc3RhdHVzIH0pO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjoganNvbj8uZXJyb3IgfHwgJ0lzc3VhbmNlIGZhaWxlZCcsIHJlcUlkIH0sIHsgc3RhdHVzOiByZXMuc3RhdHVzIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgY2VydGlmaWNhdGVQZW06IGpzb24uY2VydGlmaWNhdGVQZW0sIHJlcXVlc3RJZDogcmVxSWQsIG1ldGE6IGpzb24ubWV0YSB9KTtcbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignSXNzdWFuY2UgZm9yd2FyZCBlcnJvcicsIHsgcmVxSWQsIGVycm9yOiBlPy5tZXNzYWdlIHx8IFN0cmluZyhlKSB9KTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVXBzdHJlYW0gZXJyb3InLCByZXFJZCB9LCB7IHN0YXR1czogNTAyIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZTogdW5rbm93bikge1xuICAgIGNvbnN0IG1zZyA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6IFN0cmluZyhlKTtcbiAgICBsb2dnZXIuZXJyb3IoJ2NlcnQtcmVxdWVzdHMgZXJyb3InLCB7IHJlcUlkLCBlcnJvcjogbXNnIH0pO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnU2VydmVyIGVycm9yJywgcmVxSWQgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInoiLCJnZXRFbnYiLCJsb2dnZXIiLCJyaWQiLCJyYXRlTGltaXQiLCJSZXFTY2hlbWEiLCJvYmplY3QiLCJjc3IiLCJzdHJpbmciLCJtaW4iLCJwcm9maWxlSWQiLCJvcHRpb25hbCIsImNvbmZvcm1pbmdQcm9kdWN0SWQiLCJzdWJqZWN0IiwiQ04iLCJPIiwiQyIsIlBPU1QiLCJyZXEiLCJyZXFJZCIsImVudiIsImlwIiwiaGVhZGVycyIsImdldCIsImxpbWl0ZWQiLCJrZXkiLCJjYXBhY2l0eSIsInJlZmlsbFBlclNlYyIsIm9rIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYm9keSIsImNhdGNoIiwicGFyc2VkIiwic2FmZVBhcnNlIiwic3VjY2VzcyIsIkFVVEhfVE9LRU4iLCJzdHViQ2VydCIsImJ0b2EiLCJpbmZvIiwiY2VydGlmaWNhdGVQZW0iLCJyZXF1ZXN0SWQiLCJib2R5T3V0IiwiY2VydGlmaWNhdGVfcHJvZmlsZV9pZCIsImRhdGEiLCJDRVJUX1BST0ZJTEVfSUQiLCJjZXJ0aWZpY2F0ZV9zaWduaW5nX3JlcXVlc3QiLCJjb25mb3JtaW5nX3Byb2R1Y3RfaWQiLCJDT05GT1JNSU5HX1BST0RVQ1RfSUQiLCJleHBlcmltZW50YWwiLCJyZXMiLCJmZXRjaCIsIkFQSV9CQVNFIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsIndhcm4iLCJtZXRhIiwiZSIsIm1lc3NhZ2UiLCJTdHJpbmciLCJtc2ciLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/cert-requests/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/env.ts":
/*!********************!*\
  !*** ./lib/env.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst EnvSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    ACCOUNT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).optional(),\n    AUTH_TOKEN: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).optional(),\n    API_BASE: zod__WEBPACK_IMPORTED_MODULE_0__.string().url().default('https://api.c2patool.io'),\n    TSA_URL: zod__WEBPACK_IMPORTED_MODULE_0__.string().url().optional(),\n    CERT_PROFILE_ID: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    CONFORMING_PRODUCT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nfunction getEnv() {\n    const env = EnvSchema.parse({\n        ACCOUNT_ID: process.env.ACCOUNT_ID,\n        AUTH_TOKEN: process.env.AUTH_TOKEN,\n        API_BASE: process.env.API_BASE,\n        TSA_URL: process.env.TSA_URL || process.env.NEXT_PUBLIC_TSA_URL,\n        CERT_PROFILE_ID: process.env.CERT_PROFILE_ID,\n        CONFORMING_PRODUCT_ID: process.env.CONFORMING_PRODUCT_ID\n    });\n    return env;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZW52LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdCO0FBRXhCLE1BQU1DLFlBQVlELHVDQUFRLENBQUM7SUFDekJHLFlBQVlILHVDQUFRLEdBQUdLLEdBQUcsQ0FBQyxHQUFHQyxRQUFRO0lBQ3RDQyxZQUFZUCx1Q0FBUSxHQUFHSyxHQUFHLENBQUMsR0FBR0MsUUFBUTtJQUN0Q0UsVUFBVVIsdUNBQVEsR0FBR1MsR0FBRyxHQUFHQyxPQUFPLENBQUM7SUFDbkNDLFNBQVNYLHVDQUFRLEdBQUdTLEdBQUcsR0FBR0gsUUFBUTtJQUNsQ00saUJBQWlCWix1Q0FBUSxHQUFHTSxRQUFRO0lBQ3BDTyx1QkFBdUJiLHVDQUFRLEdBQUdNLFFBQVE7QUFDNUM7QUFJTyxTQUFTUTtJQUNkLE1BQU1DLE1BQU1kLFVBQVVlLEtBQUssQ0FBQztRQUMxQmIsWUFBWWMsUUFBUUYsR0FBRyxDQUFDWixVQUFVO1FBQ2xDSSxZQUFZVSxRQUFRRixHQUFHLENBQUNSLFVBQVU7UUFDbENDLFVBQVVTLFFBQVFGLEdBQUcsQ0FBQ1AsUUFBUTtRQUM5QkcsU0FBU00sUUFBUUYsR0FBRyxDQUFDSixPQUFPLElBQUlNLFFBQVFGLEdBQUcsQ0FBQ0csbUJBQW1CO1FBQy9ETixpQkFBaUJLLFFBQVFGLEdBQUcsQ0FBQ0gsZUFBZTtRQUM1Q0MsdUJBQXVCSSxRQUFRRixHQUFHLENBQUNGLHFCQUFxQjtJQUMxRDtJQUNBLE9BQU9FO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9saWIvZW52LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5jb25zdCBFbnZTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIEFDQ09VTlRfSUQ6IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKCksXG4gIEFVVEhfVE9LRU46IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKCksXG4gIEFQSV9CQVNFOiB6LnN0cmluZygpLnVybCgpLmRlZmF1bHQoJ2h0dHBzOi8vYXBpLmMycGF0b29sLmlvJyksXG4gIFRTQV9VUkw6IHouc3RyaW5nKCkudXJsKCkub3B0aW9uYWwoKSxcbiAgQ0VSVF9QUk9GSUxFX0lEOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIENPTkZPUk1JTkdfUFJPRFVDVF9JRDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5cbmV4cG9ydCB0eXBlIEVudiA9IHouaW5mZXI8dHlwZW9mIEVudlNjaGVtYT47XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnYoKTogRW52IHtcbiAgY29uc3QgZW52ID0gRW52U2NoZW1hLnBhcnNlKHtcbiAgICBBQ0NPVU5UX0lEOiBwcm9jZXNzLmVudi5BQ0NPVU5UX0lELFxuICAgIEFVVEhfVE9LRU46IHByb2Nlc3MuZW52LkFVVEhfVE9LRU4sXG4gICAgQVBJX0JBU0U6IHByb2Nlc3MuZW52LkFQSV9CQVNFLFxuICAgIFRTQV9VUkw6IHByb2Nlc3MuZW52LlRTQV9VUkwgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVFNBX1VSTCxcbiAgICBDRVJUX1BST0ZJTEVfSUQ6IHByb2Nlc3MuZW52LkNFUlRfUFJPRklMRV9JRCxcbiAgICBDT05GT1JNSU5HX1BST0RVQ1RfSUQ6IHByb2Nlc3MuZW52LkNPTkZPUk1JTkdfUFJPRFVDVF9JRCxcbiAgfSk7XG4gIHJldHVybiBlbnY7XG59XG4iXSwibmFtZXMiOlsieiIsIkVudlNjaGVtYSIsIm9iamVjdCIsIkFDQ09VTlRfSUQiLCJzdHJpbmciLCJtaW4iLCJvcHRpb25hbCIsIkFVVEhfVE9LRU4iLCJBUElfQkFTRSIsInVybCIsImRlZmF1bHQiLCJUU0FfVVJMIiwiQ0VSVF9QUk9GSUxFX0lEIiwiQ09ORk9STUlOR19QUk9EVUNUX0lEIiwiZ2V0RW52IiwiZW52IiwicGFyc2UiLCJwcm9jZXNzIiwiTkVYVF9QVUJMSUNfVFNBX1VSTCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ids.ts":
/*!********************!*\
  !*** ./lib/ids.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rid: () => (/* binding */ rid)\n/* harmony export */ });\nfunction rid(prefix = 'req_') {\n    return prefix + Math.random().toString(36).slice(2);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvaWRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxTQUFTQSxJQUFJQyxTQUFTLE1BQU07SUFDakMsT0FBT0EsU0FBU0MsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsS0FBSyxDQUFDO0FBQ25EIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbGliL2lkcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcmlkKHByZWZpeCA9ICdyZXFfJykge1xuICByZXR1cm4gcHJlZml4ICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG59XG5cbiJdLCJuYW1lcyI6WyJyaWQiLCJwcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzbGljZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/ids.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logger.ts":
/*!***********************!*\
  !*** ./lib/logger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   log: () => (/* binding */ log),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\nfunction redact(value) {\n    if (!value) return undefined;\n    return value.length <= 8 ? '***' : value.slice(0, 4) + '***' + value.slice(-2);\n}\nfunction log(level, msg, meta = {}) {\n    const out = {\n        level,\n        msg,\n        ...meta,\n        t: new Date().toISOString()\n    };\n    // mask common secret fields\n    if ('token' in out && typeof out.token === 'string') {\n        out.token = redact(out.token);\n    }\n    if ('AUTH_TOKEN' in out && typeof out.AUTH_TOKEN === 'string') {\n        out.AUTH_TOKEN = redact(out.AUTH_TOKEN);\n    }\n    try {\n        // eslint-disable-next-line no-console\n        console.log(JSON.stringify(out));\n    } catch  {\n        // eslint-disable-next-line no-console\n        console.log(level.toUpperCase(), msg, meta);\n    }\n}\nconst logger = {\n    debug: (m, meta)=>log('debug', m, meta),\n    info: (m, meta)=>log('info', m, meta),\n    warn: (m, meta)=>log('warn', m, meta),\n    error: (m, meta)=>log('error', m, meta)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRUEsU0FBU0EsT0FBT0MsS0FBYztJQUM1QixJQUFJLENBQUNBLE9BQU8sT0FBT0M7SUFDbkIsT0FBT0QsTUFBTUUsTUFBTSxJQUFJLElBQUksUUFBUUYsTUFBTUcsS0FBSyxDQUFDLEdBQUcsS0FBSyxRQUFRSCxNQUFNRyxLQUFLLENBQUMsQ0FBQztBQUM5RTtBQUVPLFNBQVNDLElBQUlDLEtBQVksRUFBRUMsR0FBVyxFQUFFQyxPQUFnQyxDQUFDLENBQUM7SUFDL0UsTUFBTUMsTUFBK0I7UUFDbkNIO1FBQ0FDO1FBQ0EsR0FBR0MsSUFBSTtRQUNQRSxHQUFHLElBQUlDLE9BQU9DLFdBQVc7SUFDM0I7SUFDQSw0QkFBNEI7SUFDNUIsSUFBSSxXQUFXSCxPQUFPLE9BQU9BLElBQUlJLEtBQUssS0FBSyxVQUFVO1FBQ25ESixJQUFJSSxLQUFLLEdBQUdiLE9BQU9TLElBQUlJLEtBQUs7SUFDOUI7SUFDQSxJQUFJLGdCQUFnQkosT0FBTyxPQUFPQSxJQUFJSyxVQUFVLEtBQUssVUFBVTtRQUM3REwsSUFBSUssVUFBVSxHQUFHZCxPQUFPUyxJQUFJSyxVQUFVO0lBQ3hDO0lBQ0EsSUFBSTtRQUNGLHNDQUFzQztRQUN0Q0MsUUFBUVYsR0FBRyxDQUFDVyxLQUFLQyxTQUFTLENBQUNSO0lBQzdCLEVBQUUsT0FBTTtRQUNOLHNDQUFzQztRQUN0Q00sUUFBUVYsR0FBRyxDQUFDQyxNQUFNWSxXQUFXLElBQUlYLEtBQUtDO0lBQ3hDO0FBQ0Y7QUFFTyxNQUFNVyxTQUFTO0lBQ3BCQyxPQUFPLENBQUNDLEdBQVdiLE9BQW1DSCxJQUFJLFNBQVNnQixHQUFHYjtJQUN0RWMsTUFBTSxDQUFDRCxHQUFXYixPQUFtQ0gsSUFBSSxRQUFRZ0IsR0FBR2I7SUFDcEVlLE1BQU0sQ0FBQ0YsR0FBV2IsT0FBbUNILElBQUksUUFBUWdCLEdBQUdiO0lBQ3BFZ0IsT0FBTyxDQUFDSCxHQUFXYixPQUFtQ0gsSUFBSSxTQUFTZ0IsR0FBR2I7QUFDeEUsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL2xpYi9sb2dnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBMZXZlbCA9ICdkZWJ1ZycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InO1xuXG5mdW5jdGlvbiByZWRhY3QodmFsdWU/OiBzdHJpbmcpIHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgcmV0dXJuIHZhbHVlLmxlbmd0aCA8PSA4ID8gJyoqKicgOiB2YWx1ZS5zbGljZSgwLCA0KSArICcqKionICsgdmFsdWUuc2xpY2UoLTIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nKGxldmVsOiBMZXZlbCwgbXNnOiBzdHJpbmcsIG1ldGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge30pIHtcbiAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICBsZXZlbCxcbiAgICBtc2csXG4gICAgLi4ubWV0YSxcbiAgICB0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG4gIC8vIG1hc2sgY29tbW9uIHNlY3JldCBmaWVsZHNcbiAgaWYgKCd0b2tlbicgaW4gb3V0ICYmIHR5cGVvZiBvdXQudG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgb3V0LnRva2VuID0gcmVkYWN0KG91dC50b2tlbiBhcyBzdHJpbmcpO1xuICB9XG4gIGlmICgnQVVUSF9UT0tFTicgaW4gb3V0ICYmIHR5cGVvZiBvdXQuQVVUSF9UT0tFTiA9PT0gJ3N0cmluZycpIHtcbiAgICBvdXQuQVVUSF9UT0tFTiA9IHJlZGFjdChvdXQuQVVUSF9UT0tFTiBhcyBzdHJpbmcpO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShvdXQpKTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyhsZXZlbC50b1VwcGVyQ2FzZSgpLCBtc2csIG1ldGEpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSB7XG4gIGRlYnVnOiAobTogc3RyaW5nLCBtZXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IGxvZygnZGVidWcnLCBtLCBtZXRhKSxcbiAgaW5mbzogKG06IHN0cmluZywgbWV0YT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiBsb2coJ2luZm8nLCBtLCBtZXRhKSxcbiAgd2FybjogKG06IHN0cmluZywgbWV0YT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiBsb2coJ3dhcm4nLCBtLCBtZXRhKSxcbiAgZXJyb3I6IChtOiBzdHJpbmcsIG1ldGE/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4gbG9nKCdlcnJvcicsIG0sIG1ldGEpLFxufTtcbiJdLCJuYW1lcyI6WyJyZWRhY3QiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsImxlbmd0aCIsInNsaWNlIiwibG9nIiwibGV2ZWwiLCJtc2ciLCJtZXRhIiwib3V0IiwidCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInRva2VuIiwiQVVUSF9UT0tFTiIsImNvbnNvbGUiLCJKU09OIiwic3RyaW5naWZ5IiwidG9VcHBlckNhc2UiLCJsb2dnZXIiLCJkZWJ1ZyIsIm0iLCJpbmZvIiwid2FybiIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/rateLimit.ts":
/*!**************************!*\
  !*** ./lib/rateLimit.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit)\n/* harmony export */ });\nconst buckets = new Map();\nfunction rateLimit(options) {\n    const now = Date.now();\n    const sec = 1000;\n    const { key, capacity, refillPerSec } = options;\n    const refillInterval = sec / Math.max(refillPerSec, 1);\n    const counter = buckets.get(key) || {\n        tokens: capacity,\n        lastRefill: now\n    };\n    if (now - counter.lastRefill >= refillInterval) {\n        const elapsed = now - counter.lastRefill;\n        const tokensToAdd = Math.floor(elapsed / refillInterval);\n        counter.tokens = Math.min(capacity, counter.tokens + tokensToAdd);\n        counter.lastRefill = now;\n    }\n    if (counter.tokens > 0) {\n        counter.tokens -= 1;\n        buckets.set(key, counter);\n        return {\n            ok: true\n        };\n    } else {\n        buckets.set(key, counter);\n        return {\n            ok: false\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcmF0ZUxpbWl0LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFPQSxNQUFNQSxVQUFVLElBQUlDO0FBRWIsU0FBU0MsVUFBVUMsT0FBNkQ7SUFDckYsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUNwQixNQUFNRSxNQUFNO0lBQ1osTUFBTSxFQUFFQyxHQUFHLEVBQUVDLFFBQVEsRUFBRUMsWUFBWSxFQUFFLEdBQUdOO0lBQ3hDLE1BQU1PLGlCQUFpQkosTUFBTUssS0FBS0MsR0FBRyxDQUFDSCxjQUFjO0lBQ3BELE1BQU1JLFVBQVViLFFBQVFjLEdBQUcsQ0FBQ1AsUUFBUTtRQUFFUSxRQUFRUDtRQUFVUSxZQUFZWjtJQUFJO0lBRXhFLElBQUlBLE1BQU1TLFFBQVFHLFVBQVUsSUFBSU4sZ0JBQWdCO1FBQzlDLE1BQU1PLFVBQVViLE1BQU1TLFFBQVFHLFVBQVU7UUFDeEMsTUFBTUUsY0FBY1AsS0FBS1EsS0FBSyxDQUFDRixVQUFVUDtRQUN6Q0csUUFBUUUsTUFBTSxHQUFHSixLQUFLUyxHQUFHLENBQUNaLFVBQVVLLFFBQVFFLE1BQU0sR0FBR0c7UUFDckRMLFFBQVFHLFVBQVUsR0FBR1o7SUFDdkI7SUFFQSxJQUFJUyxRQUFRRSxNQUFNLEdBQUcsR0FBRztRQUN0QkYsUUFBUUUsTUFBTSxJQUFJO1FBQ2xCZixRQUFRcUIsR0FBRyxDQUFDZCxLQUFLTTtRQUNqQixPQUFPO1lBQUVTLElBQUk7UUFBSztJQUNwQixPQUFPO1FBQ0x0QixRQUFRcUIsR0FBRyxDQUFDZCxLQUFLTTtRQUNqQixPQUFPO1lBQUVTLElBQUk7UUFBTTtJQUNyQjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbGliL3JhdGVMaW1pdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIEtleSA9IHN0cmluZztcblxudHlwZSBDb3VudGVyID0ge1xuICB0b2tlbnM6IG51bWJlcjtcbiAgbGFzdFJlZmlsbDogbnVtYmVyOyAvLyBtcyBlcG9jaFxufTtcblxuY29uc3QgYnVja2V0cyA9IG5ldyBNYXA8S2V5LCBDb3VudGVyPigpO1xuXG5leHBvcnQgZnVuY3Rpb24gcmF0ZUxpbWl0KG9wdGlvbnM6IHsga2V5OiBLZXk7IGNhcGFjaXR5OiBudW1iZXI7IHJlZmlsbFBlclNlYzogbnVtYmVyIH0pIHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3Qgc2VjID0gMTAwMDtcbiAgY29uc3QgeyBrZXksIGNhcGFjaXR5LCByZWZpbGxQZXJTZWMgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHJlZmlsbEludGVydmFsID0gc2VjIC8gTWF0aC5tYXgocmVmaWxsUGVyU2VjLCAxKTtcbiAgY29uc3QgY291bnRlciA9IGJ1Y2tldHMuZ2V0KGtleSkgfHwgeyB0b2tlbnM6IGNhcGFjaXR5LCBsYXN0UmVmaWxsOiBub3cgfTtcblxuICBpZiAobm93IC0gY291bnRlci5sYXN0UmVmaWxsID49IHJlZmlsbEludGVydmFsKSB7XG4gICAgY29uc3QgZWxhcHNlZCA9IG5vdyAtIGNvdW50ZXIubGFzdFJlZmlsbDtcbiAgICBjb25zdCB0b2tlbnNUb0FkZCA9IE1hdGguZmxvb3IoZWxhcHNlZCAvIHJlZmlsbEludGVydmFsKTtcbiAgICBjb3VudGVyLnRva2VucyA9IE1hdGgubWluKGNhcGFjaXR5LCBjb3VudGVyLnRva2VucyArIHRva2Vuc1RvQWRkKTtcbiAgICBjb3VudGVyLmxhc3RSZWZpbGwgPSBub3c7XG4gIH1cblxuICBpZiAoY291bnRlci50b2tlbnMgPiAwKSB7XG4gICAgY291bnRlci50b2tlbnMgLT0gMTtcbiAgICBidWNrZXRzLnNldChrZXksIGNvdW50ZXIpO1xuICAgIHJldHVybiB7IG9rOiB0cnVlIH0gYXMgY29uc3Q7XG4gIH0gZWxzZSB7XG4gICAgYnVja2V0cy5zZXQoa2V5LCBjb3VudGVyKTtcbiAgICByZXR1cm4geyBvazogZmFsc2UgfSBhcyBjb25zdDtcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiYnVja2V0cyIsIk1hcCIsInJhdGVMaW1pdCIsIm9wdGlvbnMiLCJub3ciLCJEYXRlIiwic2VjIiwia2V5IiwiY2FwYWNpdHkiLCJyZWZpbGxQZXJTZWMiLCJyZWZpbGxJbnRlcnZhbCIsIk1hdGgiLCJtYXgiLCJjb3VudGVyIiwiZ2V0IiwidG9rZW5zIiwibGFzdFJlZmlsbCIsImVsYXBzZWQiLCJ0b2tlbnNUb0FkZCIsImZsb29yIiwibWluIiwic2V0Iiwib2siXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/rateLimit.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcert-requests%2Froute&page=%2Fapi%2Fcert-requests%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcert-requests%2Froute.ts&appDir=%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcert-requests%2Froute&page=%2Fapi%2Fcert-requests%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcert-requests%2Froute.ts&appDir=%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_jeremiah_Desktop_c2pa_tool_app_api_cert_requests_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/cert-requests/route.ts */ \"(rsc)/./app/api/cert-requests/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/cert-requests/route\",\n        pathname: \"/api/cert-requests\",\n        filename: \"route\",\n        bundlePath: \"app/api/cert-requests/route\"\n    },\n    resolvedPagePath: \"/Users/jeremiah/Desktop/c2pa tool/app/api/cert-requests/route.ts\",\n    nextConfigOutput,\n    userland: _Users_jeremiah_Desktop_c2pa_tool_app_api_cert_requests_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjZXJ0LXJlcXVlc3RzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjZXJ0LXJlcXVlc3RzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2VydC1yZXF1ZXN0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmplcmVtaWFoJTJGRGVza3RvcCUyRmMycGElMjB0b29sJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmplcmVtaWFoJTJGRGVza3RvcCUyRmMycGElMjB0b29sJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNnQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL2FwcC9hcGkvY2VydC1yZXF1ZXN0cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2VydC1yZXF1ZXN0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NlcnQtcmVxdWVzdHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NlcnQtcmVxdWVzdHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvYXBwL2FwaS9jZXJ0LXJlcXVlc3RzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcert-requests%2Froute&page=%2Fapi%2Fcert-requests%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcert-requests%2Froute.ts&appDir=%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry+api@1.9.0","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcert-requests%2Froute&page=%2Fapi%2Fcert-requests%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcert-requests%2Froute.ts&appDir=%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();