/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["app/page"],{

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Page)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/image */ \"(app-pages-browser)/./node_modules/next/dist/api/image.js\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-hot-toast */ \"(app-pages-browser)/./node_modules/react-hot-toast/dist/index.mjs\");\n/* harmony import */ var _components_Card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/Card */ \"(app-pages-browser)/./components/Card.tsx\");\n/* harmony import */ var _components_Dropzone__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/Dropzone */ \"(app-pages-browser)/./components/Dropzone.tsx\");\n/* harmony import */ var _lib_manifest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/manifest */ \"(app-pages-browser)/./lib/manifest.ts\");\n/* harmony import */ var _lib_csr__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/csr */ \"(app-pages-browser)/./lib/csr.ts\");\n/* harmony import */ var _lib_c2paClient__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/c2paClient */ \"(app-pages-browser)/./lib/c2paClient.ts\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\nfunction toPem(type, data) {\n    const bytes = new Uint8Array(data);\n    let bin = '';\n    for(let i = 0; i < bytes.byteLength; i++)bin += String.fromCharCode(bytes[i]);\n    const b64 = btoa(bin);\n    const wrapped = b64.replace(/(.{64})/g, '$1\\n');\n    return \"-----BEGIN \".concat(type, \"-----\\n\").concat(wrapped, \"\\n-----END \").concat(type, \"-----\");\n}\nasync function exportKeys(kp) {\n    // Export in PKCS#8 format (standard format)\n    const pkcs8 = await crypto.subtle.exportKey('pkcs8', kp.privateKey);\n    const pkcs8Pem = toPem('PRIVATE KEY', pkcs8);\n    // Also export for EC-specific PEM (c2patool may prefer this)\n    // PKCS#8 is fine for most tools, but we'll label it correctly\n    const ecPem = toPem('PRIVATE KEY', pkcs8);\n    const spki = await crypto.subtle.exportKey('spki', kp.publicKey);\n    return {\n        pkcs8Pem,\n        ecPem,\n        spkiPem: toPem('PUBLIC KEY', spki)\n    };\n}\nfunction Page() {\n    _s();\n    const [keys, setKeys] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('Keys in memory only • not uploaded');\n    const [certPem, setCertPem] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [csrPem, setCsrPem] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [manifestJson, setManifestJson] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(JSON.stringify(_lib_manifest__WEBPACK_IMPORTED_MODULE_6__.Presets.minimal, null, 2));\n    const [manifestError, setManifestError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [imageFile, setImageFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [verifyReport, setVerifyReport] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [showCurl, setShowCurl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [tsaAlgo, setTsaAlgo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('ecc');\n    // CSR fields\n    const [subjectCN, setSubjectCN] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [subjectO, setSubjectO] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [subjectC, setSubjectC] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    // Profile IDs (RSA/ECC) provided by your VP Eng\n    const PROFILES = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"Page.useMemo[PROFILES]\": ()=>[\n                {\n                    id: '6ba3b70c-38fe-44c3-803f-910c5873d1d6',\n                    name: 'RSA C2PA Profile'\n                },\n                {\n                    id: '764b6cdd-1c1b-4a46-9967-22a112a0b390',\n                    name: 'ECC C2PA Profile'\n                }\n            ]\n    }[\"Page.useMemo[PROFILES]\"], []);\n    const defaultProfile = process.env.NEXT_PUBLIC_CERT_PROFILE_ID || PROFILES[1].id; // default ECC\n    const [profileId, setProfileId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultProfile);\n    const defaultProductId = process.env.NEXT_PUBLIC_CONFORMING_PRODUCT_ID || (typeof crypto !== 'undefined' && 'randomUUID' in crypto ? crypto.randomUUID() : '');\n    const [conformingProductId, setConformingProductId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultProductId);\n    const [useServerSigner, setUseServerSigner] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true); // demo mode: server-side c2patool\n    const haveKeys = !!keys.privateKey && !!keys.publicKey;\n    const canSign = useServerSigner ? !!imageFile : haveKeys && !!certPem && !!imageFile && !!keys.pkcs8Pem;\n    const [preset, setPreset] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('minimal');\n    const generateKeysAndCsr = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Page.useCallback[generateKeysAndCsr]\": async ()=>{\n            try {\n                setStatus('Generating EC P-256 keypair…');\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].loading('Generating keys...', {\n                    id: 'keygen'\n                });\n                const kp = await crypto.subtle.generateKey({\n                    name: 'ECDSA',\n                    namedCurve: 'P-256'\n                }, true, [\n                    'sign',\n                    'verify'\n                ]);\n                const exported = await exportKeys(kp);\n                setKeys({\n                    privateKey: kp.privateKey,\n                    publicKey: kp.publicKey,\n                    ...exported\n                });\n                const csr = await (0,_lib_csr__WEBPACK_IMPORTED_MODULE_7__.generateCsrPem)({\n                    publicKey: kp.publicKey,\n                    privateKey: kp.privateKey,\n                    subject: {\n                        CN: subjectCN || undefined,\n                        O: subjectO || undefined,\n                        C: subjectC || undefined\n                    }\n                });\n                setCsrPem(csr);\n                setStatus('Keys ready in memory • not uploaded');\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].success('Keys and CSR generated successfully!', {\n                    id: 'keygen'\n                });\n            } catch (e) {\n                setCsrPem('');\n                const msg = (e === null || e === void 0 ? void 0 : e.message) || String(e);\n                setStatus(\"Error: \".concat(msg));\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(\"Failed to generate keys: \".concat(msg), {\n                    id: 'keygen'\n                });\n            }\n        }\n    }[\"Page.useCallback[generateKeysAndCsr]\"], [\n        subjectCN,\n        subjectO,\n        subjectC\n    ]);\n    const requestCertificate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Page.useCallback[requestCertificate]\": async ()=>{\n            setCertPem('');\n            setStatus('Requesting certificate…');\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].loading('Requesting certificate from SSL.com...', {\n                id: 'cert'\n            });\n            try {\n                const res = await fetch('/api/cert-requests', {\n                    method: 'POST',\n                    headers: {\n                        'content-type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        csr: csrPem || '---PEM CSR---',\n                        profileId: profileId || undefined,\n                        conformingProductId: conformingProductId || undefined,\n                        subject: {\n                            CN: subjectCN || undefined,\n                            O: subjectO || undefined,\n                            C: subjectC || undefined\n                        }\n                    })\n                });\n                const data = await res.json();\n                if (!res.ok) throw new Error((data === null || data === void 0 ? void 0 : data.error) || 'Request failed');\n                setCertPem(data.certificatePem || '');\n                setStatus('Certificate received');\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].success('Certificate received successfully!', {\n                    id: 'cert'\n                });\n            } catch (e) {\n                const msg = e.message || String(e);\n                setStatus(\"Error: \".concat(msg));\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(\"Failed to get certificate: \".concat(msg), {\n                    id: 'cert'\n                });\n            }\n        }\n    }[\"Page.useCallback[requestCertificate]\"], [\n        csrPem,\n        profileId,\n        conformingProductId,\n        subjectCN,\n        subjectO,\n        subjectC\n    ]);\n    const onDropImage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Page.useCallback[onDropImage]\": (file)=>{\n            setImageFile(file);\n        }\n    }[\"Page.useCallback[onDropImage]\"], []);\n    const signImage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Page.useCallback[signImage]\": async ()=>{\n            if (!imageFile) return;\n            try {\n                const parsed = JSON.parse(manifestJson);\n                const res = _lib_manifest__WEBPACK_IMPORTED_MODULE_6__.ManifestSchema.safeParse(parsed);\n                if (!res.success) {\n                    setManifestError('Invalid manifest');\n                    react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Invalid manifest JSON');\n                    return;\n                }\n                setManifestError('');\n                setStatus('Signing image…');\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].loading('Signing image...', {\n                    id: 'sign'\n                });\n                // All signing now happens server-side using c2patool\n                const form = new FormData();\n                form.append('file', imageFile);\n                form.append('manifest', JSON.stringify(res.data));\n                // Add user credentials if not in demo mode\n                if (!useServerSigner) {\n                    if (!keys.pkcs8Pem || !certPem) throw new Error('Missing certificate or private key');\n                    form.append('certPem', certPem);\n                    form.append('privateKeyPem', keys.pkcs8Pem);\n                }\n                const resp = await fetch('/api/sign', {\n                    method: 'POST',\n                    body: form\n                });\n                if (!resp.ok) {\n                    let msg = 'Signing failed';\n                    let hint = '';\n                    const ct = resp.headers.get('content-type') || '';\n                    try {\n                        if (ct.includes('application/json')) {\n                            const j = await resp.json();\n                            msg = (j === null || j === void 0 ? void 0 : j.detail) || (j === null || j === void 0 ? void 0 : j.error) || JSON.stringify(j);\n                            hint = (j === null || j === void 0 ? void 0 : j.hint) || '';\n                        } else {\n                            msg = await resp.text();\n                        }\n                    } catch (e) {}\n                    const fullMsg = hint ? \"\".concat(msg, \"\\n\\n\").concat(hint) : msg;\n                    throw new Error((fullMsg || '').toString().slice(0, 800));\n                }\n                const blob = await resp.blob();\n                const url = URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = 'signed-' + (imageFile.name || 'image');\n                a.click();\n                URL.revokeObjectURL(url);\n                setVerifyReport(useServerSigner ? 'Signed (demo mode with default cert)' : 'Signed (with your SSL.com cert)');\n                setStatus('Image signed successfully');\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].success('Image signed and downloaded!', {\n                    id: 'sign'\n                });\n            } catch (e) {\n                const msg = e instanceof Error ? e.message : String(e);\n                setStatus(\"Error: \".concat(msg));\n                // Show longer toast for errors with hints (demo mode errors)\n                const duration = msg.includes('Quick fix') || msg.includes('c2patool') ? 10000 : 6000;\n                const displayMsg = msg.length > 300 ? msg.slice(0, 300) + '...' : msg;\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(\"Signing failed:\\n\\n\".concat(displayMsg), {\n                    id: 'sign',\n                    duration,\n                    style: {\n                        maxWidth: '600px'\n                    }\n                });\n            }\n        }\n    }[\"Page.useCallback[signImage]\"], [\n        imageFile,\n        keys.privateKey,\n        keys.pkcs8Pem,\n        certPem,\n        manifestJson,\n        useServerSigner\n    ]);\n    const verifyOnly = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Page.useCallback[verifyOnly]\": async ()=>{\n            if (!imageFile) return;\n            setStatus('Verifying…');\n            const report = await (0,_lib_c2paClient__WEBPACK_IMPORTED_MODULE_8__.verifyAsset)(imageFile);\n            setVerifyReport(JSON.stringify(report, null, 2));\n        }\n    }[\"Page.useCallback[verifyOnly]\"], [\n        imageFile\n    ]);\n    const imagePreviewUrl = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"Page.useMemo[imagePreviewUrl]\": ()=>imageFile ? URL.createObjectURL(imageFile) : ''\n    }[\"Page.useMemo[imagePreviewUrl]\"], [\n        imageFile\n    ]);\n    const curlCommand = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"Page.useMemo[curlCommand]\": ()=>{\n            const apiBase = process.env.NEXT_PUBLIC_API_BASE || 'https://api.c2patool.io';\n            const bodyOut = {\n                certificate_profile_id: profileId || undefined,\n                certificate_signing_request: csrPem || '-----BEGIN CERTIFICATE REQUEST-----\\\\n...\\\\n-----END CERTIFICATE REQUEST-----',\n                conforming_product_id: conformingProductId || undefined\n            };\n            const subj = {\n                CN: subjectCN || undefined,\n                O: subjectO || undefined,\n                C: subjectC || undefined\n            };\n            if (subj.CN || subj.O || subj.C) bodyOut.experimental = subj;\n            const json = JSON.stringify(bodyOut);\n            const cmd = [\n                \"curl --location '\".concat(apiBase, \"/api/v1/certificate-requests' \\\\\"),\n                \"--header 'Content-Type: application/json' \\\\\",\n                \"--header 'Authorization: Bearer 9b049052a999e98dd5c63b480c523c703a9df4d633910310f0b965bc278993ab' \\\\\",\n                \"--data '\".concat(json, \"'\")\n            ].join('\\n');\n            return cmd;\n        }\n    }[\"Page.useMemo[curlCommand]\"], [\n        profileId,\n        csrPem,\n        conformingProductId,\n        subjectCN,\n        subjectO,\n        subjectC\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"space-y-6\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Developer tool for testing SSL.com C2PA API endpoints. Configure your own credentials or use the shared test token provided.\"\n            }, void 0, false, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                lineNumber: 230,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Card__WEBPACK_IMPORTED_MODULE_4__.Card, {\n                title: \"Keys & Certificate\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-xs text-gray-500\",\n                        children: status\n                    }, void 0, false, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 234,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4 flex flex-wrap gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-50\",\n                                onClick: generateKeysAndCsr,\n                                children: \"Generate Keys & CSR\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 236,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-50\",\n                                onClick: requestCertificate,\n                                disabled: !haveKeys,\n                                children: \"Request Certificate\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 239,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"px-3 py-2 rounded border\",\n                                type: \"button\",\n                                onClick: ()=>setShowCurl((s)=>!s),\n                                children: [\n                                    showCurl ? 'Hide' : 'Show',\n                                    \" API cURL\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 242,\n                                columnNumber: 11\n                            }, this),\n                            keys.pkcs8Pem && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                className: \"px-3 py-2 rounded border text-blue-700 border-blue-200\",\n                                href: \"data:application/x-pem-file;charset=utf-8,\".concat(encodeURIComponent(keys.pkcs8Pem)),\n                                download: \"private_key.pk8.pem\",\n                                children: \"Download Private Key\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 246,\n                                columnNumber: 13\n                            }, this),\n                            certPem && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                className: \"px-3 py-2 rounded border text-blue-700 border-blue-200\",\n                                href: \"data:application/x-pem-file;charset=utf-8,\".concat(encodeURIComponent(certPem)),\n                                download: \"certificate.pem\",\n                                children: \"Download Cert\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 255,\n                                columnNumber: 13\n                            }, this),\n                            csrPem && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                className: \"px-3 py-2 rounded border text-blue-700 border-blue-200\",\n                                href: \"data:application/pkcs10;charset=utf-8,\".concat(encodeURIComponent(csrPem)),\n                                download: \"request.csr.pem\",\n                                children: \"Download CSR\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 264,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 235,\n                        columnNumber: 9\n                    }, this),\n                    showCurl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                className: \"block text-xs text-gray-600 mb-1\",\n                                children: \"Certificate Request — cURL (copy and use in your app)\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 275,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                                className: \"p-3 bg-gray-50 border rounded text-[12px] whitespace-pre-wrap break-all\",\n                                children: curlCommand\n                            }, void 0, false, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 276,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-2 flex gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        type: \"button\",\n                                        className: \"px-3 py-2 rounded border\",\n                                        onClick: ()=>{\n                                            var _navigator_clipboard;\n                                            return (_navigator_clipboard = navigator.clipboard) === null || _navigator_clipboard === void 0 ? void 0 : _navigator_clipboard.writeText(curlCommand);\n                                        },\n                                        children: \"Copy\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 278,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-[11px] text-gray-500\",\n                                        children: \"Replace <YOUR_ACCOUNT_TOKEN> with your account token. Shared test token is pre-filled for quick testing.\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 285,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 277,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 274,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"block text-xs text-gray-600\",\n                                        children: \"Subject CN\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 291,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        className: \"w-full border rounded px-2 py-1\",\n                                        value: subjectCN,\n                                        onChange: (e)=>setSubjectCN(e.target.value)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 292,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 290,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"block text-xs text-gray-600\",\n                                        children: \"Subject O\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 295,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        className: \"w-full border rounded px-2 py-1\",\n                                        value: subjectO,\n                                        onChange: (e)=>setSubjectO(e.target.value)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 296,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 294,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"block text-xs text-gray-600\",\n                                        children: \"Subject C\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 299,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        className: \"w-full border rounded px-2 py-1\",\n                                        value: subjectC,\n                                        onChange: (e)=>setSubjectC(e.target.value)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 300,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 298,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"block text-xs text-gray-600\",\n                                        children: \"Profile\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 303,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                        className: \"w-full border rounded px-2 py-2 text-sm\",\n                                        value: profileId,\n                                        onChange: (e)=>setProfileId(e.target.value),\n                                        children: PROFILES.map((p)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                value: p.id,\n                                                children: p.name\n                                            }, p.id, false, {\n                                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                                lineNumber: 310,\n                                                columnNumber: 17\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 304,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-[11px] text-gray-500 mt-1\",\n                                        children: \"Autofills known RSA/ECC profile IDs\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 313,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 302,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"block text-xs text-gray-600\",\n                                        children: \"Conforming Product ID\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 316,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                className: \"w-full border rounded px-2 py-1\",\n                                                value: conformingProductId,\n                                                onChange: (e)=>setConformingProductId(e.target.value)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                                lineNumber: 318,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                type: \"button\",\n                                                className: \"px-2 py-1 text-xs border rounded\",\n                                                onClick: ()=>setConformingProductId(typeof crypto !== 'undefined' && 'randomUUID' in crypto ? crypto.randomUUID() : ''),\n                                                children: \"Random\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                                lineNumber: 319,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 317,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-[11px] text-gray-500 mt-1\",\n                                        children: \"Prefill with a random UUID, or paste your own\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 327,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 315,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 289,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                lineNumber: 233,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Card__WEBPACK_IMPORTED_MODULE_4__.Card, {\n                title: \"Image & Manifest\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-3 grid grid-cols-1 md:grid-cols-2 gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Image\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                    lineNumber: 336,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Dropzone__WEBPACK_IMPORTED_MODULE_5__.Dropzone, {\n                                    onFile: onDropImage\n                                }, void 0, false, {\n                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                    lineNumber: 337,\n                                    columnNumber: 13\n                                }, this),\n                                imagePreviewUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                    src: imagePreviewUrl,\n                                    alt: \"preview\",\n                                    width: 320,\n                                    height: 240,\n                                    className: \"mt-2 rounded border object-contain\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                    lineNumber: 339,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                            lineNumber: 335,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Manifest JSON\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                    lineNumber: 343,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                    className: \"w-full h-40 border rounded p-2 font-mono text-sm\",\n                                    value: manifestJson,\n                                    onChange: (e)=>setManifestJson(e.target.value)\n                                }, void 0, false, {\n                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                    lineNumber: 344,\n                                    columnNumber: 13\n                                }, this),\n                                manifestError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-red-600 mt-1\",\n                                    children: manifestError\n                                }, void 0, false, {\n                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                    lineNumber: 349,\n                                    columnNumber: 31\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mt-2 flex flex-wrap gap-2 items-center\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            className: \"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-50\",\n                                            disabled: !canSign,\n                                            onClick: signImage,\n                                            children: \"Sign Image\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 351,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"inline-flex items-center gap-2 text-xs text-gray-700\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    type: \"checkbox\",\n                                                    checked: useServerSigner,\n                                                    onChange: (e)=>setUseServerSigner(e.target.checked)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                                    lineNumber: 355,\n                                                    columnNumber: 17\n                                                }, this),\n                                                \"Quick demo mode (no credentials needed)\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 354,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            className: \"px-3 py-2 rounded border\",\n                                            onClick: ()=>setManifestJson(JSON.stringify(JSON.parse(manifestJson), null, 2)),\n                                            children: \"Format\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 358,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"text-xs text-gray-600\",\n                                            children: \"Preset\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 359,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                            className: \"px-2 py-2 border rounded text-sm\",\n                                            value: preset,\n                                            onChange: (e)=>{\n                                                const v = e.target.value;\n                                                setPreset(v);\n                                                setManifestJson(JSON.stringify(_lib_manifest__WEBPACK_IMPORTED_MODULE_6__.Presets[v], null, 2));\n                                            },\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                    value: \"minimal\",\n                                                    children: \"Minimal\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                                    lineNumber: 369,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                    value: \"editorial\",\n                                                    children: \"Editorial\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                                    lineNumber: 370,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 360,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"text-xs text-gray-600\",\n                                            children: \"TSA\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 372,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                            className: \"px-2 py-2 border rounded text-sm\",\n                                            value: tsaAlgo,\n                                            onChange: (e)=>{\n                                                const algo = e.target.value;\n                                                setTsaAlgo(algo);\n                                                try {\n                                                    const parsed = JSON.parse(manifestJson);\n                                                    parsed.ta_url = algo === 'rsa' ? 'https://api.staging.c2pa.ssl.com/v1/timestamp/rsa' : 'https://api.staging.c2pa.ssl.com/v1/timestamp';\n                                                    setManifestError('');\n                                                    setManifestJson(JSON.stringify(parsed, null, 2));\n                                                } catch (err) {\n                                                    setManifestError('Invalid JSON; cannot set TSA');\n                                                }\n                                            },\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                    value: \"ecc\",\n                                                    children: \"ECC (default)\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                                    lineNumber: 391,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                    value: \"rsa\",\n                                                    children: \"RSA\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                                    lineNumber: 392,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 373,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            className: \"px-3 py-2 rounded border\",\n                                            onClick: ()=>setManifestJson('{}'),\n                                            children: \"Reset\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 394,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            className: \"px-3 py-2 rounded border\",\n                                            onClick: ()=>{\n                                                try {\n                                                    const parsed = JSON.parse(manifestJson);\n                                                    const res = _lib_manifest__WEBPACK_IMPORTED_MODULE_6__.ManifestSchema.safeParse(parsed);\n                                                    if (!res.success) throw new Error('Invalid manifest');\n                                                    setManifestError('');\n                                                    const blob = new Blob([\n                                                        JSON.stringify(res.data, null, 2)\n                                                    ], {\n                                                        type: 'application/json'\n                                                    });\n                                                    const url = URL.createObjectURL(blob);\n                                                    const a = document.createElement('a');\n                                                    a.href = url;\n                                                    a.download = 'manifest.json';\n                                                    a.click();\n                                                    URL.revokeObjectURL(url);\n                                                } catch (e) {\n                                                    const msg = e instanceof Error ? e.message : String(e);\n                                                    setManifestError(msg || 'Invalid JSON');\n                                                }\n                                            },\n                                            children: \"Download Manifest\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                            lineNumber: 395,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                    lineNumber: 350,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                            lineNumber: 342,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                    lineNumber: 334,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                lineNumber: 333,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Card__WEBPACK_IMPORTED_MODULE_4__.Card, {\n                title: \"Verify\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-3 flex gap-2 items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"px-3 py-2 rounded bg-blue-600 text-white\",\n                                onClick: verifyOnly,\n                                children: \"Verify\"\n                            }, void 0, false, {\n                                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                lineNumber: 426,\n                                columnNumber: 11\n                            }, this),\n                            verifyReport && (()=>{\n                                try {\n                                    const r = JSON.parse(verifyReport);\n                                    const status = (r.status || '').toLowerCase();\n                                    const cls = status === 'ok' ? 'bg-green-100 text-green-800 border-green-200' : status === 'warn' ? 'bg-amber-100 text-amber-800 border-amber-200' : 'bg-red-100 text-red-800 border-red-200';\n                                    const label = status === 'ok' ? 'Pass' : status === 'warn' ? 'Warnings' : 'Fail';\n                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"inline-flex items-center text-xs font-medium rounded px-2 py-1 border \".concat(cls),\n                                        children: label\n                                    }, void 0, false, {\n                                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                                        lineNumber: 435,\n                                        columnNumber: 22\n                                    }, this);\n                                } catch (e) {\n                                    return null;\n                                }\n                            })()\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 425,\n                        columnNumber: 9\n                    }, this),\n                    verifyReport && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                        className: \"mt-3 whitespace-pre-wrap text-sm bg-gray-50 border rounded p-3\",\n                        children: verifyReport\n                    }, void 0, false, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 442,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                lineNumber: 424,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                className: \"text-xs text-gray-500 mt-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: \"SSL.com C2PA Developer Tool • Test certificate issuance, signing, and verification APIs\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 447,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-2\",\n                        children: \"TSA Endpoints: ECC — https://api.staging.c2pa.ssl.com/v1/timestamp • RSA — https://api.staging.c2pa.ssl.com/v1/timestamp/rsa\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 448,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: \"Trust Bundles: ECC — https://api.staging.c2pa.ssl.com/repository/C2PA-ECC-TRUST-BUNDLE.pem • RSA — https://api.staging.c2pa.ssl.com/repository/C2PA-RSA-TRUST-BUNDLE.pem\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                        lineNumber: 449,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n                lineNumber: 446,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jeremiah/Desktop/c2pa tool/app/page.tsx\",\n        lineNumber: 229,\n        columnNumber: 5\n    }, this);\n}\n_s(Page, \"9/A4RCypEZ5hO7PDjW3eZA5MeuE=\");\n_c = Page;\nvar _c;\n$RefreshReg$(_c, \"Page\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9wYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUV1RDtBQUN4QjtBQUNLO0FBQ0s7QUFDUTtBQUNRO0FBQ2Q7QUFDSTtBQVMvQyxTQUFTVyxNQUFNQyxJQUFxRCxFQUFFQyxJQUFpQjtJQUNyRixNQUFNQyxRQUFRLElBQUlDLFdBQVdGO0lBQzdCLElBQUlHLE1BQU07SUFDVixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSUgsTUFBTUksVUFBVSxFQUFFRCxJQUFLRCxPQUFPRyxPQUFPQyxZQUFZLENBQUNOLEtBQUssQ0FBQ0csRUFBRTtJQUM5RSxNQUFNSSxNQUFNQyxLQUFLTjtJQUNqQixNQUFNTyxVQUFVRixJQUFJRyxPQUFPLENBQUMsWUFBWTtJQUN4QyxPQUFPLGNBQTRCRCxPQUFkWCxNQUFLLFdBQThCQSxPQUFyQlcsU0FBUSxlQUFrQixPQUFMWCxNQUFLO0FBQy9EO0FBRUEsZUFBZWEsV0FBV0MsRUFBaUI7SUFDekMsNENBQTRDO0lBQzVDLE1BQU1DLFFBQVEsTUFBTUMsT0FBT0MsTUFBTSxDQUFDQyxTQUFTLENBQUMsU0FBU0osR0FBR0ssVUFBVTtJQUNsRSxNQUFNQyxXQUFXckIsTUFBTSxlQUFlZ0I7SUFFdEMsNkRBQTZEO0lBQzdELDhEQUE4RDtJQUM5RCxNQUFNTSxRQUFRdEIsTUFBTSxlQUFlZ0I7SUFFbkMsTUFBTU8sT0FBTyxNQUFNTixPQUFPQyxNQUFNLENBQUNDLFNBQVMsQ0FBQyxRQUFRSixHQUFHUyxTQUFTO0lBQy9ELE9BQU87UUFDTEg7UUFDQUM7UUFDQUcsU0FBU3pCLE1BQU0sY0FBY3VCO0lBQy9CO0FBQ0Y7QUFFZSxTQUFTRzs7SUFDdEIsTUFBTSxDQUFDQyxNQUFNQyxRQUFRLEdBQUdyQywrQ0FBUUEsQ0FBYyxDQUFDO0lBQy9DLE1BQU0sQ0FBQ3NDLFFBQVFDLFVBQVUsR0FBR3ZDLCtDQUFRQSxDQUFTO0lBQzdDLE1BQU0sQ0FBQ3dDLFNBQVNDLFdBQVcsR0FBR3pDLCtDQUFRQSxDQUFTO0lBQy9DLE1BQU0sQ0FBQzBDLFFBQVFDLFVBQVUsR0FBRzNDLCtDQUFRQSxDQUFTO0lBQzdDLE1BQU0sQ0FBQzRDLGNBQWNDLGdCQUFnQixHQUFHN0MsK0NBQVFBLENBQVM4QyxLQUFLQyxTQUFTLENBQUN6QyxrREFBT0EsQ0FBQzBDLE9BQU8sRUFBRSxNQUFNO0lBQy9GLE1BQU0sQ0FBQ0MsZUFBZUMsaUJBQWlCLEdBQUdsRCwrQ0FBUUEsQ0FBUztJQUMzRCxNQUFNLENBQUNtRCxXQUFXQyxhQUFhLEdBQUdwRCwrQ0FBUUEsQ0FBYztJQUN4RCxNQUFNLENBQUNxRCxjQUFjQyxnQkFBZ0IsR0FBR3RELCtDQUFRQSxDQUFTO0lBQ3pELE1BQU0sQ0FBQ3VELFVBQVVDLFlBQVksR0FBR3hELCtDQUFRQSxDQUFVO0lBQ2xELE1BQU0sQ0FBQ3lELFNBQVNDLFdBQVcsR0FBRzFELCtDQUFRQSxDQUFnQjtJQUN0RCxhQUFhO0lBQ2IsTUFBTSxDQUFDMkQsV0FBV0MsYUFBYSxHQUFHNUQsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDNkQsVUFBVUMsWUFBWSxHQUFHOUQsK0NBQVFBLENBQUM7SUFDekMsTUFBTSxDQUFDK0QsVUFBVUMsWUFBWSxHQUFHaEUsK0NBQVFBLENBQUM7SUFDekMsZ0RBQWdEO0lBQ2hELE1BQU1pRSxXQUFXbEUsOENBQU9BO2tDQUN0QixJQUFPO2dCQUNMO29CQUFFbUUsSUFBSTtvQkFBd0NDLE1BQU07Z0JBQW1CO2dCQUN2RTtvQkFBRUQsSUFBSTtvQkFBd0NDLE1BQU07Z0JBQW1CO2FBQ3hFO2lDQUNELEVBQUU7SUFFSixNQUFNQyxpQkFBaUIsUUFBU0UsR0FBRyxDQUFDQywyQkFBMkIsSUFBZU4sUUFBUSxDQUFDLEVBQUUsQ0FBQ0MsRUFBRSxFQUFFLGNBQWM7SUFDNUcsTUFBTSxDQUFDTSxXQUFXQyxhQUFhLEdBQUd6RSwrQ0FBUUEsQ0FBU29FO0lBQ25ELE1BQU1NLG1CQUFtQixRQUFTSixHQUFHLENBQUNLLGlDQUFpQyxJQUFnQixRQUFPakQsV0FBVyxlQUFlLGdCQUFnQkEsU0FBU0EsT0FBT2tELFVBQVUsS0FBSyxFQUFDO0lBQ3hLLE1BQU0sQ0FBQ0MscUJBQXFCQyx1QkFBdUIsR0FBRzlFLCtDQUFRQSxDQUFTMEU7SUFFdkUsTUFBTSxDQUFDSyxpQkFBaUJDLG1CQUFtQixHQUFHaEYsK0NBQVFBLENBQVUsT0FBTyxrQ0FBa0M7SUFDekcsTUFBTWlGLFdBQVcsQ0FBQyxDQUFDN0MsS0FBS1AsVUFBVSxJQUFJLENBQUMsQ0FBQ08sS0FBS0gsU0FBUztJQUN0RCxNQUFNaUQsVUFBVUgsa0JBQWtCLENBQUMsQ0FBQzVCLFlBQWE4QixZQUFZLENBQUMsQ0FBQ3pDLFdBQVcsQ0FBQyxDQUFDVyxhQUFhLENBQUMsQ0FBQ2YsS0FBS04sUUFBUTtJQUN4RyxNQUFNLENBQUNxRCxRQUFRQyxVQUFVLEdBQUdwRiwrQ0FBUUEsQ0FBMEI7SUFFOUQsTUFBTXFGLHFCQUFxQnZGLGtEQUFXQTtnREFBQztZQUNyQyxJQUFJO2dCQUNGeUMsVUFBVTtnQkFDVnJDLHVEQUFLQSxDQUFDb0YsT0FBTyxDQUFDLHNCQUFzQjtvQkFBRXBCLElBQUk7Z0JBQVM7Z0JBQ25ELE1BQU0xQyxLQUFLLE1BQU1FLE9BQU9DLE1BQU0sQ0FBQzRELFdBQVcsQ0FDeEM7b0JBQUVwQixNQUFNO29CQUFTcUIsWUFBWTtnQkFBUSxHQUNyQyxNQUNBO29CQUFDO29CQUFRO2lCQUFTO2dCQUVwQixNQUFNQyxXQUFXLE1BQU1sRSxXQUFXQztnQkFDbENhLFFBQVE7b0JBQUVSLFlBQVlMLEdBQUdLLFVBQVU7b0JBQUVJLFdBQVdULEdBQUdTLFNBQVM7b0JBQUUsR0FBR3dELFFBQVE7Z0JBQUM7Z0JBRTFFLE1BQU1DLE1BQU0sTUFBTW5GLHdEQUFjQSxDQUFDO29CQUMvQjBCLFdBQVdULEdBQUdTLFNBQVM7b0JBQ3ZCSixZQUFZTCxHQUFHSyxVQUFVO29CQUN6QjhELFNBQVM7d0JBQUVDLElBQUlqQyxhQUFha0M7d0JBQVdDLEdBQUdqQyxZQUFZZ0M7d0JBQVdFLEdBQUdoQyxZQUFZOEI7b0JBQVU7Z0JBQzVGO2dCQUNBbEQsVUFBVStDO2dCQUNWbkQsVUFBVTtnQkFDVnJDLHVEQUFLQSxDQUFDOEYsT0FBTyxDQUFDLHdDQUF3QztvQkFBRTlCLElBQUk7Z0JBQVM7WUFDdkUsRUFBRSxPQUFPK0IsR0FBUTtnQkFDZnRELFVBQVU7Z0JBQ1YsTUFBTXVELE1BQU1ELENBQUFBLGNBQUFBLHdCQUFBQSxFQUFHRSxPQUFPLEtBQUlsRixPQUFPZ0Y7Z0JBQ2pDMUQsVUFBVSxVQUFjLE9BQUoyRDtnQkFDcEJoRyx1REFBS0EsQ0FBQ2tHLEtBQUssQ0FBQyw0QkFBZ0MsT0FBSkYsTUFBTztvQkFBRWhDLElBQUk7Z0JBQVM7WUFDaEU7UUFDRjsrQ0FBRztRQUFDUDtRQUFXRTtRQUFVRTtLQUFTO0lBRWxDLE1BQU1zQyxxQkFBcUJ2RyxrREFBV0E7Z0RBQUM7WUFDckMyQyxXQUFXO1lBQ1hGLFVBQVU7WUFDVnJDLHVEQUFLQSxDQUFDb0YsT0FBTyxDQUFDLDBDQUEwQztnQkFBRXBCLElBQUk7WUFBTztZQUNyRSxJQUFJO2dCQUNGLE1BQU1vQyxNQUFNLE1BQU1DLE1BQU0sc0JBQXNCO29CQUM1Q0MsUUFBUTtvQkFDUkMsU0FBUzt3QkFBRSxnQkFBZ0I7b0JBQW1CO29CQUM5Q0MsTUFBTTVELEtBQUtDLFNBQVMsQ0FBQzt3QkFDbkIyQyxLQUFLaEQsVUFBVTt3QkFDZjhCLFdBQVdBLGFBQWFxQjt3QkFDeEJoQixxQkFBcUJBLHVCQUF1QmdCO3dCQUM1Q0YsU0FBUzs0QkFBRUMsSUFBSWpDLGFBQWFrQzs0QkFBV0MsR0FBR2pDLFlBQVlnQzs0QkFBV0UsR0FBR2hDLFlBQVk4Qjt3QkFBVTtvQkFDNUY7Z0JBQ0Y7Z0JBQ0EsTUFBTWxGLE9BQU8sTUFBTTJGLElBQUlLLElBQUk7Z0JBQzNCLElBQUksQ0FBQ0wsSUFBSU0sRUFBRSxFQUFFLE1BQU0sSUFBSUMsTUFBTWxHLENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTXlGLEtBQUssS0FBSTtnQkFDNUMzRCxXQUFXOUIsS0FBS21HLGNBQWMsSUFBSTtnQkFDbEN2RSxVQUFVO2dCQUNWckMsdURBQUtBLENBQUM4RixPQUFPLENBQUMsc0NBQXNDO29CQUFFOUIsSUFBSTtnQkFBTztZQUNuRSxFQUFFLE9BQU8rQixHQUFRO2dCQUNmLE1BQU1DLE1BQU1ELEVBQUVFLE9BQU8sSUFBSWxGLE9BQU9nRjtnQkFDaEMxRCxVQUFVLFVBQWMsT0FBSjJEO2dCQUNwQmhHLHVEQUFLQSxDQUFDa0csS0FBSyxDQUFDLDhCQUFrQyxPQUFKRixNQUFPO29CQUFFaEMsSUFBSTtnQkFBTztZQUNoRTtRQUNGOytDQUFHO1FBQUN4QjtRQUFROEI7UUFBV0s7UUFBcUJsQjtRQUFXRTtRQUFVRTtLQUFTO0lBRTFFLE1BQU1nRCxjQUFjakgsa0RBQVdBO3lDQUFDLENBQUNrSDtZQUMvQjVELGFBQWE0RDtRQUNmO3dDQUFHLEVBQUU7SUFFTCxNQUFNQyxZQUFZbkgsa0RBQVdBO3VDQUFDO1lBQzVCLElBQUksQ0FBQ3FELFdBQVc7WUFDaEIsSUFBSTtnQkFDRixNQUFNK0QsU0FBU3BFLEtBQUtxRSxLQUFLLENBQUN2RTtnQkFDMUIsTUFBTTBELE1BQU1qRyx5REFBY0EsQ0FBQytHLFNBQVMsQ0FBQ0Y7Z0JBQ3JDLElBQUksQ0FBQ1osSUFBSU4sT0FBTyxFQUFFO29CQUNoQjlDLGlCQUFpQjtvQkFDakJoRCx1REFBS0EsQ0FBQ2tHLEtBQUssQ0FBQztvQkFDWjtnQkFDRjtnQkFDQWxELGlCQUFpQjtnQkFDakJYLFVBQVU7Z0JBQ1ZyQyx1REFBS0EsQ0FBQ29GLE9BQU8sQ0FBQyxvQkFBb0I7b0JBQUVwQixJQUFJO2dCQUFPO2dCQUUvQyxxREFBcUQ7Z0JBQ3JELE1BQU1tRCxPQUFPLElBQUlDO2dCQUNqQkQsS0FBS0UsTUFBTSxDQUFDLFFBQVFwRTtnQkFDcEJrRSxLQUFLRSxNQUFNLENBQUMsWUFBWXpFLEtBQUtDLFNBQVMsQ0FBQ3VELElBQUkzRixJQUFJO2dCQUUvQywyQ0FBMkM7Z0JBQzNDLElBQUksQ0FBQ29FLGlCQUFpQjtvQkFDcEIsSUFBSSxDQUFDM0MsS0FBS04sUUFBUSxJQUFJLENBQUNVLFNBQVMsTUFBTSxJQUFJcUUsTUFBTTtvQkFDaERRLEtBQUtFLE1BQU0sQ0FBQyxXQUFXL0U7b0JBQ3ZCNkUsS0FBS0UsTUFBTSxDQUFDLGlCQUFpQm5GLEtBQUtOLFFBQVE7Z0JBQzVDO2dCQUVBLE1BQU0wRixPQUFPLE1BQU1qQixNQUFNLGFBQWE7b0JBQUVDLFFBQVE7b0JBQVFFLE1BQU1XO2dCQUFLO2dCQUNuRSxJQUFJLENBQUNHLEtBQUtaLEVBQUUsRUFBRTtvQkFDWixJQUFJVixNQUFNO29CQUNWLElBQUl1QixPQUFPO29CQUNYLE1BQU1DLEtBQUtGLEtBQUtmLE9BQU8sQ0FBQ2tCLEdBQUcsQ0FBQyxtQkFBbUI7b0JBQy9DLElBQUk7d0JBQ0YsSUFBSUQsR0FBR0UsUUFBUSxDQUFDLHFCQUFxQjs0QkFDbkMsTUFBTUMsSUFBSSxNQUFNTCxLQUFLYixJQUFJOzRCQUN6QlQsTUFBTTJCLENBQUFBLGNBQUFBLHdCQUFBQSxFQUFHQyxNQUFNLE1BQUlELGNBQUFBLHdCQUFBQSxFQUFHekIsS0FBSyxLQUFJdEQsS0FBS0MsU0FBUyxDQUFDOEU7NEJBQzlDSixPQUFPSSxDQUFBQSxjQUFBQSx3QkFBQUEsRUFBR0osSUFBSSxLQUFJO3dCQUNwQixPQUFPOzRCQUNMdkIsTUFBTSxNQUFNc0IsS0FBS08sSUFBSTt3QkFDdkI7b0JBQ0YsRUFBRSxVQUFNLENBQUM7b0JBQ1QsTUFBTUMsVUFBVVAsT0FBTyxHQUFhQSxPQUFWdkIsS0FBSSxRQUFXLE9BQUx1QixRQUFTdkI7b0JBQzdDLE1BQU0sSUFBSVcsTUFBTSxDQUFDbUIsV0FBVyxFQUFDLEVBQUdDLFFBQVEsR0FBR0MsS0FBSyxDQUFDLEdBQUc7Z0JBQ3REO2dCQUNBLE1BQU1DLE9BQU8sTUFBTVgsS0FBS1csSUFBSTtnQkFDNUIsTUFBTUMsTUFBTUMsSUFBSUMsZUFBZSxDQUFDSDtnQkFDaEMsTUFBTUksSUFBSUMsU0FBU0MsYUFBYSxDQUFDO2dCQUNqQ0YsRUFBRUcsSUFBSSxHQUFHTjtnQkFDVEcsRUFBRUksUUFBUSxHQUFHLFlBQWF4RixDQUFBQSxVQUFVZ0IsSUFBSSxJQUFJLE9BQU07Z0JBQ2xEb0UsRUFBRUssS0FBSztnQkFDUFAsSUFBSVEsZUFBZSxDQUFDVDtnQkFDcEI5RSxnQkFBZ0J5QixrQkFBa0IseUNBQXlDO2dCQUMzRXhDLFVBQVU7Z0JBQ1ZyQyx1REFBS0EsQ0FBQzhGLE9BQU8sQ0FBQyxnQ0FBZ0M7b0JBQUU5QixJQUFJO2dCQUFPO1lBQzdELEVBQUUsT0FBTytCLEdBQVk7Z0JBQ25CLE1BQU1DLE1BQU1ELGFBQWFZLFFBQVFaLEVBQUVFLE9BQU8sR0FBR2xGLE9BQU9nRjtnQkFDcEQxRCxVQUFVLFVBQWMsT0FBSjJEO2dCQUNwQiw2REFBNkQ7Z0JBQzdELE1BQU00QyxXQUFXNUMsSUFBSTBCLFFBQVEsQ0FBQyxnQkFBZ0IxQixJQUFJMEIsUUFBUSxDQUFDLGNBQWMsUUFBUTtnQkFDakYsTUFBTW1CLGFBQWE3QyxJQUFJOEMsTUFBTSxHQUFHLE1BQU05QyxJQUFJZ0MsS0FBSyxDQUFDLEdBQUcsT0FBTyxRQUFRaEM7Z0JBQ2xFaEcsdURBQUtBLENBQUNrRyxLQUFLLENBQUMsc0JBQWlDLE9BQVgyQyxhQUFjO29CQUFFN0UsSUFBSTtvQkFBUTRFO29CQUFVRyxPQUFPO3dCQUFFQyxVQUFVO29CQUFRO2dCQUFFO1lBQ3ZHO1FBQ0Y7c0NBQUc7UUFBQy9GO1FBQVdmLEtBQUtQLFVBQVU7UUFBRU8sS0FBS04sUUFBUTtRQUFFVTtRQUFTSTtRQUFjbUM7S0FBZ0I7SUFFdEYsTUFBTW9FLGFBQWFySixrREFBV0E7d0NBQUM7WUFDN0IsSUFBSSxDQUFDcUQsV0FBVztZQUNoQlosVUFBVTtZQUNWLE1BQU02RyxTQUFTLE1BQU01SSw0REFBV0EsQ0FBQzJDO1lBQ2pDRyxnQkFBZ0JSLEtBQUtDLFNBQVMsQ0FBQ3FHLFFBQVEsTUFBTTtRQUMvQzt1Q0FBRztRQUFDakc7S0FBVTtJQUVkLE1BQU1rRyxrQkFBa0J0Siw4Q0FBT0E7eUNBQUMsSUFBT29ELFlBQVlrRixJQUFJQyxlQUFlLENBQUNuRixhQUFhO3dDQUFLO1FBQUNBO0tBQVU7SUFFcEcsTUFBTW1HLGNBQWN2Siw4Q0FBT0E7cUNBQUM7WUFDMUIsTUFBTXdKLFVBQVUsUUFBU2pGLEdBQUcsQ0FBQ2tGLG9CQUFvQixJQUFlO1lBQ2hFLE1BQU1DLFVBQWU7Z0JBQ25CQyx3QkFBd0JsRixhQUFhcUI7Z0JBQ3JDOEQsNkJBQTZCakgsVUFBVTtnQkFDdkNrSCx1QkFBdUIvRSx1QkFBdUJnQjtZQUNoRDtZQUNBLE1BQU1nRSxPQUFZO2dCQUFFakUsSUFBSWpDLGFBQWFrQztnQkFBV0MsR0FBR2pDLFlBQVlnQztnQkFBV0UsR0FBR2hDLFlBQVk4QjtZQUFVO1lBQ25HLElBQUlnRSxLQUFLakUsRUFBRSxJQUFJaUUsS0FBSy9ELENBQUMsSUFBSStELEtBQUs5RCxDQUFDLEVBQUUwRCxRQUFRSyxZQUFZLEdBQUdEO1lBQ3hELE1BQU1sRCxPQUFPN0QsS0FBS0MsU0FBUyxDQUFDMEc7WUFDNUIsTUFBTU0sTUFBTTtnQkFDVCxvQkFBMkIsT0FBUlIsU0FBUTtnQkFDM0I7Z0JBQ0E7Z0JBQ0EsV0FBZSxPQUFMNUMsTUFBSzthQUNqQixDQUFDcUQsSUFBSSxDQUFDO1lBQ1AsT0FBT0Q7UUFDVDtvQ0FBRztRQUFDdkY7UUFBVzlCO1FBQVFtQztRQUFxQmxCO1FBQVdFO1FBQVVFO0tBQVM7SUFFMUUscUJBQ0UsOERBQUNrRztRQUFJQyxXQUFVOzswQkFDYiw4REFBQ0M7Z0JBQUVELFdBQVU7MEJBQXdCOzs7Ozs7MEJBR3JDLDhEQUFDL0osa0RBQUlBO2dCQUFDaUssT0FBTTs7a0NBQ1YsOERBQUNEO3dCQUFFRCxXQUFVO2tDQUF5QjVIOzs7Ozs7a0NBQ3RDLDhEQUFDMkg7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRztnQ0FBT0gsV0FBVTtnQ0FBK0RJLFNBQVNqRjswQ0FBb0I7Ozs7OzswQ0FHOUcsOERBQUNnRjtnQ0FBT0gsV0FBVTtnQ0FBK0RJLFNBQVNqRTtnQ0FBb0JrRSxVQUFVLENBQUN0RjswQ0FBVTs7Ozs7OzBDQUduSSw4REFBQ29GO2dDQUFPSCxXQUFVO2dDQUEyQnhKLE1BQUs7Z0NBQVM0SixTQUFTLElBQU05RyxZQUFZLENBQUNnSCxJQUFNLENBQUNBOztvQ0FDM0ZqSCxXQUFXLFNBQVM7b0NBQU87Ozs7Ozs7NEJBRTdCbkIsS0FBS04sUUFBUSxrQkFDWiw4REFBQ3lHO2dDQUNDMkIsV0FBVTtnQ0FDVnhCLE1BQU0sNkNBQStFLE9BQWxDK0IsbUJBQW1CckksS0FBS04sUUFBUTtnQ0FDbkY2RyxVQUFTOzBDQUNWOzs7Ozs7NEJBSUZuRyx5QkFDQyw4REFBQytGO2dDQUNDMkIsV0FBVTtnQ0FDVnhCLE1BQU0sNkNBQXlFLE9BQTVCK0IsbUJBQW1Cakk7Z0NBQ3RFbUcsVUFBUzswQ0FDVjs7Ozs7OzRCQUlGakcsd0JBQ0MsOERBQUM2RjtnQ0FDQzJCLFdBQVU7Z0NBQ1Z4QixNQUFNLHlDQUFvRSxPQUEzQitCLG1CQUFtQi9IO2dDQUNsRWlHLFVBQVM7MENBQ1Y7Ozs7Ozs7Ozs7OztvQkFLSnBGLDBCQUNDLDhEQUFDMEc7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDUTtnQ0FBTVIsV0FBVTswQ0FBbUM7Ozs7OzswQ0FDcEQsOERBQUNTO2dDQUFJVCxXQUFVOzBDQUEyRVo7Ozs7OzswQ0FDMUYsOERBQUNXO2dDQUFJQyxXQUFVOztrREFDYiw4REFBQ0c7d0NBQ0MzSixNQUFLO3dDQUNMd0osV0FBVTt3Q0FDVkksU0FBUztnREFBTU07b0RBQUFBLHVCQUFBQSxVQUFVQyxTQUFTLGNBQW5CRCwyQ0FBQUEscUJBQXFCRSxTQUFTLENBQUN4Qjs7a0RBQy9DOzs7Ozs7a0RBR0QsOERBQUN5Qjt3Q0FBS2IsV0FBVTtrREFBNEI7Ozs7Ozs7Ozs7Ozs7Ozs7OztrQ0FJbEQsOERBQUNEO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0Q7O2tEQUNDLDhEQUFDUzt3Q0FBTVIsV0FBVTtrREFBOEI7Ozs7OztrREFDL0MsOERBQUNjO3dDQUFNZCxXQUFVO3dDQUFrQ2UsT0FBT3RIO3dDQUFXdUgsVUFBVSxDQUFDakYsSUFBTXJDLGFBQWFxQyxFQUFFa0YsTUFBTSxDQUFDRixLQUFLOzs7Ozs7Ozs7Ozs7MENBRW5ILDhEQUFDaEI7O2tEQUNDLDhEQUFDUzt3Q0FBTVIsV0FBVTtrREFBOEI7Ozs7OztrREFDL0MsOERBQUNjO3dDQUFNZCxXQUFVO3dDQUFrQ2UsT0FBT3BIO3dDQUFVcUgsVUFBVSxDQUFDakYsSUFBTW5DLFlBQVltQyxFQUFFa0YsTUFBTSxDQUFDRixLQUFLOzs7Ozs7Ozs7Ozs7MENBRWpILDhEQUFDaEI7O2tEQUNDLDhEQUFDUzt3Q0FBTVIsV0FBVTtrREFBOEI7Ozs7OztrREFDL0MsOERBQUNjO3dDQUFNZCxXQUFVO3dDQUFrQ2UsT0FBT2xIO3dDQUFVbUgsVUFBVSxDQUFDakYsSUFBTWpDLFlBQVlpQyxFQUFFa0YsTUFBTSxDQUFDRixLQUFLOzs7Ozs7Ozs7Ozs7MENBRWpILDhEQUFDaEI7O2tEQUNDLDhEQUFDUzt3Q0FBTVIsV0FBVTtrREFBOEI7Ozs7OztrREFDL0MsOERBQUNrQjt3Q0FDQ2xCLFdBQVU7d0NBQ1ZlLE9BQU96Rzt3Q0FDUDBHLFVBQVUsQ0FBQ2pGLElBQU14QixhQUFhd0IsRUFBRWtGLE1BQU0sQ0FBQ0YsS0FBSztrREFFM0NoSCxTQUFTb0gsR0FBRyxDQUFDLENBQUNsQixrQkFDYiw4REFBQ21CO2dEQUFrQkwsT0FBT2QsRUFBRWpHLEVBQUU7MERBQUdpRyxFQUFFaEcsSUFBSTsrQ0FBMUJnRyxFQUFFakcsRUFBRTs7Ozs7Ozs7OztrREFHckIsOERBQUNpRzt3Q0FBRUQsV0FBVTtrREFBaUM7Ozs7Ozs7Ozs7OzswQ0FFaEQsOERBQUNEOztrREFDQyw4REFBQ1M7d0NBQU1SLFdBQVU7a0RBQThCOzs7Ozs7a0RBQy9DLDhEQUFDRDt3Q0FBSUMsV0FBVTs7MERBQ2IsOERBQUNjO2dEQUFNZCxXQUFVO2dEQUFrQ2UsT0FBT3BHO2dEQUFxQnFHLFVBQVUsQ0FBQ2pGLElBQU1uQix1QkFBdUJtQixFQUFFa0YsTUFBTSxDQUFDRixLQUFLOzs7Ozs7MERBQ3JJLDhEQUFDWjtnREFDQzNKLE1BQUs7Z0RBQ0x3SixXQUFVO2dEQUNWSSxTQUFTLElBQU14Rix1QkFBdUIsT0FBT3BELFdBQVcsZUFBZSxnQkFBZ0JBLFNBQVNBLE9BQU9rRCxVQUFVLEtBQUs7MERBQ3ZIOzs7Ozs7Ozs7Ozs7a0RBSUgsOERBQUN1Rjt3Q0FBRUQsV0FBVTtrREFBaUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFNcEQsOERBQUMvSixrREFBSUE7Z0JBQUNpSyxPQUFNOzBCQUNWLDRFQUFDSDtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNEOzs4Q0FDQyw4REFBQ1M7b0NBQU1SLFdBQVU7OENBQStDOzs7Ozs7OENBQ2hFLDhEQUFDOUosMERBQVFBO29DQUFDbUwsUUFBUXhFOzs7Ozs7Z0NBQ2pCc0MsaUNBQ0MsOERBQUNwSixrREFBS0E7b0NBQUN1TCxLQUFLbkM7b0NBQWlCb0MsS0FBSTtvQ0FBVUMsT0FBTztvQ0FBS0MsUUFBUTtvQ0FBS3pCLFdBQVU7Ozs7Ozs7Ozs7OztzQ0FHbEYsOERBQUNEOzs4Q0FDQyw4REFBQ1M7b0NBQU1SLFdBQVU7OENBQStDOzs7Ozs7OENBQ2hFLDhEQUFDMEI7b0NBQ0MxQixXQUFVO29DQUNWZSxPQUFPckk7b0NBQ1BzSSxVQUFVLENBQUNqRixJQUFNcEQsZ0JBQWdCb0QsRUFBRWtGLE1BQU0sQ0FBQ0YsS0FBSzs7Ozs7O2dDQUVoRGhJLCtCQUFpQiw4REFBQ2tIO29DQUFFRCxXQUFVOzhDQUE2QmpIOzs7Ozs7OENBQzVELDhEQUFDZ0g7b0NBQUlDLFdBQVU7O3NEQUNiLDhEQUFDRzs0Q0FBT0gsV0FBVTs0Q0FBK0RLLFVBQVUsQ0FBQ3JGOzRDQUFTb0YsU0FBU3JEO3NEQUFXOzs7Ozs7c0RBR3pILDhEQUFDeUQ7NENBQU1SLFdBQVU7OzhEQUNmLDhEQUFDYztvREFBTXRLLE1BQUs7b0RBQVdtTCxTQUFTOUc7b0RBQWlCbUcsVUFBVSxDQUFDakYsSUFBTWpCLG1CQUFtQmlCLEVBQUVrRixNQUFNLENBQUNVLE9BQU87Ozs7OztnREFBSzs7Ozs7OztzREFHNUcsOERBQUN4Qjs0Q0FBT0gsV0FBVTs0Q0FBMkJJLFNBQVMsSUFBTXpILGdCQUFnQkMsS0FBS0MsU0FBUyxDQUFDRCxLQUFLcUUsS0FBSyxDQUFDdkUsZUFBZSxNQUFNO3NEQUFLOzs7Ozs7c0RBQ2hJLDhEQUFDOEg7NENBQU1SLFdBQVU7c0RBQXdCOzs7Ozs7c0RBQ3pDLDhEQUFDa0I7NENBQ0NsQixXQUFVOzRDQUNWZSxPQUFPOUY7NENBQ1ArRixVQUFVLENBQUNqRjtnREFDVCxNQUFNNkYsSUFBSTdGLEVBQUVrRixNQUFNLENBQUNGLEtBQUs7Z0RBQ3hCN0YsVUFBVTBHO2dEQUNWakosZ0JBQWdCQyxLQUFLQyxTQUFTLENBQUN6QyxrREFBTyxDQUFDd0wsRUFBRSxFQUFFLE1BQU07NENBQ25EOzs4REFFQSw4REFBQ1I7b0RBQU9MLE9BQU07OERBQVU7Ozs7Ozs4REFDeEIsOERBQUNLO29EQUFPTCxPQUFNOzhEQUFZOzs7Ozs7Ozs7Ozs7c0RBRTVCLDhEQUFDUDs0Q0FBTVIsV0FBVTtzREFBd0I7Ozs7OztzREFDekMsOERBQUNrQjs0Q0FDQ2xCLFdBQVU7NENBQ1ZlLE9BQU94SDs0Q0FDUHlILFVBQVUsQ0FBQ2pGO2dEQUNULE1BQU04RixPQUFPOUYsRUFBRWtGLE1BQU0sQ0FBQ0YsS0FBSztnREFDM0J2SCxXQUFXcUk7Z0RBQ1gsSUFBSTtvREFDRixNQUFNN0UsU0FBU3BFLEtBQUtxRSxLQUFLLENBQUN2RTtvREFDMUJzRSxPQUFPOEUsTUFBTSxHQUFHRCxTQUFTLFFBQ3JCLHNEQUNBO29EQUNKN0ksaUJBQWlCO29EQUNqQkwsZ0JBQWdCQyxLQUFLQyxTQUFTLENBQUNtRSxRQUFRLE1BQU07Z0RBQy9DLEVBQUUsT0FBTytFLEtBQVU7b0RBQ2pCL0ksaUJBQWlCO2dEQUNuQjs0Q0FDRjs7OERBRUEsOERBQUNvSTtvREFBT0wsT0FBTTs4REFBTTs7Ozs7OzhEQUNwQiw4REFBQ0s7b0RBQU9MLE9BQU07OERBQU07Ozs7Ozs7Ozs7OztzREFFdEIsOERBQUNaOzRDQUFPSCxXQUFVOzRDQUEyQkksU0FBUyxJQUFNekgsZ0JBQWdCO3NEQUFPOzs7Ozs7c0RBQ25GLDhEQUFDd0g7NENBQ0NILFdBQVU7NENBQ1ZJLFNBQVM7Z0RBQ1AsSUFBSTtvREFDRixNQUFNcEQsU0FBU3BFLEtBQUtxRSxLQUFLLENBQUN2RTtvREFDMUIsTUFBTTBELE1BQU1qRyx5REFBY0EsQ0FBQytHLFNBQVMsQ0FBQ0Y7b0RBQ3JDLElBQUksQ0FBQ1osSUFBSU4sT0FBTyxFQUFFLE1BQU0sSUFBSWEsTUFBTTtvREFDbEMzRCxpQkFBaUI7b0RBQ2pCLE1BQU1pRixPQUFPLElBQUkrRCxLQUFLO3dEQUFDcEosS0FBS0MsU0FBUyxDQUFDdUQsSUFBSTNGLElBQUksRUFBRSxNQUFNO3FEQUFHLEVBQUU7d0RBQUVELE1BQU07b0RBQW1CO29EQUN0RixNQUFNMEgsTUFBTUMsSUFBSUMsZUFBZSxDQUFDSDtvREFDaEMsTUFBTUksSUFBSUMsU0FBU0MsYUFBYSxDQUFDO29EQUNqQ0YsRUFBRUcsSUFBSSxHQUFHTjtvREFDVEcsRUFBRUksUUFBUSxHQUFHO29EQUNiSixFQUFFSyxLQUFLO29EQUNQUCxJQUFJUSxlQUFlLENBQUNUO2dEQUN0QixFQUFFLE9BQU9uQyxHQUFZO29EQUNuQixNQUFNQyxNQUFNRCxhQUFhWSxRQUFRWixFQUFFRSxPQUFPLEdBQUdsRixPQUFPZ0Y7b0RBQ3BEL0MsaUJBQWlCZ0QsT0FBTztnREFDMUI7NENBQ0Y7c0RBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQVNULDhEQUFDL0Ysa0RBQUlBO2dCQUFDaUssT0FBTTs7a0NBQ1YsOERBQUNIO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0c7Z0NBQU9ILFdBQVU7Z0NBQTJDSSxTQUFTbkI7MENBQVk7Ozs7Ozs0QkFHakY5RixnQkFBZ0IsQ0FBQztnQ0FDaEIsSUFBSTtvQ0FDRixNQUFNOEksSUFBSXJKLEtBQUtxRSxLQUFLLENBQUM5RDtvQ0FDckIsTUFBTWYsU0FBUyxDQUFDNkosRUFBRTdKLE1BQU0sSUFBSSxFQUFDLEVBQUc4SixXQUFXO29DQUMzQyxNQUFNQyxNQUFNL0osV0FBVyxPQUFPLGlEQUFpREEsV0FBVyxTQUFTLGlEQUFpRDtvQ0FDcEosTUFBTW9JLFFBQVFwSSxXQUFXLE9BQU8sU0FBU0EsV0FBVyxTQUFTLGFBQWE7b0NBQzFFLHFCQUFPLDhEQUFDeUk7d0NBQUtiLFdBQVcseUVBQTZFLE9BQUptQztrREFBUTNCOzs7Ozs7Z0NBQzNHLEVBQUUsVUFBTTtvQ0FDTixPQUFPO2dDQUNUOzRCQUNGOzs7Ozs7O29CQUVEckgsOEJBQ0MsOERBQUNzSDt3QkFBSVQsV0FBVTtrQ0FBa0U3Rzs7Ozs7Ozs7Ozs7OzBCQUlyRiw4REFBQ2lKO2dCQUFPcEMsV0FBVTs7a0NBQ2hCLDhEQUFDQztrQ0FBRTs7Ozs7O2tDQUNILDhEQUFDQTt3QkFBRUQsV0FBVTtrQ0FBTzs7Ozs7O2tDQUNwQiw4REFBQ0M7a0NBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlYO0dBeFp3QmhJO0tBQUFBIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvYXBwL3BhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSW1hZ2UgZnJvbSAnbmV4dC9pbWFnZSc7XG5pbXBvcnQgdG9hc3QgZnJvbSAncmVhY3QtaG90LXRvYXN0JztcbmltcG9ydCB7IENhcmQgfSBmcm9tICdAL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgeyBEcm9wem9uZSB9IGZyb20gJ0AvY29tcG9uZW50cy9Ecm9wem9uZSc7XG5pbXBvcnQgeyBNYW5pZmVzdFNjaGVtYSwgUHJlc2V0cyB9IGZyb20gJ0AvbGliL21hbmlmZXN0JztcbmltcG9ydCB7IGdlbmVyYXRlQ3NyUGVtIH0gZnJvbSAnQC9saWIvY3NyJztcbmltcG9ydCB7IHZlcmlmeUFzc2V0IH0gZnJvbSAnQC9saWIvYzJwYUNsaWVudCc7XG5cbnR5cGUgS2V5TWF0ZXJpYWwgPSB7XG4gIHByaXZhdGVLZXk/OiBDcnlwdG9LZXk7XG4gIHB1YmxpY0tleT86IENyeXB0b0tleTtcbiAgcGtjczhQZW0/OiBzdHJpbmc7XG4gIHNwa2lQZW0/OiBzdHJpbmc7XG59O1xuXG5mdW5jdGlvbiB0b1BlbSh0eXBlOiAnUFJJVkFURSBLRVknIHwgJ1BVQkxJQyBLRVknIHwgJ0VDIFBSSVZBVEUgS0VZJywgZGF0YTogQXJyYXlCdWZmZXIpOiBzdHJpbmcge1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICBsZXQgYmluID0gJyc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMuYnl0ZUxlbmd0aDsgaSsrKSBiaW4gKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gIGNvbnN0IGI2NCA9IGJ0b2EoYmluKTtcbiAgY29uc3Qgd3JhcHBlZCA9IGI2NC5yZXBsYWNlKC8oLns2NH0pL2csICckMVxcbicpO1xuICByZXR1cm4gYC0tLS0tQkVHSU4gJHt0eXBlfS0tLS0tXFxuJHt3cmFwcGVkfVxcbi0tLS0tRU5EICR7dHlwZX0tLS0tLWA7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGV4cG9ydEtleXMoa3A6IENyeXB0b0tleVBhaXIpOiBQcm9taXNlPHsgcGtjczhQZW06IHN0cmluZzsgZWNQZW06IHN0cmluZzsgc3BraVBlbTogc3RyaW5nIH0+IHtcbiAgLy8gRXhwb3J0IGluIFBLQ1MjOCBmb3JtYXQgKHN0YW5kYXJkIGZvcm1hdClcbiAgY29uc3QgcGtjczggPSBhd2FpdCBjcnlwdG8uc3VidGxlLmV4cG9ydEtleSgncGtjczgnLCBrcC5wcml2YXRlS2V5KTtcbiAgY29uc3QgcGtjczhQZW0gPSB0b1BlbSgnUFJJVkFURSBLRVknLCBwa2NzOCk7XG5cbiAgLy8gQWxzbyBleHBvcnQgZm9yIEVDLXNwZWNpZmljIFBFTSAoYzJwYXRvb2wgbWF5IHByZWZlciB0aGlzKVxuICAvLyBQS0NTIzggaXMgZmluZSBmb3IgbW9zdCB0b29scywgYnV0IHdlJ2xsIGxhYmVsIGl0IGNvcnJlY3RseVxuICBjb25zdCBlY1BlbSA9IHRvUGVtKCdQUklWQVRFIEtFWScsIHBrY3M4KTtcblxuICBjb25zdCBzcGtpID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoJ3Nwa2knLCBrcC5wdWJsaWNLZXkpO1xuICByZXR1cm4ge1xuICAgIHBrY3M4UGVtLFxuICAgIGVjUGVtLCAvLyBTYW1lIGFzIHBrY3M4UGVtIGJ1dCBjYW4gYmUgcmVsYWJlbGVkIGlmIG5lZWRlZFxuICAgIHNwa2lQZW06IHRvUGVtKCdQVUJMSUMgS0VZJywgc3BraSlcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFnZSgpIHtcbiAgY29uc3QgW2tleXMsIHNldEtleXNdID0gdXNlU3RhdGU8S2V5TWF0ZXJpYWw+KHt9KTtcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlPHN0cmluZz4oJ0tleXMgaW4gbWVtb3J5IG9ubHkg4oCiIG5vdCB1cGxvYWRlZCcpO1xuICBjb25zdCBbY2VydFBlbSwgc2V0Q2VydFBlbV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgY29uc3QgW2NzclBlbSwgc2V0Q3NyUGVtXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xuICBjb25zdCBbbWFuaWZlc3RKc29uLCBzZXRNYW5pZmVzdEpzb25dID0gdXNlU3RhdGU8c3RyaW5nPihKU09OLnN0cmluZ2lmeShQcmVzZXRzLm1pbmltYWwsIG51bGwsIDIpKTtcbiAgY29uc3QgW21hbmlmZXN0RXJyb3IsIHNldE1hbmlmZXN0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nPignJyk7XG4gIGNvbnN0IFtpbWFnZUZpbGUsIHNldEltYWdlRmlsZV0gPSB1c2VTdGF0ZTxGaWxlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFt2ZXJpZnlSZXBvcnQsIHNldFZlcmlmeVJlcG9ydF0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgY29uc3QgW3Nob3dDdXJsLCBzZXRTaG93Q3VybF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFt0c2FBbGdvLCBzZXRUc2FBbGdvXSA9IHVzZVN0YXRlPCdlY2MnIHwgJ3JzYSc+KCdlY2MnKTtcbiAgLy8gQ1NSIGZpZWxkc1xuICBjb25zdCBbc3ViamVjdENOLCBzZXRTdWJqZWN0Q05dID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbc3ViamVjdE8sIHNldFN1YmplY3RPXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3N1YmplY3RDLCBzZXRTdWJqZWN0Q10gPSB1c2VTdGF0ZSgnJyk7XG4gIC8vIFByb2ZpbGUgSURzIChSU0EvRUNDKSBwcm92aWRlZCBieSB5b3VyIFZQIEVuZ1xuICBjb25zdCBQUk9GSUxFUyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKFtcbiAgICAgIHsgaWQ6ICc2YmEzYjcwYy0zOGZlLTQ0YzMtODAzZi05MTBjNTg3M2QxZDYnLCBuYW1lOiAnUlNBIEMyUEEgUHJvZmlsZScgfSxcbiAgICAgIHsgaWQ6ICc3NjRiNmNkZC0xYzFiLTRhNDYtOTk2Ny0yMmExMTJhMGIzOTAnLCBuYW1lOiAnRUNDIEMyUEEgUHJvZmlsZScgfSxcbiAgICBdIGFzIGNvbnN0KSxcbiAgICBbXVxuICApO1xuICBjb25zdCBkZWZhdWx0UHJvZmlsZSA9IChwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DRVJUX1BST0ZJTEVfSUQgYXMgc3RyaW5nKSB8fCBQUk9GSUxFU1sxXS5pZDsgLy8gZGVmYXVsdCBFQ0NcbiAgY29uc3QgW3Byb2ZpbGVJZCwgc2V0UHJvZmlsZUlkXSA9IHVzZVN0YXRlPHN0cmluZz4oZGVmYXVsdFByb2ZpbGUpO1xuICBjb25zdCBkZWZhdWx0UHJvZHVjdElkID0gKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0NPTkZPUk1JTkdfUFJPRFVDVF9JRCBhcyBzdHJpbmcpIHx8ICh0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiAncmFuZG9tVVVJRCcgaW4gY3J5cHRvID8gY3J5cHRvLnJhbmRvbVVVSUQoKSA6ICcnKTtcbiAgY29uc3QgW2NvbmZvcm1pbmdQcm9kdWN0SWQsIHNldENvbmZvcm1pbmdQcm9kdWN0SWRdID0gdXNlU3RhdGU8c3RyaW5nPihkZWZhdWx0UHJvZHVjdElkKTtcblxuICBjb25zdCBbdXNlU2VydmVyU2lnbmVyLCBzZXRVc2VTZXJ2ZXJTaWduZXJdID0gdXNlU3RhdGU8Ym9vbGVhbj4odHJ1ZSk7IC8vIGRlbW8gbW9kZTogc2VydmVyLXNpZGUgYzJwYXRvb2xcbiAgY29uc3QgaGF2ZUtleXMgPSAhIWtleXMucHJpdmF0ZUtleSAmJiAhIWtleXMucHVibGljS2V5O1xuICBjb25zdCBjYW5TaWduID0gdXNlU2VydmVyU2lnbmVyID8gISFpbWFnZUZpbGUgOiAoaGF2ZUtleXMgJiYgISFjZXJ0UGVtICYmICEhaW1hZ2VGaWxlICYmICEha2V5cy5wa2NzOFBlbSk7XG4gIGNvbnN0IFtwcmVzZXQsIHNldFByZXNldF0gPSB1c2VTdGF0ZTwnbWluaW1hbCcgfCAnZWRpdG9yaWFsJz4oJ21pbmltYWwnKTtcblxuICBjb25zdCBnZW5lcmF0ZUtleXNBbmRDc3IgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldFN0YXR1cygnR2VuZXJhdGluZyBFQyBQLTI1NiBrZXlwYWly4oCmJyk7XG4gICAgICB0b2FzdC5sb2FkaW5nKCdHZW5lcmF0aW5nIGtleXMuLi4nLCB7IGlkOiAna2V5Z2VuJyB9KTtcbiAgICAgIGNvbnN0IGtwID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5nZW5lcmF0ZUtleShcbiAgICAgICAgeyBuYW1lOiAnRUNEU0EnLCBuYW1lZEN1cnZlOiAnUC0yNTYnIH0sXG4gICAgICAgIHRydWUsXG4gICAgICAgIFsnc2lnbicsICd2ZXJpZnknXVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGV4cG9ydGVkID0gYXdhaXQgZXhwb3J0S2V5cyhrcCk7XG4gICAgICBzZXRLZXlzKHsgcHJpdmF0ZUtleToga3AucHJpdmF0ZUtleSwgcHVibGljS2V5OiBrcC5wdWJsaWNLZXksIC4uLmV4cG9ydGVkIH0pO1xuXG4gICAgICBjb25zdCBjc3IgPSBhd2FpdCBnZW5lcmF0ZUNzclBlbSh7XG4gICAgICAgIHB1YmxpY0tleToga3AucHVibGljS2V5LFxuICAgICAgICBwcml2YXRlS2V5OiBrcC5wcml2YXRlS2V5LFxuICAgICAgICBzdWJqZWN0OiB7IENOOiBzdWJqZWN0Q04gfHwgdW5kZWZpbmVkLCBPOiBzdWJqZWN0TyB8fCB1bmRlZmluZWQsIEM6IHN1YmplY3RDIHx8IHVuZGVmaW5lZCB9LFxuICAgICAgfSk7XG4gICAgICBzZXRDc3JQZW0oY3NyKTtcbiAgICAgIHNldFN0YXR1cygnS2V5cyByZWFkeSBpbiBtZW1vcnkg4oCiIG5vdCB1cGxvYWRlZCcpO1xuICAgICAgdG9hc3Quc3VjY2VzcygnS2V5cyBhbmQgQ1NSIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHkhJywgeyBpZDogJ2tleWdlbicgfSk7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBzZXRDc3JQZW0oJycpO1xuICAgICAgY29uc3QgbXNnID0gZT8ubWVzc2FnZSB8fCBTdHJpbmcoZSk7XG4gICAgICBzZXRTdGF0dXMoYEVycm9yOiAke21zZ31gKTtcbiAgICAgIHRvYXN0LmVycm9yKGBGYWlsZWQgdG8gZ2VuZXJhdGUga2V5czogJHttc2d9YCwgeyBpZDogJ2tleWdlbicgfSk7XG4gICAgfVxuICB9LCBbc3ViamVjdENOLCBzdWJqZWN0Tywgc3ViamVjdENdKTtcblxuICBjb25zdCByZXF1ZXN0Q2VydGlmaWNhdGUgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgc2V0Q2VydFBlbSgnJyk7XG4gICAgc2V0U3RhdHVzKCdSZXF1ZXN0aW5nIGNlcnRpZmljYXRl4oCmJyk7XG4gICAgdG9hc3QubG9hZGluZygnUmVxdWVzdGluZyBjZXJ0aWZpY2F0ZSBmcm9tIFNTTC5jb20uLi4nLCB7IGlkOiAnY2VydCcgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCcvYXBpL2NlcnQtcmVxdWVzdHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGNzcjogY3NyUGVtIHx8ICctLS1QRU0gQ1NSLS0tJyxcbiAgICAgICAgICBwcm9maWxlSWQ6IHByb2ZpbGVJZCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgY29uZm9ybWluZ1Byb2R1Y3RJZDogY29uZm9ybWluZ1Byb2R1Y3RJZCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgc3ViamVjdDogeyBDTjogc3ViamVjdENOIHx8IHVuZGVmaW5lZCwgTzogc3ViamVjdE8gfHwgdW5kZWZpbmVkLCBDOiBzdWJqZWN0QyB8fCB1bmRlZmluZWQgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihkYXRhPy5lcnJvciB8fCAnUmVxdWVzdCBmYWlsZWQnKTtcbiAgICAgIHNldENlcnRQZW0oZGF0YS5jZXJ0aWZpY2F0ZVBlbSB8fCAnJyk7XG4gICAgICBzZXRTdGF0dXMoJ0NlcnRpZmljYXRlIHJlY2VpdmVkJyk7XG4gICAgICB0b2FzdC5zdWNjZXNzKCdDZXJ0aWZpY2F0ZSByZWNlaXZlZCBzdWNjZXNzZnVsbHkhJywgeyBpZDogJ2NlcnQnIH0pO1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgY29uc3QgbXNnID0gZS5tZXNzYWdlIHx8IFN0cmluZyhlKTtcbiAgICAgIHNldFN0YXR1cyhgRXJyb3I6ICR7bXNnfWApO1xuICAgICAgdG9hc3QuZXJyb3IoYEZhaWxlZCB0byBnZXQgY2VydGlmaWNhdGU6ICR7bXNnfWAsIHsgaWQ6ICdjZXJ0JyB9KTtcbiAgICB9XG4gIH0sIFtjc3JQZW0sIHByb2ZpbGVJZCwgY29uZm9ybWluZ1Byb2R1Y3RJZCwgc3ViamVjdENOLCBzdWJqZWN0Tywgc3ViamVjdENdKTtcblxuICBjb25zdCBvbkRyb3BJbWFnZSA9IHVzZUNhbGxiYWNrKChmaWxlOiBGaWxlKSA9PiB7XG4gICAgc2V0SW1hZ2VGaWxlKGZpbGUpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2lnbkltYWdlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghaW1hZ2VGaWxlKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UobWFuaWZlc3RKc29uKTtcbiAgICAgIGNvbnN0IHJlcyA9IE1hbmlmZXN0U2NoZW1hLnNhZmVQYXJzZShwYXJzZWQpO1xuICAgICAgaWYgKCFyZXMuc3VjY2Vzcykge1xuICAgICAgICBzZXRNYW5pZmVzdEVycm9yKCdJbnZhbGlkIG1hbmlmZXN0Jyk7XG4gICAgICAgIHRvYXN0LmVycm9yKCdJbnZhbGlkIG1hbmlmZXN0IEpTT04nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2V0TWFuaWZlc3RFcnJvcignJyk7XG4gICAgICBzZXRTdGF0dXMoJ1NpZ25pbmcgaW1hZ2XigKYnKTtcbiAgICAgIHRvYXN0LmxvYWRpbmcoJ1NpZ25pbmcgaW1hZ2UuLi4nLCB7IGlkOiAnc2lnbicgfSk7XG5cbiAgICAgIC8vIEFsbCBzaWduaW5nIG5vdyBoYXBwZW5zIHNlcnZlci1zaWRlIHVzaW5nIGMycGF0b29sXG4gICAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBmb3JtLmFwcGVuZCgnZmlsZScsIGltYWdlRmlsZSk7XG4gICAgICBmb3JtLmFwcGVuZCgnbWFuaWZlc3QnLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkpO1xuXG4gICAgICAvLyBBZGQgdXNlciBjcmVkZW50aWFscyBpZiBub3QgaW4gZGVtbyBtb2RlXG4gICAgICBpZiAoIXVzZVNlcnZlclNpZ25lcikge1xuICAgICAgICBpZiAoIWtleXMucGtjczhQZW0gfHwgIWNlcnRQZW0pIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjZXJ0aWZpY2F0ZSBvciBwcml2YXRlIGtleScpO1xuICAgICAgICBmb3JtLmFwcGVuZCgnY2VydFBlbScsIGNlcnRQZW0pO1xuICAgICAgICBmb3JtLmFwcGVuZCgncHJpdmF0ZUtleVBlbScsIGtleXMucGtjczhQZW0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goJy9hcGkvc2lnbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IGZvcm0gfSk7XG4gICAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgICAgbGV0IG1zZyA9ICdTaWduaW5nIGZhaWxlZCc7XG4gICAgICAgIGxldCBoaW50ID0gJyc7XG4gICAgICAgIGNvbnN0IGN0ID0gcmVzcC5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGN0LmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGogPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgICAgICAgIG1zZyA9IGo/LmRldGFpbCB8fCBqPy5lcnJvciB8fCBKU09OLnN0cmluZ2lmeShqKTtcbiAgICAgICAgICAgIGhpbnQgPSBqPy5oaW50IHx8ICcnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtc2cgPSBhd2FpdCByZXNwLnRleHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgY29uc3QgZnVsbE1zZyA9IGhpbnQgPyBgJHttc2d9XFxuXFxuJHtoaW50fWAgOiBtc2c7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigoZnVsbE1zZyB8fCAnJykudG9TdHJpbmcoKS5zbGljZSgwLCA4MDApKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwLmJsb2IoKTtcbiAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgYS5ocmVmID0gdXJsO1xuICAgICAgYS5kb3dubG9hZCA9ICdzaWduZWQtJyArIChpbWFnZUZpbGUubmFtZSB8fCAnaW1hZ2UnKTtcbiAgICAgIGEuY2xpY2soKTtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgIHNldFZlcmlmeVJlcG9ydCh1c2VTZXJ2ZXJTaWduZXIgPyAnU2lnbmVkIChkZW1vIG1vZGUgd2l0aCBkZWZhdWx0IGNlcnQpJyA6ICdTaWduZWQgKHdpdGggeW91ciBTU0wuY29tIGNlcnQpJyk7XG4gICAgICBzZXRTdGF0dXMoJ0ltYWdlIHNpZ25lZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoJ0ltYWdlIHNpZ25lZCBhbmQgZG93bmxvYWRlZCEnLCB7IGlkOiAnc2lnbicgfSk7XG4gICAgfSBjYXRjaCAoZTogdW5rbm93bikge1xuICAgICAgY29uc3QgbXNnID0gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogU3RyaW5nKGUpO1xuICAgICAgc2V0U3RhdHVzKGBFcnJvcjogJHttc2d9YCk7XG4gICAgICAvLyBTaG93IGxvbmdlciB0b2FzdCBmb3IgZXJyb3JzIHdpdGggaGludHMgKGRlbW8gbW9kZSBlcnJvcnMpXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IG1zZy5pbmNsdWRlcygnUXVpY2sgZml4JykgfHwgbXNnLmluY2x1ZGVzKCdjMnBhdG9vbCcpID8gMTAwMDAgOiA2MDAwO1xuICAgICAgY29uc3QgZGlzcGxheU1zZyA9IG1zZy5sZW5ndGggPiAzMDAgPyBtc2cuc2xpY2UoMCwgMzAwKSArICcuLi4nIDogbXNnO1xuICAgICAgdG9hc3QuZXJyb3IoYFNpZ25pbmcgZmFpbGVkOlxcblxcbiR7ZGlzcGxheU1zZ31gLCB7IGlkOiAnc2lnbicsIGR1cmF0aW9uLCBzdHlsZTogeyBtYXhXaWR0aDogJzYwMHB4JyB9IH0pO1xuICAgIH1cbiAgfSwgW2ltYWdlRmlsZSwga2V5cy5wcml2YXRlS2V5LCBrZXlzLnBrY3M4UGVtLCBjZXJ0UGVtLCBtYW5pZmVzdEpzb24sIHVzZVNlcnZlclNpZ25lcl0pO1xuXG4gIGNvbnN0IHZlcmlmeU9ubHkgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpbWFnZUZpbGUpIHJldHVybjtcbiAgICBzZXRTdGF0dXMoJ1ZlcmlmeWluZ+KApicpO1xuICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHZlcmlmeUFzc2V0KGltYWdlRmlsZSk7XG4gICAgc2V0VmVyaWZ5UmVwb3J0KEpTT04uc3RyaW5naWZ5KHJlcG9ydCwgbnVsbCwgMikpO1xuICB9LCBbaW1hZ2VGaWxlXSk7XG5cbiAgY29uc3QgaW1hZ2VQcmV2aWV3VXJsID0gdXNlTWVtbygoKSA9PiAoaW1hZ2VGaWxlID8gVVJMLmNyZWF0ZU9iamVjdFVSTChpbWFnZUZpbGUpIDogJycpLCBbaW1hZ2VGaWxlXSk7XG5cbiAgY29uc3QgY3VybENvbW1hbmQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBhcGlCYXNlID0gKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9CQVNFIGFzIHN0cmluZykgfHwgJ2h0dHBzOi8vYXBpLmMycGF0b29sLmlvJztcbiAgICBjb25zdCBib2R5T3V0OiBhbnkgPSB7XG4gICAgICBjZXJ0aWZpY2F0ZV9wcm9maWxlX2lkOiBwcm9maWxlSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgY2VydGlmaWNhdGVfc2lnbmluZ19yZXF1ZXN0OiBjc3JQZW0gfHwgJy0tLS0tQkVHSU4gQ0VSVElGSUNBVEUgUkVRVUVTVC0tLS0tXFxcXG4uLi5cXFxcbi0tLS0tRU5EIENFUlRJRklDQVRFIFJFUVVFU1QtLS0tLScsXG4gICAgICBjb25mb3JtaW5nX3Byb2R1Y3RfaWQ6IGNvbmZvcm1pbmdQcm9kdWN0SWQgfHwgdW5kZWZpbmVkLFxuICAgIH07XG4gICAgY29uc3Qgc3ViajogYW55ID0geyBDTjogc3ViamVjdENOIHx8IHVuZGVmaW5lZCwgTzogc3ViamVjdE8gfHwgdW5kZWZpbmVkLCBDOiBzdWJqZWN0QyB8fCB1bmRlZmluZWQgfTtcbiAgICBpZiAoc3Viai5DTiB8fCBzdWJqLk8gfHwgc3Viai5DKSBib2R5T3V0LmV4cGVyaW1lbnRhbCA9IHN1Ymo7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KGJvZHlPdXQpO1xuICAgIGNvbnN0IGNtZCA9IFtcbiAgICAgIGBjdXJsIC0tbG9jYXRpb24gJyR7YXBpQmFzZX0vYXBpL3YxL2NlcnRpZmljYXRlLXJlcXVlc3RzJyBcXFxcYCxcbiAgICAgIGAtLWhlYWRlciAnQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uJyBcXFxcYCxcbiAgICAgIGAtLWhlYWRlciAnQXV0aG9yaXphdGlvbjogQmVhcmVyIDliMDQ5MDUyYTk5OWU5OGRkNWM2M2I0ODBjNTIzYzcwM2E5ZGY0ZDYzMzkxMDMxMGYwYjk2NWJjMjc4OTkzYWInIFxcXFxgLFxuICAgICAgYC0tZGF0YSAnJHtqc29ufSdgLFxuICAgIF0uam9pbignXFxuJyk7XG4gICAgcmV0dXJuIGNtZDtcbiAgfSwgW3Byb2ZpbGVJZCwgY3NyUGVtLCBjb25mb3JtaW5nUHJvZHVjdElkLCBzdWJqZWN0Q04sIHN1YmplY3RPLCBzdWJqZWN0Q10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPkRldmVsb3BlciB0b29sIGZvciB0ZXN0aW5nIFNTTC5jb20gQzJQQSBBUEkgZW5kcG9pbnRzLiBDb25maWd1cmUgeW91ciBvd24gY3JlZGVudGlhbHMgb3IgdXNlIHRoZSBzaGFyZWQgdGVzdCB0b2tlbiBwcm92aWRlZC48L3A+XG5cbiAgICAgIHsvKiBDYXJkIEEg4oCUIEtleXMgJiBDZXJ0aWZpY2F0ZSAqL31cbiAgICAgIDxDYXJkIHRpdGxlPVwiS2V5cyAmIENlcnRpZmljYXRlXCI+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPntzdGF0dXN9PC9wPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgZmxleCBmbGV4LXdyYXAgZ2FwLTJcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInB4LTMgcHktMiByb3VuZGVkIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgZGlzYWJsZWQ6b3BhY2l0eS01MFwiIG9uQ2xpY2s9e2dlbmVyYXRlS2V5c0FuZENzcn0+XG4gICAgICAgICAgICBHZW5lcmF0ZSBLZXlzICZhbXA7IENTUlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBkaXNhYmxlZDpvcGFjaXR5LTUwXCIgb25DbGljaz17cmVxdWVzdENlcnRpZmljYXRlfSBkaXNhYmxlZD17IWhhdmVLZXlzfT5cbiAgICAgICAgICAgIFJlcXVlc3QgQ2VydGlmaWNhdGVcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInB4LTMgcHktMiByb3VuZGVkIGJvcmRlclwiIHR5cGU9XCJidXR0b25cIiBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Q3VybCgocykgPT4gIXMpfT5cbiAgICAgICAgICAgIHtzaG93Q3VybCA/ICdIaWRlJyA6ICdTaG93J30gQVBJIGNVUkxcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICB7a2V5cy5wa2NzOFBlbSAmJiAoXG4gICAgICAgICAgICA8YVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTIgcm91bmRlZCBib3JkZXIgdGV4dC1ibHVlLTcwMCBib3JkZXItYmx1ZS0yMDBcIlxuICAgICAgICAgICAgICBocmVmPXtgZGF0YTphcHBsaWNhdGlvbi94LXBlbS1maWxlO2NoYXJzZXQ9dXRmLTgsJHtlbmNvZGVVUklDb21wb25lbnQoa2V5cy5wa2NzOFBlbSl9YH1cbiAgICAgICAgICAgICAgZG93bmxvYWQ9XCJwcml2YXRlX2tleS5wazgucGVtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgRG93bmxvYWQgUHJpdmF0ZSBLZXlcbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtjZXJ0UGVtICYmIChcbiAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMiByb3VuZGVkIGJvcmRlciB0ZXh0LWJsdWUtNzAwIGJvcmRlci1ibHVlLTIwMFwiXG4gICAgICAgICAgICAgIGhyZWY9e2BkYXRhOmFwcGxpY2F0aW9uL3gtcGVtLWZpbGU7Y2hhcnNldD11dGYtOCwke2VuY29kZVVSSUNvbXBvbmVudChjZXJ0UGVtKX1gfVxuICAgICAgICAgICAgICBkb3dubG9hZD1cImNlcnRpZmljYXRlLnBlbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIERvd25sb2FkIENlcnRcbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtjc3JQZW0gJiYgKFxuICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQgYm9yZGVyIHRleHQtYmx1ZS03MDAgYm9yZGVyLWJsdWUtMjAwXCJcbiAgICAgICAgICAgICAgaHJlZj17YGRhdGE6YXBwbGljYXRpb24vcGtjczEwO2NoYXJzZXQ9dXRmLTgsJHtlbmNvZGVVUklDb21wb25lbnQoY3NyUGVtKX1gfVxuICAgICAgICAgICAgICBkb3dubG9hZD1cInJlcXVlc3QuY3NyLnBlbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIERvd25sb2FkIENTUlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7c2hvd0N1cmwgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtM1wiPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQteHMgdGV4dC1ncmF5LTYwMCBtYi0xXCI+Q2VydGlmaWNhdGUgUmVxdWVzdCDigJQgY1VSTCAoY29weSBhbmQgdXNlIGluIHlvdXIgYXBwKTwvbGFiZWw+XG4gICAgICAgICAgICA8cHJlIGNsYXNzTmFtZT1cInAtMyBiZy1ncmF5LTUwIGJvcmRlciByb3VuZGVkIHRleHQtWzEycHhdIHdoaXRlc3BhY2UtcHJlLXdyYXAgYnJlYWstYWxsXCI+e2N1cmxDb21tYW5kfTwvcHJlPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIGZsZXggZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMiByb3VuZGVkIGJvcmRlclwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gbmF2aWdhdG9yLmNsaXBib2FyZD8ud3JpdGVUZXh0KGN1cmxDb21tYW5kKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIENvcHlcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtWzExcHhdIHRleHQtZ3JheS01MDBcIj5SZXBsYWNlICZsdDtZT1VSX0FDQ09VTlRfVE9LRU4mZ3Q7IHdpdGggeW91ciBhY2NvdW50IHRva2VuLiBTaGFyZWQgdGVzdCB0b2tlbiBpcyBwcmUtZmlsbGVkIGZvciBxdWljayB0ZXN0aW5nLjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMyBnYXAtM1wiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+U3ViamVjdCBDTjwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTIgcHktMVwiIHZhbHVlPXtzdWJqZWN0Q059IG9uQ2hhbmdlPXsoZSkgPT4gc2V0U3ViamVjdENOKGUudGFyZ2V0LnZhbHVlKX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQteHMgdGV4dC1ncmF5LTYwMFwiPlN1YmplY3QgTzwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTIgcHktMVwiIHZhbHVlPXtzdWJqZWN0T30gb25DaGFuZ2U9eyhlKSA9PiBzZXRTdWJqZWN0TyhlLnRhcmdldC52YWx1ZSl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5TdWJqZWN0IEM8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT1cInctZnVsbCBib3JkZXIgcm91bmRlZCBweC0yIHB5LTFcIiB2YWx1ZT17c3ViamVjdEN9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0U3ViamVjdEMoZS50YXJnZXQudmFsdWUpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+UHJvZmlsZTwvbGFiZWw+XG4gICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBib3JkZXIgcm91bmRlZCBweC0yIHB5LTIgdGV4dC1zbVwiXG4gICAgICAgICAgICAgIHZhbHVlPXtwcm9maWxlSWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UHJvZmlsZUlkKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge1BST0ZJTEVTLm1hcCgocCkgPT4gKFxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtwLmlkfSB2YWx1ZT17cC5pZH0+e3AubmFtZX08L29wdGlvbj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtWzExcHhdIHRleHQtZ3JheS01MDAgbXQtMVwiPkF1dG9maWxscyBrbm93biBSU0EvRUNDIHByb2ZpbGUgSURzPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+Q29uZm9ybWluZyBQcm9kdWN0IElEPC9sYWJlbD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTIgcHktMVwiIHZhbHVlPXtjb25mb3JtaW5nUHJvZHVjdElkfSBvbkNoYW5nZT17KGUpID0+IHNldENvbmZvcm1pbmdQcm9kdWN0SWQoZS50YXJnZXQudmFsdWUpfSAvPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIHRleHQteHMgYm9yZGVyIHJvdW5kZWRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldENvbmZvcm1pbmdQcm9kdWN0SWQodHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgJ3JhbmRvbVVVSUQnIGluIGNyeXB0byA/IGNyeXB0by5yYW5kb21VVUlEKCkgOiAnJyl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBSYW5kb21cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtWzExcHhdIHRleHQtZ3JheS01MDAgbXQtMVwiPlByZWZpbGwgd2l0aCBhIHJhbmRvbSBVVUlELCBvciBwYXN0ZSB5b3VyIG93bjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0NhcmQ+XG5cbiAgICAgIHsvKiBDYXJkIEIg4oCUIEltYWdlICYgTWFuaWZlc3QgKi99XG4gICAgICA8Q2FyZCB0aXRsZT1cIkltYWdlICYgTWFuaWZlc3RcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTRcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0xXCI+SW1hZ2U8L2xhYmVsPlxuICAgICAgICAgICAgPERyb3B6b25lIG9uRmlsZT17b25Ecm9wSW1hZ2V9IC8+XG4gICAgICAgICAgICB7aW1hZ2VQcmV2aWV3VXJsICYmIChcbiAgICAgICAgICAgICAgPEltYWdlIHNyYz17aW1hZ2VQcmV2aWV3VXJsfSBhbHQ9XCJwcmV2aWV3XCIgd2lkdGg9ezMyMH0gaGVpZ2h0PXsyNDB9IGNsYXNzTmFtZT1cIm10LTIgcm91bmRlZCBib3JkZXIgb2JqZWN0LWNvbnRhaW5cIiAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0xXCI+TWFuaWZlc3QgSlNPTjwvbGFiZWw+XG4gICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtNDAgYm9yZGVyIHJvdW5kZWQgcC0yIGZvbnQtbW9ubyB0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgdmFsdWU9e21hbmlmZXN0SnNvbn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRNYW5pZmVzdEpzb24oZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHttYW5pZmVzdEVycm9yICYmIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1yZWQtNjAwIG10LTFcIj57bWFuaWZlc3RFcnJvcn08L3A+fVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIGZsZXggZmxleC13cmFwIGdhcC0yIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInB4LTMgcHktMiByb3VuZGVkIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgZGlzYWJsZWQ6b3BhY2l0eS01MFwiIGRpc2FibGVkPXshY2FuU2lnbn0gb25DbGljaz17c2lnbkltYWdlfT5cbiAgICAgICAgICAgICAgICBTaWduIEltYWdlXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQteHMgdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXt1c2VTZXJ2ZXJTaWduZXJ9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0VXNlU2VydmVyU2lnbmVyKGUudGFyZ2V0LmNoZWNrZWQpfSAvPlxuICAgICAgICAgICAgICAgIFF1aWNrIGRlbW8gbW9kZSAobm8gY3JlZGVudGlhbHMgbmVlZGVkKVxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInB4LTMgcHktMiByb3VuZGVkIGJvcmRlclwiIG9uQ2xpY2s9eygpID0+IHNldE1hbmlmZXN0SnNvbihKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKG1hbmlmZXN0SnNvbiksIG51bGwsIDIpKX0+Rm9ybWF0PC9idXR0b24+XG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5QcmVzZXQ8L2xhYmVsPlxuICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0yIGJvcmRlciByb3VuZGVkIHRleHQtc21cIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtwcmVzZXR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB2ID0gZS50YXJnZXQudmFsdWUgYXMgJ21pbmltYWwnIHwgJ2VkaXRvcmlhbCc7XG4gICAgICAgICAgICAgICAgICBzZXRQcmVzZXQodik7XG4gICAgICAgICAgICAgICAgICBzZXRNYW5pZmVzdEpzb24oSlNPTi5zdHJpbmdpZnkoUHJlc2V0c1t2XSwgbnVsbCwgMikpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibWluaW1hbFwiPk1pbmltYWw8L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiZWRpdG9yaWFsXCI+RWRpdG9yaWFsPC9vcHRpb24+XG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+VFNBPC9sYWJlbD5cbiAgICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMiBib3JkZXIgcm91bmRlZCB0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dHNhQWxnb31cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFsZ28gPSBlLnRhcmdldC52YWx1ZSBhcyAnZWNjJyB8ICdyc2EnO1xuICAgICAgICAgICAgICAgICAgc2V0VHNhQWxnbyhhbGdvKTtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UobWFuaWZlc3RKc29uKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkLnRhX3VybCA9IGFsZ28gPT09ICdyc2EnXG4gICAgICAgICAgICAgICAgICAgICAgPyAnaHR0cHM6Ly9hcGkuc3RhZ2luZy5jMnBhLnNzbC5jb20vdjEvdGltZXN0YW1wL3JzYSdcbiAgICAgICAgICAgICAgICAgICAgICA6ICdodHRwczovL2FwaS5zdGFnaW5nLmMycGEuc3NsLmNvbS92MS90aW1lc3RhbXAnO1xuICAgICAgICAgICAgICAgICAgICBzZXRNYW5pZmVzdEVycm9yKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWFuaWZlc3RKc29uKEpTT04uc3RyaW5naWZ5KHBhcnNlZCwgbnVsbCwgMikpO1xuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWFuaWZlc3RFcnJvcignSW52YWxpZCBKU09OOyBjYW5ub3Qgc2V0IFRTQScpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiZWNjXCI+RUNDIChkZWZhdWx0KTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJyc2FcIj5SU0E8L29wdGlvbj5cbiAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQgYm9yZGVyXCIgb25DbGljaz17KCkgPT4gc2V0TWFuaWZlc3RKc29uKCd7fScpfT5SZXNldDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQgYm9yZGVyXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKG1hbmlmZXN0SnNvbik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IE1hbmlmZXN0U2NoZW1hLnNhZmVQYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbWFuaWZlc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWFuaWZlc3RFcnJvcignJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEsIG51bGwsIDIpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9ICdtYW5pZmVzdC5qc29uJztcbiAgICAgICAgICAgICAgICAgICAgYS5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6IFN0cmluZyhlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWFuaWZlc3RFcnJvcihtc2cgfHwgJ0ludmFsaWQgSlNPTicpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBEb3dubG9hZCBNYW5pZmVzdFxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQ2FyZD5cblxuICAgICAgey8qIENhcmQgQyDigJQgVmVyaWZ5ICovfVxuICAgICAgPENhcmQgdGl0bGU9XCJWZXJpZnlcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIGZsZXggZ2FwLTIgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJweC0zIHB5LTIgcm91bmRlZCBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlXCIgb25DbGljaz17dmVyaWZ5T25seX0+XG4gICAgICAgICAgICBWZXJpZnlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICB7dmVyaWZ5UmVwb3J0ICYmICgoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCByID0gSlNPTi5wYXJzZSh2ZXJpZnlSZXBvcnQpO1xuICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSAoci5zdGF0dXMgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgIGNvbnN0IGNscyA9IHN0YXR1cyA9PT0gJ29rJyA/ICdiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAgYm9yZGVyLWdyZWVuLTIwMCcgOiBzdGF0dXMgPT09ICd3YXJuJyA/ICdiZy1hbWJlci0xMDAgdGV4dC1hbWJlci04MDAgYm9yZGVyLWFtYmVyLTIwMCcgOiAnYmctcmVkLTEwMCB0ZXh0LXJlZC04MDAgYm9yZGVyLXJlZC0yMDAnO1xuICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IHN0YXR1cyA9PT0gJ29rJyA/ICdQYXNzJyA6IHN0YXR1cyA9PT0gJ3dhcm4nID8gJ1dhcm5pbmdzJyA6ICdGYWlsJztcbiAgICAgICAgICAgICAgcmV0dXJuIDxzcGFuIGNsYXNzTmFtZT17YGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciB0ZXh0LXhzIGZvbnQtbWVkaXVtIHJvdW5kZWQgcHgtMiBweS0xIGJvcmRlciAke2Nsc31gfT57bGFiZWx9PC9zcGFuPjtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSgpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge3ZlcmlmeVJlcG9ydCAmJiAoXG4gICAgICAgICAgPHByZSBjbGFzc05hbWU9XCJtdC0zIHdoaXRlc3BhY2UtcHJlLXdyYXAgdGV4dC1zbSBiZy1ncmF5LTUwIGJvcmRlciByb3VuZGVkIHAtM1wiPnt2ZXJpZnlSZXBvcnR9PC9wcmU+XG4gICAgICAgICl9XG4gICAgICA8L0NhcmQ+XG5cbiAgICAgIDxmb290ZXIgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LThcIj5cbiAgICAgICAgPHA+U1NMLmNvbSBDMlBBIERldmVsb3BlciBUb29sIOKAoiBUZXN0IGNlcnRpZmljYXRlIGlzc3VhbmNlLCBzaWduaW5nLCBhbmQgdmVyaWZpY2F0aW9uIEFQSXM8L3A+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTJcIj5UU0EgRW5kcG9pbnRzOiBFQ0Mg4oCUIGh0dHBzOi8vYXBpLnN0YWdpbmcuYzJwYS5zc2wuY29tL3YxL3RpbWVzdGFtcCDigKIgUlNBIOKAlCBodHRwczovL2FwaS5zdGFnaW5nLmMycGEuc3NsLmNvbS92MS90aW1lc3RhbXAvcnNhPC9wPlxuICAgICAgICA8cD5UcnVzdCBCdW5kbGVzOiBFQ0Mg4oCUIGh0dHBzOi8vYXBpLnN0YWdpbmcuYzJwYS5zc2wuY29tL3JlcG9zaXRvcnkvQzJQQS1FQ0MtVFJVU1QtQlVORExFLnBlbSDigKIgUlNBIOKAlCBodHRwczovL2FwaS5zdGFnaW5nLmMycGEuc3NsLmNvbS9yZXBvc2l0b3J5L0MyUEEtUlNBLVRSVVNULUJVTkRMRS5wZW08L3A+XG4gICAgICA8L2Zvb3Rlcj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJ1c2VTdGF0ZSIsIkltYWdlIiwidG9hc3QiLCJDYXJkIiwiRHJvcHpvbmUiLCJNYW5pZmVzdFNjaGVtYSIsIlByZXNldHMiLCJnZW5lcmF0ZUNzclBlbSIsInZlcmlmeUFzc2V0IiwidG9QZW0iLCJ0eXBlIiwiZGF0YSIsImJ5dGVzIiwiVWludDhBcnJheSIsImJpbiIsImkiLCJieXRlTGVuZ3RoIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYjY0IiwiYnRvYSIsIndyYXBwZWQiLCJyZXBsYWNlIiwiZXhwb3J0S2V5cyIsImtwIiwicGtjczgiLCJjcnlwdG8iLCJzdWJ0bGUiLCJleHBvcnRLZXkiLCJwcml2YXRlS2V5IiwicGtjczhQZW0iLCJlY1BlbSIsInNwa2kiLCJwdWJsaWNLZXkiLCJzcGtpUGVtIiwiUGFnZSIsImtleXMiLCJzZXRLZXlzIiwic3RhdHVzIiwic2V0U3RhdHVzIiwiY2VydFBlbSIsInNldENlcnRQZW0iLCJjc3JQZW0iLCJzZXRDc3JQZW0iLCJtYW5pZmVzdEpzb24iLCJzZXRNYW5pZmVzdEpzb24iLCJKU09OIiwic3RyaW5naWZ5IiwibWluaW1hbCIsIm1hbmlmZXN0RXJyb3IiLCJzZXRNYW5pZmVzdEVycm9yIiwiaW1hZ2VGaWxlIiwic2V0SW1hZ2VGaWxlIiwidmVyaWZ5UmVwb3J0Iiwic2V0VmVyaWZ5UmVwb3J0Iiwic2hvd0N1cmwiLCJzZXRTaG93Q3VybCIsInRzYUFsZ28iLCJzZXRUc2FBbGdvIiwic3ViamVjdENOIiwic2V0U3ViamVjdENOIiwic3ViamVjdE8iLCJzZXRTdWJqZWN0TyIsInN1YmplY3RDIiwic2V0U3ViamVjdEMiLCJQUk9GSUxFUyIsImlkIiwibmFtZSIsImRlZmF1bHRQcm9maWxlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0NFUlRfUFJPRklMRV9JRCIsInByb2ZpbGVJZCIsInNldFByb2ZpbGVJZCIsImRlZmF1bHRQcm9kdWN0SWQiLCJORVhUX1BVQkxJQ19DT05GT1JNSU5HX1BST0RVQ1RfSUQiLCJyYW5kb21VVUlEIiwiY29uZm9ybWluZ1Byb2R1Y3RJZCIsInNldENvbmZvcm1pbmdQcm9kdWN0SWQiLCJ1c2VTZXJ2ZXJTaWduZXIiLCJzZXRVc2VTZXJ2ZXJTaWduZXIiLCJoYXZlS2V5cyIsImNhblNpZ24iLCJwcmVzZXQiLCJzZXRQcmVzZXQiLCJnZW5lcmF0ZUtleXNBbmRDc3IiLCJsb2FkaW5nIiwiZ2VuZXJhdGVLZXkiLCJuYW1lZEN1cnZlIiwiZXhwb3J0ZWQiLCJjc3IiLCJzdWJqZWN0IiwiQ04iLCJ1bmRlZmluZWQiLCJPIiwiQyIsInN1Y2Nlc3MiLCJlIiwibXNnIiwibWVzc2FnZSIsImVycm9yIiwicmVxdWVzdENlcnRpZmljYXRlIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsImpzb24iLCJvayIsIkVycm9yIiwiY2VydGlmaWNhdGVQZW0iLCJvbkRyb3BJbWFnZSIsImZpbGUiLCJzaWduSW1hZ2UiLCJwYXJzZWQiLCJwYXJzZSIsInNhZmVQYXJzZSIsImZvcm0iLCJGb3JtRGF0YSIsImFwcGVuZCIsInJlc3AiLCJoaW50IiwiY3QiLCJnZXQiLCJpbmNsdWRlcyIsImoiLCJkZXRhaWwiLCJ0ZXh0IiwiZnVsbE1zZyIsInRvU3RyaW5nIiwic2xpY2UiLCJibG9iIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImNsaWNrIiwicmV2b2tlT2JqZWN0VVJMIiwiZHVyYXRpb24iLCJkaXNwbGF5TXNnIiwibGVuZ3RoIiwic3R5bGUiLCJtYXhXaWR0aCIsInZlcmlmeU9ubHkiLCJyZXBvcnQiLCJpbWFnZVByZXZpZXdVcmwiLCJjdXJsQ29tbWFuZCIsImFwaUJhc2UiLCJORVhUX1BVQkxJQ19BUElfQkFTRSIsImJvZHlPdXQiLCJjZXJ0aWZpY2F0ZV9wcm9maWxlX2lkIiwiY2VydGlmaWNhdGVfc2lnbmluZ19yZXF1ZXN0IiwiY29uZm9ybWluZ19wcm9kdWN0X2lkIiwic3ViaiIsImV4cGVyaW1lbnRhbCIsImNtZCIsImpvaW4iLCJkaXYiLCJjbGFzc05hbWUiLCJwIiwidGl0bGUiLCJidXR0b24iLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJzIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwibGFiZWwiLCJwcmUiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJzcGFuIiwiaW5wdXQiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0Iiwic2VsZWN0IiwibWFwIiwib3B0aW9uIiwib25GaWxlIiwic3JjIiwiYWx0Iiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0YXJlYSIsImNoZWNrZWQiLCJ2IiwiYWxnbyIsInRhX3VybCIsImVyciIsIkJsb2IiLCJyIiwidG9Mb3dlckNhc2UiLCJjbHMiLCJmb290ZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/Card.tsx":
/*!*****************************!*\
  !*** ./components/Card.tsx ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Card: () => (/* binding */ Card)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n\nfunction Card(param) {\n    let { title, children } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n        className: \"card\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                className: \"text-lg font-semibold\",\n                children: title\n            }, void 0, false, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/components/Card.tsx\",\n                lineNumber: 6,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-3\",\n                children: children\n            }, void 0, false, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/components/Card.tsx\",\n                lineNumber: 7,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jeremiah/Desktop/c2pa tool/components/Card.tsx\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, this);\n}\n_c = Card;\nvar _c;\n$RefreshReg$(_c, \"Card\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvQ2FyZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRU8sU0FBU0EsS0FBSyxLQUEyRDtRQUEzRCxFQUFFQyxLQUFLLEVBQUVDLFFBQVEsRUFBMEMsR0FBM0Q7SUFDbkIscUJBQ0UsOERBQUNDO1FBQVFDLFdBQVU7OzBCQUNqQiw4REFBQ0M7Z0JBQUdELFdBQVU7MEJBQXlCSDs7Ozs7OzBCQUN2Qyw4REFBQ0s7Z0JBQUlGLFdBQVU7MEJBQVFGOzs7Ozs7Ozs7Ozs7QUFHN0I7S0FQZ0JGIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvY29tcG9uZW50cy9DYXJkLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBDYXJkKHsgdGl0bGUsIGNoaWxkcmVuIH06IHsgdGl0bGU6IHN0cmluZzsgY2hpbGRyZW46IFJlYWN0Tm9kZSB9KSB7XG4gIHJldHVybiAoXG4gICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiY2FyZFwiPlxuICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZFwiPnt0aXRsZX08L2gyPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zXCI+e2NoaWxkcmVufTwvZGl2PlxuICAgIDwvc2VjdGlvbj5cbiAgKTtcbn1cblxuIl0sIm5hbWVzIjpbIkNhcmQiLCJ0aXRsZSIsImNoaWxkcmVuIiwic2VjdGlvbiIsImNsYXNzTmFtZSIsImgyIiwiZGl2Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/Card.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/Dropzone.tsx":
/*!*********************************!*\
  !*** ./components/Dropzone.tsx ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Dropzone: () => (/* binding */ Dropzone)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ Dropzone auto */ \nvar _s = $RefreshSig$();\n\nfunction Dropzone(param) {\n    let { onFile, accept = 'image/jpeg,image/png,image/webp', maxBytes = 10 * 1024 * 1024 } = param;\n    _s();\n    const [active, setActive] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const onDrop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Dropzone.useCallback[onDrop]\": (e)=>{\n            var _e_dataTransfer_files;\n            e.preventDefault();\n            setActive(false);\n            const f = (_e_dataTransfer_files = e.dataTransfer.files) === null || _e_dataTransfer_files === void 0 ? void 0 : _e_dataTransfer_files[0];\n            if (f) {\n                if (f.size > maxBytes) return alert('File too large');\n                onFile(f);\n            }\n        }\n    }[\"Dropzone.useCallback[onDrop]\"], [\n        onFile,\n        maxBytes\n    ]);\n    const onChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Dropzone.useCallback[onChange]\": (e)=>{\n            var _e_target_files;\n            const f = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0];\n            if (f) {\n                if (f.size > maxBytes) return alert('File too large');\n                onFile(f);\n            }\n        }\n    }[\"Dropzone.useCallback[onChange]\"], [\n        onFile,\n        maxBytes\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                role: \"button\",\n                tabIndex: 0,\n                \"aria-label\": \"Upload image\",\n                onKeyDown: (e)=>{\n                    var _inputRef_current;\n                    if (e.key === 'Enter') (_inputRef_current = inputRef.current) === null || _inputRef_current === void 0 ? void 0 : _inputRef_current.click();\n                },\n                onDragOver: (e)=>{\n                    e.preventDefault();\n                    setActive(true);\n                },\n                onDragLeave: ()=>setActive(false),\n                onDrop: onDrop,\n                onClick: ()=>{\n                    var _inputRef_current;\n                    return (_inputRef_current = inputRef.current) === null || _inputRef_current === void 0 ? void 0 : _inputRef_current.click();\n                },\n                className: \"border-2 border-dashed rounded p-6 text-center cursor-pointer \".concat(active ? 'border-blue-400 bg-blue-50' : 'border-gray-300'),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-600\",\n                        children: \"Drag-and-drop an image, or click to select.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/components/Dropzone.tsx\",\n                        lineNumber: 50,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-xs text-gray-500 mt-1\",\n                        children: \"Accepted: JPEG, PNG, WebP\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jeremiah/Desktop/c2pa tool/components/Dropzone.tsx\",\n                        lineNumber: 51,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/components/Dropzone.tsx\",\n                lineNumber: 39,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                ref: inputRef,\n                type: \"file\",\n                accept: accept,\n                className: \"hidden\",\n                onChange: onChange\n            }, void 0, false, {\n                fileName: \"/Users/jeremiah/Desktop/c2pa tool/components/Dropzone.tsx\",\n                lineNumber: 53,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jeremiah/Desktop/c2pa tool/components/Dropzone.tsx\",\n        lineNumber: 38,\n        columnNumber: 5\n    }, this);\n}\n_s(Dropzone, \"GlxbBcjZvaqySmhH1QBowV5oKJU=\");\n_c = Dropzone;\nvar _c;\n$RefreshReg$(_c, \"Dropzone\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvRHJvcHpvbmUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNzRDtBQUUvQyxTQUFTRyxTQUFTLEtBUXhCO1FBUndCLEVBQ3ZCQyxNQUFNLEVBQ05DLFNBQVMsaUNBQWlDLEVBQzFDQyxXQUFXLEtBQUssT0FBTyxJQUFJLEVBSzVCLEdBUndCOztJQVN2QixNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR04sK0NBQVFBLENBQUM7SUFDckMsTUFBTU8sV0FBV1IsNkNBQU1BLENBQTBCO0lBRWpELE1BQU1TLFNBQVNWLGtEQUFXQTt3Q0FDeEIsQ0FBQ1c7Z0JBR1dBO1lBRlZBLEVBQUVDLGNBQWM7WUFDaEJKLFVBQVU7WUFDVixNQUFNSyxLQUFJRix3QkFBQUEsRUFBRUcsWUFBWSxDQUFDQyxLQUFLLGNBQXBCSiw0Q0FBQUEscUJBQXNCLENBQUMsRUFBRTtZQUNuQyxJQUFJRSxHQUFHO2dCQUNMLElBQUlBLEVBQUVHLElBQUksR0FBR1YsVUFBVSxPQUFPVyxNQUFNO2dCQUNwQ2IsT0FBT1M7WUFDVDtRQUNGO3VDQUNBO1FBQUNUO1FBQVFFO0tBQVM7SUFHcEIsTUFBTVksV0FBV2xCLGtEQUFXQTswQ0FBQyxDQUFDVztnQkFDbEJBO1lBQVYsTUFBTUUsS0FBSUYsa0JBQUFBLEVBQUVRLE1BQU0sQ0FBQ0osS0FBSyxjQUFkSixzQ0FBQUEsZUFBZ0IsQ0FBQyxFQUFFO1lBQzdCLElBQUlFLEdBQUc7Z0JBQ0wsSUFBSUEsRUFBRUcsSUFBSSxHQUFHVixVQUFVLE9BQU9XLE1BQU07Z0JBQ3BDYixPQUFPUztZQUNUO1FBQ0Y7eUNBQUc7UUFBQ1Q7UUFBUUU7S0FBUztJQUVyQixxQkFDRSw4REFBQ2M7OzBCQUNDLDhEQUFDQTtnQkFDQ0MsTUFBSztnQkFDTEMsVUFBVTtnQkFDVkMsY0FBVztnQkFDWEMsV0FBVyxDQUFDYjt3QkFBK0JGO29CQUF2QixJQUFJRSxFQUFFYyxHQUFHLEtBQUssVUFBU2hCLG9CQUFBQSxTQUFTaUIsT0FBTyxjQUFoQmpCLHdDQUFBQSxrQkFBa0JrQixLQUFLO2dCQUFJO2dCQUN0RUMsWUFBWSxDQUFDakI7b0JBQVFBLEVBQUVDLGNBQWM7b0JBQUlKLFVBQVU7Z0JBQU87Z0JBQzFEcUIsYUFBYSxJQUFNckIsVUFBVTtnQkFDN0JFLFFBQVFBO2dCQUNSb0IsU0FBUzt3QkFBTXJCOzRCQUFBQSxvQkFBQUEsU0FBU2lCLE9BQU8sY0FBaEJqQix3Q0FBQUEsa0JBQWtCa0IsS0FBSzs7Z0JBQ3RDSSxXQUFXLGlFQUEySCxPQUExRHhCLFNBQVMsK0JBQStCOztrQ0FFcEgsOERBQUN5Qjt3QkFBRUQsV0FBVTtrQ0FBd0I7Ozs7OztrQ0FDckMsOERBQUNDO3dCQUFFRCxXQUFVO2tDQUE2Qjs7Ozs7Ozs7Ozs7OzBCQUU1Qyw4REFBQ0U7Z0JBQU1DLEtBQUt6QjtnQkFBVTBCLE1BQUs7Z0JBQU85QixRQUFRQTtnQkFBUTBCLFdBQVU7Z0JBQVNiLFVBQVVBOzs7Ozs7Ozs7Ozs7QUFHckY7R0FwRGdCZjtLQUFBQSIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL2NvbXBvbmVudHMvRHJvcHpvbmUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBEcm9wem9uZSh7XG4gIG9uRmlsZSxcbiAgYWNjZXB0ID0gJ2ltYWdlL2pwZWcsaW1hZ2UvcG5nLGltYWdlL3dlYnAnLFxuICBtYXhCeXRlcyA9IDEwICogMTAyNCAqIDEwMjQsXG59OiB7XG4gIG9uRmlsZTogKGZpbGU6IEZpbGUpID0+IHZvaWQ7XG4gIGFjY2VwdD86IHN0cmluZztcbiAgbWF4Qnl0ZXM/OiBudW1iZXI7XG59KSB7XG4gIGNvbnN0IFthY3RpdmUsIHNldEFjdGl2ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBvbkRyb3AgPSB1c2VDYWxsYmFjayhcbiAgICAoZTogUmVhY3QuRHJhZ0V2ZW50KSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzZXRBY3RpdmUoZmFsc2UpO1xuICAgICAgY29uc3QgZiA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzPy5bMF07XG4gICAgICBpZiAoZikge1xuICAgICAgICBpZiAoZi5zaXplID4gbWF4Qnl0ZXMpIHJldHVybiBhbGVydCgnRmlsZSB0b28gbGFyZ2UnKTtcbiAgICAgICAgb25GaWxlKGYpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW29uRmlsZSwgbWF4Qnl0ZXNdXG4gICk7XG5cbiAgY29uc3Qgb25DaGFuZ2UgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmID0gZS50YXJnZXQuZmlsZXM/LlswXTtcbiAgICBpZiAoZikge1xuICAgICAgaWYgKGYuc2l6ZSA+IG1heEJ5dGVzKSByZXR1cm4gYWxlcnQoJ0ZpbGUgdG9vIGxhcmdlJyk7XG4gICAgICBvbkZpbGUoZik7XG4gICAgfVxuICB9LCBbb25GaWxlLCBtYXhCeXRlc10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgIHRhYkluZGV4PXswfVxuICAgICAgICBhcmlhLWxhYmVsPVwiVXBsb2FkIGltYWdlXCJcbiAgICAgICAgb25LZXlEb3duPXsoZSkgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicpIGlucHV0UmVmLmN1cnJlbnQ/LmNsaWNrKCk7IH19XG4gICAgICAgIG9uRHJhZ092ZXI9eyhlKSA9PiB7IGUucHJldmVudERlZmF1bHQoKTsgc2V0QWN0aXZlKHRydWUpOyB9fVxuICAgICAgICBvbkRyYWdMZWF2ZT17KCkgPT4gc2V0QWN0aXZlKGZhbHNlKX1cbiAgICAgICAgb25Ecm9wPXtvbkRyb3B9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGlucHV0UmVmLmN1cnJlbnQ/LmNsaWNrKCl9XG4gICAgICAgIGNsYXNzTmFtZT17YGJvcmRlci0yIGJvcmRlci1kYXNoZWQgcm91bmRlZCBwLTYgdGV4dC1jZW50ZXIgY3Vyc29yLXBvaW50ZXIgJHthY3RpdmUgPyAnYm9yZGVyLWJsdWUtNDAwIGJnLWJsdWUtNTAnIDogJ2JvcmRlci1ncmF5LTMwMCd9YH1cbiAgICAgID5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+RHJhZy1hbmQtZHJvcCBhbiBpbWFnZSwgb3IgY2xpY2sgdG8gc2VsZWN0LjwvcD5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTFcIj5BY2NlcHRlZDogSlBFRywgUE5HLCBXZWJQPC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8aW5wdXQgcmVmPXtpbnB1dFJlZn0gdHlwZT1cImZpbGVcIiBhY2NlcHQ9e2FjY2VwdH0gY2xhc3NOYW1lPVwiaGlkZGVuXCIgb25DaGFuZ2U9e29uQ2hhbmdlfSAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidXNlU3RhdGUiLCJEcm9wem9uZSIsIm9uRmlsZSIsImFjY2VwdCIsIm1heEJ5dGVzIiwiYWN0aXZlIiwic2V0QWN0aXZlIiwiaW5wdXRSZWYiLCJvbkRyb3AiLCJlIiwicHJldmVudERlZmF1bHQiLCJmIiwiZGF0YVRyYW5zZmVyIiwiZmlsZXMiLCJzaXplIiwiYWxlcnQiLCJvbkNoYW5nZSIsInRhcmdldCIsImRpdiIsInJvbGUiLCJ0YWJJbmRleCIsImFyaWEtbGFiZWwiLCJvbktleURvd24iLCJrZXkiLCJjdXJyZW50IiwiY2xpY2siLCJvbkRyYWdPdmVyIiwib25EcmFnTGVhdmUiLCJvbkNsaWNrIiwiY2xhc3NOYW1lIiwicCIsImlucHV0IiwicmVmIiwidHlwZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/Dropzone.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/c2paClient.ts":
/*!***************************!*\
  !*** ./lib/c2paClient.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signImageWithManifest: () => (/* binding */ signImageWithManifest),\n/* harmony export */   verifyAsset: () => (/* binding */ verifyAsset)\n/* harmony export */ });\n// C2PA helpers backed by the `c2pa` WebAssembly library.\n// We use dynamic imports and loose typing to keep integration resilient across minor versions.\nasync function loadC2pa() {\n    // Dynamic import to avoid SSR issues\n    const mod = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_c2pa_dist_c2pa_esm_js\").then(__webpack_require__.bind(__webpack_require__, /*! c2pa */ \"(app-pages-browser)/./node_modules/c2pa/dist/c2pa.esm.js\"));\n    var _mod_default;\n    return (_mod_default = mod === null || mod === void 0 ? void 0 : mod.default) !== null && _mod_default !== void 0 ? _mod_default : mod;\n}\nfunction publicC2paAsset(file) {\n    // We expect WASM/worker assets to be copied into /public/c2pa\n    return \"/c2pa/\".concat(file);\n}\nasync function signImageWithManifest(opts) {\n    var _c2paMod_Signer;\n    const { image, manifestJson, certificatePem, privateKeyPem, tsaUrl } = opts;\n    const c2paMod = await loadC2pa();\n    // Try common initialization patterns across c2pa versions\n    const wasmCandidates = [\n        'toolkit_bg.wasm',\n        'c2pa_wasm_bg.wasm',\n        'c2pa_wasm.wasm'\n    ];\n    const workerCandidates = [\n        'c2pa.worker.js',\n        'c2pa_worker.js',\n        'worker.js'\n    ];\n    let c2pa;\n    let lastErr;\n    for (const wasm of wasmCandidates){\n        for (const worker of workerCandidates){\n            try {\n                var _c2paMod_C2pa;\n                console.log(\"[C2PA] Trying to initialize with WASM: \".concat(wasm, \", Worker: \").concat(worker));\n                if (typeof ((_c2paMod_C2pa = c2paMod.C2pa) === null || _c2paMod_C2pa === void 0 ? void 0 : _c2paMod_C2pa.create) === 'function') {\n                    c2pa = await c2paMod.C2pa.create({\n                        wasmSrc: publicC2paAsset(wasm),\n                        workerSrc: publicC2paAsset(worker)\n                    });\n                    console.log('[C2PA] Successfully initialized using C2pa.create');\n                } else if (typeof c2paMod.create === 'function') {\n                    c2pa = await c2paMod.create({\n                        wasmSrc: publicC2paAsset(wasm),\n                        workerSrc: publicC2paAsset(worker)\n                    });\n                    console.log('[C2PA] Successfully initialized using create');\n                } else {\n                    // Some versions may work without explicit init\n                    c2pa = c2paMod;\n                    console.log('[C2PA] Using module directly (no explicit init)');\n                }\n                lastErr = null;\n                break;\n            } catch (e) {\n                console.warn(\"[C2PA] Failed to initialize with \".concat(wasm, \"/\").concat(worker, \":\"), e);\n                lastErr = e;\n            }\n        }\n        if (c2pa) break;\n    }\n    if (!c2pa && lastErr) {\n        throw new Error('Failed to initialize C2PA. Ensure WASM/worker assets are served under /public/c2pa. ' + 'Run: npm run copy:c2pa');\n    }\n    // Build a signer; different versions expose different factories\n    const signerOpts = {\n        privateKeyPem,\n        privateKey: privateKeyPem,\n        certificatePem,\n        certChain: [\n            certificatePem\n        ],\n        certificateChain: [\n            certificatePem\n        ],\n        timeAuthorityUrl: tsaUrl,\n        timeStampUrl: tsaUrl,\n        timestampUrl: tsaUrl,\n        taUrl: tsaUrl\n    };\n    let signer;\n    if (typeof ((_c2paMod_Signer = c2paMod.Signer) === null || _c2paMod_Signer === void 0 ? void 0 : _c2paMod_Signer.create) === 'function') {\n        console.log('[C2PA] Creating signer using Signer.create');\n        signer = await c2paMod.Signer.create(signerOpts);\n    } else if (typeof c2paMod.createSigner === 'function') {\n        console.log('[C2PA] Creating signer using createSigner');\n        try {\n            signer = await c2paMod.createSigner(signerOpts);\n        } catch (e) {\n            signer = await c2paMod.createSigner({\n                privateKey: privateKeyPem,\n                certChain: [\n                    certificatePem\n                ],\n                timeAuthorityUrl: tsaUrl\n            });\n        }\n    } else {\n        // Fallback: pass signer as a plain object; c2pa.sign may build internally\n        console.log('[C2PA] Using plain signer object (no factory method found)');\n        signer = signerOpts;\n    }\n    console.log('[C2PA] Signer created:', signer ? 'success' : 'failed');\n    // Ensure manifest has a TSA URL reachable from the browser.\n    // Prefer the app's proxy to avoid CORS issues with staging TSA.\n    let manifestForSign = manifestJson || {};\n    try {\n        const origin =  true ? window.location.origin : 0;\n        const proxyUrl = origin ? \"\".concat(origin, \"/api/tsa/timestamp\") : '/api/tsa/timestamp';\n        // If ta_url missing or points to external TSA, route through our proxy\n        const ta = manifestForSign === null || manifestForSign === void 0 ? void 0 : manifestForSign.ta_url;\n        const needsProxy = !ta || /^https?:\\/\\//i.test(ta);\n        manifestForSign = {\n            ...manifestForSign,\n            ta_url: proxyUrl\n        };\n    } catch (e) {\n    // ignore\n    }\n    // Sign\n    const attemptErrors = [];\n    function coerceToBlob(anyOut) {\n        if (!anyOut) return null;\n        if (anyOut instanceof Blob) return anyOut;\n        if (anyOut instanceof ArrayBuffer) return new Blob([\n            anyOut\n        ], {\n            type: image.type\n        });\n        if ((anyOut === null || anyOut === void 0 ? void 0 : anyOut.buffer) instanceof ArrayBuffer) return new Blob([\n            anyOut.buffer\n        ], {\n            type: image.type\n        });\n        if (anyOut instanceof Uint8Array) return new Blob([\n            anyOut\n        ], {\n            type: image.type\n        });\n        if ((anyOut === null || anyOut === void 0 ? void 0 : anyOut.blob) instanceof Blob) return anyOut.blob;\n        if ((anyOut === null || anyOut === void 0 ? void 0 : anyOut.file) instanceof Blob) return anyOut.file;\n        if ((anyOut === null || anyOut === void 0 ? void 0 : anyOut.signed) instanceof Blob) return anyOut.signed;\n        if ((anyOut === null || anyOut === void 0 ? void 0 : anyOut.data) instanceof ArrayBuffer) return new Blob([\n            anyOut.data\n        ], {\n            type: image.type\n        });\n        return null;\n    }\n    async function trySign(target) {\n        if (!target) return null;\n        // sign(file, { signer, manifest })\n        try {\n            if (typeof target.sign === 'function') {\n                const out1 = await target.sign(image, {\n                    signer,\n                    manifest: manifestForSign\n                });\n                const b1 = coerceToBlob(out1);\n                if (b1) return b1;\n                if (out1 === null || out1 === void 0 ? void 0 : out1.arrayBuffer) {\n                    const buf = await out1.arrayBuffer();\n                    return new Blob([\n                        buf\n                    ], {\n                        type: image.type\n                    });\n                }\n            }\n        } catch (e) {\n            attemptErrors.push((e === null || e === void 0 ? void 0 : e.message) || String(e));\n        }\n        // sign({ file, signer, manifest })\n        try {\n            if (typeof target.sign === 'function') {\n                const out2 = await target.sign({\n                    file: image,\n                    signer,\n                    manifest: manifestForSign\n                });\n                const b2 = coerceToBlob(out2);\n                if (b2) return b2;\n                if (out2 === null || out2 === void 0 ? void 0 : out2.arrayBuffer) {\n                    const buf = await out2.arrayBuffer();\n                    return new Blob([\n                        buf\n                    ], {\n                        type: image.type\n                    });\n                }\n            }\n        } catch (e) {\n            attemptErrors.push((e === null || e === void 0 ? void 0 : e.message) || String(e));\n        }\n        // sign(manifest, file, signer)\n        try {\n            if (typeof target.sign === 'function') {\n                const out3 = await target.sign(manifestForSign, image, signer);\n                const b3 = coerceToBlob(out3);\n                if (b3) return b3;\n                if (out3 === null || out3 === void 0 ? void 0 : out3.arrayBuffer) {\n                    const buf = await out3.arrayBuffer();\n                    return new Blob([\n                        buf\n                    ], {\n                        type: image.type\n                    });\n                }\n            }\n        } catch (e) {\n            attemptErrors.push((e === null || e === void 0 ? void 0 : e.message) || String(e));\n        }\n        return null;\n    }\n    // Try sign on created instance and on the module itself\n    console.log('[C2PA] Attempting to sign using c2pa instance...');\n    let blob = await trySign(c2pa);\n    if (!blob) {\n        console.log('[C2PA] c2pa instance sign failed, trying c2paMod...');\n        blob = await trySign(c2paMod);\n    }\n    // Try writer APIs\n    async function tryWriter(factoryOwner) {\n        try {\n            var _factoryOwner_Writer;\n            if (factoryOwner === null || factoryOwner === void 0 ? void 0 : (_factoryOwner_Writer = factoryOwner.Writer) === null || _factoryOwner_Writer === void 0 ? void 0 : _factoryOwner_Writer.create) {\n                const writer = await factoryOwner.Writer.create({\n                    signer\n                });\n                if (writer === null || writer === void 0 ? void 0 : writer.sign) {\n                    const out = await writer.sign(image, manifestForSign);\n                    const b = coerceToBlob(out);\n                    if (b) return b;\n                }\n            }\n        } catch (e) {\n            attemptErrors.push((e === null || e === void 0 ? void 0 : e.message) || String(e));\n        }\n        try {\n            if (typeof (factoryOwner === null || factoryOwner === void 0 ? void 0 : factoryOwner.createWriter) === 'function') {\n                const writer = await factoryOwner.createWriter({\n                    signer\n                });\n                if (writer === null || writer === void 0 ? void 0 : writer.sign) {\n                    const out = await writer.sign(image, manifestForSign);\n                    const b = coerceToBlob(out);\n                    if (b) return b;\n                }\n            }\n        } catch (e) {\n            attemptErrors.push((e === null || e === void 0 ? void 0 : e.message) || String(e));\n        }\n        return null;\n    }\n    if (!blob) {\n        console.log('[C2PA] Sign methods failed, trying writer API on c2paMod...');\n        blob = await tryWriter(c2paMod);\n    }\n    if (!blob) {\n        console.log('[C2PA] c2paMod writer failed, trying c2pa writer...');\n        blob = await tryWriter(c2pa);\n    }\n    if (blob) {\n        console.log('[C2PA] Successfully signed image, returning blob');\n        return blob;\n    }\n    // Fallback: return original image blob if no output recognized\n    console.warn('c2pa sign returned an unexpected result shape. Attempts:', attemptErrors);\n    const errorDetails = attemptErrors.length > 0 ? \"\\n\\nAttempt errors:\\n\".concat(attemptErrors.map((e, i)=>\"\".concat(i + 1, \". \").concat(e)).join('\\n')) : '';\n    throw new Error(\"C2PA sign did not return a Blob\".concat(errorDetails));\n}\nasync function verifyAsset(file) {\n    var _c2paMod_C2pa;\n    const c2paMod = await loadC2pa();\n    let c2pa = c2paMod;\n    if (typeof ((_c2paMod_C2pa = c2paMod.C2pa) === null || _c2paMod_C2pa === void 0 ? void 0 : _c2paMod_C2pa.create) === 'function') {\n        try {\n            c2pa = await c2paMod.C2pa.create({\n                wasmSrc: publicC2paAsset('toolkit_bg.wasm'),\n                workerSrc: publicC2paAsset('c2pa.worker.js')\n            });\n        } catch (e) {\n            // try using module directly\n            c2pa = c2paMod;\n        }\n    }\n    if (typeof c2pa.verify === 'function') {\n        return await c2pa.verify(file);\n    }\n    if (typeof c2pa.read === 'function') {\n        return await c2pa.read({\n            file\n        });\n    }\n    throw new Error('C2PA verify/read API not found');\n} /* eslint-disable @typescript-eslint/no-explicit-any */ \n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxNQUFNLENBQUNuRjtJQUMzQjtJQUNBLElBQUksT0FBT1csS0FBS3lFLElBQUksS0FBSyxZQUFZO1FBQ25DLE9BQU8sTUFBTXpFLEtBQUt5RSxJQUFJLENBQUM7WUFBRXBGO1FBQUs7SUFDaEM7SUFDQSxNQUFNLElBQUl1QixNQUFNO0FBQ2xCLEVBQ0EscURBQXFEIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbGliL2MycGFDbGllbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQzJQQSBoZWxwZXJzIGJhY2tlZCBieSB0aGUgYGMycGFgIFdlYkFzc2VtYmx5IGxpYnJhcnkuXG4vLyBXZSB1c2UgZHluYW1pYyBpbXBvcnRzIGFuZCBsb29zZSB0eXBpbmcgdG8ga2VlcCBpbnRlZ3JhdGlvbiByZXNpbGllbnQgYWNyb3NzIG1pbm9yIHZlcnNpb25zLlxuXG50eXBlIFNpZ25PcHRzID0ge1xuICBpbWFnZTogRmlsZTtcbiAgbWFuaWZlc3RKc29uOiBhbnk7XG4gIGNlcnRpZmljYXRlUGVtOiBzdHJpbmc7XG4gIHByaXZhdGVLZXlQZW06IHN0cmluZzsgLy8gUEtDUyM4IGluIFBFTVxuICB0c2FVcmw/OiBzdHJpbmc7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBsb2FkQzJwYSgpIHtcbiAgLy8gRHluYW1pYyBpbXBvcnQgdG8gYXZvaWQgU1NSIGlzc3Vlc1xuICBjb25zdCBtb2Q6IGFueSA9IGF3YWl0IGltcG9ydCgnYzJwYScpO1xuICByZXR1cm4gKG1vZD8uZGVmYXVsdCA/PyBtb2QpO1xufVxuXG5mdW5jdGlvbiBwdWJsaWNDMnBhQXNzZXQoZmlsZTogc3RyaW5nKSB7XG4gIC8vIFdlIGV4cGVjdCBXQVNNL3dvcmtlciBhc3NldHMgdG8gYmUgY29waWVkIGludG8gL3B1YmxpYy9jMnBhXG4gIHJldHVybiBgL2MycGEvJHtmaWxlfWA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduSW1hZ2VXaXRoTWFuaWZlc3Qob3B0czogU2lnbk9wdHMpOiBQcm9taXNlPEJsb2I+IHtcbiAgY29uc3QgeyBpbWFnZSwgbWFuaWZlc3RKc29uLCBjZXJ0aWZpY2F0ZVBlbSwgcHJpdmF0ZUtleVBlbSwgdHNhVXJsIH0gPSBvcHRzO1xuICBjb25zdCBjMnBhTW9kID0gYXdhaXQgbG9hZEMycGEoKTtcblxuICAvLyBUcnkgY29tbW9uIGluaXRpYWxpemF0aW9uIHBhdHRlcm5zIGFjcm9zcyBjMnBhIHZlcnNpb25zXG4gIGNvbnN0IHdhc21DYW5kaWRhdGVzID0gW1xuICAgICd0b29sa2l0X2JnLndhc20nLFxuICAgICdjMnBhX3dhc21fYmcud2FzbScsXG4gICAgJ2MycGFfd2FzbS53YXNtJyxcbiAgXTtcbiAgY29uc3Qgd29ya2VyQ2FuZGlkYXRlcyA9IFtcbiAgICAnYzJwYS53b3JrZXIuanMnLFxuICAgICdjMnBhX3dvcmtlci5qcycsXG4gICAgJ3dvcmtlci5qcycsXG4gIF07XG5cbiAgbGV0IGMycGE6IGFueTtcbiAgbGV0IGxhc3RFcnI6IGFueTtcbiAgZm9yIChjb25zdCB3YXNtIG9mIHdhc21DYW5kaWRhdGVzKSB7XG4gICAgZm9yIChjb25zdCB3b3JrZXIgb2Ygd29ya2VyQ2FuZGlkYXRlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coYFtDMlBBXSBUcnlpbmcgdG8gaW5pdGlhbGl6ZSB3aXRoIFdBU006ICR7d2FzbX0sIFdvcmtlcjogJHt3b3JrZXJ9YCk7XG4gICAgICAgIGlmICh0eXBlb2YgYzJwYU1vZC5DMnBhPy5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjMnBhID0gYXdhaXQgYzJwYU1vZC5DMnBhLmNyZWF0ZSh7XG4gICAgICAgICAgICB3YXNtU3JjOiBwdWJsaWNDMnBhQXNzZXQod2FzbSksXG4gICAgICAgICAgICB3b3JrZXJTcmM6IHB1YmxpY0MycGFBc3NldCh3b3JrZXIpLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbQzJQQV0gU3VjY2Vzc2Z1bGx5IGluaXRpYWxpemVkIHVzaW5nIEMycGEuY3JlYXRlJyk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGMycGFNb2QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgYzJwYSA9IGF3YWl0IGMycGFNb2QuY3JlYXRlKHtcbiAgICAgICAgICAgIHdhc21TcmM6IHB1YmxpY0MycGFBc3NldCh3YXNtKSxcbiAgICAgICAgICAgIHdvcmtlclNyYzogcHVibGljQzJwYUFzc2V0KHdvcmtlciksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tDMlBBXSBTdWNjZXNzZnVsbHkgaW5pdGlhbGl6ZWQgdXNpbmcgY3JlYXRlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBtYXkgd29yayB3aXRob3V0IGV4cGxpY2l0IGluaXRcbiAgICAgICAgICBjMnBhID0gYzJwYU1vZDtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0MyUEFdIFVzaW5nIG1vZHVsZSBkaXJlY3RseSAobm8gZXhwbGljaXQgaW5pdCknKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0RXJyID0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgW0MyUEFdIEZhaWxlZCB0byBpbml0aWFsaXplIHdpdGggJHt3YXNtfS8ke3dvcmtlcn06YCwgZSk7XG4gICAgICAgIGxhc3RFcnIgPSBlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYzJwYSkgYnJlYWs7XG4gIH1cblxuICBpZiAoIWMycGEgJiYgbGFzdEVycikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBDMlBBLiBFbnN1cmUgV0FTTS93b3JrZXIgYXNzZXRzIGFyZSBzZXJ2ZWQgdW5kZXIgL3B1YmxpYy9jMnBhLiAnICtcbiAgICAgICdSdW46IG5wbSBydW4gY29weTpjMnBhJ1xuICAgICk7XG4gIH1cblxuICAvLyBCdWlsZCBhIHNpZ25lcjsgZGlmZmVyZW50IHZlcnNpb25zIGV4cG9zZSBkaWZmZXJlbnQgZmFjdG9yaWVzXG4gIGNvbnN0IHNpZ25lck9wdHM6IGFueSA9IHtcbiAgICBwcml2YXRlS2V5UGVtLFxuICAgIHByaXZhdGVLZXk6IHByaXZhdGVLZXlQZW0sXG4gICAgY2VydGlmaWNhdGVQZW0sXG4gICAgY2VydENoYWluOiBbY2VydGlmaWNhdGVQZW1dLFxuICAgIGNlcnRpZmljYXRlQ2hhaW46IFtjZXJ0aWZpY2F0ZVBlbV0sXG4gICAgdGltZUF1dGhvcml0eVVybDogdHNhVXJsLFxuICAgIHRpbWVTdGFtcFVybDogdHNhVXJsLFxuICAgIHRpbWVzdGFtcFVybDogdHNhVXJsLFxuICAgIHRhVXJsOiB0c2FVcmwsXG4gIH07XG5cbiAgbGV0IHNpZ25lcjogYW55O1xuICBpZiAodHlwZW9mIGMycGFNb2QuU2lnbmVyPy5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zb2xlLmxvZygnW0MyUEFdIENyZWF0aW5nIHNpZ25lciB1c2luZyBTaWduZXIuY3JlYXRlJyk7XG4gICAgc2lnbmVyID0gYXdhaXQgYzJwYU1vZC5TaWduZXIuY3JlYXRlKHNpZ25lck9wdHMpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjMnBhTW9kLmNyZWF0ZVNpZ25lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnNvbGUubG9nKCdbQzJQQV0gQ3JlYXRpbmcgc2lnbmVyIHVzaW5nIGNyZWF0ZVNpZ25lcicpO1xuICAgIHRyeSB7XG4gICAgICBzaWduZXIgPSBhd2FpdCBjMnBhTW9kLmNyZWF0ZVNpZ25lcihzaWduZXJPcHRzKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHNpZ25lciA9IGF3YWl0IGMycGFNb2QuY3JlYXRlU2lnbmVyKHsgcHJpdmF0ZUtleTogcHJpdmF0ZUtleVBlbSwgY2VydENoYWluOiBbY2VydGlmaWNhdGVQZW1dLCB0aW1lQXV0aG9yaXR5VXJsOiB0c2FVcmwgfSBhcyBhbnkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogcGFzcyBzaWduZXIgYXMgYSBwbGFpbiBvYmplY3Q7IGMycGEuc2lnbiBtYXkgYnVpbGQgaW50ZXJuYWxseVxuICAgIGNvbnNvbGUubG9nKCdbQzJQQV0gVXNpbmcgcGxhaW4gc2lnbmVyIG9iamVjdCAobm8gZmFjdG9yeSBtZXRob2QgZm91bmQpJyk7XG4gICAgc2lnbmVyID0gc2lnbmVyT3B0cztcbiAgfVxuICBjb25zb2xlLmxvZygnW0MyUEFdIFNpZ25lciBjcmVhdGVkOicsIHNpZ25lciA/ICdzdWNjZXNzJyA6ICdmYWlsZWQnKTtcblxuICAvLyBFbnN1cmUgbWFuaWZlc3QgaGFzIGEgVFNBIFVSTCByZWFjaGFibGUgZnJvbSB0aGUgYnJvd3Nlci5cbiAgLy8gUHJlZmVyIHRoZSBhcHAncyBwcm94eSB0byBhdm9pZCBDT1JTIGlzc3VlcyB3aXRoIHN0YWdpbmcgVFNBLlxuICBsZXQgbWFuaWZlc3RGb3JTaWduID0gbWFuaWZlc3RKc29uIHx8IHt9O1xuICB0cnkge1xuICAgIGNvbnN0IG9yaWdpbiA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2F0aW9uLm9yaWdpbiA6ICcnO1xuICAgIGNvbnN0IHByb3h5VXJsID0gb3JpZ2luID8gYCR7b3JpZ2lufS9hcGkvdHNhL3RpbWVzdGFtcGAgOiAnL2FwaS90c2EvdGltZXN0YW1wJztcbiAgICAvLyBJZiB0YV91cmwgbWlzc2luZyBvciBwb2ludHMgdG8gZXh0ZXJuYWwgVFNBLCByb3V0ZSB0aHJvdWdoIG91ciBwcm94eVxuICAgIGNvbnN0IHRhID0gbWFuaWZlc3RGb3JTaWduPy50YV91cmwgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IG5lZWRzUHJveHkgPSAhdGEgfHwgL15odHRwcz86XFwvXFwvL2kudGVzdCh0YSk7XG4gICAgbWFuaWZlc3RGb3JTaWduID0geyAuLi5tYW5pZmVzdEZvclNpZ24sIHRhX3VybDogcHJveHlVcmwgfTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlXG4gIH1cblxuICAvLyBTaWduXG4gIGNvbnN0IGF0dGVtcHRFcnJvcnM6IHN0cmluZ1tdID0gW107XG4gIGZ1bmN0aW9uIGNvZXJjZVRvQmxvYihhbnlPdXQ6IGFueSk6IEJsb2IgfCBudWxsIHtcbiAgICBpZiAoIWFueU91dCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKGFueU91dCBpbnN0YW5jZW9mIEJsb2IpIHJldHVybiBhbnlPdXQ7XG4gICAgaWYgKGFueU91dCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSByZXR1cm4gbmV3IEJsb2IoW2FueU91dF0sIHsgdHlwZTogaW1hZ2UudHlwZSB9KTtcbiAgICBpZiAoYW55T3V0Py5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgcmV0dXJuIG5ldyBCbG9iKFthbnlPdXQuYnVmZmVyXSwgeyB0eXBlOiBpbWFnZS50eXBlIH0pO1xuICAgIGlmIChhbnlPdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gbmV3IEJsb2IoW2FueU91dCBhcyBVaW50OEFycmF5PEFycmF5QnVmZmVyPl0sIHsgdHlwZTogaW1hZ2UudHlwZSB9KTtcbiAgICBpZiAoYW55T3V0Py5ibG9iIGluc3RhbmNlb2YgQmxvYikgcmV0dXJuIGFueU91dC5ibG9iO1xuICAgIGlmIChhbnlPdXQ/LmZpbGUgaW5zdGFuY2VvZiBCbG9iKSByZXR1cm4gYW55T3V0LmZpbGU7XG4gICAgaWYgKGFueU91dD8uc2lnbmVkIGluc3RhbmNlb2YgQmxvYikgcmV0dXJuIGFueU91dC5zaWduZWQ7XG4gICAgaWYgKGFueU91dD8uZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSByZXR1cm4gbmV3IEJsb2IoW2FueU91dC5kYXRhXSwgeyB0eXBlOiBpbWFnZS50eXBlIH0pO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gdHJ5U2lnbih0YXJnZXQ6IGFueSk6IFByb21pc2U8QmxvYiB8IG51bGw+IHtcbiAgICBpZiAoIXRhcmdldCkgcmV0dXJuIG51bGw7XG4gICAgLy8gc2lnbihmaWxlLCB7IHNpZ25lciwgbWFuaWZlc3QgfSlcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQuc2lnbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBvdXQxOiBhbnkgPSBhd2FpdCB0YXJnZXQuc2lnbihpbWFnZSwgeyBzaWduZXIsIG1hbmlmZXN0OiBtYW5pZmVzdEZvclNpZ24gfSk7XG4gICAgICAgIGNvbnN0IGIxID0gY29lcmNlVG9CbG9iKG91dDEpO1xuICAgICAgICBpZiAoYjEpIHJldHVybiBiMTtcbiAgICAgICAgaWYgKG91dDE/LmFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgY29uc3QgYnVmID0gYXdhaXQgb3V0MS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICAgIHJldHVybiBuZXcgQmxvYihbYnVmXSwgeyB0eXBlOiBpbWFnZS50eXBlIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBhdHRlbXB0RXJyb3JzLnB1c2goZT8ubWVzc2FnZSB8fCBTdHJpbmcoZSkpO1xuICAgIH1cbiAgICAvLyBzaWduKHsgZmlsZSwgc2lnbmVyLCBtYW5pZmVzdCB9KVxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIHRhcmdldC5zaWduID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnN0IG91dDI6IGFueSA9IGF3YWl0IHRhcmdldC5zaWduKHsgZmlsZTogaW1hZ2UsIHNpZ25lciwgbWFuaWZlc3Q6IG1hbmlmZXN0Rm9yU2lnbiB9KTtcbiAgICAgICAgY29uc3QgYjIgPSBjb2VyY2VUb0Jsb2Iob3V0Mik7XG4gICAgICAgIGlmIChiMikgcmV0dXJuIGIyO1xuICAgICAgICBpZiAob3V0Mj8uYXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICBjb25zdCBidWYgPSBhd2FpdCBvdXQyLmFycmF5QnVmZmVyKCk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtidWZdLCB7IHR5cGU6IGltYWdlLnR5cGUgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIGF0dGVtcHRFcnJvcnMucHVzaChlPy5tZXNzYWdlIHx8IFN0cmluZyhlKSk7XG4gICAgfVxuICAgIC8vIHNpZ24obWFuaWZlc3QsIGZpbGUsIHNpZ25lcilcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQuc2lnbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBvdXQzOiBhbnkgPSBhd2FpdCB0YXJnZXQuc2lnbihtYW5pZmVzdEZvclNpZ24sIGltYWdlLCBzaWduZXIpO1xuICAgICAgICBjb25zdCBiMyA9IGNvZXJjZVRvQmxvYihvdXQzKTtcbiAgICAgICAgaWYgKGIzKSByZXR1cm4gYjM7XG4gICAgICAgIGlmIChvdXQzPy5hcnJheUJ1ZmZlcikge1xuICAgICAgICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IG91dDMuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoW2J1Zl0sIHsgdHlwZTogaW1hZ2UudHlwZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgYXR0ZW1wdEVycm9ycy5wdXNoKGU/Lm1lc3NhZ2UgfHwgU3RyaW5nKGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBUcnkgc2lnbiBvbiBjcmVhdGVkIGluc3RhbmNlIGFuZCBvbiB0aGUgbW9kdWxlIGl0c2VsZlxuICBjb25zb2xlLmxvZygnW0MyUEFdIEF0dGVtcHRpbmcgdG8gc2lnbiB1c2luZyBjMnBhIGluc3RhbmNlLi4uJyk7XG4gIGxldCBibG9iID0gYXdhaXQgdHJ5U2lnbihjMnBhKTtcbiAgaWYgKCFibG9iKSB7XG4gICAgY29uc29sZS5sb2coJ1tDMlBBXSBjMnBhIGluc3RhbmNlIHNpZ24gZmFpbGVkLCB0cnlpbmcgYzJwYU1vZC4uLicpO1xuICAgIGJsb2IgPSBhd2FpdCB0cnlTaWduKGMycGFNb2QpO1xuICB9XG5cbiAgLy8gVHJ5IHdyaXRlciBBUElzXG4gIGFzeW5jIGZ1bmN0aW9uIHRyeVdyaXRlcihmYWN0b3J5T3duZXI6IGFueSk6IFByb21pc2U8QmxvYiB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKGZhY3RvcnlPd25lcj8uV3JpdGVyPy5jcmVhdGUpIHtcbiAgICAgICAgY29uc3Qgd3JpdGVyID0gYXdhaXQgZmFjdG9yeU93bmVyLldyaXRlci5jcmVhdGUoeyBzaWduZXIgfSk7XG4gICAgICAgIGlmICh3cml0ZXI/LnNpZ24pIHtcbiAgICAgICAgICBjb25zdCBvdXQgPSBhd2FpdCB3cml0ZXIuc2lnbihpbWFnZSwgbWFuaWZlc3RGb3JTaWduKTtcbiAgICAgICAgICBjb25zdCBiID0gY29lcmNlVG9CbG9iKG91dCk7XG4gICAgICAgICAgaWYgKGIpIHJldHVybiBiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBhdHRlbXB0RXJyb3JzLnB1c2goZT8ubWVzc2FnZSB8fCBTdHJpbmcoZSkpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBmYWN0b3J5T3duZXI/LmNyZWF0ZVdyaXRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCB3cml0ZXIgPSBhd2FpdCBmYWN0b3J5T3duZXIuY3JlYXRlV3JpdGVyKHsgc2lnbmVyIH0pO1xuICAgICAgICBpZiAod3JpdGVyPy5zaWduKSB7XG4gICAgICAgICAgY29uc3Qgb3V0ID0gYXdhaXQgd3JpdGVyLnNpZ24oaW1hZ2UsIG1hbmlmZXN0Rm9yU2lnbik7XG4gICAgICAgICAgY29uc3QgYiA9IGNvZXJjZVRvQmxvYihvdXQpO1xuICAgICAgICAgIGlmIChiKSByZXR1cm4gYjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgYXR0ZW1wdEVycm9ycy5wdXNoKGU/Lm1lc3NhZ2UgfHwgU3RyaW5nKGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIWJsb2IpIHtcbiAgICBjb25zb2xlLmxvZygnW0MyUEFdIFNpZ24gbWV0aG9kcyBmYWlsZWQsIHRyeWluZyB3cml0ZXIgQVBJIG9uIGMycGFNb2QuLi4nKTtcbiAgICBibG9iID0gYXdhaXQgdHJ5V3JpdGVyKGMycGFNb2QpO1xuICB9XG4gIGlmICghYmxvYikge1xuICAgIGNvbnNvbGUubG9nKCdbQzJQQV0gYzJwYU1vZCB3cml0ZXIgZmFpbGVkLCB0cnlpbmcgYzJwYSB3cml0ZXIuLi4nKTtcbiAgICBibG9iID0gYXdhaXQgdHJ5V3JpdGVyKGMycGEpO1xuICB9XG4gIGlmIChibG9iKSB7XG4gICAgY29uc29sZS5sb2coJ1tDMlBBXSBTdWNjZXNzZnVsbHkgc2lnbmVkIGltYWdlLCByZXR1cm5pbmcgYmxvYicpO1xuICAgIHJldHVybiBibG9iO1xuICB9XG5cbiAgLy8gRmFsbGJhY2s6IHJldHVybiBvcmlnaW5hbCBpbWFnZSBibG9iIGlmIG5vIG91dHB1dCByZWNvZ25pemVkXG4gIGNvbnNvbGUud2FybignYzJwYSBzaWduIHJldHVybmVkIGFuIHVuZXhwZWN0ZWQgcmVzdWx0IHNoYXBlLiBBdHRlbXB0czonLCBhdHRlbXB0RXJyb3JzKTtcbiAgY29uc3QgZXJyb3JEZXRhaWxzID0gYXR0ZW1wdEVycm9ycy5sZW5ndGggPiAwXG4gICAgPyBgXFxuXFxuQXR0ZW1wdCBlcnJvcnM6XFxuJHthdHRlbXB0RXJyb3JzLm1hcCgoZSwgaSkgPT4gYCR7aSArIDF9LiAke2V9YCkuam9pbignXFxuJyl9YFxuICAgIDogJyc7XG4gIHRocm93IG5ldyBFcnJvcihgQzJQQSBzaWduIGRpZCBub3QgcmV0dXJuIGEgQmxvYiR7ZXJyb3JEZXRhaWxzfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QXNzZXQoZmlsZTogRmlsZSB8IEJsb2IpOiBQcm9taXNlPHVua25vd24+IHtcbiAgY29uc3QgYzJwYU1vZCA9IGF3YWl0IGxvYWRDMnBhKCk7XG4gIGxldCBjMnBhOiBhbnkgPSBjMnBhTW9kO1xuICBpZiAodHlwZW9mIGMycGFNb2QuQzJwYT8uY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGMycGEgPSBhd2FpdCBjMnBhTW9kLkMycGEuY3JlYXRlKHsgd2FzbVNyYzogcHVibGljQzJwYUFzc2V0KCd0b29sa2l0X2JnLndhc20nKSwgd29ya2VyU3JjOiBwdWJsaWNDMnBhQXNzZXQoJ2MycGEud29ya2VyLmpzJykgfSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyB0cnkgdXNpbmcgbW9kdWxlIGRpcmVjdGx5XG4gICAgICBjMnBhID0gYzJwYU1vZDtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZW9mIGMycGEudmVyaWZ5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGF3YWl0IGMycGEudmVyaWZ5KGZpbGUpO1xuICB9XG4gIGlmICh0eXBlb2YgYzJwYS5yZWFkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGF3YWl0IGMycGEucmVhZCh7IGZpbGUgfSk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCdDMlBBIHZlcmlmeS9yZWFkIEFQSSBub3QgZm91bmQnKTtcbn1cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbiJdLCJuYW1lcyI6WyJsb2FkQzJwYSIsIm1vZCIsImRlZmF1bHQiLCJwdWJsaWNDMnBhQXNzZXQiLCJmaWxlIiwic2lnbkltYWdlV2l0aE1hbmlmZXN0Iiwib3B0cyIsImMycGFNb2QiLCJpbWFnZSIsIm1hbmlmZXN0SnNvbiIsImNlcnRpZmljYXRlUGVtIiwicHJpdmF0ZUtleVBlbSIsInRzYVVybCIsIndhc21DYW5kaWRhdGVzIiwid29ya2VyQ2FuZGlkYXRlcyIsImMycGEiLCJsYXN0RXJyIiwid2FzbSIsIndvcmtlciIsImNvbnNvbGUiLCJsb2ciLCJDMnBhIiwiY3JlYXRlIiwid2FzbVNyYyIsIndvcmtlclNyYyIsImUiLCJ3YXJuIiwiRXJyb3IiLCJzaWduZXJPcHRzIiwicHJpdmF0ZUtleSIsImNlcnRDaGFpbiIsImNlcnRpZmljYXRlQ2hhaW4iLCJ0aW1lQXV0aG9yaXR5VXJsIiwidGltZVN0YW1wVXJsIiwidGltZXN0YW1wVXJsIiwidGFVcmwiLCJzaWduZXIiLCJTaWduZXIiLCJjcmVhdGVTaWduZXIiLCJtYW5pZmVzdEZvclNpZ24iLCJvcmlnaW4iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInByb3h5VXJsIiwidGEiLCJ0YV91cmwiLCJuZWVkc1Byb3h5IiwidGVzdCIsImF0dGVtcHRFcnJvcnMiLCJjb2VyY2VUb0Jsb2IiLCJhbnlPdXQiLCJCbG9iIiwiQXJyYXlCdWZmZXIiLCJ0eXBlIiwiYnVmZmVyIiwiVWludDhBcnJheSIsImJsb2IiLCJzaWduZWQiLCJkYXRhIiwidHJ5U2lnbiIsInRhcmdldCIsInNpZ24iLCJvdXQxIiwibWFuaWZlc3QiLCJiMSIsImFycmF5QnVmZmVyIiwiYnVmIiwicHVzaCIsIm1lc3NhZ2UiLCJTdHJpbmciLCJvdXQyIiwiYjIiLCJvdXQzIiwiYjMiLCJ0cnlXcml0ZXIiLCJmYWN0b3J5T3duZXIiLCJXcml0ZXIiLCJ3cml0ZXIiLCJvdXQiLCJiIiwiY3JlYXRlV3JpdGVyIiwiZXJyb3JEZXRhaWxzIiwibGVuZ3RoIiwibWFwIiwiaSIsImpvaW4iLCJ2ZXJpZnlBc3NldCIsInZlcmlmeSIsInJlYWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/c2paClient.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/csr.ts":
/*!********************!*\
  !*** ./lib/csr.ts ***!
  \********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateCsrPem: () => (/* binding */ generateCsrPem)\n/* harmony export */ });\n/* harmony import */ var asn1js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! asn1js */ \"(app-pages-browser)/./node_modules/asn1js/build/index.es.js\");\n/* harmony import */ var pkijs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pkijs */ \"(app-pages-browser)/./node_modules/pkijs/build/index.es.js\");\n\n\nfunction abToB64(buf) {\n    const bytes = new Uint8Array(buf);\n    let bin = '';\n    for(let i = 0; i < bytes.length; i++)bin += String.fromCharCode(bytes[i]);\n    return btoa(bin);\n}\nfunction wrapPem(label, b64) {\n    const wrapped = b64.replace(/(.{64})/g, '$1\\n');\n    return \"-----BEGIN \".concat(label, \"-----\\n\").concat(wrapped, \"\\n-----END \").concat(label, \"-----\");\n}\nasync function generateCsrPem(opts) {\n    const rdn = new pkijs__WEBPACK_IMPORTED_MODULE_1__.RelativeDistinguishedNames({\n        typesAndValues: []\n    });\n    const { subject } = opts;\n    // CountryName must be exactly two letters. If not, skip to avoid malformed CSRs.\n    if ((subject === null || subject === void 0 ? void 0 : subject.C) && /^[A-Za-z]{2}$/.test(subject.C)) {\n        rdn.typesAndValues.push(new pkijs__WEBPACK_IMPORTED_MODULE_1__.AttributeTypeAndValue({\n            type: '2.5.4.6',\n            value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString({\n                value: subject.C.toUpperCase()\n            })\n        }));\n    }\n    if (subject === null || subject === void 0 ? void 0 : subject.O) {\n        rdn.typesAndValues.push(new pkijs__WEBPACK_IMPORTED_MODULE_1__.AttributeTypeAndValue({\n            type: '2.5.4.10',\n            value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Utf8String({\n                value: subject.O\n            })\n        }));\n    }\n    if (subject === null || subject === void 0 ? void 0 : subject.CN) {\n        rdn.typesAndValues.push(new pkijs__WEBPACK_IMPORTED_MODULE_1__.AttributeTypeAndValue({\n            type: '2.5.4.3',\n            value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Utf8String({\n                value: subject.CN\n            })\n        }));\n    }\n    const csr = new pkijs__WEBPACK_IMPORTED_MODULE_1__.CertificationRequest({\n        subject: rdn\n    });\n    await csr.subjectPublicKeyInfo.importKey(opts.publicKey);\n    await csr.sign(opts.privateKey, 'SHA-256');\n    const b64 = abToB64(csr.toSchema(true).toBER(false));\n    return wrapPem('CERTIFICATE REQUEST', b64);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9jc3IudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBS2xCO0FBRWYsU0FBU0ksUUFBUUMsR0FBZ0I7SUFDL0IsTUFBTUMsUUFBUSxJQUFJQyxXQUFXRjtJQUM3QixJQUFJRyxNQUFNO0lBQ1YsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlILE1BQU1JLE1BQU0sRUFBRUQsSUFBS0QsT0FBT0csT0FBT0MsWUFBWSxDQUFDTixLQUFLLENBQUNHLEVBQUU7SUFDMUUsT0FBT0ksS0FBS0w7QUFDZDtBQUVBLFNBQVNNLFFBQVFDLEtBQWEsRUFBRUMsR0FBVztJQUN6QyxNQUFNQyxVQUFVRCxJQUFJRSxPQUFPLENBQUMsWUFBWTtJQUN4QyxPQUFPLGNBQTZCRCxPQUFmRixPQUFNLFdBQThCQSxPQUFyQkUsU0FBUSxlQUFtQixPQUFORixPQUFNO0FBQ2pFO0FBRU8sZUFBZUksZUFBZUMsSUFJcEM7SUFDQyxNQUFNQyxNQUFNLElBQUlsQiw2REFBMEJBLENBQUM7UUFBRW1CLGdCQUFnQixFQUFFO0lBQUM7SUFDaEUsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0g7SUFDcEIsaUZBQWlGO0lBQ2pGLElBQUlHLENBQUFBLG9CQUFBQSw4QkFBQUEsUUFBU0MsQ0FBQyxLQUFJLGdCQUFnQkMsSUFBSSxDQUFDRixRQUFRQyxDQUFDLEdBQUc7UUFDakRILElBQUlDLGNBQWMsQ0FBQ0ksSUFBSSxDQUNyQixJQUFJeEIsd0RBQXFCQSxDQUFDO1lBQUV5QixNQUFNO1lBQVdDLE9BQU8sSUFBSTVCLG1EQUFzQixDQUFDO2dCQUFFNEIsT0FBT0wsUUFBUUMsQ0FBQyxDQUFDTSxXQUFXO1lBQUc7UUFBRztJQUV2SDtJQUNBLElBQUlQLG9CQUFBQSw4QkFBQUEsUUFBU1EsQ0FBQyxFQUFFO1FBQ2RWLElBQUlDLGNBQWMsQ0FBQ0ksSUFBSSxDQUNyQixJQUFJeEIsd0RBQXFCQSxDQUFDO1lBQUV5QixNQUFNO1lBQVlDLE9BQU8sSUFBSTVCLDhDQUFpQixDQUFDO2dCQUFFNEIsT0FBT0wsUUFBUVEsQ0FBQztZQUFDO1FBQUc7SUFFckc7SUFDQSxJQUFJUixvQkFBQUEsOEJBQUFBLFFBQVNVLEVBQUUsRUFBRTtRQUNmWixJQUFJQyxjQUFjLENBQUNJLElBQUksQ0FDckIsSUFBSXhCLHdEQUFxQkEsQ0FBQztZQUFFeUIsTUFBTTtZQUFXQyxPQUFPLElBQUk1Qiw4Q0FBaUIsQ0FBQztnQkFBRTRCLE9BQU9MLFFBQVFVLEVBQUU7WUFBQztRQUFHO0lBRXJHO0lBRUEsTUFBTUMsTUFBTSxJQUFJakMsdURBQW9CQSxDQUFDO1FBQUVzQixTQUFTRjtJQUFJO0lBQ3BELE1BQU1hLElBQUlDLG9CQUFvQixDQUFDQyxTQUFTLENBQUNoQixLQUFLaUIsU0FBUztJQUN2RCxNQUFNSCxJQUFJSSxJQUFJLENBQUNsQixLQUFLbUIsVUFBVSxFQUFFO0lBQ2hDLE1BQU12QixNQUFNWixRQUFROEIsSUFBSU0sUUFBUSxDQUFDLE1BQU1DLEtBQUssQ0FBQztJQUM3QyxPQUFPM0IsUUFBUSx1QkFBdUJFO0FBQ3hDIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbGliL2Nzci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhc24xanMgZnJvbSAnYXNuMWpzJztcbmltcG9ydCB7XG4gIENlcnRpZmljYXRpb25SZXF1ZXN0LFxuICBBdHRyaWJ1dGVUeXBlQW5kVmFsdWUsXG4gIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzLFxufSBmcm9tICdwa2lqcyc7XG5cbmZ1bmN0aW9uIGFiVG9CNjQoYnVmOiBBcnJheUJ1ZmZlcikge1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gIGxldCBiaW4gPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykgYmluICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0pO1xuICByZXR1cm4gYnRvYShiaW4pO1xufVxuXG5mdW5jdGlvbiB3cmFwUGVtKGxhYmVsOiBzdHJpbmcsIGI2NDogc3RyaW5nKSB7XG4gIGNvbnN0IHdyYXBwZWQgPSBiNjQucmVwbGFjZSgvKC57NjR9KS9nLCAnJDFcXG4nKTtcbiAgcmV0dXJuIGAtLS0tLUJFR0lOICR7bGFiZWx9LS0tLS1cXG4ke3dyYXBwZWR9XFxuLS0tLS1FTkQgJHtsYWJlbH0tLS0tLWA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUNzclBlbShvcHRzOiB7XG4gIHN1YmplY3Q/OiB7IENOPzogc3RyaW5nOyBPPzogc3RyaW5nOyBDPzogc3RyaW5nIH07XG4gIHB1YmxpY0tleTogQ3J5cHRvS2V5O1xuICBwcml2YXRlS2V5OiBDcnlwdG9LZXk7XG59KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgcmRuID0gbmV3IFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzKHsgdHlwZXNBbmRWYWx1ZXM6IFtdIH0pO1xuICBjb25zdCB7IHN1YmplY3QgfSA9IG9wdHM7XG4gIC8vIENvdW50cnlOYW1lIG11c3QgYmUgZXhhY3RseSB0d28gbGV0dGVycy4gSWYgbm90LCBza2lwIHRvIGF2b2lkIG1hbGZvcm1lZCBDU1JzLlxuICBpZiAoc3ViamVjdD8uQyAmJiAvXltBLVphLXpdezJ9JC8udGVzdChzdWJqZWN0LkMpKSB7XG4gICAgcmRuLnR5cGVzQW5kVmFsdWVzLnB1c2goXG4gICAgICBuZXcgQXR0cmlidXRlVHlwZUFuZFZhbHVlKHsgdHlwZTogJzIuNS40LjYnLCB2YWx1ZTogbmV3IGFzbjFqcy5QcmludGFibGVTdHJpbmcoeyB2YWx1ZTogc3ViamVjdC5DLnRvVXBwZXJDYXNlKCkgfSkgfSlcbiAgICApO1xuICB9XG4gIGlmIChzdWJqZWN0Py5PKSB7XG4gICAgcmRuLnR5cGVzQW5kVmFsdWVzLnB1c2goXG4gICAgICBuZXcgQXR0cmlidXRlVHlwZUFuZFZhbHVlKHsgdHlwZTogJzIuNS40LjEwJywgdmFsdWU6IG5ldyBhc24xanMuVXRmOFN0cmluZyh7IHZhbHVlOiBzdWJqZWN0Lk8gfSkgfSlcbiAgICApO1xuICB9XG4gIGlmIChzdWJqZWN0Py5DTikge1xuICAgIHJkbi50eXBlc0FuZFZhbHVlcy5wdXNoKFxuICAgICAgbmV3IEF0dHJpYnV0ZVR5cGVBbmRWYWx1ZSh7IHR5cGU6ICcyLjUuNC4zJywgdmFsdWU6IG5ldyBhc24xanMuVXRmOFN0cmluZyh7IHZhbHVlOiBzdWJqZWN0LkNOIH0pIH0pXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGNzciA9IG5ldyBDZXJ0aWZpY2F0aW9uUmVxdWVzdCh7IHN1YmplY3Q6IHJkbiB9KTtcbiAgYXdhaXQgY3NyLnN1YmplY3RQdWJsaWNLZXlJbmZvLmltcG9ydEtleShvcHRzLnB1YmxpY0tleSk7XG4gIGF3YWl0IGNzci5zaWduKG9wdHMucHJpdmF0ZUtleSwgJ1NIQS0yNTYnKTtcbiAgY29uc3QgYjY0ID0gYWJUb0I2NChjc3IudG9TY2hlbWEodHJ1ZSkudG9CRVIoZmFsc2UpKTtcbiAgcmV0dXJuIHdyYXBQZW0oJ0NFUlRJRklDQVRFIFJFUVVFU1QnLCBiNjQpO1xufVxuIl0sIm5hbWVzIjpbImFzbjFqcyIsIkNlcnRpZmljYXRpb25SZXF1ZXN0IiwiQXR0cmlidXRlVHlwZUFuZFZhbHVlIiwiUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMiLCJhYlRvQjY0IiwiYnVmIiwiYnl0ZXMiLCJVaW50OEFycmF5IiwiYmluIiwiaSIsImxlbmd0aCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImJ0b2EiLCJ3cmFwUGVtIiwibGFiZWwiLCJiNjQiLCJ3cmFwcGVkIiwicmVwbGFjZSIsImdlbmVyYXRlQ3NyUGVtIiwib3B0cyIsInJkbiIsInR5cGVzQW5kVmFsdWVzIiwic3ViamVjdCIsIkMiLCJ0ZXN0IiwicHVzaCIsInR5cGUiLCJ2YWx1ZSIsIlByaW50YWJsZVN0cmluZyIsInRvVXBwZXJDYXNlIiwiTyIsIlV0ZjhTdHJpbmciLCJDTiIsImNzciIsInN1YmplY3RQdWJsaWNLZXlJbmZvIiwiaW1wb3J0S2V5IiwicHVibGljS2V5Iiwic2lnbiIsInByaXZhdGVLZXkiLCJ0b1NjaGVtYSIsInRvQkVSIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/csr.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/manifest.ts":
/*!*************************!*\
  !*** ./lib/manifest.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ManifestSchema: () => (/* binding */ ManifestSchema),\n/* harmony export */   Presets: () => (/* binding */ Presets)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(app-pages-browser)/./node_modules/zod/v3/types.js\");\n\n// Minimal, not full C2PA schema; just enough to validate fields in UI\nconst ManifestSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    format: zod__WEBPACK_IMPORTED_MODULE_0__.string().default('image/jpeg'),\n    assertions: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.any())).default([]),\n    ta_url: zod__WEBPACK_IMPORTED_MODULE_0__.string().url().optional()\n}).strict();\nconst Presets = {\n    minimal: {\n        title: 'Signed image',\n        format: 'image/jpeg',\n        assertions: [\n            {\n                label: 'c2pa.actions',\n                data: {\n                    actions: [\n                        {\n                            action: 'c2pa.created'\n                        }\n                    ]\n                }\n            }\n        ],\n        ta_url: 'https://api.staging.c2pa.ssl.com/v1/timestamp'\n    },\n    editorial: {\n        title: 'Editorial image',\n        format: 'image/jpeg',\n        assertions: [\n            {\n                label: 'c2pa.actions',\n                data: {\n                    actions: [\n                        {\n                            action: 'c2pa.edited'\n                        }\n                    ]\n                }\n            },\n            {\n                label: 'org.iptc.ext',\n                data: {\n                    creditLine: 'SSL.com Preview'\n                }\n            }\n        ],\n        ta_url: 'https://api.staging.c2pa.ssl.com/v1/timestamp'\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9tYW5pZmVzdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0I7QUFFeEIsc0VBQXNFO0FBQy9ELE1BQU1DLGlCQUFpQkQsdUNBQVEsQ0FBQztJQUNyQ0csT0FBT0gsdUNBQVEsR0FBR0ssUUFBUTtJQUMxQkMsUUFBUU4sdUNBQVEsR0FBR08sT0FBTyxDQUFDO0lBQzNCQyxZQUFZUixzQ0FBTyxDQUFDQSx1Q0FBUSxDQUFDQSxvQ0FBSyxLQUFLTyxPQUFPLENBQUMsRUFBRTtJQUNqREssUUFBUVosdUNBQVEsR0FBR2EsR0FBRyxHQUFHUixRQUFRO0FBQ25DLEdBQUdTLE1BQU0sR0FBRztBQUlMLE1BQU1DLFVBQW9DO0lBQy9DQyxTQUFTO1FBQ1BiLE9BQU87UUFDUEcsUUFBUTtRQUNSRSxZQUFZO1lBQ1Y7Z0JBQUVTLE9BQU87Z0JBQWdCQyxNQUFNO29CQUFFQyxTQUFTO3dCQUFDOzRCQUFFQyxRQUFRO3dCQUFlO3FCQUFFO2dCQUFDO1lBQUU7U0FDMUU7UUFDRFIsUUFBUTtJQUNWO0lBQ0FTLFdBQVc7UUFDVGxCLE9BQU87UUFDUEcsUUFBUTtRQUNSRSxZQUFZO1lBQ1Y7Z0JBQUVTLE9BQU87Z0JBQWdCQyxNQUFNO29CQUFFQyxTQUFTO3dCQUFDOzRCQUFFQyxRQUFRO3dCQUFjO3FCQUFFO2dCQUFDO1lBQUU7WUFDeEU7Z0JBQUVILE9BQU87Z0JBQWdCQyxNQUFNO29CQUFFSSxZQUFZO2dCQUFrQjtZQUFFO1NBQ2xFO1FBQ0RWLFFBQVE7SUFDVjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9saWIvbWFuaWZlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbi8vIE1pbmltYWwsIG5vdCBmdWxsIEMyUEEgc2NoZW1hOyBqdXN0IGVub3VnaCB0byB2YWxpZGF0ZSBmaWVsZHMgaW4gVUlcbmV4cG9ydCBjb25zdCBNYW5pZmVzdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdGl0bGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZm9ybWF0OiB6LnN0cmluZygpLmRlZmF1bHQoJ2ltYWdlL2pwZWcnKSxcbiAgYXNzZXJ0aW9uczogei5hcnJheSh6LnJlY29yZCh6LmFueSgpKSkuZGVmYXVsdChbXSksXG4gIHRhX3VybDogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLFxufSkuc3RyaWN0KCk7XG5cbmV4cG9ydCB0eXBlIE1hbmlmZXN0ID0gei5pbmZlcjx0eXBlb2YgTWFuaWZlc3RTY2hlbWE+O1xuXG5leHBvcnQgY29uc3QgUHJlc2V0czogUmVjb3JkPHN0cmluZywgTWFuaWZlc3Q+ID0ge1xuICBtaW5pbWFsOiB7XG4gICAgdGl0bGU6ICdTaWduZWQgaW1hZ2UnLFxuICAgIGZvcm1hdDogJ2ltYWdlL2pwZWcnLFxuICAgIGFzc2VydGlvbnM6IFtcbiAgICAgIHsgbGFiZWw6ICdjMnBhLmFjdGlvbnMnLCBkYXRhOiB7IGFjdGlvbnM6IFt7IGFjdGlvbjogJ2MycGEuY3JlYXRlZCcgfV0gfSB9LFxuICAgIF0sXG4gICAgdGFfdXJsOiAnaHR0cHM6Ly9hcGkuc3RhZ2luZy5jMnBhLnNzbC5jb20vdjEvdGltZXN0YW1wJyxcbiAgfSxcbiAgZWRpdG9yaWFsOiB7XG4gICAgdGl0bGU6ICdFZGl0b3JpYWwgaW1hZ2UnLFxuICAgIGZvcm1hdDogJ2ltYWdlL2pwZWcnLFxuICAgIGFzc2VydGlvbnM6IFtcbiAgICAgIHsgbGFiZWw6ICdjMnBhLmFjdGlvbnMnLCBkYXRhOiB7IGFjdGlvbnM6IFt7IGFjdGlvbjogJ2MycGEuZWRpdGVkJyB9XSB9IH0sXG4gICAgICB7IGxhYmVsOiAnb3JnLmlwdGMuZXh0JywgZGF0YTogeyBjcmVkaXRMaW5lOiAnU1NMLmNvbSBQcmV2aWV3JyB9IH0sXG4gICAgXSxcbiAgICB0YV91cmw6ICdodHRwczovL2FwaS5zdGFnaW5nLmMycGEuc3NsLmNvbS92MS90aW1lc3RhbXAnLFxuICB9LFxufTtcbiJdLCJuYW1lcyI6WyJ6IiwiTWFuaWZlc3RTY2hlbWEiLCJvYmplY3QiLCJ0aXRsZSIsInN0cmluZyIsIm9wdGlvbmFsIiwiZm9ybWF0IiwiZGVmYXVsdCIsImFzc2VydGlvbnMiLCJhcnJheSIsInJlY29yZCIsImFueSIsInRhX3VybCIsInVybCIsInN0cmljdCIsIlByZXNldHMiLCJtaW5pbWFsIiwibGFiZWwiLCJkYXRhIiwiYWN0aW9ucyIsImFjdGlvbiIsImVkaXRvcmlhbCIsImNyZWRpdExpbmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/manifest.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/_md.js":
/*!***********************************************!*\
  !*** ./node_modules/@noble/hashes/esm/_md.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Chi: () => (/* binding */ Chi),\n/* harmony export */   HashMD: () => (/* binding */ HashMD),\n/* harmony export */   Maj: () => (/* binding */ Maj),\n/* harmony export */   SHA224_IV: () => (/* binding */ SHA224_IV),\n/* harmony export */   SHA256_IV: () => (/* binding */ SHA256_IV),\n/* harmony export */   SHA384_IV: () => (/* binding */ SHA384_IV),\n/* harmony export */   SHA512_IV: () => (/* binding */ SHA512_IV),\n/* harmony export */   setBigUint64: () => (/* binding */ setBigUint64)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/utils.js\");\n/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\n\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n/** Choice: a ? b : c */\nfunction Chi(a, b, c) {\n    return (a & b) ^ (~a & c);\n}\n/** Majority function, true if any two inputs is true. */\nfunction Maj(a, b, c) {\n    return (a & b) ^ (a & c) ^ (b & c);\n}\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nclass HashMD extends _utils_js__WEBPACK_IMPORTED_MODULE_0__.Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createView)(this.buffer);\n    }\n    update(data) {\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.aexists)(this);\n        data = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.toBytes)(data);\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.abytes)(data);\n        const { view, buffer, blockLen } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createView)(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.aexists)(this);\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.aoutput)(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.clean)(this.buffer.subarray(pos));\n        // we have less than padOffset left in buffer, so we cannot put length in\n        // current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createView)(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.destroyed = destroyed;\n        to.finished = finished;\n        to.length = length;\n        to.pos = pos;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n}\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nconst SHA256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nconst SHA224_IV = /* @__PURE__ */ Uint32Array.from([\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nconst SHA384_IV = /* @__PURE__ */ Uint32Array.from([\n    0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nconst SHA512_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n//# sourceMappingURL=_md.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9fbWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDd0Y7QUFDeEY7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxxQkFBcUIsMkNBQUk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBVTtBQUM5QjtBQUNBO0FBQ0EsUUFBUSxrREFBTztBQUNmLGVBQWUsa0RBQU87QUFDdEIsUUFBUSxpREFBTTtBQUNkLGdCQUFnQix5QkFBeUI7QUFDekM7QUFDQSwwQkFBMEIsVUFBVTtBQUNwQztBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMscURBQVU7QUFDM0MsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0RBQU87QUFDZixRQUFRLGtEQUFPO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsK0JBQStCO0FBQy9DLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0EsUUFBUSxnREFBSztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGNBQWM7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHFEQUFVO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0JBQW9CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscURBQXFEO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvQG5vYmxlL2hhc2hlcy9lc20vX21kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZXJuYWwgTWVya2xlLURhbWdhcmQgaGFzaCB1dGlscy5cbiAqIEBtb2R1bGVcbiAqL1xuaW1wb3J0IHsgSGFzaCwgYWJ5dGVzLCBhZXhpc3RzLCBhb3V0cHV0LCBjbGVhbiwgY3JlYXRlVmlldywgdG9CeXRlcyB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG4vKiogUG9seWZpbGwgZm9yIFNhZmFyaSAxNC4gaHR0cHM6Ly9jYW5pdXNlLmNvbS9tZG4tamF2YXNjcmlwdF9idWlsdGluc19kYXRhdmlld19zZXRiaWd1aW50NjQgKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRCaWdVaW50NjQodmlldywgYnl0ZU9mZnNldCwgdmFsdWUsIGlzTEUpIHtcbiAgICBpZiAodHlwZW9mIHZpZXcuc2V0QmlnVWludDY0ID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gdmlldy5zZXRCaWdVaW50NjQoYnl0ZU9mZnNldCwgdmFsdWUsIGlzTEUpO1xuICAgIGNvbnN0IF8zMm4gPSBCaWdJbnQoMzIpO1xuICAgIGNvbnN0IF91MzJfbWF4ID0gQmlnSW50KDB4ZmZmZmZmZmYpO1xuICAgIGNvbnN0IHdoID0gTnVtYmVyKCh2YWx1ZSA+PiBfMzJuKSAmIF91MzJfbWF4KTtcbiAgICBjb25zdCB3bCA9IE51bWJlcih2YWx1ZSAmIF91MzJfbWF4KTtcbiAgICBjb25zdCBoID0gaXNMRSA/IDQgOiAwO1xuICAgIGNvbnN0IGwgPSBpc0xFID8gMCA6IDQ7XG4gICAgdmlldy5zZXRVaW50MzIoYnl0ZU9mZnNldCArIGgsIHdoLCBpc0xFKTtcbiAgICB2aWV3LnNldFVpbnQzMihieXRlT2Zmc2V0ICsgbCwgd2wsIGlzTEUpO1xufVxuLyoqIENob2ljZTogYSA/IGIgOiBjICovXG5leHBvcnQgZnVuY3Rpb24gQ2hpKGEsIGIsIGMpIHtcbiAgICByZXR1cm4gKGEgJiBiKSBeICh+YSAmIGMpO1xufVxuLyoqIE1ham9yaXR5IGZ1bmN0aW9uLCB0cnVlIGlmIGFueSB0d28gaW5wdXRzIGlzIHRydWUuICovXG5leHBvcnQgZnVuY3Rpb24gTWFqKGEsIGIsIGMpIHtcbiAgICByZXR1cm4gKGEgJiBiKSBeIChhICYgYykgXiAoYiAmIGMpO1xufVxuLyoqXG4gKiBNZXJrbGUtRGFtZ2FyZCBoYXNoIGNvbnN0cnVjdGlvbiBiYXNlIGNsYXNzLlxuICogQ291bGQgYmUgdXNlZCB0byBjcmVhdGUgTUQ1LCBSSVBFTUQsIFNIQTEsIFNIQTIuXG4gKi9cbmV4cG9ydCBjbGFzcyBIYXNoTUQgZXh0ZW5kcyBIYXNoIHtcbiAgICBjb25zdHJ1Y3RvcihibG9ja0xlbiwgb3V0cHV0TGVuLCBwYWRPZmZzZXQsIGlzTEUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ibG9ja0xlbiA9IGJsb2NrTGVuO1xuICAgICAgICB0aGlzLm91dHB1dExlbiA9IG91dHB1dExlbjtcbiAgICAgICAgdGhpcy5wYWRPZmZzZXQgPSBwYWRPZmZzZXQ7XG4gICAgICAgIHRoaXMuaXNMRSA9IGlzTEU7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYmxvY2tMZW4pO1xuICAgICAgICB0aGlzLnZpZXcgPSBjcmVhdGVWaWV3KHRoaXMuYnVmZmVyKTtcbiAgICB9XG4gICAgdXBkYXRlKGRhdGEpIHtcbiAgICAgICAgYWV4aXN0cyh0aGlzKTtcbiAgICAgICAgZGF0YSA9IHRvQnl0ZXMoZGF0YSk7XG4gICAgICAgIGFieXRlcyhkYXRhKTtcbiAgICAgICAgY29uc3QgeyB2aWV3LCBidWZmZXIsIGJsb2NrTGVuIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBsZW4gPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMDsgcG9zIDwgbGVuOykge1xuICAgICAgICAgICAgY29uc3QgdGFrZSA9IE1hdGgubWluKGJsb2NrTGVuIC0gdGhpcy5wb3MsIGxlbiAtIHBvcyk7XG4gICAgICAgICAgICAvLyBGYXN0IHBhdGg6IHdlIGhhdmUgYXQgbGVhc3Qgb25lIGJsb2NrIGluIGlucHV0LCBjYXN0IGl0IHRvIHZpZXcgYW5kIHByb2Nlc3NcbiAgICAgICAgICAgIGlmICh0YWtlID09PSBibG9ja0xlbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gY3JlYXRlVmlldyhkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKDsgYmxvY2tMZW4gPD0gbGVuIC0gcG9zOyBwb3MgKz0gYmxvY2tMZW4pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkYXRhVmlldywgcG9zKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlci5zZXQoZGF0YS5zdWJhcnJheShwb3MsIHBvcyArIHRha2UpLCB0aGlzLnBvcyk7XG4gICAgICAgICAgICB0aGlzLnBvcyArPSB0YWtlO1xuICAgICAgICAgICAgcG9zICs9IHRha2U7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3MgPT09IGJsb2NrTGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKHZpZXcsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlbmd0aCArPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgdGhpcy5yb3VuZENsZWFuKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkaWdlc3RJbnRvKG91dCkge1xuICAgICAgICBhZXhpc3RzKHRoaXMpO1xuICAgICAgICBhb3V0cHV0KG91dCwgdGhpcyk7XG4gICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAvLyBQYWRkaW5nXG4gICAgICAgIC8vIFdlIGNhbiBhdm9pZCBhbGxvY2F0aW9uIG9mIGJ1ZmZlciBmb3IgcGFkZGluZyBjb21wbGV0ZWx5IGlmIGl0XG4gICAgICAgIC8vIHdhcyBwcmV2aW91c2x5IG5vdCBhbGxvY2F0ZWQgaGVyZS4gQnV0IGl0IHdvbid0IGNoYW5nZSBwZXJmb3JtYW5jZS5cbiAgICAgICAgY29uc3QgeyBidWZmZXIsIHZpZXcsIGJsb2NrTGVuLCBpc0xFIH0gPSB0aGlzO1xuICAgICAgICBsZXQgeyBwb3MgfSA9IHRoaXM7XG4gICAgICAgIC8vIGFwcGVuZCB0aGUgYml0ICcxJyB0byB0aGUgbWVzc2FnZVxuICAgICAgICBidWZmZXJbcG9zKytdID0gMGIxMDAwMDAwMDtcbiAgICAgICAgY2xlYW4odGhpcy5idWZmZXIuc3ViYXJyYXkocG9zKSk7XG4gICAgICAgIC8vIHdlIGhhdmUgbGVzcyB0aGFuIHBhZE9mZnNldCBsZWZ0IGluIGJ1ZmZlciwgc28gd2UgY2Fubm90IHB1dCBsZW5ndGggaW5cbiAgICAgICAgLy8gY3VycmVudCBibG9jaywgbmVlZCBwcm9jZXNzIGl0IGFuZCBwYWQgYWdhaW5cbiAgICAgICAgaWYgKHRoaXMucGFkT2Zmc2V0ID4gYmxvY2tMZW4gLSBwb3MpIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzcyh2aWV3LCAwKTtcbiAgICAgICAgICAgIHBvcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFkIHVudGlsIGZ1bGwgYmxvY2sgYnl0ZSB3aXRoIHplcm9zXG4gICAgICAgIGZvciAobGV0IGkgPSBwb3M7IGkgPCBibG9ja0xlbjsgaSsrKVxuICAgICAgICAgICAgYnVmZmVyW2ldID0gMDtcbiAgICAgICAgLy8gTm90ZTogc2hhNTEyIHJlcXVpcmVzIGxlbmd0aCB0byBiZSAxMjhiaXQgaW50ZWdlciwgYnV0IGxlbmd0aCBpbiBKUyB3aWxsIG92ZXJmbG93IGJlZm9yZSB0aGF0XG4gICAgICAgIC8vIFlvdSBuZWVkIHRvIHdyaXRlIGFyb3VuZCAyIGV4YWJ5dGVzICh1NjRfbWF4IC8gOCAvICgxMDI0Kio2KSkgZm9yIHRoaXMgdG8gaGFwcGVuLlxuICAgICAgICAvLyBTbyB3ZSBqdXN0IHdyaXRlIGxvd2VzdCA2NCBiaXRzIG9mIHRoYXQgdmFsdWUuXG4gICAgICAgIHNldEJpZ1VpbnQ2NCh2aWV3LCBibG9ja0xlbiAtIDgsIEJpZ0ludCh0aGlzLmxlbmd0aCAqIDgpLCBpc0xFKTtcbiAgICAgICAgdGhpcy5wcm9jZXNzKHZpZXcsIDApO1xuICAgICAgICBjb25zdCBvdmlldyA9IGNyZWF0ZVZpZXcob3V0KTtcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy5vdXRwdXRMZW47XG4gICAgICAgIC8vIE5PVEU6IHdlIGRvIGRpdmlzaW9uIGJ5IDQgbGF0ZXIsIHdoaWNoIHNob3VsZCBiZSBmdXNlZCBpbiBzaW5nbGUgb3Agd2l0aCBtb2R1bG8gYnkgSklUXG4gICAgICAgIGlmIChsZW4gJSA0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdfc2hhMjogb3V0cHV0TGVuIHNob3VsZCBiZSBhbGlnbmVkIHRvIDMyYml0Jyk7XG4gICAgICAgIGNvbnN0IG91dExlbiA9IGxlbiAvIDQ7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXQoKTtcbiAgICAgICAgaWYgKG91dExlbiA+IHN0YXRlLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignX3NoYTI6IG91dHB1dExlbiBiaWdnZXIgdGhhbiBzdGF0ZScpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dExlbjsgaSsrKVxuICAgICAgICAgICAgb3ZpZXcuc2V0VWludDMyKDQgKiBpLCBzdGF0ZVtpXSwgaXNMRSk7XG4gICAgfVxuICAgIGRpZ2VzdCgpIHtcbiAgICAgICAgY29uc3QgeyBidWZmZXIsIG91dHB1dExlbiB9ID0gdGhpcztcbiAgICAgICAgdGhpcy5kaWdlc3RJbnRvKGJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IHJlcyA9IGJ1ZmZlci5zbGljZSgwLCBvdXRwdXRMZW4pO1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgX2Nsb25lSW50byh0bykge1xuICAgICAgICB0byB8fCAodG8gPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpKTtcbiAgICAgICAgdG8uc2V0KC4uLnRoaXMuZ2V0KCkpO1xuICAgICAgICBjb25zdCB7IGJsb2NrTGVuLCBidWZmZXIsIGxlbmd0aCwgZmluaXNoZWQsIGRlc3Ryb3llZCwgcG9zIH0gPSB0aGlzO1xuICAgICAgICB0by5kZXN0cm95ZWQgPSBkZXN0cm95ZWQ7XG4gICAgICAgIHRvLmZpbmlzaGVkID0gZmluaXNoZWQ7XG4gICAgICAgIHRvLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdG8ucG9zID0gcG9zO1xuICAgICAgICBpZiAobGVuZ3RoICUgYmxvY2tMZW4pXG4gICAgICAgICAgICB0by5idWZmZXIuc2V0KGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiB0bztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbG9uZUludG8oKTtcbiAgICB9XG59XG4vKipcbiAqIEluaXRpYWwgU0hBLTIgc3RhdGU6IGZyYWN0aW9uYWwgcGFydHMgb2Ygc3F1YXJlIHJvb3RzIG9mIGZpcnN0IDE2IHByaW1lcyAyLi41My5cbiAqIENoZWNrIG91dCBgdGVzdC9taXNjL3NoYTItZ2VuLWl2LmpzYCBmb3IgcmVjb21wdXRhdGlvbiBndWlkZS5cbiAqL1xuLyoqIEluaXRpYWwgU0hBMjU2IHN0YXRlLiBCaXRzIDAuLjMyIG9mIGZyYWMgcGFydCBvZiBzcXJ0IG9mIHByaW1lcyAyLi4xOSAqL1xuZXhwb3J0IGNvbnN0IFNIQTI1Nl9JViA9IC8qIEBfX1BVUkVfXyAqLyBVaW50MzJBcnJheS5mcm9tKFtcbiAgICAweDZhMDllNjY3LCAweGJiNjdhZTg1LCAweDNjNmVmMzcyLCAweGE1NGZmNTNhLCAweDUxMGU1MjdmLCAweDliMDU2ODhjLCAweDFmODNkOWFiLCAweDViZTBjZDE5LFxuXSk7XG4vKiogSW5pdGlhbCBTSEEyMjQgc3RhdGUuIEJpdHMgMzIuLjY0IG9mIGZyYWMgcGFydCBvZiBzcXJ0IG9mIHByaW1lcyAyMy4uNTMgKi9cbmV4cG9ydCBjb25zdCBTSEEyMjRfSVYgPSAvKiBAX19QVVJFX18gKi8gVWludDMyQXJyYXkuZnJvbShbXG4gICAgMHhjMTA1OWVkOCwgMHgzNjdjZDUwNywgMHgzMDcwZGQxNywgMHhmNzBlNTkzOSwgMHhmZmMwMGIzMSwgMHg2ODU4MTUxMSwgMHg2NGY5OGZhNywgMHhiZWZhNGZhNCxcbl0pO1xuLyoqIEluaXRpYWwgU0hBMzg0IHN0YXRlLiBCaXRzIDAuLjY0IG9mIGZyYWMgcGFydCBvZiBzcXJ0IG9mIHByaW1lcyAyMy4uNTMgKi9cbmV4cG9ydCBjb25zdCBTSEEzODRfSVYgPSAvKiBAX19QVVJFX18gKi8gVWludDMyQXJyYXkuZnJvbShbXG4gICAgMHhjYmJiOWQ1ZCwgMHhjMTA1OWVkOCwgMHg2MjlhMjkyYSwgMHgzNjdjZDUwNywgMHg5MTU5MDE1YSwgMHgzMDcwZGQxNywgMHgxNTJmZWNkOCwgMHhmNzBlNTkzOSxcbiAgICAweDY3MzMyNjY3LCAweGZmYzAwYjMxLCAweDhlYjQ0YTg3LCAweDY4NTgxNTExLCAweGRiMGMyZTBkLCAweDY0Zjk4ZmE3LCAweDQ3YjU0ODFkLCAweGJlZmE0ZmE0LFxuXSk7XG4vKiogSW5pdGlhbCBTSEE1MTIgc3RhdGUuIEJpdHMgMC4uNjQgb2YgZnJhYyBwYXJ0IG9mIHNxcnQgb2YgcHJpbWVzIDIuLjE5ICovXG5leHBvcnQgY29uc3QgU0hBNTEyX0lWID0gLyogQF9fUFVSRV9fICovIFVpbnQzMkFycmF5LmZyb20oW1xuICAgIDB4NmEwOWU2NjcsIDB4ZjNiY2M5MDgsIDB4YmI2N2FlODUsIDB4ODRjYWE3M2IsIDB4M2M2ZWYzNzIsIDB4ZmU5NGY4MmIsIDB4YTU0ZmY1M2EsIDB4NWYxZDM2ZjEsXG4gICAgMHg1MTBlNTI3ZiwgMHhhZGU2ODJkMSwgMHg5YjA1Njg4YywgMHgyYjNlNmMxZiwgMHgxZjgzZDlhYiwgMHhmYjQxYmQ2YiwgMHg1YmUwY2QxOSwgMHgxMzdlMjE3OSxcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9X21kLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/_md.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/_u64.js":
/*!************************************************!*\
  !*** ./node_modules/@noble/hashes/esm/_u64.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   add: () => (/* binding */ add),\n/* harmony export */   add3H: () => (/* binding */ add3H),\n/* harmony export */   add3L: () => (/* binding */ add3L),\n/* harmony export */   add4H: () => (/* binding */ add4H),\n/* harmony export */   add4L: () => (/* binding */ add4L),\n/* harmony export */   add5H: () => (/* binding */ add5H),\n/* harmony export */   add5L: () => (/* binding */ add5L),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   fromBig: () => (/* binding */ fromBig),\n/* harmony export */   rotlBH: () => (/* binding */ rotlBH),\n/* harmony export */   rotlBL: () => (/* binding */ rotlBL),\n/* harmony export */   rotlSH: () => (/* binding */ rotlSH),\n/* harmony export */   rotlSL: () => (/* binding */ rotlSL),\n/* harmony export */   rotr32H: () => (/* binding */ rotr32H),\n/* harmony export */   rotr32L: () => (/* binding */ rotr32L),\n/* harmony export */   rotrBH: () => (/* binding */ rotrBH),\n/* harmony export */   rotrBL: () => (/* binding */ rotrBL),\n/* harmony export */   rotrSH: () => (/* binding */ rotrSH),\n/* harmony export */   rotrSL: () => (/* binding */ rotrSL),\n/* harmony export */   shrSH: () => (/* binding */ shrSH),\n/* harmony export */   shrSL: () => (/* binding */ shrSL),\n/* harmony export */   split: () => (/* binding */ split),\n/* harmony export */   toBig: () => (/* binding */ toBig)\n/* harmony export */ });\n/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    const len = lst.length;\n    let Ah = new Uint32Array(len);\n    let Al = new Uint32Array(len);\n    for (let i = 0; i < len; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nconst rotr32L = (h, _l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\n\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (u64);\n//# sourceMappingURL=_u64.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9fdTY0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0IsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNnTDtBQUNoTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxHQUFHLEVBQUM7QUFDbkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvQG5vYmxlL2hhc2hlcy9lc20vX3U2NC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEludGVybmFsIGhlbHBlcnMgZm9yIHU2NC4gQmlnVWludDY0QXJyYXkgaXMgdG9vIHNsb3cgYXMgcGVyIDIwMjUsIHNvIHdlIGltcGxlbWVudCBpdCB1c2luZyBVaW50MzJBcnJheS5cbiAqIEB0b2RvIHJlLWNoZWNrIGh0dHBzOi8vaXNzdWVzLmNocm9taXVtLm9yZy9pc3N1ZXMvNDIyMTI1ODhcbiAqIEBtb2R1bGVcbiAqL1xuY29uc3QgVTMyX01BU0s2NCA9IC8qIEBfX1BVUkVfXyAqLyBCaWdJbnQoMiAqKiAzMiAtIDEpO1xuY29uc3QgXzMybiA9IC8qIEBfX1BVUkVfXyAqLyBCaWdJbnQoMzIpO1xuZnVuY3Rpb24gZnJvbUJpZyhuLCBsZSA9IGZhbHNlKSB7XG4gICAgaWYgKGxlKVxuICAgICAgICByZXR1cm4geyBoOiBOdW1iZXIobiAmIFUzMl9NQVNLNjQpLCBsOiBOdW1iZXIoKG4gPj4gXzMybikgJiBVMzJfTUFTSzY0KSB9O1xuICAgIHJldHVybiB7IGg6IE51bWJlcigobiA+PiBfMzJuKSAmIFUzMl9NQVNLNjQpIHwgMCwgbDogTnVtYmVyKG4gJiBVMzJfTUFTSzY0KSB8IDAgfTtcbn1cbmZ1bmN0aW9uIHNwbGl0KGxzdCwgbGUgPSBmYWxzZSkge1xuICAgIGNvbnN0IGxlbiA9IGxzdC5sZW5ndGg7XG4gICAgbGV0IEFoID0gbmV3IFVpbnQzMkFycmF5KGxlbik7XG4gICAgbGV0IEFsID0gbmV3IFVpbnQzMkFycmF5KGxlbik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjb25zdCB7IGgsIGwgfSA9IGZyb21CaWcobHN0W2ldLCBsZSk7XG4gICAgICAgIFtBaFtpXSwgQWxbaV1dID0gW2gsIGxdO1xuICAgIH1cbiAgICByZXR1cm4gW0FoLCBBbF07XG59XG5jb25zdCB0b0JpZyA9IChoLCBsKSA9PiAoQmlnSW50KGggPj4+IDApIDw8IF8zMm4pIHwgQmlnSW50KGwgPj4+IDApO1xuLy8gZm9yIFNoaWZ0IGluIFswLCAzMilcbmNvbnN0IHNoclNIID0gKGgsIF9sLCBzKSA9PiBoID4+PiBzO1xuY29uc3Qgc2hyU0wgPSAoaCwgbCwgcykgPT4gKGggPDwgKDMyIC0gcykpIHwgKGwgPj4+IHMpO1xuLy8gUmlnaHQgcm90YXRlIGZvciBTaGlmdCBpbiBbMSwgMzIpXG5jb25zdCByb3RyU0ggPSAoaCwgbCwgcykgPT4gKGggPj4+IHMpIHwgKGwgPDwgKDMyIC0gcykpO1xuY29uc3Qgcm90clNMID0gKGgsIGwsIHMpID0+IChoIDw8ICgzMiAtIHMpKSB8IChsID4+PiBzKTtcbi8vIFJpZ2h0IHJvdGF0ZSBmb3IgU2hpZnQgaW4gKDMyLCA2NCksIE5PVEU6IDMyIGlzIHNwZWNpYWwgY2FzZS5cbmNvbnN0IHJvdHJCSCA9IChoLCBsLCBzKSA9PiAoaCA8PCAoNjQgLSBzKSkgfCAobCA+Pj4gKHMgLSAzMikpO1xuY29uc3Qgcm90ckJMID0gKGgsIGwsIHMpID0+IChoID4+PiAocyAtIDMyKSkgfCAobCA8PCAoNjQgLSBzKSk7XG4vLyBSaWdodCByb3RhdGUgZm9yIHNoaWZ0PT09MzIgKGp1c3Qgc3dhcHMgbCZoKVxuY29uc3Qgcm90cjMySCA9IChfaCwgbCkgPT4gbDtcbmNvbnN0IHJvdHIzMkwgPSAoaCwgX2wpID0+IGg7XG4vLyBMZWZ0IHJvdGF0ZSBmb3IgU2hpZnQgaW4gWzEsIDMyKVxuY29uc3Qgcm90bFNIID0gKGgsIGwsIHMpID0+IChoIDw8IHMpIHwgKGwgPj4+ICgzMiAtIHMpKTtcbmNvbnN0IHJvdGxTTCA9IChoLCBsLCBzKSA9PiAobCA8PCBzKSB8IChoID4+PiAoMzIgLSBzKSk7XG4vLyBMZWZ0IHJvdGF0ZSBmb3IgU2hpZnQgaW4gKDMyLCA2NCksIE5PVEU6IDMyIGlzIHNwZWNpYWwgY2FzZS5cbmNvbnN0IHJvdGxCSCA9IChoLCBsLCBzKSA9PiAobCA8PCAocyAtIDMyKSkgfCAoaCA+Pj4gKDY0IC0gcykpO1xuY29uc3Qgcm90bEJMID0gKGgsIGwsIHMpID0+IChoIDw8IChzIC0gMzIpKSB8IChsID4+PiAoNjQgLSBzKSk7XG4vLyBKUyB1c2VzIDMyLWJpdCBzaWduZWQgaW50ZWdlcnMgZm9yIGJpdHdpc2Ugb3BlcmF0aW9ucyB3aGljaCBtZWFucyB3ZSBjYW5ub3Rcbi8vIHNpbXBsZSB0YWtlIGNhcnJ5IG91dCBvZiBsb3cgYml0IHN1bSBieSBzaGlmdCwgd2UgbmVlZCB0byB1c2UgZGl2aXNpb24uXG5mdW5jdGlvbiBhZGQoQWgsIEFsLCBCaCwgQmwpIHtcbiAgICBjb25zdCBsID0gKEFsID4+PiAwKSArIChCbCA+Pj4gMCk7XG4gICAgcmV0dXJuIHsgaDogKEFoICsgQmggKyAoKGwgLyAyICoqIDMyKSB8IDApKSB8IDAsIGw6IGwgfCAwIH07XG59XG4vLyBBZGRpdGlvbiB3aXRoIG1vcmUgdGhhbiAyIGVsZW1lbnRzXG5jb25zdCBhZGQzTCA9IChBbCwgQmwsIENsKSA9PiAoQWwgPj4+IDApICsgKEJsID4+PiAwKSArIChDbCA+Pj4gMCk7XG5jb25zdCBhZGQzSCA9IChsb3csIEFoLCBCaCwgQ2gpID0+IChBaCArIEJoICsgQ2ggKyAoKGxvdyAvIDIgKiogMzIpIHwgMCkpIHwgMDtcbmNvbnN0IGFkZDRMID0gKEFsLCBCbCwgQ2wsIERsKSA9PiAoQWwgPj4+IDApICsgKEJsID4+PiAwKSArIChDbCA+Pj4gMCkgKyAoRGwgPj4+IDApO1xuY29uc3QgYWRkNEggPSAobG93LCBBaCwgQmgsIENoLCBEaCkgPT4gKEFoICsgQmggKyBDaCArIERoICsgKChsb3cgLyAyICoqIDMyKSB8IDApKSB8IDA7XG5jb25zdCBhZGQ1TCA9IChBbCwgQmwsIENsLCBEbCwgRWwpID0+IChBbCA+Pj4gMCkgKyAoQmwgPj4+IDApICsgKENsID4+PiAwKSArIChEbCA+Pj4gMCkgKyAoRWwgPj4+IDApO1xuY29uc3QgYWRkNUggPSAobG93LCBBaCwgQmgsIENoLCBEaCwgRWgpID0+IChBaCArIEJoICsgQ2ggKyBEaCArIEVoICsgKChsb3cgLyAyICoqIDMyKSB8IDApKSB8IDA7XG4vLyBwcmV0dGllci1pZ25vcmVcbmV4cG9ydCB7IGFkZCwgYWRkM0gsIGFkZDNMLCBhZGQ0SCwgYWRkNEwsIGFkZDVILCBhZGQ1TCwgZnJvbUJpZywgcm90bEJILCByb3RsQkwsIHJvdGxTSCwgcm90bFNMLCByb3RyMzJILCByb3RyMzJMLCByb3RyQkgsIHJvdHJCTCwgcm90clNILCByb3RyU0wsIHNoclNILCBzaHJTTCwgc3BsaXQsIHRvQmlnIH07XG4vLyBwcmV0dGllci1pZ25vcmVcbmNvbnN0IHU2NCA9IHtcbiAgICBmcm9tQmlnLCBzcGxpdCwgdG9CaWcsXG4gICAgc2hyU0gsIHNoclNMLFxuICAgIHJvdHJTSCwgcm90clNMLCByb3RyQkgsIHJvdHJCTCxcbiAgICByb3RyMzJILCByb3RyMzJMLFxuICAgIHJvdGxTSCwgcm90bFNMLCByb3RsQkgsIHJvdGxCTCxcbiAgICBhZGQsIGFkZDNMLCBhZGQzSCwgYWRkNEwsIGFkZDRILCBhZGQ1SCwgYWRkNUwsXG59O1xuZXhwb3J0IGRlZmF1bHQgdTY0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9X3U2NC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/_u64.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/crypto.js":
/*!**************************************************!*\
  !*** ./node_modules/@noble/hashes/esm/crypto.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   crypto: () => (/* binding */ crypto)\n/* harmony export */ });\nconst crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9jcnlwdG8uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1AiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvQG5vYmxlL2hhc2hlcy9lc20vY3J5cHRvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjcnlwdG8gPSB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcgJiYgJ2NyeXB0bycgaW4gZ2xvYmFsVGhpcyA/IGdsb2JhbFRoaXMuY3J5cHRvIDogdW5kZWZpbmVkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3J5cHRvLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/crypto.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/legacy.js":
/*!**************************************************!*\
  !*** ./node_modules/@noble/hashes/esm/legacy.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MD5: () => (/* binding */ MD5),\n/* harmony export */   RIPEMD160: () => (/* binding */ RIPEMD160),\n/* harmony export */   SHA1: () => (/* binding */ SHA1),\n/* harmony export */   md5: () => (/* binding */ md5),\n/* harmony export */   ripemd160: () => (/* binding */ ripemd160),\n/* harmony export */   sha1: () => (/* binding */ sha1)\n/* harmony export */ });\n/* harmony import */ var _md_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_md.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/_md.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/utils.js\");\n/**\n\nSHA1 (RFC 3174), MD5 (RFC 1321) and RIPEMD160 (RFC 2286) legacy, weak hash functions.\nDon't use them in a new protocol. What \"weak\" means:\n\n- Collisions can be made with 2^18 effort in MD5, 2^60 in SHA1, 2^80 in RIPEMD160.\n- No practical pre-image attacks (only theoretical, 2^123.4)\n- HMAC seems kinda ok: https://datatracker.ietf.org/doc/html/rfc6151\n * @module\n */\n\n\n/** Initial SHA1 state */\nconst SHA1_IV = /* @__PURE__ */ Uint32Array.from([\n    0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0,\n]);\n// Reusable temporary buffer\nconst SHA1_W = /* @__PURE__ */ new Uint32Array(80);\n/** SHA1 legacy hash class. */\nclass SHA1 extends _md_js__WEBPACK_IMPORTED_MODULE_0__.HashMD {\n    constructor() {\n        super(64, 20, 8, false);\n        this.A = SHA1_IV[0] | 0;\n        this.B = SHA1_IV[1] | 0;\n        this.C = SHA1_IV[2] | 0;\n        this.D = SHA1_IV[3] | 0;\n        this.E = SHA1_IV[4] | 0;\n    }\n    get() {\n        const { A, B, C, D, E } = this;\n        return [A, B, C, D, E];\n    }\n    set(A, B, C, D, E) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA1_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 80; i++)\n            SHA1_W[i] = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotl)(SHA1_W[i - 3] ^ SHA1_W[i - 8] ^ SHA1_W[i - 14] ^ SHA1_W[i - 16], 1);\n        // Compression function main loop, 80 rounds\n        let { A, B, C, D, E } = this;\n        for (let i = 0; i < 80; i++) {\n            let F, K;\n            if (i < 20) {\n                F = (0,_md_js__WEBPACK_IMPORTED_MODULE_0__.Chi)(B, C, D);\n                K = 0x5a827999;\n            }\n            else if (i < 40) {\n                F = B ^ C ^ D;\n                K = 0x6ed9eba1;\n            }\n            else if (i < 60) {\n                F = (0,_md_js__WEBPACK_IMPORTED_MODULE_0__.Maj)(B, C, D);\n                K = 0x8f1bbcdc;\n            }\n            else {\n                F = B ^ C ^ D;\n                K = 0xca62c1d6;\n            }\n            const T = ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotl)(A, 5) + F + E + K + SHA1_W[i]) | 0;\n            E = D;\n            D = C;\n            C = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotl)(B, 30);\n            B = A;\n            A = T;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        this.set(A, B, C, D, E);\n    }\n    roundClean() {\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(SHA1_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0);\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(this.buffer);\n    }\n}\n/** SHA1 (RFC 3174) legacy hash function. It was cryptographically broken. */\nconst sha1 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new SHA1());\n/** Per-round constants */\nconst p32 = /* @__PURE__ */ Math.pow(2, 32);\nconst K = /* @__PURE__ */ Array.from({ length: 64 }, (_, i) => Math.floor(p32 * Math.abs(Math.sin(i + 1))));\n/** md5 initial state: same as sha1, but 4 u32 instead of 5. */\nconst MD5_IV = /* @__PURE__ */ SHA1_IV.slice(0, 4);\n// Reusable temporary buffer\nconst MD5_W = /* @__PURE__ */ new Uint32Array(16);\n/** MD5 legacy hash class. */\nclass MD5 extends _md_js__WEBPACK_IMPORTED_MODULE_0__.HashMD {\n    constructor() {\n        super(64, 16, 8, true);\n        this.A = MD5_IV[0] | 0;\n        this.B = MD5_IV[1] | 0;\n        this.C = MD5_IV[2] | 0;\n        this.D = MD5_IV[3] | 0;\n    }\n    get() {\n        const { A, B, C, D } = this;\n        return [A, B, C, D];\n    }\n    set(A, B, C, D) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            MD5_W[i] = view.getUint32(offset, true);\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D } = this;\n        for (let i = 0; i < 64; i++) {\n            let F, g, s;\n            if (i < 16) {\n                F = (0,_md_js__WEBPACK_IMPORTED_MODULE_0__.Chi)(B, C, D);\n                g = i;\n                s = [7, 12, 17, 22];\n            }\n            else if (i < 32) {\n                F = (0,_md_js__WEBPACK_IMPORTED_MODULE_0__.Chi)(D, B, C);\n                g = (5 * i + 1) % 16;\n                s = [5, 9, 14, 20];\n            }\n            else if (i < 48) {\n                F = B ^ C ^ D;\n                g = (3 * i + 5) % 16;\n                s = [4, 11, 16, 23];\n            }\n            else {\n                F = C ^ (B | ~D);\n                g = (7 * i) % 16;\n                s = [6, 10, 15, 21];\n            }\n            F = F + A + K[i] + MD5_W[g];\n            A = D;\n            D = C;\n            C = B;\n            B = B + (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotl)(F, s[i % 4]);\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        this.set(A, B, C, D);\n    }\n    roundClean() {\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(MD5_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0);\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(this.buffer);\n    }\n}\n/**\n * MD5 (RFC 1321) legacy hash function. It was cryptographically broken.\n * MD5 architecture is similar to SHA1, with some differences:\n * - Reduced output length: 16 bytes (128 bit) instead of 20\n * - 64 rounds, instead of 80\n * - Little-endian: could be faster, but will require more code\n * - Non-linear index selection: huge speed-up for unroll\n * - Per round constants: more memory accesses, additional speed-up for unroll\n */\nconst md5 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new MD5());\n// RIPEMD-160\nconst Rho160 = /* @__PURE__ */ Uint8Array.from([\n    7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n]);\nconst Id160 = /* @__PURE__ */ (() => Uint8Array.from(new Array(16).fill(0).map((_, i) => i)))();\nconst Pi160 = /* @__PURE__ */ (() => Id160.map((i) => (9 * i + 5) % 16))();\nconst idxLR = /* @__PURE__ */ (() => {\n    const L = [Id160];\n    const R = [Pi160];\n    const res = [L, R];\n    for (let i = 0; i < 4; i++)\n        for (let j of res)\n            j.push(j[i].map((k) => Rho160[k]));\n    return res;\n})();\nconst idxL = /* @__PURE__ */ (() => idxLR[0])();\nconst idxR = /* @__PURE__ */ (() => idxLR[1])();\n// const [idxL, idxR] = idxLR;\nconst shifts160 = /* @__PURE__ */ [\n    [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n    [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n    [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n    [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n    [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => Uint8Array.from(i));\nconst shiftsL160 = /* @__PURE__ */ idxL.map((idx, i) => idx.map((j) => shifts160[i][j]));\nconst shiftsR160 = /* @__PURE__ */ idxR.map((idx, i) => idx.map((j) => shifts160[i][j]));\nconst Kl160 = /* @__PURE__ */ Uint32Array.from([\n    0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e,\n]);\nconst Kr160 = /* @__PURE__ */ Uint32Array.from([\n    0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000,\n]);\n// It's called f() in spec.\nfunction ripemd_f(group, x, y, z) {\n    if (group === 0)\n        return x ^ y ^ z;\n    if (group === 1)\n        return (x & y) | (~x & z);\n    if (group === 2)\n        return (x | ~y) ^ z;\n    if (group === 3)\n        return (x & z) | (y & ~z);\n    return x ^ (y | ~z);\n}\n// Reusable temporary buffer\nconst BUF_160 = /* @__PURE__ */ new Uint32Array(16);\nclass RIPEMD160 extends _md_js__WEBPACK_IMPORTED_MODULE_0__.HashMD {\n    constructor() {\n        super(64, 20, 8, true);\n        this.h0 = 0x67452301 | 0;\n        this.h1 = 0xefcdab89 | 0;\n        this.h2 = 0x98badcfe | 0;\n        this.h3 = 0x10325476 | 0;\n        this.h4 = 0xc3d2e1f0 | 0;\n    }\n    get() {\n        const { h0, h1, h2, h3, h4 } = this;\n        return [h0, h1, h2, h3, h4];\n    }\n    set(h0, h1, h2, h3, h4) {\n        this.h0 = h0 | 0;\n        this.h1 = h1 | 0;\n        this.h2 = h2 | 0;\n        this.h3 = h3 | 0;\n        this.h4 = h4 | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            BUF_160[i] = view.getUint32(offset, true);\n        // prettier-ignore\n        let al = this.h0 | 0, ar = al, bl = this.h1 | 0, br = bl, cl = this.h2 | 0, cr = cl, dl = this.h3 | 0, dr = dl, el = this.h4 | 0, er = el;\n        // Instead of iterating 0 to 80, we split it into 5 groups\n        // And use the groups in constants, functions, etc. Much simpler\n        for (let group = 0; group < 5; group++) {\n            const rGroup = 4 - group;\n            const hbl = Kl160[group], hbr = Kr160[group]; // prettier-ignore\n            const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n            const sl = shiftsL160[group], sr = shiftsR160[group]; // prettier-ignore\n            for (let i = 0; i < 16; i++) {\n                const tl = ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotl)(al + ripemd_f(group, bl, cl, dl) + BUF_160[rl[i]] + hbl, sl[i]) + el) | 0;\n                al = el, el = dl, dl = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotl)(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n            }\n            // 2 loops are 10% faster\n            for (let i = 0; i < 16; i++) {\n                const tr = ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotl)(ar + ripemd_f(rGroup, br, cr, dr) + BUF_160[rr[i]] + hbr, sr[i]) + er) | 0;\n                ar = er, er = dr, dr = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotl)(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n            }\n        }\n        // Add the compressed chunk to the current hash value\n        this.set((this.h1 + cl + dr) | 0, (this.h2 + dl + er) | 0, (this.h3 + el + ar) | 0, (this.h4 + al + br) | 0, (this.h0 + bl + cr) | 0);\n    }\n    roundClean() {\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(BUF_160);\n    }\n    destroy() {\n        this.destroyed = true;\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(this.buffer);\n        this.set(0, 0, 0, 0, 0);\n    }\n}\n/**\n * RIPEMD-160 - a legacy hash function from 1990s.\n * * https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n * * https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\n */\nconst ripemd160 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new RIPEMD160());\n//# sourceMappingURL=legacy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9sZWdhY3kuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNEM7QUFDVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLG1CQUFtQiwwQ0FBTTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQSx5QkFBeUIsUUFBUTtBQUNqQyx3QkFBd0IsK0NBQUk7QUFDNUI7QUFDQSxjQUFjLGdCQUFnQjtBQUM5Qix3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0Esb0JBQW9CLDJDQUFHO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJDQUFHO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBSTtBQUMzQjtBQUNBO0FBQ0EsZ0JBQWdCLCtDQUFJO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0RBQUs7QUFDYjtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdEQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ08sNkJBQTZCLHVEQUFZO0FBQ2hEO0FBQ0E7QUFDQSx1Q0FBdUMsWUFBWTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sa0JBQWtCLDBDQUFNO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQSxvQkFBb0IsMkNBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkNBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrQ0FBSTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdEQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBSztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyw0QkFBNEIsdURBQVk7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHdCQUF3QiwwQ0FBTTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscUJBQXFCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixXQUFXO0FBQ3ZDO0FBQ0EsMERBQTBEO0FBQzFELHNEQUFzRDtBQUN0RCxrRUFBa0U7QUFDbEUsNEJBQTRCLFFBQVE7QUFDcEMsNEJBQTRCLCtDQUFJO0FBQ2hDLHVDQUF1QywrQ0FBSSxnQ0FBZ0M7QUFDM0U7QUFDQTtBQUNBLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QiwrQ0FBSTtBQUNoQyx1Q0FBdUMsK0NBQUksZ0NBQWdDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0RBQUs7QUFDYjtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdEQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLGtDQUFrQyx1REFBWTtBQUNyRCIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9sZWdhY3kuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG5cblNIQTEgKFJGQyAzMTc0KSwgTUQ1IChSRkMgMTMyMSkgYW5kIFJJUEVNRDE2MCAoUkZDIDIyODYpIGxlZ2FjeSwgd2VhayBoYXNoIGZ1bmN0aW9ucy5cbkRvbid0IHVzZSB0aGVtIGluIGEgbmV3IHByb3RvY29sLiBXaGF0IFwid2Vha1wiIG1lYW5zOlxuXG4tIENvbGxpc2lvbnMgY2FuIGJlIG1hZGUgd2l0aCAyXjE4IGVmZm9ydCBpbiBNRDUsIDJeNjAgaW4gU0hBMSwgMl44MCBpbiBSSVBFTUQxNjAuXG4tIE5vIHByYWN0aWNhbCBwcmUtaW1hZ2UgYXR0YWNrcyAob25seSB0aGVvcmV0aWNhbCwgMl4xMjMuNClcbi0gSE1BQyBzZWVtcyBraW5kYSBvazogaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM2MTUxXG4gKiBAbW9kdWxlXG4gKi9cbmltcG9ydCB7IENoaSwgSGFzaE1ELCBNYWogfSBmcm9tIFwiLi9fbWQuanNcIjtcbmltcG9ydCB7IGNsZWFuLCBjcmVhdGVIYXNoZXIsIHJvdGwgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuLyoqIEluaXRpYWwgU0hBMSBzdGF0ZSAqL1xuY29uc3QgU0hBMV9JViA9IC8qIEBfX1BVUkVfXyAqLyBVaW50MzJBcnJheS5mcm9tKFtcbiAgICAweDY3NDUyMzAxLCAweGVmY2RhYjg5LCAweDk4YmFkY2ZlLCAweDEwMzI1NDc2LCAweGMzZDJlMWYwLFxuXSk7XG4vLyBSZXVzYWJsZSB0ZW1wb3JhcnkgYnVmZmVyXG5jb25zdCBTSEExX1cgPSAvKiBAX19QVVJFX18gKi8gbmV3IFVpbnQzMkFycmF5KDgwKTtcbi8qKiBTSEExIGxlZ2FjeSBoYXNoIGNsYXNzLiAqL1xuZXhwb3J0IGNsYXNzIFNIQTEgZXh0ZW5kcyBIYXNoTUQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcig2NCwgMjAsIDgsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5BID0gU0hBMV9JVlswXSB8IDA7XG4gICAgICAgIHRoaXMuQiA9IFNIQTFfSVZbMV0gfCAwO1xuICAgICAgICB0aGlzLkMgPSBTSEExX0lWWzJdIHwgMDtcbiAgICAgICAgdGhpcy5EID0gU0hBMV9JVlszXSB8IDA7XG4gICAgICAgIHRoaXMuRSA9IFNIQTFfSVZbNF0gfCAwO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIGNvbnN0IHsgQSwgQiwgQywgRCwgRSB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIFtBLCBCLCBDLCBELCBFXTtcbiAgICB9XG4gICAgc2V0KEEsIEIsIEMsIEQsIEUpIHtcbiAgICAgICAgdGhpcy5BID0gQSB8IDA7XG4gICAgICAgIHRoaXMuQiA9IEIgfCAwO1xuICAgICAgICB0aGlzLkMgPSBDIHwgMDtcbiAgICAgICAgdGhpcy5EID0gRCB8IDA7XG4gICAgICAgIHRoaXMuRSA9IEUgfCAwO1xuICAgIH1cbiAgICBwcm9jZXNzKHZpZXcsIG9mZnNldCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyssIG9mZnNldCArPSA0KVxuICAgICAgICAgICAgU0hBMV9XW2ldID0gdmlldy5nZXRVaW50MzIob2Zmc2V0LCBmYWxzZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspXG4gICAgICAgICAgICBTSEExX1dbaV0gPSByb3RsKFNIQTFfV1tpIC0gM10gXiBTSEExX1dbaSAtIDhdIF4gU0hBMV9XW2kgLSAxNF0gXiBTSEExX1dbaSAtIDE2XSwgMSk7XG4gICAgICAgIC8vIENvbXByZXNzaW9uIGZ1bmN0aW9uIG1haW4gbG9vcCwgODAgcm91bmRzXG4gICAgICAgIGxldCB7IEEsIEIsIEMsIEQsIEUgfSA9IHRoaXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xuICAgICAgICAgICAgbGV0IEYsIEs7XG4gICAgICAgICAgICBpZiAoaSA8IDIwKSB7XG4gICAgICAgICAgICAgICAgRiA9IENoaShCLCBDLCBEKTtcbiAgICAgICAgICAgICAgICBLID0gMHg1YTgyNzk5OTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPCA0MCkge1xuICAgICAgICAgICAgICAgIEYgPSBCIF4gQyBeIEQ7XG4gICAgICAgICAgICAgICAgSyA9IDB4NmVkOWViYTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpIDwgNjApIHtcbiAgICAgICAgICAgICAgICBGID0gTWFqKEIsIEMsIEQpO1xuICAgICAgICAgICAgICAgIEsgPSAweDhmMWJiY2RjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgRiA9IEIgXiBDIF4gRDtcbiAgICAgICAgICAgICAgICBLID0gMHhjYTYyYzFkNjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFQgPSAocm90bChBLCA1KSArIEYgKyBFICsgSyArIFNIQTFfV1tpXSkgfCAwO1xuICAgICAgICAgICAgRSA9IEQ7XG4gICAgICAgICAgICBEID0gQztcbiAgICAgICAgICAgIEMgPSByb3RsKEIsIDMwKTtcbiAgICAgICAgICAgIEIgPSBBO1xuICAgICAgICAgICAgQSA9IFQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIHRoZSBjb21wcmVzc2VkIGNodW5rIHRvIHRoZSBjdXJyZW50IGhhc2ggdmFsdWVcbiAgICAgICAgQSA9IChBICsgdGhpcy5BKSB8IDA7XG4gICAgICAgIEIgPSAoQiArIHRoaXMuQikgfCAwO1xuICAgICAgICBDID0gKEMgKyB0aGlzLkMpIHwgMDtcbiAgICAgICAgRCA9IChEICsgdGhpcy5EKSB8IDA7XG4gICAgICAgIEUgPSAoRSArIHRoaXMuRSkgfCAwO1xuICAgICAgICB0aGlzLnNldChBLCBCLCBDLCBELCBFKTtcbiAgICB9XG4gICAgcm91bmRDbGVhbigpIHtcbiAgICAgICAgY2xlYW4oU0hBMV9XKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zZXQoMCwgMCwgMCwgMCwgMCk7XG4gICAgICAgIGNsZWFuKHRoaXMuYnVmZmVyKTtcbiAgICB9XG59XG4vKiogU0hBMSAoUkZDIDMxNzQpIGxlZ2FjeSBoYXNoIGZ1bmN0aW9uLiBJdCB3YXMgY3J5cHRvZ3JhcGhpY2FsbHkgYnJva2VuLiAqL1xuZXhwb3J0IGNvbnN0IHNoYTEgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlSGFzaGVyKCgpID0+IG5ldyBTSEExKCkpO1xuLyoqIFBlci1yb3VuZCBjb25zdGFudHMgKi9cbmNvbnN0IHAzMiA9IC8qIEBfX1BVUkVfXyAqLyBNYXRoLnBvdygyLCAzMik7XG5jb25zdCBLID0gLyogQF9fUFVSRV9fICovIEFycmF5LmZyb20oeyBsZW5ndGg6IDY0IH0sIChfLCBpKSA9PiBNYXRoLmZsb29yKHAzMiAqIE1hdGguYWJzKE1hdGguc2luKGkgKyAxKSkpKTtcbi8qKiBtZDUgaW5pdGlhbCBzdGF0ZTogc2FtZSBhcyBzaGExLCBidXQgNCB1MzIgaW5zdGVhZCBvZiA1LiAqL1xuY29uc3QgTUQ1X0lWID0gLyogQF9fUFVSRV9fICovIFNIQTFfSVYuc2xpY2UoMCwgNCk7XG4vLyBSZXVzYWJsZSB0ZW1wb3JhcnkgYnVmZmVyXG5jb25zdCBNRDVfVyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgVWludDMyQXJyYXkoMTYpO1xuLyoqIE1ENSBsZWdhY3kgaGFzaCBjbGFzcy4gKi9cbmV4cG9ydCBjbGFzcyBNRDUgZXh0ZW5kcyBIYXNoTUQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcig2NCwgMTYsIDgsIHRydWUpO1xuICAgICAgICB0aGlzLkEgPSBNRDVfSVZbMF0gfCAwO1xuICAgICAgICB0aGlzLkIgPSBNRDVfSVZbMV0gfCAwO1xuICAgICAgICB0aGlzLkMgPSBNRDVfSVZbMl0gfCAwO1xuICAgICAgICB0aGlzLkQgPSBNRDVfSVZbM10gfCAwO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIGNvbnN0IHsgQSwgQiwgQywgRCB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIFtBLCBCLCBDLCBEXTtcbiAgICB9XG4gICAgc2V0KEEsIEIsIEMsIEQpIHtcbiAgICAgICAgdGhpcy5BID0gQSB8IDA7XG4gICAgICAgIHRoaXMuQiA9IEIgfCAwO1xuICAgICAgICB0aGlzLkMgPSBDIHwgMDtcbiAgICAgICAgdGhpcy5EID0gRCB8IDA7XG4gICAgfVxuICAgIHByb2Nlc3Modmlldywgb2Zmc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKywgb2Zmc2V0ICs9IDQpXG4gICAgICAgICAgICBNRDVfV1tpXSA9IHZpZXcuZ2V0VWludDMyKG9mZnNldCwgdHJ1ZSk7XG4gICAgICAgIC8vIENvbXByZXNzaW9uIGZ1bmN0aW9uIG1haW4gbG9vcCwgNjQgcm91bmRzXG4gICAgICAgIGxldCB7IEEsIEIsIEMsIEQgfSA9IHRoaXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjQ7IGkrKykge1xuICAgICAgICAgICAgbGV0IEYsIGcsIHM7XG4gICAgICAgICAgICBpZiAoaSA8IDE2KSB7XG4gICAgICAgICAgICAgICAgRiA9IENoaShCLCBDLCBEKTtcbiAgICAgICAgICAgICAgICBnID0gaTtcbiAgICAgICAgICAgICAgICBzID0gWzcsIDEyLCAxNywgMjJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaSA8IDMyKSB7XG4gICAgICAgICAgICAgICAgRiA9IENoaShELCBCLCBDKTtcbiAgICAgICAgICAgICAgICBnID0gKDUgKiBpICsgMSkgJSAxNjtcbiAgICAgICAgICAgICAgICBzID0gWzUsIDksIDE0LCAyMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpIDwgNDgpIHtcbiAgICAgICAgICAgICAgICBGID0gQiBeIEMgXiBEO1xuICAgICAgICAgICAgICAgIGcgPSAoMyAqIGkgKyA1KSAlIDE2O1xuICAgICAgICAgICAgICAgIHMgPSBbNCwgMTEsIDE2LCAyM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBGID0gQyBeIChCIHwgfkQpO1xuICAgICAgICAgICAgICAgIGcgPSAoNyAqIGkpICUgMTY7XG4gICAgICAgICAgICAgICAgcyA9IFs2LCAxMCwgMTUsIDIxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEYgPSBGICsgQSArIEtbaV0gKyBNRDVfV1tnXTtcbiAgICAgICAgICAgIEEgPSBEO1xuICAgICAgICAgICAgRCA9IEM7XG4gICAgICAgICAgICBDID0gQjtcbiAgICAgICAgICAgIEIgPSBCICsgcm90bChGLCBzW2kgJSA0XSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIHRoZSBjb21wcmVzc2VkIGNodW5rIHRvIHRoZSBjdXJyZW50IGhhc2ggdmFsdWVcbiAgICAgICAgQSA9IChBICsgdGhpcy5BKSB8IDA7XG4gICAgICAgIEIgPSAoQiArIHRoaXMuQikgfCAwO1xuICAgICAgICBDID0gKEMgKyB0aGlzLkMpIHwgMDtcbiAgICAgICAgRCA9IChEICsgdGhpcy5EKSB8IDA7XG4gICAgICAgIHRoaXMuc2V0KEEsIEIsIEMsIEQpO1xuICAgIH1cbiAgICByb3VuZENsZWFuKCkge1xuICAgICAgICBjbGVhbihNRDVfVyk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc2V0KDAsIDAsIDAsIDApO1xuICAgICAgICBjbGVhbih0aGlzLmJ1ZmZlcik7XG4gICAgfVxufVxuLyoqXG4gKiBNRDUgKFJGQyAxMzIxKSBsZWdhY3kgaGFzaCBmdW5jdGlvbi4gSXQgd2FzIGNyeXB0b2dyYXBoaWNhbGx5IGJyb2tlbi5cbiAqIE1ENSBhcmNoaXRlY3R1cmUgaXMgc2ltaWxhciB0byBTSEExLCB3aXRoIHNvbWUgZGlmZmVyZW5jZXM6XG4gKiAtIFJlZHVjZWQgb3V0cHV0IGxlbmd0aDogMTYgYnl0ZXMgKDEyOCBiaXQpIGluc3RlYWQgb2YgMjBcbiAqIC0gNjQgcm91bmRzLCBpbnN0ZWFkIG9mIDgwXG4gKiAtIExpdHRsZS1lbmRpYW46IGNvdWxkIGJlIGZhc3RlciwgYnV0IHdpbGwgcmVxdWlyZSBtb3JlIGNvZGVcbiAqIC0gTm9uLWxpbmVhciBpbmRleCBzZWxlY3Rpb246IGh1Z2Ugc3BlZWQtdXAgZm9yIHVucm9sbFxuICogLSBQZXIgcm91bmQgY29uc3RhbnRzOiBtb3JlIG1lbW9yeSBhY2Nlc3NlcywgYWRkaXRpb25hbCBzcGVlZC11cCBmb3IgdW5yb2xsXG4gKi9cbmV4cG9ydCBjb25zdCBtZDUgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlSGFzaGVyKCgpID0+IG5ldyBNRDUoKSk7XG4vLyBSSVBFTUQtMTYwXG5jb25zdCBSaG8xNjAgPSAvKiBAX19QVVJFX18gKi8gVWludDhBcnJheS5mcm9tKFtcbiAgICA3LCA0LCAxMywgMSwgMTAsIDYsIDE1LCAzLCAxMiwgMCwgOSwgNSwgMiwgMTQsIDExLCA4LFxuXSk7XG5jb25zdCBJZDE2MCA9IC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4gVWludDhBcnJheS5mcm9tKG5ldyBBcnJheSgxNikuZmlsbCgwKS5tYXAoKF8sIGkpID0+IGkpKSkoKTtcbmNvbnN0IFBpMTYwID0gLyogQF9fUFVSRV9fICovICgoKSA9PiBJZDE2MC5tYXAoKGkpID0+ICg5ICogaSArIDUpICUgMTYpKSgpO1xuY29uc3QgaWR4TFIgPSAvKiBAX19QVVJFX18gKi8gKCgpID0+IHtcbiAgICBjb25zdCBMID0gW0lkMTYwXTtcbiAgICBjb25zdCBSID0gW1BpMTYwXTtcbiAgICBjb25zdCByZXMgPSBbTCwgUl07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspXG4gICAgICAgIGZvciAobGV0IGogb2YgcmVzKVxuICAgICAgICAgICAgai5wdXNoKGpbaV0ubWFwKChrKSA9PiBSaG8xNjBba10pKTtcbiAgICByZXR1cm4gcmVzO1xufSkoKTtcbmNvbnN0IGlkeEwgPSAvKiBAX19QVVJFX18gKi8gKCgpID0+IGlkeExSWzBdKSgpO1xuY29uc3QgaWR4UiA9IC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4gaWR4TFJbMV0pKCk7XG4vLyBjb25zdCBbaWR4TCwgaWR4Ul0gPSBpZHhMUjtcbmNvbnN0IHNoaWZ0czE2MCA9IC8qIEBfX1BVUkVfXyAqLyBbXG4gICAgWzExLCAxNCwgMTUsIDEyLCA1LCA4LCA3LCA5LCAxMSwgMTMsIDE0LCAxNSwgNiwgNywgOSwgOF0sXG4gICAgWzEyLCAxMywgMTEsIDE1LCA2LCA5LCA5LCA3LCAxMiwgMTUsIDExLCAxMywgNywgOCwgNywgN10sXG4gICAgWzEzLCAxNSwgMTQsIDExLCA3LCA3LCA2LCA4LCAxMywgMTQsIDEzLCAxMiwgNSwgNSwgNiwgOV0sXG4gICAgWzE0LCAxMSwgMTIsIDE0LCA4LCA2LCA1LCA1LCAxNSwgMTIsIDE1LCAxNCwgOSwgOSwgOCwgNl0sXG4gICAgWzE1LCAxMiwgMTMsIDEzLCA5LCA1LCA4LCA2LCAxNCwgMTEsIDEyLCAxMSwgOCwgNiwgNSwgNV0sXG5dLm1hcCgoaSkgPT4gVWludDhBcnJheS5mcm9tKGkpKTtcbmNvbnN0IHNoaWZ0c0wxNjAgPSAvKiBAX19QVVJFX18gKi8gaWR4TC5tYXAoKGlkeCwgaSkgPT4gaWR4Lm1hcCgoaikgPT4gc2hpZnRzMTYwW2ldW2pdKSk7XG5jb25zdCBzaGlmdHNSMTYwID0gLyogQF9fUFVSRV9fICovIGlkeFIubWFwKChpZHgsIGkpID0+IGlkeC5tYXAoKGopID0+IHNoaWZ0czE2MFtpXVtqXSkpO1xuY29uc3QgS2wxNjAgPSAvKiBAX19QVVJFX18gKi8gVWludDMyQXJyYXkuZnJvbShbXG4gICAgMHgwMDAwMDAwMCwgMHg1YTgyNzk5OSwgMHg2ZWQ5ZWJhMSwgMHg4ZjFiYmNkYywgMHhhOTUzZmQ0ZSxcbl0pO1xuY29uc3QgS3IxNjAgPSAvKiBAX19QVVJFX18gKi8gVWludDMyQXJyYXkuZnJvbShbXG4gICAgMHg1MGEyOGJlNiwgMHg1YzRkZDEyNCwgMHg2ZDcwM2VmMywgMHg3YTZkNzZlOSwgMHgwMDAwMDAwMCxcbl0pO1xuLy8gSXQncyBjYWxsZWQgZigpIGluIHNwZWMuXG5mdW5jdGlvbiByaXBlbWRfZihncm91cCwgeCwgeSwgeikge1xuICAgIGlmIChncm91cCA9PT0gMClcbiAgICAgICAgcmV0dXJuIHggXiB5IF4gejtcbiAgICBpZiAoZ3JvdXAgPT09IDEpXG4gICAgICAgIHJldHVybiAoeCAmIHkpIHwgKH54ICYgeik7XG4gICAgaWYgKGdyb3VwID09PSAyKVxuICAgICAgICByZXR1cm4gKHggfCB+eSkgXiB6O1xuICAgIGlmIChncm91cCA9PT0gMylcbiAgICAgICAgcmV0dXJuICh4ICYgeikgfCAoeSAmIH56KTtcbiAgICByZXR1cm4geCBeICh5IHwgfnopO1xufVxuLy8gUmV1c2FibGUgdGVtcG9yYXJ5IGJ1ZmZlclxuY29uc3QgQlVGXzE2MCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgVWludDMyQXJyYXkoMTYpO1xuZXhwb3J0IGNsYXNzIFJJUEVNRDE2MCBleHRlbmRzIEhhc2hNRCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKDY0LCAyMCwgOCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuaDAgPSAweDY3NDUyMzAxIHwgMDtcbiAgICAgICAgdGhpcy5oMSA9IDB4ZWZjZGFiODkgfCAwO1xuICAgICAgICB0aGlzLmgyID0gMHg5OGJhZGNmZSB8IDA7XG4gICAgICAgIHRoaXMuaDMgPSAweDEwMzI1NDc2IHwgMDtcbiAgICAgICAgdGhpcy5oNCA9IDB4YzNkMmUxZjAgfCAwO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIGNvbnN0IHsgaDAsIGgxLCBoMiwgaDMsIGg0IH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gW2gwLCBoMSwgaDIsIGgzLCBoNF07XG4gICAgfVxuICAgIHNldChoMCwgaDEsIGgyLCBoMywgaDQpIHtcbiAgICAgICAgdGhpcy5oMCA9IGgwIHwgMDtcbiAgICAgICAgdGhpcy5oMSA9IGgxIHwgMDtcbiAgICAgICAgdGhpcy5oMiA9IGgyIHwgMDtcbiAgICAgICAgdGhpcy5oMyA9IGgzIHwgMDtcbiAgICAgICAgdGhpcy5oNCA9IGg0IHwgMDtcbiAgICB9XG4gICAgcHJvY2Vzcyh2aWV3LCBvZmZzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrLCBvZmZzZXQgKz0gNClcbiAgICAgICAgICAgIEJVRl8xNjBbaV0gPSB2aWV3LmdldFVpbnQzMihvZmZzZXQsIHRydWUpO1xuICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgICAgbGV0IGFsID0gdGhpcy5oMCB8IDAsIGFyID0gYWwsIGJsID0gdGhpcy5oMSB8IDAsIGJyID0gYmwsIGNsID0gdGhpcy5oMiB8IDAsIGNyID0gY2wsIGRsID0gdGhpcy5oMyB8IDAsIGRyID0gZGwsIGVsID0gdGhpcy5oNCB8IDAsIGVyID0gZWw7XG4gICAgICAgIC8vIEluc3RlYWQgb2YgaXRlcmF0aW5nIDAgdG8gODAsIHdlIHNwbGl0IGl0IGludG8gNSBncm91cHNcbiAgICAgICAgLy8gQW5kIHVzZSB0aGUgZ3JvdXBzIGluIGNvbnN0YW50cywgZnVuY3Rpb25zLCBldGMuIE11Y2ggc2ltcGxlclxuICAgICAgICBmb3IgKGxldCBncm91cCA9IDA7IGdyb3VwIDwgNTsgZ3JvdXArKykge1xuICAgICAgICAgICAgY29uc3Qgckdyb3VwID0gNCAtIGdyb3VwO1xuICAgICAgICAgICAgY29uc3QgaGJsID0gS2wxNjBbZ3JvdXBdLCBoYnIgPSBLcjE2MFtncm91cF07IC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgICAgICAgY29uc3QgcmwgPSBpZHhMW2dyb3VwXSwgcnIgPSBpZHhSW2dyb3VwXTsgLy8gcHJldHRpZXItaWdub3JlXG4gICAgICAgICAgICBjb25zdCBzbCA9IHNoaWZ0c0wxNjBbZ3JvdXBdLCBzciA9IHNoaWZ0c1IxNjBbZ3JvdXBdOyAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRsID0gKHJvdGwoYWwgKyByaXBlbWRfZihncm91cCwgYmwsIGNsLCBkbCkgKyBCVUZfMTYwW3JsW2ldXSArIGhibCwgc2xbaV0pICsgZWwpIHwgMDtcbiAgICAgICAgICAgICAgICBhbCA9IGVsLCBlbCA9IGRsLCBkbCA9IHJvdGwoY2wsIDEwKSB8IDAsIGNsID0gYmwsIGJsID0gdGw7IC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gMiBsb29wcyBhcmUgMTAlIGZhc3RlclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHIgPSAocm90bChhciArIHJpcGVtZF9mKHJHcm91cCwgYnIsIGNyLCBkcikgKyBCVUZfMTYwW3JyW2ldXSArIGhiciwgc3JbaV0pICsgZXIpIHwgMDtcbiAgICAgICAgICAgICAgICBhciA9IGVyLCBlciA9IGRyLCBkciA9IHJvdGwoY3IsIDEwKSB8IDAsIGNyID0gYnIsIGJyID0gdHI7IC8vIHByZXR0aWVyLWlnbm9yZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCB0aGUgY29tcHJlc3NlZCBjaHVuayB0byB0aGUgY3VycmVudCBoYXNoIHZhbHVlXG4gICAgICAgIHRoaXMuc2V0KCh0aGlzLmgxICsgY2wgKyBkcikgfCAwLCAodGhpcy5oMiArIGRsICsgZXIpIHwgMCwgKHRoaXMuaDMgKyBlbCArIGFyKSB8IDAsICh0aGlzLmg0ICsgYWwgKyBicikgfCAwLCAodGhpcy5oMCArIGJsICsgY3IpIHwgMCk7XG4gICAgfVxuICAgIHJvdW5kQ2xlYW4oKSB7XG4gICAgICAgIGNsZWFuKEJVRl8xNjApO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgIGNsZWFuKHRoaXMuYnVmZmVyKTtcbiAgICAgICAgdGhpcy5zZXQoMCwgMCwgMCwgMCwgMCk7XG4gICAgfVxufVxuLyoqXG4gKiBSSVBFTUQtMTYwIC0gYSBsZWdhY3kgaGFzaCBmdW5jdGlvbiBmcm9tIDE5OTBzLlxuICogKiBodHRwczovL2hvbWVzLmVzYXQua3VsZXV2ZW4uYmUvfmJvc3NlbGFlL3JpcGVtZDE2MC5odG1sXG4gKiAqIGh0dHBzOi8vaG9tZXMuZXNhdC5rdWxldXZlbi5iZS9+Ym9zc2VsYWUvcmlwZW1kMTYwL3BkZi9BQi05NjAxL0FCLTk2MDEucGRmXG4gKi9cbmV4cG9ydCBjb25zdCByaXBlbWQxNjAgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlSGFzaGVyKCgpID0+IG5ldyBSSVBFTUQxNjAoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sZWdhY3kuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/legacy.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/sha1.js":
/*!************************************************!*\
  !*** ./node_modules/@noble/hashes/esm/sha1.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SHA1: () => (/* binding */ SHA1),\n/* harmony export */   sha1: () => (/* binding */ sha1)\n/* harmony export */ });\n/* harmony import */ var _legacy_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./legacy.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/legacy.js\");\n/**\n * SHA1 (RFC 3174) legacy hash function.\n * @module\n * @deprecated\n */\n\n/** @deprecated Use import from `noble/hashes/legacy` module */\nconst SHA1 = _legacy_js__WEBPACK_IMPORTED_MODULE_0__.SHA1;\n/** @deprecated Use import from `noble/hashes/legacy` module */\nconst sha1 = _legacy_js__WEBPACK_IMPORTED_MODULE_0__.sha1;\n//# sourceMappingURL=sha1.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9zaGExLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDMkQ7QUFDM0Q7QUFDTyxhQUFhLDRDQUFLO0FBQ3pCO0FBQ08sYUFBYSw0Q0FBSztBQUN6QiIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9zaGExLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU0hBMSAoUkZDIDMxNzQpIGxlZ2FjeSBoYXNoIGZ1bmN0aW9uLlxuICogQG1vZHVsZVxuICogQGRlcHJlY2F0ZWRcbiAqL1xuaW1wb3J0IHsgU0hBMSBhcyBTSEExbiwgc2hhMSBhcyBzaGExbiB9IGZyb20gXCIuL2xlZ2FjeS5qc1wiO1xuLyoqIEBkZXByZWNhdGVkIFVzZSBpbXBvcnQgZnJvbSBgbm9ibGUvaGFzaGVzL2xlZ2FjeWAgbW9kdWxlICovXG5leHBvcnQgY29uc3QgU0hBMSA9IFNIQTFuO1xuLyoqIEBkZXByZWNhdGVkIFVzZSBpbXBvcnQgZnJvbSBgbm9ibGUvaGFzaGVzL2xlZ2FjeWAgbW9kdWxlICovXG5leHBvcnQgY29uc3Qgc2hhMSA9IHNoYTFuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhMS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/sha1.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/sha2.js":
/*!************************************************!*\
  !*** ./node_modules/@noble/hashes/esm/sha2.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SHA224: () => (/* binding */ SHA224),\n/* harmony export */   SHA256: () => (/* binding */ SHA256),\n/* harmony export */   SHA384: () => (/* binding */ SHA384),\n/* harmony export */   SHA512: () => (/* binding */ SHA512),\n/* harmony export */   SHA512_224: () => (/* binding */ SHA512_224),\n/* harmony export */   SHA512_256: () => (/* binding */ SHA512_256),\n/* harmony export */   sha224: () => (/* binding */ sha224),\n/* harmony export */   sha256: () => (/* binding */ sha256),\n/* harmony export */   sha384: () => (/* binding */ sha384),\n/* harmony export */   sha512: () => (/* binding */ sha512),\n/* harmony export */   sha512_224: () => (/* binding */ sha512_224),\n/* harmony export */   sha512_256: () => (/* binding */ sha512_256)\n/* harmony export */ });\n/* harmony import */ var _md_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_md.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/_md.js\");\n/* harmony import */ var _u64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_u64.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/_u64.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/utils.js\");\n/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\n\n\n\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nclass SHA256 extends _md_js__WEBPACK_IMPORTED_MODULE_0__.HashMD {\n    constructor(outputLen = 32) {\n        super(64, outputLen, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA256_IV[0] | 0;\n        this.B = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA256_IV[1] | 0;\n        this.C = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA256_IV[2] | 0;\n        this.D = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA256_IV[3] | 0;\n        this.E = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA256_IV[4] | 0;\n        this.F = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA256_IV[5] | 0;\n        this.G = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA256_IV[6] | 0;\n        this.H = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA256_IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(W15, 7) ^ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(W15, 18) ^ (W15 >>> 3);\n            const s1 = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(W2, 17) ^ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(E, 6) ^ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(E, 11) ^ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(E, 25);\n            const T1 = (H + sigma1 + (0,_md_js__WEBPACK_IMPORTED_MODULE_0__.Chi)(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(A, 2) ^ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(A, 13) ^ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.rotr)(A, 22);\n            const T2 = (sigma0 + (0,_md_js__WEBPACK_IMPORTED_MODULE_0__.Maj)(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(SHA256_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(this.buffer);\n    }\n}\nclass SHA224 extends SHA256 {\n    constructor() {\n        super(28);\n        this.A = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA224_IV[0] | 0;\n        this.B = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA224_IV[1] | 0;\n        this.C = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA224_IV[2] | 0;\n        this.D = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA224_IV[3] | 0;\n        this.E = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA224_IV[4] | 0;\n        this.F = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA224_IV[5] | 0;\n        this.G = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA224_IV[6] | 0;\n        this.H = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA224_IV[7] | 0;\n    }\n}\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => _u64_js__WEBPACK_IMPORTED_MODULE_2__.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\nclass SHA512 extends _md_js__WEBPACK_IMPORTED_MODULE_0__.HashMD {\n    constructor(outputLen = 64) {\n        super(128, outputLen, 16, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[0] | 0;\n        this.Al = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[1] | 0;\n        this.Bh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[2] | 0;\n        this.Bl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[3] | 0;\n        this.Ch = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[4] | 0;\n        this.Cl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[5] | 0;\n        this.Dh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[6] | 0;\n        this.Dl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[7] | 0;\n        this.Eh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[8] | 0;\n        this.El = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[9] | 0;\n        this.Fh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[10] | 0;\n        this.Fl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[11] | 0;\n        this.Gh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[12] | 0;\n        this.Gl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[13] | 0;\n        this.Hh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[14] | 0;\n        this.Hl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_IV[15] | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSH(W15h, W15l, 1) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSH(W15h, W15l, 8) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.shrSH(W15h, W15l, 7);\n            const s0l = _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSL(W15h, W15l, 1) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSL(W15h, W15l, 8) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSH(W2h, W2l, 19) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrBH(W2h, W2l, 61) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.shrSH(W2h, W2l, 6);\n            const s1l = _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSL(W2h, W2l, 19) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrBL(W2h, W2l, 61) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSH(Eh, El, 14) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSH(Eh, El, 18) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrBH(Eh, El, 41);\n            const sigma1l = _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSL(Eh, El, 14) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSL(Eh, El, 18) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSH(Ah, Al, 28) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrBH(Ah, Al, 34) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrBH(Ah, Al, 39);\n            const sigma0l = _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrSL(Ah, Al, 28) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrBL(Ah, Al, 34) ^ _u64_js__WEBPACK_IMPORTED_MODULE_2__.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add3L(T1l, sigma0l, MAJl);\n            Ah = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = _u64_js__WEBPACK_IMPORTED_MODULE_2__.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(SHA512_W_H, SHA512_W_L);\n    }\n    destroy() {\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.clean)(this.buffer);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nclass SHA384 extends SHA512 {\n    constructor() {\n        super(48);\n        this.Ah = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[0] | 0;\n        this.Al = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[1] | 0;\n        this.Bh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[2] | 0;\n        this.Bl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[3] | 0;\n        this.Ch = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[4] | 0;\n        this.Cl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[5] | 0;\n        this.Dh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[6] | 0;\n        this.Dl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[7] | 0;\n        this.Eh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[8] | 0;\n        this.El = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[9] | 0;\n        this.Fh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[10] | 0;\n        this.Fl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[11] | 0;\n        this.Gh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[12] | 0;\n        this.Gl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[13] | 0;\n        this.Hh = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[14] | 0;\n        this.Hl = _md_js__WEBPACK_IMPORTED_MODULE_0__.SHA384_IV[15] | 0;\n    }\n}\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n    0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n    0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n    0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\nclass SHA512_224 extends SHA512 {\n    constructor() {\n        super(28);\n        this.Ah = T224_IV[0] | 0;\n        this.Al = T224_IV[1] | 0;\n        this.Bh = T224_IV[2] | 0;\n        this.Bl = T224_IV[3] | 0;\n        this.Ch = T224_IV[4] | 0;\n        this.Cl = T224_IV[5] | 0;\n        this.Dh = T224_IV[6] | 0;\n        this.Dl = T224_IV[7] | 0;\n        this.Eh = T224_IV[8] | 0;\n        this.El = T224_IV[9] | 0;\n        this.Fh = T224_IV[10] | 0;\n        this.Fl = T224_IV[11] | 0;\n        this.Gh = T224_IV[12] | 0;\n        this.Gl = T224_IV[13] | 0;\n        this.Hh = T224_IV[14] | 0;\n        this.Hl = T224_IV[15] | 0;\n    }\n}\nclass SHA512_256 extends SHA512 {\n    constructor() {\n        super(32);\n        this.Ah = T256_IV[0] | 0;\n        this.Al = T256_IV[1] | 0;\n        this.Bh = T256_IV[2] | 0;\n        this.Bl = T256_IV[3] | 0;\n        this.Ch = T256_IV[4] | 0;\n        this.Cl = T256_IV[5] | 0;\n        this.Dh = T256_IV[6] | 0;\n        this.Dl = T256_IV[7] | 0;\n        this.Eh = T256_IV[8] | 0;\n        this.El = T256_IV[9] | 0;\n        this.Fh = T256_IV[10] | 0;\n        this.Fl = T256_IV[11] | 0;\n        this.Gh = T256_IV[12] | 0;\n        this.Gl = T256_IV[13] | 0;\n        this.Hh = T256_IV[14] | 0;\n        this.Hl = T256_IV[15] | 0;\n    }\n}\n/**\n * SHA2-256 hash function from RFC 4634.\n *\n * It is the fastest JS hash, even faster than Blake3.\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n */\nconst sha256 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new SHA256());\n/** SHA2-224 hash function from RFC 4634 */\nconst sha224 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new SHA224());\n/** SHA2-512 hash function from RFC 4634. */\nconst sha512 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new SHA512());\n/** SHA2-384 hash function from RFC 4634. */\nconst sha384 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new SHA384());\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nconst sha512_256 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new SHA512_256());\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nconst sha512_224 = /* @__PURE__ */ (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createHasher)(() => new SHA512_224());\n//# sourceMappingURL=sha2.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9zaGEyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3dGO0FBQ3ZEO0FBQ3NCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxxQkFBcUIsMENBQU07QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkNBQVM7QUFDMUIsaUJBQWlCLDZDQUFTO0FBQzFCLGlCQUFpQiw2Q0FBUztBQUMxQixpQkFBaUIsNkNBQVM7QUFDMUIsaUJBQWlCLDZDQUFTO0FBQzFCLGlCQUFpQiw2Q0FBUztBQUMxQixpQkFBaUIsNkNBQVM7QUFDMUIsaUJBQWlCLDZDQUFTO0FBQzFCO0FBQ0E7QUFDQSxnQkFBZ0IseUJBQXlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0EseUJBQXlCLFFBQVE7QUFDakM7QUFDQTtBQUNBLHVCQUF1QiwrQ0FBSSxXQUFXLCtDQUFJO0FBQzFDLHVCQUF1QiwrQ0FBSSxXQUFXLCtDQUFJO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLGNBQWMseUJBQXlCO0FBQ3ZDLHdCQUF3QixRQUFRO0FBQ2hDLDJCQUEyQiwrQ0FBSSxTQUFTLCtDQUFJLFVBQVUsK0NBQUk7QUFDMUQscUNBQXFDLDJDQUFHO0FBQ3hDLDJCQUEyQiwrQ0FBSSxTQUFTLCtDQUFJLFVBQVUsK0NBQUk7QUFDMUQsaUNBQWlDLDJDQUFHO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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RDtBQUNPLCtCQUErQix1REFBWTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNPLG1DQUFtQyx1REFBWTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNPLG1DQUFtQyx1REFBWTtBQUN0RCIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9zaGEyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU0hBMiBoYXNoIGZ1bmN0aW9uLiBBLmsuYS4gc2hhMjU2LCBzaGEzODQsIHNoYTUxMiwgc2hhNTEyXzIyNCwgc2hhNTEyXzI1Ni5cbiAqIFNIQTI1NiBpcyB0aGUgZmFzdGVzdCBoYXNoIGltcGxlbWVudGFibGUgaW4gSlMsIGV2ZW4gZmFzdGVyIHRoYW4gQmxha2UzLlxuICogQ2hlY2sgb3V0IFtSRkMgNDYzNF0oaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM0NjM0KSBhbmRcbiAqIFtGSVBTIDE4MC00XShodHRwczovL252bHB1YnMubmlzdC5nb3YvbmlzdHB1YnMvRklQUy9OSVNULkZJUFMuMTgwLTQucGRmKS5cbiAqIEBtb2R1bGVcbiAqL1xuaW1wb3J0IHsgQ2hpLCBIYXNoTUQsIE1haiwgU0hBMjI0X0lWLCBTSEEyNTZfSVYsIFNIQTM4NF9JViwgU0hBNTEyX0lWIH0gZnJvbSBcIi4vX21kLmpzXCI7XG5pbXBvcnQgKiBhcyB1NjQgZnJvbSBcIi4vX3U2NC5qc1wiO1xuaW1wb3J0IHsgY2xlYW4sIGNyZWF0ZUhhc2hlciwgcm90ciB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG4vKipcbiAqIFJvdW5kIGNvbnN0YW50czpcbiAqIEZpcnN0IDMyIGJpdHMgb2YgZnJhY3Rpb25hbCBwYXJ0cyBvZiB0aGUgY3ViZSByb290cyBvZiB0aGUgZmlyc3QgNjQgcHJpbWVzIDIuLjMxMSlcbiAqL1xuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCBTSEEyNTZfSyA9IC8qIEBfX1BVUkVfXyAqLyBVaW50MzJBcnJheS5mcm9tKFtcbiAgICAweDQyOGEyZjk4LCAweDcxMzc0NDkxLCAweGI1YzBmYmNmLCAweGU5YjVkYmE1LCAweDM5NTZjMjViLCAweDU5ZjExMWYxLCAweDkyM2Y4MmE0LCAweGFiMWM1ZWQ1LFxuICAgIDB4ZDgwN2FhOTgsIDB4MTI4MzViMDEsIDB4MjQzMTg1YmUsIDB4NTUwYzdkYzMsIDB4NzJiZTVkNzQsIDB4ODBkZWIxZmUsIDB4OWJkYzA2YTcsIDB4YzE5YmYxNzQsXG4gICAgMHhlNDliNjljMSwgMHhlZmJlNDc4NiwgMHgwZmMxOWRjNiwgMHgyNDBjYTFjYywgMHgyZGU5MmM2ZiwgMHg0YTc0ODRhYSwgMHg1Y2IwYTlkYywgMHg3NmY5ODhkYSxcbiAgICAweDk4M2U1MTUyLCAweGE4MzFjNjZkLCAweGIwMDMyN2M4LCAweGJmNTk3ZmM3LCAweGM2ZTAwYmYzLCAweGQ1YTc5MTQ3LCAweDA2Y2E2MzUxLCAweDE0MjkyOTY3LFxuICAgIDB4MjdiNzBhODUsIDB4MmUxYjIxMzgsIDB4NGQyYzZkZmMsIDB4NTMzODBkMTMsIDB4NjUwYTczNTQsIDB4NzY2YTBhYmIsIDB4ODFjMmM5MmUsIDB4OTI3MjJjODUsXG4gICAgMHhhMmJmZThhMSwgMHhhODFhNjY0YiwgMHhjMjRiOGI3MCwgMHhjNzZjNTFhMywgMHhkMTkyZTgxOSwgMHhkNjk5MDYyNCwgMHhmNDBlMzU4NSwgMHgxMDZhYTA3MCxcbiAgICAweDE5YTRjMTE2LCAweDFlMzc2YzA4LCAweDI3NDg3NzRjLCAweDM0YjBiY2I1LCAweDM5MWMwY2IzLCAweDRlZDhhYTRhLCAweDViOWNjYTRmLCAweDY4MmU2ZmYzLFxuICAgIDB4NzQ4ZjgyZWUsIDB4NzhhNTYzNmYsIDB4ODRjODc4MTQsIDB4OGNjNzAyMDgsIDB4OTBiZWZmZmEsIDB4YTQ1MDZjZWIsIDB4YmVmOWEzZjcsIDB4YzY3MTc4ZjJcbl0pO1xuLyoqIFJldXNhYmxlIHRlbXBvcmFyeSBidWZmZXIuIFwiV1wiIGNvbWVzIHN0cmFpZ2h0IGZyb20gc3BlYy4gKi9cbmNvbnN0IFNIQTI1Nl9XID0gLyogQF9fUFVSRV9fICovIG5ldyBVaW50MzJBcnJheSg2NCk7XG5leHBvcnQgY2xhc3MgU0hBMjU2IGV4dGVuZHMgSGFzaE1EIHtcbiAgICBjb25zdHJ1Y3RvcihvdXRwdXRMZW4gPSAzMikge1xuICAgICAgICBzdXBlcig2NCwgb3V0cHV0TGVuLCA4LCBmYWxzZSk7XG4gICAgICAgIC8vIFdlIGNhbm5vdCB1c2UgYXJyYXkgaGVyZSBzaW5jZSBhcnJheSBhbGxvd3MgaW5kZXhpbmcgYnkgdmFyaWFibGVcbiAgICAgICAgLy8gd2hpY2ggbWVhbnMgb3B0aW1pemVyL2NvbXBpbGVyIGNhbm5vdCB1c2UgcmVnaXN0ZXJzLlxuICAgICAgICB0aGlzLkEgPSBTSEEyNTZfSVZbMF0gfCAwO1xuICAgICAgICB0aGlzLkIgPSBTSEEyNTZfSVZbMV0gfCAwO1xuICAgICAgICB0aGlzLkMgPSBTSEEyNTZfSVZbMl0gfCAwO1xuICAgICAgICB0aGlzLkQgPSBTSEEyNTZfSVZbM10gfCAwO1xuICAgICAgICB0aGlzLkUgPSBTSEEyNTZfSVZbNF0gfCAwO1xuICAgICAgICB0aGlzLkYgPSBTSEEyNTZfSVZbNV0gfCAwO1xuICAgICAgICB0aGlzLkcgPSBTSEEyNTZfSVZbNl0gfCAwO1xuICAgICAgICB0aGlzLkggPSBTSEEyNTZfSVZbN10gfCAwO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIGNvbnN0IHsgQSwgQiwgQywgRCwgRSwgRiwgRywgSCB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIFtBLCBCLCBDLCBELCBFLCBGLCBHLCBIXTtcbiAgICB9XG4gICAgLy8gcHJldHRpZXItaWdub3JlXG4gICAgc2V0KEEsIEIsIEMsIEQsIEUsIEYsIEcsIEgpIHtcbiAgICAgICAgdGhpcy5BID0gQSB8IDA7XG4gICAgICAgIHRoaXMuQiA9IEIgfCAwO1xuICAgICAgICB0aGlzLkMgPSBDIHwgMDtcbiAgICAgICAgdGhpcy5EID0gRCB8IDA7XG4gICAgICAgIHRoaXMuRSA9IEUgfCAwO1xuICAgICAgICB0aGlzLkYgPSBGIHwgMDtcbiAgICAgICAgdGhpcy5HID0gRyB8IDA7XG4gICAgICAgIHRoaXMuSCA9IEggfCAwO1xuICAgIH1cbiAgICBwcm9jZXNzKHZpZXcsIG9mZnNldCkge1xuICAgICAgICAvLyBFeHRlbmQgdGhlIGZpcnN0IDE2IHdvcmRzIGludG8gdGhlIHJlbWFpbmluZyA0OCB3b3JkcyB3WzE2Li42M10gb2YgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgYXJyYXlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrLCBvZmZzZXQgKz0gNClcbiAgICAgICAgICAgIFNIQTI1Nl9XW2ldID0gdmlldy5nZXRVaW50MzIob2Zmc2V0LCBmYWxzZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDY0OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IFcxNSA9IFNIQTI1Nl9XW2kgLSAxNV07XG4gICAgICAgICAgICBjb25zdCBXMiA9IFNIQTI1Nl9XW2kgLSAyXTtcbiAgICAgICAgICAgIGNvbnN0IHMwID0gcm90cihXMTUsIDcpIF4gcm90cihXMTUsIDE4KSBeIChXMTUgPj4+IDMpO1xuICAgICAgICAgICAgY29uc3QgczEgPSByb3RyKFcyLCAxNykgXiByb3RyKFcyLCAxOSkgXiAoVzIgPj4+IDEwKTtcbiAgICAgICAgICAgIFNIQTI1Nl9XW2ldID0gKHMxICsgU0hBMjU2X1dbaSAtIDddICsgczAgKyBTSEEyNTZfV1tpIC0gMTZdKSB8IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29tcHJlc3Npb24gZnVuY3Rpb24gbWFpbiBsb29wLCA2NCByb3VuZHNcbiAgICAgICAgbGV0IHsgQSwgQiwgQywgRCwgRSwgRiwgRywgSCB9ID0gdGhpcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2NDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzaWdtYTEgPSByb3RyKEUsIDYpIF4gcm90cihFLCAxMSkgXiByb3RyKEUsIDI1KTtcbiAgICAgICAgICAgIGNvbnN0IFQxID0gKEggKyBzaWdtYTEgKyBDaGkoRSwgRiwgRykgKyBTSEEyNTZfS1tpXSArIFNIQTI1Nl9XW2ldKSB8IDA7XG4gICAgICAgICAgICBjb25zdCBzaWdtYTAgPSByb3RyKEEsIDIpIF4gcm90cihBLCAxMykgXiByb3RyKEEsIDIyKTtcbiAgICAgICAgICAgIGNvbnN0IFQyID0gKHNpZ21hMCArIE1haihBLCBCLCBDKSkgfCAwO1xuICAgICAgICAgICAgSCA9IEc7XG4gICAgICAgICAgICBHID0gRjtcbiAgICAgICAgICAgIEYgPSBFO1xuICAgICAgICAgICAgRSA9IChEICsgVDEpIHwgMDtcbiAgICAgICAgICAgIEQgPSBDO1xuICAgICAgICAgICAgQyA9IEI7XG4gICAgICAgICAgICBCID0gQTtcbiAgICAgICAgICAgIEEgPSAoVDEgKyBUMikgfCAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCB0aGUgY29tcHJlc3NlZCBjaHVuayB0byB0aGUgY3VycmVudCBoYXNoIHZhbHVlXG4gICAgICAgIEEgPSAoQSArIHRoaXMuQSkgfCAwO1xuICAgICAgICBCID0gKEIgKyB0aGlzLkIpIHwgMDtcbiAgICAgICAgQyA9IChDICsgdGhpcy5DKSB8IDA7XG4gICAgICAgIEQgPSAoRCArIHRoaXMuRCkgfCAwO1xuICAgICAgICBFID0gKEUgKyB0aGlzLkUpIHwgMDtcbiAgICAgICAgRiA9IChGICsgdGhpcy5GKSB8IDA7XG4gICAgICAgIEcgPSAoRyArIHRoaXMuRykgfCAwO1xuICAgICAgICBIID0gKEggKyB0aGlzLkgpIHwgMDtcbiAgICAgICAgdGhpcy5zZXQoQSwgQiwgQywgRCwgRSwgRiwgRywgSCk7XG4gICAgfVxuICAgIHJvdW5kQ2xlYW4oKSB7XG4gICAgICAgIGNsZWFuKFNIQTI1Nl9XKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zZXQoMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCk7XG4gICAgICAgIGNsZWFuKHRoaXMuYnVmZmVyKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU0hBMjI0IGV4dGVuZHMgU0hBMjU2IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoMjgpO1xuICAgICAgICB0aGlzLkEgPSBTSEEyMjRfSVZbMF0gfCAwO1xuICAgICAgICB0aGlzLkIgPSBTSEEyMjRfSVZbMV0gfCAwO1xuICAgICAgICB0aGlzLkMgPSBTSEEyMjRfSVZbMl0gfCAwO1xuICAgICAgICB0aGlzLkQgPSBTSEEyMjRfSVZbM10gfCAwO1xuICAgICAgICB0aGlzLkUgPSBTSEEyMjRfSVZbNF0gfCAwO1xuICAgICAgICB0aGlzLkYgPSBTSEEyMjRfSVZbNV0gfCAwO1xuICAgICAgICB0aGlzLkcgPSBTSEEyMjRfSVZbNl0gfCAwO1xuICAgICAgICB0aGlzLkggPSBTSEEyMjRfSVZbN10gfCAwO1xuICAgIH1cbn1cbi8vIFNIQTItNTEyIGlzIHNsb3dlciB0aGFuIHNoYTI1NiBpbiBqcyBiZWNhdXNlIHU2NCBvcGVyYXRpb25zIGFyZSBzbG93LlxuLy8gUm91bmQgY29udGFudHNcbi8vIEZpcnN0IDMyIGJpdHMgb2YgdGhlIGZyYWN0aW9uYWwgcGFydHMgb2YgdGhlIGN1YmUgcm9vdHMgb2YgdGhlIGZpcnN0IDgwIHByaW1lcyAyLi40MDlcbi8vIHByZXR0aWVyLWlnbm9yZVxuY29uc3QgSzUxMiA9IC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4gdTY0LnNwbGl0KFtcbiAgICAnMHg0MjhhMmY5OGQ3MjhhZTIyJywgJzB4NzEzNzQ0OTEyM2VmNjVjZCcsICcweGI1YzBmYmNmZWM0ZDNiMmYnLCAnMHhlOWI1ZGJhNTgxODlkYmJjJyxcbiAgICAnMHgzOTU2YzI1YmYzNDhiNTM4JywgJzB4NTlmMTExZjFiNjA1ZDAxOScsICcweDkyM2Y4MmE0YWYxOTRmOWInLCAnMHhhYjFjNWVkNWRhNmQ4MTE4JyxcbiAgICAnMHhkODA3YWE5OGEzMDMwMjQyJywgJzB4MTI4MzViMDE0NTcwNmZiZScsICcweDI0MzE4NWJlNGVlNGIyOGMnLCAnMHg1NTBjN2RjM2Q1ZmZiNGUyJyxcbiAgICAnMHg3MmJlNWQ3NGYyN2I4OTZmJywgJzB4ODBkZWIxZmUzYjE2OTZiMScsICcweDliZGMwNmE3MjVjNzEyMzUnLCAnMHhjMTliZjE3NGNmNjkyNjk0JyxcbiAgICAnMHhlNDliNjljMTllZjE0YWQyJywgJzB4ZWZiZTQ3ODYzODRmMjVlMycsICcweDBmYzE5ZGM2OGI4Y2Q1YjUnLCAnMHgyNDBjYTFjYzc3YWM5YzY1JyxcbiAgICAnMHgyZGU5MmM2ZjU5MmIwMjc1JywgJzB4NGE3NDg0YWE2ZWE2ZTQ4MycsICcweDVjYjBhOWRjYmQ0MWZiZDQnLCAnMHg3NmY5ODhkYTgzMTE1M2I1JyxcbiAgICAnMHg5ODNlNTE1MmVlNjZkZmFiJywgJzB4YTgzMWM2NmQyZGI0MzIxMCcsICcweGIwMDMyN2M4OThmYjIxM2YnLCAnMHhiZjU5N2ZjN2JlZWYwZWU0JyxcbiAgICAnMHhjNmUwMGJmMzNkYTg4ZmMyJywgJzB4ZDVhNzkxNDc5MzBhYTcyNScsICcweDA2Y2E2MzUxZTAwMzgyNmYnLCAnMHgxNDI5Mjk2NzBhMGU2ZTcwJyxcbiAgICAnMHgyN2I3MGE4NTQ2ZDIyZmZjJywgJzB4MmUxYjIxMzg1YzI2YzkyNicsICcweDRkMmM2ZGZjNWFjNDJhZWQnLCAnMHg1MzM4MGQxMzlkOTViM2RmJyxcbiAgICAnMHg2NTBhNzM1NDhiYWY2M2RlJywgJzB4NzY2YTBhYmIzYzc3YjJhOCcsICcweDgxYzJjOTJlNDdlZGFlZTYnLCAnMHg5MjcyMmM4NTE0ODIzNTNiJyxcbiAgICAnMHhhMmJmZThhMTRjZjEwMzY0JywgJzB4YTgxYTY2NGJiYzQyMzAwMScsICcweGMyNGI4YjcwZDBmODk3OTEnLCAnMHhjNzZjNTFhMzA2NTRiZTMwJyxcbiAgICAnMHhkMTkyZTgxOWQ2ZWY1MjE4JywgJzB4ZDY5OTA2MjQ1NTY1YTkxMCcsICcweGY0MGUzNTg1NTc3MTIwMmEnLCAnMHgxMDZhYTA3MDMyYmJkMWI4JyxcbiAgICAnMHgxOWE0YzExNmI4ZDJkMGM4JywgJzB4MWUzNzZjMDg1MTQxYWI1MycsICcweDI3NDg3NzRjZGY4ZWViOTknLCAnMHgzNGIwYmNiNWUxOWI0OGE4JyxcbiAgICAnMHgzOTFjMGNiM2M1Yzk1YTYzJywgJzB4NGVkOGFhNGFlMzQxOGFjYicsICcweDViOWNjYTRmNzc2M2UzNzMnLCAnMHg2ODJlNmZmM2Q2YjJiOGEzJyxcbiAgICAnMHg3NDhmODJlZTVkZWZiMmZjJywgJzB4NzhhNTYzNmY0MzE3MmY2MCcsICcweDg0Yzg3ODE0YTFmMGFiNzInLCAnMHg4Y2M3MDIwODFhNjQzOWVjJyxcbiAgICAnMHg5MGJlZmZmYTIzNjMxZTI4JywgJzB4YTQ1MDZjZWJkZTgyYmRlOScsICcweGJlZjlhM2Y3YjJjNjc5MTUnLCAnMHhjNjcxNzhmMmUzNzI1MzJiJyxcbiAgICAnMHhjYTI3M2VjZWVhMjY2MTljJywgJzB4ZDE4NmI4YzcyMWMwYzIwNycsICcweGVhZGE3ZGQ2Y2RlMGViMWUnLCAnMHhmNTdkNGY3ZmVlNmVkMTc4JyxcbiAgICAnMHgwNmYwNjdhYTcyMTc2ZmJhJywgJzB4MGE2MzdkYzVhMmM4OThhNicsICcweDExM2Y5ODA0YmVmOTBkYWUnLCAnMHgxYjcxMGIzNTEzMWM0NzFiJyxcbiAgICAnMHgyOGRiNzdmNTIzMDQ3ZDg0JywgJzB4MzJjYWFiN2I0MGM3MjQ5MycsICcweDNjOWViZTBhMTVjOWJlYmMnLCAnMHg0MzFkNjdjNDljMTAwZDRjJyxcbiAgICAnMHg0Y2M1ZDRiZWNiM2U0MmI2JywgJzB4NTk3ZjI5OWNmYzY1N2UyYScsICcweDVmY2I2ZmFiM2FkNmZhZWMnLCAnMHg2YzQ0MTk4YzRhNDc1ODE3J1xuXS5tYXAobiA9PiBCaWdJbnQobikpKSkoKTtcbmNvbnN0IFNIQTUxMl9LaCA9IC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4gSzUxMlswXSkoKTtcbmNvbnN0IFNIQTUxMl9LbCA9IC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4gSzUxMlsxXSkoKTtcbi8vIFJldXNhYmxlIHRlbXBvcmFyeSBidWZmZXJzXG5jb25zdCBTSEE1MTJfV19IID0gLyogQF9fUFVSRV9fICovIG5ldyBVaW50MzJBcnJheSg4MCk7XG5jb25zdCBTSEE1MTJfV19MID0gLyogQF9fUFVSRV9fICovIG5ldyBVaW50MzJBcnJheSg4MCk7XG5leHBvcnQgY2xhc3MgU0hBNTEyIGV4dGVuZHMgSGFzaE1EIHtcbiAgICBjb25zdHJ1Y3RvcihvdXRwdXRMZW4gPSA2NCkge1xuICAgICAgICBzdXBlcigxMjgsIG91dHB1dExlbiwgMTYsIGZhbHNlKTtcbiAgICAgICAgLy8gV2UgY2Fubm90IHVzZSBhcnJheSBoZXJlIHNpbmNlIGFycmF5IGFsbG93cyBpbmRleGluZyBieSB2YXJpYWJsZVxuICAgICAgICAvLyB3aGljaCBtZWFucyBvcHRpbWl6ZXIvY29tcGlsZXIgY2Fubm90IHVzZSByZWdpc3RlcnMuXG4gICAgICAgIC8vIGggLS0gaGlnaCAzMiBiaXRzLCBsIC0tIGxvdyAzMiBiaXRzXG4gICAgICAgIHRoaXMuQWggPSBTSEE1MTJfSVZbMF0gfCAwO1xuICAgICAgICB0aGlzLkFsID0gU0hBNTEyX0lWWzFdIHwgMDtcbiAgICAgICAgdGhpcy5CaCA9IFNIQTUxMl9JVlsyXSB8IDA7XG4gICAgICAgIHRoaXMuQmwgPSBTSEE1MTJfSVZbM10gfCAwO1xuICAgICAgICB0aGlzLkNoID0gU0hBNTEyX0lWWzRdIHwgMDtcbiAgICAgICAgdGhpcy5DbCA9IFNIQTUxMl9JVls1XSB8IDA7XG4gICAgICAgIHRoaXMuRGggPSBTSEE1MTJfSVZbNl0gfCAwO1xuICAgICAgICB0aGlzLkRsID0gU0hBNTEyX0lWWzddIHwgMDtcbiAgICAgICAgdGhpcy5FaCA9IFNIQTUxMl9JVls4XSB8IDA7XG4gICAgICAgIHRoaXMuRWwgPSBTSEE1MTJfSVZbOV0gfCAwO1xuICAgICAgICB0aGlzLkZoID0gU0hBNTEyX0lWWzEwXSB8IDA7XG4gICAgICAgIHRoaXMuRmwgPSBTSEE1MTJfSVZbMTFdIHwgMDtcbiAgICAgICAgdGhpcy5HaCA9IFNIQTUxMl9JVlsxMl0gfCAwO1xuICAgICAgICB0aGlzLkdsID0gU0hBNTEyX0lWWzEzXSB8IDA7XG4gICAgICAgIHRoaXMuSGggPSBTSEE1MTJfSVZbMTRdIHwgMDtcbiAgICAgICAgdGhpcy5IbCA9IFNIQTUxMl9JVlsxNV0gfCAwO1xuICAgIH1cbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICBnZXQoKSB7XG4gICAgICAgIGNvbnN0IHsgQWgsIEFsLCBCaCwgQmwsIENoLCBDbCwgRGgsIERsLCBFaCwgRWwsIEZoLCBGbCwgR2gsIEdsLCBIaCwgSGwgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBbQWgsIEFsLCBCaCwgQmwsIENoLCBDbCwgRGgsIERsLCBFaCwgRWwsIEZoLCBGbCwgR2gsIEdsLCBIaCwgSGxdO1xuICAgIH1cbiAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICBzZXQoQWgsIEFsLCBCaCwgQmwsIENoLCBDbCwgRGgsIERsLCBFaCwgRWwsIEZoLCBGbCwgR2gsIEdsLCBIaCwgSGwpIHtcbiAgICAgICAgdGhpcy5BaCA9IEFoIHwgMDtcbiAgICAgICAgdGhpcy5BbCA9IEFsIHwgMDtcbiAgICAgICAgdGhpcy5CaCA9IEJoIHwgMDtcbiAgICAgICAgdGhpcy5CbCA9IEJsIHwgMDtcbiAgICAgICAgdGhpcy5DaCA9IENoIHwgMDtcbiAgICAgICAgdGhpcy5DbCA9IENsIHwgMDtcbiAgICAgICAgdGhpcy5EaCA9IERoIHwgMDtcbiAgICAgICAgdGhpcy5EbCA9IERsIHwgMDtcbiAgICAgICAgdGhpcy5FaCA9IEVoIHwgMDtcbiAgICAgICAgdGhpcy5FbCA9IEVsIHwgMDtcbiAgICAgICAgdGhpcy5GaCA9IEZoIHwgMDtcbiAgICAgICAgdGhpcy5GbCA9IEZsIHwgMDtcbiAgICAgICAgdGhpcy5HaCA9IEdoIHwgMDtcbiAgICAgICAgdGhpcy5HbCA9IEdsIHwgMDtcbiAgICAgICAgdGhpcy5IaCA9IEhoIHwgMDtcbiAgICAgICAgdGhpcy5IbCA9IEhsIHwgMDtcbiAgICB9XG4gICAgcHJvY2Vzcyh2aWV3LCBvZmZzZXQpIHtcbiAgICAgICAgLy8gRXh0ZW5kIHRoZSBmaXJzdCAxNiB3b3JkcyBpbnRvIHRoZSByZW1haW5pbmcgNjQgd29yZHMgd1sxNi4uNzldIG9mIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGFycmF5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKywgb2Zmc2V0ICs9IDQpIHtcbiAgICAgICAgICAgIFNIQTUxMl9XX0hbaV0gPSB2aWV3LmdldFVpbnQzMihvZmZzZXQpO1xuICAgICAgICAgICAgU0hBNTEyX1dfTFtpXSA9IHZpZXcuZ2V0VWludDMyKChvZmZzZXQgKz0gNCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcbiAgICAgICAgICAgIC8vIHMwIDo9ICh3W2ktMTVdIHJpZ2h0cm90YXRlIDEpIHhvciAod1tpLTE1XSByaWdodHJvdGF0ZSA4KSB4b3IgKHdbaS0xNV0gcmlnaHRzaGlmdCA3KVxuICAgICAgICAgICAgY29uc3QgVzE1aCA9IFNIQTUxMl9XX0hbaSAtIDE1XSB8IDA7XG4gICAgICAgICAgICBjb25zdCBXMTVsID0gU0hBNTEyX1dfTFtpIC0gMTVdIHwgMDtcbiAgICAgICAgICAgIGNvbnN0IHMwaCA9IHU2NC5yb3RyU0goVzE1aCwgVzE1bCwgMSkgXiB1NjQucm90clNIKFcxNWgsIFcxNWwsIDgpIF4gdTY0LnNoclNIKFcxNWgsIFcxNWwsIDcpO1xuICAgICAgICAgICAgY29uc3QgczBsID0gdTY0LnJvdHJTTChXMTVoLCBXMTVsLCAxKSBeIHU2NC5yb3RyU0woVzE1aCwgVzE1bCwgOCkgXiB1NjQuc2hyU0woVzE1aCwgVzE1bCwgNyk7XG4gICAgICAgICAgICAvLyBzMSA6PSAod1tpLTJdIHJpZ2h0cm90YXRlIDE5KSB4b3IgKHdbaS0yXSByaWdodHJvdGF0ZSA2MSkgeG9yICh3W2ktMl0gcmlnaHRzaGlmdCA2KVxuICAgICAgICAgICAgY29uc3QgVzJoID0gU0hBNTEyX1dfSFtpIC0gMl0gfCAwO1xuICAgICAgICAgICAgY29uc3QgVzJsID0gU0hBNTEyX1dfTFtpIC0gMl0gfCAwO1xuICAgICAgICAgICAgY29uc3QgczFoID0gdTY0LnJvdHJTSChXMmgsIFcybCwgMTkpIF4gdTY0LnJvdHJCSChXMmgsIFcybCwgNjEpIF4gdTY0LnNoclNIKFcyaCwgVzJsLCA2KTtcbiAgICAgICAgICAgIGNvbnN0IHMxbCA9IHU2NC5yb3RyU0woVzJoLCBXMmwsIDE5KSBeIHU2NC5yb3RyQkwoVzJoLCBXMmwsIDYxKSBeIHU2NC5zaHJTTChXMmgsIFcybCwgNik7XG4gICAgICAgICAgICAvLyBTSEEyNTZfV1tpXSA9IHMwICsgczEgKyBTSEEyNTZfV1tpIC0gN10gKyBTSEEyNTZfV1tpIC0gMTZdO1xuICAgICAgICAgICAgY29uc3QgU1VNbCA9IHU2NC5hZGQ0TChzMGwsIHMxbCwgU0hBNTEyX1dfTFtpIC0gN10sIFNIQTUxMl9XX0xbaSAtIDE2XSk7XG4gICAgICAgICAgICBjb25zdCBTVU1oID0gdTY0LmFkZDRIKFNVTWwsIHMwaCwgczFoLCBTSEE1MTJfV19IW2kgLSA3XSwgU0hBNTEyX1dfSFtpIC0gMTZdKTtcbiAgICAgICAgICAgIFNIQTUxMl9XX0hbaV0gPSBTVU1oIHwgMDtcbiAgICAgICAgICAgIFNIQTUxMl9XX0xbaV0gPSBTVU1sIHwgMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeyBBaCwgQWwsIEJoLCBCbCwgQ2gsIENsLCBEaCwgRGwsIEVoLCBFbCwgRmgsIEZsLCBHaCwgR2wsIEhoLCBIbCB9ID0gdGhpcztcbiAgICAgICAgLy8gQ29tcHJlc3Npb24gZnVuY3Rpb24gbWFpbiBsb29wLCA4MCByb3VuZHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBTMSA6PSAoZSByaWdodHJvdGF0ZSAxNCkgeG9yIChlIHJpZ2h0cm90YXRlIDE4KSB4b3IgKGUgcmlnaHRyb3RhdGUgNDEpXG4gICAgICAgICAgICBjb25zdCBzaWdtYTFoID0gdTY0LnJvdHJTSChFaCwgRWwsIDE0KSBeIHU2NC5yb3RyU0goRWgsIEVsLCAxOCkgXiB1NjQucm90ckJIKEVoLCBFbCwgNDEpO1xuICAgICAgICAgICAgY29uc3Qgc2lnbWExbCA9IHU2NC5yb3RyU0woRWgsIEVsLCAxNCkgXiB1NjQucm90clNMKEVoLCBFbCwgMTgpIF4gdTY0LnJvdHJCTChFaCwgRWwsIDQxKTtcbiAgICAgICAgICAgIC8vY29uc3QgVDEgPSAoSCArIHNpZ21hMSArIENoaShFLCBGLCBHKSArIFNIQTI1Nl9LW2ldICsgU0hBMjU2X1dbaV0pIHwgMDtcbiAgICAgICAgICAgIGNvbnN0IENISWggPSAoRWggJiBGaCkgXiAofkVoICYgR2gpO1xuICAgICAgICAgICAgY29uc3QgQ0hJbCA9IChFbCAmIEZsKSBeICh+RWwgJiBHbCk7XG4gICAgICAgICAgICAvLyBUMSA9IEggKyBzaWdtYTEgKyBDaGkoRSwgRiwgRykgKyBTSEE1MTJfS1tpXSArIFNIQTUxMl9XW2ldXG4gICAgICAgICAgICAvLyBwcmV0dGllci1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IFQxbGwgPSB1NjQuYWRkNUwoSGwsIHNpZ21hMWwsIENISWwsIFNIQTUxMl9LbFtpXSwgU0hBNTEyX1dfTFtpXSk7XG4gICAgICAgICAgICBjb25zdCBUMWggPSB1NjQuYWRkNUgoVDFsbCwgSGgsIHNpZ21hMWgsIENISWgsIFNIQTUxMl9LaFtpXSwgU0hBNTEyX1dfSFtpXSk7XG4gICAgICAgICAgICBjb25zdCBUMWwgPSBUMWxsIHwgMDtcbiAgICAgICAgICAgIC8vIFMwIDo9IChhIHJpZ2h0cm90YXRlIDI4KSB4b3IgKGEgcmlnaHRyb3RhdGUgMzQpIHhvciAoYSByaWdodHJvdGF0ZSAzOSlcbiAgICAgICAgICAgIGNvbnN0IHNpZ21hMGggPSB1NjQucm90clNIKEFoLCBBbCwgMjgpIF4gdTY0LnJvdHJCSChBaCwgQWwsIDM0KSBeIHU2NC5yb3RyQkgoQWgsIEFsLCAzOSk7XG4gICAgICAgICAgICBjb25zdCBzaWdtYTBsID0gdTY0LnJvdHJTTChBaCwgQWwsIDI4KSBeIHU2NC5yb3RyQkwoQWgsIEFsLCAzNCkgXiB1NjQucm90ckJMKEFoLCBBbCwgMzkpO1xuICAgICAgICAgICAgY29uc3QgTUFKaCA9IChBaCAmIEJoKSBeIChBaCAmIENoKSBeIChCaCAmIENoKTtcbiAgICAgICAgICAgIGNvbnN0IE1BSmwgPSAoQWwgJiBCbCkgXiAoQWwgJiBDbCkgXiAoQmwgJiBDbCk7XG4gICAgICAgICAgICBIaCA9IEdoIHwgMDtcbiAgICAgICAgICAgIEhsID0gR2wgfCAwO1xuICAgICAgICAgICAgR2ggPSBGaCB8IDA7XG4gICAgICAgICAgICBHbCA9IEZsIHwgMDtcbiAgICAgICAgICAgIEZoID0gRWggfCAwO1xuICAgICAgICAgICAgRmwgPSBFbCB8IDA7XG4gICAgICAgICAgICAoeyBoOiBFaCwgbDogRWwgfSA9IHU2NC5hZGQoRGggfCAwLCBEbCB8IDAsIFQxaCB8IDAsIFQxbCB8IDApKTtcbiAgICAgICAgICAgIERoID0gQ2ggfCAwO1xuICAgICAgICAgICAgRGwgPSBDbCB8IDA7XG4gICAgICAgICAgICBDaCA9IEJoIHwgMDtcbiAgICAgICAgICAgIENsID0gQmwgfCAwO1xuICAgICAgICAgICAgQmggPSBBaCB8IDA7XG4gICAgICAgICAgICBCbCA9IEFsIHwgMDtcbiAgICAgICAgICAgIGNvbnN0IEFsbCA9IHU2NC5hZGQzTChUMWwsIHNpZ21hMGwsIE1BSmwpO1xuICAgICAgICAgICAgQWggPSB1NjQuYWRkM0goQWxsLCBUMWgsIHNpZ21hMGgsIE1BSmgpO1xuICAgICAgICAgICAgQWwgPSBBbGwgfCAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCB0aGUgY29tcHJlc3NlZCBjaHVuayB0byB0aGUgY3VycmVudCBoYXNoIHZhbHVlXG4gICAgICAgICh7IGg6IEFoLCBsOiBBbCB9ID0gdTY0LmFkZCh0aGlzLkFoIHwgMCwgdGhpcy5BbCB8IDAsIEFoIHwgMCwgQWwgfCAwKSk7XG4gICAgICAgICh7IGg6IEJoLCBsOiBCbCB9ID0gdTY0LmFkZCh0aGlzLkJoIHwgMCwgdGhpcy5CbCB8IDAsIEJoIHwgMCwgQmwgfCAwKSk7XG4gICAgICAgICh7IGg6IENoLCBsOiBDbCB9ID0gdTY0LmFkZCh0aGlzLkNoIHwgMCwgdGhpcy5DbCB8IDAsIENoIHwgMCwgQ2wgfCAwKSk7XG4gICAgICAgICh7IGg6IERoLCBsOiBEbCB9ID0gdTY0LmFkZCh0aGlzLkRoIHwgMCwgdGhpcy5EbCB8IDAsIERoIHwgMCwgRGwgfCAwKSk7XG4gICAgICAgICh7IGg6IEVoLCBsOiBFbCB9ID0gdTY0LmFkZCh0aGlzLkVoIHwgMCwgdGhpcy5FbCB8IDAsIEVoIHwgMCwgRWwgfCAwKSk7XG4gICAgICAgICh7IGg6IEZoLCBsOiBGbCB9ID0gdTY0LmFkZCh0aGlzLkZoIHwgMCwgdGhpcy5GbCB8IDAsIEZoIHwgMCwgRmwgfCAwKSk7XG4gICAgICAgICh7IGg6IEdoLCBsOiBHbCB9ID0gdTY0LmFkZCh0aGlzLkdoIHwgMCwgdGhpcy5HbCB8IDAsIEdoIHwgMCwgR2wgfCAwKSk7XG4gICAgICAgICh7IGg6IEhoLCBsOiBIbCB9ID0gdTY0LmFkZCh0aGlzLkhoIHwgMCwgdGhpcy5IbCB8IDAsIEhoIHwgMCwgSGwgfCAwKSk7XG4gICAgICAgIHRoaXMuc2V0KEFoLCBBbCwgQmgsIEJsLCBDaCwgQ2wsIERoLCBEbCwgRWgsIEVsLCBGaCwgRmwsIEdoLCBHbCwgSGgsIEhsKTtcbiAgICB9XG4gICAgcm91bmRDbGVhbigpIHtcbiAgICAgICAgY2xlYW4oU0hBNTEyX1dfSCwgU0hBNTEyX1dfTCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNsZWFuKHRoaXMuYnVmZmVyKTtcbiAgICAgICAgdGhpcy5zZXQoMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNIQTM4NCBleHRlbmRzIFNIQTUxMiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKDQ4KTtcbiAgICAgICAgdGhpcy5BaCA9IFNIQTM4NF9JVlswXSB8IDA7XG4gICAgICAgIHRoaXMuQWwgPSBTSEEzODRfSVZbMV0gfCAwO1xuICAgICAgICB0aGlzLkJoID0gU0hBMzg0X0lWWzJdIHwgMDtcbiAgICAgICAgdGhpcy5CbCA9IFNIQTM4NF9JVlszXSB8IDA7XG4gICAgICAgIHRoaXMuQ2ggPSBTSEEzODRfSVZbNF0gfCAwO1xuICAgICAgICB0aGlzLkNsID0gU0hBMzg0X0lWWzVdIHwgMDtcbiAgICAgICAgdGhpcy5EaCA9IFNIQTM4NF9JVls2XSB8IDA7XG4gICAgICAgIHRoaXMuRGwgPSBTSEEzODRfSVZbN10gfCAwO1xuICAgICAgICB0aGlzLkVoID0gU0hBMzg0X0lWWzhdIHwgMDtcbiAgICAgICAgdGhpcy5FbCA9IFNIQTM4NF9JVls5XSB8IDA7XG4gICAgICAgIHRoaXMuRmggPSBTSEEzODRfSVZbMTBdIHwgMDtcbiAgICAgICAgdGhpcy5GbCA9IFNIQTM4NF9JVlsxMV0gfCAwO1xuICAgICAgICB0aGlzLkdoID0gU0hBMzg0X0lWWzEyXSB8IDA7XG4gICAgICAgIHRoaXMuR2wgPSBTSEEzODRfSVZbMTNdIHwgMDtcbiAgICAgICAgdGhpcy5IaCA9IFNIQTM4NF9JVlsxNF0gfCAwO1xuICAgICAgICB0aGlzLkhsID0gU0hBMzg0X0lWWzE1XSB8IDA7XG4gICAgfVxufVxuLyoqXG4gKiBUcnVuY2F0ZWQgU0hBNTEyLzI1NiBhbmQgU0hBNTEyLzIyNC5cbiAqIFNIQTUxMl9JViBpcyBYT1JlZCB3aXRoIDB4YTVhNWE1YTVhNWE1YTVhNSwgdGhlbiB1c2VkIGFzIFwiaW50ZXJtZWRpYXJ5XCIgSVYgb2YgU0hBNTEyL3QuXG4gKiBUaGVuIHQgaGFzaGVzIHN0cmluZyB0byBwcm9kdWNlIHJlc3VsdCBJVi5cbiAqIFNlZSBgdGVzdC9taXNjL3NoYTItZ2VuLWl2LmpzYC5cbiAqL1xuLyoqIFNIQTUxMi8yMjQgSVYgKi9cbmNvbnN0IFQyMjRfSVYgPSAvKiBAX19QVVJFX18gKi8gVWludDMyQXJyYXkuZnJvbShbXG4gICAgMHg4YzNkMzdjOCwgMHgxOTU0NGRhMiwgMHg3M2UxOTk2NiwgMHg4OWRjZDRkNiwgMHgxZGZhYjdhZSwgMHgzMmZmOWM4MiwgMHg2NzlkZDUxNCwgMHg1ODJmOWZjZixcbiAgICAweDBmNmQyYjY5LCAweDdiZDQ0ZGE4LCAweDc3ZTM2ZjczLCAweDA0YzQ4OTQyLCAweDNmOWQ4NWE4LCAweDZhMWQzNmM4LCAweDExMTJlNmFkLCAweDkxZDY5MmExLFxuXSk7XG4vKiogU0hBNTEyLzI1NiBJViAqL1xuY29uc3QgVDI1Nl9JViA9IC8qIEBfX1BVUkVfXyAqLyBVaW50MzJBcnJheS5mcm9tKFtcbiAgICAweDIyMzEyMTk0LCAweGZjMmJmNzJjLCAweDlmNTU1ZmEzLCAweGM4NGM2NGMyLCAweDIzOTNiODZiLCAweDZmNTNiMTUxLCAweDk2Mzg3NzE5LCAweDU5NDBlYWJkLFxuICAgIDB4OTYyODNlZTIsIDB4YTg4ZWZmZTMsIDB4YmU1ZTFlMjUsIDB4NTM4NjM5OTIsIDB4MmIwMTk5ZmMsIDB4MmM4NWI4YWEsIDB4MGViNzJkZGMsIDB4ODFjNTJjYTIsXG5dKTtcbmV4cG9ydCBjbGFzcyBTSEE1MTJfMjI0IGV4dGVuZHMgU0hBNTEyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoMjgpO1xuICAgICAgICB0aGlzLkFoID0gVDIyNF9JVlswXSB8IDA7XG4gICAgICAgIHRoaXMuQWwgPSBUMjI0X0lWWzFdIHwgMDtcbiAgICAgICAgdGhpcy5CaCA9IFQyMjRfSVZbMl0gfCAwO1xuICAgICAgICB0aGlzLkJsID0gVDIyNF9JVlszXSB8IDA7XG4gICAgICAgIHRoaXMuQ2ggPSBUMjI0X0lWWzRdIHwgMDtcbiAgICAgICAgdGhpcy5DbCA9IFQyMjRfSVZbNV0gfCAwO1xuICAgICAgICB0aGlzLkRoID0gVDIyNF9JVls2XSB8IDA7XG4gICAgICAgIHRoaXMuRGwgPSBUMjI0X0lWWzddIHwgMDtcbiAgICAgICAgdGhpcy5FaCA9IFQyMjRfSVZbOF0gfCAwO1xuICAgICAgICB0aGlzLkVsID0gVDIyNF9JVls5XSB8IDA7XG4gICAgICAgIHRoaXMuRmggPSBUMjI0X0lWWzEwXSB8IDA7XG4gICAgICAgIHRoaXMuRmwgPSBUMjI0X0lWWzExXSB8IDA7XG4gICAgICAgIHRoaXMuR2ggPSBUMjI0X0lWWzEyXSB8IDA7XG4gICAgICAgIHRoaXMuR2wgPSBUMjI0X0lWWzEzXSB8IDA7XG4gICAgICAgIHRoaXMuSGggPSBUMjI0X0lWWzE0XSB8IDA7XG4gICAgICAgIHRoaXMuSGwgPSBUMjI0X0lWWzE1XSB8IDA7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNIQTUxMl8yNTYgZXh0ZW5kcyBTSEE1MTIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigzMik7XG4gICAgICAgIHRoaXMuQWggPSBUMjU2X0lWWzBdIHwgMDtcbiAgICAgICAgdGhpcy5BbCA9IFQyNTZfSVZbMV0gfCAwO1xuICAgICAgICB0aGlzLkJoID0gVDI1Nl9JVlsyXSB8IDA7XG4gICAgICAgIHRoaXMuQmwgPSBUMjU2X0lWWzNdIHwgMDtcbiAgICAgICAgdGhpcy5DaCA9IFQyNTZfSVZbNF0gfCAwO1xuICAgICAgICB0aGlzLkNsID0gVDI1Nl9JVls1XSB8IDA7XG4gICAgICAgIHRoaXMuRGggPSBUMjU2X0lWWzZdIHwgMDtcbiAgICAgICAgdGhpcy5EbCA9IFQyNTZfSVZbN10gfCAwO1xuICAgICAgICB0aGlzLkVoID0gVDI1Nl9JVls4XSB8IDA7XG4gICAgICAgIHRoaXMuRWwgPSBUMjU2X0lWWzldIHwgMDtcbiAgICAgICAgdGhpcy5GaCA9IFQyNTZfSVZbMTBdIHwgMDtcbiAgICAgICAgdGhpcy5GbCA9IFQyNTZfSVZbMTFdIHwgMDtcbiAgICAgICAgdGhpcy5HaCA9IFQyNTZfSVZbMTJdIHwgMDtcbiAgICAgICAgdGhpcy5HbCA9IFQyNTZfSVZbMTNdIHwgMDtcbiAgICAgICAgdGhpcy5IaCA9IFQyNTZfSVZbMTRdIHwgMDtcbiAgICAgICAgdGhpcy5IbCA9IFQyNTZfSVZbMTVdIHwgMDtcbiAgICB9XG59XG4vKipcbiAqIFNIQTItMjU2IGhhc2ggZnVuY3Rpb24gZnJvbSBSRkMgNDYzNC5cbiAqXG4gKiBJdCBpcyB0aGUgZmFzdGVzdCBKUyBoYXNoLCBldmVuIGZhc3RlciB0aGFuIEJsYWtlMy5cbiAqIFRvIGJyZWFrIHNoYTI1NiB1c2luZyBiaXJ0aGRheSBhdHRhY2ssIGF0dGFja2VycyBuZWVkIHRvIHRyeSAyXjEyOCBoYXNoZXMuXG4gKiBCVEMgbmV0d29yayBpcyBkb2luZyAyXjcwIGhhc2hlcy9zZWMgKDJeOTUgaGFzaGVzL3llYXIpIGFzIHBlciAyMDI1LlxuICovXG5leHBvcnQgY29uc3Qgc2hhMjU2ID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZUhhc2hlcigoKSA9PiBuZXcgU0hBMjU2KCkpO1xuLyoqIFNIQTItMjI0IGhhc2ggZnVuY3Rpb24gZnJvbSBSRkMgNDYzNCAqL1xuZXhwb3J0IGNvbnN0IHNoYTIyNCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVIYXNoZXIoKCkgPT4gbmV3IFNIQTIyNCgpKTtcbi8qKiBTSEEyLTUxMiBoYXNoIGZ1bmN0aW9uIGZyb20gUkZDIDQ2MzQuICovXG5leHBvcnQgY29uc3Qgc2hhNTEyID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZUhhc2hlcigoKSA9PiBuZXcgU0hBNTEyKCkpO1xuLyoqIFNIQTItMzg0IGhhc2ggZnVuY3Rpb24gZnJvbSBSRkMgNDYzNC4gKi9cbmV4cG9ydCBjb25zdCBzaGEzODQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlSGFzaGVyKCgpID0+IG5ldyBTSEEzODQoKSk7XG4vKipcbiAqIFNIQTItNTEyLzI1NiBcInRydW5jYXRlZFwiIGhhc2ggZnVuY3Rpb24sIHdpdGggaW1wcm92ZWQgcmVzaXN0YW5jZSB0byBsZW5ndGggZXh0ZW5zaW9uIGF0dGFja3MuXG4gKiBTZWUgdGhlIHBhcGVyIG9uIFt0cnVuY2F0ZWQgU0hBNTEyXShodHRwczovL2VwcmludC5pYWNyLm9yZy8yMDEwLzU0OC5wZGYpLlxuICovXG5leHBvcnQgY29uc3Qgc2hhNTEyXzI1NiA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVIYXNoZXIoKCkgPT4gbmV3IFNIQTUxMl8yNTYoKSk7XG4vKipcbiAqIFNIQTItNTEyLzIyNCBcInRydW5jYXRlZFwiIGhhc2ggZnVuY3Rpb24sIHdpdGggaW1wcm92ZWQgcmVzaXN0YW5jZSB0byBsZW5ndGggZXh0ZW5zaW9uIGF0dGFja3MuXG4gKiBTZWUgdGhlIHBhcGVyIG9uIFt0cnVuY2F0ZWQgU0hBNTEyXShodHRwczovL2VwcmludC5pYWNyLm9yZy8yMDEwLzU0OC5wZGYpLlxuICovXG5leHBvcnQgY29uc3Qgc2hhNTEyXzIyNCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVIYXNoZXIoKCkgPT4gbmV3IFNIQTUxMl8yMjQoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGEyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/sha2.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/sha256.js":
/*!**************************************************!*\
  !*** ./node_modules/@noble/hashes/esm/sha256.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SHA224: () => (/* binding */ SHA224),\n/* harmony export */   SHA256: () => (/* binding */ SHA256),\n/* harmony export */   sha224: () => (/* binding */ sha224),\n/* harmony export */   sha256: () => (/* binding */ sha256)\n/* harmony export */ });\n/* harmony import */ var _sha2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sha2.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/sha2.js\");\n/**\n * SHA2-256 a.k.a. sha256. In JS, it is the fastest hash, even faster than Blake3.\n *\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n *\n * Check out [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n * @deprecated\n */\n\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst SHA256 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.SHA256;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst sha256 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.sha256;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst SHA224 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.SHA224;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst sha224 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.sha224;\n//# sourceMappingURL=sha256.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9zaGEyNTYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN3RztBQUN4RztBQUNPLGVBQWUsNENBQU87QUFDN0I7QUFDTyxlQUFlLDRDQUFPO0FBQzdCO0FBQ08sZUFBZSw0Q0FBTztBQUM3QjtBQUNPLGVBQWUsNENBQU87QUFDN0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvQG5vYmxlL2hhc2hlcy9lc20vc2hhMjU2LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU0hBMi0yNTYgYS5rLmEuIHNoYTI1Ni4gSW4gSlMsIGl0IGlzIHRoZSBmYXN0ZXN0IGhhc2gsIGV2ZW4gZmFzdGVyIHRoYW4gQmxha2UzLlxuICpcbiAqIFRvIGJyZWFrIHNoYTI1NiB1c2luZyBiaXJ0aGRheSBhdHRhY2ssIGF0dGFja2VycyBuZWVkIHRvIHRyeSAyXjEyOCBoYXNoZXMuXG4gKiBCVEMgbmV0d29yayBpcyBkb2luZyAyXjcwIGhhc2hlcy9zZWMgKDJeOTUgaGFzaGVzL3llYXIpIGFzIHBlciAyMDI1LlxuICpcbiAqIENoZWNrIG91dCBbRklQUyAxODAtNF0oaHR0cHM6Ly9udmxwdWJzLm5pc3QuZ292L25pc3RwdWJzL0ZJUFMvTklTVC5GSVBTLjE4MC00LnBkZikuXG4gKiBAbW9kdWxlXG4gKiBAZGVwcmVjYXRlZFxuICovXG5pbXBvcnQgeyBTSEEyMjQgYXMgU0hBMjI0biwgc2hhMjI0IGFzIHNoYTIyNG4sIFNIQTI1NiBhcyBTSEEyNTZuLCBzaGEyNTYgYXMgc2hhMjU2biwgfSBmcm9tIFwiLi9zaGEyLmpzXCI7XG4vKiogQGRlcHJlY2F0ZWQgVXNlIGltcG9ydCBmcm9tIGBub2JsZS9oYXNoZXMvc2hhMmAgbW9kdWxlICovXG5leHBvcnQgY29uc3QgU0hBMjU2ID0gU0hBMjU2bjtcbi8qKiBAZGVwcmVjYXRlZCBVc2UgaW1wb3J0IGZyb20gYG5vYmxlL2hhc2hlcy9zaGEyYCBtb2R1bGUgKi9cbmV4cG9ydCBjb25zdCBzaGEyNTYgPSBzaGEyNTZuO1xuLyoqIEBkZXByZWNhdGVkIFVzZSBpbXBvcnQgZnJvbSBgbm9ibGUvaGFzaGVzL3NoYTJgIG1vZHVsZSAqL1xuZXhwb3J0IGNvbnN0IFNIQTIyNCA9IFNIQTIyNG47XG4vKiogQGRlcHJlY2F0ZWQgVXNlIGltcG9ydCBmcm9tIGBub2JsZS9oYXNoZXMvc2hhMmAgbW9kdWxlICovXG5leHBvcnQgY29uc3Qgc2hhMjI0ID0gc2hhMjI0bjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYTI1Ni5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/sha256.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/sha512.js":
/*!**************************************************!*\
  !*** ./node_modules/@noble/hashes/esm/sha512.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SHA384: () => (/* binding */ SHA384),\n/* harmony export */   SHA512: () => (/* binding */ SHA512),\n/* harmony export */   SHA512_224: () => (/* binding */ SHA512_224),\n/* harmony export */   SHA512_256: () => (/* binding */ SHA512_256),\n/* harmony export */   sha384: () => (/* binding */ sha384),\n/* harmony export */   sha512: () => (/* binding */ sha512),\n/* harmony export */   sha512_224: () => (/* binding */ sha512_224),\n/* harmony export */   sha512_256: () => (/* binding */ sha512_256)\n/* harmony export */ });\n/* harmony import */ var _sha2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sha2.js */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/sha2.js\");\n/**\n * SHA2-512 a.k.a. sha512 and sha384. It is slower than sha256 in js because u64 operations are slow.\n *\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [the paper on truncated SHA512/256](https://eprint.iacr.org/2010/548.pdf).\n * @module\n * @deprecated\n */\n\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst SHA512 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.SHA512;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst sha512 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.sha512;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst SHA384 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.SHA384;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst sha384 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.sha384;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst SHA512_224 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_224;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst sha512_224 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.sha512_224;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst SHA512_256 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.SHA512_256;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nconst sha512_256 = _sha2_js__WEBPACK_IMPORTED_MODULE_0__.sha512_256;\n//# sourceMappingURL=sha512.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS9zaGE1MTIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNvTjtBQUNwTjtBQUNPLGVBQWUsNENBQU87QUFDN0I7QUFDTyxlQUFlLDRDQUFPO0FBQzdCO0FBQ08sZUFBZSw0Q0FBTztBQUM3QjtBQUNPLGVBQWUsNENBQU87QUFDN0I7QUFDTyxtQkFBbUIsZ0RBQVc7QUFDckM7QUFDTyxtQkFBbUIsZ0RBQVc7QUFDckM7QUFDTyxtQkFBbUIsZ0RBQVc7QUFDckM7QUFDTyxtQkFBbUIsZ0RBQVc7QUFDckMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvQG5vYmxlL2hhc2hlcy9lc20vc2hhNTEyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU0hBMi01MTIgYS5rLmEuIHNoYTUxMiBhbmQgc2hhMzg0LiBJdCBpcyBzbG93ZXIgdGhhbiBzaGEyNTYgaW4ganMgYmVjYXVzZSB1NjQgb3BlcmF0aW9ucyBhcmUgc2xvdy5cbiAqXG4gKiBDaGVjayBvdXQgW1JGQyA0NjM0XShodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzQ2MzQpIGFuZFxuICogW3RoZSBwYXBlciBvbiB0cnVuY2F0ZWQgU0hBNTEyLzI1Nl0oaHR0cHM6Ly9lcHJpbnQuaWFjci5vcmcvMjAxMC81NDgucGRmKS5cbiAqIEBtb2R1bGVcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmltcG9ydCB7IFNIQTM4NCBhcyBTSEEzODRuLCBzaGEzODQgYXMgc2hhMzg0biwgc2hhNTEyXzIyNCBhcyBzaGE1MTJfMjI0biwgU0hBNTEyXzIyNCBhcyBTSEE1MTJfMjI0biwgc2hhNTEyXzI1NiBhcyBzaGE1MTJfMjU2biwgU0hBNTEyXzI1NiBhcyBTSEE1MTJfMjU2biwgU0hBNTEyIGFzIFNIQTUxMm4sIHNoYTUxMiBhcyBzaGE1MTJuLCB9IGZyb20gXCIuL3NoYTIuanNcIjtcbi8qKiBAZGVwcmVjYXRlZCBVc2UgaW1wb3J0IGZyb20gYG5vYmxlL2hhc2hlcy9zaGEyYCBtb2R1bGUgKi9cbmV4cG9ydCBjb25zdCBTSEE1MTIgPSBTSEE1MTJuO1xuLyoqIEBkZXByZWNhdGVkIFVzZSBpbXBvcnQgZnJvbSBgbm9ibGUvaGFzaGVzL3NoYTJgIG1vZHVsZSAqL1xuZXhwb3J0IGNvbnN0IHNoYTUxMiA9IHNoYTUxMm47XG4vKiogQGRlcHJlY2F0ZWQgVXNlIGltcG9ydCBmcm9tIGBub2JsZS9oYXNoZXMvc2hhMmAgbW9kdWxlICovXG5leHBvcnQgY29uc3QgU0hBMzg0ID0gU0hBMzg0bjtcbi8qKiBAZGVwcmVjYXRlZCBVc2UgaW1wb3J0IGZyb20gYG5vYmxlL2hhc2hlcy9zaGEyYCBtb2R1bGUgKi9cbmV4cG9ydCBjb25zdCBzaGEzODQgPSBzaGEzODRuO1xuLyoqIEBkZXByZWNhdGVkIFVzZSBpbXBvcnQgZnJvbSBgbm9ibGUvaGFzaGVzL3NoYTJgIG1vZHVsZSAqL1xuZXhwb3J0IGNvbnN0IFNIQTUxMl8yMjQgPSBTSEE1MTJfMjI0bjtcbi8qKiBAZGVwcmVjYXRlZCBVc2UgaW1wb3J0IGZyb20gYG5vYmxlL2hhc2hlcy9zaGEyYCBtb2R1bGUgKi9cbmV4cG9ydCBjb25zdCBzaGE1MTJfMjI0ID0gc2hhNTEyXzIyNG47XG4vKiogQGRlcHJlY2F0ZWQgVXNlIGltcG9ydCBmcm9tIGBub2JsZS9oYXNoZXMvc2hhMmAgbW9kdWxlICovXG5leHBvcnQgY29uc3QgU0hBNTEyXzI1NiA9IFNIQTUxMl8yNTZuO1xuLyoqIEBkZXByZWNhdGVkIFVzZSBpbXBvcnQgZnJvbSBgbm9ibGUvaGFzaGVzL3NoYTJgIG1vZHVsZSAqL1xuZXhwb3J0IGNvbnN0IHNoYTUxMl8yNTYgPSBzaGE1MTJfMjU2bjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYTUxMi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/sha512.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@noble/hashes/esm/utils.js":
/*!*************************************************!*\
  !*** ./node_modules/@noble/hashes/esm/utils.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Hash: () => (/* binding */ Hash),\n/* harmony export */   abytes: () => (/* binding */ abytes),\n/* harmony export */   aexists: () => (/* binding */ aexists),\n/* harmony export */   ahash: () => (/* binding */ ahash),\n/* harmony export */   anumber: () => (/* binding */ anumber),\n/* harmony export */   aoutput: () => (/* binding */ aoutput),\n/* harmony export */   asyncLoop: () => (/* binding */ asyncLoop),\n/* harmony export */   byteSwap: () => (/* binding */ byteSwap),\n/* harmony export */   byteSwap32: () => (/* binding */ byteSwap32),\n/* harmony export */   byteSwapIfBE: () => (/* binding */ byteSwapIfBE),\n/* harmony export */   bytesToHex: () => (/* binding */ bytesToHex),\n/* harmony export */   bytesToUtf8: () => (/* binding */ bytesToUtf8),\n/* harmony export */   checkOpts: () => (/* binding */ checkOpts),\n/* harmony export */   clean: () => (/* binding */ clean),\n/* harmony export */   concatBytes: () => (/* binding */ concatBytes),\n/* harmony export */   createHasher: () => (/* binding */ createHasher),\n/* harmony export */   createOptHasher: () => (/* binding */ createOptHasher),\n/* harmony export */   createView: () => (/* binding */ createView),\n/* harmony export */   createXOFer: () => (/* binding */ createXOFer),\n/* harmony export */   hexToBytes: () => (/* binding */ hexToBytes),\n/* harmony export */   isBytes: () => (/* binding */ isBytes),\n/* harmony export */   isLE: () => (/* binding */ isLE),\n/* harmony export */   kdfInputToBytes: () => (/* binding */ kdfInputToBytes),\n/* harmony export */   nextTick: () => (/* binding */ nextTick),\n/* harmony export */   randomBytes: () => (/* binding */ randomBytes),\n/* harmony export */   rotl: () => (/* binding */ rotl),\n/* harmony export */   rotr: () => (/* binding */ rotr),\n/* harmony export */   swap32IfBE: () => (/* binding */ swap32IfBE),\n/* harmony export */   swap8IfBE: () => (/* binding */ swap8IfBE),\n/* harmony export */   toBytes: () => (/* binding */ toBytes),\n/* harmony export */   u32: () => (/* binding */ u32),\n/* harmony export */   u8: () => (/* binding */ u8),\n/* harmony export */   utf8ToBytes: () => (/* binding */ utf8ToBytes),\n/* harmony export */   wrapConstructor: () => (/* binding */ wrapConstructor),\n/* harmony export */   wrapConstructorWithOpts: () => (/* binding */ wrapConstructorWithOpts),\n/* harmony export */   wrapXOFConstructorWithOpts: () => (/* binding */ wrapXOFConstructorWithOpts)\n/* harmony export */ });\n/* harmony import */ var _noble_hashes_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @noble/hashes/crypto */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/crypto.js\");\n/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\n\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nfunction isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is positive integer. */\nfunction anumber(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error('positive integer expected, got ' + n);\n}\n/** Asserts something is Uint8Array. */\nfunction abytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n/** Asserts something is hash */\nfunction ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.createHasher');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */\nfunction aexists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */\nfunction aoutput(out, instance) {\n    abytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('digestInto() expects output buffer of length at least ' + min);\n    }\n}\n/** Cast u8 / u16 / u32 to u8. */\nfunction u8(arr) {\n    return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** Cast u8 / u16 / u32 to u32. */\nfunction u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nfunction clean(...arrays) {\n    for (let i = 0; i < arrays.length; i++) {\n        arrays[i].fill(0);\n    }\n}\n/** Create DataView of an array for easy byte-level manipulation. */\nfunction createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */\nfunction rotr(word, shift) {\n    return (word << (32 - shift)) | (word >>> shift);\n}\n/** The rotate left (circular left shift) operation for uint32 */\nfunction rotl(word, shift) {\n    return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nconst isLE = /* @__PURE__ */ (() => new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n/** The byte swap operation for uint32 */\nfunction byteSwap(word) {\n    return (((word << 24) & 0xff000000) |\n        ((word << 8) & 0xff0000) |\n        ((word >>> 8) & 0xff00) |\n        ((word >>> 24) & 0xff));\n}\n/** Conditionally byte swap if on a big-endian platform */\nconst swap8IfBE = isLE\n    ? (n) => n\n    : (n) => byteSwap(n);\n/** @deprecated */\nconst byteSwapIfBE = swap8IfBE;\n/** In place byte swap for Uint32Array */\nfunction byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n    return arr;\n}\nconst swap32IfBE = isLE\n    ? (u) => u\n    : byteSwap32;\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = /* @__PURE__ */ (() => \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nconst nextTick = async () => { };\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\nfunction bytesToUtf8(bytes) {\n    return new TextDecoder().decode(bytes);\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nfunction kdfInputToBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/** Copies several Uint8Arrays into one. */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error('options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\n/** For runtime check if class implements interface */\nclass Hash {\n}\n/** Wraps hash function, creating an interface on top of it */\nfunction createHasher(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nfunction createOptHasher(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nfunction createXOFer(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nconst wrapConstructor = createHasher;\nconst wrapConstructorWithOpts = createOptHasher;\nconst wrapXOFConstructorWithOpts = createXOFer;\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nfunction randomBytes(bytesLength = 32) {\n    if (_noble_hashes_crypto__WEBPACK_IMPORTED_MODULE_0__.crypto && typeof _noble_hashes_crypto__WEBPACK_IMPORTED_MODULE_0__.crypto.getRandomValues === 'function') {\n        return _noble_hashes_crypto__WEBPACK_IMPORTED_MODULE_0__.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    // Legacy Node.js compatibility\n    if (_noble_hashes_crypto__WEBPACK_IMPORTED_MODULE_0__.crypto && typeof _noble_hashes_crypto__WEBPACK_IMPORTED_MODULE_0__.crypto.randomBytes === 'function') {\n        return Uint8Array.from(_noble_hashes_crypto__WEBPACK_IMPORTED_MODULE_0__.crypto.randomBytes(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Abm9ibGUvaGFzaGVzL2VzbS91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM4QztBQUM5QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUCxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ087QUFDUCxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxhQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLHFDQUFxQztBQUNyQztBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLFNBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbUJBQW1CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ1A7QUFDTztBQUNQLFFBQVEsd0RBQU0sV0FBVyx3REFBTTtBQUMvQixlQUFlLHdEQUFNO0FBQ3JCO0FBQ0E7QUFDQSxRQUFRLHdEQUFNLFdBQVcsd0RBQU07QUFDL0IsK0JBQStCLHdEQUFNO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbm9kZV9tb2R1bGVzL0Bub2JsZS9oYXNoZXMvZXNtL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXRpbGl0aWVzIGZvciBoZXgsIGJ5dGVzLCBDU1BSTkcuXG4gKiBAbW9kdWxlXG4gKi9cbi8qISBub2JsZS1oYXNoZXMgLSBNSVQgTGljZW5zZSAoYykgMjAyMiBQYXVsIE1pbGxlciAocGF1bG1pbGxyLmNvbSkgKi9cbi8vIFdlIHVzZSBXZWJDcnlwdG8gYWthIGdsb2JhbFRoaXMuY3J5cHRvLCB3aGljaCBleGlzdHMgaW4gYnJvd3NlcnMgYW5kIG5vZGUuanMgMTYrLlxuLy8gbm9kZS5qcyB2ZXJzaW9ucyBlYXJsaWVyIHRoYW4gdjE5IGRvbid0IGRlY2xhcmUgaXQgaW4gZ2xvYmFsIHNjb3BlLlxuLy8gRm9yIG5vZGUuanMsIHBhY2thZ2UuanNvbiNleHBvcnRzIGZpZWxkIG1hcHBpbmcgcmV3cml0ZXMgaW1wb3J0XG4vLyBmcm9tIGBjcnlwdG9gIHRvIGBjcnlwdG9Ob2RlYCwgd2hpY2ggaW1wb3J0cyBuYXRpdmUgbW9kdWxlLlxuLy8gTWFrZXMgdGhlIHV0aWxzIHVuLWltcG9ydGFibGUgaW4gYnJvd3NlcnMgd2l0aG91dCBhIGJ1bmRsZXIuXG4vLyBPbmNlIG5vZGUuanMgMTggaXMgZGVwcmVjYXRlZCAoMjAyNS0wNC0zMCksIHdlIGNhbiBqdXN0IGRyb3AgdGhlIGltcG9ydC5cbmltcG9ydCB7IGNyeXB0byB9IGZyb20gJ0Bub2JsZS9oYXNoZXMvY3J5cHRvJztcbi8qKiBDaGVja3MgaWYgc29tZXRoaW5nIGlzIFVpbnQ4QXJyYXkuIEJlIGNhcmVmdWw6IG5vZGVqcyBCdWZmZXIgd2lsbCByZXR1cm4gdHJ1ZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0J5dGVzKGEpIHtcbiAgICByZXR1cm4gYSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgKEFycmF5QnVmZmVyLmlzVmlldyhhKSAmJiBhLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdVaW50OEFycmF5Jyk7XG59XG4vKiogQXNzZXJ0cyBzb21ldGhpbmcgaXMgcG9zaXRpdmUgaW50ZWdlci4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbnVtYmVyKG4pIHtcbiAgICBpZiAoIU51bWJlci5pc1NhZmVJbnRlZ2VyKG4pIHx8IG4gPCAwKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Bvc2l0aXZlIGludGVnZXIgZXhwZWN0ZWQsIGdvdCAnICsgbik7XG59XG4vKiogQXNzZXJ0cyBzb21ldGhpbmcgaXMgVWludDhBcnJheS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnl0ZXMoYiwgLi4ubGVuZ3Rocykge1xuICAgIGlmICghaXNCeXRlcyhiKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVaW50OEFycmF5IGV4cGVjdGVkJyk7XG4gICAgaWYgKGxlbmd0aHMubGVuZ3RoID4gMCAmJiAhbGVuZ3Rocy5pbmNsdWRlcyhiLmxlbmd0aCkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVWludDhBcnJheSBleHBlY3RlZCBvZiBsZW5ndGggJyArIGxlbmd0aHMgKyAnLCBnb3QgbGVuZ3RoPScgKyBiLmxlbmd0aCk7XG59XG4vKiogQXNzZXJ0cyBzb21ldGhpbmcgaXMgaGFzaCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFoYXNoKGgpIHtcbiAgICBpZiAodHlwZW9mIGggIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGguY3JlYXRlICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hhc2ggc2hvdWxkIGJlIHdyYXBwZWQgYnkgdXRpbHMuY3JlYXRlSGFzaGVyJyk7XG4gICAgYW51bWJlcihoLm91dHB1dExlbik7XG4gICAgYW51bWJlcihoLmJsb2NrTGVuKTtcbn1cbi8qKiBBc3NlcnRzIGEgaGFzaCBpbnN0YW5jZSBoYXMgbm90IGJlZW4gZGVzdHJveWVkIC8gZmluaXNoZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBhZXhpc3RzKGluc3RhbmNlLCBjaGVja0ZpbmlzaGVkID0gdHJ1ZSkge1xuICAgIGlmIChpbnN0YW5jZS5kZXN0cm95ZWQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSGFzaCBpbnN0YW5jZSBoYXMgYmVlbiBkZXN0cm95ZWQnKTtcbiAgICBpZiAoY2hlY2tGaW5pc2hlZCAmJiBpbnN0YW5jZS5maW5pc2hlZClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIYXNoI2RpZ2VzdCgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkJyk7XG59XG4vKiogQXNzZXJ0cyBvdXRwdXQgaXMgcHJvcGVybHktc2l6ZWQgYnl0ZSBhcnJheSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFvdXRwdXQob3V0LCBpbnN0YW5jZSkge1xuICAgIGFieXRlcyhvdXQpO1xuICAgIGNvbnN0IG1pbiA9IGluc3RhbmNlLm91dHB1dExlbjtcbiAgICBpZiAob3V0Lmxlbmd0aCA8IG1pbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RpZ2VzdEludG8oKSBleHBlY3RzIG91dHB1dCBidWZmZXIgb2YgbGVuZ3RoIGF0IGxlYXN0ICcgKyBtaW4pO1xuICAgIH1cbn1cbi8qKiBDYXN0IHU4IC8gdTE2IC8gdTMyIHRvIHU4LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHU4KGFycikge1xuICAgIHJldHVybiBuZXcgVWludDhBcnJheShhcnIuYnVmZmVyLCBhcnIuYnl0ZU9mZnNldCwgYXJyLmJ5dGVMZW5ndGgpO1xufVxuLyoqIENhc3QgdTggLyB1MTYgLyB1MzIgdG8gdTMyLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHUzMihhcnIpIHtcbiAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KGFyci5idWZmZXIsIGFyci5ieXRlT2Zmc2V0LCBNYXRoLmZsb29yKGFyci5ieXRlTGVuZ3RoIC8gNCkpO1xufVxuLyoqIFplcm9pemUgYSBieXRlIGFycmF5LiBXYXJuaW5nOiBKUyBwcm92aWRlcyBubyBndWFyYW50ZWVzLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuKC4uLmFycmF5cykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycmF5c1tpXS5maWxsKDApO1xuICAgIH1cbn1cbi8qKiBDcmVhdGUgRGF0YVZpZXcgb2YgYW4gYXJyYXkgZm9yIGVhc3kgYnl0ZS1sZXZlbCBtYW5pcHVsYXRpb24uICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVmlldyhhcnIpIHtcbiAgICByZXR1cm4gbmV3IERhdGFWaWV3KGFyci5idWZmZXIsIGFyci5ieXRlT2Zmc2V0LCBhcnIuYnl0ZUxlbmd0aCk7XG59XG4vKiogVGhlIHJvdGF0ZSByaWdodCAoY2lyY3VsYXIgcmlnaHQgc2hpZnQpIG9wZXJhdGlvbiBmb3IgdWludDMyICovXG5leHBvcnQgZnVuY3Rpb24gcm90cih3b3JkLCBzaGlmdCkge1xuICAgIHJldHVybiAod29yZCA8PCAoMzIgLSBzaGlmdCkpIHwgKHdvcmQgPj4+IHNoaWZ0KTtcbn1cbi8qKiBUaGUgcm90YXRlIGxlZnQgKGNpcmN1bGFyIGxlZnQgc2hpZnQpIG9wZXJhdGlvbiBmb3IgdWludDMyICovXG5leHBvcnQgZnVuY3Rpb24gcm90bCh3b3JkLCBzaGlmdCkge1xuICAgIHJldHVybiAod29yZCA8PCBzaGlmdCkgfCAoKHdvcmQgPj4+ICgzMiAtIHNoaWZ0KSkgPj4+IDApO1xufVxuLyoqIElzIGN1cnJlbnQgcGxhdGZvcm0gbGl0dGxlLWVuZGlhbj8gTW9zdCBhcmUuIEJpZy1FbmRpYW4gcGxhdGZvcm06IElCTSAqL1xuZXhwb3J0IGNvbnN0IGlzTEUgPSAvKiBAX19QVVJFX18gKi8gKCgpID0+IG5ldyBVaW50OEFycmF5KG5ldyBVaW50MzJBcnJheShbMHgxMTIyMzM0NF0pLmJ1ZmZlcilbMF0gPT09IDB4NDQpKCk7XG4vKiogVGhlIGJ5dGUgc3dhcCBvcGVyYXRpb24gZm9yIHVpbnQzMiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVTd2FwKHdvcmQpIHtcbiAgICByZXR1cm4gKCgod29yZCA8PCAyNCkgJiAweGZmMDAwMDAwKSB8XG4gICAgICAgICgod29yZCA8PCA4KSAmIDB4ZmYwMDAwKSB8XG4gICAgICAgICgod29yZCA+Pj4gOCkgJiAweGZmMDApIHxcbiAgICAgICAgKCh3b3JkID4+PiAyNCkgJiAweGZmKSk7XG59XG4vKiogQ29uZGl0aW9uYWxseSBieXRlIHN3YXAgaWYgb24gYSBiaWctZW5kaWFuIHBsYXRmb3JtICovXG5leHBvcnQgY29uc3Qgc3dhcDhJZkJFID0gaXNMRVxuICAgID8gKG4pID0+IG5cbiAgICA6IChuKSA9PiBieXRlU3dhcChuKTtcbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGNvbnN0IGJ5dGVTd2FwSWZCRSA9IHN3YXA4SWZCRTtcbi8qKiBJbiBwbGFjZSBieXRlIHN3YXAgZm9yIFVpbnQzMkFycmF5ICovXG5leHBvcnQgZnVuY3Rpb24gYnl0ZVN3YXAzMihhcnIpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJbaV0gPSBieXRlU3dhcChhcnJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xufVxuZXhwb3J0IGNvbnN0IHN3YXAzMklmQkUgPSBpc0xFXG4gICAgPyAodSkgPT4gdVxuICAgIDogYnl0ZVN3YXAzMjtcbi8vIEJ1aWx0LWluIGhleCBjb252ZXJzaW9uIGh0dHBzOi8vY2FuaXVzZS5jb20vbWRuLWphdmFzY3JpcHRfYnVpbHRpbnNfdWludDhhcnJheV9mcm9taGV4XG5jb25zdCBoYXNIZXhCdWlsdGluID0gLyogQF9fUFVSRV9fICovICgoKSA9PiBcbi8vIEB0cy1pZ25vcmVcbnR5cGVvZiBVaW50OEFycmF5LmZyb20oW10pLnRvSGV4ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBVaW50OEFycmF5LmZyb21IZXggPT09ICdmdW5jdGlvbicpKCk7XG4vLyBBcnJheSB3aGVyZSBpbmRleCAweGYwICgyNDApIGlzIG1hcHBlZCB0byBzdHJpbmcgJ2YwJ1xuY29uc3QgaGV4ZXMgPSAvKiBAX19QVVJFX18gKi8gQXJyYXkuZnJvbSh7IGxlbmd0aDogMjU2IH0sIChfLCBpKSA9PiBpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKTtcbi8qKlxuICogQ29udmVydCBieXRlIGFycmF5IHRvIGhleCBzdHJpbmcuIFVzZXMgYnVpbHQtaW4gZnVuY3Rpb24sIHdoZW4gYXZhaWxhYmxlLlxuICogQGV4YW1wbGUgYnl0ZXNUb0hleChVaW50OEFycmF5LmZyb20oWzB4Y2EsIDB4ZmUsIDB4MDEsIDB4MjNdKSkgLy8gJ2NhZmUwMTIzJ1xuICovXG5leHBvcnQgZnVuY3Rpb24gYnl0ZXNUb0hleChieXRlcykge1xuICAgIGFieXRlcyhieXRlcyk7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmIChoYXNIZXhCdWlsdGluKVxuICAgICAgICByZXR1cm4gYnl0ZXMudG9IZXgoKTtcbiAgICAvLyBwcmUtY2FjaGluZyBpbXByb3ZlcyB0aGUgc3BlZWQgNnhcbiAgICBsZXQgaGV4ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBoZXggKz0gaGV4ZXNbYnl0ZXNbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gaGV4O1xufVxuLy8gV2UgdXNlIG9wdGltaXplZCB0ZWNobmlxdWUgdG8gY29udmVydCBoZXggc3RyaW5nIHRvIGJ5dGUgYXJyYXlcbmNvbnN0IGFzY2lpcyA9IHsgXzA6IDQ4LCBfOTogNTcsIEE6IDY1LCBGOiA3MCwgYTogOTcsIGY6IDEwMiB9O1xuZnVuY3Rpb24gYXNjaWlUb0Jhc2UxNihjaCkge1xuICAgIGlmIChjaCA+PSBhc2NpaXMuXzAgJiYgY2ggPD0gYXNjaWlzLl85KVxuICAgICAgICByZXR1cm4gY2ggLSBhc2NpaXMuXzA7IC8vICcyJyA9PiA1MC00OFxuICAgIGlmIChjaCA+PSBhc2NpaXMuQSAmJiBjaCA8PSBhc2NpaXMuRilcbiAgICAgICAgcmV0dXJuIGNoIC0gKGFzY2lpcy5BIC0gMTApOyAvLyAnQicgPT4gNjYtKDY1LTEwKVxuICAgIGlmIChjaCA+PSBhc2NpaXMuYSAmJiBjaCA8PSBhc2NpaXMuZilcbiAgICAgICAgcmV0dXJuIGNoIC0gKGFzY2lpcy5hIC0gMTApOyAvLyAnYicgPT4gOTgtKDk3LTEwKVxuICAgIHJldHVybjtcbn1cbi8qKlxuICogQ29udmVydCBoZXggc3RyaW5nIHRvIGJ5dGUgYXJyYXkuIFVzZXMgYnVpbHQtaW4gZnVuY3Rpb24sIHdoZW4gYXZhaWxhYmxlLlxuICogQGV4YW1wbGUgaGV4VG9CeXRlcygnY2FmZTAxMjMnKSAvLyBVaW50OEFycmF5LmZyb20oWzB4Y2EsIDB4ZmUsIDB4MDEsIDB4MjNdKVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGV4VG9CeXRlcyhoZXgpIHtcbiAgICBpZiAodHlwZW9mIGhleCAhPT0gJ3N0cmluZycpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignaGV4IHN0cmluZyBleHBlY3RlZCwgZ290ICcgKyB0eXBlb2YgaGV4KTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKGhhc0hleEJ1aWx0aW4pXG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LmZyb21IZXgoaGV4KTtcbiAgICBjb25zdCBobCA9IGhleC5sZW5ndGg7XG4gICAgY29uc3QgYWwgPSBobCAvIDI7XG4gICAgaWYgKGhsICUgMilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdoZXggc3RyaW5nIGV4cGVjdGVkLCBnb3QgdW5wYWRkZWQgaGV4IG9mIGxlbmd0aCAnICsgaGwpO1xuICAgIGNvbnN0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYWwpO1xuICAgIGZvciAobGV0IGFpID0gMCwgaGkgPSAwOyBhaSA8IGFsOyBhaSsrLCBoaSArPSAyKSB7XG4gICAgICAgIGNvbnN0IG4xID0gYXNjaWlUb0Jhc2UxNihoZXguY2hhckNvZGVBdChoaSkpO1xuICAgICAgICBjb25zdCBuMiA9IGFzY2lpVG9CYXNlMTYoaGV4LmNoYXJDb2RlQXQoaGkgKyAxKSk7XG4gICAgICAgIGlmIChuMSA9PT0gdW5kZWZpbmVkIHx8IG4yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSBoZXhbaGldICsgaGV4W2hpICsgMV07XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2hleCBzdHJpbmcgZXhwZWN0ZWQsIGdvdCBub24taGV4IGNoYXJhY3RlciBcIicgKyBjaGFyICsgJ1wiIGF0IGluZGV4ICcgKyBoaSk7XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXlbYWldID0gbjEgKiAxNiArIG4yOyAvLyBtdWx0aXBseSBmaXJzdCBvY3RldCwgZS5nLiAnYTMnID0+IDEwKjE2KzMgPT4gMTYwICsgMyA9PiAxNjNcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuLyoqXG4gKiBUaGVyZSBpcyBubyBzZXRJbW1lZGlhdGUgaW4gYnJvd3NlciBhbmQgc2V0VGltZW91dCBpcyBzbG93LlxuICogQ2FsbCBvZiBhc3luYyBmbiB3aWxsIHJldHVybiBQcm9taXNlLCB3aGljaCB3aWxsIGJlIGZ1bGxmaWxlZCBvbmx5IG9uXG4gKiBuZXh0IHNjaGVkdWxlciBxdWV1ZSBwcm9jZXNzaW5nIHN0ZXAgYW5kIHRoaXMgaXMgZXhhY3RseSB3aGF0IHdlIG5lZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBuZXh0VGljayA9IGFzeW5jICgpID0+IHsgfTtcbi8qKiBSZXR1cm5zIGNvbnRyb2wgdG8gdGhyZWFkIGVhY2ggJ3RpY2snIG1zIHRvIGF2b2lkIGJsb2NraW5nLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFzeW5jTG9vcChpdGVycywgdGljaywgY2IpIHtcbiAgICBsZXQgdHMgPSBEYXRlLm5vdygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcnM7IGkrKykge1xuICAgICAgICBjYihpKTtcbiAgICAgICAgLy8gRGF0ZS5ub3coKSBpcyBub3QgbW9ub3RvbmljLCBzbyBpbiBjYXNlIGlmIGNsb2NrIGdvZXMgYmFja3dhcmRzIHdlIHJldHVybiByZXR1cm4gY29udHJvbCB0b29cbiAgICAgICAgY29uc3QgZGlmZiA9IERhdGUubm93KCkgLSB0cztcbiAgICAgICAgaWYgKGRpZmYgPj0gMCAmJiBkaWZmIDwgdGljaylcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBhd2FpdCBuZXh0VGljaygpO1xuICAgICAgICB0cyArPSBkaWZmO1xuICAgIH1cbn1cbi8qKlxuICogQ29udmVydHMgc3RyaW5nIHRvIGJ5dGVzIHVzaW5nIFVURjggZW5jb2RpbmcuXG4gKiBAZXhhbXBsZSB1dGY4VG9CeXRlcygnYWJjJykgLy8gVWludDhBcnJheS5mcm9tKFs5NywgOTgsIDk5XSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHV0ZjhUb0J5dGVzKHN0cikge1xuICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdHJpbmcgZXhwZWN0ZWQnKTtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0cikpOyAvLyBodHRwczovL2J1Z3ppbC5sYS8xNjgxODA5XG59XG4vKipcbiAqIENvbnZlcnRzIGJ5dGVzIHRvIHN0cmluZyB1c2luZyBVVEY4IGVuY29kaW5nLlxuICogQGV4YW1wbGUgYnl0ZXNUb1V0ZjgoVWludDhBcnJheS5mcm9tKFs5NywgOTgsIDk5XSkpIC8vICdhYmMnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBieXRlc1RvVXRmOChieXRlcykge1xuICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYnl0ZXMpO1xufVxuLyoqXG4gKiBOb3JtYWxpemVzIChub24taGV4KSBzdHJpbmcgb3IgVWludDhBcnJheSB0byBVaW50OEFycmF5LlxuICogV2FybmluZzogd2hlbiBVaW50OEFycmF5IGlzIHBhc3NlZCwgaXQgd291bGQgTk9UIGdldCBjb3BpZWQuXG4gKiBLZWVwIGluIG1pbmQgZm9yIGZ1dHVyZSBtdXRhYmxlIG9wZXJhdGlvbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0J5dGVzKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKVxuICAgICAgICBkYXRhID0gdXRmOFRvQnl0ZXMoZGF0YSk7XG4gICAgYWJ5dGVzKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xufVxuLyoqXG4gKiBIZWxwZXIgZm9yIEtERnM6IGNvbnN1bWVzIHVpbnQ4YXJyYXkgb3Igc3RyaW5nLlxuICogV2hlbiBzdHJpbmcgaXMgcGFzc2VkLCBkb2VzIHV0ZjggZGVjb2RpbmcsIHVzaW5nIFRleHREZWNvZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24ga2RmSW5wdXRUb0J5dGVzKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKVxuICAgICAgICBkYXRhID0gdXRmOFRvQnl0ZXMoZGF0YSk7XG4gICAgYWJ5dGVzKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xufVxuLyoqIENvcGllcyBzZXZlcmFsIFVpbnQ4QXJyYXlzIGludG8gb25lLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdEJ5dGVzKC4uLmFycmF5cykge1xuICAgIGxldCBzdW0gPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGEgPSBhcnJheXNbaV07XG4gICAgICAgIGFieXRlcyhhKTtcbiAgICAgICAgc3VtICs9IGEubGVuZ3RoO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBuZXcgVWludDhBcnJheShzdW0pO1xuICAgIGZvciAobGV0IGkgPSAwLCBwYWQgPSAwOyBpIDwgYXJyYXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGEgPSBhcnJheXNbaV07XG4gICAgICAgIHJlcy5zZXQoYSwgcGFkKTtcbiAgICAgICAgcGFkICs9IGEubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrT3B0cyhkZWZhdWx0cywgb3B0cykge1xuICAgIGlmIChvcHRzICE9PSB1bmRlZmluZWQgJiYge30udG9TdHJpbmcuY2FsbChvcHRzKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignb3B0aW9ucyBzaG91bGQgYmUgb2JqZWN0IG9yIHVuZGVmaW5lZCcpO1xuICAgIGNvbnN0IG1lcmdlZCA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIG9wdHMpO1xuICAgIHJldHVybiBtZXJnZWQ7XG59XG4vKiogRm9yIHJ1bnRpbWUgY2hlY2sgaWYgY2xhc3MgaW1wbGVtZW50cyBpbnRlcmZhY2UgKi9cbmV4cG9ydCBjbGFzcyBIYXNoIHtcbn1cbi8qKiBXcmFwcyBoYXNoIGZ1bmN0aW9uLCBjcmVhdGluZyBhbiBpbnRlcmZhY2Ugb24gdG9wIG9mIGl0ICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGFzaGVyKGhhc2hDb25zKSB7XG4gICAgY29uc3QgaGFzaEMgPSAobXNnKSA9PiBoYXNoQ29ucygpLnVwZGF0ZSh0b0J5dGVzKG1zZykpLmRpZ2VzdCgpO1xuICAgIGNvbnN0IHRtcCA9IGhhc2hDb25zKCk7XG4gICAgaGFzaEMub3V0cHV0TGVuID0gdG1wLm91dHB1dExlbjtcbiAgICBoYXNoQy5ibG9ja0xlbiA9IHRtcC5ibG9ja0xlbjtcbiAgICBoYXNoQy5jcmVhdGUgPSAoKSA9PiBoYXNoQ29ucygpO1xuICAgIHJldHVybiBoYXNoQztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPcHRIYXNoZXIoaGFzaENvbnMpIHtcbiAgICBjb25zdCBoYXNoQyA9IChtc2csIG9wdHMpID0+IGhhc2hDb25zKG9wdHMpLnVwZGF0ZSh0b0J5dGVzKG1zZykpLmRpZ2VzdCgpO1xuICAgIGNvbnN0IHRtcCA9IGhhc2hDb25zKHt9KTtcbiAgICBoYXNoQy5vdXRwdXRMZW4gPSB0bXAub3V0cHV0TGVuO1xuICAgIGhhc2hDLmJsb2NrTGVuID0gdG1wLmJsb2NrTGVuO1xuICAgIGhhc2hDLmNyZWF0ZSA9IChvcHRzKSA9PiBoYXNoQ29ucyhvcHRzKTtcbiAgICByZXR1cm4gaGFzaEM7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWE9GZXIoaGFzaENvbnMpIHtcbiAgICBjb25zdCBoYXNoQyA9IChtc2csIG9wdHMpID0+IGhhc2hDb25zKG9wdHMpLnVwZGF0ZSh0b0J5dGVzKG1zZykpLmRpZ2VzdCgpO1xuICAgIGNvbnN0IHRtcCA9IGhhc2hDb25zKHt9KTtcbiAgICBoYXNoQy5vdXRwdXRMZW4gPSB0bXAub3V0cHV0TGVuO1xuICAgIGhhc2hDLmJsb2NrTGVuID0gdG1wLmJsb2NrTGVuO1xuICAgIGhhc2hDLmNyZWF0ZSA9IChvcHRzKSA9PiBoYXNoQ29ucyhvcHRzKTtcbiAgICByZXR1cm4gaGFzaEM7XG59XG5leHBvcnQgY29uc3Qgd3JhcENvbnN0cnVjdG9yID0gY3JlYXRlSGFzaGVyO1xuZXhwb3J0IGNvbnN0IHdyYXBDb25zdHJ1Y3RvcldpdGhPcHRzID0gY3JlYXRlT3B0SGFzaGVyO1xuZXhwb3J0IGNvbnN0IHdyYXBYT0ZDb25zdHJ1Y3RvcldpdGhPcHRzID0gY3JlYXRlWE9GZXI7XG4vKiogQ3J5cHRvZ3JhcGhpY2FsbHkgc2VjdXJlIFBSTkcuIFVzZXMgaW50ZXJuYWwgT1MtbGV2ZWwgYGNyeXB0by5nZXRSYW5kb21WYWx1ZXNgLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbUJ5dGVzKGJ5dGVzTGVuZ3RoID0gMzIpIHtcbiAgICBpZiAoY3J5cHRvICYmIHR5cGVvZiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KGJ5dGVzTGVuZ3RoKSk7XG4gICAgfVxuICAgIC8vIExlZ2FjeSBOb2RlLmpzIGNvbXBhdGliaWxpdHlcbiAgICBpZiAoY3J5cHRvICYmIHR5cGVvZiBjcnlwdG8ucmFuZG9tQnl0ZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkuZnJvbShjcnlwdG8ucmFuZG9tQnl0ZXMoYnl0ZXNMZW5ndGgpKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzIG11c3QgYmUgZGVmaW5lZCcpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@noble/hashes/esm/utils.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@swc/helpers/esm/_tagged_template_literal.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@swc/helpers/esm/_tagged_template_literal.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _: () => (/* binding */ _tagged_template_literal)\n/* harmony export */ });\nfunction _tagged_template_literal(strings, raw) {\n    if (!raw) raw = strings.slice(0);\n\n    return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } }));\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3djL2hlbHBlcnMvZXNtL190YWdnZWRfdGVtcGxhdGVfbGl0ZXJhbC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTs7QUFFQSw0REFBNEQsT0FBTyw2QkFBNkI7QUFDaEc7QUFDeUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvQHN3Yy9oZWxwZXJzL2VzbS9fdGFnZ2VkX3RlbXBsYXRlX2xpdGVyYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX3RhZ2dlZF90ZW1wbGF0ZV9saXRlcmFsKHN0cmluZ3MsIHJhdykge1xuICAgIGlmICghcmF3KSByYXcgPSBzdHJpbmdzLnNsaWNlKDApO1xuXG4gICAgcmV0dXJuIE9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3RyaW5ncywgeyByYXc6IHsgdmFsdWU6IE9iamVjdC5mcmVlemUocmF3KSB9IH0pKTtcbn1cbmV4cG9ydCB7IF90YWdnZWRfdGVtcGxhdGVfbGl0ZXJhbCBhcyBfIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@swc/helpers/esm/_tagged_template_literal.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/asn1js/build/index.es.js":
/*!***********************************************!*\
  !*** ./node_modules/asn1js/build/index.es.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Any: () => (/* binding */ Any),\n/* harmony export */   BaseBlock: () => (/* binding */ BaseBlock),\n/* harmony export */   BaseStringBlock: () => (/* binding */ BaseStringBlock),\n/* harmony export */   BitString: () => (/* binding */ BitString),\n/* harmony export */   BmpString: () => (/* binding */ BmpString),\n/* harmony export */   Boolean: () => (/* binding */ Boolean),\n/* harmony export */   CharacterString: () => (/* binding */ CharacterString),\n/* harmony export */   Choice: () => (/* binding */ Choice),\n/* harmony export */   Constructed: () => (/* binding */ Constructed),\n/* harmony export */   DATE: () => (/* binding */ DATE),\n/* harmony export */   DateTime: () => (/* binding */ DateTime),\n/* harmony export */   Duration: () => (/* binding */ Duration),\n/* harmony export */   EndOfContent: () => (/* binding */ EndOfContent),\n/* harmony export */   Enumerated: () => (/* binding */ Enumerated),\n/* harmony export */   GeneralString: () => (/* binding */ GeneralString),\n/* harmony export */   GeneralizedTime: () => (/* binding */ GeneralizedTime),\n/* harmony export */   GraphicString: () => (/* binding */ GraphicString),\n/* harmony export */   HexBlock: () => (/* binding */ HexBlock),\n/* harmony export */   IA5String: () => (/* binding */ IA5String),\n/* harmony export */   Integer: () => (/* binding */ Integer),\n/* harmony export */   Null: () => (/* binding */ Null),\n/* harmony export */   NumericString: () => (/* binding */ NumericString),\n/* harmony export */   ObjectIdentifier: () => (/* binding */ ObjectIdentifier),\n/* harmony export */   OctetString: () => (/* binding */ OctetString),\n/* harmony export */   Primitive: () => (/* binding */ Primitive),\n/* harmony export */   PrintableString: () => (/* binding */ PrintableString),\n/* harmony export */   RawData: () => (/* binding */ RawData),\n/* harmony export */   RelativeObjectIdentifier: () => (/* binding */ RelativeObjectIdentifier),\n/* harmony export */   Repeated: () => (/* binding */ Repeated),\n/* harmony export */   Sequence: () => (/* binding */ Sequence),\n/* harmony export */   Set: () => (/* binding */ Set),\n/* harmony export */   TIME: () => (/* binding */ TIME),\n/* harmony export */   TeletexString: () => (/* binding */ TeletexString),\n/* harmony export */   TimeOfDay: () => (/* binding */ TimeOfDay),\n/* harmony export */   UTCTime: () => (/* binding */ UTCTime),\n/* harmony export */   UniversalString: () => (/* binding */ UniversalString),\n/* harmony export */   Utf8String: () => (/* binding */ Utf8String),\n/* harmony export */   ValueBlock: () => (/* binding */ ValueBlock),\n/* harmony export */   VideotexString: () => (/* binding */ VideotexString),\n/* harmony export */   ViewWriter: () => (/* binding */ ViewWriter),\n/* harmony export */   VisibleString: () => (/* binding */ VisibleString),\n/* harmony export */   compareSchema: () => (/* binding */ compareSchema),\n/* harmony export */   fromBER: () => (/* binding */ fromBER),\n/* harmony export */   verifySchema: () => (/* binding */ verifySchema)\n/* harmony export */ });\n/* harmony import */ var pvtsutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pvtsutils */ \"(app-pages-browser)/./node_modules/pvtsutils/build/index.js\");\n/* harmony import */ var pvutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pvutils */ \"(app-pages-browser)/./node_modules/pvutils/build/utils.es.js\");\n/*!\n * Copyright (c) 2014, GMO GlobalSign\n * Copyright (c) 2015-2022, Peculiar Ventures\n * All rights reserved.\n * \n * Author 2014-2019, Yury Strozhevsky\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * * Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n * \n * * Redistributions in binary form must reproduce the above copyright notice, this\n *   list of conditions and the following disclaimer in the documentation and/or\n *   other materials provided with the distribution.\n * \n * * Neither the name of the copyright holder nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n */\n\n\n\n\nfunction assertBigInt() {\n    if (typeof BigInt === \"undefined\") {\n        throw new Error(\"BigInt is not defined. Your environment doesn't implement BigInt.\");\n    }\n}\nfunction concat(buffers) {\n    let outputLength = 0;\n    let prevLength = 0;\n    for (let i = 0; i < buffers.length; i++) {\n        const buffer = buffers[i];\n        outputLength += buffer.byteLength;\n    }\n    const retView = new Uint8Array(outputLength);\n    for (let i = 0; i < buffers.length; i++) {\n        const buffer = buffers[i];\n        retView.set(new Uint8Array(buffer), prevLength);\n        prevLength += buffer.byteLength;\n    }\n    return retView.buffer;\n}\nfunction checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength) {\n    if (!(inputBuffer instanceof Uint8Array)) {\n        baseBlock.error = \"Wrong parameter: inputBuffer must be 'Uint8Array'\";\n        return false;\n    }\n    if (!inputBuffer.byteLength) {\n        baseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\n        return false;\n    }\n    if (inputOffset < 0) {\n        baseBlock.error = \"Wrong parameter: inputOffset less than zero\";\n        return false;\n    }\n    if (inputLength < 0) {\n        baseBlock.error = \"Wrong parameter: inputLength less than zero\";\n        return false;\n    }\n    if ((inputBuffer.byteLength - inputOffset - inputLength) < 0) {\n        baseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\n        return false;\n    }\n    return true;\n}\n\nclass ViewWriter {\n    constructor() {\n        this.items = [];\n    }\n    write(buf) {\n        this.items.push(buf);\n    }\n    final() {\n        return concat(this.items);\n    }\n}\n\nconst powers2 = [new Uint8Array([1])];\nconst digitsString = \"0123456789\";\nconst NAME = \"name\";\nconst VALUE_HEX_VIEW = \"valueHexView\";\nconst IS_HEX_ONLY = \"isHexOnly\";\nconst ID_BLOCK = \"idBlock\";\nconst TAG_CLASS = \"tagClass\";\nconst TAG_NUMBER = \"tagNumber\";\nconst IS_CONSTRUCTED = \"isConstructed\";\nconst FROM_BER = \"fromBER\";\nconst TO_BER = \"toBER\";\nconst LOCAL = \"local\";\nconst EMPTY_STRING = \"\";\nconst EMPTY_BUFFER = new ArrayBuffer(0);\nconst EMPTY_VIEW = new Uint8Array(0);\nconst END_OF_CONTENT_NAME = \"EndOfContent\";\nconst OCTET_STRING_NAME = \"OCTET STRING\";\nconst BIT_STRING_NAME = \"BIT STRING\";\n\nfunction HexBlock(BaseClass) {\n    var _a;\n    return _a = class Some extends BaseClass {\n            get valueHex() {\n                return this.valueHexView.slice().buffer;\n            }\n            set valueHex(value) {\n                this.valueHexView = new Uint8Array(value);\n            }\n            constructor(...args) {\n                var _b;\n                super(...args);\n                const params = args[0] || {};\n                this.isHexOnly = (_b = params.isHexOnly) !== null && _b !== void 0 ? _b : false;\n                this.valueHexView = params.valueHex ? pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(params.valueHex) : EMPTY_VIEW;\n            }\n            fromBER(inputBuffer, inputOffset, inputLength) {\n                const view = inputBuffer instanceof ArrayBuffer ? new Uint8Array(inputBuffer) : inputBuffer;\n                if (!checkBufferParams(this, view, inputOffset, inputLength)) {\n                    return -1;\n                }\n                const endLength = inputOffset + inputLength;\n                this.valueHexView = view.subarray(inputOffset, endLength);\n                if (!this.valueHexView.length) {\n                    this.warnings.push(\"Zero buffer length\");\n                    return inputOffset;\n                }\n                this.blockLength = inputLength;\n                return endLength;\n            }\n            toBER(sizeOnly = false) {\n                if (!this.isHexOnly) {\n                    this.error = \"Flag 'isHexOnly' is not set, abort\";\n                    return EMPTY_BUFFER;\n                }\n                if (sizeOnly) {\n                    return new ArrayBuffer(this.valueHexView.byteLength);\n                }\n                return (this.valueHexView.byteLength === this.valueHexView.buffer.byteLength)\n                    ? this.valueHexView.buffer\n                    : this.valueHexView.slice().buffer;\n            }\n            toJSON() {\n                return {\n                    ...super.toJSON(),\n                    isHexOnly: this.isHexOnly,\n                    valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToHex(this.valueHexView),\n                };\n            }\n        },\n        _a.NAME = \"hexBlock\",\n        _a;\n}\n\nclass LocalBaseBlock {\n    static blockName() {\n        return this.NAME;\n    }\n    get valueBeforeDecode() {\n        return this.valueBeforeDecodeView.slice().buffer;\n    }\n    set valueBeforeDecode(value) {\n        this.valueBeforeDecodeView = new Uint8Array(value);\n    }\n    constructor({ blockLength = 0, error = EMPTY_STRING, warnings = [], valueBeforeDecode = EMPTY_VIEW, } = {}) {\n        this.blockLength = blockLength;\n        this.error = error;\n        this.warnings = warnings;\n        this.valueBeforeDecodeView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(valueBeforeDecode);\n    }\n    toJSON() {\n        return {\n            blockName: this.constructor.NAME,\n            blockLength: this.blockLength,\n            error: this.error,\n            warnings: this.warnings,\n            valueBeforeDecode: pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToHex(this.valueBeforeDecodeView),\n        };\n    }\n}\nLocalBaseBlock.NAME = \"baseBlock\";\n\nclass ValueBlock extends LocalBaseBlock {\n    fromBER(_inputBuffer, _inputOffset, _inputLength) {\n        throw TypeError(\"User need to make a specific function in a class which extends 'ValueBlock'\");\n    }\n    toBER(_sizeOnly, _writer) {\n        throw TypeError(\"User need to make a specific function in a class which extends 'ValueBlock'\");\n    }\n}\nValueBlock.NAME = \"valueBlock\";\n\nclass LocalIdentificationBlock extends HexBlock(LocalBaseBlock) {\n    constructor({ idBlock = {} } = {}) {\n        var _a, _b, _c, _d;\n        super();\n        if (idBlock) {\n            this.isHexOnly = (_a = idBlock.isHexOnly) !== null && _a !== void 0 ? _a : false;\n            this.valueHexView = idBlock.valueHex\n                ? pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(idBlock.valueHex)\n                : EMPTY_VIEW;\n            this.tagClass = (_b = idBlock.tagClass) !== null && _b !== void 0 ? _b : -1;\n            this.tagNumber = (_c = idBlock.tagNumber) !== null && _c !== void 0 ? _c : -1;\n            this.isConstructed = (_d = idBlock.isConstructed) !== null && _d !== void 0 ? _d : false;\n        }\n        else {\n            this.tagClass = -1;\n            this.tagNumber = -1;\n            this.isConstructed = false;\n        }\n    }\n    toBER(sizeOnly = false) {\n        let firstOctet = 0;\n        switch (this.tagClass) {\n            case 1:\n                firstOctet |= 0x00;\n                break;\n            case 2:\n                firstOctet |= 0x40;\n                break;\n            case 3:\n                firstOctet |= 0x80;\n                break;\n            case 4:\n                firstOctet |= 0xC0;\n                break;\n            default:\n                this.error = \"Unknown tag class\";\n                return EMPTY_BUFFER;\n        }\n        if (this.isConstructed)\n            firstOctet |= 0x20;\n        if (this.tagNumber < 31 && !this.isHexOnly) {\n            const retView = new Uint8Array(1);\n            if (!sizeOnly) {\n                let number = this.tagNumber;\n                number &= 0x1F;\n                firstOctet |= number;\n                retView[0] = firstOctet;\n            }\n            return retView.buffer;\n        }\n        if (!this.isHexOnly) {\n            const encodedBuf = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilToBase(this.tagNumber, 7);\n            const encodedView = new Uint8Array(encodedBuf);\n            const size = encodedBuf.byteLength;\n            const retView = new Uint8Array(size + 1);\n            retView[0] = (firstOctet | 0x1F);\n            if (!sizeOnly) {\n                for (let i = 0; i < (size - 1); i++)\n                    retView[i + 1] = encodedView[i] | 0x80;\n                retView[size] = encodedView[size - 1];\n            }\n            return retView.buffer;\n        }\n        const retView = new Uint8Array(this.valueHexView.byteLength + 1);\n        retView[0] = (firstOctet | 0x1F);\n        if (!sizeOnly) {\n            const curView = this.valueHexView;\n            for (let i = 0; i < (curView.length - 1); i++)\n                retView[i + 1] = curView[i] | 0x80;\n            retView[this.valueHexView.byteLength] = curView[curView.length - 1];\n        }\n        return retView.buffer;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const inputView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\n            return -1;\n        }\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\n        if (intBuffer.length === 0) {\n            this.error = \"Zero buffer length\";\n            return -1;\n        }\n        const tagClassMask = intBuffer[0] & 0xC0;\n        switch (tagClassMask) {\n            case 0x00:\n                this.tagClass = (1);\n                break;\n            case 0x40:\n                this.tagClass = (2);\n                break;\n            case 0x80:\n                this.tagClass = (3);\n                break;\n            case 0xC0:\n                this.tagClass = (4);\n                break;\n            default:\n                this.error = \"Unknown tag class\";\n                return -1;\n        }\n        this.isConstructed = (intBuffer[0] & 0x20) === 0x20;\n        this.isHexOnly = false;\n        const tagNumberMask = intBuffer[0] & 0x1F;\n        if (tagNumberMask !== 0x1F) {\n            this.tagNumber = (tagNumberMask);\n            this.blockLength = 1;\n        }\n        else {\n            let count = 1;\n            let intTagNumberBuffer = this.valueHexView = new Uint8Array(255);\n            let tagNumberBufferMaxLength = 255;\n            while (intBuffer[count] & 0x80) {\n                intTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F;\n                count++;\n                if (count >= intBuffer.length) {\n                    this.error = \"End of input reached before message was fully decoded\";\n                    return -1;\n                }\n                if (count === tagNumberBufferMaxLength) {\n                    tagNumberBufferMaxLength += 255;\n                    const tempBufferView = new Uint8Array(tagNumberBufferMaxLength);\n                    for (let i = 0; i < intTagNumberBuffer.length; i++)\n                        tempBufferView[i] = intTagNumberBuffer[i];\n                    intTagNumberBuffer = this.valueHexView = new Uint8Array(tagNumberBufferMaxLength);\n                }\n            }\n            this.blockLength = (count + 1);\n            intTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F;\n            const tempBufferView = new Uint8Array(count);\n            for (let i = 0; i < count; i++)\n                tempBufferView[i] = intTagNumberBuffer[i];\n            intTagNumberBuffer = this.valueHexView = new Uint8Array(count);\n            intTagNumberBuffer.set(tempBufferView);\n            if (this.blockLength <= 9)\n                this.tagNumber = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilFromBase(intTagNumberBuffer, 7);\n            else {\n                this.isHexOnly = true;\n                this.warnings.push(\"Tag too long, represented as hex-coded\");\n            }\n        }\n        if (((this.tagClass === 1))\n            && (this.isConstructed)) {\n            switch (this.tagNumber) {\n                case 1:\n                case 2:\n                case 5:\n                case 6:\n                case 9:\n                case 13:\n                case 14:\n                case 23:\n                case 24:\n                case 31:\n                case 32:\n                case 33:\n                case 34:\n                    this.error = \"Constructed encoding used for primitive type\";\n                    return -1;\n            }\n        }\n        return (inputOffset + this.blockLength);\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            tagClass: this.tagClass,\n            tagNumber: this.tagNumber,\n            isConstructed: this.isConstructed,\n        };\n    }\n}\nLocalIdentificationBlock.NAME = \"identificationBlock\";\n\nclass LocalLengthBlock extends LocalBaseBlock {\n    constructor({ lenBlock = {} } = {}) {\n        var _a, _b, _c;\n        super();\n        this.isIndefiniteForm = (_a = lenBlock.isIndefiniteForm) !== null && _a !== void 0 ? _a : false;\n        this.longFormUsed = (_b = lenBlock.longFormUsed) !== null && _b !== void 0 ? _b : false;\n        this.length = (_c = lenBlock.length) !== null && _c !== void 0 ? _c : 0;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const view = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, view, inputOffset, inputLength)) {\n            return -1;\n        }\n        const intBuffer = view.subarray(inputOffset, inputOffset + inputLength);\n        if (intBuffer.length === 0) {\n            this.error = \"Zero buffer length\";\n            return -1;\n        }\n        if (intBuffer[0] === 0xFF) {\n            this.error = \"Length block 0xFF is reserved by standard\";\n            return -1;\n        }\n        this.isIndefiniteForm = intBuffer[0] === 0x80;\n        if (this.isIndefiniteForm) {\n            this.blockLength = 1;\n            return (inputOffset + this.blockLength);\n        }\n        this.longFormUsed = !!(intBuffer[0] & 0x80);\n        if (this.longFormUsed === false) {\n            this.length = (intBuffer[0]);\n            this.blockLength = 1;\n            return (inputOffset + this.blockLength);\n        }\n        const count = intBuffer[0] & 0x7F;\n        if (count > 8) {\n            this.error = \"Too big integer\";\n            return -1;\n        }\n        if ((count + 1) > intBuffer.length) {\n            this.error = \"End of input reached before message was fully decoded\";\n            return -1;\n        }\n        const lenOffset = inputOffset + 1;\n        const lengthBufferView = view.subarray(lenOffset, lenOffset + count);\n        if (lengthBufferView[count - 1] === 0x00)\n            this.warnings.push(\"Needlessly long encoded length\");\n        this.length = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilFromBase(lengthBufferView, 8);\n        if (this.longFormUsed && (this.length <= 127))\n            this.warnings.push(\"Unnecessary usage of long length form\");\n        this.blockLength = count + 1;\n        return (inputOffset + this.blockLength);\n    }\n    toBER(sizeOnly = false) {\n        let retBuf;\n        let retView;\n        if (this.length > 127)\n            this.longFormUsed = true;\n        if (this.isIndefiniteForm) {\n            retBuf = new ArrayBuffer(1);\n            if (sizeOnly === false) {\n                retView = new Uint8Array(retBuf);\n                retView[0] = 0x80;\n            }\n            return retBuf;\n        }\n        if (this.longFormUsed) {\n            const encodedBuf = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilToBase(this.length, 8);\n            if (encodedBuf.byteLength > 127) {\n                this.error = \"Too big length\";\n                return (EMPTY_BUFFER);\n            }\n            retBuf = new ArrayBuffer(encodedBuf.byteLength + 1);\n            if (sizeOnly)\n                return retBuf;\n            const encodedView = new Uint8Array(encodedBuf);\n            retView = new Uint8Array(retBuf);\n            retView[0] = encodedBuf.byteLength | 0x80;\n            for (let i = 0; i < encodedBuf.byteLength; i++)\n                retView[i + 1] = encodedView[i];\n            return retBuf;\n        }\n        retBuf = new ArrayBuffer(1);\n        if (sizeOnly === false) {\n            retView = new Uint8Array(retBuf);\n            retView[0] = this.length;\n        }\n        return retBuf;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            isIndefiniteForm: this.isIndefiniteForm,\n            longFormUsed: this.longFormUsed,\n            length: this.length,\n        };\n    }\n}\nLocalLengthBlock.NAME = \"lengthBlock\";\n\nconst typeStore = {};\n\nclass BaseBlock extends LocalBaseBlock {\n    constructor({ name = EMPTY_STRING, optional = false, primitiveSchema, ...parameters } = {}, valueBlockType) {\n        super(parameters);\n        this.name = name;\n        this.optional = optional;\n        if (primitiveSchema) {\n            this.primitiveSchema = primitiveSchema;\n        }\n        this.idBlock = new LocalIdentificationBlock(parameters);\n        this.lenBlock = new LocalLengthBlock(parameters);\n        this.valueBlock = valueBlockType ? new valueBlockType(parameters) : new ValueBlock(parameters);\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm)\n            ? inputLength\n            : this.lenBlock.length);\n        if (resultOffset === -1) {\n            this.error = this.valueBlock.error;\n            return resultOffset;\n        }\n        if (!this.idBlock.error.length)\n            this.blockLength += this.idBlock.blockLength;\n        if (!this.lenBlock.error.length)\n            this.blockLength += this.lenBlock.blockLength;\n        if (!this.valueBlock.error.length)\n            this.blockLength += this.valueBlock.blockLength;\n        return resultOffset;\n    }\n    toBER(sizeOnly, writer) {\n        const _writer = writer || new ViewWriter();\n        if (!writer) {\n            prepareIndefiniteForm(this);\n        }\n        const idBlockBuf = this.idBlock.toBER(sizeOnly);\n        _writer.write(idBlockBuf);\n        if (this.lenBlock.isIndefiniteForm) {\n            _writer.write(new Uint8Array([0x80]).buffer);\n            this.valueBlock.toBER(sizeOnly, _writer);\n            _writer.write(new ArrayBuffer(2));\n        }\n        else {\n            const valueBlockBuf = this.valueBlock.toBER(sizeOnly);\n            this.lenBlock.length = valueBlockBuf.byteLength;\n            const lenBlockBuf = this.lenBlock.toBER(sizeOnly);\n            _writer.write(lenBlockBuf);\n            _writer.write(valueBlockBuf);\n        }\n        if (!writer) {\n            return _writer.final();\n        }\n        return EMPTY_BUFFER;\n    }\n    toJSON() {\n        const object = {\n            ...super.toJSON(),\n            idBlock: this.idBlock.toJSON(),\n            lenBlock: this.lenBlock.toJSON(),\n            valueBlock: this.valueBlock.toJSON(),\n            name: this.name,\n            optional: this.optional,\n        };\n        if (this.primitiveSchema)\n            object.primitiveSchema = this.primitiveSchema.toJSON();\n        return object;\n    }\n    toString(encoding = \"ascii\") {\n        if (encoding === \"ascii\") {\n            return this.onAsciiEncoding();\n        }\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToHex(this.toBER());\n    }\n    onAsciiEncoding() {\n        const name = this.constructor.NAME;\n        const value = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToHex(this.valueBlock.valueBeforeDecodeView);\n        return `${name} : ${value}`;\n    }\n    isEqual(other) {\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof this.constructor)) {\n            return false;\n        }\n        const thisRaw = this.toBER();\n        const otherRaw = other.toBER();\n        return pvutils__WEBPACK_IMPORTED_MODULE_1__.isEqualBuffer(thisRaw, otherRaw);\n    }\n}\nBaseBlock.NAME = \"BaseBlock\";\nfunction prepareIndefiniteForm(baseBlock) {\n    var _a;\n    if (baseBlock instanceof typeStore.Constructed) {\n        for (const value of baseBlock.valueBlock.value) {\n            if (prepareIndefiniteForm(value)) {\n                baseBlock.lenBlock.isIndefiniteForm = true;\n            }\n        }\n    }\n    return !!((_a = baseBlock.lenBlock) === null || _a === void 0 ? void 0 : _a.isIndefiniteForm);\n}\n\nclass BaseStringBlock extends BaseBlock {\n    getValue() {\n        return this.valueBlock.value;\n    }\n    setValue(value) {\n        this.valueBlock.value = value;\n    }\n    constructor({ value = EMPTY_STRING, ...parameters } = {}, stringValueBlockType) {\n        super(parameters, stringValueBlockType);\n        if (value) {\n            this.fromString(value);\n        }\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm)\n            ? inputLength\n            : this.lenBlock.length);\n        if (resultOffset === -1) {\n            this.error = this.valueBlock.error;\n            return resultOffset;\n        }\n        this.fromBuffer(this.valueBlock.valueHexView);\n        if (!this.idBlock.error.length)\n            this.blockLength += this.idBlock.blockLength;\n        if (!this.lenBlock.error.length)\n            this.blockLength += this.lenBlock.blockLength;\n        if (!this.valueBlock.error.length)\n            this.blockLength += this.valueBlock.blockLength;\n        return resultOffset;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : '${this.valueBlock.value}'`;\n    }\n}\nBaseStringBlock.NAME = \"BaseStringBlock\";\n\nclass LocalPrimitiveValueBlock extends HexBlock(ValueBlock) {\n    constructor({ isHexOnly = true, ...parameters } = {}) {\n        super(parameters);\n        this.isHexOnly = isHexOnly;\n    }\n}\nLocalPrimitiveValueBlock.NAME = \"PrimitiveValueBlock\";\n\nvar _a$w;\nclass Primitive extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, LocalPrimitiveValueBlock);\n        this.idBlock.isConstructed = false;\n    }\n}\n_a$w = Primitive;\n(() => {\n    typeStore.Primitive = _a$w;\n})();\nPrimitive.NAME = \"PRIMITIVE\";\n\nfunction localChangeType(inputObject, newType) {\n    if (inputObject instanceof newType) {\n        return inputObject;\n    }\n    const newObject = new newType();\n    newObject.idBlock = inputObject.idBlock;\n    newObject.lenBlock = inputObject.lenBlock;\n    newObject.warnings = inputObject.warnings;\n    newObject.valueBeforeDecodeView = inputObject.valueBeforeDecodeView;\n    return newObject;\n}\nfunction localFromBER(inputBuffer, inputOffset = 0, inputLength = inputBuffer.length) {\n    const incomingOffset = inputOffset;\n    let returnObject = new BaseBlock({}, ValueBlock);\n    const baseBlock = new LocalBaseBlock();\n    if (!checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength)) {\n        returnObject.error = baseBlock.error;\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    const intBuffer = inputBuffer.subarray(inputOffset, inputOffset + inputLength);\n    if (!intBuffer.length) {\n        returnObject.error = \"Zero buffer length\";\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    let resultOffset = returnObject.idBlock.fromBER(inputBuffer, inputOffset, inputLength);\n    if (returnObject.idBlock.warnings.length) {\n        returnObject.warnings.concat(returnObject.idBlock.warnings);\n    }\n    if (resultOffset === -1) {\n        returnObject.error = returnObject.idBlock.error;\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    inputOffset = resultOffset;\n    inputLength -= returnObject.idBlock.blockLength;\n    resultOffset = returnObject.lenBlock.fromBER(inputBuffer, inputOffset, inputLength);\n    if (returnObject.lenBlock.warnings.length) {\n        returnObject.warnings.concat(returnObject.lenBlock.warnings);\n    }\n    if (resultOffset === -1) {\n        returnObject.error = returnObject.lenBlock.error;\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    inputOffset = resultOffset;\n    inputLength -= returnObject.lenBlock.blockLength;\n    if (!returnObject.idBlock.isConstructed\n        && returnObject.lenBlock.isIndefiniteForm) {\n        returnObject.error = \"Indefinite length form used for primitive encoding form\";\n        return {\n            offset: -1,\n            result: returnObject,\n        };\n    }\n    let newASN1Type = BaseBlock;\n    switch (returnObject.idBlock.tagClass) {\n        case 1:\n            if ((returnObject.idBlock.tagNumber >= 37)\n                && (returnObject.idBlock.isHexOnly === false)) {\n                returnObject.error = \"UNIVERSAL 37 and upper tags are reserved by ASN.1 standard\";\n                return {\n                    offset: -1,\n                    result: returnObject,\n                };\n            }\n            switch (returnObject.idBlock.tagNumber) {\n                case 0:\n                    if ((returnObject.idBlock.isConstructed)\n                        && (returnObject.lenBlock.length > 0)) {\n                        returnObject.error = \"Type [UNIVERSAL 0] is reserved\";\n                        return {\n                            offset: -1,\n                            result: returnObject,\n                        };\n                    }\n                    newASN1Type = typeStore.EndOfContent;\n                    break;\n                case 1:\n                    newASN1Type = typeStore.Boolean;\n                    break;\n                case 2:\n                    newASN1Type = typeStore.Integer;\n                    break;\n                case 3:\n                    newASN1Type = typeStore.BitString;\n                    break;\n                case 4:\n                    newASN1Type = typeStore.OctetString;\n                    break;\n                case 5:\n                    newASN1Type = typeStore.Null;\n                    break;\n                case 6:\n                    newASN1Type = typeStore.ObjectIdentifier;\n                    break;\n                case 10:\n                    newASN1Type = typeStore.Enumerated;\n                    break;\n                case 12:\n                    newASN1Type = typeStore.Utf8String;\n                    break;\n                case 13:\n                    newASN1Type = typeStore.RelativeObjectIdentifier;\n                    break;\n                case 14:\n                    newASN1Type = typeStore.TIME;\n                    break;\n                case 15:\n                    returnObject.error = \"[UNIVERSAL 15] is reserved by ASN.1 standard\";\n                    return {\n                        offset: -1,\n                        result: returnObject,\n                    };\n                case 16:\n                    newASN1Type = typeStore.Sequence;\n                    break;\n                case 17:\n                    newASN1Type = typeStore.Set;\n                    break;\n                case 18:\n                    newASN1Type = typeStore.NumericString;\n                    break;\n                case 19:\n                    newASN1Type = typeStore.PrintableString;\n                    break;\n                case 20:\n                    newASN1Type = typeStore.TeletexString;\n                    break;\n                case 21:\n                    newASN1Type = typeStore.VideotexString;\n                    break;\n                case 22:\n                    newASN1Type = typeStore.IA5String;\n                    break;\n                case 23:\n                    newASN1Type = typeStore.UTCTime;\n                    break;\n                case 24:\n                    newASN1Type = typeStore.GeneralizedTime;\n                    break;\n                case 25:\n                    newASN1Type = typeStore.GraphicString;\n                    break;\n                case 26:\n                    newASN1Type = typeStore.VisibleString;\n                    break;\n                case 27:\n                    newASN1Type = typeStore.GeneralString;\n                    break;\n                case 28:\n                    newASN1Type = typeStore.UniversalString;\n                    break;\n                case 29:\n                    newASN1Type = typeStore.CharacterString;\n                    break;\n                case 30:\n                    newASN1Type = typeStore.BmpString;\n                    break;\n                case 31:\n                    newASN1Type = typeStore.DATE;\n                    break;\n                case 32:\n                    newASN1Type = typeStore.TimeOfDay;\n                    break;\n                case 33:\n                    newASN1Type = typeStore.DateTime;\n                    break;\n                case 34:\n                    newASN1Type = typeStore.Duration;\n                    break;\n                default: {\n                    const newObject = returnObject.idBlock.isConstructed\n                        ? new typeStore.Constructed()\n                        : new typeStore.Primitive();\n                    newObject.idBlock = returnObject.idBlock;\n                    newObject.lenBlock = returnObject.lenBlock;\n                    newObject.warnings = returnObject.warnings;\n                    returnObject = newObject;\n                }\n            }\n            break;\n        case 2:\n        case 3:\n        case 4:\n        default: {\n            newASN1Type = returnObject.idBlock.isConstructed\n                ? typeStore.Constructed\n                : typeStore.Primitive;\n        }\n    }\n    returnObject = localChangeType(returnObject, newASN1Type);\n    resultOffset = returnObject.fromBER(inputBuffer, inputOffset, returnObject.lenBlock.isIndefiniteForm ? inputLength : returnObject.lenBlock.length);\n    returnObject.valueBeforeDecodeView = inputBuffer.subarray(incomingOffset, incomingOffset + returnObject.blockLength);\n    return {\n        offset: resultOffset,\n        result: returnObject,\n    };\n}\nfunction fromBER(inputBuffer) {\n    if (!inputBuffer.byteLength) {\n        const result = new BaseBlock({}, ValueBlock);\n        result.error = \"Input buffer has zero length\";\n        return {\n            offset: -1,\n            result,\n        };\n    }\n    return localFromBER(pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer).slice(), 0, inputBuffer.byteLength);\n}\n\nfunction checkLen(indefiniteLength, length) {\n    if (indefiniteLength) {\n        return 1;\n    }\n    return length;\n}\nclass LocalConstructedValueBlock extends ValueBlock {\n    constructor({ value = [], isIndefiniteForm = false, ...parameters } = {}) {\n        super(parameters);\n        this.value = value;\n        this.isIndefiniteForm = isIndefiniteForm;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const view = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, view, inputOffset, inputLength)) {\n            return -1;\n        }\n        this.valueBeforeDecodeView = view.subarray(inputOffset, inputOffset + inputLength);\n        if (this.valueBeforeDecodeView.length === 0) {\n            this.warnings.push(\"Zero buffer length\");\n            return inputOffset;\n        }\n        let currentOffset = inputOffset;\n        while (checkLen(this.isIndefiniteForm, inputLength) > 0) {\n            const returnObject = localFromBER(view, currentOffset, inputLength);\n            if (returnObject.offset === -1) {\n                this.error = returnObject.result.error;\n                this.warnings.concat(returnObject.result.warnings);\n                return -1;\n            }\n            currentOffset = returnObject.offset;\n            this.blockLength += returnObject.result.blockLength;\n            inputLength -= returnObject.result.blockLength;\n            this.value.push(returnObject.result);\n            if (this.isIndefiniteForm && returnObject.result.constructor.NAME === END_OF_CONTENT_NAME) {\n                break;\n            }\n        }\n        if (this.isIndefiniteForm) {\n            if (this.value[this.value.length - 1].constructor.NAME === END_OF_CONTENT_NAME) {\n                this.value.pop();\n            }\n            else {\n                this.warnings.push(\"No EndOfContent block encoded\");\n            }\n        }\n        return currentOffset;\n    }\n    toBER(sizeOnly, writer) {\n        const _writer = writer || new ViewWriter();\n        for (let i = 0; i < this.value.length; i++) {\n            this.value[i].toBER(sizeOnly, _writer);\n        }\n        if (!writer) {\n            return _writer.final();\n        }\n        return EMPTY_BUFFER;\n    }\n    toJSON() {\n        const object = {\n            ...super.toJSON(),\n            isIndefiniteForm: this.isIndefiniteForm,\n            value: [],\n        };\n        for (const value of this.value) {\n            object.value.push(value.toJSON());\n        }\n        return object;\n    }\n}\nLocalConstructedValueBlock.NAME = \"ConstructedValueBlock\";\n\nvar _a$v;\nclass Constructed extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, LocalConstructedValueBlock);\n        this.idBlock.isConstructed = true;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm) ? inputLength : this.lenBlock.length);\n        if (resultOffset === -1) {\n            this.error = this.valueBlock.error;\n            return resultOffset;\n        }\n        if (!this.idBlock.error.length)\n            this.blockLength += this.idBlock.blockLength;\n        if (!this.lenBlock.error.length)\n            this.blockLength += this.lenBlock.blockLength;\n        if (!this.valueBlock.error.length)\n            this.blockLength += this.valueBlock.blockLength;\n        return resultOffset;\n    }\n    onAsciiEncoding() {\n        const values = [];\n        for (const value of this.valueBlock.value) {\n            values.push(value.toString(\"ascii\").split(\"\\n\").map((o) => `  ${o}`).join(\"\\n\"));\n        }\n        const blockName = this.idBlock.tagClass === 3\n            ? `[${this.idBlock.tagNumber}]`\n            : this.constructor.NAME;\n        return values.length\n            ? `${blockName} :\\n${values.join(\"\\n\")}`\n            : `${blockName} :`;\n    }\n}\n_a$v = Constructed;\n(() => {\n    typeStore.Constructed = _a$v;\n})();\nConstructed.NAME = \"CONSTRUCTED\";\n\nclass LocalEndOfContentValueBlock extends ValueBlock {\n    fromBER(inputBuffer, inputOffset, _inputLength) {\n        return inputOffset;\n    }\n    toBER(_sizeOnly) {\n        return EMPTY_BUFFER;\n    }\n}\nLocalEndOfContentValueBlock.override = \"EndOfContentValueBlock\";\n\nvar _a$u;\nclass EndOfContent extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, LocalEndOfContentValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 0;\n    }\n}\n_a$u = EndOfContent;\n(() => {\n    typeStore.EndOfContent = _a$u;\n})();\nEndOfContent.NAME = END_OF_CONTENT_NAME;\n\nvar _a$t;\nclass Null extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, ValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 5;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        if (this.lenBlock.length > 0)\n            this.warnings.push(\"Non-zero length of value block for Null type\");\n        if (!this.idBlock.error.length)\n            this.blockLength += this.idBlock.blockLength;\n        if (!this.lenBlock.error.length)\n            this.blockLength += this.lenBlock.blockLength;\n        this.blockLength += inputLength;\n        if ((inputOffset + inputLength) > inputBuffer.byteLength) {\n            this.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\n            return -1;\n        }\n        return (inputOffset + inputLength);\n    }\n    toBER(sizeOnly, writer) {\n        const retBuf = new ArrayBuffer(2);\n        if (!sizeOnly) {\n            const retView = new Uint8Array(retBuf);\n            retView[0] = 0x05;\n            retView[1] = 0x00;\n        }\n        if (writer) {\n            writer.write(retBuf);\n        }\n        return retBuf;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME}`;\n    }\n}\n_a$t = Null;\n(() => {\n    typeStore.Null = _a$t;\n})();\nNull.NAME = \"NULL\";\n\nclass LocalBooleanValueBlock extends HexBlock(ValueBlock) {\n    get value() {\n        for (const octet of this.valueHexView) {\n            if (octet > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n    set value(value) {\n        this.valueHexView[0] = value ? 0xFF : 0x00;\n    }\n    constructor({ value, ...parameters } = {}) {\n        super(parameters);\n        if (parameters.valueHex) {\n            this.valueHexView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(parameters.valueHex);\n        }\n        else {\n            this.valueHexView = new Uint8Array(1);\n        }\n        if (value) {\n            this.value = value;\n        }\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const inputView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\n            return -1;\n        }\n        this.valueHexView = inputView.subarray(inputOffset, inputOffset + inputLength);\n        if (inputLength > 1)\n            this.warnings.push(\"Boolean value encoded in more then 1 octet\");\n        this.isHexOnly = true;\n        pvutils__WEBPACK_IMPORTED_MODULE_1__.utilDecodeTC.call(this);\n        this.blockLength = inputLength;\n        return (inputOffset + inputLength);\n    }\n    toBER() {\n        return this.valueHexView.slice();\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            value: this.value,\n        };\n    }\n}\nLocalBooleanValueBlock.NAME = \"BooleanValueBlock\";\n\nvar _a$s;\nclass Boolean extends BaseBlock {\n    getValue() {\n        return this.valueBlock.value;\n    }\n    setValue(value) {\n        this.valueBlock.value = value;\n    }\n    constructor(parameters = {}) {\n        super(parameters, LocalBooleanValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 1;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.getValue}`;\n    }\n}\n_a$s = Boolean;\n(() => {\n    typeStore.Boolean = _a$s;\n})();\nBoolean.NAME = \"BOOLEAN\";\n\nclass LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock) {\n    constructor({ isConstructed = false, ...parameters } = {}) {\n        super(parameters);\n        this.isConstructed = isConstructed;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        let resultOffset = 0;\n        if (this.isConstructed) {\n            this.isHexOnly = false;\n            resultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\n            if (resultOffset === -1)\n                return resultOffset;\n            for (let i = 0; i < this.value.length; i++) {\n                const currentBlockName = this.value[i].constructor.NAME;\n                if (currentBlockName === END_OF_CONTENT_NAME) {\n                    if (this.isIndefiniteForm)\n                        break;\n                    else {\n                        this.error = \"EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only\";\n                        return -1;\n                    }\n                }\n                if (currentBlockName !== OCTET_STRING_NAME) {\n                    this.error = \"OCTET STRING may consists of OCTET STRINGs only\";\n                    return -1;\n                }\n            }\n        }\n        else {\n            this.isHexOnly = true;\n            resultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\n            this.blockLength = inputLength;\n        }\n        return resultOffset;\n    }\n    toBER(sizeOnly, writer) {\n        if (this.isConstructed)\n            return LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly, writer);\n        return sizeOnly\n            ? new ArrayBuffer(this.valueHexView.byteLength)\n            : this.valueHexView.slice().buffer;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            isConstructed: this.isConstructed,\n        };\n    }\n}\nLocalOctetStringValueBlock.NAME = \"OctetStringValueBlock\";\n\nvar _a$r;\nclass OctetString extends BaseBlock {\n    constructor({ idBlock = {}, lenBlock = {}, ...parameters } = {}) {\n        var _b, _c;\n        (_b = parameters.isConstructed) !== null && _b !== void 0 ? _b : (parameters.isConstructed = !!((_c = parameters.value) === null || _c === void 0 ? void 0 : _c.length));\n        super({\n            idBlock: {\n                isConstructed: parameters.isConstructed,\n                ...idBlock,\n            },\n            lenBlock: {\n                ...lenBlock,\n                isIndefiniteForm: !!parameters.isIndefiniteForm,\n            },\n            ...parameters,\n        }, LocalOctetStringValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 4;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        this.valueBlock.isConstructed = this.idBlock.isConstructed;\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n        if (inputLength === 0) {\n            if (this.idBlock.error.length === 0)\n                this.blockLength += this.idBlock.blockLength;\n            if (this.lenBlock.error.length === 0)\n                this.blockLength += this.lenBlock.blockLength;\n            return inputOffset;\n        }\n        if (!this.valueBlock.isConstructed) {\n            const view = inputBuffer instanceof ArrayBuffer ? new Uint8Array(inputBuffer) : inputBuffer;\n            const buf = view.subarray(inputOffset, inputOffset + inputLength);\n            try {\n                if (buf.byteLength) {\n                    const asn = localFromBER(buf, 0, buf.byteLength);\n                    if (asn.offset !== -1 && asn.offset === inputLength) {\n                        this.valueBlock.value = [asn.result];\n                    }\n                }\n            }\n            catch {\n            }\n        }\n        return super.fromBER(inputBuffer, inputOffset, inputLength);\n    }\n    onAsciiEncoding() {\n        if (this.valueBlock.isConstructed || (this.valueBlock.value && this.valueBlock.value.length)) {\n            return Constructed.prototype.onAsciiEncoding.call(this);\n        }\n        const name = this.constructor.NAME;\n        const value = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToHex(this.valueBlock.valueHexView);\n        return `${name} : ${value}`;\n    }\n    getValue() {\n        if (!this.idBlock.isConstructed) {\n            return this.valueBlock.valueHexView.slice().buffer;\n        }\n        const array = [];\n        for (const content of this.valueBlock.value) {\n            if (content instanceof _a$r) {\n                array.push(content.valueBlock.valueHexView);\n            }\n        }\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.concat(array);\n    }\n}\n_a$r = OctetString;\n(() => {\n    typeStore.OctetString = _a$r;\n})();\nOctetString.NAME = OCTET_STRING_NAME;\n\nclass LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock) {\n    constructor({ unusedBits = 0, isConstructed = false, ...parameters } = {}) {\n        super(parameters);\n        this.unusedBits = unusedBits;\n        this.isConstructed = isConstructed;\n        this.blockLength = this.valueHexView.byteLength;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        if (!inputLength) {\n            return inputOffset;\n        }\n        let resultOffset = -1;\n        if (this.isConstructed) {\n            resultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\n            if (resultOffset === -1)\n                return resultOffset;\n            for (const value of this.value) {\n                const currentBlockName = value.constructor.NAME;\n                if (currentBlockName === END_OF_CONTENT_NAME) {\n                    if (this.isIndefiniteForm)\n                        break;\n                    else {\n                        this.error = \"EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only\";\n                        return -1;\n                    }\n                }\n                if (currentBlockName !== BIT_STRING_NAME) {\n                    this.error = \"BIT STRING may consists of BIT STRINGs only\";\n                    return -1;\n                }\n                const valueBlock = value.valueBlock;\n                if ((this.unusedBits > 0) && (valueBlock.unusedBits > 0)) {\n                    this.error = \"Using of \\\"unused bits\\\" inside constructive BIT STRING allowed for least one only\";\n                    return -1;\n                }\n                this.unusedBits = valueBlock.unusedBits;\n            }\n            return resultOffset;\n        }\n        const inputView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\n            return -1;\n        }\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\n        this.unusedBits = intBuffer[0];\n        if (this.unusedBits > 7) {\n            this.error = \"Unused bits for BitString must be in range 0-7\";\n            return -1;\n        }\n        if (!this.unusedBits) {\n            const buf = intBuffer.subarray(1);\n            try {\n                if (buf.byteLength) {\n                    const asn = localFromBER(buf, 0, buf.byteLength);\n                    if (asn.offset !== -1 && asn.offset === (inputLength - 1)) {\n                        this.value = [asn.result];\n                    }\n                }\n            }\n            catch {\n            }\n        }\n        this.valueHexView = intBuffer.subarray(1);\n        this.blockLength = intBuffer.length;\n        return (inputOffset + inputLength);\n    }\n    toBER(sizeOnly, writer) {\n        if (this.isConstructed) {\n            return LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly, writer);\n        }\n        if (sizeOnly) {\n            return new ArrayBuffer(this.valueHexView.byteLength + 1);\n        }\n        if (!this.valueHexView.byteLength) {\n            return EMPTY_BUFFER;\n        }\n        const retView = new Uint8Array(this.valueHexView.length + 1);\n        retView[0] = this.unusedBits;\n        retView.set(this.valueHexView, 1);\n        return retView.buffer;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            unusedBits: this.unusedBits,\n            isConstructed: this.isConstructed,\n        };\n    }\n}\nLocalBitStringValueBlock.NAME = \"BitStringValueBlock\";\n\nvar _a$q;\nclass BitString extends BaseBlock {\n    constructor({ idBlock = {}, lenBlock = {}, ...parameters } = {}) {\n        var _b, _c;\n        (_b = parameters.isConstructed) !== null && _b !== void 0 ? _b : (parameters.isConstructed = !!((_c = parameters.value) === null || _c === void 0 ? void 0 : _c.length));\n        super({\n            idBlock: {\n                isConstructed: parameters.isConstructed,\n                ...idBlock,\n            },\n            lenBlock: {\n                ...lenBlock,\n                isIndefiniteForm: !!parameters.isIndefiniteForm,\n            },\n            ...parameters,\n        }, LocalBitStringValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 3;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        this.valueBlock.isConstructed = this.idBlock.isConstructed;\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\n        return super.fromBER(inputBuffer, inputOffset, inputLength);\n    }\n    onAsciiEncoding() {\n        if (this.valueBlock.isConstructed || (this.valueBlock.value && this.valueBlock.value.length)) {\n            return Constructed.prototype.onAsciiEncoding.call(this);\n        }\n        else {\n            const bits = [];\n            const valueHex = this.valueBlock.valueHexView;\n            for (const byte of valueHex) {\n                bits.push(byte.toString(2).padStart(8, \"0\"));\n            }\n            const bitsStr = bits.join(\"\");\n            const name = this.constructor.NAME;\n            const value = bitsStr.substring(0, bitsStr.length - this.valueBlock.unusedBits);\n            return `${name} : ${value}`;\n        }\n    }\n}\n_a$q = BitString;\n(() => {\n    typeStore.BitString = _a$q;\n})();\nBitString.NAME = BIT_STRING_NAME;\n\nvar _a$p;\nfunction viewAdd(first, second) {\n    const c = new Uint8Array([0]);\n    const firstView = new Uint8Array(first);\n    const secondView = new Uint8Array(second);\n    let firstViewCopy = firstView.slice(0);\n    const firstViewCopyLength = firstViewCopy.length - 1;\n    const secondViewCopy = secondView.slice(0);\n    const secondViewCopyLength = secondViewCopy.length - 1;\n    let value = 0;\n    const max = (secondViewCopyLength < firstViewCopyLength) ? firstViewCopyLength : secondViewCopyLength;\n    let counter = 0;\n    for (let i = max; i >= 0; i--, counter++) {\n        switch (true) {\n            case (counter < secondViewCopy.length):\n                value = firstViewCopy[firstViewCopyLength - counter] + secondViewCopy[secondViewCopyLength - counter] + c[0];\n                break;\n            default:\n                value = firstViewCopy[firstViewCopyLength - counter] + c[0];\n        }\n        c[0] = value / 10;\n        switch (true) {\n            case (counter >= firstViewCopy.length):\n                firstViewCopy = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilConcatView(new Uint8Array([value % 10]), firstViewCopy);\n                break;\n            default:\n                firstViewCopy[firstViewCopyLength - counter] = value % 10;\n        }\n    }\n    if (c[0] > 0)\n        firstViewCopy = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilConcatView(c, firstViewCopy);\n    return firstViewCopy;\n}\nfunction power2(n) {\n    if (n >= powers2.length) {\n        for (let p = powers2.length; p <= n; p++) {\n            const c = new Uint8Array([0]);\n            let digits = (powers2[p - 1]).slice(0);\n            for (let i = (digits.length - 1); i >= 0; i--) {\n                const newValue = new Uint8Array([(digits[i] << 1) + c[0]]);\n                c[0] = newValue[0] / 10;\n                digits[i] = newValue[0] % 10;\n            }\n            if (c[0] > 0)\n                digits = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilConcatView(c, digits);\n            powers2.push(digits);\n        }\n    }\n    return powers2[n];\n}\nfunction viewSub(first, second) {\n    let b = 0;\n    const firstView = new Uint8Array(first);\n    const secondView = new Uint8Array(second);\n    const firstViewCopy = firstView.slice(0);\n    const firstViewCopyLength = firstViewCopy.length - 1;\n    const secondViewCopy = secondView.slice(0);\n    const secondViewCopyLength = secondViewCopy.length - 1;\n    let value;\n    let counter = 0;\n    for (let i = secondViewCopyLength; i >= 0; i--, counter++) {\n        value = firstViewCopy[firstViewCopyLength - counter] - secondViewCopy[secondViewCopyLength - counter] - b;\n        switch (true) {\n            case (value < 0):\n                b = 1;\n                firstViewCopy[firstViewCopyLength - counter] = value + 10;\n                break;\n            default:\n                b = 0;\n                firstViewCopy[firstViewCopyLength - counter] = value;\n        }\n    }\n    if (b > 0) {\n        for (let i = (firstViewCopyLength - secondViewCopyLength + 1); i >= 0; i--, counter++) {\n            value = firstViewCopy[firstViewCopyLength - counter] - b;\n            if (value < 0) {\n                b = 1;\n                firstViewCopy[firstViewCopyLength - counter] = value + 10;\n            }\n            else {\n                b = 0;\n                firstViewCopy[firstViewCopyLength - counter] = value;\n                break;\n            }\n        }\n    }\n    return firstViewCopy.slice();\n}\nclass LocalIntegerValueBlock extends HexBlock(ValueBlock) {\n    setValueHex() {\n        if (this.valueHexView.length >= 4) {\n            this.warnings.push(\"Too big Integer for decoding, hex only\");\n            this.isHexOnly = true;\n            this._valueDec = 0;\n        }\n        else {\n            this.isHexOnly = false;\n            if (this.valueHexView.length > 0) {\n                this._valueDec = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilDecodeTC.call(this);\n            }\n        }\n    }\n    constructor({ value, ...parameters } = {}) {\n        super(parameters);\n        this._valueDec = 0;\n        if (parameters.valueHex) {\n            this.setValueHex();\n        }\n        if (value !== undefined) {\n            this.valueDec = value;\n        }\n    }\n    set valueDec(v) {\n        this._valueDec = v;\n        this.isHexOnly = false;\n        this.valueHexView = new Uint8Array(pvutils__WEBPACK_IMPORTED_MODULE_1__.utilEncodeTC(v));\n    }\n    get valueDec() {\n        return this._valueDec;\n    }\n    fromDER(inputBuffer, inputOffset, inputLength, expectedLength = 0) {\n        const offset = this.fromBER(inputBuffer, inputOffset, inputLength);\n        if (offset === -1)\n            return offset;\n        const view = this.valueHexView;\n        if ((view[0] === 0x00) && ((view[1] & 0x80) !== 0)) {\n            this.valueHexView = view.subarray(1);\n        }\n        else {\n            if (expectedLength !== 0) {\n                if (view.length < expectedLength) {\n                    if ((expectedLength - view.length) > 1)\n                        expectedLength = view.length + 1;\n                    this.valueHexView = view.subarray(expectedLength - view.length);\n                }\n            }\n        }\n        return offset;\n    }\n    toDER(sizeOnly = false) {\n        const view = this.valueHexView;\n        switch (true) {\n            case ((view[0] & 0x80) !== 0):\n                {\n                    const updatedView = new Uint8Array(this.valueHexView.length + 1);\n                    updatedView[0] = 0x00;\n                    updatedView.set(view, 1);\n                    this.valueHexView = updatedView;\n                }\n                break;\n            case ((view[0] === 0x00) && ((view[1] & 0x80) === 0)):\n                {\n                    this.valueHexView = this.valueHexView.subarray(1);\n                }\n                break;\n        }\n        return this.toBER(sizeOnly);\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const resultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\n        if (resultOffset === -1) {\n            return resultOffset;\n        }\n        this.setValueHex();\n        return resultOffset;\n    }\n    toBER(sizeOnly) {\n        return sizeOnly\n            ? new ArrayBuffer(this.valueHexView.length)\n            : this.valueHexView.slice().buffer;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            valueDec: this.valueDec,\n        };\n    }\n    toString() {\n        const firstBit = (this.valueHexView.length * 8) - 1;\n        let digits = new Uint8Array((this.valueHexView.length * 8) / 3);\n        let bitNumber = 0;\n        let currentByte;\n        const asn1View = this.valueHexView;\n        let result = \"\";\n        let flag = false;\n        for (let byteNumber = (asn1View.byteLength - 1); byteNumber >= 0; byteNumber--) {\n            currentByte = asn1View[byteNumber];\n            for (let i = 0; i < 8; i++) {\n                if ((currentByte & 1) === 1) {\n                    switch (bitNumber) {\n                        case firstBit:\n                            digits = viewSub(power2(bitNumber), digits);\n                            result = \"-\";\n                            break;\n                        default:\n                            digits = viewAdd(digits, power2(bitNumber));\n                    }\n                }\n                bitNumber++;\n                currentByte >>= 1;\n            }\n        }\n        for (let i = 0; i < digits.length; i++) {\n            if (digits[i])\n                flag = true;\n            if (flag)\n                result += digitsString.charAt(digits[i]);\n        }\n        if (flag === false)\n            result += digitsString.charAt(0);\n        return result;\n    }\n}\n_a$p = LocalIntegerValueBlock;\nLocalIntegerValueBlock.NAME = \"IntegerValueBlock\";\n(() => {\n    Object.defineProperty(_a$p.prototype, \"valueHex\", {\n        set: function (v) {\n            this.valueHexView = new Uint8Array(v);\n            this.setValueHex();\n        },\n        get: function () {\n            return this.valueHexView.slice().buffer;\n        },\n    });\n})();\n\nvar _a$o;\nclass Integer extends BaseBlock {\n    constructor(parameters = {}) {\n        super(parameters, LocalIntegerValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 2;\n    }\n    toBigInt() {\n        assertBigInt();\n        return BigInt(this.valueBlock.toString());\n    }\n    static fromBigInt(value) {\n        assertBigInt();\n        const bigIntValue = BigInt(value);\n        const writer = new ViewWriter();\n        const hex = bigIntValue.toString(16).replace(/^-/, \"\");\n        const view = new Uint8Array(pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.FromHex(hex));\n        if (bigIntValue < 0) {\n            const first = new Uint8Array(view.length + (view[0] & 0x80 ? 1 : 0));\n            first[0] |= 0x80;\n            const firstInt = BigInt(`0x${pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToHex(first)}`);\n            const secondInt = firstInt + bigIntValue;\n            const second = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.FromHex(secondInt.toString(16)));\n            second[0] |= 0x80;\n            writer.write(second);\n        }\n        else {\n            if (view[0] & 0x80) {\n                writer.write(new Uint8Array([0]));\n            }\n            writer.write(view);\n        }\n        const res = new _a$o({ valueHex: writer.final() });\n        return res;\n    }\n    convertToDER() {\n        const integer = new _a$o({ valueHex: this.valueBlock.valueHexView });\n        integer.valueBlock.toDER();\n        return integer;\n    }\n    convertFromDER() {\n        return new _a$o({\n            valueHex: this.valueBlock.valueHexView[0] === 0\n                ? this.valueBlock.valueHexView.subarray(1)\n                : this.valueBlock.valueHexView,\n        });\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.valueBlock.toString()}`;\n    }\n}\n_a$o = Integer;\n(() => {\n    typeStore.Integer = _a$o;\n})();\nInteger.NAME = \"INTEGER\";\n\nvar _a$n;\nclass Enumerated extends Integer {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 10;\n    }\n}\n_a$n = Enumerated;\n(() => {\n    typeStore.Enumerated = _a$n;\n})();\nEnumerated.NAME = \"ENUMERATED\";\n\nclass LocalSidValueBlock extends HexBlock(ValueBlock) {\n    constructor({ valueDec = -1, isFirstSid = false, ...parameters } = {}) {\n        super(parameters);\n        this.valueDec = valueDec;\n        this.isFirstSid = isFirstSid;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        if (!inputLength) {\n            return inputOffset;\n        }\n        const inputView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\n            return -1;\n        }\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\n        this.valueHexView = new Uint8Array(inputLength);\n        for (let i = 0; i < inputLength; i++) {\n            this.valueHexView[i] = intBuffer[i] & 0x7F;\n            this.blockLength++;\n            if ((intBuffer[i] & 0x80) === 0x00)\n                break;\n        }\n        const tempView = new Uint8Array(this.blockLength);\n        for (let i = 0; i < this.blockLength; i++) {\n            tempView[i] = this.valueHexView[i];\n        }\n        this.valueHexView = tempView;\n        if ((intBuffer[this.blockLength - 1] & 0x80) !== 0x00) {\n            this.error = \"End of input reached before message was fully decoded\";\n            return -1;\n        }\n        if (this.valueHexView[0] === 0x00)\n            this.warnings.push(\"Needlessly long format of SID encoding\");\n        if (this.blockLength <= 8)\n            this.valueDec = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilFromBase(this.valueHexView, 7);\n        else {\n            this.isHexOnly = true;\n            this.warnings.push(\"Too big SID for decoding, hex only\");\n        }\n        return (inputOffset + this.blockLength);\n    }\n    set valueBigInt(value) {\n        assertBigInt();\n        let bits = BigInt(value).toString(2);\n        while (bits.length % 7) {\n            bits = \"0\" + bits;\n        }\n        const bytes = new Uint8Array(bits.length / 7);\n        for (let i = 0; i < bytes.length; i++) {\n            bytes[i] = parseInt(bits.slice(i * 7, i * 7 + 7), 2) + (i + 1 < bytes.length ? 0x80 : 0);\n        }\n        this.fromBER(bytes.buffer, 0, bytes.length);\n    }\n    toBER(sizeOnly) {\n        if (this.isHexOnly) {\n            if (sizeOnly)\n                return (new ArrayBuffer(this.valueHexView.byteLength));\n            const curView = this.valueHexView;\n            const retView = new Uint8Array(this.blockLength);\n            for (let i = 0; i < (this.blockLength - 1); i++)\n                retView[i] = curView[i] | 0x80;\n            retView[this.blockLength - 1] = curView[this.blockLength - 1];\n            return retView.buffer;\n        }\n        const encodedBuf = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilToBase(this.valueDec, 7);\n        if (encodedBuf.byteLength === 0) {\n            this.error = \"Error during encoding SID value\";\n            return EMPTY_BUFFER;\n        }\n        const retView = new Uint8Array(encodedBuf.byteLength);\n        if (!sizeOnly) {\n            const encodedView = new Uint8Array(encodedBuf);\n            const len = encodedBuf.byteLength - 1;\n            for (let i = 0; i < len; i++)\n                retView[i] = encodedView[i] | 0x80;\n            retView[len] = encodedView[len];\n        }\n        return retView;\n    }\n    toString() {\n        let result = \"\";\n        if (this.isHexOnly)\n            result = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToHex(this.valueHexView);\n        else {\n            if (this.isFirstSid) {\n                let sidValue = this.valueDec;\n                if (this.valueDec <= 39)\n                    result = \"0.\";\n                else {\n                    if (this.valueDec <= 79) {\n                        result = \"1.\";\n                        sidValue -= 40;\n                    }\n                    else {\n                        result = \"2.\";\n                        sidValue -= 80;\n                    }\n                }\n                result += sidValue.toString();\n            }\n            else\n                result = this.valueDec.toString();\n        }\n        return result;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            valueDec: this.valueDec,\n            isFirstSid: this.isFirstSid,\n        };\n    }\n}\nLocalSidValueBlock.NAME = \"sidBlock\";\n\nclass LocalObjectIdentifierValueBlock extends ValueBlock {\n    constructor({ value = EMPTY_STRING, ...parameters } = {}) {\n        super(parameters);\n        this.value = [];\n        if (value) {\n            this.fromString(value);\n        }\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        let resultOffset = inputOffset;\n        while (inputLength > 0) {\n            const sidBlock = new LocalSidValueBlock();\n            resultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\n            if (resultOffset === -1) {\n                this.blockLength = 0;\n                this.error = sidBlock.error;\n                return resultOffset;\n            }\n            if (this.value.length === 0)\n                sidBlock.isFirstSid = true;\n            this.blockLength += sidBlock.blockLength;\n            inputLength -= sidBlock.blockLength;\n            this.value.push(sidBlock);\n        }\n        return resultOffset;\n    }\n    toBER(sizeOnly) {\n        const retBuffers = [];\n        for (let i = 0; i < this.value.length; i++) {\n            const valueBuf = this.value[i].toBER(sizeOnly);\n            if (valueBuf.byteLength === 0) {\n                this.error = this.value[i].error;\n                return EMPTY_BUFFER;\n            }\n            retBuffers.push(valueBuf);\n        }\n        return concat(retBuffers);\n    }\n    fromString(string) {\n        this.value = [];\n        let pos1 = 0;\n        let pos2 = 0;\n        let sid = \"\";\n        let flag = false;\n        do {\n            pos2 = string.indexOf(\".\", pos1);\n            if (pos2 === -1)\n                sid = string.substring(pos1);\n            else\n                sid = string.substring(pos1, pos2);\n            pos1 = pos2 + 1;\n            if (flag) {\n                const sidBlock = this.value[0];\n                let plus = 0;\n                switch (sidBlock.valueDec) {\n                    case 0:\n                        break;\n                    case 1:\n                        plus = 40;\n                        break;\n                    case 2:\n                        plus = 80;\n                        break;\n                    default:\n                        this.value = [];\n                        return;\n                }\n                const parsedSID = parseInt(sid, 10);\n                if (isNaN(parsedSID))\n                    return;\n                sidBlock.valueDec = parsedSID + plus;\n                flag = false;\n            }\n            else {\n                const sidBlock = new LocalSidValueBlock();\n                if (sid > Number.MAX_SAFE_INTEGER) {\n                    assertBigInt();\n                    const sidValue = BigInt(sid);\n                    sidBlock.valueBigInt = sidValue;\n                }\n                else {\n                    sidBlock.valueDec = parseInt(sid, 10);\n                    if (isNaN(sidBlock.valueDec))\n                        return;\n                }\n                if (!this.value.length) {\n                    sidBlock.isFirstSid = true;\n                    flag = true;\n                }\n                this.value.push(sidBlock);\n            }\n        } while (pos2 !== -1);\n    }\n    toString() {\n        let result = \"\";\n        let isHexOnly = false;\n        for (let i = 0; i < this.value.length; i++) {\n            isHexOnly = this.value[i].isHexOnly;\n            let sidStr = this.value[i].toString();\n            if (i !== 0)\n                result = `${result}.`;\n            if (isHexOnly) {\n                sidStr = `{${sidStr}}`;\n                if (this.value[i].isFirstSid)\n                    result = `2.{${sidStr} - 80}`;\n                else\n                    result += sidStr;\n            }\n            else\n                result += sidStr;\n        }\n        return result;\n    }\n    toJSON() {\n        const object = {\n            ...super.toJSON(),\n            value: this.toString(),\n            sidArray: [],\n        };\n        for (let i = 0; i < this.value.length; i++) {\n            object.sidArray.push(this.value[i].toJSON());\n        }\n        return object;\n    }\n}\nLocalObjectIdentifierValueBlock.NAME = \"ObjectIdentifierValueBlock\";\n\nvar _a$m;\nclass ObjectIdentifier extends BaseBlock {\n    getValue() {\n        return this.valueBlock.toString();\n    }\n    setValue(value) {\n        this.valueBlock.fromString(value);\n    }\n    constructor(parameters = {}) {\n        super(parameters, LocalObjectIdentifierValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 6;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.valueBlock.toString() || \"empty\"}`;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            value: this.getValue(),\n        };\n    }\n}\n_a$m = ObjectIdentifier;\n(() => {\n    typeStore.ObjectIdentifier = _a$m;\n})();\nObjectIdentifier.NAME = \"OBJECT IDENTIFIER\";\n\nclass LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock) {\n    constructor({ valueDec = 0, ...parameters } = {}) {\n        super(parameters);\n        this.valueDec = valueDec;\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        if (inputLength === 0)\n            return inputOffset;\n        const inputView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength))\n            return -1;\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\n        this.valueHexView = new Uint8Array(inputLength);\n        for (let i = 0; i < inputLength; i++) {\n            this.valueHexView[i] = intBuffer[i] & 0x7F;\n            this.blockLength++;\n            if ((intBuffer[i] & 0x80) === 0x00)\n                break;\n        }\n        const tempView = new Uint8Array(this.blockLength);\n        for (let i = 0; i < this.blockLength; i++)\n            tempView[i] = this.valueHexView[i];\n        this.valueHexView = tempView;\n        if ((intBuffer[this.blockLength - 1] & 0x80) !== 0x00) {\n            this.error = \"End of input reached before message was fully decoded\";\n            return -1;\n        }\n        if (this.valueHexView[0] === 0x00)\n            this.warnings.push(\"Needlessly long format of SID encoding\");\n        if (this.blockLength <= 8)\n            this.valueDec = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilFromBase(this.valueHexView, 7);\n        else {\n            this.isHexOnly = true;\n            this.warnings.push(\"Too big SID for decoding, hex only\");\n        }\n        return (inputOffset + this.blockLength);\n    }\n    toBER(sizeOnly) {\n        if (this.isHexOnly) {\n            if (sizeOnly)\n                return (new ArrayBuffer(this.valueHexView.byteLength));\n            const curView = this.valueHexView;\n            const retView = new Uint8Array(this.blockLength);\n            for (let i = 0; i < (this.blockLength - 1); i++)\n                retView[i] = curView[i] | 0x80;\n            retView[this.blockLength - 1] = curView[this.blockLength - 1];\n            return retView.buffer;\n        }\n        const encodedBuf = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilToBase(this.valueDec, 7);\n        if (encodedBuf.byteLength === 0) {\n            this.error = \"Error during encoding SID value\";\n            return EMPTY_BUFFER;\n        }\n        const retView = new Uint8Array(encodedBuf.byteLength);\n        if (!sizeOnly) {\n            const encodedView = new Uint8Array(encodedBuf);\n            const len = encodedBuf.byteLength - 1;\n            for (let i = 0; i < len; i++)\n                retView[i] = encodedView[i] | 0x80;\n            retView[len] = encodedView[len];\n        }\n        return retView.buffer;\n    }\n    toString() {\n        let result = \"\";\n        if (this.isHexOnly)\n            result = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToHex(this.valueHexView);\n        else {\n            result = this.valueDec.toString();\n        }\n        return result;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            valueDec: this.valueDec,\n        };\n    }\n}\nLocalRelativeSidValueBlock.NAME = \"relativeSidBlock\";\n\nclass LocalRelativeObjectIdentifierValueBlock extends ValueBlock {\n    constructor({ value = EMPTY_STRING, ...parameters } = {}) {\n        super(parameters);\n        this.value = [];\n        if (value) {\n            this.fromString(value);\n        }\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        let resultOffset = inputOffset;\n        while (inputLength > 0) {\n            const sidBlock = new LocalRelativeSidValueBlock();\n            resultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\n            if (resultOffset === -1) {\n                this.blockLength = 0;\n                this.error = sidBlock.error;\n                return resultOffset;\n            }\n            this.blockLength += sidBlock.blockLength;\n            inputLength -= sidBlock.blockLength;\n            this.value.push(sidBlock);\n        }\n        return resultOffset;\n    }\n    toBER(sizeOnly, _writer) {\n        const retBuffers = [];\n        for (let i = 0; i < this.value.length; i++) {\n            const valueBuf = this.value[i].toBER(sizeOnly);\n            if (valueBuf.byteLength === 0) {\n                this.error = this.value[i].error;\n                return EMPTY_BUFFER;\n            }\n            retBuffers.push(valueBuf);\n        }\n        return concat(retBuffers);\n    }\n    fromString(string) {\n        this.value = [];\n        let pos1 = 0;\n        let pos2 = 0;\n        let sid = \"\";\n        do {\n            pos2 = string.indexOf(\".\", pos1);\n            if (pos2 === -1)\n                sid = string.substring(pos1);\n            else\n                sid = string.substring(pos1, pos2);\n            pos1 = pos2 + 1;\n            const sidBlock = new LocalRelativeSidValueBlock();\n            sidBlock.valueDec = parseInt(sid, 10);\n            if (isNaN(sidBlock.valueDec))\n                return true;\n            this.value.push(sidBlock);\n        } while (pos2 !== -1);\n        return true;\n    }\n    toString() {\n        let result = \"\";\n        let isHexOnly = false;\n        for (let i = 0; i < this.value.length; i++) {\n            isHexOnly = this.value[i].isHexOnly;\n            let sidStr = this.value[i].toString();\n            if (i !== 0)\n                result = `${result}.`;\n            if (isHexOnly) {\n                sidStr = `{${sidStr}}`;\n                result += sidStr;\n            }\n            else\n                result += sidStr;\n        }\n        return result;\n    }\n    toJSON() {\n        const object = {\n            ...super.toJSON(),\n            value: this.toString(),\n            sidArray: [],\n        };\n        for (let i = 0; i < this.value.length; i++)\n            object.sidArray.push(this.value[i].toJSON());\n        return object;\n    }\n}\nLocalRelativeObjectIdentifierValueBlock.NAME = \"RelativeObjectIdentifierValueBlock\";\n\nvar _a$l;\nclass RelativeObjectIdentifier extends BaseBlock {\n    getValue() {\n        return this.valueBlock.toString();\n    }\n    setValue(value) {\n        this.valueBlock.fromString(value);\n    }\n    constructor(parameters = {}) {\n        super(parameters, LocalRelativeObjectIdentifierValueBlock);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 13;\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.valueBlock.toString() || \"empty\"}`;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            value: this.getValue(),\n        };\n    }\n}\n_a$l = RelativeObjectIdentifier;\n(() => {\n    typeStore.RelativeObjectIdentifier = _a$l;\n})();\nRelativeObjectIdentifier.NAME = \"RelativeObjectIdentifier\";\n\nvar _a$k;\nclass Sequence extends Constructed {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 16;\n    }\n}\n_a$k = Sequence;\n(() => {\n    typeStore.Sequence = _a$k;\n})();\nSequence.NAME = \"SEQUENCE\";\n\nvar _a$j;\nclass Set extends Constructed {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 17;\n    }\n}\n_a$j = Set;\n(() => {\n    typeStore.Set = _a$j;\n})();\nSet.NAME = \"SET\";\n\nclass LocalStringValueBlock extends HexBlock(ValueBlock) {\n    constructor({ ...parameters } = {}) {\n        super(parameters);\n        this.isHexOnly = true;\n        this.value = EMPTY_STRING;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            value: this.value,\n        };\n    }\n}\nLocalStringValueBlock.NAME = \"StringValueBlock\";\n\nclass LocalSimpleStringValueBlock extends LocalStringValueBlock {\n}\nLocalSimpleStringValueBlock.NAME = \"SimpleStringValueBlock\";\n\nclass LocalSimpleStringBlock extends BaseStringBlock {\n    constructor({ ...parameters } = {}) {\n        super(parameters, LocalSimpleStringValueBlock);\n    }\n    fromBuffer(inputBuffer) {\n        this.valueBlock.value = String.fromCharCode.apply(null, pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer));\n    }\n    fromString(inputString) {\n        const strLen = inputString.length;\n        const view = this.valueBlock.valueHexView = new Uint8Array(strLen);\n        for (let i = 0; i < strLen; i++)\n            view[i] = inputString.charCodeAt(i);\n        this.valueBlock.value = inputString;\n    }\n}\nLocalSimpleStringBlock.NAME = \"SIMPLE STRING\";\n\nclass LocalUtf8StringValueBlock extends LocalSimpleStringBlock {\n    fromBuffer(inputBuffer) {\n        this.valueBlock.valueHexView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n        try {\n            this.valueBlock.value = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToUtf8String(inputBuffer);\n        }\n        catch (ex) {\n            this.warnings.push(`Error during \"decodeURIComponent\": ${ex}, using raw string`);\n            this.valueBlock.value = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToBinary(inputBuffer);\n        }\n    }\n    fromString(inputString) {\n        this.valueBlock.valueHexView = new Uint8Array(pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.FromUtf8String(inputString));\n        this.valueBlock.value = inputString;\n    }\n}\nLocalUtf8StringValueBlock.NAME = \"Utf8StringValueBlock\";\n\nvar _a$i;\nclass Utf8String extends LocalUtf8StringValueBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 12;\n    }\n}\n_a$i = Utf8String;\n(() => {\n    typeStore.Utf8String = _a$i;\n})();\nUtf8String.NAME = \"UTF8String\";\n\nclass LocalBmpStringValueBlock extends LocalSimpleStringBlock {\n    fromBuffer(inputBuffer) {\n        this.valueBlock.value = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.ToUtf16String(inputBuffer);\n        this.valueBlock.valueHexView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer);\n    }\n    fromString(inputString) {\n        this.valueBlock.value = inputString;\n        this.valueBlock.valueHexView = new Uint8Array(pvtsutils__WEBPACK_IMPORTED_MODULE_0__.Convert.FromUtf16String(inputString));\n    }\n}\nLocalBmpStringValueBlock.NAME = \"BmpStringValueBlock\";\n\nvar _a$h;\nclass BmpString extends LocalBmpStringValueBlock {\n    constructor({ ...parameters } = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 30;\n    }\n}\n_a$h = BmpString;\n(() => {\n    typeStore.BmpString = _a$h;\n})();\nBmpString.NAME = \"BMPString\";\n\nclass LocalUniversalStringValueBlock extends LocalSimpleStringBlock {\n    fromBuffer(inputBuffer) {\n        const copyBuffer = ArrayBuffer.isView(inputBuffer) ? inputBuffer.slice().buffer : inputBuffer.slice(0);\n        const valueView = new Uint8Array(copyBuffer);\n        for (let i = 0; i < valueView.length; i += 4) {\n            valueView[i] = valueView[i + 3];\n            valueView[i + 1] = valueView[i + 2];\n            valueView[i + 2] = 0x00;\n            valueView[i + 3] = 0x00;\n        }\n        this.valueBlock.value = String.fromCharCode.apply(null, new Uint32Array(copyBuffer));\n    }\n    fromString(inputString) {\n        const strLength = inputString.length;\n        const valueHexView = this.valueBlock.valueHexView = new Uint8Array(strLength * 4);\n        for (let i = 0; i < strLength; i++) {\n            const codeBuf = pvutils__WEBPACK_IMPORTED_MODULE_1__.utilToBase(inputString.charCodeAt(i), 8);\n            const codeView = new Uint8Array(codeBuf);\n            if (codeView.length > 4)\n                continue;\n            const dif = 4 - codeView.length;\n            for (let j = (codeView.length - 1); j >= 0; j--)\n                valueHexView[i * 4 + j + dif] = codeView[j];\n        }\n        this.valueBlock.value = inputString;\n    }\n}\nLocalUniversalStringValueBlock.NAME = \"UniversalStringValueBlock\";\n\nvar _a$g;\nclass UniversalString extends LocalUniversalStringValueBlock {\n    constructor({ ...parameters } = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 28;\n    }\n}\n_a$g = UniversalString;\n(() => {\n    typeStore.UniversalString = _a$g;\n})();\nUniversalString.NAME = \"UniversalString\";\n\nvar _a$f;\nclass NumericString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 18;\n    }\n}\n_a$f = NumericString;\n(() => {\n    typeStore.NumericString = _a$f;\n})();\nNumericString.NAME = \"NumericString\";\n\nvar _a$e;\nclass PrintableString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 19;\n    }\n}\n_a$e = PrintableString;\n(() => {\n    typeStore.PrintableString = _a$e;\n})();\nPrintableString.NAME = \"PrintableString\";\n\nvar _a$d;\nclass TeletexString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 20;\n    }\n}\n_a$d = TeletexString;\n(() => {\n    typeStore.TeletexString = _a$d;\n})();\nTeletexString.NAME = \"TeletexString\";\n\nvar _a$c;\nclass VideotexString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 21;\n    }\n}\n_a$c = VideotexString;\n(() => {\n    typeStore.VideotexString = _a$c;\n})();\nVideotexString.NAME = \"VideotexString\";\n\nvar _a$b;\nclass IA5String extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 22;\n    }\n}\n_a$b = IA5String;\n(() => {\n    typeStore.IA5String = _a$b;\n})();\nIA5String.NAME = \"IA5String\";\n\nvar _a$a;\nclass GraphicString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 25;\n    }\n}\n_a$a = GraphicString;\n(() => {\n    typeStore.GraphicString = _a$a;\n})();\nGraphicString.NAME = \"GraphicString\";\n\nvar _a$9;\nclass VisibleString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 26;\n    }\n}\n_a$9 = VisibleString;\n(() => {\n    typeStore.VisibleString = _a$9;\n})();\nVisibleString.NAME = \"VisibleString\";\n\nvar _a$8;\nclass GeneralString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 27;\n    }\n}\n_a$8 = GeneralString;\n(() => {\n    typeStore.GeneralString = _a$8;\n})();\nGeneralString.NAME = \"GeneralString\";\n\nvar _a$7;\nclass CharacterString extends LocalSimpleStringBlock {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 29;\n    }\n}\n_a$7 = CharacterString;\n(() => {\n    typeStore.CharacterString = _a$7;\n})();\nCharacterString.NAME = \"CharacterString\";\n\nvar _a$6;\nclass UTCTime extends VisibleString {\n    constructor({ value, valueDate, ...parameters } = {}) {\n        super(parameters);\n        this.year = 0;\n        this.month = 0;\n        this.day = 0;\n        this.hour = 0;\n        this.minute = 0;\n        this.second = 0;\n        if (value) {\n            this.fromString(value);\n            this.valueBlock.valueHexView = new Uint8Array(value.length);\n            for (let i = 0; i < value.length; i++)\n                this.valueBlock.valueHexView[i] = value.charCodeAt(i);\n        }\n        if (valueDate) {\n            this.fromDate(valueDate);\n            this.valueBlock.valueHexView = new Uint8Array(this.toBuffer());\n        }\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 23;\n    }\n    fromBuffer(inputBuffer) {\n        this.fromString(String.fromCharCode.apply(null, pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer)));\n    }\n    toBuffer() {\n        const str = this.toString();\n        const buffer = new ArrayBuffer(str.length);\n        const view = new Uint8Array(buffer);\n        for (let i = 0; i < str.length; i++)\n            view[i] = str.charCodeAt(i);\n        return buffer;\n    }\n    fromDate(inputDate) {\n        this.year = inputDate.getUTCFullYear();\n        this.month = inputDate.getUTCMonth() + 1;\n        this.day = inputDate.getUTCDate();\n        this.hour = inputDate.getUTCHours();\n        this.minute = inputDate.getUTCMinutes();\n        this.second = inputDate.getUTCSeconds();\n    }\n    toDate() {\n        return (new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second)));\n    }\n    fromString(inputString) {\n        const parser = /(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})Z/ig;\n        const parserArray = parser.exec(inputString);\n        if (parserArray === null) {\n            this.error = \"Wrong input string for conversion\";\n            return;\n        }\n        const year = parseInt(parserArray[1], 10);\n        if (year >= 50)\n            this.year = 1900 + year;\n        else\n            this.year = 2000 + year;\n        this.month = parseInt(parserArray[2], 10);\n        this.day = parseInt(parserArray[3], 10);\n        this.hour = parseInt(parserArray[4], 10);\n        this.minute = parseInt(parserArray[5], 10);\n        this.second = parseInt(parserArray[6], 10);\n    }\n    toString(encoding = \"iso\") {\n        if (encoding === \"iso\") {\n            const outputArray = new Array(7);\n            outputArray[0] = pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(((this.year < 2000) ? (this.year - 1900) : (this.year - 2000)), 2);\n            outputArray[1] = pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.month, 2);\n            outputArray[2] = pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.day, 2);\n            outputArray[3] = pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.hour, 2);\n            outputArray[4] = pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.minute, 2);\n            outputArray[5] = pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.second, 2);\n            outputArray[6] = \"Z\";\n            return outputArray.join(\"\");\n        }\n        return super.toString(encoding);\n    }\n    onAsciiEncoding() {\n        return `${this.constructor.NAME} : ${this.toDate().toISOString()}`;\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            year: this.year,\n            month: this.month,\n            day: this.day,\n            hour: this.hour,\n            minute: this.minute,\n            second: this.second,\n        };\n    }\n}\n_a$6 = UTCTime;\n(() => {\n    typeStore.UTCTime = _a$6;\n})();\nUTCTime.NAME = \"UTCTime\";\n\nvar _a$5;\nclass GeneralizedTime extends UTCTime {\n    constructor(parameters = {}) {\n        var _b;\n        super(parameters);\n        (_b = this.millisecond) !== null && _b !== void 0 ? _b : (this.millisecond = 0);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 24;\n    }\n    fromDate(inputDate) {\n        super.fromDate(inputDate);\n        this.millisecond = inputDate.getUTCMilliseconds();\n    }\n    toDate() {\n        const utcDate = Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, this.millisecond);\n        return (new Date(utcDate));\n    }\n    fromString(inputString) {\n        let isUTC = false;\n        let timeString = \"\";\n        let dateTimeString = \"\";\n        let fractionPart = 0;\n        let parser;\n        let hourDifference = 0;\n        let minuteDifference = 0;\n        if (inputString[inputString.length - 1] === \"Z\") {\n            timeString = inputString.substring(0, inputString.length - 1);\n            isUTC = true;\n        }\n        else {\n            const number = new Number(inputString[inputString.length - 1]);\n            if (isNaN(number.valueOf()))\n                throw new Error(\"Wrong input string for conversion\");\n            timeString = inputString;\n        }\n        if (isUTC) {\n            if (timeString.indexOf(\"+\") !== -1)\n                throw new Error(\"Wrong input string for conversion\");\n            if (timeString.indexOf(\"-\") !== -1)\n                throw new Error(\"Wrong input string for conversion\");\n        }\n        else {\n            let multiplier = 1;\n            let differencePosition = timeString.indexOf(\"+\");\n            let differenceString = \"\";\n            if (differencePosition === -1) {\n                differencePosition = timeString.indexOf(\"-\");\n                multiplier = -1;\n            }\n            if (differencePosition !== -1) {\n                differenceString = timeString.substring(differencePosition + 1);\n                timeString = timeString.substring(0, differencePosition);\n                if ((differenceString.length !== 2) && (differenceString.length !== 4))\n                    throw new Error(\"Wrong input string for conversion\");\n                let number = parseInt(differenceString.substring(0, 2), 10);\n                if (isNaN(number.valueOf()))\n                    throw new Error(\"Wrong input string for conversion\");\n                hourDifference = multiplier * number;\n                if (differenceString.length === 4) {\n                    number = parseInt(differenceString.substring(2, 4), 10);\n                    if (isNaN(number.valueOf()))\n                        throw new Error(\"Wrong input string for conversion\");\n                    minuteDifference = multiplier * number;\n                }\n            }\n        }\n        let fractionPointPosition = timeString.indexOf(\".\");\n        if (fractionPointPosition === -1)\n            fractionPointPosition = timeString.indexOf(\",\");\n        if (fractionPointPosition !== -1) {\n            const fractionPartCheck = new Number(`0${timeString.substring(fractionPointPosition)}`);\n            if (isNaN(fractionPartCheck.valueOf()))\n                throw new Error(\"Wrong input string for conversion\");\n            fractionPart = fractionPartCheck.valueOf();\n            dateTimeString = timeString.substring(0, fractionPointPosition);\n        }\n        else\n            dateTimeString = timeString;\n        switch (true) {\n            case (dateTimeString.length === 8):\n                parser = /(\\d{4})(\\d{2})(\\d{2})/ig;\n                if (fractionPointPosition !== -1)\n                    throw new Error(\"Wrong input string for conversion\");\n                break;\n            case (dateTimeString.length === 10):\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})/ig;\n                if (fractionPointPosition !== -1) {\n                    let fractionResult = 60 * fractionPart;\n                    this.minute = Math.floor(fractionResult);\n                    fractionResult = 60 * (fractionResult - this.minute);\n                    this.second = Math.floor(fractionResult);\n                    fractionResult = 1000 * (fractionResult - this.second);\n                    this.millisecond = Math.floor(fractionResult);\n                }\n                break;\n            case (dateTimeString.length === 12):\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\n                if (fractionPointPosition !== -1) {\n                    let fractionResult = 60 * fractionPart;\n                    this.second = Math.floor(fractionResult);\n                    fractionResult = 1000 * (fractionResult - this.second);\n                    this.millisecond = Math.floor(fractionResult);\n                }\n                break;\n            case (dateTimeString.length === 14):\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\n                if (fractionPointPosition !== -1) {\n                    const fractionResult = 1000 * fractionPart;\n                    this.millisecond = Math.floor(fractionResult);\n                }\n                break;\n            default:\n                throw new Error(\"Wrong input string for conversion\");\n        }\n        const parserArray = parser.exec(dateTimeString);\n        if (parserArray === null)\n            throw new Error(\"Wrong input string for conversion\");\n        for (let j = 1; j < parserArray.length; j++) {\n            switch (j) {\n                case 1:\n                    this.year = parseInt(parserArray[j], 10);\n                    break;\n                case 2:\n                    this.month = parseInt(parserArray[j], 10);\n                    break;\n                case 3:\n                    this.day = parseInt(parserArray[j], 10);\n                    break;\n                case 4:\n                    this.hour = parseInt(parserArray[j], 10) + hourDifference;\n                    break;\n                case 5:\n                    this.minute = parseInt(parserArray[j], 10) + minuteDifference;\n                    break;\n                case 6:\n                    this.second = parseInt(parserArray[j], 10);\n                    break;\n                default:\n                    throw new Error(\"Wrong input string for conversion\");\n            }\n        }\n        if (isUTC === false) {\n            const tempDate = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second, this.millisecond);\n            this.year = tempDate.getUTCFullYear();\n            this.month = tempDate.getUTCMonth();\n            this.day = tempDate.getUTCDay();\n            this.hour = tempDate.getUTCHours();\n            this.minute = tempDate.getUTCMinutes();\n            this.second = tempDate.getUTCSeconds();\n            this.millisecond = tempDate.getUTCMilliseconds();\n        }\n    }\n    toString(encoding = \"iso\") {\n        if (encoding === \"iso\") {\n            const outputArray = [];\n            outputArray.push(pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.year, 4));\n            outputArray.push(pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.month, 2));\n            outputArray.push(pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.day, 2));\n            outputArray.push(pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.hour, 2));\n            outputArray.push(pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.minute, 2));\n            outputArray.push(pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.second, 2));\n            if (this.millisecond !== 0) {\n                outputArray.push(\".\");\n                outputArray.push(pvutils__WEBPACK_IMPORTED_MODULE_1__.padNumber(this.millisecond, 3));\n            }\n            outputArray.push(\"Z\");\n            return outputArray.join(\"\");\n        }\n        return super.toString(encoding);\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            millisecond: this.millisecond,\n        };\n    }\n}\n_a$5 = GeneralizedTime;\n(() => {\n    typeStore.GeneralizedTime = _a$5;\n})();\nGeneralizedTime.NAME = \"GeneralizedTime\";\n\nvar _a$4;\nclass DATE extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 31;\n    }\n}\n_a$4 = DATE;\n(() => {\n    typeStore.DATE = _a$4;\n})();\nDATE.NAME = \"DATE\";\n\nvar _a$3;\nclass TimeOfDay extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 32;\n    }\n}\n_a$3 = TimeOfDay;\n(() => {\n    typeStore.TimeOfDay = _a$3;\n})();\nTimeOfDay.NAME = \"TimeOfDay\";\n\nvar _a$2;\nclass DateTime extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 33;\n    }\n}\n_a$2 = DateTime;\n(() => {\n    typeStore.DateTime = _a$2;\n})();\nDateTime.NAME = \"DateTime\";\n\nvar _a$1;\nclass Duration extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 34;\n    }\n}\n_a$1 = Duration;\n(() => {\n    typeStore.Duration = _a$1;\n})();\nDuration.NAME = \"Duration\";\n\nvar _a;\nclass TIME extends Utf8String {\n    constructor(parameters = {}) {\n        super(parameters);\n        this.idBlock.tagClass = 1;\n        this.idBlock.tagNumber = 14;\n    }\n}\n_a = TIME;\n(() => {\n    typeStore.TIME = _a;\n})();\nTIME.NAME = \"TIME\";\n\nclass Any {\n    constructor({ name = EMPTY_STRING, optional = false } = {}) {\n        this.name = name;\n        this.optional = optional;\n    }\n}\n\nclass Choice extends Any {\n    constructor({ value = [], ...parameters } = {}) {\n        super(parameters);\n        this.value = value;\n    }\n}\n\nclass Repeated extends Any {\n    constructor({ value = new Any(), local = false, ...parameters } = {}) {\n        super(parameters);\n        this.value = value;\n        this.local = local;\n    }\n}\n\nclass RawData {\n    get data() {\n        return this.dataView.slice().buffer;\n    }\n    set data(value) {\n        this.dataView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(value);\n    }\n    constructor({ data = EMPTY_VIEW } = {}) {\n        this.dataView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(data);\n    }\n    fromBER(inputBuffer, inputOffset, inputLength) {\n        const endLength = inputOffset + inputLength;\n        this.dataView = pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer).subarray(inputOffset, endLength);\n        return endLength;\n    }\n    toBER(_sizeOnly) {\n        return this.dataView.slice().buffer;\n    }\n}\n\nfunction compareSchema(root, inputData, inputSchema) {\n    if (inputSchema instanceof Choice) {\n        for (const element of inputSchema.value) {\n            const result = compareSchema(root, inputData, element);\n            if (result.verified) {\n                return {\n                    verified: true,\n                    result: root,\n                };\n            }\n        }\n        {\n            const _result = {\n                verified: false,\n                result: { error: \"Wrong values for Choice type\" },\n            };\n            if (inputSchema.hasOwnProperty(NAME))\n                _result.name = inputSchema.name;\n            return _result;\n        }\n    }\n    if (inputSchema instanceof Any) {\n        if (inputSchema.hasOwnProperty(NAME))\n            root[inputSchema.name] = inputData;\n        return {\n            verified: true,\n            result: root,\n        };\n    }\n    if ((root instanceof Object) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong root object\" },\n        };\n    }\n    if ((inputData instanceof Object) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 data\" },\n        };\n    }\n    if ((inputSchema instanceof Object) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if ((ID_BLOCK in inputSchema) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if ((FROM_BER in inputSchema.idBlock) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if ((TO_BER in inputSchema.idBlock) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    const encodedId = inputSchema.idBlock.toBER(false);\n    if (encodedId.byteLength === 0) {\n        return {\n            verified: false,\n            result: { error: \"Error encoding idBlock for ASN.1 schema\" },\n        };\n    }\n    const decodedOffset = inputSchema.idBlock.fromBER(encodedId, 0, encodedId.byteLength);\n    if (decodedOffset === -1) {\n        return {\n            verified: false,\n            result: { error: \"Error decoding idBlock for ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.hasOwnProperty(TAG_CLASS) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.tagClass !== inputData.idBlock.tagClass) {\n        return {\n            verified: false,\n            result: root,\n        };\n    }\n    if (inputSchema.idBlock.hasOwnProperty(TAG_NUMBER) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.tagNumber !== inputData.idBlock.tagNumber) {\n        return {\n            verified: false,\n            result: root,\n        };\n    }\n    if (inputSchema.idBlock.hasOwnProperty(IS_CONSTRUCTED) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.isConstructed !== inputData.idBlock.isConstructed) {\n        return {\n            verified: false,\n            result: root,\n        };\n    }\n    if (!(IS_HEX_ONLY in inputSchema.idBlock)) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema\" },\n        };\n    }\n    if (inputSchema.idBlock.isHexOnly !== inputData.idBlock.isHexOnly) {\n        return {\n            verified: false,\n            result: root,\n        };\n    }\n    if (inputSchema.idBlock.isHexOnly) {\n        if ((VALUE_HEX_VIEW in inputSchema.idBlock) === false) {\n            return {\n                verified: false,\n                result: { error: \"Wrong ASN.1 schema\" },\n            };\n        }\n        const schemaView = inputSchema.idBlock.valueHexView;\n        const asn1View = inputData.idBlock.valueHexView;\n        if (schemaView.length !== asn1View.length) {\n            return {\n                verified: false,\n                result: root,\n            };\n        }\n        for (let i = 0; i < schemaView.length; i++) {\n            if (schemaView[i] !== asn1View[1]) {\n                return {\n                    verified: false,\n                    result: root,\n                };\n            }\n        }\n    }\n    if (inputSchema.name) {\n        inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n        if (inputSchema.name)\n            root[inputSchema.name] = inputData;\n    }\n    if (inputSchema instanceof typeStore.Constructed) {\n        let admission = 0;\n        let result = {\n            verified: false,\n            result: { error: \"Unknown error\" },\n        };\n        let maxLength = inputSchema.valueBlock.value.length;\n        if (maxLength > 0) {\n            if (inputSchema.valueBlock.value[0] instanceof Repeated) {\n                maxLength = inputData.valueBlock.value.length;\n            }\n        }\n        if (maxLength === 0) {\n            return {\n                verified: true,\n                result: root,\n            };\n        }\n        if ((inputData.valueBlock.value.length === 0)\n            && (inputSchema.valueBlock.value.length !== 0)) {\n            let _optional = true;\n            for (let i = 0; i < inputSchema.valueBlock.value.length; i++)\n                _optional = _optional && (inputSchema.valueBlock.value[i].optional || false);\n            if (_optional) {\n                return {\n                    verified: true,\n                    result: root,\n                };\n            }\n            if (inputSchema.name) {\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                if (inputSchema.name)\n                    delete root[inputSchema.name];\n            }\n            root.error = \"Inconsistent object length\";\n            return {\n                verified: false,\n                result: root,\n            };\n        }\n        for (let i = 0; i < maxLength; i++) {\n            if ((i - admission) >= inputData.valueBlock.value.length) {\n                if (inputSchema.valueBlock.value[i].optional === false) {\n                    const _result = {\n                        verified: false,\n                        result: root,\n                    };\n                    root.error = \"Inconsistent length between ASN.1 data and schema\";\n                    if (inputSchema.name) {\n                        inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                        if (inputSchema.name) {\n                            delete root[inputSchema.name];\n                            _result.name = inputSchema.name;\n                        }\n                    }\n                    return _result;\n                }\n            }\n            else {\n                if (inputSchema.valueBlock.value[0] instanceof Repeated) {\n                    result = compareSchema(root, inputData.valueBlock.value[i], inputSchema.valueBlock.value[0].value);\n                    if (result.verified === false) {\n                        if (inputSchema.valueBlock.value[0].optional)\n                            admission++;\n                        else {\n                            if (inputSchema.name) {\n                                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                                if (inputSchema.name)\n                                    delete root[inputSchema.name];\n                            }\n                            return result;\n                        }\n                    }\n                    if ((NAME in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].name.length > 0)) {\n                        let arrayRoot = {};\n                        if ((LOCAL in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].local))\n                            arrayRoot = inputData;\n                        else\n                            arrayRoot = root;\n                        if (typeof arrayRoot[inputSchema.valueBlock.value[0].name] === \"undefined\")\n                            arrayRoot[inputSchema.valueBlock.value[0].name] = [];\n                        arrayRoot[inputSchema.valueBlock.value[0].name].push(inputData.valueBlock.value[i]);\n                    }\n                }\n                else {\n                    result = compareSchema(root, inputData.valueBlock.value[i - admission], inputSchema.valueBlock.value[i]);\n                    if (result.verified === false) {\n                        if (inputSchema.valueBlock.value[i].optional)\n                            admission++;\n                        else {\n                            if (inputSchema.name) {\n                                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                                if (inputSchema.name)\n                                    delete root[inputSchema.name];\n                            }\n                            return result;\n                        }\n                    }\n                }\n            }\n        }\n        if (result.verified === false) {\n            const _result = {\n                verified: false,\n                result: root,\n            };\n            if (inputSchema.name) {\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                if (inputSchema.name) {\n                    delete root[inputSchema.name];\n                    _result.name = inputSchema.name;\n                }\n            }\n            return _result;\n        }\n        return {\n            verified: true,\n            result: root,\n        };\n    }\n    if (inputSchema.primitiveSchema\n        && (VALUE_HEX_VIEW in inputData.valueBlock)) {\n        const asn1 = localFromBER(inputData.valueBlock.valueHexView);\n        if (asn1.offset === -1) {\n            const _result = {\n                verified: false,\n                result: asn1.result,\n            };\n            if (inputSchema.name) {\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\n                if (inputSchema.name) {\n                    delete root[inputSchema.name];\n                    _result.name = inputSchema.name;\n                }\n            }\n            return _result;\n        }\n        return compareSchema(root, asn1.result, inputSchema.primitiveSchema);\n    }\n    return {\n        verified: true,\n        result: root,\n    };\n}\nfunction verifySchema(inputBuffer, inputSchema) {\n    if ((inputSchema instanceof Object) === false) {\n        return {\n            verified: false,\n            result: { error: \"Wrong ASN.1 schema type\" },\n        };\n    }\n    const asn1 = localFromBER(pvtsutils__WEBPACK_IMPORTED_MODULE_0__.BufferSourceConverter.toUint8Array(inputBuffer));\n    if (asn1.offset === -1) {\n        return {\n            verified: false,\n            result: asn1.result,\n        };\n    }\n    return compareSchema(asn1.result, asn1.result, inputSchema);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9hc24xanMvYnVpbGQvaW5kZXguZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUV1QztBQUNKOztBQUVuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDREQUErQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0REFBK0I7QUFDdkQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQXNELElBQUk7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw0REFBK0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLEVBQUU7QUFDOUU7QUFDQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQTtBQUNBLGlCQUFpQixXQUFXLEtBQUssa0JBQWtCO0FBQ25ELGlCQUFpQixXQUFXO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1QkFBdUIsSUFBSTtBQUM3QztBQUNBO0FBQ0EsZ0NBQWdDLDREQUErQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNERBQStCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpREFBb0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCLElBQUksY0FBYztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0Esa0JBQWtCLHVDQUF1QyxJQUFJO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHVCQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVksZUFBZSxrQkFBa0IsSUFBSTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhDQUFpQjtBQUN2QyxrQkFBa0IsTUFBTSxJQUFJLE1BQU07QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNERBQStCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQSxrQkFBa0IsdURBQXVELElBQUk7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNERBQStCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixZQUFZLGVBQWUsa0JBQWtCLElBQUk7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsTUFBTSxJQUFJLE1BQU07QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixRQUFRO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG1EQUFzQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbURBQXNCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFFBQVE7QUFDN0M7QUFDQTtBQUNBLDhDQUE4QyxRQUFRO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbURBQXNCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxRQUFRO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxRQUFRO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxpREFBb0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QixJQUFJO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxpREFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELGlCQUFpQjtBQUMxRTtBQUNBLDRCQUE0QixPQUFPO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDhDQUFpQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsOENBQWlCLGNBQWM7QUFDeEU7QUFDQSwyQkFBMkIsNERBQStCLGNBQWMsOENBQWlCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwwQkFBMEI7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHdDQUF3QztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCLElBQUksMkJBQTJCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0Esa0JBQWtCLG1EQUFtRCxJQUFJO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNERBQStCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzQkFBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0QkFBNEI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0NBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsU0FBUztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDhDQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixzQ0FBc0MsSUFBSTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsT0FBTztBQUNuQztBQUNBLDJCQUEyQixFQUFFLFFBQVE7QUFDckM7QUFDQSxpQ0FBaUMsRUFBRSxRQUFRLEtBQUs7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1QkFBdUIsSUFBSSxzQ0FBc0M7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBLGtCQUFrQiw4QkFBOEIsSUFBSTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNERBQStCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0JBQXNCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpREFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrQ0FBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixTQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOENBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLHNDQUFzQyxJQUFJO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsT0FBTztBQUNuQztBQUNBLDJCQUEyQixFQUFFLFFBQVE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QixJQUFJLHNDQUFzQztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQSxrQkFBa0IsZ0JBQWdCLElBQUk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixnQkFBZ0IsSUFBSTtBQUN0QztBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsNERBQStCO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFlBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUNBQXVDLDREQUErQjtBQUN0RTtBQUNBLG9DQUFvQyw4Q0FBaUI7QUFDckQ7QUFDQTtBQUNBLHFFQUFxRSxHQUFHO0FBQ3hFLG9DQUFvQyw4Q0FBaUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDhDQUFpQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBaUI7QUFDakQsdUNBQXVDLDREQUErQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsOENBQWlCO0FBQ3ZFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQixJQUFJO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0JBQXNCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkMsNEJBQTRCLCtDQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxRQUFRO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQixJQUFJO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixrQ0FBa0MsSUFBSTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsNERBQStCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOENBQWlCO0FBQzlDLDZCQUE2Qiw4Q0FBaUI7QUFDOUMsNkJBQTZCLDhDQUFpQjtBQUM5Qyw2QkFBNkIsOENBQWlCO0FBQzlDLDZCQUE2Qiw4Q0FBaUI7QUFDOUMsNkJBQTZCLDhDQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCLElBQUksNEJBQTRCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsNENBQTRDO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixrQ0FBa0M7QUFDeEQ7QUFDQTtBQUNBLDhCQUE4Qiw0REFBK0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ2lCIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbm9kZV9tb2R1bGVzL2FzbjFqcy9idWlsZC9pbmRleC5lcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAxNCwgR01PIEdsb2JhbFNpZ25cbiAqIENvcHlyaWdodCAoYykgMjAxNS0yMDIyLCBQZWN1bGlhciBWZW50dXJlc1xuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFxuICogQXV0aG9yIDIwMTQtMjAxOSwgWXVyeSBTdHJvemhldnNreVxuICogXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuICogYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogXG4gKiAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICogICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqIFxuICogKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAqICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yXG4gKiAgIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKiBcbiAqICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlciBub3IgdGhlIG5hbWVzIG9mIGl0c1xuICogICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuICogICB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuICogXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcbiAqIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG4gKiBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG4gKiBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUlxuICogQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4gKiAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XG4gKiBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT05cbiAqIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4gKiAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xuICogU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKiBcbiAqL1xuXG5pbXBvcnQgKiBhcyBwdnRzdXRpbHMgZnJvbSAncHZ0c3V0aWxzJztcbmltcG9ydCAqIGFzIHB2dXRpbHMgZnJvbSAncHZ1dGlscyc7XG5cbmZ1bmN0aW9uIGFzc2VydEJpZ0ludCgpIHtcbiAgICBpZiAodHlwZW9mIEJpZ0ludCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCaWdJbnQgaXMgbm90IGRlZmluZWQuIFlvdXIgZW52aXJvbm1lbnQgZG9lc24ndCBpbXBsZW1lbnQgQmlnSW50LlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb25jYXQoYnVmZmVycykge1xuICAgIGxldCBvdXRwdXRMZW5ndGggPSAwO1xuICAgIGxldCBwcmV2TGVuZ3RoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gYnVmZmVyc1tpXTtcbiAgICAgICAgb3V0cHV0TGVuZ3RoICs9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgIH1cbiAgICBjb25zdCByZXRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkob3V0cHV0TGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gYnVmZmVyc1tpXTtcbiAgICAgICAgcmV0Vmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSwgcHJldkxlbmd0aCk7XG4gICAgICAgIHByZXZMZW5ndGggKz0gYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiByZXRWaWV3LmJ1ZmZlcjtcbn1cbmZ1bmN0aW9uIGNoZWNrQnVmZmVyUGFyYW1zKGJhc2VCbG9jaywgaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCkge1xuICAgIGlmICghKGlucHV0QnVmZmVyIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgYmFzZUJsb2NrLmVycm9yID0gXCJXcm9uZyBwYXJhbWV0ZXI6IGlucHV0QnVmZmVyIG11c3QgYmUgJ1VpbnQ4QXJyYXknXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFpbnB1dEJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgIGJhc2VCbG9jay5lcnJvciA9IFwiV3JvbmcgcGFyYW1ldGVyOiBpbnB1dEJ1ZmZlciBoYXMgemVybyBsZW5ndGhcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5wdXRPZmZzZXQgPCAwKSB7XG4gICAgICAgIGJhc2VCbG9jay5lcnJvciA9IFwiV3JvbmcgcGFyYW1ldGVyOiBpbnB1dE9mZnNldCBsZXNzIHRoYW4gemVyb1wiO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpbnB1dExlbmd0aCA8IDApIHtcbiAgICAgICAgYmFzZUJsb2NrLmVycm9yID0gXCJXcm9uZyBwYXJhbWV0ZXI6IGlucHV0TGVuZ3RoIGxlc3MgdGhhbiB6ZXJvXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKChpbnB1dEJ1ZmZlci5ieXRlTGVuZ3RoIC0gaW5wdXRPZmZzZXQgLSBpbnB1dExlbmd0aCkgPCAwKSB7XG4gICAgICAgIGJhc2VCbG9jay5lcnJvciA9IFwiRW5kIG9mIGlucHV0IHJlYWNoZWQgYmVmb3JlIG1lc3NhZ2Ugd2FzIGZ1bGx5IGRlY29kZWQgKGluY29uc2lzdGVudCBvZmZzZXQgYW5kIGxlbmd0aCB2YWx1ZXMpXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmNsYXNzIFZpZXdXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgfVxuICAgIHdyaXRlKGJ1Zikge1xuICAgICAgICB0aGlzLml0ZW1zLnB1c2goYnVmKTtcbiAgICB9XG4gICAgZmluYWwoKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQodGhpcy5pdGVtcyk7XG4gICAgfVxufVxuXG5jb25zdCBwb3dlcnMyID0gW25ldyBVaW50OEFycmF5KFsxXSldO1xuY29uc3QgZGlnaXRzU3RyaW5nID0gXCIwMTIzNDU2Nzg5XCI7XG5jb25zdCBOQU1FID0gXCJuYW1lXCI7XG5jb25zdCBWQUxVRV9IRVhfVklFVyA9IFwidmFsdWVIZXhWaWV3XCI7XG5jb25zdCBJU19IRVhfT05MWSA9IFwiaXNIZXhPbmx5XCI7XG5jb25zdCBJRF9CTE9DSyA9IFwiaWRCbG9ja1wiO1xuY29uc3QgVEFHX0NMQVNTID0gXCJ0YWdDbGFzc1wiO1xuY29uc3QgVEFHX05VTUJFUiA9IFwidGFnTnVtYmVyXCI7XG5jb25zdCBJU19DT05TVFJVQ1RFRCA9IFwiaXNDb25zdHJ1Y3RlZFwiO1xuY29uc3QgRlJPTV9CRVIgPSBcImZyb21CRVJcIjtcbmNvbnN0IFRPX0JFUiA9IFwidG9CRVJcIjtcbmNvbnN0IExPQ0FMID0gXCJsb2NhbFwiO1xuY29uc3QgRU1QVFlfU1RSSU5HID0gXCJcIjtcbmNvbnN0IEVNUFRZX0JVRkZFUiA9IG5ldyBBcnJheUJ1ZmZlcigwKTtcbmNvbnN0IEVNUFRZX1ZJRVcgPSBuZXcgVWludDhBcnJheSgwKTtcbmNvbnN0IEVORF9PRl9DT05URU5UX05BTUUgPSBcIkVuZE9mQ29udGVudFwiO1xuY29uc3QgT0NURVRfU1RSSU5HX05BTUUgPSBcIk9DVEVUIFNUUklOR1wiO1xuY29uc3QgQklUX1NUUklOR19OQU1FID0gXCJCSVQgU1RSSU5HXCI7XG5cbmZ1bmN0aW9uIEhleEJsb2NrKEJhc2VDbGFzcykge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gX2EgPSBjbGFzcyBTb21lIGV4dGVuZHMgQmFzZUNsYXNzIHtcbiAgICAgICAgICAgIGdldCB2YWx1ZUhleCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUhleFZpZXcuc2xpY2UoKS5idWZmZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXQgdmFsdWVIZXgodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlSGV4VmlldyA9IG5ldyBVaW50OEFycmF5KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2I7XG4gICAgICAgICAgICAgICAgc3VwZXIoLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gYXJnc1swXSB8fCB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzSGV4T25seSA9IChfYiA9IHBhcmFtcy5pc0hleE9ubHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVIZXhWaWV3ID0gcGFyYW1zLnZhbHVlSGV4ID8gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkocGFyYW1zLnZhbHVlSGV4KSA6IEVNUFRZX1ZJRVc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gaW5wdXRCdWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciA/IG5ldyBVaW50OEFycmF5KGlucHV0QnVmZmVyKSA6IGlucHV0QnVmZmVyO1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tCdWZmZXJQYXJhbXModGhpcywgdmlldywgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZExlbmd0aCA9IGlucHV0T2Zmc2V0ICsgaW5wdXRMZW5ndGg7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUhleFZpZXcgPSB2aWV3LnN1YmFycmF5KGlucHV0T2Zmc2V0LCBlbmRMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy52YWx1ZUhleFZpZXcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FybmluZ3MucHVzaChcIlplcm8gYnVmZmVyIGxlbmd0aFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0T2Zmc2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrTGVuZ3RoID0gaW5wdXRMZW5ndGg7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuZExlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvQkVSKHNpemVPbmx5ID0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNIZXhPbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIkZsYWcgJ2lzSGV4T25seScgaXMgbm90IHNldCwgYWJvcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNpemVPbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlCdWZmZXIodGhpcy52YWx1ZUhleFZpZXcuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy52YWx1ZUhleFZpZXcuYnl0ZUxlbmd0aCA9PT0gdGhpcy52YWx1ZUhleFZpZXcuYnVmZmVyLmJ5dGVMZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy52YWx1ZUhleFZpZXcuYnVmZmVyXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy52YWx1ZUhleFZpZXcuc2xpY2UoKS5idWZmZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b0pTT04oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICAgICAgICAgIGlzSGV4T25seTogdGhpcy5pc0hleE9ubHksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlSGV4OiBwdnRzdXRpbHMuQ29udmVydC5Ub0hleCh0aGlzLnZhbHVlSGV4VmlldyksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2EuTkFNRSA9IFwiaGV4QmxvY2tcIixcbiAgICAgICAgX2E7XG59XG5cbmNsYXNzIExvY2FsQmFzZUJsb2NrIHtcbiAgICBzdGF0aWMgYmxvY2tOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5OQU1FO1xuICAgIH1cbiAgICBnZXQgdmFsdWVCZWZvcmVEZWNvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlQmVmb3JlRGVjb2RlVmlldy5zbGljZSgpLmJ1ZmZlcjtcbiAgICB9XG4gICAgc2V0IHZhbHVlQmVmb3JlRGVjb2RlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWVCZWZvcmVEZWNvZGVWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih7IGJsb2NrTGVuZ3RoID0gMCwgZXJyb3IgPSBFTVBUWV9TVFJJTkcsIHdhcm5pbmdzID0gW10sIHZhbHVlQmVmb3JlRGVjb2RlID0gRU1QVFlfVklFVywgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuYmxvY2tMZW5ndGggPSBibG9ja0xlbmd0aDtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLndhcm5pbmdzID0gd2FybmluZ3M7XG4gICAgICAgIHRoaXMudmFsdWVCZWZvcmVEZWNvZGVWaWV3ID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkodmFsdWVCZWZvcmVEZWNvZGUpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBibG9ja05hbWU6IHRoaXMuY29uc3RydWN0b3IuTkFNRSxcbiAgICAgICAgICAgIGJsb2NrTGVuZ3RoOiB0aGlzLmJsb2NrTGVuZ3RoLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgICAgICB3YXJuaW5nczogdGhpcy53YXJuaW5ncyxcbiAgICAgICAgICAgIHZhbHVlQmVmb3JlRGVjb2RlOiBwdnRzdXRpbHMuQ29udmVydC5Ub0hleCh0aGlzLnZhbHVlQmVmb3JlRGVjb2RlVmlldyksXG4gICAgICAgIH07XG4gICAgfVxufVxuTG9jYWxCYXNlQmxvY2suTkFNRSA9IFwiYmFzZUJsb2NrXCI7XG5cbmNsYXNzIFZhbHVlQmxvY2sgZXh0ZW5kcyBMb2NhbEJhc2VCbG9jayB7XG4gICAgZnJvbUJFUihfaW5wdXRCdWZmZXIsIF9pbnB1dE9mZnNldCwgX2lucHV0TGVuZ3RoKSB7XG4gICAgICAgIHRocm93IFR5cGVFcnJvcihcIlVzZXIgbmVlZCB0byBtYWtlIGEgc3BlY2lmaWMgZnVuY3Rpb24gaW4gYSBjbGFzcyB3aGljaCBleHRlbmRzICdWYWx1ZUJsb2NrJ1wiKTtcbiAgICB9XG4gICAgdG9CRVIoX3NpemVPbmx5LCBfd3JpdGVyKSB7XG4gICAgICAgIHRocm93IFR5cGVFcnJvcihcIlVzZXIgbmVlZCB0byBtYWtlIGEgc3BlY2lmaWMgZnVuY3Rpb24gaW4gYSBjbGFzcyB3aGljaCBleHRlbmRzICdWYWx1ZUJsb2NrJ1wiKTtcbiAgICB9XG59XG5WYWx1ZUJsb2NrLk5BTUUgPSBcInZhbHVlQmxvY2tcIjtcblxuY2xhc3MgTG9jYWxJZGVudGlmaWNhdGlvbkJsb2NrIGV4dGVuZHMgSGV4QmxvY2soTG9jYWxCYXNlQmxvY2spIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGlkQmxvY2sgPSB7fSB9ID0ge30pIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoaWRCbG9jaykge1xuICAgICAgICAgICAgdGhpcy5pc0hleE9ubHkgPSAoX2EgPSBpZEJsb2NrLmlzSGV4T25seSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnZhbHVlSGV4VmlldyA9IGlkQmxvY2sudmFsdWVIZXhcbiAgICAgICAgICAgICAgICA/IHB2dHN1dGlscy5CdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9VaW50OEFycmF5KGlkQmxvY2sudmFsdWVIZXgpXG4gICAgICAgICAgICAgICAgOiBFTVBUWV9WSUVXO1xuICAgICAgICAgICAgdGhpcy50YWdDbGFzcyA9IChfYiA9IGlkQmxvY2sudGFnQ2xhc3MpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IC0xO1xuICAgICAgICAgICAgdGhpcy50YWdOdW1iZXIgPSAoX2MgPSBpZEJsb2NrLnRhZ051bWJlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogLTE7XG4gICAgICAgICAgICB0aGlzLmlzQ29uc3RydWN0ZWQgPSAoX2QgPSBpZEJsb2NrLmlzQ29uc3RydWN0ZWQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YWdDbGFzcyA9IC0xO1xuICAgICAgICAgICAgdGhpcy50YWdOdW1iZXIgPSAtMTtcbiAgICAgICAgICAgIHRoaXMuaXNDb25zdHJ1Y3RlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvQkVSKHNpemVPbmx5ID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IGZpcnN0T2N0ZXQgPSAwO1xuICAgICAgICBzd2l0Y2ggKHRoaXMudGFnQ2xhc3MpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBmaXJzdE9jdGV0IHw9IDB4MDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgZmlyc3RPY3RldCB8PSAweDQwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIGZpcnN0T2N0ZXQgfD0gMHg4MDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBmaXJzdE9jdGV0IHw9IDB4QzA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIlVua25vd24gdGFnIGNsYXNzXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0NvbnN0cnVjdGVkKVxuICAgICAgICAgICAgZmlyc3RPY3RldCB8PSAweDIwO1xuICAgICAgICBpZiAodGhpcy50YWdOdW1iZXIgPCAzMSAmJiAhdGhpcy5pc0hleE9ubHkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJldFZpZXcgPSBuZXcgVWludDhBcnJheSgxKTtcbiAgICAgICAgICAgIGlmICghc2l6ZU9ubHkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbnVtYmVyID0gdGhpcy50YWdOdW1iZXI7XG4gICAgICAgICAgICAgICAgbnVtYmVyICY9IDB4MUY7XG4gICAgICAgICAgICAgICAgZmlyc3RPY3RldCB8PSBudW1iZXI7XG4gICAgICAgICAgICAgICAgcmV0Vmlld1swXSA9IGZpcnN0T2N0ZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0Vmlldy5idWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzSGV4T25seSkge1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZEJ1ZiA9IHB2dXRpbHMudXRpbFRvQmFzZSh0aGlzLnRhZ051bWJlciwgNyk7XG4gICAgICAgICAgICBjb25zdCBlbmNvZGVkVmlldyA9IG5ldyBVaW50OEFycmF5KGVuY29kZWRCdWYpO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IGVuY29kZWRCdWYuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHJldFZpZXcgPSBuZXcgVWludDhBcnJheShzaXplICsgMSk7XG4gICAgICAgICAgICByZXRWaWV3WzBdID0gKGZpcnN0T2N0ZXQgfCAweDFGKTtcbiAgICAgICAgICAgIGlmICghc2l6ZU9ubHkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IChzaXplIC0gMSk7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgcmV0Vmlld1tpICsgMV0gPSBlbmNvZGVkVmlld1tpXSB8IDB4ODA7XG4gICAgICAgICAgICAgICAgcmV0Vmlld1tzaXplXSA9IGVuY29kZWRWaWV3W3NpemUgLSAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXRWaWV3LmJ1ZmZlcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy52YWx1ZUhleFZpZXcuYnl0ZUxlbmd0aCArIDEpO1xuICAgICAgICByZXRWaWV3WzBdID0gKGZpcnN0T2N0ZXQgfCAweDFGKTtcbiAgICAgICAgaWYgKCFzaXplT25seSkge1xuICAgICAgICAgICAgY29uc3QgY3VyVmlldyA9IHRoaXMudmFsdWVIZXhWaWV3O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAoY3VyVmlldy5sZW5ndGggLSAxKTsgaSsrKVxuICAgICAgICAgICAgICAgIHJldFZpZXdbaSArIDFdID0gY3VyVmlld1tpXSB8IDB4ODA7XG4gICAgICAgICAgICByZXRWaWV3W3RoaXMudmFsdWVIZXhWaWV3LmJ5dGVMZW5ndGhdID0gY3VyVmlld1tjdXJWaWV3Lmxlbmd0aCAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXRWaWV3LmJ1ZmZlcjtcbiAgICB9XG4gICAgZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0VmlldyA9IHB2dHN1dGlscy5CdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9VaW50OEFycmF5KGlucHV0QnVmZmVyKTtcbiAgICAgICAgaWYgKCFjaGVja0J1ZmZlclBhcmFtcyh0aGlzLCBpbnB1dFZpZXcsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnRCdWZmZXIgPSBpbnB1dFZpZXcuc3ViYXJyYXkoaW5wdXRPZmZzZXQsIGlucHV0T2Zmc2V0ICsgaW5wdXRMZW5ndGgpO1xuICAgICAgICBpZiAoaW50QnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiWmVybyBidWZmZXIgbGVuZ3RoXCI7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFnQ2xhc3NNYXNrID0gaW50QnVmZmVyWzBdICYgMHhDMDtcbiAgICAgICAgc3dpdGNoICh0YWdDbGFzc01hc2spIHtcbiAgICAgICAgICAgIGNhc2UgMHgwMDpcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ0NsYXNzID0gKDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDQwOlxuICAgICAgICAgICAgICAgIHRoaXMudGFnQ2xhc3MgPSAoMik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4ODA6XG4gICAgICAgICAgICAgICAgdGhpcy50YWdDbGFzcyA9ICgzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHhDMDpcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ0NsYXNzID0gKDQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gXCJVbmtub3duIHRhZyBjbGFzc1wiO1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQ29uc3RydWN0ZWQgPSAoaW50QnVmZmVyWzBdICYgMHgyMCkgPT09IDB4MjA7XG4gICAgICAgIHRoaXMuaXNIZXhPbmx5ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHRhZ051bWJlck1hc2sgPSBpbnRCdWZmZXJbMF0gJiAweDFGO1xuICAgICAgICBpZiAodGFnTnVtYmVyTWFzayAhPT0gMHgxRikge1xuICAgICAgICAgICAgdGhpcy50YWdOdW1iZXIgPSAodGFnTnVtYmVyTWFzayk7XG4gICAgICAgICAgICB0aGlzLmJsb2NrTGVuZ3RoID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjb3VudCA9IDE7XG4gICAgICAgICAgICBsZXQgaW50VGFnTnVtYmVyQnVmZmVyID0gdGhpcy52YWx1ZUhleFZpZXcgPSBuZXcgVWludDhBcnJheSgyNTUpO1xuICAgICAgICAgICAgbGV0IHRhZ051bWJlckJ1ZmZlck1heExlbmd0aCA9IDI1NTtcbiAgICAgICAgICAgIHdoaWxlIChpbnRCdWZmZXJbY291bnRdICYgMHg4MCkge1xuICAgICAgICAgICAgICAgIGludFRhZ051bWJlckJ1ZmZlcltjb3VudCAtIDFdID0gaW50QnVmZmVyW2NvdW50XSAmIDB4N0Y7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gaW50QnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gXCJFbmQgb2YgaW5wdXQgcmVhY2hlZCBiZWZvcmUgbWVzc2FnZSB3YXMgZnVsbHkgZGVjb2RlZFwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gdGFnTnVtYmVyQnVmZmVyTWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlckJ1ZmZlck1heExlbmd0aCArPSAyNTU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBCdWZmZXJWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGFnTnVtYmVyQnVmZmVyTWF4TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRUYWdOdW1iZXJCdWZmZXIubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wQnVmZmVyVmlld1tpXSA9IGludFRhZ051bWJlckJ1ZmZlcltpXTtcbiAgICAgICAgICAgICAgICAgICAgaW50VGFnTnVtYmVyQnVmZmVyID0gdGhpcy52YWx1ZUhleFZpZXcgPSBuZXcgVWludDhBcnJheSh0YWdOdW1iZXJCdWZmZXJNYXhMZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmxvY2tMZW5ndGggPSAoY291bnQgKyAxKTtcbiAgICAgICAgICAgIGludFRhZ051bWJlckJ1ZmZlcltjb3VudCAtIDFdID0gaW50QnVmZmVyW2NvdW50XSAmIDB4N0Y7XG4gICAgICAgICAgICBjb25zdCB0ZW1wQnVmZmVyVmlldyA9IG5ldyBVaW50OEFycmF5KGNvdW50KTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcbiAgICAgICAgICAgICAgICB0ZW1wQnVmZmVyVmlld1tpXSA9IGludFRhZ051bWJlckJ1ZmZlcltpXTtcbiAgICAgICAgICAgIGludFRhZ051bWJlckJ1ZmZlciA9IHRoaXMudmFsdWVIZXhWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpO1xuICAgICAgICAgICAgaW50VGFnTnVtYmVyQnVmZmVyLnNldCh0ZW1wQnVmZmVyVmlldyk7XG4gICAgICAgICAgICBpZiAodGhpcy5ibG9ja0xlbmd0aCA8PSA5KVxuICAgICAgICAgICAgICAgIHRoaXMudGFnTnVtYmVyID0gcHZ1dGlscy51dGlsRnJvbUJhc2UoaW50VGFnTnVtYmVyQnVmZmVyLCA3KTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNIZXhPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLndhcm5pbmdzLnB1c2goXCJUYWcgdG9vIGxvbmcsIHJlcHJlc2VudGVkIGFzIGhleC1jb2RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKCh0aGlzLnRhZ0NsYXNzID09PSAxKSlcbiAgICAgICAgICAgICYmICh0aGlzLmlzQ29uc3RydWN0ZWQpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMudGFnTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICAgICAgICBjYXNlIDI0OlxuICAgICAgICAgICAgICAgIGNhc2UgMzE6XG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgICAgICBjYXNlIDMzOlxuICAgICAgICAgICAgICAgIGNhc2UgMzQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIkNvbnN0cnVjdGVkIGVuY29kaW5nIHVzZWQgZm9yIHByaW1pdGl2ZSB0eXBlXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGlucHV0T2Zmc2V0ICsgdGhpcy5ibG9ja0xlbmd0aCk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgdGFnQ2xhc3M6IHRoaXMudGFnQ2xhc3MsXG4gICAgICAgICAgICB0YWdOdW1iZXI6IHRoaXMudGFnTnVtYmVyLFxuICAgICAgICAgICAgaXNDb25zdHJ1Y3RlZDogdGhpcy5pc0NvbnN0cnVjdGVkLFxuICAgICAgICB9O1xuICAgIH1cbn1cbkxvY2FsSWRlbnRpZmljYXRpb25CbG9jay5OQU1FID0gXCJpZGVudGlmaWNhdGlvbkJsb2NrXCI7XG5cbmNsYXNzIExvY2FsTGVuZ3RoQmxvY2sgZXh0ZW5kcyBMb2NhbEJhc2VCbG9jayB7XG4gICAgY29uc3RydWN0b3IoeyBsZW5CbG9jayA9IHt9IH0gPSB7fSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc0luZGVmaW5pdGVGb3JtID0gKF9hID0gbGVuQmxvY2suaXNJbmRlZmluaXRlRm9ybSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XG4gICAgICAgIHRoaXMubG9uZ0Zvcm1Vc2VkID0gKF9iID0gbGVuQmxvY2subG9uZ0Zvcm1Vc2VkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAoX2MgPSBsZW5CbG9jay5sZW5ndGgpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgfVxuICAgIGZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCkge1xuICAgICAgICBjb25zdCB2aWV3ID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkoaW5wdXRCdWZmZXIpO1xuICAgICAgICBpZiAoIWNoZWNrQnVmZmVyUGFyYW1zKHRoaXMsIHZpZXcsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnRCdWZmZXIgPSB2aWV3LnN1YmFycmF5KGlucHV0T2Zmc2V0LCBpbnB1dE9mZnNldCArIGlucHV0TGVuZ3RoKTtcbiAgICAgICAgaWYgKGludEJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIlplcm8gYnVmZmVyIGxlbmd0aFwiO1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRCdWZmZXJbMF0gPT09IDB4RkYpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIkxlbmd0aCBibG9jayAweEZGIGlzIHJlc2VydmVkIGJ5IHN0YW5kYXJkXCI7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0luZGVmaW5pdGVGb3JtID0gaW50QnVmZmVyWzBdID09PSAweDgwO1xuICAgICAgICBpZiAodGhpcy5pc0luZGVmaW5pdGVGb3JtKSB7XG4gICAgICAgICAgICB0aGlzLmJsb2NrTGVuZ3RoID0gMTtcbiAgICAgICAgICAgIHJldHVybiAoaW5wdXRPZmZzZXQgKyB0aGlzLmJsb2NrTGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvbmdGb3JtVXNlZCA9ICEhKGludEJ1ZmZlclswXSAmIDB4ODApO1xuICAgICAgICBpZiAodGhpcy5sb25nRm9ybVVzZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLmxlbmd0aCA9IChpbnRCdWZmZXJbMF0pO1xuICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCA9IDE7XG4gICAgICAgICAgICByZXR1cm4gKGlucHV0T2Zmc2V0ICsgdGhpcy5ibG9ja0xlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY291bnQgPSBpbnRCdWZmZXJbMF0gJiAweDdGO1xuICAgICAgICBpZiAoY291bnQgPiA4KSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gXCJUb28gYmlnIGludGVnZXJcIjtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGNvdW50ICsgMSkgPiBpbnRCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gXCJFbmQgb2YgaW5wdXQgcmVhY2hlZCBiZWZvcmUgbWVzc2FnZSB3YXMgZnVsbHkgZGVjb2RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxlbk9mZnNldCA9IGlucHV0T2Zmc2V0ICsgMTtcbiAgICAgICAgY29uc3QgbGVuZ3RoQnVmZmVyVmlldyA9IHZpZXcuc3ViYXJyYXkobGVuT2Zmc2V0LCBsZW5PZmZzZXQgKyBjb3VudCk7XG4gICAgICAgIGlmIChsZW5ndGhCdWZmZXJWaWV3W2NvdW50IC0gMV0gPT09IDB4MDApXG4gICAgICAgICAgICB0aGlzLndhcm5pbmdzLnB1c2goXCJOZWVkbGVzc2x5IGxvbmcgZW5jb2RlZCBsZW5ndGhcIik7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gcHZ1dGlscy51dGlsRnJvbUJhc2UobGVuZ3RoQnVmZmVyVmlldywgOCk7XG4gICAgICAgIGlmICh0aGlzLmxvbmdGb3JtVXNlZCAmJiAodGhpcy5sZW5ndGggPD0gMTI3KSlcbiAgICAgICAgICAgIHRoaXMud2FybmluZ3MucHVzaChcIlVubmVjZXNzYXJ5IHVzYWdlIG9mIGxvbmcgbGVuZ3RoIGZvcm1cIik7XG4gICAgICAgIHRoaXMuYmxvY2tMZW5ndGggPSBjb3VudCArIDE7XG4gICAgICAgIHJldHVybiAoaW5wdXRPZmZzZXQgKyB0aGlzLmJsb2NrTGVuZ3RoKTtcbiAgICB9XG4gICAgdG9CRVIoc2l6ZU9ubHkgPSBmYWxzZSkge1xuICAgICAgICBsZXQgcmV0QnVmO1xuICAgICAgICBsZXQgcmV0VmlldztcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID4gMTI3KVxuICAgICAgICAgICAgdGhpcy5sb25nRm9ybVVzZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5pc0luZGVmaW5pdGVGb3JtKSB7XG4gICAgICAgICAgICByZXRCdWYgPSBuZXcgQXJyYXlCdWZmZXIoMSk7XG4gICAgICAgICAgICBpZiAoc2l6ZU9ubHkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0VmlldyA9IG5ldyBVaW50OEFycmF5KHJldEJ1Zik7XG4gICAgICAgICAgICAgICAgcmV0Vmlld1swXSA9IDB4ODA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0QnVmO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxvbmdGb3JtVXNlZCkge1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZEJ1ZiA9IHB2dXRpbHMudXRpbFRvQmFzZSh0aGlzLmxlbmd0aCwgOCk7XG4gICAgICAgICAgICBpZiAoZW5jb2RlZEJ1Zi5ieXRlTGVuZ3RoID4gMTI3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiVG9vIGJpZyBsZW5ndGhcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gKEVNUFRZX0JVRkZFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXRCdWYgPSBuZXcgQXJyYXlCdWZmZXIoZW5jb2RlZEJ1Zi5ieXRlTGVuZ3RoICsgMSk7XG4gICAgICAgICAgICBpZiAoc2l6ZU9ubHkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldEJ1ZjtcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZW5jb2RlZEJ1Zik7XG4gICAgICAgICAgICByZXRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocmV0QnVmKTtcbiAgICAgICAgICAgIHJldFZpZXdbMF0gPSBlbmNvZGVkQnVmLmJ5dGVMZW5ndGggfCAweDgwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmNvZGVkQnVmLmJ5dGVMZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICByZXRWaWV3W2kgKyAxXSA9IGVuY29kZWRWaWV3W2ldO1xuICAgICAgICAgICAgcmV0dXJuIHJldEJ1ZjtcbiAgICAgICAgfVxuICAgICAgICByZXRCdWYgPSBuZXcgQXJyYXlCdWZmZXIoMSk7XG4gICAgICAgIGlmIChzaXplT25seSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldFZpZXcgPSBuZXcgVWludDhBcnJheShyZXRCdWYpO1xuICAgICAgICAgICAgcmV0Vmlld1swXSA9IHRoaXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXRCdWY7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgaXNJbmRlZmluaXRlRm9ybTogdGhpcy5pc0luZGVmaW5pdGVGb3JtLFxuICAgICAgICAgICAgbG9uZ0Zvcm1Vc2VkOiB0aGlzLmxvbmdGb3JtVXNlZCxcbiAgICAgICAgICAgIGxlbmd0aDogdGhpcy5sZW5ndGgsXG4gICAgICAgIH07XG4gICAgfVxufVxuTG9jYWxMZW5ndGhCbG9jay5OQU1FID0gXCJsZW5ndGhCbG9ja1wiO1xuXG5jb25zdCB0eXBlU3RvcmUgPSB7fTtcblxuY2xhc3MgQmFzZUJsb2NrIGV4dGVuZHMgTG9jYWxCYXNlQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHsgbmFtZSA9IEVNUFRZX1NUUklORywgb3B0aW9uYWwgPSBmYWxzZSwgcHJpbWl0aXZlU2NoZW1hLCAuLi5wYXJhbWV0ZXJzIH0gPSB7fSwgdmFsdWVCbG9ja1R5cGUpIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSBvcHRpb25hbDtcbiAgICAgICAgaWYgKHByaW1pdGl2ZVNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5wcmltaXRpdmVTY2hlbWEgPSBwcmltaXRpdmVTY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pZEJsb2NrID0gbmV3IExvY2FsSWRlbnRpZmljYXRpb25CbG9jayhwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5sZW5CbG9jayA9IG5ldyBMb2NhbExlbmd0aEJsb2NrKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLnZhbHVlQmxvY2sgPSB2YWx1ZUJsb2NrVHlwZSA/IG5ldyB2YWx1ZUJsb2NrVHlwZShwYXJhbWV0ZXJzKSA6IG5ldyBWYWx1ZUJsb2NrKHBhcmFtZXRlcnMpO1xuICAgIH1cbiAgICBmcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0T2Zmc2V0ID0gdGhpcy52YWx1ZUJsb2NrLmZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCAodGhpcy5sZW5CbG9jay5pc0luZGVmaW5pdGVGb3JtKVxuICAgICAgICAgICAgPyBpbnB1dExlbmd0aFxuICAgICAgICAgICAgOiB0aGlzLmxlbkJsb2NrLmxlbmd0aCk7XG4gICAgICAgIGlmIChyZXN1bHRPZmZzZXQgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gdGhpcy52YWx1ZUJsb2NrLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaWRCbG9jay5lcnJvci5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmJsb2NrTGVuZ3RoICs9IHRoaXMuaWRCbG9jay5ibG9ja0xlbmd0aDtcbiAgICAgICAgaWYgKCF0aGlzLmxlbkJsb2NrLmVycm9yLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuYmxvY2tMZW5ndGggKz0gdGhpcy5sZW5CbG9jay5ibG9ja0xlbmd0aDtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlQmxvY2suZXJyb3IubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCArPSB0aGlzLnZhbHVlQmxvY2suYmxvY2tMZW5ndGg7XG4gICAgICAgIHJldHVybiByZXN1bHRPZmZzZXQ7XG4gICAgfVxuICAgIHRvQkVSKHNpemVPbmx5LCB3cml0ZXIpIHtcbiAgICAgICAgY29uc3QgX3dyaXRlciA9IHdyaXRlciB8fCBuZXcgVmlld1dyaXRlcigpO1xuICAgICAgICBpZiAoIXdyaXRlcikge1xuICAgICAgICAgICAgcHJlcGFyZUluZGVmaW5pdGVGb3JtKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlkQmxvY2tCdWYgPSB0aGlzLmlkQmxvY2sudG9CRVIoc2l6ZU9ubHkpO1xuICAgICAgICBfd3JpdGVyLndyaXRlKGlkQmxvY2tCdWYpO1xuICAgICAgICBpZiAodGhpcy5sZW5CbG9jay5pc0luZGVmaW5pdGVGb3JtKSB7XG4gICAgICAgICAgICBfd3JpdGVyLndyaXRlKG5ldyBVaW50OEFycmF5KFsweDgwXSkuYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVCbG9jay50b0JFUihzaXplT25seSwgX3dyaXRlcik7XG4gICAgICAgICAgICBfd3JpdGVyLndyaXRlKG5ldyBBcnJheUJ1ZmZlcigyKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZUJsb2NrQnVmID0gdGhpcy52YWx1ZUJsb2NrLnRvQkVSKHNpemVPbmx5KTtcbiAgICAgICAgICAgIHRoaXMubGVuQmxvY2subGVuZ3RoID0gdmFsdWVCbG9ja0J1Zi5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgbGVuQmxvY2tCdWYgPSB0aGlzLmxlbkJsb2NrLnRvQkVSKHNpemVPbmx5KTtcbiAgICAgICAgICAgIF93cml0ZXIud3JpdGUobGVuQmxvY2tCdWYpO1xuICAgICAgICAgICAgX3dyaXRlci53cml0ZSh2YWx1ZUJsb2NrQnVmKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIF93cml0ZXIuZmluYWwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IG9iamVjdCA9IHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgaWRCbG9jazogdGhpcy5pZEJsb2NrLnRvSlNPTigpLFxuICAgICAgICAgICAgbGVuQmxvY2s6IHRoaXMubGVuQmxvY2sudG9KU09OKCksXG4gICAgICAgICAgICB2YWx1ZUJsb2NrOiB0aGlzLnZhbHVlQmxvY2sudG9KU09OKCksXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBvcHRpb25hbDogdGhpcy5vcHRpb25hbCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucHJpbWl0aXZlU2NoZW1hKVxuICAgICAgICAgICAgb2JqZWN0LnByaW1pdGl2ZVNjaGVtYSA9IHRoaXMucHJpbWl0aXZlU2NoZW1hLnRvSlNPTigpO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cbiAgICB0b1N0cmluZyhlbmNvZGluZyA9IFwiYXNjaWlcIikge1xuICAgICAgICBpZiAoZW5jb2RpbmcgPT09IFwiYXNjaWlcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25Bc2NpaUVuY29kaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHB2dHN1dGlscy5Db252ZXJ0LlRvSGV4KHRoaXMudG9CRVIoKSk7XG4gICAgfVxuICAgIG9uQXNjaWlFbmNvZGluZygpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IuTkFNRTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwdnRzdXRpbHMuQ29udmVydC5Ub0hleCh0aGlzLnZhbHVlQmxvY2sudmFsdWVCZWZvcmVEZWNvZGVWaWV3KTtcbiAgICAgICAgcmV0dXJuIGAke25hbWV9IDogJHt2YWx1ZX1gO1xuICAgIH1cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIGlmICh0aGlzID09PSBvdGhlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRoaXNSYXcgPSB0aGlzLnRvQkVSKCk7XG4gICAgICAgIGNvbnN0IG90aGVyUmF3ID0gb3RoZXIudG9CRVIoKTtcbiAgICAgICAgcmV0dXJuIHB2dXRpbHMuaXNFcXVhbEJ1ZmZlcih0aGlzUmF3LCBvdGhlclJhdyk7XG4gICAgfVxufVxuQmFzZUJsb2NrLk5BTUUgPSBcIkJhc2VCbG9ja1wiO1xuZnVuY3Rpb24gcHJlcGFyZUluZGVmaW5pdGVGb3JtKGJhc2VCbG9jaykge1xuICAgIHZhciBfYTtcbiAgICBpZiAoYmFzZUJsb2NrIGluc3RhbmNlb2YgdHlwZVN0b3JlLkNvbnN0cnVjdGVkKSB7XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgYmFzZUJsb2NrLnZhbHVlQmxvY2sudmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChwcmVwYXJlSW5kZWZpbml0ZUZvcm0odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgYmFzZUJsb2NrLmxlbkJsb2NrLmlzSW5kZWZpbml0ZUZvcm0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhISgoX2EgPSBiYXNlQmxvY2subGVuQmxvY2spID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0luZGVmaW5pdGVGb3JtKTtcbn1cblxuY2xhc3MgQmFzZVN0cmluZ0Jsb2NrIGV4dGVuZHMgQmFzZUJsb2NrIHtcbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVCbG9jay52YWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHsgdmFsdWUgPSBFTVBUWV9TVFJJTkcsIC4uLnBhcmFtZXRlcnMgfSA9IHt9LCBzdHJpbmdWYWx1ZUJsb2NrVHlwZSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzLCBzdHJpbmdWYWx1ZUJsb2NrVHlwZSk7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0T2Zmc2V0ID0gdGhpcy52YWx1ZUJsb2NrLmZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCAodGhpcy5sZW5CbG9jay5pc0luZGVmaW5pdGVGb3JtKVxuICAgICAgICAgICAgPyBpbnB1dExlbmd0aFxuICAgICAgICAgICAgOiB0aGlzLmxlbkJsb2NrLmxlbmd0aCk7XG4gICAgICAgIGlmIChyZXN1bHRPZmZzZXQgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gdGhpcy52YWx1ZUJsb2NrLmVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyb21CdWZmZXIodGhpcy52YWx1ZUJsb2NrLnZhbHVlSGV4Vmlldyk7XG4gICAgICAgIGlmICghdGhpcy5pZEJsb2NrLmVycm9yLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuYmxvY2tMZW5ndGggKz0gdGhpcy5pZEJsb2NrLmJsb2NrTGVuZ3RoO1xuICAgICAgICBpZiAoIXRoaXMubGVuQmxvY2suZXJyb3IubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCArPSB0aGlzLmxlbkJsb2NrLmJsb2NrTGVuZ3RoO1xuICAgICAgICBpZiAoIXRoaXMudmFsdWVCbG9jay5lcnJvci5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmJsb2NrTGVuZ3RoICs9IHRoaXMudmFsdWVCbG9jay5ibG9ja0xlbmd0aDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdE9mZnNldDtcbiAgICB9XG4gICAgb25Bc2NpaUVuY29kaW5nKCkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25zdHJ1Y3Rvci5OQU1FfSA6ICcke3RoaXMudmFsdWVCbG9jay52YWx1ZX0nYDtcbiAgICB9XG59XG5CYXNlU3RyaW5nQmxvY2suTkFNRSA9IFwiQmFzZVN0cmluZ0Jsb2NrXCI7XG5cbmNsYXNzIExvY2FsUHJpbWl0aXZlVmFsdWVCbG9jayBleHRlbmRzIEhleEJsb2NrKFZhbHVlQmxvY2spIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGlzSGV4T25seSA9IHRydWUsIC4uLnBhcmFtZXRlcnMgfSA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmlzSGV4T25seSA9IGlzSGV4T25seTtcbiAgICB9XG59XG5Mb2NhbFByaW1pdGl2ZVZhbHVlQmxvY2suTkFNRSA9IFwiUHJpbWl0aXZlVmFsdWVCbG9ja1wiO1xuXG52YXIgX2EkdztcbmNsYXNzIFByaW1pdGl2ZSBleHRlbmRzIEJhc2VCbG9jayB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMsIExvY2FsUHJpbWl0aXZlVmFsdWVCbG9jayk7XG4gICAgICAgIHRoaXMuaWRCbG9jay5pc0NvbnN0cnVjdGVkID0gZmFsc2U7XG4gICAgfVxufVxuX2EkdyA9IFByaW1pdGl2ZTtcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLlByaW1pdGl2ZSA9IF9hJHc7XG59KSgpO1xuUHJpbWl0aXZlLk5BTUUgPSBcIlBSSU1JVElWRVwiO1xuXG5mdW5jdGlvbiBsb2NhbENoYW5nZVR5cGUoaW5wdXRPYmplY3QsIG5ld1R5cGUpIHtcbiAgICBpZiAoaW5wdXRPYmplY3QgaW5zdGFuY2VvZiBuZXdUeXBlKSB7XG4gICAgICAgIHJldHVybiBpbnB1dE9iamVjdDtcbiAgICB9XG4gICAgY29uc3QgbmV3T2JqZWN0ID0gbmV3IG5ld1R5cGUoKTtcbiAgICBuZXdPYmplY3QuaWRCbG9jayA9IGlucHV0T2JqZWN0LmlkQmxvY2s7XG4gICAgbmV3T2JqZWN0LmxlbkJsb2NrID0gaW5wdXRPYmplY3QubGVuQmxvY2s7XG4gICAgbmV3T2JqZWN0Lndhcm5pbmdzID0gaW5wdXRPYmplY3Qud2FybmluZ3M7XG4gICAgbmV3T2JqZWN0LnZhbHVlQmVmb3JlRGVjb2RlVmlldyA9IGlucHV0T2JqZWN0LnZhbHVlQmVmb3JlRGVjb2RlVmlldztcbiAgICByZXR1cm4gbmV3T2JqZWN0O1xufVxuZnVuY3Rpb24gbG9jYWxGcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCA9IDAsIGlucHV0TGVuZ3RoID0gaW5wdXRCdWZmZXIubGVuZ3RoKSB7XG4gICAgY29uc3QgaW5jb21pbmdPZmZzZXQgPSBpbnB1dE9mZnNldDtcbiAgICBsZXQgcmV0dXJuT2JqZWN0ID0gbmV3IEJhc2VCbG9jayh7fSwgVmFsdWVCbG9jayk7XG4gICAgY29uc3QgYmFzZUJsb2NrID0gbmV3IExvY2FsQmFzZUJsb2NrKCk7XG4gICAgaWYgKCFjaGVja0J1ZmZlclBhcmFtcyhiYXNlQmxvY2ssIGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpKSB7XG4gICAgICAgIHJldHVybk9iamVjdC5lcnJvciA9IGJhc2VCbG9jay5lcnJvcjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9mZnNldDogLTEsXG4gICAgICAgICAgICByZXN1bHQ6IHJldHVybk9iamVjdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaW50QnVmZmVyID0gaW5wdXRCdWZmZXIuc3ViYXJyYXkoaW5wdXRPZmZzZXQsIGlucHV0T2Zmc2V0ICsgaW5wdXRMZW5ndGgpO1xuICAgIGlmICghaW50QnVmZmVyLmxlbmd0aCkge1xuICAgICAgICByZXR1cm5PYmplY3QuZXJyb3IgPSBcIlplcm8gYnVmZmVyIGxlbmd0aFwiO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2Zmc2V0OiAtMSxcbiAgICAgICAgICAgIHJlc3VsdDogcmV0dXJuT2JqZWN0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgcmVzdWx0T2Zmc2V0ID0gcmV0dXJuT2JqZWN0LmlkQmxvY2suZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKTtcbiAgICBpZiAocmV0dXJuT2JqZWN0LmlkQmxvY2sud2FybmluZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybk9iamVjdC53YXJuaW5ncy5jb25jYXQocmV0dXJuT2JqZWN0LmlkQmxvY2sud2FybmluZ3MpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0T2Zmc2V0ID09PSAtMSkge1xuICAgICAgICByZXR1cm5PYmplY3QuZXJyb3IgPSByZXR1cm5PYmplY3QuaWRCbG9jay5lcnJvcjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9mZnNldDogLTEsXG4gICAgICAgICAgICByZXN1bHQ6IHJldHVybk9iamVjdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaW5wdXRPZmZzZXQgPSByZXN1bHRPZmZzZXQ7XG4gICAgaW5wdXRMZW5ndGggLT0gcmV0dXJuT2JqZWN0LmlkQmxvY2suYmxvY2tMZW5ndGg7XG4gICAgcmVzdWx0T2Zmc2V0ID0gcmV0dXJuT2JqZWN0LmxlbkJsb2NrLmZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCk7XG4gICAgaWYgKHJldHVybk9iamVjdC5sZW5CbG9jay53YXJuaW5ncy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuT2JqZWN0Lndhcm5pbmdzLmNvbmNhdChyZXR1cm5PYmplY3QubGVuQmxvY2sud2FybmluZ3MpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0T2Zmc2V0ID09PSAtMSkge1xuICAgICAgICByZXR1cm5PYmplY3QuZXJyb3IgPSByZXR1cm5PYmplY3QubGVuQmxvY2suZXJyb3I7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvZmZzZXQ6IC0xLFxuICAgICAgICAgICAgcmVzdWx0OiByZXR1cm5PYmplY3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlucHV0T2Zmc2V0ID0gcmVzdWx0T2Zmc2V0O1xuICAgIGlucHV0TGVuZ3RoIC09IHJldHVybk9iamVjdC5sZW5CbG9jay5ibG9ja0xlbmd0aDtcbiAgICBpZiAoIXJldHVybk9iamVjdC5pZEJsb2NrLmlzQ29uc3RydWN0ZWRcbiAgICAgICAgJiYgcmV0dXJuT2JqZWN0LmxlbkJsb2NrLmlzSW5kZWZpbml0ZUZvcm0pIHtcbiAgICAgICAgcmV0dXJuT2JqZWN0LmVycm9yID0gXCJJbmRlZmluaXRlIGxlbmd0aCBmb3JtIHVzZWQgZm9yIHByaW1pdGl2ZSBlbmNvZGluZyBmb3JtXCI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvZmZzZXQ6IC0xLFxuICAgICAgICAgICAgcmVzdWx0OiByZXR1cm5PYmplY3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBuZXdBU04xVHlwZSA9IEJhc2VCbG9jaztcbiAgICBzd2l0Y2ggKHJldHVybk9iamVjdC5pZEJsb2NrLnRhZ0NsYXNzKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGlmICgocmV0dXJuT2JqZWN0LmlkQmxvY2sudGFnTnVtYmVyID49IDM3KVxuICAgICAgICAgICAgICAgICYmIChyZXR1cm5PYmplY3QuaWRCbG9jay5pc0hleE9ubHkgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybk9iamVjdC5lcnJvciA9IFwiVU5JVkVSU0FMIDM3IGFuZCB1cHBlciB0YWdzIGFyZSByZXNlcnZlZCBieSBBU04uMSBzdGFuZGFyZFwiO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogLTEsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcmV0dXJuT2JqZWN0LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHJldHVybk9iamVjdC5pZEJsb2NrLnRhZ051bWJlcikge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyZXR1cm5PYmplY3QuaWRCbG9jay5pc0NvbnN0cnVjdGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHJldHVybk9iamVjdC5sZW5CbG9jay5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuT2JqZWN0LmVycm9yID0gXCJUeXBlIFtVTklWRVJTQUwgMF0gaXMgcmVzZXJ2ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJldHVybk9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuRW5kT2ZDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG5ld0FTTjFUeXBlID0gdHlwZVN0b3JlLkJvb2xlYW47XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuSW50ZWdlcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5CaXRTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuT2N0ZXRTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuTnVsbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5PYmplY3RJZGVudGlmaWVyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5FbnVtZXJhdGVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5VdGY4U3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5SZWxhdGl2ZU9iamVjdElkZW50aWZpZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgIG5ld0FTTjFUeXBlID0gdHlwZVN0b3JlLlRJTUU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybk9iamVjdC5lcnJvciA9IFwiW1VOSVZFUlNBTCAxNV0gaXMgcmVzZXJ2ZWQgYnkgQVNOLjEgc3RhbmRhcmRcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJldHVybk9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5TZXF1ZW5jZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuU2V0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE4OlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5OdW1lcmljU3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE5OlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5QcmludGFibGVTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgICAgICAgICAgIG5ld0FTTjFUeXBlID0gdHlwZVN0b3JlLlRlbGV0ZXhTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjE6XG4gICAgICAgICAgICAgICAgICAgIG5ld0FTTjFUeXBlID0gdHlwZVN0b3JlLlZpZGVvdGV4U3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDIyOlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5JQTVTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjM6XG4gICAgICAgICAgICAgICAgICAgIG5ld0FTTjFUeXBlID0gdHlwZVN0b3JlLlVUQ1RpbWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjQ6XG4gICAgICAgICAgICAgICAgICAgIG5ld0FTTjFUeXBlID0gdHlwZVN0b3JlLkdlbmVyYWxpemVkVGltZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNTpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuR3JhcGhpY1N0cmluZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNjpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuVmlzaWJsZVN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuR2VuZXJhbFN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyODpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuVW5pdmVyc2FsU3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI5OlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5DaGFyYWN0ZXJTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzA6XG4gICAgICAgICAgICAgICAgICAgIG5ld0FTTjFUeXBlID0gdHlwZVN0b3JlLkJtcFN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzMTpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuREFURTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuVGltZU9mRGF5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDMzOlxuICAgICAgICAgICAgICAgICAgICBuZXdBU04xVHlwZSA9IHR5cGVTdG9yZS5EYXRlVGltZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzNDpcbiAgICAgICAgICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSB0eXBlU3RvcmUuRHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3T2JqZWN0ID0gcmV0dXJuT2JqZWN0LmlkQmxvY2suaXNDb25zdHJ1Y3RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgdHlwZVN0b3JlLkNvbnN0cnVjdGVkKClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IHR5cGVTdG9yZS5QcmltaXRpdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LmlkQmxvY2sgPSByZXR1cm5PYmplY3QuaWRCbG9jaztcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LmxlbkJsb2NrID0gcmV0dXJuT2JqZWN0LmxlbkJsb2NrO1xuICAgICAgICAgICAgICAgICAgICBuZXdPYmplY3Qud2FybmluZ3MgPSByZXR1cm5PYmplY3Qud2FybmluZ3M7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybk9iamVjdCA9IG5ld09iamVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbmV3QVNOMVR5cGUgPSByZXR1cm5PYmplY3QuaWRCbG9jay5pc0NvbnN0cnVjdGVkXG4gICAgICAgICAgICAgICAgPyB0eXBlU3RvcmUuQ29uc3RydWN0ZWRcbiAgICAgICAgICAgICAgICA6IHR5cGVTdG9yZS5QcmltaXRpdmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuT2JqZWN0ID0gbG9jYWxDaGFuZ2VUeXBlKHJldHVybk9iamVjdCwgbmV3QVNOMVR5cGUpO1xuICAgIHJlc3VsdE9mZnNldCA9IHJldHVybk9iamVjdC5mcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgcmV0dXJuT2JqZWN0LmxlbkJsb2NrLmlzSW5kZWZpbml0ZUZvcm0gPyBpbnB1dExlbmd0aCA6IHJldHVybk9iamVjdC5sZW5CbG9jay5sZW5ndGgpO1xuICAgIHJldHVybk9iamVjdC52YWx1ZUJlZm9yZURlY29kZVZpZXcgPSBpbnB1dEJ1ZmZlci5zdWJhcnJheShpbmNvbWluZ09mZnNldCwgaW5jb21pbmdPZmZzZXQgKyByZXR1cm5PYmplY3QuYmxvY2tMZW5ndGgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG9mZnNldDogcmVzdWx0T2Zmc2V0LFxuICAgICAgICByZXN1bHQ6IHJldHVybk9iamVjdCxcbiAgICB9O1xufVxuZnVuY3Rpb24gZnJvbUJFUihpbnB1dEJ1ZmZlcikge1xuICAgIGlmICghaW5wdXRCdWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQmFzZUJsb2NrKHt9LCBWYWx1ZUJsb2NrKTtcbiAgICAgICAgcmVzdWx0LmVycm9yID0gXCJJbnB1dCBidWZmZXIgaGFzIHplcm8gbGVuZ3RoXCI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvZmZzZXQ6IC0xLFxuICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbG9jYWxGcm9tQkVSKHB2dHN1dGlscy5CdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9VaW50OEFycmF5KGlucHV0QnVmZmVyKS5zbGljZSgpLCAwLCBpbnB1dEJ1ZmZlci5ieXRlTGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tMZW4oaW5kZWZpbml0ZUxlbmd0aCwgbGVuZ3RoKSB7XG4gICAgaWYgKGluZGVmaW5pdGVMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG5jbGFzcyBMb2NhbENvbnN0cnVjdGVkVmFsdWVCbG9jayBleHRlbmRzIFZhbHVlQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHsgdmFsdWUgPSBbXSwgaXNJbmRlZmluaXRlRm9ybSA9IGZhbHNlLCAuLi5wYXJhbWV0ZXJzIH0gPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmlzSW5kZWZpbml0ZUZvcm0gPSBpc0luZGVmaW5pdGVGb3JtO1xuICAgIH1cbiAgICBmcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHB2dHN1dGlscy5CdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9VaW50OEFycmF5KGlucHV0QnVmZmVyKTtcbiAgICAgICAgaWYgKCFjaGVja0J1ZmZlclBhcmFtcyh0aGlzLCB2aWV3LCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUJlZm9yZURlY29kZVZpZXcgPSB2aWV3LnN1YmFycmF5KGlucHV0T2Zmc2V0LCBpbnB1dE9mZnNldCArIGlucHV0TGVuZ3RoKTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVCZWZvcmVEZWNvZGVWaWV3Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy53YXJuaW5ncy5wdXNoKFwiWmVybyBidWZmZXIgbGVuZ3RoXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJyZW50T2Zmc2V0ID0gaW5wdXRPZmZzZXQ7XG4gICAgICAgIHdoaWxlIChjaGVja0xlbih0aGlzLmlzSW5kZWZpbml0ZUZvcm0sIGlucHV0TGVuZ3RoKSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJldHVybk9iamVjdCA9IGxvY2FsRnJvbUJFUih2aWV3LCBjdXJyZW50T2Zmc2V0LCBpbnB1dExlbmd0aCk7XG4gICAgICAgICAgICBpZiAocmV0dXJuT2JqZWN0Lm9mZnNldCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gcmV0dXJuT2JqZWN0LnJlc3VsdC5lcnJvcjtcbiAgICAgICAgICAgICAgICB0aGlzLndhcm5pbmdzLmNvbmNhdChyZXR1cm5PYmplY3QucmVzdWx0Lndhcm5pbmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50T2Zmc2V0ID0gcmV0dXJuT2JqZWN0Lm9mZnNldDtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tMZW5ndGggKz0gcmV0dXJuT2JqZWN0LnJlc3VsdC5ibG9ja0xlbmd0aDtcbiAgICAgICAgICAgIGlucHV0TGVuZ3RoIC09IHJldHVybk9iamVjdC5yZXN1bHQuYmxvY2tMZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLnB1c2gocmV0dXJuT2JqZWN0LnJlc3VsdCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0luZGVmaW5pdGVGb3JtICYmIHJldHVybk9iamVjdC5yZXN1bHQuY29uc3RydWN0b3IuTkFNRSA9PT0gRU5EX09GX0NPTlRFTlRfTkFNRSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzSW5kZWZpbml0ZUZvcm0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlW3RoaXMudmFsdWUubGVuZ3RoIC0gMV0uY29uc3RydWN0b3IuTkFNRSA9PT0gRU5EX09GX0NPTlRFTlRfTkFNRSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLndhcm5pbmdzLnB1c2goXCJObyBFbmRPZkNvbnRlbnQgYmxvY2sgZW5jb2RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VycmVudE9mZnNldDtcbiAgICB9XG4gICAgdG9CRVIoc2l6ZU9ubHksIHdyaXRlcikge1xuICAgICAgICBjb25zdCBfd3JpdGVyID0gd3JpdGVyIHx8IG5ldyBWaWV3V3JpdGVyKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZVtpXS50b0JFUihzaXplT25seSwgX3dyaXRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBfd3JpdGVyLmZpbmFsKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvYmplY3QgPSB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGlzSW5kZWZpbml0ZUZvcm06IHRoaXMuaXNJbmRlZmluaXRlRm9ybSxcbiAgICAgICAgICAgIHZhbHVlOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICBvYmplY3QudmFsdWUucHVzaCh2YWx1ZS50b0pTT04oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG59XG5Mb2NhbENvbnN0cnVjdGVkVmFsdWVCbG9jay5OQU1FID0gXCJDb25zdHJ1Y3RlZFZhbHVlQmxvY2tcIjtcblxudmFyIF9hJHY7XG5jbGFzcyBDb25zdHJ1Y3RlZCBleHRlbmRzIEJhc2VCbG9jayB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMsIExvY2FsQ29uc3RydWN0ZWRWYWx1ZUJsb2NrKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLmlzQ29uc3RydWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBmcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLmlzSW5kZWZpbml0ZUZvcm0gPSB0aGlzLmxlbkJsb2NrLmlzSW5kZWZpbml0ZUZvcm07XG4gICAgICAgIGNvbnN0IHJlc3VsdE9mZnNldCA9IHRoaXMudmFsdWVCbG9jay5mcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgKHRoaXMubGVuQmxvY2suaXNJbmRlZmluaXRlRm9ybSkgPyBpbnB1dExlbmd0aCA6IHRoaXMubGVuQmxvY2subGVuZ3RoKTtcbiAgICAgICAgaWYgKHJlc3VsdE9mZnNldCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0aGlzLnZhbHVlQmxvY2suZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pZEJsb2NrLmVycm9yLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuYmxvY2tMZW5ndGggKz0gdGhpcy5pZEJsb2NrLmJsb2NrTGVuZ3RoO1xuICAgICAgICBpZiAoIXRoaXMubGVuQmxvY2suZXJyb3IubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCArPSB0aGlzLmxlbkJsb2NrLmJsb2NrTGVuZ3RoO1xuICAgICAgICBpZiAoIXRoaXMudmFsdWVCbG9jay5lcnJvci5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmJsb2NrTGVuZ3RoICs9IHRoaXMudmFsdWVCbG9jay5ibG9ja0xlbmd0aDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdE9mZnNldDtcbiAgICB9XG4gICAgb25Bc2NpaUVuY29kaW5nKCkge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLnZhbHVlQmxvY2sudmFsdWUpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlLnRvU3RyaW5nKFwiYXNjaWlcIikuc3BsaXQoXCJcXG5cIikubWFwKChvKSA9PiBgICAke299YCkuam9pbihcIlxcblwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmxvY2tOYW1lID0gdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID09PSAzXG4gICAgICAgICAgICA/IGBbJHt0aGlzLmlkQmxvY2sudGFnTnVtYmVyfV1gXG4gICAgICAgICAgICA6IHRoaXMuY29uc3RydWN0b3IuTkFNRTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5sZW5ndGhcbiAgICAgICAgICAgID8gYCR7YmxvY2tOYW1lfSA6XFxuJHt2YWx1ZXMuam9pbihcIlxcblwiKX1gXG4gICAgICAgICAgICA6IGAke2Jsb2NrTmFtZX0gOmA7XG4gICAgfVxufVxuX2EkdiA9IENvbnN0cnVjdGVkO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuQ29uc3RydWN0ZWQgPSBfYSR2O1xufSkoKTtcbkNvbnN0cnVjdGVkLk5BTUUgPSBcIkNPTlNUUlVDVEVEXCI7XG5cbmNsYXNzIExvY2FsRW5kT2ZDb250ZW50VmFsdWVCbG9jayBleHRlbmRzIFZhbHVlQmxvY2sge1xuICAgIGZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCBfaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0T2Zmc2V0O1xuICAgIH1cbiAgICB0b0JFUihfc2l6ZU9ubHkpIHtcbiAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICB9XG59XG5Mb2NhbEVuZE9mQ29udGVudFZhbHVlQmxvY2sub3ZlcnJpZGUgPSBcIkVuZE9mQ29udGVudFZhbHVlQmxvY2tcIjtcblxudmFyIF9hJHU7XG5jbGFzcyBFbmRPZkNvbnRlbnQgZXh0ZW5kcyBCYXNlQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzLCBMb2NhbEVuZE9mQ29udGVudFZhbHVlQmxvY2spO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMDtcbiAgICB9XG59XG5fYSR1ID0gRW5kT2ZDb250ZW50O1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuRW5kT2ZDb250ZW50ID0gX2EkdTtcbn0pKCk7XG5FbmRPZkNvbnRlbnQuTkFNRSA9IEVORF9PRl9DT05URU5UX05BTUU7XG5cbnZhciBfYSR0O1xuY2xhc3MgTnVsbCBleHRlbmRzIEJhc2VCbG9jayB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMsIFZhbHVlQmxvY2spO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gNTtcbiAgICB9XG4gICAgZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbkJsb2NrLmxlbmd0aCA+IDApXG4gICAgICAgICAgICB0aGlzLndhcm5pbmdzLnB1c2goXCJOb24temVybyBsZW5ndGggb2YgdmFsdWUgYmxvY2sgZm9yIE51bGwgdHlwZVwiKTtcbiAgICAgICAgaWYgKCF0aGlzLmlkQmxvY2suZXJyb3IubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCArPSB0aGlzLmlkQmxvY2suYmxvY2tMZW5ndGg7XG4gICAgICAgIGlmICghdGhpcy5sZW5CbG9jay5lcnJvci5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmJsb2NrTGVuZ3RoICs9IHRoaXMubGVuQmxvY2suYmxvY2tMZW5ndGg7XG4gICAgICAgIHRoaXMuYmxvY2tMZW5ndGggKz0gaW5wdXRMZW5ndGg7XG4gICAgICAgIGlmICgoaW5wdXRPZmZzZXQgKyBpbnB1dExlbmd0aCkgPiBpbnB1dEJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gXCJFbmQgb2YgaW5wdXQgcmVhY2hlZCBiZWZvcmUgbWVzc2FnZSB3YXMgZnVsbHkgZGVjb2RlZCAoaW5jb25zaXN0ZW50IG9mZnNldCBhbmQgbGVuZ3RoIHZhbHVlcylcIjtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGlucHV0T2Zmc2V0ICsgaW5wdXRMZW5ndGgpO1xuICAgIH1cbiAgICB0b0JFUihzaXplT25seSwgd3JpdGVyKSB7XG4gICAgICAgIGNvbnN0IHJldEJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigyKTtcbiAgICAgICAgaWYgKCFzaXplT25seSkge1xuICAgICAgICAgICAgY29uc3QgcmV0VmlldyA9IG5ldyBVaW50OEFycmF5KHJldEJ1Zik7XG4gICAgICAgICAgICByZXRWaWV3WzBdID0gMHgwNTtcbiAgICAgICAgICAgIHJldFZpZXdbMV0gPSAweDAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3cml0ZXIpIHtcbiAgICAgICAgICAgIHdyaXRlci53cml0ZShyZXRCdWYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXRCdWY7XG4gICAgfVxuICAgIG9uQXNjaWlFbmNvZGluZygpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IuTkFNRX1gO1xuICAgIH1cbn1cbl9hJHQgPSBOdWxsO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuTnVsbCA9IF9hJHQ7XG59KSgpO1xuTnVsbC5OQU1FID0gXCJOVUxMXCI7XG5cbmNsYXNzIExvY2FsQm9vbGVhblZhbHVlQmxvY2sgZXh0ZW5kcyBIZXhCbG9jayhWYWx1ZUJsb2NrKSB7XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG9jdGV0IG9mIHRoaXMudmFsdWVIZXhWaWV3KSB7XG4gICAgICAgICAgICBpZiAob2N0ZXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzZXQgdmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZUhleFZpZXdbMF0gPSB2YWx1ZSA/IDB4RkYgOiAweDAwO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih7IHZhbHVlLCAuLi5wYXJhbWV0ZXJzIH0gPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMudmFsdWVIZXgpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVIZXhWaWV3ID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkocGFyYW1ldGVycy52YWx1ZUhleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlSGV4VmlldyA9IG5ldyBVaW50OEFycmF5KDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCkge1xuICAgICAgICBjb25zdCBpbnB1dFZpZXcgPSBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShpbnB1dEJ1ZmZlcik7XG4gICAgICAgIGlmICghY2hlY2tCdWZmZXJQYXJhbXModGhpcywgaW5wdXRWaWV3LCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUhleFZpZXcgPSBpbnB1dFZpZXcuc3ViYXJyYXkoaW5wdXRPZmZzZXQsIGlucHV0T2Zmc2V0ICsgaW5wdXRMZW5ndGgpO1xuICAgICAgICBpZiAoaW5wdXRMZW5ndGggPiAxKVxuICAgICAgICAgICAgdGhpcy53YXJuaW5ncy5wdXNoKFwiQm9vbGVhbiB2YWx1ZSBlbmNvZGVkIGluIG1vcmUgdGhlbiAxIG9jdGV0XCIpO1xuICAgICAgICB0aGlzLmlzSGV4T25seSA9IHRydWU7XG4gICAgICAgIHB2dXRpbHMudXRpbERlY29kZVRDLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYmxvY2tMZW5ndGggPSBpbnB1dExlbmd0aDtcbiAgICAgICAgcmV0dXJuIChpbnB1dE9mZnNldCArIGlucHV0TGVuZ3RoKTtcbiAgICB9XG4gICAgdG9CRVIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlSGV4Vmlldy5zbGljZSgpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbkxvY2FsQm9vbGVhblZhbHVlQmxvY2suTkFNRSA9IFwiQm9vbGVhblZhbHVlQmxvY2tcIjtcblxudmFyIF9hJHM7XG5jbGFzcyBCb29sZWFuIGV4dGVuZHMgQmFzZUJsb2NrIHtcbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVCbG9jay52YWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzLCBMb2NhbEJvb2xlYW5WYWx1ZUJsb2NrKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDE7XG4gICAgfVxuICAgIG9uQXNjaWlFbmNvZGluZygpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IuTkFNRX0gOiAke3RoaXMuZ2V0VmFsdWV9YDtcbiAgICB9XG59XG5fYSRzID0gQm9vbGVhbjtcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLkJvb2xlYW4gPSBfYSRzO1xufSkoKTtcbkJvb2xlYW4uTkFNRSA9IFwiQk9PTEVBTlwiO1xuXG5jbGFzcyBMb2NhbE9jdGV0U3RyaW5nVmFsdWVCbG9jayBleHRlbmRzIEhleEJsb2NrKExvY2FsQ29uc3RydWN0ZWRWYWx1ZUJsb2NrKSB7XG4gICAgY29uc3RydWN0b3IoeyBpc0NvbnN0cnVjdGVkID0gZmFsc2UsIC4uLnBhcmFtZXRlcnMgfSA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmlzQ29uc3RydWN0ZWQgPSBpc0NvbnN0cnVjdGVkO1xuICAgIH1cbiAgICBmcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgbGV0IHJlc3VsdE9mZnNldCA9IDA7XG4gICAgICAgIGlmICh0aGlzLmlzQ29uc3RydWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNIZXhPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICByZXN1bHRPZmZzZXQgPSBMb2NhbENvbnN0cnVjdGVkVmFsdWVCbG9jay5wcm90b3R5cGUuZnJvbUJFUi5jYWxsKHRoaXMsIGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdE9mZnNldCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mZnNldDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCbG9ja05hbWUgPSB0aGlzLnZhbHVlW2ldLmNvbnN0cnVjdG9yLk5BTUU7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRCbG9ja05hbWUgPT09IEVORF9PRl9DT05URU5UX05BTUUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNJbmRlZmluaXRlRm9ybSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIkVuZE9mQ29udGVudCBpcyB1bmV4cGVjdGVkLCBPQ1RFVCBTVFJJTkcgbWF5IGNvbnNpc3RzIG9mIE9DVEVUIFNUUklOR3Mgb25seVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50QmxvY2tOYW1lICE9PSBPQ1RFVF9TVFJJTkdfTkFNRSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gXCJPQ1RFVCBTVFJJTkcgbWF5IGNvbnNpc3RzIG9mIE9DVEVUIFNUUklOR3Mgb25seVwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0hleE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgcmVzdWx0T2Zmc2V0ID0gc3VwZXIuZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tMZW5ndGggPSBpbnB1dExlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0T2Zmc2V0O1xuICAgIH1cbiAgICB0b0JFUihzaXplT25seSwgd3JpdGVyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ29uc3RydWN0ZWQpXG4gICAgICAgICAgICByZXR1cm4gTG9jYWxDb25zdHJ1Y3RlZFZhbHVlQmxvY2sucHJvdG90eXBlLnRvQkVSLmNhbGwodGhpcywgc2l6ZU9ubHksIHdyaXRlcik7XG4gICAgICAgIHJldHVybiBzaXplT25seVxuICAgICAgICAgICAgPyBuZXcgQXJyYXlCdWZmZXIodGhpcy52YWx1ZUhleFZpZXcuYnl0ZUxlbmd0aClcbiAgICAgICAgICAgIDogdGhpcy52YWx1ZUhleFZpZXcuc2xpY2UoKS5idWZmZXI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgaXNDb25zdHJ1Y3RlZDogdGhpcy5pc0NvbnN0cnVjdGVkLFxuICAgICAgICB9O1xuICAgIH1cbn1cbkxvY2FsT2N0ZXRTdHJpbmdWYWx1ZUJsb2NrLk5BTUUgPSBcIk9jdGV0U3RyaW5nVmFsdWVCbG9ja1wiO1xuXG52YXIgX2EkcjtcbmNsYXNzIE9jdGV0U3RyaW5nIGV4dGVuZHMgQmFzZUJsb2NrIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGlkQmxvY2sgPSB7fSwgbGVuQmxvY2sgPSB7fSwgLi4ucGFyYW1ldGVycyB9ID0ge30pIHtcbiAgICAgICAgdmFyIF9iLCBfYztcbiAgICAgICAgKF9iID0gcGFyYW1ldGVycy5pc0NvbnN0cnVjdGVkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAocGFyYW1ldGVycy5pc0NvbnN0cnVjdGVkID0gISEoKF9jID0gcGFyYW1ldGVycy52YWx1ZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmxlbmd0aCkpO1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgaXNDb25zdHJ1Y3RlZDogcGFyYW1ldGVycy5pc0NvbnN0cnVjdGVkLFxuICAgICAgICAgICAgICAgIC4uLmlkQmxvY2ssXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVuQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAuLi5sZW5CbG9jayxcbiAgICAgICAgICAgICAgICBpc0luZGVmaW5pdGVGb3JtOiAhIXBhcmFtZXRlcnMuaXNJbmRlZmluaXRlRm9ybSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5wYXJhbWV0ZXJzLFxuICAgICAgICB9LCBMb2NhbE9jdGV0U3RyaW5nVmFsdWVCbG9jayk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSA0O1xuICAgIH1cbiAgICBmcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLmlzQ29uc3RydWN0ZWQgPSB0aGlzLmlkQmxvY2suaXNDb25zdHJ1Y3RlZDtcbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLmlzSW5kZWZpbml0ZUZvcm0gPSB0aGlzLmxlbkJsb2NrLmlzSW5kZWZpbml0ZUZvcm07XG4gICAgICAgIGlmIChpbnB1dExlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaWRCbG9jay5lcnJvci5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCArPSB0aGlzLmlkQmxvY2suYmxvY2tMZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5sZW5CbG9jay5lcnJvci5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCArPSB0aGlzLmxlbkJsb2NrLmJsb2NrTGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy52YWx1ZUJsb2NrLmlzQ29uc3RydWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBpbnB1dEJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gbmV3IFVpbnQ4QXJyYXkoaW5wdXRCdWZmZXIpIDogaW5wdXRCdWZmZXI7XG4gICAgICAgICAgICBjb25zdCBidWYgPSB2aWV3LnN1YmFycmF5KGlucHV0T2Zmc2V0LCBpbnB1dE9mZnNldCArIGlucHV0TGVuZ3RoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGJ1Zi5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzbiA9IGxvY2FsRnJvbUJFUihidWYsIDAsIGJ1Zi5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzbi5vZmZzZXQgIT09IC0xICYmIGFzbi5vZmZzZXQgPT09IGlucHV0TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQmxvY2sudmFsdWUgPSBbYXNuLnJlc3VsdF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCk7XG4gICAgfVxuICAgIG9uQXNjaWlFbmNvZGluZygpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVCbG9jay5pc0NvbnN0cnVjdGVkIHx8ICh0aGlzLnZhbHVlQmxvY2sudmFsdWUgJiYgdGhpcy52YWx1ZUJsb2NrLnZhbHVlLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIHJldHVybiBDb25zdHJ1Y3RlZC5wcm90b3R5cGUub25Bc2NpaUVuY29kaW5nLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IuTkFNRTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwdnRzdXRpbHMuQ29udmVydC5Ub0hleCh0aGlzLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KTtcbiAgICAgICAgcmV0dXJuIGAke25hbWV9IDogJHt2YWx1ZX1gO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlkQmxvY2suaXNDb25zdHJ1Y3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXcuc2xpY2UoKS5idWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIHRoaXMudmFsdWVCbG9jay52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBfYSRyKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaChjb250ZW50LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5jb25jYXQoYXJyYXkpO1xuICAgIH1cbn1cbl9hJHIgPSBPY3RldFN0cmluZztcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLk9jdGV0U3RyaW5nID0gX2Ekcjtcbn0pKCk7XG5PY3RldFN0cmluZy5OQU1FID0gT0NURVRfU1RSSU5HX05BTUU7XG5cbmNsYXNzIExvY2FsQml0U3RyaW5nVmFsdWVCbG9jayBleHRlbmRzIEhleEJsb2NrKExvY2FsQ29uc3RydWN0ZWRWYWx1ZUJsb2NrKSB7XG4gICAgY29uc3RydWN0b3IoeyB1bnVzZWRCaXRzID0gMCwgaXNDb25zdHJ1Y3RlZCA9IGZhbHNlLCAuLi5wYXJhbWV0ZXJzIH0gPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy51bnVzZWRCaXRzID0gdW51c2VkQml0cztcbiAgICAgICAgdGhpcy5pc0NvbnN0cnVjdGVkID0gaXNDb25zdHJ1Y3RlZDtcbiAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCA9IHRoaXMudmFsdWVIZXhWaWV3LmJ5dGVMZW5ndGg7XG4gICAgfVxuICAgIGZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCkge1xuICAgICAgICBpZiAoIWlucHV0TGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlc3VsdE9mZnNldCA9IC0xO1xuICAgICAgICBpZiAodGhpcy5pc0NvbnN0cnVjdGVkKSB7XG4gICAgICAgICAgICByZXN1bHRPZmZzZXQgPSBMb2NhbENvbnN0cnVjdGVkVmFsdWVCbG9jay5wcm90b3R5cGUuZnJvbUJFUi5jYWxsKHRoaXMsIGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdE9mZnNldCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mZnNldDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCbG9ja05hbWUgPSB2YWx1ZS5jb25zdHJ1Y3Rvci5OQU1FO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50QmxvY2tOYW1lID09PSBFTkRfT0ZfQ09OVEVOVF9OQU1FKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW5kZWZpbml0ZUZvcm0pXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gXCJFbmRPZkNvbnRlbnQgaXMgdW5leHBlY3RlZCwgQklUIFNUUklORyBtYXkgY29uc2lzdHMgb2YgQklUIFNUUklOR3Mgb25seVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50QmxvY2tOYW1lICE9PSBCSVRfU1RSSU5HX05BTUUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiQklUIFNUUklORyBtYXkgY29uc2lzdHMgb2YgQklUIFNUUklOR3Mgb25seVwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlQmxvY2sgPSB2YWx1ZS52YWx1ZUJsb2NrO1xuICAgICAgICAgICAgICAgIGlmICgodGhpcy51bnVzZWRCaXRzID4gMCkgJiYgKHZhbHVlQmxvY2sudW51c2VkQml0cyA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIlVzaW5nIG9mIFxcXCJ1bnVzZWQgYml0c1xcXCIgaW5zaWRlIGNvbnN0cnVjdGl2ZSBCSVQgU1RSSU5HIGFsbG93ZWQgZm9yIGxlYXN0IG9uZSBvbmx5XCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51bnVzZWRCaXRzID0gdmFsdWVCbG9jay51bnVzZWRCaXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnB1dFZpZXcgPSBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShpbnB1dEJ1ZmZlcik7XG4gICAgICAgIGlmICghY2hlY2tCdWZmZXJQYXJhbXModGhpcywgaW5wdXRWaWV3LCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW50QnVmZmVyID0gaW5wdXRWaWV3LnN1YmFycmF5KGlucHV0T2Zmc2V0LCBpbnB1dE9mZnNldCArIGlucHV0TGVuZ3RoKTtcbiAgICAgICAgdGhpcy51bnVzZWRCaXRzID0gaW50QnVmZmVyWzBdO1xuICAgICAgICBpZiAodGhpcy51bnVzZWRCaXRzID4gNykge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiVW51c2VkIGJpdHMgZm9yIEJpdFN0cmluZyBtdXN0IGJlIGluIHJhbmdlIDAtN1wiO1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy51bnVzZWRCaXRzKSB7XG4gICAgICAgICAgICBjb25zdCBidWYgPSBpbnRCdWZmZXIuc3ViYXJyYXkoMSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChidWYuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhc24gPSBsb2NhbEZyb21CRVIoYnVmLCAwLCBidWYuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhc24ub2Zmc2V0ICE9PSAtMSAmJiBhc24ub2Zmc2V0ID09PSAoaW5wdXRMZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFthc24ucmVzdWx0XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlSGV4VmlldyA9IGludEJ1ZmZlci5zdWJhcnJheSgxKTtcbiAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCA9IGludEJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHJldHVybiAoaW5wdXRPZmZzZXQgKyBpbnB1dExlbmd0aCk7XG4gICAgfVxuICAgIHRvQkVSKHNpemVPbmx5LCB3cml0ZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDb25zdHJ1Y3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIExvY2FsQ29uc3RydWN0ZWRWYWx1ZUJsb2NrLnByb3RvdHlwZS50b0JFUi5jYWxsKHRoaXMsIHNpemVPbmx5LCB3cml0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaXplT25seSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcih0aGlzLnZhbHVlSGV4Vmlldy5ieXRlTGVuZ3RoICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlSGV4Vmlldy5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJldFZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLnZhbHVlSGV4Vmlldy5sZW5ndGggKyAxKTtcbiAgICAgICAgcmV0Vmlld1swXSA9IHRoaXMudW51c2VkQml0cztcbiAgICAgICAgcmV0Vmlldy5zZXQodGhpcy52YWx1ZUhleFZpZXcsIDEpO1xuICAgICAgICByZXR1cm4gcmV0Vmlldy5idWZmZXI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgdW51c2VkQml0czogdGhpcy51bnVzZWRCaXRzLFxuICAgICAgICAgICAgaXNDb25zdHJ1Y3RlZDogdGhpcy5pc0NvbnN0cnVjdGVkLFxuICAgICAgICB9O1xuICAgIH1cbn1cbkxvY2FsQml0U3RyaW5nVmFsdWVCbG9jay5OQU1FID0gXCJCaXRTdHJpbmdWYWx1ZUJsb2NrXCI7XG5cbnZhciBfYSRxO1xuY2xhc3MgQml0U3RyaW5nIGV4dGVuZHMgQmFzZUJsb2NrIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGlkQmxvY2sgPSB7fSwgbGVuQmxvY2sgPSB7fSwgLi4ucGFyYW1ldGVycyB9ID0ge30pIHtcbiAgICAgICAgdmFyIF9iLCBfYztcbiAgICAgICAgKF9iID0gcGFyYW1ldGVycy5pc0NvbnN0cnVjdGVkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAocGFyYW1ldGVycy5pc0NvbnN0cnVjdGVkID0gISEoKF9jID0gcGFyYW1ldGVycy52YWx1ZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmxlbmd0aCkpO1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgaXNDb25zdHJ1Y3RlZDogcGFyYW1ldGVycy5pc0NvbnN0cnVjdGVkLFxuICAgICAgICAgICAgICAgIC4uLmlkQmxvY2ssXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVuQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAuLi5sZW5CbG9jayxcbiAgICAgICAgICAgICAgICBpc0luZGVmaW5pdGVGb3JtOiAhIXBhcmFtZXRlcnMuaXNJbmRlZmluaXRlRm9ybSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5wYXJhbWV0ZXJzLFxuICAgICAgICB9LCBMb2NhbEJpdFN0cmluZ1ZhbHVlQmxvY2spO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMztcbiAgICB9XG4gICAgZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudmFsdWVCbG9jay5pc0NvbnN0cnVjdGVkID0gdGhpcy5pZEJsb2NrLmlzQ29uc3RydWN0ZWQ7XG4gICAgICAgIHRoaXMudmFsdWVCbG9jay5pc0luZGVmaW5pdGVGb3JtID0gdGhpcy5sZW5CbG9jay5pc0luZGVmaW5pdGVGb3JtO1xuICAgICAgICByZXR1cm4gc3VwZXIuZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKTtcbiAgICB9XG4gICAgb25Bc2NpaUVuY29kaW5nKCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZUJsb2NrLmlzQ29uc3RydWN0ZWQgfHwgKHRoaXMudmFsdWVCbG9jay52YWx1ZSAmJiB0aGlzLnZhbHVlQmxvY2sudmFsdWUubGVuZ3RoKSkge1xuICAgICAgICAgICAgcmV0dXJuIENvbnN0cnVjdGVkLnByb3RvdHlwZS5vbkFzY2lpRW5jb2RpbmcuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlSGV4ID0gdGhpcy52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldztcbiAgICAgICAgICAgIGZvciAoY29uc3QgYnl0ZSBvZiB2YWx1ZUhleCkge1xuICAgICAgICAgICAgICAgIGJpdHMucHVzaChieXRlLnRvU3RyaW5nKDIpLnBhZFN0YXJ0KDgsIFwiMFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBiaXRzU3RyID0gYml0cy5qb2luKFwiXCIpO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IuTkFNRTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYml0c1N0ci5zdWJzdHJpbmcoMCwgYml0c1N0ci5sZW5ndGggLSB0aGlzLnZhbHVlQmxvY2sudW51c2VkQml0cyk7XG4gICAgICAgICAgICByZXR1cm4gYCR7bmFtZX0gOiAke3ZhbHVlfWA7XG4gICAgICAgIH1cbiAgICB9XG59XG5fYSRxID0gQml0U3RyaW5nO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuQml0U3RyaW5nID0gX2EkcTtcbn0pKCk7XG5CaXRTdHJpbmcuTkFNRSA9IEJJVF9TVFJJTkdfTkFNRTtcblxudmFyIF9hJHA7XG5mdW5jdGlvbiB2aWV3QWRkKGZpcnN0LCBzZWNvbmQpIHtcbiAgICBjb25zdCBjID0gbmV3IFVpbnQ4QXJyYXkoWzBdKTtcbiAgICBjb25zdCBmaXJzdFZpZXcgPSBuZXcgVWludDhBcnJheShmaXJzdCk7XG4gICAgY29uc3Qgc2Vjb25kVmlldyA9IG5ldyBVaW50OEFycmF5KHNlY29uZCk7XG4gICAgbGV0IGZpcnN0Vmlld0NvcHkgPSBmaXJzdFZpZXcuc2xpY2UoMCk7XG4gICAgY29uc3QgZmlyc3RWaWV3Q29weUxlbmd0aCA9IGZpcnN0Vmlld0NvcHkubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBzZWNvbmRWaWV3Q29weSA9IHNlY29uZFZpZXcuc2xpY2UoMCk7XG4gICAgY29uc3Qgc2Vjb25kVmlld0NvcHlMZW5ndGggPSBzZWNvbmRWaWV3Q29weS5sZW5ndGggLSAxO1xuICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgY29uc3QgbWF4ID0gKHNlY29uZFZpZXdDb3B5TGVuZ3RoIDwgZmlyc3RWaWV3Q29weUxlbmd0aCkgPyBmaXJzdFZpZXdDb3B5TGVuZ3RoIDogc2Vjb25kVmlld0NvcHlMZW5ndGg7XG4gICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgIGZvciAobGV0IGkgPSBtYXg7IGkgPj0gMDsgaS0tLCBjb3VudGVyKyspIHtcbiAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICBjYXNlIChjb3VudGVyIDwgc2Vjb25kVmlld0NvcHkubGVuZ3RoKTpcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZpcnN0Vmlld0NvcHlbZmlyc3RWaWV3Q29weUxlbmd0aCAtIGNvdW50ZXJdICsgc2Vjb25kVmlld0NvcHlbc2Vjb25kVmlld0NvcHlMZW5ndGggLSBjb3VudGVyXSArIGNbMF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHZhbHVlID0gZmlyc3RWaWV3Q29weVtmaXJzdFZpZXdDb3B5TGVuZ3RoIC0gY291bnRlcl0gKyBjWzBdO1xuICAgICAgICB9XG4gICAgICAgIGNbMF0gPSB2YWx1ZSAvIDEwO1xuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgKGNvdW50ZXIgPj0gZmlyc3RWaWV3Q29weS5sZW5ndGgpOlxuICAgICAgICAgICAgICAgIGZpcnN0Vmlld0NvcHkgPSBwdnV0aWxzLnV0aWxDb25jYXRWaWV3KG5ldyBVaW50OEFycmF5KFt2YWx1ZSAlIDEwXSksIGZpcnN0Vmlld0NvcHkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmaXJzdFZpZXdDb3B5W2ZpcnN0Vmlld0NvcHlMZW5ndGggLSBjb3VudGVyXSA9IHZhbHVlICUgMTA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNbMF0gPiAwKVxuICAgICAgICBmaXJzdFZpZXdDb3B5ID0gcHZ1dGlscy51dGlsQ29uY2F0VmlldyhjLCBmaXJzdFZpZXdDb3B5KTtcbiAgICByZXR1cm4gZmlyc3RWaWV3Q29weTtcbn1cbmZ1bmN0aW9uIHBvd2VyMihuKSB7XG4gICAgaWYgKG4gPj0gcG93ZXJzMi5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgcCA9IHBvd2VyczIubGVuZ3RoOyBwIDw9IG47IHArKykge1xuICAgICAgICAgICAgY29uc3QgYyA9IG5ldyBVaW50OEFycmF5KFswXSk7XG4gICAgICAgICAgICBsZXQgZGlnaXRzID0gKHBvd2VyczJbcCAtIDFdKS5zbGljZSgwKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAoZGlnaXRzLmxlbmd0aCAtIDEpOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gbmV3IFVpbnQ4QXJyYXkoWyhkaWdpdHNbaV0gPDwgMSkgKyBjWzBdXSk7XG4gICAgICAgICAgICAgICAgY1swXSA9IG5ld1ZhbHVlWzBdIC8gMTA7XG4gICAgICAgICAgICAgICAgZGlnaXRzW2ldID0gbmV3VmFsdWVbMF0gJSAxMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjWzBdID4gMClcbiAgICAgICAgICAgICAgICBkaWdpdHMgPSBwdnV0aWxzLnV0aWxDb25jYXRWaWV3KGMsIGRpZ2l0cyk7XG4gICAgICAgICAgICBwb3dlcnMyLnB1c2goZGlnaXRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG93ZXJzMltuXTtcbn1cbmZ1bmN0aW9uIHZpZXdTdWIoZmlyc3QsIHNlY29uZCkge1xuICAgIGxldCBiID0gMDtcbiAgICBjb25zdCBmaXJzdFZpZXcgPSBuZXcgVWludDhBcnJheShmaXJzdCk7XG4gICAgY29uc3Qgc2Vjb25kVmlldyA9IG5ldyBVaW50OEFycmF5KHNlY29uZCk7XG4gICAgY29uc3QgZmlyc3RWaWV3Q29weSA9IGZpcnN0Vmlldy5zbGljZSgwKTtcbiAgICBjb25zdCBmaXJzdFZpZXdDb3B5TGVuZ3RoID0gZmlyc3RWaWV3Q29weS5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHNlY29uZFZpZXdDb3B5ID0gc2Vjb25kVmlldy5zbGljZSgwKTtcbiAgICBjb25zdCBzZWNvbmRWaWV3Q29weUxlbmd0aCA9IHNlY29uZFZpZXdDb3B5Lmxlbmd0aCAtIDE7XG4gICAgbGV0IHZhbHVlO1xuICAgIGxldCBjb3VudGVyID0gMDtcbiAgICBmb3IgKGxldCBpID0gc2Vjb25kVmlld0NvcHlMZW5ndGg7IGkgPj0gMDsgaS0tLCBjb3VudGVyKyspIHtcbiAgICAgICAgdmFsdWUgPSBmaXJzdFZpZXdDb3B5W2ZpcnN0Vmlld0NvcHlMZW5ndGggLSBjb3VudGVyXSAtIHNlY29uZFZpZXdDb3B5W3NlY29uZFZpZXdDb3B5TGVuZ3RoIC0gY291bnRlcl0gLSBiO1xuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgKHZhbHVlIDwgMCk6XG4gICAgICAgICAgICAgICAgYiA9IDE7XG4gICAgICAgICAgICAgICAgZmlyc3RWaWV3Q29weVtmaXJzdFZpZXdDb3B5TGVuZ3RoIC0gY291bnRlcl0gPSB2YWx1ZSArIDEwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBiID0gMDtcbiAgICAgICAgICAgICAgICBmaXJzdFZpZXdDb3B5W2ZpcnN0Vmlld0NvcHlMZW5ndGggLSBjb3VudGVyXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChiID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gKGZpcnN0Vmlld0NvcHlMZW5ndGggLSBzZWNvbmRWaWV3Q29weUxlbmd0aCArIDEpOyBpID49IDA7IGktLSwgY291bnRlcisrKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGZpcnN0Vmlld0NvcHlbZmlyc3RWaWV3Q29weUxlbmd0aCAtIGNvdW50ZXJdIC0gYjtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDApIHtcbiAgICAgICAgICAgICAgICBiID0gMTtcbiAgICAgICAgICAgICAgICBmaXJzdFZpZXdDb3B5W2ZpcnN0Vmlld0NvcHlMZW5ndGggLSBjb3VudGVyXSA9IHZhbHVlICsgMTA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBiID0gMDtcbiAgICAgICAgICAgICAgICBmaXJzdFZpZXdDb3B5W2ZpcnN0Vmlld0NvcHlMZW5ndGggLSBjb3VudGVyXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaXJzdFZpZXdDb3B5LnNsaWNlKCk7XG59XG5jbGFzcyBMb2NhbEludGVnZXJWYWx1ZUJsb2NrIGV4dGVuZHMgSGV4QmxvY2soVmFsdWVCbG9jaykge1xuICAgIHNldFZhbHVlSGV4KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZUhleFZpZXcubGVuZ3RoID49IDQpIHtcbiAgICAgICAgICAgIHRoaXMud2FybmluZ3MucHVzaChcIlRvbyBiaWcgSW50ZWdlciBmb3IgZGVjb2RpbmcsIGhleCBvbmx5XCIpO1xuICAgICAgICAgICAgdGhpcy5pc0hleE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fdmFsdWVEZWMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0hleE9ubHkgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlSGV4Vmlldy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVEZWMgPSBwdnV0aWxzLnV0aWxEZWNvZGVUQy5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHsgdmFsdWUsIC4uLnBhcmFtZXRlcnMgfSA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLl92YWx1ZURlYyA9IDA7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnZhbHVlSGV4KSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlSGV4KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVEZWMgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXQgdmFsdWVEZWModikge1xuICAgICAgICB0aGlzLl92YWx1ZURlYyA9IHY7XG4gICAgICAgIHRoaXMuaXNIZXhPbmx5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmFsdWVIZXhWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocHZ1dGlscy51dGlsRW5jb2RlVEModikpO1xuICAgIH1cbiAgICBnZXQgdmFsdWVEZWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZURlYztcbiAgICB9XG4gICAgZnJvbURFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoLCBleHBlY3RlZExlbmd0aCA9IDApIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5mcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpO1xuICAgICAgICBpZiAob2Zmc2V0ID09PSAtMSlcbiAgICAgICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnZhbHVlSGV4VmlldztcbiAgICAgICAgaWYgKCh2aWV3WzBdID09PSAweDAwKSAmJiAoKHZpZXdbMV0gJiAweDgwKSAhPT0gMCkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVIZXhWaWV3ID0gdmlldy5zdWJhcnJheSgxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChleHBlY3RlZExlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3Lmxlbmd0aCA8IGV4cGVjdGVkTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZXhwZWN0ZWRMZW5ndGggLSB2aWV3Lmxlbmd0aCkgPiAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRMZW5ndGggPSB2aWV3Lmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVIZXhWaWV3ID0gdmlldy5zdWJhcnJheShleHBlY3RlZExlbmd0aCAtIHZpZXcubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG4gICAgdG9ERVIoc2l6ZU9ubHkgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy52YWx1ZUhleFZpZXc7XG4gICAgICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgICAgICAgY2FzZSAoKHZpZXdbMF0gJiAweDgwKSAhPT0gMCk6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMudmFsdWVIZXhWaWV3Lmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVmlld1swXSA9IDB4MDA7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRWaWV3LnNldCh2aWV3LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZUhleFZpZXcgPSB1cGRhdGVkVmlldztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICgodmlld1swXSA9PT0gMHgwMCkgJiYgKCh2aWV3WzFdICYgMHg4MCkgPT09IDApKTpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVIZXhWaWV3ID0gdGhpcy52YWx1ZUhleFZpZXcuc3ViYXJyYXkoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRvQkVSKHNpemVPbmx5KTtcbiAgICB9XG4gICAgZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdE9mZnNldCA9IHN1cGVyLmZyb21CRVIoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0LCBpbnB1dExlbmd0aCk7XG4gICAgICAgIGlmIChyZXN1bHRPZmZzZXQgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0VmFsdWVIZXgoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdE9mZnNldDtcbiAgICB9XG4gICAgdG9CRVIoc2l6ZU9ubHkpIHtcbiAgICAgICAgcmV0dXJuIHNpemVPbmx5XG4gICAgICAgICAgICA/IG5ldyBBcnJheUJ1ZmZlcih0aGlzLnZhbHVlSGV4Vmlldy5sZW5ndGgpXG4gICAgICAgICAgICA6IHRoaXMudmFsdWVIZXhWaWV3LnNsaWNlKCkuYnVmZmVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIHZhbHVlRGVjOiB0aGlzLnZhbHVlRGVjLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgZmlyc3RCaXQgPSAodGhpcy52YWx1ZUhleFZpZXcubGVuZ3RoICogOCkgLSAxO1xuICAgICAgICBsZXQgZGlnaXRzID0gbmV3IFVpbnQ4QXJyYXkoKHRoaXMudmFsdWVIZXhWaWV3Lmxlbmd0aCAqIDgpIC8gMyk7XG4gICAgICAgIGxldCBiaXROdW1iZXIgPSAwO1xuICAgICAgICBsZXQgY3VycmVudEJ5dGU7XG4gICAgICAgIGNvbnN0IGFzbjFWaWV3ID0gdGhpcy52YWx1ZUhleFZpZXc7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBsZXQgZmxhZyA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBieXRlTnVtYmVyID0gKGFzbjFWaWV3LmJ5dGVMZW5ndGggLSAxKTsgYnl0ZU51bWJlciA+PSAwOyBieXRlTnVtYmVyLS0pIHtcbiAgICAgICAgICAgIGN1cnJlbnRCeXRlID0gYXNuMVZpZXdbYnl0ZU51bWJlcl07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgoY3VycmVudEJ5dGUgJiAxKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGJpdE51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBmaXJzdEJpdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWdpdHMgPSB2aWV3U3ViKHBvd2VyMihiaXROdW1iZXIpLCBkaWdpdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiLVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWdpdHMgPSB2aWV3QWRkKGRpZ2l0cywgcG93ZXIyKGJpdE51bWJlcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJpdE51bWJlcisrO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlID4+PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlnaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZGlnaXRzW2ldKVxuICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGZsYWcpXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRpZ2l0c1N0cmluZy5jaGFyQXQoZGlnaXRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZyA9PT0gZmFsc2UpXG4gICAgICAgICAgICByZXN1bHQgKz0gZGlnaXRzU3RyaW5nLmNoYXJBdCgwKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5fYSRwID0gTG9jYWxJbnRlZ2VyVmFsdWVCbG9jaztcbkxvY2FsSW50ZWdlclZhbHVlQmxvY2suTkFNRSA9IFwiSW50ZWdlclZhbHVlQmxvY2tcIjtcbigoKSA9PiB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9hJHAucHJvdG90eXBlLCBcInZhbHVlSGV4XCIsIHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUhleFZpZXcgPSBuZXcgVWludDhBcnJheSh2KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVIZXgoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUhleFZpZXcuc2xpY2UoKS5idWZmZXI7XG4gICAgICAgIH0sXG4gICAgfSk7XG59KSgpO1xuXG52YXIgX2EkbztcbmNsYXNzIEludGVnZXIgZXh0ZW5kcyBCYXNlQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzLCBMb2NhbEludGVnZXJWYWx1ZUJsb2NrKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDI7XG4gICAgfVxuICAgIHRvQmlnSW50KCkge1xuICAgICAgICBhc3NlcnRCaWdJbnQoKTtcbiAgICAgICAgcmV0dXJuIEJpZ0ludCh0aGlzLnZhbHVlQmxvY2sudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmlnSW50KHZhbHVlKSB7XG4gICAgICAgIGFzc2VydEJpZ0ludCgpO1xuICAgICAgICBjb25zdCBiaWdJbnRWYWx1ZSA9IEJpZ0ludCh2YWx1ZSk7XG4gICAgICAgIGNvbnN0IHdyaXRlciA9IG5ldyBWaWV3V3JpdGVyKCk7XG4gICAgICAgIGNvbnN0IGhleCA9IGJpZ0ludFZhbHVlLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eLS8sIFwiXCIpO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkocHZ0c3V0aWxzLkNvbnZlcnQuRnJvbUhleChoZXgpKTtcbiAgICAgICAgaWYgKGJpZ0ludFZhbHVlIDwgMCkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3QgPSBuZXcgVWludDhBcnJheSh2aWV3Lmxlbmd0aCArICh2aWV3WzBdICYgMHg4MCA/IDEgOiAwKSk7XG4gICAgICAgICAgICBmaXJzdFswXSB8PSAweDgwO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RJbnQgPSBCaWdJbnQoYDB4JHtwdnRzdXRpbHMuQ29udmVydC5Ub0hleChmaXJzdCl9YCk7XG4gICAgICAgICAgICBjb25zdCBzZWNvbmRJbnQgPSBmaXJzdEludCArIGJpZ0ludFZhbHVlO1xuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkocHZ0c3V0aWxzLkNvbnZlcnQuRnJvbUhleChzZWNvbmRJbnQudG9TdHJpbmcoMTYpKSk7XG4gICAgICAgICAgICBzZWNvbmRbMF0gfD0gMHg4MDtcbiAgICAgICAgICAgIHdyaXRlci53cml0ZShzZWNvbmQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHZpZXdbMF0gJiAweDgwKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLndyaXRlKG5ldyBVaW50OEFycmF5KFswXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd3JpdGVyLndyaXRlKHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IG5ldyBfYSRvKHsgdmFsdWVIZXg6IHdyaXRlci5maW5hbCgpIH0pO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBjb252ZXJ0VG9ERVIoKSB7XG4gICAgICAgIGNvbnN0IGludGVnZXIgPSBuZXcgX2Ekbyh7IHZhbHVlSGV4OiB0aGlzLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3IH0pO1xuICAgICAgICBpbnRlZ2VyLnZhbHVlQmxvY2sudG9ERVIoKTtcbiAgICAgICAgcmV0dXJuIGludGVnZXI7XG4gICAgfVxuICAgIGNvbnZlcnRGcm9tREVSKCkge1xuICAgICAgICByZXR1cm4gbmV3IF9hJG8oe1xuICAgICAgICAgICAgdmFsdWVIZXg6IHRoaXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXdbMF0gPT09IDBcbiAgICAgICAgICAgICAgICA/IHRoaXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXcuc3ViYXJyYXkoMSlcbiAgICAgICAgICAgICAgICA6IHRoaXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbkFzY2lpRW5jb2RpbmcoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLk5BTUV9IDogJHt0aGlzLnZhbHVlQmxvY2sudG9TdHJpbmcoKX1gO1xuICAgIH1cbn1cbl9hJG8gPSBJbnRlZ2VyO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuSW50ZWdlciA9IF9hJG87XG59KSgpO1xuSW50ZWdlci5OQU1FID0gXCJJTlRFR0VSXCI7XG5cbnZhciBfYSRuO1xuY2xhc3MgRW51bWVyYXRlZCBleHRlbmRzIEludGVnZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDEwO1xuICAgIH1cbn1cbl9hJG4gPSBFbnVtZXJhdGVkO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuRW51bWVyYXRlZCA9IF9hJG47XG59KSgpO1xuRW51bWVyYXRlZC5OQU1FID0gXCJFTlVNRVJBVEVEXCI7XG5cbmNsYXNzIExvY2FsU2lkVmFsdWVCbG9jayBleHRlbmRzIEhleEJsb2NrKFZhbHVlQmxvY2spIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHZhbHVlRGVjID0gLTEsIGlzRmlyc3RTaWQgPSBmYWxzZSwgLi4ucGFyYW1ldGVycyB9ID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMudmFsdWVEZWMgPSB2YWx1ZURlYztcbiAgICAgICAgdGhpcy5pc0ZpcnN0U2lkID0gaXNGaXJzdFNpZDtcbiAgICB9XG4gICAgZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XG4gICAgICAgIGlmICghaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnB1dFZpZXcgPSBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShpbnB1dEJ1ZmZlcik7XG4gICAgICAgIGlmICghY2hlY2tCdWZmZXJQYXJhbXModGhpcywgaW5wdXRWaWV3LCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW50QnVmZmVyID0gaW5wdXRWaWV3LnN1YmFycmF5KGlucHV0T2Zmc2V0LCBpbnB1dE9mZnNldCArIGlucHV0TGVuZ3RoKTtcbiAgICAgICAgdGhpcy52YWx1ZUhleFZpZXcgPSBuZXcgVWludDhBcnJheShpbnB1dExlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUhleFZpZXdbaV0gPSBpbnRCdWZmZXJbaV0gJiAweDdGO1xuICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCsrO1xuICAgICAgICAgICAgaWYgKChpbnRCdWZmZXJbaV0gJiAweDgwKSA9PT0gMHgwMClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ZW1wVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYmxvY2tMZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGVtcFZpZXdbaV0gPSB0aGlzLnZhbHVlSGV4Vmlld1tpXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlSGV4VmlldyA9IHRlbXBWaWV3O1xuICAgICAgICBpZiAoKGludEJ1ZmZlclt0aGlzLmJsb2NrTGVuZ3RoIC0gMV0gJiAweDgwKSAhPT0gMHgwMCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiRW5kIG9mIGlucHV0IHJlYWNoZWQgYmVmb3JlIG1lc3NhZ2Ugd2FzIGZ1bGx5IGRlY29kZWRcIjtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZUhleFZpZXdbMF0gPT09IDB4MDApXG4gICAgICAgICAgICB0aGlzLndhcm5pbmdzLnB1c2goXCJOZWVkbGVzc2x5IGxvbmcgZm9ybWF0IG9mIFNJRCBlbmNvZGluZ1wiKTtcbiAgICAgICAgaWYgKHRoaXMuYmxvY2tMZW5ndGggPD0gOClcbiAgICAgICAgICAgIHRoaXMudmFsdWVEZWMgPSBwdnV0aWxzLnV0aWxGcm9tQmFzZSh0aGlzLnZhbHVlSGV4VmlldywgNyk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0hleE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy53YXJuaW5ncy5wdXNoKFwiVG9vIGJpZyBTSUQgZm9yIGRlY29kaW5nLCBoZXggb25seVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGlucHV0T2Zmc2V0ICsgdGhpcy5ibG9ja0xlbmd0aCk7XG4gICAgfVxuICAgIHNldCB2YWx1ZUJpZ0ludCh2YWx1ZSkge1xuICAgICAgICBhc3NlcnRCaWdJbnQoKTtcbiAgICAgICAgbGV0IGJpdHMgPSBCaWdJbnQodmFsdWUpLnRvU3RyaW5nKDIpO1xuICAgICAgICB3aGlsZSAoYml0cy5sZW5ndGggJSA3KSB7XG4gICAgICAgICAgICBiaXRzID0gXCIwXCIgKyBiaXRzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYml0cy5sZW5ndGggLyA3KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYnl0ZXNbaV0gPSBwYXJzZUludChiaXRzLnNsaWNlKGkgKiA3LCBpICogNyArIDcpLCAyKSArIChpICsgMSA8IGJ5dGVzLmxlbmd0aCA/IDB4ODAgOiAwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyb21CRVIoYnl0ZXMuYnVmZmVyLCAwLCBieXRlcy5sZW5ndGgpO1xuICAgIH1cbiAgICB0b0JFUihzaXplT25seSkge1xuICAgICAgICBpZiAodGhpcy5pc0hleE9ubHkpIHtcbiAgICAgICAgICAgIGlmIChzaXplT25seSlcbiAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBBcnJheUJ1ZmZlcih0aGlzLnZhbHVlSGV4Vmlldy5ieXRlTGVuZ3RoKSk7XG4gICAgICAgICAgICBjb25zdCBjdXJWaWV3ID0gdGhpcy52YWx1ZUhleFZpZXc7XG4gICAgICAgICAgICBjb25zdCByZXRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5ibG9ja0xlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8ICh0aGlzLmJsb2NrTGVuZ3RoIC0gMSk7IGkrKylcbiAgICAgICAgICAgICAgICByZXRWaWV3W2ldID0gY3VyVmlld1tpXSB8IDB4ODA7XG4gICAgICAgICAgICByZXRWaWV3W3RoaXMuYmxvY2tMZW5ndGggLSAxXSA9IGN1clZpZXdbdGhpcy5ibG9ja0xlbmd0aCAtIDFdO1xuICAgICAgICAgICAgcmV0dXJuIHJldFZpZXcuYnVmZmVyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuY29kZWRCdWYgPSBwdnV0aWxzLnV0aWxUb0Jhc2UodGhpcy52YWx1ZURlYywgNyk7XG4gICAgICAgIGlmIChlbmNvZGVkQnVmLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIkVycm9yIGR1cmluZyBlbmNvZGluZyBTSUQgdmFsdWVcIjtcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmV0VmlldyA9IG5ldyBVaW50OEFycmF5KGVuY29kZWRCdWYuYnl0ZUxlbmd0aCk7XG4gICAgICAgIGlmICghc2l6ZU9ubHkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZW5jb2RlZEJ1Zik7XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBlbmNvZGVkQnVmLmJ5dGVMZW5ndGggLSAxO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgICAgICAgICAgICByZXRWaWV3W2ldID0gZW5jb2RlZFZpZXdbaV0gfCAweDgwO1xuICAgICAgICAgICAgcmV0Vmlld1tsZW5dID0gZW5jb2RlZFZpZXdbbGVuXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0VmlldztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBpZiAodGhpcy5pc0hleE9ubHkpXG4gICAgICAgICAgICByZXN1bHQgPSBwdnRzdXRpbHMuQ29udmVydC5Ub0hleCh0aGlzLnZhbHVlSGV4Vmlldyk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGaXJzdFNpZCkge1xuICAgICAgICAgICAgICAgIGxldCBzaWRWYWx1ZSA9IHRoaXMudmFsdWVEZWM7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVEZWMgPD0gMzkpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMC5cIjtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVEZWMgPD0gNzkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZFZhbHVlIC09IDQwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIyLlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lkVmFsdWUgLT0gODA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHNpZFZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy52YWx1ZURlYy50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgdmFsdWVEZWM6IHRoaXMudmFsdWVEZWMsXG4gICAgICAgICAgICBpc0ZpcnN0U2lkOiB0aGlzLmlzRmlyc3RTaWQsXG4gICAgICAgIH07XG4gICAgfVxufVxuTG9jYWxTaWRWYWx1ZUJsb2NrLk5BTUUgPSBcInNpZEJsb2NrXCI7XG5cbmNsYXNzIExvY2FsT2JqZWN0SWRlbnRpZmllclZhbHVlQmxvY2sgZXh0ZW5kcyBWYWx1ZUJsb2NrIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHZhbHVlID0gRU1QVFlfU1RSSU5HLCAuLi5wYXJhbWV0ZXJzIH0gPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVN0cmluZyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XG4gICAgICAgIGxldCByZXN1bHRPZmZzZXQgPSBpbnB1dE9mZnNldDtcbiAgICAgICAgd2hpbGUgKGlucHV0TGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc2lkQmxvY2sgPSBuZXcgTG9jYWxTaWRWYWx1ZUJsb2NrKCk7XG4gICAgICAgICAgICByZXN1bHRPZmZzZXQgPSBzaWRCbG9jay5mcm9tQkVSKGlucHV0QnVmZmVyLCByZXN1bHRPZmZzZXQsIGlucHV0TGVuZ3RoKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRPZmZzZXQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IHNpZEJsb2NrLmVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgc2lkQmxvY2suaXNGaXJzdFNpZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmJsb2NrTGVuZ3RoICs9IHNpZEJsb2NrLmJsb2NrTGVuZ3RoO1xuICAgICAgICAgICAgaW5wdXRMZW5ndGggLT0gc2lkQmxvY2suYmxvY2tMZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnZhbHVlLnB1c2goc2lkQmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRPZmZzZXQ7XG4gICAgfVxuICAgIHRvQkVSKHNpemVPbmx5KSB7XG4gICAgICAgIGNvbnN0IHJldEJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZUJ1ZiA9IHRoaXMudmFsdWVbaV0udG9CRVIoc2l6ZU9ubHkpO1xuICAgICAgICAgICAgaWYgKHZhbHVlQnVmLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gdGhpcy52YWx1ZVtpXS5lcnJvcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0QnVmZmVycy5wdXNoKHZhbHVlQnVmKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29uY2F0KHJldEJ1ZmZlcnMpO1xuICAgIH1cbiAgICBmcm9tU3RyaW5nKHN0cmluZykge1xuICAgICAgICB0aGlzLnZhbHVlID0gW107XG4gICAgICAgIGxldCBwb3MxID0gMDtcbiAgICAgICAgbGV0IHBvczIgPSAwO1xuICAgICAgICBsZXQgc2lkID0gXCJcIjtcbiAgICAgICAgbGV0IGZsYWcgPSBmYWxzZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgcG9zMiA9IHN0cmluZy5pbmRleE9mKFwiLlwiLCBwb3MxKTtcbiAgICAgICAgICAgIGlmIChwb3MyID09PSAtMSlcbiAgICAgICAgICAgICAgICBzaWQgPSBzdHJpbmcuc3Vic3RyaW5nKHBvczEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNpZCA9IHN0cmluZy5zdWJzdHJpbmcocG9zMSwgcG9zMik7XG4gICAgICAgICAgICBwb3MxID0gcG9zMiArIDE7XG4gICAgICAgICAgICBpZiAoZmxhZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpZEJsb2NrID0gdGhpcy52YWx1ZVswXTtcbiAgICAgICAgICAgICAgICBsZXQgcGx1cyA9IDA7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChzaWRCbG9jay52YWx1ZURlYykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGx1cyA9IDQwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdXMgPSA4MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRTSUQgPSBwYXJzZUludChzaWQsIDEwKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4ocGFyc2VkU0lEKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNpZEJsb2NrLnZhbHVlRGVjID0gcGFyc2VkU0lEICsgcGx1cztcbiAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWRCbG9jayA9IG5ldyBMb2NhbFNpZFZhbHVlQmxvY2soKTtcbiAgICAgICAgICAgICAgICBpZiAoc2lkID4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0QmlnSW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZFZhbHVlID0gQmlnSW50KHNpZCk7XG4gICAgICAgICAgICAgICAgICAgIHNpZEJsb2NrLnZhbHVlQmlnSW50ID0gc2lkVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzaWRCbG9jay52YWx1ZURlYyA9IHBhcnNlSW50KHNpZCwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oc2lkQmxvY2sudmFsdWVEZWMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpZEJsb2NrLmlzRmlyc3RTaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5wdXNoKHNpZEJsb2NrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAocG9zMiAhPT0gLTEpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGxldCBpc0hleE9ubHkgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpc0hleE9ubHkgPSB0aGlzLnZhbHVlW2ldLmlzSGV4T25seTtcbiAgICAgICAgICAgIGxldCBzaWRTdHIgPSB0aGlzLnZhbHVlW2ldLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoaSAhPT0gMClcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBgJHtyZXN1bHR9LmA7XG4gICAgICAgICAgICBpZiAoaXNIZXhPbmx5KSB7XG4gICAgICAgICAgICAgICAgc2lkU3RyID0gYHske3NpZFN0cn19YDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZVtpXS5pc0ZpcnN0U2lkKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBgMi57JHtzaWRTdHJ9IC0gODB9YDtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzaWRTdHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHNpZFN0cjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IG9iamVjdCA9IHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHNpZEFycmF5OiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvYmplY3Quc2lkQXJyYXkucHVzaCh0aGlzLnZhbHVlW2ldLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cbn1cbkxvY2FsT2JqZWN0SWRlbnRpZmllclZhbHVlQmxvY2suTkFNRSA9IFwiT2JqZWN0SWRlbnRpZmllclZhbHVlQmxvY2tcIjtcblxudmFyIF9hJG07XG5jbGFzcyBPYmplY3RJZGVudGlmaWVyIGV4dGVuZHMgQmFzZUJsb2NrIHtcbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlQmxvY2suZnJvbVN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzLCBMb2NhbE9iamVjdElkZW50aWZpZXJWYWx1ZUJsb2NrKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDY7XG4gICAgfVxuICAgIG9uQXNjaWlFbmNvZGluZygpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IuTkFNRX0gOiAke3RoaXMudmFsdWVCbG9jay50b1N0cmluZygpIHx8IFwiZW1wdHlcIn1gO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmdldFZhbHVlKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuX2EkbSA9IE9iamVjdElkZW50aWZpZXI7XG4oKCkgPT4ge1xuICAgIHR5cGVTdG9yZS5PYmplY3RJZGVudGlmaWVyID0gX2EkbTtcbn0pKCk7XG5PYmplY3RJZGVudGlmaWVyLk5BTUUgPSBcIk9CSkVDVCBJREVOVElGSUVSXCI7XG5cbmNsYXNzIExvY2FsUmVsYXRpdmVTaWRWYWx1ZUJsb2NrIGV4dGVuZHMgSGV4QmxvY2soTG9jYWxCYXNlQmxvY2spIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHZhbHVlRGVjID0gMCwgLi4ucGFyYW1ldGVycyB9ID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMudmFsdWVEZWMgPSB2YWx1ZURlYztcbiAgICB9XG4gICAgZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XG4gICAgICAgIGlmIChpbnB1dExlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBpbnB1dE9mZnNldDtcbiAgICAgICAgY29uc3QgaW5wdXRWaWV3ID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkoaW5wdXRCdWZmZXIpO1xuICAgICAgICBpZiAoIWNoZWNrQnVmZmVyUGFyYW1zKHRoaXMsIGlucHV0VmlldywgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgY29uc3QgaW50QnVmZmVyID0gaW5wdXRWaWV3LnN1YmFycmF5KGlucHV0T2Zmc2V0LCBpbnB1dE9mZnNldCArIGlucHV0TGVuZ3RoKTtcbiAgICAgICAgdGhpcy52YWx1ZUhleFZpZXcgPSBuZXcgVWludDhBcnJheShpbnB1dExlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUhleFZpZXdbaV0gPSBpbnRCdWZmZXJbaV0gJiAweDdGO1xuICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCsrO1xuICAgICAgICAgICAgaWYgKChpbnRCdWZmZXJbaV0gJiAweDgwKSA9PT0gMHgwMClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ZW1wVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYmxvY2tMZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tMZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHRlbXBWaWV3W2ldID0gdGhpcy52YWx1ZUhleFZpZXdbaV07XG4gICAgICAgIHRoaXMudmFsdWVIZXhWaWV3ID0gdGVtcFZpZXc7XG4gICAgICAgIGlmICgoaW50QnVmZmVyW3RoaXMuYmxvY2tMZW5ndGggLSAxXSAmIDB4ODApICE9PSAweDAwKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gXCJFbmQgb2YgaW5wdXQgcmVhY2hlZCBiZWZvcmUgbWVzc2FnZSB3YXMgZnVsbHkgZGVjb2RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlSGV4Vmlld1swXSA9PT0gMHgwMClcbiAgICAgICAgICAgIHRoaXMud2FybmluZ3MucHVzaChcIk5lZWRsZXNzbHkgbG9uZyBmb3JtYXQgb2YgU0lEIGVuY29kaW5nXCIpO1xuICAgICAgICBpZiAodGhpcy5ibG9ja0xlbmd0aCA8PSA4KVxuICAgICAgICAgICAgdGhpcy52YWx1ZURlYyA9IHB2dXRpbHMudXRpbEZyb21CYXNlKHRoaXMudmFsdWVIZXhWaWV3LCA3KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzSGV4T25seSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLndhcm5pbmdzLnB1c2goXCJUb28gYmlnIFNJRCBmb3IgZGVjb2RpbmcsIGhleCBvbmx5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoaW5wdXRPZmZzZXQgKyB0aGlzLmJsb2NrTGVuZ3RoKTtcbiAgICB9XG4gICAgdG9CRVIoc2l6ZU9ubHkpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNIZXhPbmx5KSB7XG4gICAgICAgICAgICBpZiAoc2l6ZU9ubHkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgQXJyYXlCdWZmZXIodGhpcy52YWx1ZUhleFZpZXcuYnl0ZUxlbmd0aCkpO1xuICAgICAgICAgICAgY29uc3QgY3VyVmlldyA9IHRoaXMudmFsdWVIZXhWaWV3O1xuICAgICAgICAgICAgY29uc3QgcmV0VmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYmxvY2tMZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAodGhpcy5ibG9ja0xlbmd0aCAtIDEpOyBpKyspXG4gICAgICAgICAgICAgICAgcmV0Vmlld1tpXSA9IGN1clZpZXdbaV0gfCAweDgwO1xuICAgICAgICAgICAgcmV0Vmlld1t0aGlzLmJsb2NrTGVuZ3RoIC0gMV0gPSBjdXJWaWV3W3RoaXMuYmxvY2tMZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHJldHVybiByZXRWaWV3LmJ1ZmZlcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbmNvZGVkQnVmID0gcHZ1dGlscy51dGlsVG9CYXNlKHRoaXMudmFsdWVEZWMsIDcpO1xuICAgICAgICBpZiAoZW5jb2RlZEJ1Zi5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gXCJFcnJvciBkdXJpbmcgZW5jb2RpbmcgU0lEIHZhbHVlXCI7XG4gICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJldFZpZXcgPSBuZXcgVWludDhBcnJheShlbmNvZGVkQnVmLmJ5dGVMZW5ndGgpO1xuICAgICAgICBpZiAoIXNpemVPbmx5KSB7XG4gICAgICAgICAgICBjb25zdCBlbmNvZGVkVmlldyA9IG5ldyBVaW50OEFycmF5KGVuY29kZWRCdWYpO1xuICAgICAgICAgICAgY29uc3QgbGVuID0gZW5jb2RlZEJ1Zi5ieXRlTGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICAgICAgICAgICAgcmV0Vmlld1tpXSA9IGVuY29kZWRWaWV3W2ldIHwgMHg4MDtcbiAgICAgICAgICAgIHJldFZpZXdbbGVuXSA9IGVuY29kZWRWaWV3W2xlbl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldFZpZXcuYnVmZmVyO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLmlzSGV4T25seSlcbiAgICAgICAgICAgIHJlc3VsdCA9IHB2dHN1dGlscy5Db252ZXJ0LlRvSGV4KHRoaXMudmFsdWVIZXhWaWV3KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnZhbHVlRGVjLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICB2YWx1ZURlYzogdGhpcy52YWx1ZURlYyxcbiAgICAgICAgfTtcbiAgICB9XG59XG5Mb2NhbFJlbGF0aXZlU2lkVmFsdWVCbG9jay5OQU1FID0gXCJyZWxhdGl2ZVNpZEJsb2NrXCI7XG5cbmNsYXNzIExvY2FsUmVsYXRpdmVPYmplY3RJZGVudGlmaWVyVmFsdWVCbG9jayBleHRlbmRzIFZhbHVlQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHsgdmFsdWUgPSBFTVBUWV9TVFJJTkcsIC4uLnBhcmFtZXRlcnMgfSA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLnZhbHVlID0gW107XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmcm9tQkVSKGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpIHtcbiAgICAgICAgbGV0IHJlc3VsdE9mZnNldCA9IGlucHV0T2Zmc2V0O1xuICAgICAgICB3aGlsZSAoaW5wdXRMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzaWRCbG9jayA9IG5ldyBMb2NhbFJlbGF0aXZlU2lkVmFsdWVCbG9jaygpO1xuICAgICAgICAgICAgcmVzdWx0T2Zmc2V0ID0gc2lkQmxvY2suZnJvbUJFUihpbnB1dEJ1ZmZlciwgcmVzdWx0T2Zmc2V0LCBpbnB1dExlbmd0aCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0T2Zmc2V0ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tMZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBzaWRCbG9jay5lcnJvcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0T2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ibG9ja0xlbmd0aCArPSBzaWRCbG9jay5ibG9ja0xlbmd0aDtcbiAgICAgICAgICAgIGlucHV0TGVuZ3RoIC09IHNpZEJsb2NrLmJsb2NrTGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5wdXNoKHNpZEJsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0T2Zmc2V0O1xuICAgIH1cbiAgICB0b0JFUihzaXplT25seSwgX3dyaXRlcikge1xuICAgICAgICBjb25zdCByZXRCdWZmZXJzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVCdWYgPSB0aGlzLnZhbHVlW2ldLnRvQkVSKHNpemVPbmx5KTtcbiAgICAgICAgICAgIGlmICh2YWx1ZUJ1Zi5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMudmFsdWVbaV0uZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldEJ1ZmZlcnMucHVzaCh2YWx1ZUJ1Zik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbmNhdChyZXRCdWZmZXJzKTtcbiAgICB9XG4gICAgZnJvbVN0cmluZyhzdHJpbmcpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICBsZXQgcG9zMSA9IDA7XG4gICAgICAgIGxldCBwb3MyID0gMDtcbiAgICAgICAgbGV0IHNpZCA9IFwiXCI7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHBvczIgPSBzdHJpbmcuaW5kZXhPZihcIi5cIiwgcG9zMSk7XG4gICAgICAgICAgICBpZiAocG9zMiA9PT0gLTEpXG4gICAgICAgICAgICAgICAgc2lkID0gc3RyaW5nLnN1YnN0cmluZyhwb3MxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzaWQgPSBzdHJpbmcuc3Vic3RyaW5nKHBvczEsIHBvczIpO1xuICAgICAgICAgICAgcG9zMSA9IHBvczIgKyAxO1xuICAgICAgICAgICAgY29uc3Qgc2lkQmxvY2sgPSBuZXcgTG9jYWxSZWxhdGl2ZVNpZFZhbHVlQmxvY2soKTtcbiAgICAgICAgICAgIHNpZEJsb2NrLnZhbHVlRGVjID0gcGFyc2VJbnQoc2lkLCAxMCk7XG4gICAgICAgICAgICBpZiAoaXNOYU4oc2lkQmxvY2sudmFsdWVEZWMpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5wdXNoKHNpZEJsb2NrKTtcbiAgICAgICAgfSB3aGlsZSAocG9zMiAhPT0gLTEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBsZXQgaXNIZXhPbmx5ID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaXNIZXhPbmx5ID0gdGhpcy52YWx1ZVtpXS5pc0hleE9ubHk7XG4gICAgICAgICAgICBsZXQgc2lkU3RyID0gdGhpcy52YWx1ZVtpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKGkgIT09IDApXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYCR7cmVzdWx0fS5gO1xuICAgICAgICAgICAgaWYgKGlzSGV4T25seSkge1xuICAgICAgICAgICAgICAgIHNpZFN0ciA9IGB7JHtzaWRTdHJ9fWA7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHNpZFN0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc2lkU3RyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgb2JqZWN0ID0ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy50b1N0cmluZygpLFxuICAgICAgICAgICAgc2lkQXJyYXk6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmFsdWUubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBvYmplY3Quc2lkQXJyYXkucHVzaCh0aGlzLnZhbHVlW2ldLnRvSlNPTigpKTtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG59XG5Mb2NhbFJlbGF0aXZlT2JqZWN0SWRlbnRpZmllclZhbHVlQmxvY2suTkFNRSA9IFwiUmVsYXRpdmVPYmplY3RJZGVudGlmaWVyVmFsdWVCbG9ja1wiO1xuXG52YXIgX2EkbDtcbmNsYXNzIFJlbGF0aXZlT2JqZWN0SWRlbnRpZmllciBleHRlbmRzIEJhc2VCbG9jayB7XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlQmxvY2sudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLmZyb21TdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycywgTG9jYWxSZWxhdGl2ZU9iamVjdElkZW50aWZpZXJWYWx1ZUJsb2NrKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDEzO1xuICAgIH1cbiAgICBvbkFzY2lpRW5jb2RpbmcoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLk5BTUV9IDogJHt0aGlzLnZhbHVlQmxvY2sudG9TdHJpbmcoKSB8fCBcImVtcHR5XCJ9YDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5nZXRWYWx1ZSgpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbl9hJGwgPSBSZWxhdGl2ZU9iamVjdElkZW50aWZpZXI7XG4oKCkgPT4ge1xuICAgIHR5cGVTdG9yZS5SZWxhdGl2ZU9iamVjdElkZW50aWZpZXIgPSBfYSRsO1xufSkoKTtcblJlbGF0aXZlT2JqZWN0SWRlbnRpZmllci5OQU1FID0gXCJSZWxhdGl2ZU9iamVjdElkZW50aWZpZXJcIjtcblxudmFyIF9hJGs7XG5jbGFzcyBTZXF1ZW5jZSBleHRlbmRzIENvbnN0cnVjdGVkIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAxNjtcbiAgICB9XG59XG5fYSRrID0gU2VxdWVuY2U7XG4oKCkgPT4ge1xuICAgIHR5cGVTdG9yZS5TZXF1ZW5jZSA9IF9hJGs7XG59KSgpO1xuU2VxdWVuY2UuTkFNRSA9IFwiU0VRVUVOQ0VcIjtcblxudmFyIF9hJGo7XG5jbGFzcyBTZXQgZXh0ZW5kcyBDb25zdHJ1Y3RlZCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMTc7XG4gICAgfVxufVxuX2EkaiA9IFNldDtcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLlNldCA9IF9hJGo7XG59KSgpO1xuU2V0Lk5BTUUgPSBcIlNFVFwiO1xuXG5jbGFzcyBMb2NhbFN0cmluZ1ZhbHVlQmxvY2sgZXh0ZW5kcyBIZXhCbG9jayhWYWx1ZUJsb2NrKSB7XG4gICAgY29uc3RydWN0b3IoeyAuLi5wYXJhbWV0ZXJzIH0gPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5pc0hleE9ubHkgPSB0cnVlO1xuICAgICAgICB0aGlzLnZhbHVlID0gRU1QVFlfU1RSSU5HO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbkxvY2FsU3RyaW5nVmFsdWVCbG9jay5OQU1FID0gXCJTdHJpbmdWYWx1ZUJsb2NrXCI7XG5cbmNsYXNzIExvY2FsU2ltcGxlU3RyaW5nVmFsdWVCbG9jayBleHRlbmRzIExvY2FsU3RyaW5nVmFsdWVCbG9jayB7XG59XG5Mb2NhbFNpbXBsZVN0cmluZ1ZhbHVlQmxvY2suTkFNRSA9IFwiU2ltcGxlU3RyaW5nVmFsdWVCbG9ja1wiO1xuXG5jbGFzcyBMb2NhbFNpbXBsZVN0cmluZ0Jsb2NrIGV4dGVuZHMgQmFzZVN0cmluZ0Jsb2NrIHtcbiAgICBjb25zdHJ1Y3Rvcih7IC4uLnBhcmFtZXRlcnMgfSA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMsIExvY2FsU2ltcGxlU3RyaW5nVmFsdWVCbG9jayk7XG4gICAgfVxuICAgIGZyb21CdWZmZXIoaW5wdXRCdWZmZXIpIHtcbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLnZhbHVlID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShpbnB1dEJ1ZmZlcikpO1xuICAgIH1cbiAgICBmcm9tU3RyaW5nKGlucHV0U3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0ckxlbiA9IGlucHV0U3RyaW5nLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXcgPSBuZXcgVWludDhBcnJheShzdHJMZW4pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ckxlbjsgaSsrKVxuICAgICAgICAgICAgdmlld1tpXSA9IGlucHV0U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIHRoaXMudmFsdWVCbG9jay52YWx1ZSA9IGlucHV0U3RyaW5nO1xuICAgIH1cbn1cbkxvY2FsU2ltcGxlU3RyaW5nQmxvY2suTkFNRSA9IFwiU0lNUExFIFNUUklOR1wiO1xuXG5jbGFzcyBMb2NhbFV0ZjhTdHJpbmdWYWx1ZUJsb2NrIGV4dGVuZHMgTG9jYWxTaW1wbGVTdHJpbmdCbG9jayB7XG4gICAgZnJvbUJ1ZmZlcihpbnB1dEJ1ZmZlcikge1xuICAgICAgICB0aGlzLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3ID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkoaW5wdXRCdWZmZXIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZUJsb2NrLnZhbHVlID0gcHZ0c3V0aWxzLkNvbnZlcnQuVG9VdGY4U3RyaW5nKGlucHV0QnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIHRoaXMud2FybmluZ3MucHVzaChgRXJyb3IgZHVyaW5nIFwiZGVjb2RlVVJJQ29tcG9uZW50XCI6ICR7ZXh9LCB1c2luZyByYXcgc3RyaW5nYCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlQmxvY2sudmFsdWUgPSBwdnRzdXRpbHMuQ29udmVydC5Ub0JpbmFyeShpbnB1dEJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnJvbVN0cmluZyhpbnB1dFN0cmluZykge1xuICAgICAgICB0aGlzLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocHZ0c3V0aWxzLkNvbnZlcnQuRnJvbVV0ZjhTdHJpbmcoaW5wdXRTdHJpbmcpKTtcbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLnZhbHVlID0gaW5wdXRTdHJpbmc7XG4gICAgfVxufVxuTG9jYWxVdGY4U3RyaW5nVmFsdWVCbG9jay5OQU1FID0gXCJVdGY4U3RyaW5nVmFsdWVCbG9ja1wiO1xuXG52YXIgX2EkaTtcbmNsYXNzIFV0ZjhTdHJpbmcgZXh0ZW5kcyBMb2NhbFV0ZjhTdHJpbmdWYWx1ZUJsb2NrIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAxMjtcbiAgICB9XG59XG5fYSRpID0gVXRmOFN0cmluZztcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLlV0ZjhTdHJpbmcgPSBfYSRpO1xufSkoKTtcblV0ZjhTdHJpbmcuTkFNRSA9IFwiVVRGOFN0cmluZ1wiO1xuXG5jbGFzcyBMb2NhbEJtcFN0cmluZ1ZhbHVlQmxvY2sgZXh0ZW5kcyBMb2NhbFNpbXBsZVN0cmluZ0Jsb2NrIHtcbiAgICBmcm9tQnVmZmVyKGlucHV0QnVmZmVyKSB7XG4gICAgICAgIHRoaXMudmFsdWVCbG9jay52YWx1ZSA9IHB2dHN1dGlscy5Db252ZXJ0LlRvVXRmMTZTdHJpbmcoaW5wdXRCdWZmZXIpO1xuICAgICAgICB0aGlzLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3ID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkoaW5wdXRCdWZmZXIpO1xuICAgIH1cbiAgICBmcm9tU3RyaW5nKGlucHV0U3RyaW5nKSB7XG4gICAgICAgIHRoaXMudmFsdWVCbG9jay52YWx1ZSA9IGlucHV0U3RyaW5nO1xuICAgICAgICB0aGlzLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocHZ0c3V0aWxzLkNvbnZlcnQuRnJvbVV0ZjE2U3RyaW5nKGlucHV0U3RyaW5nKSk7XG4gICAgfVxufVxuTG9jYWxCbXBTdHJpbmdWYWx1ZUJsb2NrLk5BTUUgPSBcIkJtcFN0cmluZ1ZhbHVlQmxvY2tcIjtcblxudmFyIF9hJGg7XG5jbGFzcyBCbXBTdHJpbmcgZXh0ZW5kcyBMb2NhbEJtcFN0cmluZ1ZhbHVlQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHsgLi4ucGFyYW1ldGVycyB9ID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAzMDtcbiAgICB9XG59XG5fYSRoID0gQm1wU3RyaW5nO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuQm1wU3RyaW5nID0gX2EkaDtcbn0pKCk7XG5CbXBTdHJpbmcuTkFNRSA9IFwiQk1QU3RyaW5nXCI7XG5cbmNsYXNzIExvY2FsVW5pdmVyc2FsU3RyaW5nVmFsdWVCbG9jayBleHRlbmRzIExvY2FsU2ltcGxlU3RyaW5nQmxvY2sge1xuICAgIGZyb21CdWZmZXIoaW5wdXRCdWZmZXIpIHtcbiAgICAgICAgY29uc3QgY29weUJ1ZmZlciA9IEFycmF5QnVmZmVyLmlzVmlldyhpbnB1dEJ1ZmZlcikgPyBpbnB1dEJ1ZmZlci5zbGljZSgpLmJ1ZmZlciA6IGlucHV0QnVmZmVyLnNsaWNlKDApO1xuICAgICAgICBjb25zdCB2YWx1ZVZpZXcgPSBuZXcgVWludDhBcnJheShjb3B5QnVmZmVyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZVZpZXcubGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgICAgICAgIHZhbHVlVmlld1tpXSA9IHZhbHVlVmlld1tpICsgM107XG4gICAgICAgICAgICB2YWx1ZVZpZXdbaSArIDFdID0gdmFsdWVWaWV3W2kgKyAyXTtcbiAgICAgICAgICAgIHZhbHVlVmlld1tpICsgMl0gPSAweDAwO1xuICAgICAgICAgICAgdmFsdWVWaWV3W2kgKyAzXSA9IDB4MDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLnZhbHVlID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDMyQXJyYXkoY29weUJ1ZmZlcikpO1xuICAgIH1cbiAgICBmcm9tU3RyaW5nKGlucHV0U3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0ckxlbmd0aCA9IGlucHV0U3RyaW5nLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdmFsdWVIZXhWaWV3ID0gdGhpcy52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldyA9IG5ldyBVaW50OEFycmF5KHN0ckxlbmd0aCAqIDQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ckxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb2RlQnVmID0gcHZ1dGlscy51dGlsVG9CYXNlKGlucHV0U3RyaW5nLmNoYXJDb2RlQXQoaSksIDgpO1xuICAgICAgICAgICAgY29uc3QgY29kZVZpZXcgPSBuZXcgVWludDhBcnJheShjb2RlQnVmKTtcbiAgICAgICAgICAgIGlmIChjb2RlVmlldy5sZW5ndGggPiA0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZGlmID0gNCAtIGNvZGVWaWV3Lmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAoY29kZVZpZXcubGVuZ3RoIC0gMSk7IGogPj0gMDsgai0tKVxuICAgICAgICAgICAgICAgIHZhbHVlSGV4Vmlld1tpICogNCArIGogKyBkaWZdID0gY29kZVZpZXdbal07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUJsb2NrLnZhbHVlID0gaW5wdXRTdHJpbmc7XG4gICAgfVxufVxuTG9jYWxVbml2ZXJzYWxTdHJpbmdWYWx1ZUJsb2NrLk5BTUUgPSBcIlVuaXZlcnNhbFN0cmluZ1ZhbHVlQmxvY2tcIjtcblxudmFyIF9hJGc7XG5jbGFzcyBVbml2ZXJzYWxTdHJpbmcgZXh0ZW5kcyBMb2NhbFVuaXZlcnNhbFN0cmluZ1ZhbHVlQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHsgLi4ucGFyYW1ldGVycyB9ID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAyODtcbiAgICB9XG59XG5fYSRnID0gVW5pdmVyc2FsU3RyaW5nO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuVW5pdmVyc2FsU3RyaW5nID0gX2EkZztcbn0pKCk7XG5Vbml2ZXJzYWxTdHJpbmcuTkFNRSA9IFwiVW5pdmVyc2FsU3RyaW5nXCI7XG5cbnZhciBfYSRmO1xuY2xhc3MgTnVtZXJpY1N0cmluZyBleHRlbmRzIExvY2FsU2ltcGxlU3RyaW5nQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDE4O1xuICAgIH1cbn1cbl9hJGYgPSBOdW1lcmljU3RyaW5nO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuTnVtZXJpY1N0cmluZyA9IF9hJGY7XG59KSgpO1xuTnVtZXJpY1N0cmluZy5OQU1FID0gXCJOdW1lcmljU3RyaW5nXCI7XG5cbnZhciBfYSRlO1xuY2xhc3MgUHJpbnRhYmxlU3RyaW5nIGV4dGVuZHMgTG9jYWxTaW1wbGVTdHJpbmdCbG9jayB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMTk7XG4gICAgfVxufVxuX2EkZSA9IFByaW50YWJsZVN0cmluZztcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLlByaW50YWJsZVN0cmluZyA9IF9hJGU7XG59KSgpO1xuUHJpbnRhYmxlU3RyaW5nLk5BTUUgPSBcIlByaW50YWJsZVN0cmluZ1wiO1xuXG52YXIgX2EkZDtcbmNsYXNzIFRlbGV0ZXhTdHJpbmcgZXh0ZW5kcyBMb2NhbFNpbXBsZVN0cmluZ0Jsb2NrIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAyMDtcbiAgICB9XG59XG5fYSRkID0gVGVsZXRleFN0cmluZztcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLlRlbGV0ZXhTdHJpbmcgPSBfYSRkO1xufSkoKTtcblRlbGV0ZXhTdHJpbmcuTkFNRSA9IFwiVGVsZXRleFN0cmluZ1wiO1xuXG52YXIgX2EkYztcbmNsYXNzIFZpZGVvdGV4U3RyaW5nIGV4dGVuZHMgTG9jYWxTaW1wbGVTdHJpbmdCbG9jayB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMjE7XG4gICAgfVxufVxuX2EkYyA9IFZpZGVvdGV4U3RyaW5nO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuVmlkZW90ZXhTdHJpbmcgPSBfYSRjO1xufSkoKTtcblZpZGVvdGV4U3RyaW5nLk5BTUUgPSBcIlZpZGVvdGV4U3RyaW5nXCI7XG5cbnZhciBfYSRiO1xuY2xhc3MgSUE1U3RyaW5nIGV4dGVuZHMgTG9jYWxTaW1wbGVTdHJpbmdCbG9jayB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMjI7XG4gICAgfVxufVxuX2EkYiA9IElBNVN0cmluZztcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLklBNVN0cmluZyA9IF9hJGI7XG59KSgpO1xuSUE1U3RyaW5nLk5BTUUgPSBcIklBNVN0cmluZ1wiO1xuXG52YXIgX2EkYTtcbmNsYXNzIEdyYXBoaWNTdHJpbmcgZXh0ZW5kcyBMb2NhbFNpbXBsZVN0cmluZ0Jsb2NrIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAyNTtcbiAgICB9XG59XG5fYSRhID0gR3JhcGhpY1N0cmluZztcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLkdyYXBoaWNTdHJpbmcgPSBfYSRhO1xufSkoKTtcbkdyYXBoaWNTdHJpbmcuTkFNRSA9IFwiR3JhcGhpY1N0cmluZ1wiO1xuXG52YXIgX2EkOTtcbmNsYXNzIFZpc2libGVTdHJpbmcgZXh0ZW5kcyBMb2NhbFNpbXBsZVN0cmluZ0Jsb2NrIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAyNjtcbiAgICB9XG59XG5fYSQ5ID0gVmlzaWJsZVN0cmluZztcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLlZpc2libGVTdHJpbmcgPSBfYSQ5O1xufSkoKTtcblZpc2libGVTdHJpbmcuTkFNRSA9IFwiVmlzaWJsZVN0cmluZ1wiO1xuXG52YXIgX2EkODtcbmNsYXNzIEdlbmVyYWxTdHJpbmcgZXh0ZW5kcyBMb2NhbFNpbXBsZVN0cmluZ0Jsb2NrIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAyNztcbiAgICB9XG59XG5fYSQ4ID0gR2VuZXJhbFN0cmluZztcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLkdlbmVyYWxTdHJpbmcgPSBfYSQ4O1xufSkoKTtcbkdlbmVyYWxTdHJpbmcuTkFNRSA9IFwiR2VuZXJhbFN0cmluZ1wiO1xuXG52YXIgX2EkNztcbmNsYXNzIENoYXJhY3RlclN0cmluZyBleHRlbmRzIExvY2FsU2ltcGxlU3RyaW5nQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDI5O1xuICAgIH1cbn1cbl9hJDcgPSBDaGFyYWN0ZXJTdHJpbmc7XG4oKCkgPT4ge1xuICAgIHR5cGVTdG9yZS5DaGFyYWN0ZXJTdHJpbmcgPSBfYSQ3O1xufSkoKTtcbkNoYXJhY3RlclN0cmluZy5OQU1FID0gXCJDaGFyYWN0ZXJTdHJpbmdcIjtcblxudmFyIF9hJDY7XG5jbGFzcyBVVENUaW1lIGV4dGVuZHMgVmlzaWJsZVN0cmluZyB7XG4gICAgY29uc3RydWN0b3IoeyB2YWx1ZSwgdmFsdWVEYXRlLCAuLi5wYXJhbWV0ZXJzIH0gPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy55ZWFyID0gMDtcbiAgICAgICAgdGhpcy5tb250aCA9IDA7XG4gICAgICAgIHRoaXMuZGF5ID0gMDtcbiAgICAgICAgdGhpcy5ob3VyID0gMDtcbiAgICAgICAgdGhpcy5taW51dGUgPSAwO1xuICAgICAgICB0aGlzLnNlY29uZCA9IDA7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXcgPSBuZXcgVWludDhBcnJheSh2YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3W2ldID0gdmFsdWUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWVEYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21EYXRlKHZhbHVlRGF0ZSk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy50b0J1ZmZlcigpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMjM7XG4gICAgfVxuICAgIGZyb21CdWZmZXIoaW5wdXRCdWZmZXIpIHtcbiAgICAgICAgdGhpcy5mcm9tU3RyaW5nKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkoaW5wdXRCdWZmZXIpKSk7XG4gICAgfVxuICAgIHRvQnVmZmVyKCkge1xuICAgICAgICBjb25zdCBzdHIgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH1cbiAgICBmcm9tRGF0ZShpbnB1dERhdGUpIHtcbiAgICAgICAgdGhpcy55ZWFyID0gaW5wdXREYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gICAgICAgIHRoaXMubW9udGggPSBpbnB1dERhdGUuZ2V0VVRDTW9udGgoKSArIDE7XG4gICAgICAgIHRoaXMuZGF5ID0gaW5wdXREYXRlLmdldFVUQ0RhdGUoKTtcbiAgICAgICAgdGhpcy5ob3VyID0gaW5wdXREYXRlLmdldFVUQ0hvdXJzKCk7XG4gICAgICAgIHRoaXMubWludXRlID0gaW5wdXREYXRlLmdldFVUQ01pbnV0ZXMoKTtcbiAgICAgICAgdGhpcy5zZWNvbmQgPSBpbnB1dERhdGUuZ2V0VVRDU2Vjb25kcygpO1xuICAgIH1cbiAgICB0b0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAobmV3IERhdGUoRGF0ZS5VVEModGhpcy55ZWFyLCB0aGlzLm1vbnRoIC0gMSwgdGhpcy5kYXksIHRoaXMuaG91ciwgdGhpcy5taW51dGUsIHRoaXMuc2Vjb25kKSkpO1xuICAgIH1cbiAgICBmcm9tU3RyaW5nKGlucHV0U3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlciA9IC8oXFxkezJ9KShcXGR7Mn0pKFxcZHsyfSkoXFxkezJ9KShcXGR7Mn0pKFxcZHsyfSlaL2lnO1xuICAgICAgICBjb25zdCBwYXJzZXJBcnJheSA9IHBhcnNlci5leGVjKGlucHV0U3RyaW5nKTtcbiAgICAgICAgaWYgKHBhcnNlckFycmF5ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gXCJXcm9uZyBpbnB1dCBzdHJpbmcgZm9yIGNvbnZlcnNpb25cIjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB5ZWFyID0gcGFyc2VJbnQocGFyc2VyQXJyYXlbMV0sIDEwKTtcbiAgICAgICAgaWYgKHllYXIgPj0gNTApXG4gICAgICAgICAgICB0aGlzLnllYXIgPSAxOTAwICsgeWVhcjtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy55ZWFyID0gMjAwMCArIHllYXI7XG4gICAgICAgIHRoaXMubW9udGggPSBwYXJzZUludChwYXJzZXJBcnJheVsyXSwgMTApO1xuICAgICAgICB0aGlzLmRheSA9IHBhcnNlSW50KHBhcnNlckFycmF5WzNdLCAxMCk7XG4gICAgICAgIHRoaXMuaG91ciA9IHBhcnNlSW50KHBhcnNlckFycmF5WzRdLCAxMCk7XG4gICAgICAgIHRoaXMubWludXRlID0gcGFyc2VJbnQocGFyc2VyQXJyYXlbNV0sIDEwKTtcbiAgICAgICAgdGhpcy5zZWNvbmQgPSBwYXJzZUludChwYXJzZXJBcnJheVs2XSwgMTApO1xuICAgIH1cbiAgICB0b1N0cmluZyhlbmNvZGluZyA9IFwiaXNvXCIpIHtcbiAgICAgICAgaWYgKGVuY29kaW5nID09PSBcImlzb1wiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IG5ldyBBcnJheSg3KTtcbiAgICAgICAgICAgIG91dHB1dEFycmF5WzBdID0gcHZ1dGlscy5wYWROdW1iZXIoKCh0aGlzLnllYXIgPCAyMDAwKSA/ICh0aGlzLnllYXIgLSAxOTAwKSA6ICh0aGlzLnllYXIgLSAyMDAwKSksIDIpO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXlbMV0gPSBwdnV0aWxzLnBhZE51bWJlcih0aGlzLm1vbnRoLCAyKTtcbiAgICAgICAgICAgIG91dHB1dEFycmF5WzJdID0gcHZ1dGlscy5wYWROdW1iZXIodGhpcy5kYXksIDIpO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXlbM10gPSBwdnV0aWxzLnBhZE51bWJlcih0aGlzLmhvdXIsIDIpO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXlbNF0gPSBwdnV0aWxzLnBhZE51bWJlcih0aGlzLm1pbnV0ZSwgMik7XG4gICAgICAgICAgICBvdXRwdXRBcnJheVs1XSA9IHB2dXRpbHMucGFkTnVtYmVyKHRoaXMuc2Vjb25kLCAyKTtcbiAgICAgICAgICAgIG91dHB1dEFycmF5WzZdID0gXCJaXCI7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0QXJyYXkuam9pbihcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIudG9TdHJpbmcoZW5jb2RpbmcpO1xuICAgIH1cbiAgICBvbkFzY2lpRW5jb2RpbmcoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLk5BTUV9IDogJHt0aGlzLnRvRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICB5ZWFyOiB0aGlzLnllYXIsXG4gICAgICAgICAgICBtb250aDogdGhpcy5tb250aCxcbiAgICAgICAgICAgIGRheTogdGhpcy5kYXksXG4gICAgICAgICAgICBob3VyOiB0aGlzLmhvdXIsXG4gICAgICAgICAgICBtaW51dGU6IHRoaXMubWludXRlLFxuICAgICAgICAgICAgc2Vjb25kOiB0aGlzLnNlY29uZCxcbiAgICAgICAgfTtcbiAgICB9XG59XG5fYSQ2ID0gVVRDVGltZTtcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLlVUQ1RpbWUgPSBfYSQ2O1xufSkoKTtcblVUQ1RpbWUuTkFNRSA9IFwiVVRDVGltZVwiO1xuXG52YXIgX2EkNTtcbmNsYXNzIEdlbmVyYWxpemVkVGltZSBleHRlbmRzIFVUQ1RpbWUge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICB2YXIgX2I7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICAoX2IgPSB0aGlzLm1pbGxpc2Vjb25kKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAodGhpcy5taWxsaXNlY29uZCA9IDApO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMjQ7XG4gICAgfVxuICAgIGZyb21EYXRlKGlucHV0RGF0ZSkge1xuICAgICAgICBzdXBlci5mcm9tRGF0ZShpbnB1dERhdGUpO1xuICAgICAgICB0aGlzLm1pbGxpc2Vjb25kID0gaW5wdXREYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICAgIH1cbiAgICB0b0RhdGUoKSB7XG4gICAgICAgIGNvbnN0IHV0Y0RhdGUgPSBEYXRlLlVUQyh0aGlzLnllYXIsIHRoaXMubW9udGggLSAxLCB0aGlzLmRheSwgdGhpcy5ob3VyLCB0aGlzLm1pbnV0ZSwgdGhpcy5zZWNvbmQsIHRoaXMubWlsbGlzZWNvbmQpO1xuICAgICAgICByZXR1cm4gKG5ldyBEYXRlKHV0Y0RhdGUpKTtcbiAgICB9XG4gICAgZnJvbVN0cmluZyhpbnB1dFN0cmluZykge1xuICAgICAgICBsZXQgaXNVVEMgPSBmYWxzZTtcbiAgICAgICAgbGV0IHRpbWVTdHJpbmcgPSBcIlwiO1xuICAgICAgICBsZXQgZGF0ZVRpbWVTdHJpbmcgPSBcIlwiO1xuICAgICAgICBsZXQgZnJhY3Rpb25QYXJ0ID0gMDtcbiAgICAgICAgbGV0IHBhcnNlcjtcbiAgICAgICAgbGV0IGhvdXJEaWZmZXJlbmNlID0gMDtcbiAgICAgICAgbGV0IG1pbnV0ZURpZmZlcmVuY2UgPSAwO1xuICAgICAgICBpZiAoaW5wdXRTdHJpbmdbaW5wdXRTdHJpbmcubGVuZ3RoIC0gMV0gPT09IFwiWlwiKSB7XG4gICAgICAgICAgICB0aW1lU3RyaW5nID0gaW5wdXRTdHJpbmcuc3Vic3RyaW5nKDAsIGlucHV0U3RyaW5nLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgaXNVVEMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbnVtYmVyID0gbmV3IE51bWJlcihpbnB1dFN0cmluZ1tpbnB1dFN0cmluZy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICBpZiAoaXNOYU4obnVtYmVyLnZhbHVlT2YoKSkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV3JvbmcgaW5wdXQgc3RyaW5nIGZvciBjb252ZXJzaW9uXCIpO1xuICAgICAgICAgICAgdGltZVN0cmluZyA9IGlucHV0U3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1VUQykge1xuICAgICAgICAgICAgaWYgKHRpbWVTdHJpbmcuaW5kZXhPZihcIitcIikgIT09IC0xKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIldyb25nIGlucHV0IHN0cmluZyBmb3IgY29udmVyc2lvblwiKTtcbiAgICAgICAgICAgIGlmICh0aW1lU3RyaW5nLmluZGV4T2YoXCItXCIpICE9PSAtMSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXcm9uZyBpbnB1dCBzdHJpbmcgZm9yIGNvbnZlcnNpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbXVsdGlwbGllciA9IDE7XG4gICAgICAgICAgICBsZXQgZGlmZmVyZW5jZVBvc2l0aW9uID0gdGltZVN0cmluZy5pbmRleE9mKFwiK1wiKTtcbiAgICAgICAgICAgIGxldCBkaWZmZXJlbmNlU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlUG9zaXRpb24gPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZW5jZVBvc2l0aW9uID0gdGltZVN0cmluZy5pbmRleE9mKFwiLVwiKTtcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlmZmVyZW5jZVBvc2l0aW9uICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VTdHJpbmcgPSB0aW1lU3RyaW5nLnN1YnN0cmluZyhkaWZmZXJlbmNlUG9zaXRpb24gKyAxKTtcbiAgICAgICAgICAgICAgICB0aW1lU3RyaW5nID0gdGltZVN0cmluZy5zdWJzdHJpbmcoMCwgZGlmZmVyZW5jZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoKGRpZmZlcmVuY2VTdHJpbmcubGVuZ3RoICE9PSAyKSAmJiAoZGlmZmVyZW5jZVN0cmluZy5sZW5ndGggIT09IDQpKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXcm9uZyBpbnB1dCBzdHJpbmcgZm9yIGNvbnZlcnNpb25cIik7XG4gICAgICAgICAgICAgICAgbGV0IG51bWJlciA9IHBhcnNlSW50KGRpZmZlcmVuY2VTdHJpbmcuc3Vic3RyaW5nKDAsIDIpLCAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKG51bWJlci52YWx1ZU9mKCkpKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXcm9uZyBpbnB1dCBzdHJpbmcgZm9yIGNvbnZlcnNpb25cIik7XG4gICAgICAgICAgICAgICAgaG91ckRpZmZlcmVuY2UgPSBtdWx0aXBsaWVyICogbnVtYmVyO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlU3RyaW5nLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBudW1iZXIgPSBwYXJzZUludChkaWZmZXJlbmNlU3RyaW5nLnN1YnN0cmluZygyLCA0KSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4obnVtYmVyLnZhbHVlT2YoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXcm9uZyBpbnB1dCBzdHJpbmcgZm9yIGNvbnZlcnNpb25cIik7XG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZURpZmZlcmVuY2UgPSBtdWx0aXBsaWVyICogbnVtYmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgZnJhY3Rpb25Qb2ludFBvc2l0aW9uID0gdGltZVN0cmluZy5pbmRleE9mKFwiLlwiKTtcbiAgICAgICAgaWYgKGZyYWN0aW9uUG9pbnRQb3NpdGlvbiA9PT0gLTEpXG4gICAgICAgICAgICBmcmFjdGlvblBvaW50UG9zaXRpb24gPSB0aW1lU3RyaW5nLmluZGV4T2YoXCIsXCIpO1xuICAgICAgICBpZiAoZnJhY3Rpb25Qb2ludFBvc2l0aW9uICE9PSAtMSkge1xuICAgICAgICAgICAgY29uc3QgZnJhY3Rpb25QYXJ0Q2hlY2sgPSBuZXcgTnVtYmVyKGAwJHt0aW1lU3RyaW5nLnN1YnN0cmluZyhmcmFjdGlvblBvaW50UG9zaXRpb24pfWApO1xuICAgICAgICAgICAgaWYgKGlzTmFOKGZyYWN0aW9uUGFydENoZWNrLnZhbHVlT2YoKSkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV3JvbmcgaW5wdXQgc3RyaW5nIGZvciBjb252ZXJzaW9uXCIpO1xuICAgICAgICAgICAgZnJhY3Rpb25QYXJ0ID0gZnJhY3Rpb25QYXJ0Q2hlY2sudmFsdWVPZigpO1xuICAgICAgICAgICAgZGF0ZVRpbWVTdHJpbmcgPSB0aW1lU3RyaW5nLnN1YnN0cmluZygwLCBmcmFjdGlvblBvaW50UG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRhdGVUaW1lU3RyaW5nID0gdGltZVN0cmluZztcbiAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICBjYXNlIChkYXRlVGltZVN0cmluZy5sZW5ndGggPT09IDgpOlxuICAgICAgICAgICAgICAgIHBhcnNlciA9IC8oXFxkezR9KShcXGR7Mn0pKFxcZHsyfSkvaWc7XG4gICAgICAgICAgICAgICAgaWYgKGZyYWN0aW9uUG9pbnRQb3NpdGlvbiAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIldyb25nIGlucHV0IHN0cmluZyBmb3IgY29udmVyc2lvblwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgKGRhdGVUaW1lU3RyaW5nLmxlbmd0aCA9PT0gMTApOlxuICAgICAgICAgICAgICAgIHBhcnNlciA9IC8oXFxkezR9KShcXGR7Mn0pKFxcZHsyfSkoXFxkezJ9KS9pZztcbiAgICAgICAgICAgICAgICBpZiAoZnJhY3Rpb25Qb2ludFBvc2l0aW9uICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnJhY3Rpb25SZXN1bHQgPSA2MCAqIGZyYWN0aW9uUGFydDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW51dGUgPSBNYXRoLmZsb29yKGZyYWN0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgZnJhY3Rpb25SZXN1bHQgPSA2MCAqIChmcmFjdGlvblJlc3VsdCAtIHRoaXMubWludXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWNvbmQgPSBNYXRoLmZsb29yKGZyYWN0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgZnJhY3Rpb25SZXN1bHQgPSAxMDAwICogKGZyYWN0aW9uUmVzdWx0IC0gdGhpcy5zZWNvbmQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbGxpc2Vjb25kID0gTWF0aC5mbG9vcihmcmFjdGlvblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAoZGF0ZVRpbWVTdHJpbmcubGVuZ3RoID09PSAxMik6XG4gICAgICAgICAgICAgICAgcGFyc2VyID0gLyhcXGR7NH0pKFxcZHsyfSkoXFxkezJ9KShcXGR7Mn0pKFxcZHsyfSkvaWc7XG4gICAgICAgICAgICAgICAgaWYgKGZyYWN0aW9uUG9pbnRQb3NpdGlvbiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyYWN0aW9uUmVzdWx0ID0gNjAgKiBmcmFjdGlvblBhcnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kID0gTWF0aC5mbG9vcihmcmFjdGlvblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uUmVzdWx0ID0gMTAwMCAqIChmcmFjdGlvblJlc3VsdCAtIHRoaXMuc2Vjb25kKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taWxsaXNlY29uZCA9IE1hdGguZmxvb3IoZnJhY3Rpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgKGRhdGVUaW1lU3RyaW5nLmxlbmd0aCA9PT0gMTQpOlxuICAgICAgICAgICAgICAgIHBhcnNlciA9IC8oXFxkezR9KShcXGR7Mn0pKFxcZHsyfSkoXFxkezJ9KShcXGR7Mn0pKFxcZHsyfSkvaWc7XG4gICAgICAgICAgICAgICAgaWYgKGZyYWN0aW9uUG9pbnRQb3NpdGlvbiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhY3Rpb25SZXN1bHQgPSAxMDAwICogZnJhY3Rpb25QYXJ0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbGxpc2Vjb25kID0gTWF0aC5mbG9vcihmcmFjdGlvblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXcm9uZyBpbnB1dCBzdHJpbmcgZm9yIGNvbnZlcnNpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VyQXJyYXkgPSBwYXJzZXIuZXhlYyhkYXRlVGltZVN0cmluZyk7XG4gICAgICAgIGlmIChwYXJzZXJBcnJheSA9PT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIldyb25nIGlucHV0IHN0cmluZyBmb3IgY29udmVyc2lvblwiKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBwYXJzZXJBcnJheS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgc3dpdGNoIChqKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnllYXIgPSBwYXJzZUludChwYXJzZXJBcnJheVtqXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9udGggPSBwYXJzZUludChwYXJzZXJBcnJheVtqXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF5ID0gcGFyc2VJbnQocGFyc2VyQXJyYXlbal0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdXIgPSBwYXJzZUludChwYXJzZXJBcnJheVtqXSwgMTApICsgaG91ckRpZmZlcmVuY2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW51dGUgPSBwYXJzZUludChwYXJzZXJBcnJheVtqXSwgMTApICsgbWludXRlRGlmZmVyZW5jZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlY29uZCA9IHBhcnNlSW50KHBhcnNlckFycmF5W2pdLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIldyb25nIGlucHV0IHN0cmluZyBmb3IgY29udmVyc2lvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNVVEMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wRGF0ZSA9IG5ldyBEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXksIHRoaXMuaG91ciwgdGhpcy5taW51dGUsIHRoaXMuc2Vjb25kLCB0aGlzLm1pbGxpc2Vjb25kKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IHRlbXBEYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gICAgICAgICAgICB0aGlzLm1vbnRoID0gdGVtcERhdGUuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgICAgIHRoaXMuZGF5ID0gdGVtcERhdGUuZ2V0VVRDRGF5KCk7XG4gICAgICAgICAgICB0aGlzLmhvdXIgPSB0ZW1wRGF0ZS5nZXRVVENIb3VycygpO1xuICAgICAgICAgICAgdGhpcy5taW51dGUgPSB0ZW1wRGF0ZS5nZXRVVENNaW51dGVzKCk7XG4gICAgICAgICAgICB0aGlzLnNlY29uZCA9IHRlbXBEYXRlLmdldFVUQ1NlY29uZHMoKTtcbiAgICAgICAgICAgIHRoaXMubWlsbGlzZWNvbmQgPSB0ZW1wRGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZyhlbmNvZGluZyA9IFwiaXNvXCIpIHtcbiAgICAgICAgaWYgKGVuY29kaW5nID09PSBcImlzb1wiKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChwdnV0aWxzLnBhZE51bWJlcih0aGlzLnllYXIsIDQpKTtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gocHZ1dGlscy5wYWROdW1iZXIodGhpcy5tb250aCwgMikpO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChwdnV0aWxzLnBhZE51bWJlcih0aGlzLmRheSwgMikpO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChwdnV0aWxzLnBhZE51bWJlcih0aGlzLmhvdXIsIDIpKTtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gocHZ1dGlscy5wYWROdW1iZXIodGhpcy5taW51dGUsIDIpKTtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gocHZ1dGlscy5wYWROdW1iZXIodGhpcy5zZWNvbmQsIDIpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1pbGxpc2Vjb25kICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChcIi5cIik7XG4gICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChwdnV0aWxzLnBhZE51bWJlcih0aGlzLm1pbGxpc2Vjb25kLCAzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKFwiWlwiKTtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXRBcnJheS5qb2luKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci50b1N0cmluZyhlbmNvZGluZyk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgbWlsbGlzZWNvbmQ6IHRoaXMubWlsbGlzZWNvbmQsXG4gICAgICAgIH07XG4gICAgfVxufVxuX2EkNSA9IEdlbmVyYWxpemVkVGltZTtcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLkdlbmVyYWxpemVkVGltZSA9IF9hJDU7XG59KSgpO1xuR2VuZXJhbGl6ZWRUaW1lLk5BTUUgPSBcIkdlbmVyYWxpemVkVGltZVwiO1xuXG52YXIgX2EkNDtcbmNsYXNzIERBVEUgZXh0ZW5kcyBVdGY4U3RyaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAzMTtcbiAgICB9XG59XG5fYSQ0ID0gREFURTtcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLkRBVEUgPSBfYSQ0O1xufSkoKTtcbkRBVEUuTkFNRSA9IFwiREFURVwiO1xuXG52YXIgX2EkMztcbmNsYXNzIFRpbWVPZkRheSBleHRlbmRzIFV0ZjhTdHJpbmcge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDMyO1xuICAgIH1cbn1cbl9hJDMgPSBUaW1lT2ZEYXk7XG4oKCkgPT4ge1xuICAgIHR5cGVTdG9yZS5UaW1lT2ZEYXkgPSBfYSQzO1xufSkoKTtcblRpbWVPZkRheS5OQU1FID0gXCJUaW1lT2ZEYXlcIjtcblxudmFyIF9hJDI7XG5jbGFzcyBEYXRlVGltZSBleHRlbmRzIFV0ZjhTdHJpbmcge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgdGhpcy5pZEJsb2NrLnRhZ051bWJlciA9IDMzO1xuICAgIH1cbn1cbl9hJDIgPSBEYXRlVGltZTtcbigoKSA9PiB7XG4gICAgdHlwZVN0b3JlLkRhdGVUaW1lID0gX2EkMjtcbn0pKCk7XG5EYXRlVGltZS5OQU1FID0gXCJEYXRlVGltZVwiO1xuXG52YXIgX2EkMTtcbmNsYXNzIER1cmF0aW9uIGV4dGVuZHMgVXRmOFN0cmluZyB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICB0aGlzLmlkQmxvY2sudGFnTnVtYmVyID0gMzQ7XG4gICAgfVxufVxuX2EkMSA9IER1cmF0aW9uO1xuKCgpID0+IHtcbiAgICB0eXBlU3RvcmUuRHVyYXRpb24gPSBfYSQxO1xufSkoKTtcbkR1cmF0aW9uLk5BTUUgPSBcIkR1cmF0aW9uXCI7XG5cbnZhciBfYTtcbmNsYXNzIFRJTUUgZXh0ZW5kcyBVdGY4U3RyaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgIHRoaXMuaWRCbG9jay50YWdOdW1iZXIgPSAxNDtcbiAgICB9XG59XG5fYSA9IFRJTUU7XG4oKCkgPT4ge1xuICAgIHR5cGVTdG9yZS5USU1FID0gX2E7XG59KSgpO1xuVElNRS5OQU1FID0gXCJUSU1FXCI7XG5cbmNsYXNzIEFueSB7XG4gICAgY29uc3RydWN0b3IoeyBuYW1lID0gRU1QVFlfU1RSSU5HLCBvcHRpb25hbCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gb3B0aW9uYWw7XG4gICAgfVxufVxuXG5jbGFzcyBDaG9pY2UgZXh0ZW5kcyBBbnkge1xuICAgIGNvbnN0cnVjdG9yKHsgdmFsdWUgPSBbXSwgLi4ucGFyYW1ldGVycyB9ID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59XG5cbmNsYXNzIFJlcGVhdGVkIGV4dGVuZHMgQW55IHtcbiAgICBjb25zdHJ1Y3Rvcih7IHZhbHVlID0gbmV3IEFueSgpLCBsb2NhbCA9IGZhbHNlLCAuLi5wYXJhbWV0ZXJzIH0gPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmxvY2FsID0gbG9jYWw7XG4gICAgfVxufVxuXG5jbGFzcyBSYXdEYXRhIHtcbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVZpZXcuc2xpY2UoKS5idWZmZXI7XG4gICAgfVxuICAgIHNldCBkYXRhKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGF0YVZpZXcgPSBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHsgZGF0YSA9IEVNUFRZX1ZJRVcgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuZGF0YVZpZXcgPSBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShkYXRhKTtcbiAgICB9XG4gICAgZnJvbUJFUihpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGVuZExlbmd0aCA9IGlucHV0T2Zmc2V0ICsgaW5wdXRMZW5ndGg7XG4gICAgICAgIHRoaXMuZGF0YVZpZXcgPSBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShpbnB1dEJ1ZmZlcikuc3ViYXJyYXkoaW5wdXRPZmZzZXQsIGVuZExlbmd0aCk7XG4gICAgICAgIHJldHVybiBlbmRMZW5ndGg7XG4gICAgfVxuICAgIHRvQkVSKF9zaXplT25seSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhVmlldy5zbGljZSgpLmJ1ZmZlcjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbXBhcmVTY2hlbWEocm9vdCwgaW5wdXREYXRhLCBpbnB1dFNjaGVtYSkge1xuICAgIGlmIChpbnB1dFNjaGVtYSBpbnN0YW5jZW9mIENob2ljZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgaW5wdXRTY2hlbWEudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXBhcmVTY2hlbWEocm9vdCwgaW5wdXREYXRhLCBlbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQudmVyaWZpZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiByb290LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgX3Jlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiB7IGVycm9yOiBcIldyb25nIHZhbHVlcyBmb3IgQ2hvaWNlIHR5cGVcIiB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChpbnB1dFNjaGVtYS5oYXNPd25Qcm9wZXJ0eShOQU1FKSlcbiAgICAgICAgICAgICAgICBfcmVzdWx0Lm5hbWUgPSBpbnB1dFNjaGVtYS5uYW1lO1xuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlucHV0U2NoZW1hIGluc3RhbmNlb2YgQW55KSB7XG4gICAgICAgIGlmIChpbnB1dFNjaGVtYS5oYXNPd25Qcm9wZXJ0eShOQU1FKSlcbiAgICAgICAgICAgIHJvb3RbaW5wdXRTY2hlbWEubmFtZV0gPSBpbnB1dERhdGE7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgIHJlc3VsdDogcm9vdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKChyb290IGluc3RhbmNlb2YgT2JqZWN0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3VsdDogeyBlcnJvcjogXCJXcm9uZyByb290IG9iamVjdFwiIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICgoaW5wdXREYXRhIGluc3RhbmNlb2YgT2JqZWN0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3VsdDogeyBlcnJvcjogXCJXcm9uZyBBU04uMSBkYXRhXCIgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKChpbnB1dFNjaGVtYSBpbnN0YW5jZW9mIE9iamVjdCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICByZXN1bHQ6IHsgZXJyb3I6IFwiV3JvbmcgQVNOLjEgc2NoZW1hXCIgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKChJRF9CTE9DSyBpbiBpbnB1dFNjaGVtYSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICByZXN1bHQ6IHsgZXJyb3I6IFwiV3JvbmcgQVNOLjEgc2NoZW1hXCIgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKChGUk9NX0JFUiBpbiBpbnB1dFNjaGVtYS5pZEJsb2NrKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3VsdDogeyBlcnJvcjogXCJXcm9uZyBBU04uMSBzY2hlbWFcIiB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoKFRPX0JFUiBpbiBpbnB1dFNjaGVtYS5pZEJsb2NrKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3VsdDogeyBlcnJvcjogXCJXcm9uZyBBU04uMSBzY2hlbWFcIiB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBlbmNvZGVkSWQgPSBpbnB1dFNjaGVtYS5pZEJsb2NrLnRvQkVSKGZhbHNlKTtcbiAgICBpZiAoZW5jb2RlZElkLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3VsdDogeyBlcnJvcjogXCJFcnJvciBlbmNvZGluZyBpZEJsb2NrIGZvciBBU04uMSBzY2hlbWFcIiB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBkZWNvZGVkT2Zmc2V0ID0gaW5wdXRTY2hlbWEuaWRCbG9jay5mcm9tQkVSKGVuY29kZWRJZCwgMCwgZW5jb2RlZElkLmJ5dGVMZW5ndGgpO1xuICAgIGlmIChkZWNvZGVkT2Zmc2V0ID09PSAtMSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdWx0OiB7IGVycm9yOiBcIkVycm9yIGRlY29kaW5nIGlkQmxvY2sgZm9yIEFTTi4xIHNjaGVtYVwiIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpbnB1dFNjaGVtYS5pZEJsb2NrLmhhc093blByb3BlcnR5KFRBR19DTEFTUykgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICByZXN1bHQ6IHsgZXJyb3I6IFwiV3JvbmcgQVNOLjEgc2NoZW1hXCIgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlucHV0U2NoZW1hLmlkQmxvY2sudGFnQ2xhc3MgIT09IGlucHV0RGF0YS5pZEJsb2NrLnRhZ0NsYXNzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICByZXN1bHQ6IHJvb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpbnB1dFNjaGVtYS5pZEJsb2NrLmhhc093blByb3BlcnR5KFRBR19OVU1CRVIpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdWx0OiB7IGVycm9yOiBcIldyb25nIEFTTi4xIHNjaGVtYVwiIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpbnB1dFNjaGVtYS5pZEJsb2NrLnRhZ051bWJlciAhPT0gaW5wdXREYXRhLmlkQmxvY2sudGFnTnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICByZXN1bHQ6IHJvb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpbnB1dFNjaGVtYS5pZEJsb2NrLmhhc093blByb3BlcnR5KElTX0NPTlNUUlVDVEVEKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3VsdDogeyBlcnJvcjogXCJXcm9uZyBBU04uMSBzY2hlbWFcIiB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5wdXRTY2hlbWEuaWRCbG9jay5pc0NvbnN0cnVjdGVkICE9PSBpbnB1dERhdGEuaWRCbG9jay5pc0NvbnN0cnVjdGVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICByZXN1bHQ6IHJvb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghKElTX0hFWF9PTkxZIGluIGlucHV0U2NoZW1hLmlkQmxvY2spKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICByZXN1bHQ6IHsgZXJyb3I6IFwiV3JvbmcgQVNOLjEgc2NoZW1hXCIgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlucHV0U2NoZW1hLmlkQmxvY2suaXNIZXhPbmx5ICE9PSBpbnB1dERhdGEuaWRCbG9jay5pc0hleE9ubHkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3VsdDogcm9vdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlucHV0U2NoZW1hLmlkQmxvY2suaXNIZXhPbmx5KSB7XG4gICAgICAgIGlmICgoVkFMVUVfSEVYX1ZJRVcgaW4gaW5wdXRTY2hlbWEuaWRCbG9jaykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHsgZXJyb3I6IFwiV3JvbmcgQVNOLjEgc2NoZW1hXCIgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NoZW1hVmlldyA9IGlucHV0U2NoZW1hLmlkQmxvY2sudmFsdWVIZXhWaWV3O1xuICAgICAgICBjb25zdCBhc24xVmlldyA9IGlucHV0RGF0YS5pZEJsb2NrLnZhbHVlSGV4VmlldztcbiAgICAgICAgaWYgKHNjaGVtYVZpZXcubGVuZ3RoICE9PSBhc24xVmlldy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogcm9vdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2hlbWFWaWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc2NoZW1hVmlld1tpXSAhPT0gYXNuMVZpZXdbMV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcm9vdCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpbnB1dFNjaGVtYS5uYW1lKSB7XG4gICAgICAgIGlucHV0U2NoZW1hLm5hbWUgPSBpbnB1dFNjaGVtYS5uYW1lLnJlcGxhY2UoL15cXHMrfFxccyskL2csIEVNUFRZX1NUUklORyk7XG4gICAgICAgIGlmIChpbnB1dFNjaGVtYS5uYW1lKVxuICAgICAgICAgICAgcm9vdFtpbnB1dFNjaGVtYS5uYW1lXSA9IGlucHV0RGF0YTtcbiAgICB9XG4gICAgaWYgKGlucHV0U2NoZW1hIGluc3RhbmNlb2YgdHlwZVN0b3JlLkNvbnN0cnVjdGVkKSB7XG4gICAgICAgIGxldCBhZG1pc3Npb24gPSAwO1xuICAgICAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICAgICAgdmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdWx0OiB7IGVycm9yOiBcIlVua25vd24gZXJyb3JcIiB9LFxuICAgICAgICB9O1xuICAgICAgICBsZXQgbWF4TGVuZ3RoID0gaW5wdXRTY2hlbWEudmFsdWVCbG9jay52YWx1ZS5sZW5ndGg7XG4gICAgICAgIGlmIChtYXhMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXRTY2hlbWEudmFsdWVCbG9jay52YWx1ZVswXSBpbnN0YW5jZW9mIFJlcGVhdGVkKSB7XG4gICAgICAgICAgICAgICAgbWF4TGVuZ3RoID0gaW5wdXREYXRhLnZhbHVlQmxvY2sudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiByb290LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGlucHV0RGF0YS52YWx1ZUJsb2NrLnZhbHVlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICYmIChpbnB1dFNjaGVtYS52YWx1ZUJsb2NrLnZhbHVlLmxlbmd0aCAhPT0gMCkpIHtcbiAgICAgICAgICAgIGxldCBfb3B0aW9uYWwgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dFNjaGVtYS52YWx1ZUJsb2NrLnZhbHVlLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIF9vcHRpb25hbCA9IF9vcHRpb25hbCAmJiAoaW5wdXRTY2hlbWEudmFsdWVCbG9jay52YWx1ZVtpXS5vcHRpb25hbCB8fCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoX29wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcm9vdCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlucHV0U2NoZW1hLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBpbnB1dFNjaGVtYS5uYW1lID0gaW5wdXRTY2hlbWEubmFtZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBFTVBUWV9TVFJJTkcpO1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dFNjaGVtYS5uYW1lKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcm9vdFtpbnB1dFNjaGVtYS5uYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvb3QuZXJyb3IgPSBcIkluY29uc2lzdGVudCBvYmplY3QgbGVuZ3RoXCI7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHJvb3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICgoaSAtIGFkbWlzc2lvbikgPj0gaW5wdXREYXRhLnZhbHVlQmxvY2sudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0U2NoZW1hLnZhbHVlQmxvY2sudmFsdWVbaV0ub3B0aW9uYWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9yZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJvb3QsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJvb3QuZXJyb3IgPSBcIkluY29uc2lzdGVudCBsZW5ndGggYmV0d2VlbiBBU04uMSBkYXRhIGFuZCBzY2hlbWFcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0U2NoZW1hLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0U2NoZW1hLm5hbWUgPSBpbnB1dFNjaGVtYS5uYW1lLnJlcGxhY2UoL15cXHMrfFxccyskL2csIEVNUFRZX1NUUklORyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRTY2hlbWEubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByb290W2lucHV0U2NoZW1hLm5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQubmFtZSA9IGlucHV0U2NoZW1hLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0U2NoZW1hLnZhbHVlQmxvY2sudmFsdWVbMF0gaW5zdGFuY2VvZiBSZXBlYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjb21wYXJlU2NoZW1hKHJvb3QsIGlucHV0RGF0YS52YWx1ZUJsb2NrLnZhbHVlW2ldLCBpbnB1dFNjaGVtYS52YWx1ZUJsb2NrLnZhbHVlWzBdLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52ZXJpZmllZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFNjaGVtYS52YWx1ZUJsb2NrLnZhbHVlWzBdLm9wdGlvbmFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkbWlzc2lvbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0U2NoZW1hLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRTY2hlbWEubmFtZSA9IGlucHV0U2NoZW1hLm5hbWUucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0U2NoZW1hLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcm9vdFtpbnB1dFNjaGVtYS5uYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKE5BTUUgaW4gaW5wdXRTY2hlbWEudmFsdWVCbG9jay52YWx1ZVswXSkgJiYgKGlucHV0U2NoZW1hLnZhbHVlQmxvY2sudmFsdWVbMF0ubmFtZS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFycmF5Um9vdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChMT0NBTCBpbiBpbnB1dFNjaGVtYS52YWx1ZUJsb2NrLnZhbHVlWzBdKSAmJiAoaW5wdXRTY2hlbWEudmFsdWVCbG9jay52YWx1ZVswXS5sb2NhbCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlSb290ID0gaW5wdXREYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5Um9vdCA9IHJvb3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFycmF5Um9vdFtpbnB1dFNjaGVtYS52YWx1ZUJsb2NrLnZhbHVlWzBdLm5hbWVdID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5Um9vdFtpbnB1dFNjaGVtYS52YWx1ZUJsb2NrLnZhbHVlWzBdLm5hbWVdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVJvb3RbaW5wdXRTY2hlbWEudmFsdWVCbG9jay52YWx1ZVswXS5uYW1lXS5wdXNoKGlucHV0RGF0YS52YWx1ZUJsb2NrLnZhbHVlW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY29tcGFyZVNjaGVtYShyb290LCBpbnB1dERhdGEudmFsdWVCbG9jay52YWx1ZVtpIC0gYWRtaXNzaW9uXSwgaW5wdXRTY2hlbWEudmFsdWVCbG9jay52YWx1ZVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudmVyaWZpZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRTY2hlbWEudmFsdWVCbG9jay52YWx1ZVtpXS5vcHRpb25hbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZG1pc3Npb24rKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFNjaGVtYS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0U2NoZW1hLm5hbWUgPSBpbnB1dFNjaGVtYS5uYW1lLnJlcGxhY2UoL15cXHMrfFxccyskL2csIEVNUFRZX1NUUklORyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFNjaGVtYS5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJvb3RbaW5wdXRTY2hlbWEubmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC52ZXJpZmllZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IF9yZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgdmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogcm9vdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoaW5wdXRTY2hlbWEubmFtZSkge1xuICAgICAgICAgICAgICAgIGlucHV0U2NoZW1hLm5hbWUgPSBpbnB1dFNjaGVtYS5uYW1lLnJlcGxhY2UoL15cXHMrfFxccyskL2csIEVNUFRZX1NUUklORyk7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0U2NoZW1hLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJvb3RbaW5wdXRTY2hlbWEubmFtZV07XG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQubmFtZSA9IGlucHV0U2NoZW1hLm5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgICAgcmVzdWx0OiByb290LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5wdXRTY2hlbWEucHJpbWl0aXZlU2NoZW1hXG4gICAgICAgICYmIChWQUxVRV9IRVhfVklFVyBpbiBpbnB1dERhdGEudmFsdWVCbG9jaykpIHtcbiAgICAgICAgY29uc3QgYXNuMSA9IGxvY2FsRnJvbUJFUihpbnB1dERhdGEudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpO1xuICAgICAgICBpZiAoYXNuMS5vZmZzZXQgPT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBfcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZXN1bHQ6IGFzbjEucmVzdWx0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChpbnB1dFNjaGVtYS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRTY2hlbWEubmFtZSA9IGlucHV0U2NoZW1hLm5hbWUucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRTY2hlbWEubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcm9vdFtpbnB1dFNjaGVtYS5uYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5uYW1lID0gaW5wdXRTY2hlbWEubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3Jlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcGFyZVNjaGVtYShyb290LCBhc24xLnJlc3VsdCwgaW5wdXRTY2hlbWEucHJpbWl0aXZlU2NoZW1hKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmVyaWZpZWQ6IHRydWUsXG4gICAgICAgIHJlc3VsdDogcm9vdCxcbiAgICB9O1xufVxuZnVuY3Rpb24gdmVyaWZ5U2NoZW1hKGlucHV0QnVmZmVyLCBpbnB1dFNjaGVtYSkge1xuICAgIGlmICgoaW5wdXRTY2hlbWEgaW5zdGFuY2VvZiBPYmplY3QpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcmVzdWx0OiB7IGVycm9yOiBcIldyb25nIEFTTi4xIHNjaGVtYSB0eXBlXCIgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgYXNuMSA9IGxvY2FsRnJvbUJFUihwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShpbnB1dEJ1ZmZlcikpO1xuICAgIGlmIChhc24xLm9mZnNldCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc3VsdDogYXNuMS5yZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBjb21wYXJlU2NoZW1hKGFzbjEucmVzdWx0LCBhc24xLnJlc3VsdCwgaW5wdXRTY2hlbWEpO1xufVxuXG5leHBvcnQgeyBBbnksIEJhc2VCbG9jaywgQmFzZVN0cmluZ0Jsb2NrLCBCaXRTdHJpbmcsIEJtcFN0cmluZywgQm9vbGVhbiwgQ2hhcmFjdGVyU3RyaW5nLCBDaG9pY2UsIENvbnN0cnVjdGVkLCBEQVRFLCBEYXRlVGltZSwgRHVyYXRpb24sIEVuZE9mQ29udGVudCwgRW51bWVyYXRlZCwgR2VuZXJhbFN0cmluZywgR2VuZXJhbGl6ZWRUaW1lLCBHcmFwaGljU3RyaW5nLCBIZXhCbG9jaywgSUE1U3RyaW5nLCBJbnRlZ2VyLCBOdWxsLCBOdW1lcmljU3RyaW5nLCBPYmplY3RJZGVudGlmaWVyLCBPY3RldFN0cmluZywgUHJpbWl0aXZlLCBQcmludGFibGVTdHJpbmcsIFJhd0RhdGEsIFJlbGF0aXZlT2JqZWN0SWRlbnRpZmllciwgUmVwZWF0ZWQsIFNlcXVlbmNlLCBTZXQsIFRJTUUsIFRlbGV0ZXhTdHJpbmcsIFRpbWVPZkRheSwgVVRDVGltZSwgVW5pdmVyc2FsU3RyaW5nLCBVdGY4U3RyaW5nLCBWYWx1ZUJsb2NrLCBWaWRlb3RleFN0cmluZywgVmlld1dyaXRlciwgVmlzaWJsZVN0cmluZywgY29tcGFyZVNjaGVtYSwgZnJvbUJFUiwgdmVyaWZ5U2NoZW1hIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/asn1js/build/index.es.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/bit.js":
/*!****************************************************!*\
  !*** ./node_modules/bytestreamjs/build/mjs/bit.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bitsToStringArray: () => (/* binding */ bitsToStringArray)\n/* harmony export */ });\nconst bitsToStringArray = [\n    \"00000000\", \"00000001\", \"00000010\",\n    \"00000011\", \"00000100\", \"00000101\",\n    \"00000110\", \"00000111\", \"00001000\",\n    \"00001001\", \"00001010\", \"00001011\",\n    \"00001100\", \"00001101\", \"00001110\",\n    \"00001111\", \"00010000\", \"00010001\",\n    \"00010010\", \"00010011\", \"00010100\",\n    \"00010101\", \"00010110\", \"00010111\",\n    \"00011000\", \"00011001\", \"00011010\",\n    \"00011011\", \"00011100\", \"00011101\",\n    \"00011110\", \"00011111\", \"00100000\",\n    \"00100001\", \"00100010\", \"00100011\",\n    \"00100100\", \"00100101\", \"00100110\",\n    \"00100111\", \"00101000\", \"00101001\",\n    \"00101010\", \"00101011\", \"00101100\",\n    \"00101101\", \"00101110\", \"00101111\",\n    \"00110000\", \"00110001\", \"00110010\",\n    \"00110011\", \"00110100\", \"00110101\",\n    \"00110110\", \"00110111\", \"00111000\",\n    \"00111001\", \"00111010\", \"00111011\",\n    \"00111100\", \"00111101\", \"00111110\",\n    \"00111111\", \"01000000\", \"01000001\",\n    \"01000010\", \"01000011\", \"01000100\",\n    \"01000101\", \"01000110\", \"01000111\",\n    \"01001000\", \"01001001\", \"01001010\",\n    \"01001011\", \"01001100\", \"01001101\",\n    \"01001110\", \"01001111\", \"01010000\",\n    \"01010001\", \"01010010\", \"01010011\",\n    \"01010100\", \"01010101\", \"01010110\",\n    \"01010111\", \"01011000\", \"01011001\",\n    \"01011010\", \"01011011\", \"01011100\",\n    \"01011101\", \"01011110\", \"01011111\",\n    \"01100000\", \"01100001\", \"01100010\",\n    \"01100011\", \"01100100\", \"01100101\",\n    \"01100110\", \"01100111\", \"01101000\",\n    \"01101001\", \"01101010\", \"01101011\",\n    \"01101100\", \"01101101\", \"01101110\",\n    \"01101111\", \"01110000\", \"01110001\",\n    \"01110010\", \"01110011\", \"01110100\",\n    \"01110101\", \"01110110\", \"01110111\",\n    \"01111000\", \"01111001\", \"01111010\",\n    \"01111011\", \"01111100\", \"01111101\",\n    \"01111110\", \"01111111\", \"10000000\",\n    \"10000001\", \"10000010\", \"10000011\",\n    \"10000100\", \"10000101\", \"10000110\",\n    \"10000111\", \"10001000\", \"10001001\",\n    \"10001010\", \"10001011\", \"10001100\",\n    \"10001101\", \"10001110\", \"10001111\",\n    \"10010000\", \"10010001\", \"10010010\",\n    \"10010011\", \"10010100\", \"10010101\",\n    \"10010110\", \"10010111\", \"10011000\",\n    \"10011001\", \"10011010\", \"10011011\",\n    \"10011100\", \"10011101\", \"10011110\",\n    \"10011111\", \"10100000\", \"10100001\",\n    \"10100010\", \"10100011\", \"10100100\",\n    \"10100101\", \"10100110\", \"10100111\",\n    \"10101000\", \"10101001\", \"10101010\",\n    \"10101011\", \"10101100\", \"10101101\",\n    \"10101110\", \"10101111\", \"10110000\",\n    \"10110001\", \"10110010\", \"10110011\",\n    \"10110100\", \"10110101\", \"10110110\",\n    \"10110111\", \"10111000\", \"10111001\",\n    \"10111010\", \"10111011\", \"10111100\",\n    \"10111101\", \"10111110\", \"10111111\",\n    \"11000000\", \"11000001\", \"11000010\",\n    \"11000011\", \"11000100\", \"11000101\",\n    \"11000110\", \"11000111\", \"11001000\",\n    \"11001001\", \"11001010\", \"11001011\",\n    \"11001100\", \"11001101\", \"11001110\",\n    \"11001111\", \"11010000\", \"11010001\",\n    \"11010010\", \"11010011\", \"11010100\",\n    \"11010101\", \"11010110\", \"11010111\",\n    \"11011000\", \"11011001\", \"11011010\",\n    \"11011011\", \"11011100\", \"11011101\",\n    \"11011110\", \"11011111\", \"11100000\",\n    \"11100001\", \"11100010\", \"11100011\",\n    \"11100100\", \"11100101\", \"11100110\",\n    \"11100111\", \"11101000\", \"11101001\",\n    \"11101010\", \"11101011\", \"11101100\",\n    \"11101101\", \"11101110\", \"11101111\",\n    \"11110000\", \"11110001\", \"11110010\",\n    \"11110011\", \"11110100\", \"11110101\",\n    \"11110110\", \"11110111\", \"11111000\",\n    \"11111001\", \"11111010\", \"11111011\",\n    \"11111100\", \"11111101\", \"11111110\",\n    \"11111111\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL2JpdC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvYnl0ZXN0cmVhbWpzL2J1aWxkL21qcy9iaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGJpdHNUb1N0cmluZ0FycmF5ID0gW1xuICAgIFwiMDAwMDAwMDBcIiwgXCIwMDAwMDAwMVwiLCBcIjAwMDAwMDEwXCIsXG4gICAgXCIwMDAwMDAxMVwiLCBcIjAwMDAwMTAwXCIsIFwiMDAwMDAxMDFcIixcbiAgICBcIjAwMDAwMTEwXCIsIFwiMDAwMDAxMTFcIiwgXCIwMDAwMTAwMFwiLFxuICAgIFwiMDAwMDEwMDFcIiwgXCIwMDAwMTAxMFwiLCBcIjAwMDAxMDExXCIsXG4gICAgXCIwMDAwMTEwMFwiLCBcIjAwMDAxMTAxXCIsIFwiMDAwMDExMTBcIixcbiAgICBcIjAwMDAxMTExXCIsIFwiMDAwMTAwMDBcIiwgXCIwMDAxMDAwMVwiLFxuICAgIFwiMDAwMTAwMTBcIiwgXCIwMDAxMDAxMVwiLCBcIjAwMDEwMTAwXCIsXG4gICAgXCIwMDAxMDEwMVwiLCBcIjAwMDEwMTEwXCIsIFwiMDAwMTAxMTFcIixcbiAgICBcIjAwMDExMDAwXCIsIFwiMDAwMTEwMDFcIiwgXCIwMDAxMTAxMFwiLFxuICAgIFwiMDAwMTEwMTFcIiwgXCIwMDAxMTEwMFwiLCBcIjAwMDExMTAxXCIsXG4gICAgXCIwMDAxMTExMFwiLCBcIjAwMDExMTExXCIsIFwiMDAxMDAwMDBcIixcbiAgICBcIjAwMTAwMDAxXCIsIFwiMDAxMDAwMTBcIiwgXCIwMDEwMDAxMVwiLFxuICAgIFwiMDAxMDAxMDBcIiwgXCIwMDEwMDEwMVwiLCBcIjAwMTAwMTEwXCIsXG4gICAgXCIwMDEwMDExMVwiLCBcIjAwMTAxMDAwXCIsIFwiMDAxMDEwMDFcIixcbiAgICBcIjAwMTAxMDEwXCIsIFwiMDAxMDEwMTFcIiwgXCIwMDEwMTEwMFwiLFxuICAgIFwiMDAxMDExMDFcIiwgXCIwMDEwMTExMFwiLCBcIjAwMTAxMTExXCIsXG4gICAgXCIwMDExMDAwMFwiLCBcIjAwMTEwMDAxXCIsIFwiMDAxMTAwMTBcIixcbiAgICBcIjAwMTEwMDExXCIsIFwiMDAxMTAxMDBcIiwgXCIwMDExMDEwMVwiLFxuICAgIFwiMDAxMTAxMTBcIiwgXCIwMDExMDExMVwiLCBcIjAwMTExMDAwXCIsXG4gICAgXCIwMDExMTAwMVwiLCBcIjAwMTExMDEwXCIsIFwiMDAxMTEwMTFcIixcbiAgICBcIjAwMTExMTAwXCIsIFwiMDAxMTExMDFcIiwgXCIwMDExMTExMFwiLFxuICAgIFwiMDAxMTExMTFcIiwgXCIwMTAwMDAwMFwiLCBcIjAxMDAwMDAxXCIsXG4gICAgXCIwMTAwMDAxMFwiLCBcIjAxMDAwMDExXCIsIFwiMDEwMDAxMDBcIixcbiAgICBcIjAxMDAwMTAxXCIsIFwiMDEwMDAxMTBcIiwgXCIwMTAwMDExMVwiLFxuICAgIFwiMDEwMDEwMDBcIiwgXCIwMTAwMTAwMVwiLCBcIjAxMDAxMDEwXCIsXG4gICAgXCIwMTAwMTAxMVwiLCBcIjAxMDAxMTAwXCIsIFwiMDEwMDExMDFcIixcbiAgICBcIjAxMDAxMTEwXCIsIFwiMDEwMDExMTFcIiwgXCIwMTAxMDAwMFwiLFxuICAgIFwiMDEwMTAwMDFcIiwgXCIwMTAxMDAxMFwiLCBcIjAxMDEwMDExXCIsXG4gICAgXCIwMTAxMDEwMFwiLCBcIjAxMDEwMTAxXCIsIFwiMDEwMTAxMTBcIixcbiAgICBcIjAxMDEwMTExXCIsIFwiMDEwMTEwMDBcIiwgXCIwMTAxMTAwMVwiLFxuICAgIFwiMDEwMTEwMTBcIiwgXCIwMTAxMTAxMVwiLCBcIjAxMDExMTAwXCIsXG4gICAgXCIwMTAxMTEwMVwiLCBcIjAxMDExMTEwXCIsIFwiMDEwMTExMTFcIixcbiAgICBcIjAxMTAwMDAwXCIsIFwiMDExMDAwMDFcIiwgXCIwMTEwMDAxMFwiLFxuICAgIFwiMDExMDAwMTFcIiwgXCIwMTEwMDEwMFwiLCBcIjAxMTAwMTAxXCIsXG4gICAgXCIwMTEwMDExMFwiLCBcIjAxMTAwMTExXCIsIFwiMDExMDEwMDBcIixcbiAgICBcIjAxMTAxMDAxXCIsIFwiMDExMDEwMTBcIiwgXCIwMTEwMTAxMVwiLFxuICAgIFwiMDExMDExMDBcIiwgXCIwMTEwMTEwMVwiLCBcIjAxMTAxMTEwXCIsXG4gICAgXCIwMTEwMTExMVwiLCBcIjAxMTEwMDAwXCIsIFwiMDExMTAwMDFcIixcbiAgICBcIjAxMTEwMDEwXCIsIFwiMDExMTAwMTFcIiwgXCIwMTExMDEwMFwiLFxuICAgIFwiMDExMTAxMDFcIiwgXCIwMTExMDExMFwiLCBcIjAxMTEwMTExXCIsXG4gICAgXCIwMTExMTAwMFwiLCBcIjAxMTExMDAxXCIsIFwiMDExMTEwMTBcIixcbiAgICBcIjAxMTExMDExXCIsIFwiMDExMTExMDBcIiwgXCIwMTExMTEwMVwiLFxuICAgIFwiMDExMTExMTBcIiwgXCIwMTExMTExMVwiLCBcIjEwMDAwMDAwXCIsXG4gICAgXCIxMDAwMDAwMVwiLCBcIjEwMDAwMDEwXCIsIFwiMTAwMDAwMTFcIixcbiAgICBcIjEwMDAwMTAwXCIsIFwiMTAwMDAxMDFcIiwgXCIxMDAwMDExMFwiLFxuICAgIFwiMTAwMDAxMTFcIiwgXCIxMDAwMTAwMFwiLCBcIjEwMDAxMDAxXCIsXG4gICAgXCIxMDAwMTAxMFwiLCBcIjEwMDAxMDExXCIsIFwiMTAwMDExMDBcIixcbiAgICBcIjEwMDAxMTAxXCIsIFwiMTAwMDExMTBcIiwgXCIxMDAwMTExMVwiLFxuICAgIFwiMTAwMTAwMDBcIiwgXCIxMDAxMDAwMVwiLCBcIjEwMDEwMDEwXCIsXG4gICAgXCIxMDAxMDAxMVwiLCBcIjEwMDEwMTAwXCIsIFwiMTAwMTAxMDFcIixcbiAgICBcIjEwMDEwMTEwXCIsIFwiMTAwMTAxMTFcIiwgXCIxMDAxMTAwMFwiLFxuICAgIFwiMTAwMTEwMDFcIiwgXCIxMDAxMTAxMFwiLCBcIjEwMDExMDExXCIsXG4gICAgXCIxMDAxMTEwMFwiLCBcIjEwMDExMTAxXCIsIFwiMTAwMTExMTBcIixcbiAgICBcIjEwMDExMTExXCIsIFwiMTAxMDAwMDBcIiwgXCIxMDEwMDAwMVwiLFxuICAgIFwiMTAxMDAwMTBcIiwgXCIxMDEwMDAxMVwiLCBcIjEwMTAwMTAwXCIsXG4gICAgXCIxMDEwMDEwMVwiLCBcIjEwMTAwMTEwXCIsIFwiMTAxMDAxMTFcIixcbiAgICBcIjEwMTAxMDAwXCIsIFwiMTAxMDEwMDFcIiwgXCIxMDEwMTAxMFwiLFxuICAgIFwiMTAxMDEwMTFcIiwgXCIxMDEwMTEwMFwiLCBcIjEwMTAxMTAxXCIsXG4gICAgXCIxMDEwMTExMFwiLCBcIjEwMTAxMTExXCIsIFwiMTAxMTAwMDBcIixcbiAgICBcIjEwMTEwMDAxXCIsIFwiMTAxMTAwMTBcIiwgXCIxMDExMDAxMVwiLFxuICAgIFwiMTAxMTAxMDBcIiwgXCIxMDExMDEwMVwiLCBcIjEwMTEwMTEwXCIsXG4gICAgXCIxMDExMDExMVwiLCBcIjEwMTExMDAwXCIsIFwiMTAxMTEwMDFcIixcbiAgICBcIjEwMTExMDEwXCIsIFwiMTAxMTEwMTFcIiwgXCIxMDExMTEwMFwiLFxuICAgIFwiMTAxMTExMDFcIiwgXCIxMDExMTExMFwiLCBcIjEwMTExMTExXCIsXG4gICAgXCIxMTAwMDAwMFwiLCBcIjExMDAwMDAxXCIsIFwiMTEwMDAwMTBcIixcbiAgICBcIjExMDAwMDExXCIsIFwiMTEwMDAxMDBcIiwgXCIxMTAwMDEwMVwiLFxuICAgIFwiMTEwMDAxMTBcIiwgXCIxMTAwMDExMVwiLCBcIjExMDAxMDAwXCIsXG4gICAgXCIxMTAwMTAwMVwiLCBcIjExMDAxMDEwXCIsIFwiMTEwMDEwMTFcIixcbiAgICBcIjExMDAxMTAwXCIsIFwiMTEwMDExMDFcIiwgXCIxMTAwMTExMFwiLFxuICAgIFwiMTEwMDExMTFcIiwgXCIxMTAxMDAwMFwiLCBcIjExMDEwMDAxXCIsXG4gICAgXCIxMTAxMDAxMFwiLCBcIjExMDEwMDExXCIsIFwiMTEwMTAxMDBcIixcbiAgICBcIjExMDEwMTAxXCIsIFwiMTEwMTAxMTBcIiwgXCIxMTAxMDExMVwiLFxuICAgIFwiMTEwMTEwMDBcIiwgXCIxMTAxMTAwMVwiLCBcIjExMDExMDEwXCIsXG4gICAgXCIxMTAxMTAxMVwiLCBcIjExMDExMTAwXCIsIFwiMTEwMTExMDFcIixcbiAgICBcIjExMDExMTEwXCIsIFwiMTEwMTExMTFcIiwgXCIxMTEwMDAwMFwiLFxuICAgIFwiMTExMDAwMDFcIiwgXCIxMTEwMDAxMFwiLCBcIjExMTAwMDExXCIsXG4gICAgXCIxMTEwMDEwMFwiLCBcIjExMTAwMTAxXCIsIFwiMTExMDAxMTBcIixcbiAgICBcIjExMTAwMTExXCIsIFwiMTExMDEwMDBcIiwgXCIxMTEwMTAwMVwiLFxuICAgIFwiMTExMDEwMTBcIiwgXCIxMTEwMTAxMVwiLCBcIjExMTAxMTAwXCIsXG4gICAgXCIxMTEwMTEwMVwiLCBcIjExMTAxMTEwXCIsIFwiMTExMDExMTFcIixcbiAgICBcIjExMTEwMDAwXCIsIFwiMTExMTAwMDFcIiwgXCIxMTExMDAxMFwiLFxuICAgIFwiMTExMTAwMTFcIiwgXCIxMTExMDEwMFwiLCBcIjExMTEwMTAxXCIsXG4gICAgXCIxMTExMDExMFwiLCBcIjExMTEwMTExXCIsIFwiMTExMTEwMDBcIixcbiAgICBcIjExMTExMDAxXCIsIFwiMTExMTEwMTBcIiwgXCIxMTExMTAxMVwiLFxuICAgIFwiMTExMTExMDBcIiwgXCIxMTExMTEwMVwiLCBcIjExMTExMTEwXCIsXG4gICAgXCIxMTExMTExMVwiXG5dO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/bit.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/bit_stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/bytestreamjs/build/mjs/bit_stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BitStream: () => (/* binding */ BitStream)\n/* harmony export */ });\n/* harmony import */ var _bit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bit */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/bit.js\");\n/* harmony import */ var _byte_stream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./byte_stream */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/byte_stream.js\");\n\n\nclass BitStream {\n    constructor(parameters) {\n        this.buffer = new ArrayBuffer(0);\n        this.view = new Uint8Array(this.buffer);\n        this.bitsCount = 0;\n        if (parameters) {\n            if (\"byteStream\" in parameters) {\n                this.fromByteStream(parameters.byteStream);\n            }\n            if (\"view\" in parameters) {\n                this.fromUint8Array(parameters.view);\n            }\n            if (\"buffer\" in parameters) {\n                this.fromArrayBuffer(parameters.buffer);\n            }\n            if (\"string\" in parameters) {\n                this.fromString(parameters.string);\n            }\n            if (\"uint32\" in parameters) {\n                this.fromUint32(parameters.uint32);\n            }\n            if (\"bitsCount\" in parameters && parameters.bitsCount) {\n                this.bitsCount = parameters.bitsCount;\n            }\n        }\n    }\n    clear() {\n        this.buffer = new ArrayBuffer(0);\n        this.view = new Uint8Array(this.buffer);\n        this.bitsCount = 0;\n    }\n    fromByteStream(stream) {\n        this.fromUint8Array(stream.view);\n    }\n    fromArrayBuffer(array) {\n        this.buffer = array;\n        this.view = new Uint8Array(array);\n        this.bitsCount = this.view.length << 3;\n    }\n    fromUint8Array(array) {\n        this.fromArrayBuffer(new Uint8Array(array).buffer);\n    }\n    fromString(string) {\n        const stringLength = string.length;\n        this.buffer = new ArrayBuffer((stringLength >> 3) + ((stringLength % 8) ? 1 : 0));\n        this.view = new Uint8Array(this.buffer);\n        this.bitsCount = ((stringLength >> 3) + 1) << 3;\n        let byteIndex = 0;\n        for (let i = 0; i < stringLength; i++) {\n            if (string[i] == \"1\")\n                this.view[byteIndex] |= 1 << (7 - (i % 8));\n            if (i && (((i + 1) % 8) == 0))\n                byteIndex++;\n        }\n        if (stringLength % 8)\n            this.shiftRight(8 - (stringLength % 8));\n        this.bitsCount = stringLength;\n    }\n    fromUint32(uint32) {\n        this.buffer = new ArrayBuffer(4);\n        this.view = new Uint8Array(this.buffer);\n        const value = new Uint32Array([uint32]);\n        const view = new Uint8Array(value.buffer);\n        for (let i = 3; i >= 0; i--)\n            this.view[i] = view[3 - i];\n        this.bitsCount = 32;\n    }\n    toString(start, length) {\n        if (start == null) {\n            start = 0;\n        }\n        if ((start >= this.view.length) || (start < 0)) {\n            start = 0;\n        }\n        if (length == null) {\n            length = this.view.length - start;\n        }\n        if ((length >= this.view.length) || (length < 0)) {\n            length = this.view.length - start;\n        }\n        const result = [];\n        for (let i = start; i < (start + length); i++) {\n            result.push(_bit__WEBPACK_IMPORTED_MODULE_0__.bitsToStringArray[this.view[i]]);\n        }\n        return result.join(\"\").substring((this.view.length << 3) - this.bitsCount);\n    }\n    shiftRight(shift, needShrink = true) {\n        if (this.view.length == 0) {\n            return;\n        }\n        if ((shift < 0) || (shift > 8)) {\n            throw new Error(\"The \\\"shift\\\" parameter must be in range 0-8\");\n        }\n        if (shift > this.bitsCount) {\n            throw new Error(\"The \\\"shift\\\" parameter can not be bigger than \\\"this.bitsCount\\\"\");\n        }\n        const shiftMask = 0xFF >> (8 - shift);\n        this.view[this.view.length - 1] >>= shift;\n        for (let i = (this.view.length - 2); i >= 0; i--) {\n            this.view[i + 1] |= (this.view[i] & shiftMask) << (8 - shift);\n            this.view[i] >>= shift;\n        }\n        this.bitsCount -= shift;\n        if (this.bitsCount == 0) {\n            this.clear();\n        }\n        if (needShrink) {\n            this.shrink();\n        }\n    }\n    shiftLeft(shift) {\n        if (this.view.length == 0) {\n            return;\n        }\n        if ((shift < 0) || (shift > 8)) {\n            throw new Error(\"The \\\"shift\\\" parameter must be in range 0-8\");\n        }\n        if (shift > this.bitsCount) {\n            throw new Error(\"The \\\"shift\\\" parameter can not be bigger than \\\"this.bitsCount\\\"\");\n        }\n        const bitsOffset = this.bitsCount & 0x07;\n        if (bitsOffset > shift) {\n            this.view[0] &= 0xFF >> (bitsOffset + shift);\n        }\n        else {\n            const view = this.view.slice(1);\n            view[0] &= 0xFF >> (shift - bitsOffset);\n            this.buffer = view.buffer;\n            this.view = view;\n        }\n        this.bitsCount -= shift;\n        if (this.bitsCount == 0) {\n            this.clear();\n        }\n    }\n    slice(start = 0, end = 0) {\n        let valueShift = 0;\n        if (this.bitsCount % 8) {\n            valueShift = (8 - (this.bitsCount % 8));\n        }\n        start += valueShift;\n        end += valueShift;\n        const maxEnd = (this.view.length << 3) - 1;\n        if ((start < 0) || (start > maxEnd)) {\n            return new BitStream();\n        }\n        if (!end) {\n            end = maxEnd;\n        }\n        if ((end < 0) || (end > maxEnd)) {\n            return new BitStream();\n        }\n        if ((end - start + 1) > this.bitsCount) {\n            return new BitStream();\n        }\n        const startIndex = start >> 3;\n        const startOffset = start & 0x07;\n        const endIndex = end >> 3;\n        const endOffset = end & 0x07;\n        const bitsLength = ((endIndex - startIndex) == 0) ? 1 : (endIndex - startIndex + 1);\n        const result = new BitStream({\n            buffer: this.buffer.slice(startIndex, startIndex + bitsLength),\n            bitsCount: bitsLength << 3,\n        });\n        result.view[0] &= (0xFF >> startOffset);\n        result.view[bitsLength] &= (0xFF << (7 - endOffset));\n        if (7 - endOffset) {\n            result.shiftRight(7 - endOffset, false);\n        }\n        result.bitsCount = (end - start + 1);\n        result.shrink();\n        return result;\n    }\n    copy(start = 0, length = 0) {\n        const maxEnd = (this.view.length << 3) - 1;\n        if ((start < 0) || (start > maxEnd)) {\n            return new BitStream();\n        }\n        if (!length) {\n            length = (this.view.length << 3) - start - 1;\n        }\n        if (length > this.bitsCount) {\n            return new BitStream();\n        }\n        return this.slice(start, start + length - 1);\n    }\n    shrink() {\n        const currentLength = (this.bitsCount >> 3) + ((this.bitsCount % 8) ? 1 : 0);\n        if (currentLength < this.view.length) {\n            const view = this.view.slice(this.view.length - currentLength, (this.view.length - currentLength) + currentLength);\n            this.view = view;\n            this.buffer = view.buffer;\n        }\n    }\n    reverseBytes() {\n        for (let i = 0; i < this.view.length; i++) {\n            this.view[i] = ((this.view[i] * 0x0802 & 0x22110) | (this.view[i] * 0x8020 & 0x88440)) * 0x10101 >> 16;\n        }\n        if (this.bitsCount % 8) {\n            const currentLength = (this.bitsCount >> 3) + ((this.bitsCount % 8) ? 1 : 0);\n            this.view[this.view.length - currentLength] >>= (8 - (this.bitsCount & 0x07));\n        }\n    }\n    reverseValue() {\n        const initialValue = this.toString();\n        const initialValueLength = initialValue.length;\n        const reversedValue = new Array(initialValueLength);\n        for (let i = 0; i < initialValueLength; i++) {\n            reversedValue[initialValueLength - 1 - i] = initialValue[i];\n        }\n        this.fromString(reversedValue.join(\"\"));\n    }\n    getNumberValue() {\n        const byteLength = (this.view.length - 1);\n        if (byteLength > 3) {\n            return (-1);\n        }\n        if (byteLength == (-1)) {\n            return 0;\n        }\n        const value = new Uint32Array(1);\n        const view = new Uint8Array(value.buffer);\n        for (let i = byteLength; i >= 0; i--) {\n            view[byteLength - i] = this.view[i];\n        }\n        return value[0];\n    }\n    findPattern(pattern, start, length, backward) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString(),\n        });\n        const stringPattern = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: pattern.toString()\n        });\n        return stringStream.findPattern(stringPattern, start, length, backward);\n    }\n    findFirstIn(patterns, start, length, backward) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString(),\n        });\n        const stringPatterns = new Array(patterns.length);\n        for (let i = 0; i < patterns.length; i++) {\n            stringPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: patterns[i].toString()\n            });\n        }\n        return stringStream.findFirstIn(stringPatterns, start, length, backward);\n    }\n    findAllIn(patterns, start, length) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringPatterns = new Array(patterns.length);\n        for (let i = 0; i < patterns.length; i++) {\n            stringPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: patterns[i].toString()\n            });\n        }\n        return stringStream.findAllIn(stringPatterns, start, length);\n    }\n    findAllPatternIn(pattern, start, length) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringPattern = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: pattern.toString()\n        });\n        return stringStream.findAllPatternIn(stringPattern, start, length);\n    }\n    findFirstNotIn(patterns, start, length, backward) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringPatterns = new Array(patterns.length);\n        for (let i = 0; i < patterns.length; i++) {\n            stringPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: patterns[i].toString()\n            });\n        }\n        return stringStream.findFirstNotIn(stringPatterns, start, length, backward);\n    }\n    findAllNotIn(patterns, start, length) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringPatterns = new Array(patterns.length);\n        for (let i = 0; i < patterns.length; i++) {\n            stringPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: patterns[i].toString()\n            });\n        }\n        return stringStream.findAllNotIn(stringPatterns, start, length);\n    }\n    findFirstSequence(patterns, start, length, backward) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringPatterns = new Array(patterns.length);\n        for (let i = 0; i < patterns.length; i++) {\n            stringPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: patterns[i].toString()\n            });\n        }\n        return stringStream.findFirstSequence(stringPatterns, start, length, backward);\n    }\n    findAllSequences(patterns, start, length) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringPatterns = new Array(patterns.length);\n        for (let i = 0; i < patterns.length; i++) {\n            stringPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: patterns[i].toString()\n            });\n        }\n        return stringStream.findAllSequences(stringPatterns, start, length);\n    }\n    findPairedPatterns(leftPattern, rightPattern, start, length) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringLeftPattern = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: leftPattern.toString()\n        });\n        const stringRightPattern = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: rightPattern.toString()\n        });\n        return stringStream.findPairedPatterns(stringLeftPattern, stringRightPattern, start, length);\n    }\n    findPairedArrays(inputLeftPatterns, inputRightPatterns, start, length) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringLeftPatterns = new Array(inputLeftPatterns.length);\n        for (let i = 0; i < inputLeftPatterns.length; i++) {\n            stringLeftPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: inputLeftPatterns[i].toString()\n            });\n        }\n        const stringRightPatterns = new Array(inputRightPatterns.length);\n        for (let i = 0; i < inputRightPatterns.length; i++) {\n            stringRightPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: inputRightPatterns[i].toString()\n            });\n        }\n        return stringStream.findPairedArrays(stringLeftPatterns, stringRightPatterns, start, length);\n    }\n    replacePattern(searchPattern, replacePattern, start, length) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringSearchPattern = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: searchPattern.toString()\n        });\n        const stringReplacePattern = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: replacePattern.toString()\n        });\n        if (stringStream.replacePattern(stringSearchPattern, stringReplacePattern, start, length)) {\n            this.fromString(stringStream.toString());\n            return true;\n        }\n        return false;\n    }\n    skipPatterns(patterns, start, length, backward) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringPatterns = new Array(patterns.length);\n        for (let i = 0; i < patterns.length; i++) {\n            stringPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: patterns[i].toString()\n            });\n        }\n        return stringStream.skipPatterns(stringPatterns, start, length, backward);\n    }\n    skipNotPatterns(patterns, start, length, backward) {\n        const stringStream = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n            string: this.toString()\n        });\n        const stringPatterns = new Array(patterns.length);\n        for (let i = 0; i < patterns.length; i++) {\n            stringPatterns[i] = new _byte_stream__WEBPACK_IMPORTED_MODULE_1__.ByteStream({\n                string: patterns[i].toString()\n            });\n        }\n        return stringStream.skipNotPatterns(stringPatterns, start, length, backward);\n    }\n    append(stream) {\n        this.fromString([\n            this.toString(),\n            stream.toString()\n        ].join(\"\"));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL2JpdF9zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBDO0FBQ0M7QUFDcEM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzQkFBc0I7QUFDbEQsd0JBQXdCLG1EQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsUUFBUTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QSx3QkFBd0IscUJBQXFCO0FBQzdDLG9DQUFvQyxvREFBVTtBQUM5QztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvREFBVTtBQUMzQztBQUNBLFNBQVM7QUFDVDtBQUNBLHdCQUF3QixxQkFBcUI7QUFDN0Msb0NBQW9DLG9EQUFVO0FBQzlDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbm9kZV9tb2R1bGVzL2J5dGVzdHJlYW1qcy9idWlsZC9tanMvYml0X3N0cmVhbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiaXRzVG9TdHJpbmdBcnJheSB9IGZyb20gXCIuL2JpdFwiO1xuaW1wb3J0IHsgQnl0ZVN0cmVhbSB9IGZyb20gXCIuL2J5dGVfc3RyZWFtXCI7XG5leHBvcnQgY2xhc3MgQml0U3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDApO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcik7XG4gICAgICAgIHRoaXMuYml0c0NvdW50ID0gMDtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmIChcImJ5dGVTdHJlYW1cIiBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tQnl0ZVN0cmVhbShwYXJhbWV0ZXJzLmJ5dGVTdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFwidmlld1wiIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyb21VaW50OEFycmF5KHBhcmFtZXRlcnMudmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXCJidWZmZXJcIiBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tQXJyYXlCdWZmZXIocGFyYW1ldGVycy5idWZmZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJvbVN0cmluZyhwYXJhbWV0ZXJzLnN0cmluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXCJ1aW50MzJcIiBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tVWludDMyKHBhcmFtZXRlcnMudWludDMyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcImJpdHNDb3VudFwiIGluIHBhcmFtZXRlcnMgJiYgcGFyYW1ldGVycy5iaXRzQ291bnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpdHNDb3VudCA9IHBhcmFtZXRlcnMuYml0c0NvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigwKTtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpO1xuICAgICAgICB0aGlzLmJpdHNDb3VudCA9IDA7XG4gICAgfVxuICAgIGZyb21CeXRlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICB0aGlzLmZyb21VaW50OEFycmF5KHN0cmVhbS52aWV3KTtcbiAgICB9XG4gICAgZnJvbUFycmF5QnVmZmVyKGFycmF5KSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYXJyYXk7XG4gICAgICAgIHRoaXMudmlldyA9IG5ldyBVaW50OEFycmF5KGFycmF5KTtcbiAgICAgICAgdGhpcy5iaXRzQ291bnQgPSB0aGlzLnZpZXcubGVuZ3RoIDw8IDM7XG4gICAgfVxuICAgIGZyb21VaW50OEFycmF5KGFycmF5KSB7XG4gICAgICAgIHRoaXMuZnJvbUFycmF5QnVmZmVyKG5ldyBVaW50OEFycmF5KGFycmF5KS5idWZmZXIpO1xuICAgIH1cbiAgICBmcm9tU3RyaW5nKHN0cmluZykge1xuICAgICAgICBjb25zdCBzdHJpbmdMZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigoc3RyaW5nTGVuZ3RoID4+IDMpICsgKChzdHJpbmdMZW5ndGggJSA4KSA/IDEgOiAwKSk7XG4gICAgICAgIHRoaXMudmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKTtcbiAgICAgICAgdGhpcy5iaXRzQ291bnQgPSAoKHN0cmluZ0xlbmd0aCA+PiAzKSArIDEpIDw8IDM7XG4gICAgICAgIGxldCBieXRlSW5kZXggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc3RyaW5nW2ldID09IFwiMVwiKVxuICAgICAgICAgICAgICAgIHRoaXMudmlld1tieXRlSW5kZXhdIHw9IDEgPDwgKDcgLSAoaSAlIDgpKTtcbiAgICAgICAgICAgIGlmIChpICYmICgoKGkgKyAxKSAlIDgpID09IDApKVxuICAgICAgICAgICAgICAgIGJ5dGVJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJpbmdMZW5ndGggJSA4KVxuICAgICAgICAgICAgdGhpcy5zaGlmdFJpZ2h0KDggLSAoc3RyaW5nTGVuZ3RoICUgOCkpO1xuICAgICAgICB0aGlzLmJpdHNDb3VudCA9IHN0cmluZ0xlbmd0aDtcbiAgICB9XG4gICAgZnJvbVVpbnQzMih1aW50MzIpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNCk7XG4gICAgICAgIHRoaXMudmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBuZXcgVWludDMyQXJyYXkoW3VpbnQzMl0pO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDM7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgdGhpcy52aWV3W2ldID0gdmlld1szIC0gaV07XG4gICAgICAgIHRoaXMuYml0c0NvdW50ID0gMzI7XG4gICAgfVxuICAgIHRvU3RyaW5nKHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHN0YXJ0ID49IHRoaXMudmlldy5sZW5ndGgpIHx8IChzdGFydCA8IDApKSB7XG4gICAgICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA9PSBudWxsKSB7XG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLnZpZXcubGVuZ3RoIC0gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChsZW5ndGggPj0gdGhpcy52aWV3Lmxlbmd0aCkgfHwgKGxlbmd0aCA8IDApKSB7XG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLnZpZXcubGVuZ3RoIC0gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IChzdGFydCArIGxlbmd0aCk7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goYml0c1RvU3RyaW5nQXJyYXlbdGhpcy52aWV3W2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKFwiXCIpLnN1YnN0cmluZygodGhpcy52aWV3Lmxlbmd0aCA8PCAzKSAtIHRoaXMuYml0c0NvdW50KTtcbiAgICB9XG4gICAgc2hpZnRSaWdodChzaGlmdCwgbmVlZFNocmluayA9IHRydWUpIHtcbiAgICAgICAgaWYgKHRoaXMudmlldy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoc2hpZnQgPCAwKSB8fCAoc2hpZnQgPiA4KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIFxcXCJzaGlmdFxcXCIgcGFyYW1ldGVyIG11c3QgYmUgaW4gcmFuZ2UgMC04XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaGlmdCA+IHRoaXMuYml0c0NvdW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgXFxcInNoaWZ0XFxcIiBwYXJhbWV0ZXIgY2FuIG5vdCBiZSBiaWdnZXIgdGhhbiBcXFwidGhpcy5iaXRzQ291bnRcXFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNoaWZ0TWFzayA9IDB4RkYgPj4gKDggLSBzaGlmdCk7XG4gICAgICAgIHRoaXMudmlld1t0aGlzLnZpZXcubGVuZ3RoIC0gMV0gPj49IHNoaWZ0O1xuICAgICAgICBmb3IgKGxldCBpID0gKHRoaXMudmlldy5sZW5ndGggLSAyKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMudmlld1tpICsgMV0gfD0gKHRoaXMudmlld1tpXSAmIHNoaWZ0TWFzaykgPDwgKDggLSBzaGlmdCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdbaV0gPj49IHNoaWZ0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYml0c0NvdW50IC09IHNoaWZ0O1xuICAgICAgICBpZiAodGhpcy5iaXRzQ291bnQgPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZWVkU2hyaW5rKSB7XG4gICAgICAgICAgICB0aGlzLnNocmluaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNoaWZ0TGVmdChzaGlmdCkge1xuICAgICAgICBpZiAodGhpcy52aWV3Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChzaGlmdCA8IDApIHx8IChzaGlmdCA+IDgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgXFxcInNoaWZ0XFxcIiBwYXJhbWV0ZXIgbXVzdCBiZSBpbiByYW5nZSAwLThcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoaWZ0ID4gdGhpcy5iaXRzQ291bnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBcXFwic2hpZnRcXFwiIHBhcmFtZXRlciBjYW4gbm90IGJlIGJpZ2dlciB0aGFuIFxcXCJ0aGlzLmJpdHNDb3VudFxcXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYml0c09mZnNldCA9IHRoaXMuYml0c0NvdW50ICYgMHgwNztcbiAgICAgICAgaWYgKGJpdHNPZmZzZXQgPiBzaGlmdCkge1xuICAgICAgICAgICAgdGhpcy52aWV3WzBdICY9IDB4RkYgPj4gKGJpdHNPZmZzZXQgKyBzaGlmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy52aWV3LnNsaWNlKDEpO1xuICAgICAgICAgICAgdmlld1swXSAmPSAweEZGID4+IChzaGlmdCAtIGJpdHNPZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB2aWV3LmJ1ZmZlcjtcbiAgICAgICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iaXRzQ291bnQgLT0gc2hpZnQ7XG4gICAgICAgIGlmICh0aGlzLmJpdHNDb3VudCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2xpY2Uoc3RhcnQgPSAwLCBlbmQgPSAwKSB7XG4gICAgICAgIGxldCB2YWx1ZVNoaWZ0ID0gMDtcbiAgICAgICAgaWYgKHRoaXMuYml0c0NvdW50ICUgOCkge1xuICAgICAgICAgICAgdmFsdWVTaGlmdCA9ICg4IC0gKHRoaXMuYml0c0NvdW50ICUgOCkpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0ICs9IHZhbHVlU2hpZnQ7XG4gICAgICAgIGVuZCArPSB2YWx1ZVNoaWZ0O1xuICAgICAgICBjb25zdCBtYXhFbmQgPSAodGhpcy52aWV3Lmxlbmd0aCA8PCAzKSAtIDE7XG4gICAgICAgIGlmICgoc3RhcnQgPCAwKSB8fCAoc3RhcnQgPiBtYXhFbmQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpdFN0cmVhbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5kKSB7XG4gICAgICAgICAgICBlbmQgPSBtYXhFbmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChlbmQgPCAwKSB8fCAoZW5kID4gbWF4RW5kKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaXRTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGVuZCAtIHN0YXJ0ICsgMSkgPiB0aGlzLmJpdHNDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaXRTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gc3RhcnQgPj4gMztcbiAgICAgICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBzdGFydCAmIDB4MDc7XG4gICAgICAgIGNvbnN0IGVuZEluZGV4ID0gZW5kID4+IDM7XG4gICAgICAgIGNvbnN0IGVuZE9mZnNldCA9IGVuZCAmIDB4MDc7XG4gICAgICAgIGNvbnN0IGJpdHNMZW5ndGggPSAoKGVuZEluZGV4IC0gc3RhcnRJbmRleCkgPT0gMCkgPyAxIDogKGVuZEluZGV4IC0gc3RhcnRJbmRleCArIDEpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQml0U3RyZWFtKHtcbiAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy5idWZmZXIuc2xpY2Uoc3RhcnRJbmRleCwgc3RhcnRJbmRleCArIGJpdHNMZW5ndGgpLFxuICAgICAgICAgICAgYml0c0NvdW50OiBiaXRzTGVuZ3RoIDw8IDMsXG4gICAgICAgIH0pO1xuICAgICAgICByZXN1bHQudmlld1swXSAmPSAoMHhGRiA+PiBzdGFydE9mZnNldCk7XG4gICAgICAgIHJlc3VsdC52aWV3W2JpdHNMZW5ndGhdICY9ICgweEZGIDw8ICg3IC0gZW5kT2Zmc2V0KSk7XG4gICAgICAgIGlmICg3IC0gZW5kT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXN1bHQuc2hpZnRSaWdodCg3IC0gZW5kT2Zmc2V0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0LmJpdHNDb3VudCA9IChlbmQgLSBzdGFydCArIDEpO1xuICAgICAgICByZXN1bHQuc2hyaW5rKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNvcHkoc3RhcnQgPSAwLCBsZW5ndGggPSAwKSB7XG4gICAgICAgIGNvbnN0IG1heEVuZCA9ICh0aGlzLnZpZXcubGVuZ3RoIDw8IDMpIC0gMTtcbiAgICAgICAgaWYgKChzdGFydCA8IDApIHx8IChzdGFydCA+IG1heEVuZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQml0U3RyZWFtKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9ICh0aGlzLnZpZXcubGVuZ3RoIDw8IDMpIC0gc3RhcnQgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGggPiB0aGlzLmJpdHNDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaXRTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zbGljZShzdGFydCwgc3RhcnQgKyBsZW5ndGggLSAxKTtcbiAgICB9XG4gICAgc2hyaW5rKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50TGVuZ3RoID0gKHRoaXMuYml0c0NvdW50ID4+IDMpICsgKCh0aGlzLmJpdHNDb3VudCAlIDgpID8gMSA6IDApO1xuICAgICAgICBpZiAoY3VycmVudExlbmd0aCA8IHRoaXMudmlldy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnZpZXcuc2xpY2UodGhpcy52aWV3Lmxlbmd0aCAtIGN1cnJlbnRMZW5ndGgsICh0aGlzLnZpZXcubGVuZ3RoIC0gY3VycmVudExlbmd0aCkgKyBjdXJyZW50TGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHZpZXcuYnVmZmVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldmVyc2VCeXRlcygpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudmlld1tpXSA9ICgodGhpcy52aWV3W2ldICogMHgwODAyICYgMHgyMjExMCkgfCAodGhpcy52aWV3W2ldICogMHg4MDIwICYgMHg4ODQ0MCkpICogMHgxMDEwMSA+PiAxNjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5iaXRzQ291bnQgJSA4KSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TGVuZ3RoID0gKHRoaXMuYml0c0NvdW50ID4+IDMpICsgKCh0aGlzLmJpdHNDb3VudCAlIDgpID8gMSA6IDApO1xuICAgICAgICAgICAgdGhpcy52aWV3W3RoaXMudmlldy5sZW5ndGggLSBjdXJyZW50TGVuZ3RoXSA+Pj0gKDggLSAodGhpcy5iaXRzQ291bnQgJiAweDA3KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV2ZXJzZVZhbHVlKCkge1xuICAgICAgICBjb25zdCBpbml0aWFsVmFsdWUgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZUxlbmd0aCA9IGluaXRpYWxWYWx1ZS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJldmVyc2VkVmFsdWUgPSBuZXcgQXJyYXkoaW5pdGlhbFZhbHVlTGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbml0aWFsVmFsdWVMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmV2ZXJzZWRWYWx1ZVtpbml0aWFsVmFsdWVMZW5ndGggLSAxIC0gaV0gPSBpbml0aWFsVmFsdWVbaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcm9tU3RyaW5nKHJldmVyc2VkVmFsdWUuam9pbihcIlwiKSk7XG4gICAgfVxuICAgIGdldE51bWJlclZhbHVlKCkge1xuICAgICAgICBjb25zdCBieXRlTGVuZ3RoID0gKHRoaXMudmlldy5sZW5ndGggLSAxKTtcbiAgICAgICAgaWYgKGJ5dGVMZW5ndGggPiAzKSB7XG4gICAgICAgICAgICByZXR1cm4gKC0xKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnl0ZUxlbmd0aCA9PSAoLTEpKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IG5ldyBVaW50MzJBcnJheSgxKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgIGZvciAobGV0IGkgPSBieXRlTGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdmlld1tieXRlTGVuZ3RoIC0gaV0gPSB0aGlzLnZpZXdbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlWzBdO1xuICAgIH1cbiAgICBmaW5kUGF0dGVybihwYXR0ZXJuLCBzdGFydCwgbGVuZ3RoLCBiYWNrd2FyZCkge1xuICAgICAgICBjb25zdCBzdHJpbmdTdHJlYW0gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICBzdHJpbmc6IHRoaXMudG9TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1BhdHRlcm4gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICBzdHJpbmc6IHBhdHRlcm4udG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5maW5kUGF0dGVybihzdHJpbmdQYXR0ZXJuLCBzdGFydCwgbGVuZ3RoLCBiYWNrd2FyZCk7XG4gICAgfVxuICAgIGZpbmRGaXJzdEluKHBhdHRlcm5zLCBzdGFydCwgbGVuZ3RoLCBiYWNrd2FyZCkge1xuICAgICAgICBjb25zdCBzdHJpbmdTdHJlYW0gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICBzdHJpbmc6IHRoaXMudG9TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1BhdHRlcm5zID0gbmV3IEFycmF5KHBhdHRlcm5zLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0cmluZ1BhdHRlcm5zW2ldID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgIHN0cmluZzogcGF0dGVybnNbaV0udG9TdHJpbmcoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5maW5kRmlyc3RJbihzdHJpbmdQYXR0ZXJucywgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQpO1xuICAgIH1cbiAgICBmaW5kQWxsSW4ocGF0dGVybnMsIHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nU3RyZWFtID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1BhdHRlcm5zID0gbmV3IEFycmF5KHBhdHRlcm5zLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0cmluZ1BhdHRlcm5zW2ldID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgIHN0cmluZzogcGF0dGVybnNbaV0udG9TdHJpbmcoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5maW5kQWxsSW4oc3RyaW5nUGF0dGVybnMsIHN0YXJ0LCBsZW5ndGgpO1xuICAgIH1cbiAgICBmaW5kQWxsUGF0dGVybkluKHBhdHRlcm4sIHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nU3RyZWFtID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1BhdHRlcm4gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICBzdHJpbmc6IHBhdHRlcm4udG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5maW5kQWxsUGF0dGVybkluKHN0cmluZ1BhdHRlcm4sIHN0YXJ0LCBsZW5ndGgpO1xuICAgIH1cbiAgICBmaW5kRmlyc3ROb3RJbihwYXR0ZXJucywgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nU3RyZWFtID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1BhdHRlcm5zID0gbmV3IEFycmF5KHBhdHRlcm5zLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0cmluZ1BhdHRlcm5zW2ldID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgIHN0cmluZzogcGF0dGVybnNbaV0udG9TdHJpbmcoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5maW5kRmlyc3ROb3RJbihzdHJpbmdQYXR0ZXJucywgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQpO1xuICAgIH1cbiAgICBmaW5kQWxsTm90SW4ocGF0dGVybnMsIHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nU3RyZWFtID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1BhdHRlcm5zID0gbmV3IEFycmF5KHBhdHRlcm5zLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0cmluZ1BhdHRlcm5zW2ldID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgIHN0cmluZzogcGF0dGVybnNbaV0udG9TdHJpbmcoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5maW5kQWxsTm90SW4oc3RyaW5nUGF0dGVybnMsIHN0YXJ0LCBsZW5ndGgpO1xuICAgIH1cbiAgICBmaW5kRmlyc3RTZXF1ZW5jZShwYXR0ZXJucywgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nU3RyZWFtID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1BhdHRlcm5zID0gbmV3IEFycmF5KHBhdHRlcm5zLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0cmluZ1BhdHRlcm5zW2ldID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgIHN0cmluZzogcGF0dGVybnNbaV0udG9TdHJpbmcoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5maW5kRmlyc3RTZXF1ZW5jZShzdHJpbmdQYXR0ZXJucywgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQpO1xuICAgIH1cbiAgICBmaW5kQWxsU2VxdWVuY2VzKHBhdHRlcm5zLCBzdGFydCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHN0cmluZ1N0cmVhbSA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0cmluZzogdGhpcy50b1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdHJpbmdQYXR0ZXJucyA9IG5ldyBBcnJheShwYXR0ZXJucy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdHRlcm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzdHJpbmdQYXR0ZXJuc1tpXSA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgICAgICBzdHJpbmc6IHBhdHRlcm5zW2ldLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmdTdHJlYW0uZmluZEFsbFNlcXVlbmNlcyhzdHJpbmdQYXR0ZXJucywgc3RhcnQsIGxlbmd0aCk7XG4gICAgfVxuICAgIGZpbmRQYWlyZWRQYXR0ZXJucyhsZWZ0UGF0dGVybiwgcmlnaHRQYXR0ZXJuLCBzdGFydCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHN0cmluZ1N0cmVhbSA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0cmluZzogdGhpcy50b1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdHJpbmdMZWZ0UGF0dGVybiA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0cmluZzogbGVmdFBhdHRlcm4udG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmlnaHRQYXR0ZXJuID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RyaW5nOiByaWdodFBhdHRlcm4udG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5maW5kUGFpcmVkUGF0dGVybnMoc3RyaW5nTGVmdFBhdHRlcm4sIHN0cmluZ1JpZ2h0UGF0dGVybiwgc3RhcnQsIGxlbmd0aCk7XG4gICAgfVxuICAgIGZpbmRQYWlyZWRBcnJheXMoaW5wdXRMZWZ0UGF0dGVybnMsIGlucHV0UmlnaHRQYXR0ZXJucywgc3RhcnQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCBzdHJpbmdTdHJlYW0gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICBzdHJpbmc6IHRoaXMudG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3RyaW5nTGVmdFBhdHRlcm5zID0gbmV3IEFycmF5KGlucHV0TGVmdFBhdHRlcm5zLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRMZWZ0UGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0cmluZ0xlZnRQYXR0ZXJuc1tpXSA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgICAgICBzdHJpbmc6IGlucHV0TGVmdFBhdHRlcm5zW2ldLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0cmluZ1JpZ2h0UGF0dGVybnMgPSBuZXcgQXJyYXkoaW5wdXRSaWdodFBhdHRlcm5zLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRSaWdodFBhdHRlcm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzdHJpbmdSaWdodFBhdHRlcm5zW2ldID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgIHN0cmluZzogaW5wdXRSaWdodFBhdHRlcm5zW2ldLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmdTdHJlYW0uZmluZFBhaXJlZEFycmF5cyhzdHJpbmdMZWZ0UGF0dGVybnMsIHN0cmluZ1JpZ2h0UGF0dGVybnMsIHN0YXJ0LCBsZW5ndGgpO1xuICAgIH1cbiAgICByZXBsYWNlUGF0dGVybihzZWFyY2hQYXR0ZXJuLCByZXBsYWNlUGF0dGVybiwgc3RhcnQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCBzdHJpbmdTdHJlYW0gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICBzdHJpbmc6IHRoaXMudG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3RyaW5nU2VhcmNoUGF0dGVybiA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0cmluZzogc2VhcmNoUGF0dGVybi50b1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdHJpbmdSZXBsYWNlUGF0dGVybiA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0cmluZzogcmVwbGFjZVBhdHRlcm4udG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHN0cmluZ1N0cmVhbS5yZXBsYWNlUGF0dGVybihzdHJpbmdTZWFyY2hQYXR0ZXJuLCBzdHJpbmdSZXBsYWNlUGF0dGVybiwgc3RhcnQsIGxlbmd0aCkpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVN0cmluZyhzdHJpbmdTdHJlYW0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNraXBQYXR0ZXJucyhwYXR0ZXJucywgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nU3RyZWFtID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1BhdHRlcm5zID0gbmV3IEFycmF5KHBhdHRlcm5zLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0cmluZ1BhdHRlcm5zW2ldID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgIHN0cmluZzogcGF0dGVybnNbaV0udG9TdHJpbmcoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ1N0cmVhbS5za2lwUGF0dGVybnMoc3RyaW5nUGF0dGVybnMsIHN0YXJ0LCBsZW5ndGgsIGJhY2t3YXJkKTtcbiAgICB9XG4gICAgc2tpcE5vdFBhdHRlcm5zKHBhdHRlcm5zLCBzdGFydCwgbGVuZ3RoLCBiYWNrd2FyZCkge1xuICAgICAgICBjb25zdCBzdHJpbmdTdHJlYW0gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICBzdHJpbmc6IHRoaXMudG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3RyaW5nUGF0dGVybnMgPSBuZXcgQXJyYXkocGF0dGVybnMubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXR0ZXJucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3RyaW5nUGF0dGVybnNbaV0gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICAgICAgc3RyaW5nOiBwYXR0ZXJuc1tpXS50b1N0cmluZygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyaW5nU3RyZWFtLnNraXBOb3RQYXR0ZXJucyhzdHJpbmdQYXR0ZXJucywgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQpO1xuICAgIH1cbiAgICBhcHBlbmQoc3RyZWFtKSB7XG4gICAgICAgIHRoaXMuZnJvbVN0cmluZyhbXG4gICAgICAgICAgICB0aGlzLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBzdHJlYW0udG9TdHJpbmcoKVxuICAgICAgICBdLmpvaW4oXCJcIikpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/bit_stream.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/byte_stream.js":
/*!************************************************************!*\
  !*** ./node_modules/bytestreamjs/build/mjs/byte_stream.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ByteStream: () => (/* binding */ ByteStream)\n/* harmony export */ });\nclass ByteStream {\n    constructor(parameters = {}) {\n        if (\"view\" in parameters) {\n            this.fromUint8Array(parameters.view);\n        }\n        else if (\"buffer\" in parameters) {\n            this.fromArrayBuffer(parameters.buffer);\n        }\n        else if (\"string\" in parameters) {\n            this.fromString(parameters.string);\n        }\n        else if (\"hexstring\" in parameters) {\n            this.fromHexString(parameters.hexstring);\n        }\n        else {\n            if (\"length\" in parameters && parameters.length > 0) {\n                this.length = parameters.length;\n                if (parameters.stub) {\n                    for (let i = 0; i < this._view.length; i++) {\n                        this._view[i] = parameters.stub;\n                    }\n                }\n            }\n            else {\n                this.length = 0;\n            }\n        }\n    }\n    set buffer(value) {\n        this._buffer = value;\n        this._view = new Uint8Array(this._buffer);\n    }\n    get buffer() {\n        return this._buffer;\n    }\n    set view(value) {\n        this._buffer = new ArrayBuffer(value.length);\n        this._view = new Uint8Array(this._buffer);\n        this._view.set(value);\n    }\n    get view() {\n        return this._view;\n    }\n    get length() {\n        return this.view.byteLength;\n    }\n    set length(value) {\n        this._buffer = new ArrayBuffer(value);\n        this._view = new Uint8Array(this._buffer);\n    }\n    clear() {\n        this._buffer = new ArrayBuffer(0);\n        this._view = new Uint8Array(this._buffer);\n    }\n    fromArrayBuffer(array) {\n        this._buffer = array;\n        this._view = new Uint8Array(this._buffer);\n    }\n    fromUint8Array(array) {\n        this.fromArrayBuffer(new Uint8Array(array).buffer);\n    }\n    fromString(string) {\n        const stringLength = string.length;\n        this.length = stringLength;\n        for (let i = 0; i < stringLength; i++)\n            this.view[i] = string.charCodeAt(i);\n    }\n    toString(start = 0, length = (this.view.length - start)) {\n        let result = \"\";\n        if ((start >= this.view.length) || (start < 0)) {\n            start = 0;\n        }\n        if ((length >= this.view.length) || (length < 0)) {\n            length = this.view.length - start;\n        }\n        for (let i = start; i < (start + length); i++)\n            result += String.fromCharCode(this.view[i]);\n        return result;\n    }\n    fromHexString(hexString) {\n        const stringLength = hexString.length;\n        this.buffer = new ArrayBuffer(stringLength >> 1);\n        this.view = new Uint8Array(this.buffer);\n        const hexMap = new Map();\n        hexMap.set(\"0\", 0x00);\n        hexMap.set(\"1\", 0x01);\n        hexMap.set(\"2\", 0x02);\n        hexMap.set(\"3\", 0x03);\n        hexMap.set(\"4\", 0x04);\n        hexMap.set(\"5\", 0x05);\n        hexMap.set(\"6\", 0x06);\n        hexMap.set(\"7\", 0x07);\n        hexMap.set(\"8\", 0x08);\n        hexMap.set(\"9\", 0x09);\n        hexMap.set(\"A\", 0x0A);\n        hexMap.set(\"a\", 0x0A);\n        hexMap.set(\"B\", 0x0B);\n        hexMap.set(\"b\", 0x0B);\n        hexMap.set(\"C\", 0x0C);\n        hexMap.set(\"c\", 0x0C);\n        hexMap.set(\"D\", 0x0D);\n        hexMap.set(\"d\", 0x0D);\n        hexMap.set(\"E\", 0x0E);\n        hexMap.set(\"e\", 0x0E);\n        hexMap.set(\"F\", 0x0F);\n        hexMap.set(\"f\", 0x0F);\n        let j = 0;\n        let temp = 0x00;\n        for (let i = 0; i < stringLength; i++) {\n            if (!(i % 2)) {\n                temp = hexMap.get(hexString.charAt(i)) << 4;\n            }\n            else {\n                temp |= hexMap.get(hexString.charAt(i));\n                this.view[j] = temp;\n                j++;\n            }\n        }\n    }\n    toHexString(start = 0, length = (this.view.length - start)) {\n        let result = \"\";\n        if ((start >= this.view.length) || (start < 0)) {\n            start = 0;\n        }\n        if ((length >= this.view.length) || (length < 0)) {\n            length = this.view.length - start;\n        }\n        for (let i = start; i < (start + length); i++) {\n            const str = this.view[i].toString(16).toUpperCase();\n            result = result + ((str.length == 1) ? \"0\" : \"\") + str;\n        }\n        return result;\n    }\n    copy(start = 0, length = (this.length - start)) {\n        if (!start && !this.length) {\n            return new ByteStream();\n        }\n        if ((start < 0) || (start > (this.length - 1))) {\n            throw new Error(`Wrong start position: ${start}`);\n        }\n        const stream = new ByteStream({\n            buffer: this._buffer.slice(start, start + length)\n        });\n        return stream;\n    }\n    slice(start = 0, end = this.length) {\n        if (!start && !this.length) {\n            return new ByteStream();\n        }\n        if ((start < 0) || (start > (this.length - 1))) {\n            throw new Error(`Wrong start position: ${start}`);\n        }\n        const stream = new ByteStream({\n            buffer: this._buffer.slice(start, end),\n        });\n        return stream;\n    }\n    realloc(size) {\n        const buffer = new ArrayBuffer(size);\n        const view = new Uint8Array(buffer);\n        if (size > this._view.length)\n            view.set(this._view);\n        else {\n            view.set(new Uint8Array(this._buffer, 0, size));\n        }\n        this._buffer = buffer;\n        this._view = new Uint8Array(this._buffer);\n    }\n    append(stream) {\n        const initialSize = this.length;\n        const streamViewLength = stream.length;\n        const subarrayView = stream._view.subarray();\n        this.realloc(initialSize + streamViewLength);\n        this._view.set(subarrayView, initialSize);\n    }\n    insert(stream, start = 0, length = (this.length - start)) {\n        if (start > (this.length - 1))\n            return false;\n        if (length > (this.length - start)) {\n            length = this.length - start;\n        }\n        if (length > stream.length) {\n            length = stream.length;\n        }\n        if (length == stream.length)\n            this._view.set(stream._view, start);\n        else {\n            this._view.set(stream._view.subarray(0, length), start);\n        }\n        return true;\n    }\n    isEqual(stream) {\n        if (this.length != stream.length)\n            return false;\n        for (let i = 0; i < stream.length; i++) {\n            if (this.view[i] != stream.view[i])\n                return false;\n        }\n        return true;\n    }\n    isEqualView(view) {\n        if (view.length != this.view.length)\n            return false;\n        for (let i = 0; i < view.length; i++) {\n            if (this.view[i] != view[i])\n                return false;\n        }\n        return true;\n    }\n    findPattern(pattern, start_, length_, backward_) {\n        const { start, length, backward } = this.prepareFindParameters(start_, length_, backward_);\n        const patternLength = pattern.length;\n        if (patternLength > length) {\n            return (-1);\n        }\n        const patternArray = [];\n        for (let i = 0; i < patternLength; i++)\n            patternArray.push(pattern.view[i]);\n        for (let i = 0; i <= (length - patternLength); i++) {\n            let equal = true;\n            const equalStart = (backward) ? (start - patternLength - i) : (start + i);\n            for (let j = 0; j < patternLength; j++) {\n                if (this.view[j + equalStart] != patternArray[j]) {\n                    equal = false;\n                    break;\n                }\n            }\n            if (equal) {\n                return (backward) ? (start - patternLength - i) : (start + patternLength + i);\n            }\n        }\n        return (-1);\n    }\n    findFirstIn(patterns, start_, length_, backward_) {\n        const { start, length, backward } = this.prepareFindParameters(start_, length_, backward_);\n        const result = {\n            id: (-1),\n            position: (backward) ? 0 : (start + length),\n            length: 0\n        };\n        for (let i = 0; i < patterns.length; i++) {\n            const position = this.findPattern(patterns[i], start, length, backward);\n            if (position != (-1)) {\n                let valid = false;\n                const patternLength = patterns[i].length;\n                if (backward) {\n                    if ((position - patternLength) >= (result.position - result.length))\n                        valid = true;\n                }\n                else {\n                    if ((position - patternLength) <= (result.position - result.length))\n                        valid = true;\n                }\n                if (valid) {\n                    result.position = position;\n                    result.id = i;\n                    result.length = patternLength;\n                }\n            }\n        }\n        return result;\n    }\n    findAllIn(patterns, start_, length_) {\n        let { start, length } = this.prepareFindParameters(start_, length_);\n        const result = [];\n        let patternFound = {\n            id: (-1),\n            position: start\n        };\n        do {\n            const position = patternFound.position;\n            patternFound = this.findFirstIn(patterns, patternFound.position, length);\n            if (patternFound.id == (-1)) {\n                break;\n            }\n            length -= (patternFound.position - position);\n            result.push({\n                id: patternFound.id,\n                position: patternFound.position\n            });\n        } while (true);\n        return result;\n    }\n    findAllPatternIn(pattern, start_, length_) {\n        const { start, length } = this.prepareFindParameters(start_, length_);\n        const result = [];\n        const patternLength = pattern.length;\n        if (patternLength > length) {\n            return (-1);\n        }\n        const patternArray = Array.from(pattern.view);\n        for (let i = 0; i <= (length - patternLength); i++) {\n            let equal = true;\n            const equalStart = start + i;\n            for (let j = 0; j < patternLength; j++) {\n                if (this.view[j + equalStart] != patternArray[j]) {\n                    equal = false;\n                    break;\n                }\n            }\n            if (equal) {\n                result.push(start + patternLength + i);\n                i += (patternLength - 1);\n            }\n        }\n        return result;\n    }\n    findFirstNotIn(patterns, start_, length_, backward_) {\n        let { start, length, backward } = this.prepareFindParameters(start_, length_, backward_);\n        const result = {\n            left: {\n                id: (-1),\n                position: start\n            },\n            right: {\n                id: (-1),\n                position: 0\n            },\n            value: new ByteStream()\n        };\n        let currentLength = length;\n        while (currentLength > 0) {\n            result.right = this.findFirstIn(patterns, (backward) ? (start - length + currentLength) : (start + length - currentLength), currentLength, backward);\n            if (result.right.id == (-1)) {\n                length = currentLength;\n                if (backward) {\n                    start -= length;\n                }\n                else {\n                    start = result.left.position;\n                }\n                result.value = new ByteStream({\n                    buffer: this._buffer.slice(start, start + length),\n                });\n                break;\n            }\n            if (result.right.position != ((backward) ? (result.left.position - patterns[result.right.id].length) : (result.left.position + patterns[result.right.id].length))) {\n                if (backward) {\n                    start = result.right.position + patterns[result.right.id].length;\n                    length = result.left.position - result.right.position - patterns[result.right.id].length;\n                }\n                else {\n                    start = result.left.position;\n                    length = result.right.position - result.left.position - patterns[result.right.id].length;\n                }\n                result.value = new ByteStream({\n                    buffer: this._buffer.slice(start, start + length),\n                });\n                break;\n            }\n            result.left = result.right;\n            currentLength -= patterns[result.right.id].length;\n        }\n        if (backward) {\n            const temp = result.right;\n            result.right = result.left;\n            result.left = temp;\n        }\n        return result;\n    }\n    findAllNotIn(patterns, start_, length_) {\n        let { start, length } = this.prepareFindParameters(start_, length_);\n        const result = [];\n        let patternFound = {\n            left: {\n                id: (-1),\n                position: start\n            },\n            right: {\n                id: (-1),\n                position: start\n            },\n            value: new ByteStream()\n        };\n        do {\n            const position = patternFound.right.position;\n            patternFound = this.findFirstNotIn(patterns, patternFound.right.position, length);\n            length -= (patternFound.right.position - position);\n            result.push({\n                left: {\n                    id: patternFound.left.id,\n                    position: patternFound.left.position\n                },\n                right: {\n                    id: patternFound.right.id,\n                    position: patternFound.right.position\n                },\n                value: patternFound.value\n            });\n        } while (patternFound.right.id != (-1));\n        return result;\n    }\n    findFirstSequence(patterns, start_, length_, backward_) {\n        let { start, length, backward } = this.prepareFindParameters(start_, length_, backward_);\n        const firstIn = this.skipNotPatterns(patterns, start, length, backward);\n        if (firstIn == (-1)) {\n            return {\n                position: (-1),\n                value: new ByteStream()\n            };\n        }\n        const firstNotIn = this.skipPatterns(patterns, firstIn, length - ((backward) ? (start - firstIn) : (firstIn - start)), backward);\n        if (backward) {\n            start = firstNotIn;\n            length = (firstIn - firstNotIn);\n        }\n        else {\n            start = firstIn;\n            length = (firstNotIn - firstIn);\n        }\n        const value = new ByteStream({\n            buffer: this._buffer.slice(start, start + length),\n        });\n        return {\n            position: firstNotIn,\n            value\n        };\n    }\n    findAllSequences(patterns, start_, length_) {\n        let { start, length } = this.prepareFindParameters(start_, length_);\n        const result = [];\n        let patternFound = {\n            position: start,\n            value: new ByteStream()\n        };\n        do {\n            const position = patternFound.position;\n            patternFound = this.findFirstSequence(patterns, patternFound.position, length);\n            if (patternFound.position != (-1)) {\n                length -= (patternFound.position - position);\n                result.push({\n                    position: patternFound.position,\n                    value: patternFound.value,\n                });\n            }\n        } while (patternFound.position != (-1));\n        return result;\n    }\n    findPairedPatterns(leftPattern, rightPattern, start_, length_) {\n        const result = [];\n        if (leftPattern.isEqual(rightPattern))\n            return result;\n        const { start, length } = this.prepareFindParameters(start_, length_);\n        let currentPositionLeft = 0;\n        const leftPatterns = this.findAllPatternIn(leftPattern, start, length);\n        if (!Array.isArray(leftPatterns) || leftPatterns.length == 0) {\n            return result;\n        }\n        const rightPatterns = this.findAllPatternIn(rightPattern, start, length);\n        if (!Array.isArray(rightPatterns) || rightPatterns.length == 0) {\n            return result;\n        }\n        while (currentPositionLeft < leftPatterns.length) {\n            if (rightPatterns.length == 0) {\n                break;\n            }\n            if (leftPatterns[0] == rightPatterns[0]) {\n                result.push({\n                    left: leftPatterns[0],\n                    right: rightPatterns[0]\n                });\n                leftPatterns.splice(0, 1);\n                rightPatterns.splice(0, 1);\n                continue;\n            }\n            if (leftPatterns[currentPositionLeft] > rightPatterns[0]) {\n                break;\n            }\n            while (leftPatterns[currentPositionLeft] < rightPatterns[0]) {\n                currentPositionLeft++;\n                if (currentPositionLeft >= leftPatterns.length) {\n                    break;\n                }\n            }\n            result.push({\n                left: leftPatterns[currentPositionLeft - 1],\n                right: rightPatterns[0]\n            });\n            leftPatterns.splice(currentPositionLeft - 1, 1);\n            rightPatterns.splice(0, 1);\n            currentPositionLeft = 0;\n        }\n        result.sort((a, b) => (a.left - b.left));\n        return result;\n    }\n    findPairedArrays(inputLeftPatterns, inputRightPatterns, start_, length_) {\n        const { start, length } = this.prepareFindParameters(start_, length_);\n        const result = [];\n        let currentPositionLeft = 0;\n        const leftPatterns = this.findAllIn(inputLeftPatterns, start, length);\n        if (leftPatterns.length == 0)\n            return result;\n        const rightPatterns = this.findAllIn(inputRightPatterns, start, length);\n        if (rightPatterns.length == 0)\n            return result;\n        while (currentPositionLeft < leftPatterns.length) {\n            if (rightPatterns.length == 0) {\n                break;\n            }\n            if (leftPatterns[0].position == rightPatterns[0].position) {\n                result.push({\n                    left: leftPatterns[0],\n                    right: rightPatterns[0]\n                });\n                leftPatterns.splice(0, 1);\n                rightPatterns.splice(0, 1);\n                continue;\n            }\n            if (leftPatterns[currentPositionLeft].position > rightPatterns[0].position) {\n                break;\n            }\n            while (leftPatterns[currentPositionLeft].position < rightPatterns[0].position) {\n                currentPositionLeft++;\n                if (currentPositionLeft >= leftPatterns.length) {\n                    break;\n                }\n            }\n            result.push({\n                left: leftPatterns[currentPositionLeft - 1],\n                right: rightPatterns[0]\n            });\n            leftPatterns.splice(currentPositionLeft - 1, 1);\n            rightPatterns.splice(0, 1);\n            currentPositionLeft = 0;\n        }\n        result.sort((a, b) => (a.left.position - b.left.position));\n        return result;\n    }\n    replacePattern(searchPattern, replacePattern, start_, length_, findAllResult = null) {\n        let result = [];\n        let i;\n        const output = {\n            status: (-1),\n            searchPatternPositions: [],\n            replacePatternPositions: []\n        };\n        const { start, length } = this.prepareFindParameters(start_, length_);\n        if (findAllResult == null) {\n            result = this.findAllIn([searchPattern], start, length);\n            if (result.length == 0) {\n                return output;\n            }\n        }\n        else {\n            result = findAllResult;\n        }\n        output.searchPatternPositions.push(...Array.from(result, element => element.position));\n        const patternDifference = searchPattern.length - replacePattern.length;\n        const changedBuffer = new ArrayBuffer(this.view.length - (result.length * patternDifference));\n        const changedView = new Uint8Array(changedBuffer);\n        changedView.set(new Uint8Array(this.buffer, 0, start));\n        for (i = 0; i < result.length; i++) {\n            const currentPosition = (i == 0) ? start : result[i - 1].position;\n            changedView.set(new Uint8Array(this.buffer, currentPosition, result[i].position - searchPattern.length - currentPosition), currentPosition - i * patternDifference);\n            changedView.set(replacePattern.view, result[i].position - searchPattern.length - i * patternDifference);\n            output.replacePatternPositions.push(result[i].position - searchPattern.length - i * patternDifference);\n        }\n        i--;\n        changedView.set(new Uint8Array(this.buffer, result[i].position, this.length - result[i].position), result[i].position - searchPattern.length + replacePattern.length - i * patternDifference);\n        this.buffer = changedBuffer;\n        this.view = new Uint8Array(this.buffer);\n        output.status = 1;\n        return output;\n    }\n    skipPatterns(patterns, start_, length_, backward_) {\n        const { start, length, backward } = this.prepareFindParameters(start_, length_, backward_);\n        let result = start;\n        for (let k = 0; k < patterns.length; k++) {\n            const patternLength = patterns[k].length;\n            const equalStart = (backward) ? (result - patternLength) : (result);\n            let equal = true;\n            for (let j = 0; j < patternLength; j++) {\n                if (this.view[j + equalStart] != patterns[k].view[j]) {\n                    equal = false;\n                    break;\n                }\n            }\n            if (equal) {\n                k = (-1);\n                if (backward) {\n                    result -= patternLength;\n                    if (result <= 0)\n                        return result;\n                }\n                else {\n                    result += patternLength;\n                    if (result >= (start + length))\n                        return result;\n                }\n            }\n        }\n        return result;\n    }\n    skipNotPatterns(patterns, start_, length_, backward_) {\n        const { start, length, backward } = this.prepareFindParameters(start_, length_, backward_);\n        let result = (-1);\n        for (let i = 0; i < length; i++) {\n            for (let k = 0; k < patterns.length; k++) {\n                const patternLength = patterns[k].length;\n                const equalStart = (backward) ? (start - i - patternLength) : (start + i);\n                let equal = true;\n                for (let j = 0; j < patternLength; j++) {\n                    if (this.view[j + equalStart] != patterns[k].view[j]) {\n                        equal = false;\n                        break;\n                    }\n                }\n                if (equal) {\n                    result = (backward) ? (start - i) : (start + i);\n                    break;\n                }\n            }\n            if (result != (-1)) {\n                break;\n            }\n        }\n        return result;\n    }\n    prepareFindParameters(start = null, length = null, backward = false) {\n        if (start === null) {\n            start = (backward) ? this.length : 0;\n        }\n        if (start > this.length) {\n            start = this.length;\n        }\n        if (backward) {\n            if (length === null) {\n                length = start;\n            }\n            if (length > start) {\n                length = start;\n            }\n        }\n        else {\n            if (length === null) {\n                length = this.length - start;\n            }\n            if (length > (this.length - start)) {\n                length = this.length - start;\n            }\n        }\n        return { start, length, backward };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL2J5dGVfc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx1QkFBdUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzQkFBc0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxNQUFN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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMEJBQTBCO0FBQzFDO0FBQ0Esd0JBQXdCLFlBQVk7QUFDcEMsNEJBQTRCLHFCQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsbUJBQW1CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbm9kZV9tb2R1bGVzL2J5dGVzdHJlYW1qcy9idWlsZC9tanMvYnl0ZV9zdHJlYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEJ5dGVTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBpZiAoXCJ2aWV3XCIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5mcm9tVWludDhBcnJheShwYXJhbWV0ZXJzLnZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFwiYnVmZmVyXCIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5mcm9tQXJyYXlCdWZmZXIocGFyYW1ldGVycy5idWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFwic3RyaW5nXCIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5mcm9tU3RyaW5nKHBhcmFtZXRlcnMuc3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChcImhleHN0cmluZ1wiIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbUhleFN0cmluZyhwYXJhbWV0ZXJzLmhleHN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoXCJsZW5ndGhcIiBpbiBwYXJhbWV0ZXJzICYmIHBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gcGFyYW1ldGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMuc3R1Yikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3ZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZpZXdbaV0gPSBwYXJhbWV0ZXJzLnN0dWI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0IGJ1ZmZlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLl9idWZmZXIgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fdmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZmZlcik7XG4gICAgfVxuICAgIGdldCBidWZmZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWZmZXI7XG4gICAgfVxuICAgIHNldCB2aWV3KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcih2YWx1ZS5sZW5ndGgpO1xuICAgICAgICB0aGlzLl92aWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fYnVmZmVyKTtcbiAgICAgICAgdGhpcy5fdmlldy5zZXQodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgdmlldygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZXc7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgc2V0IGxlbmd0aCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9idWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIodmFsdWUpO1xuICAgICAgICB0aGlzLl92aWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fYnVmZmVyKTtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuX2J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigwKTtcbiAgICAgICAgdGhpcy5fdmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZmZlcik7XG4gICAgfVxuICAgIGZyb21BcnJheUJ1ZmZlcihhcnJheSkge1xuICAgICAgICB0aGlzLl9idWZmZXIgPSBhcnJheTtcbiAgICAgICAgdGhpcy5fdmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZmZlcik7XG4gICAgfVxuICAgIGZyb21VaW50OEFycmF5KGFycmF5KSB7XG4gICAgICAgIHRoaXMuZnJvbUFycmF5QnVmZmVyKG5ldyBVaW50OEFycmF5KGFycmF5KS5idWZmZXIpO1xuICAgIH1cbiAgICBmcm9tU3RyaW5nKHN0cmluZykge1xuICAgICAgICBjb25zdCBzdHJpbmdMZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHN0cmluZ0xlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmdMZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHRoaXMudmlld1tpXSA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICB0b1N0cmluZyhzdGFydCA9IDAsIGxlbmd0aCA9ICh0aGlzLnZpZXcubGVuZ3RoIC0gc3RhcnQpKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBpZiAoKHN0YXJ0ID49IHRoaXMudmlldy5sZW5ndGgpIHx8IChzdGFydCA8IDApKSB7XG4gICAgICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChsZW5ndGggPj0gdGhpcy52aWV3Lmxlbmd0aCkgfHwgKGxlbmd0aCA8IDApKSB7XG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLnZpZXcubGVuZ3RoIC0gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgKHN0YXJ0ICsgbGVuZ3RoKTsgaSsrKVxuICAgICAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy52aWV3W2ldKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnJvbUhleFN0cmluZyhoZXhTdHJpbmcpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nTGVuZ3RoID0gaGV4U3RyaW5nLmxlbmd0aDtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoc3RyaW5nTGVuZ3RoID4+IDEpO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IGhleE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgaGV4TWFwLnNldChcIjBcIiwgMHgwMCk7XG4gICAgICAgIGhleE1hcC5zZXQoXCIxXCIsIDB4MDEpO1xuICAgICAgICBoZXhNYXAuc2V0KFwiMlwiLCAweDAyKTtcbiAgICAgICAgaGV4TWFwLnNldChcIjNcIiwgMHgwMyk7XG4gICAgICAgIGhleE1hcC5zZXQoXCI0XCIsIDB4MDQpO1xuICAgICAgICBoZXhNYXAuc2V0KFwiNVwiLCAweDA1KTtcbiAgICAgICAgaGV4TWFwLnNldChcIjZcIiwgMHgwNik7XG4gICAgICAgIGhleE1hcC5zZXQoXCI3XCIsIDB4MDcpO1xuICAgICAgICBoZXhNYXAuc2V0KFwiOFwiLCAweDA4KTtcbiAgICAgICAgaGV4TWFwLnNldChcIjlcIiwgMHgwOSk7XG4gICAgICAgIGhleE1hcC5zZXQoXCJBXCIsIDB4MEEpO1xuICAgICAgICBoZXhNYXAuc2V0KFwiYVwiLCAweDBBKTtcbiAgICAgICAgaGV4TWFwLnNldChcIkJcIiwgMHgwQik7XG4gICAgICAgIGhleE1hcC5zZXQoXCJiXCIsIDB4MEIpO1xuICAgICAgICBoZXhNYXAuc2V0KFwiQ1wiLCAweDBDKTtcbiAgICAgICAgaGV4TWFwLnNldChcImNcIiwgMHgwQyk7XG4gICAgICAgIGhleE1hcC5zZXQoXCJEXCIsIDB4MEQpO1xuICAgICAgICBoZXhNYXAuc2V0KFwiZFwiLCAweDBEKTtcbiAgICAgICAgaGV4TWFwLnNldChcIkVcIiwgMHgwRSk7XG4gICAgICAgIGhleE1hcC5zZXQoXCJlXCIsIDB4MEUpO1xuICAgICAgICBoZXhNYXAuc2V0KFwiRlwiLCAweDBGKTtcbiAgICAgICAgaGV4TWFwLnNldChcImZcIiwgMHgwRik7XG4gICAgICAgIGxldCBqID0gMDtcbiAgICAgICAgbGV0IHRlbXAgPSAweDAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIShpICUgMikpIHtcbiAgICAgICAgICAgICAgICB0ZW1wID0gaGV4TWFwLmdldChoZXhTdHJpbmcuY2hhckF0KGkpKSA8PCA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGVtcCB8PSBoZXhNYXAuZ2V0KGhleFN0cmluZy5jaGFyQXQoaSkpO1xuICAgICAgICAgICAgICAgIHRoaXMudmlld1tqXSA9IHRlbXA7XG4gICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRvSGV4U3RyaW5nKHN0YXJ0ID0gMCwgbGVuZ3RoID0gKHRoaXMudmlldy5sZW5ndGggLSBzdGFydCkpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGlmICgoc3RhcnQgPj0gdGhpcy52aWV3Lmxlbmd0aCkgfHwgKHN0YXJ0IDwgMCkpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGxlbmd0aCA+PSB0aGlzLnZpZXcubGVuZ3RoKSB8fCAobGVuZ3RoIDwgMCkpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMudmlldy5sZW5ndGggLSBzdGFydDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCAoc3RhcnQgKyBsZW5ndGgpOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHN0ciA9IHRoaXMudmlld1tpXS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArICgoc3RyLmxlbmd0aCA9PSAxKSA/IFwiMFwiIDogXCJcIikgKyBzdHI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29weShzdGFydCA9IDAsIGxlbmd0aCA9ICh0aGlzLmxlbmd0aCAtIHN0YXJ0KSkge1xuICAgICAgICBpZiAoIXN0YXJ0ICYmICF0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCeXRlU3RyZWFtKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChzdGFydCA8IDApIHx8IChzdGFydCA+ICh0aGlzLmxlbmd0aCAtIDEpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBXcm9uZyBzdGFydCBwb3NpdGlvbjogJHtzdGFydH1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICBidWZmZXI6IHRoaXMuX2J1ZmZlci5zbGljZShzdGFydCwgc3RhcnQgKyBsZW5ndGgpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICBzbGljZShzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICghc3RhcnQgJiYgIXRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJ5dGVTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHN0YXJ0IDwgMCkgfHwgKHN0YXJ0ID4gKHRoaXMubGVuZ3RoIC0gMSkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFdyb25nIHN0YXJ0IHBvc2l0aW9uOiAke3N0YXJ0fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy5fYnVmZmVyLnNsaWNlKHN0YXJ0LCBlbmQpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICB9XG4gICAgcmVhbGxvYyhzaXplKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzaXplKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGlmIChzaXplID4gdGhpcy5fdmlldy5sZW5ndGgpXG4gICAgICAgICAgICB2aWV3LnNldCh0aGlzLl92aWV3KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2aWV3LnNldChuZXcgVWludDhBcnJheSh0aGlzLl9idWZmZXIsIDAsIHNpemUpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIHRoaXMuX3ZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLl9idWZmZXIpO1xuICAgIH1cbiAgICBhcHBlbmQoc3RyZWFtKSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxTaXplID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHN0cmVhbVZpZXdMZW5ndGggPSBzdHJlYW0ubGVuZ3RoO1xuICAgICAgICBjb25zdCBzdWJhcnJheVZpZXcgPSBzdHJlYW0uX3ZpZXcuc3ViYXJyYXkoKTtcbiAgICAgICAgdGhpcy5yZWFsbG9jKGluaXRpYWxTaXplICsgc3RyZWFtVmlld0xlbmd0aCk7XG4gICAgICAgIHRoaXMuX3ZpZXcuc2V0KHN1YmFycmF5VmlldywgaW5pdGlhbFNpemUpO1xuICAgIH1cbiAgICBpbnNlcnQoc3RyZWFtLCBzdGFydCA9IDAsIGxlbmd0aCA9ICh0aGlzLmxlbmd0aCAtIHN0YXJ0KSkge1xuICAgICAgICBpZiAoc3RhcnQgPiAodGhpcy5sZW5ndGggLSAxKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGxlbmd0aCA+ICh0aGlzLmxlbmd0aCAtIHN0YXJ0KSkge1xuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGggLSBzdGFydDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID4gc3RyZWFtLmxlbmd0aCkge1xuICAgICAgICAgICAgbGVuZ3RoID0gc3RyZWFtLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID09IHN0cmVhbS5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLl92aWV3LnNldChzdHJlYW0uX3ZpZXcsIHN0YXJ0KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl92aWV3LnNldChzdHJlYW0uX3ZpZXcuc3ViYXJyYXkoMCwgbGVuZ3RoKSwgc3RhcnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpc0VxdWFsKHN0cmVhbSkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggIT0gc3RyZWFtLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJlYW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXdbaV0gIT0gc3RyZWFtLnZpZXdbaV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpc0VxdWFsVmlldyh2aWV3KSB7XG4gICAgICAgIGlmICh2aWV3Lmxlbmd0aCAhPSB0aGlzLnZpZXcubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXdbaV0gIT0gdmlld1tpXSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZpbmRQYXR0ZXJuKHBhdHRlcm4sIHN0YXJ0XywgbGVuZ3RoXywgYmFja3dhcmRfKSB7XG4gICAgICAgIGNvbnN0IHsgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQgfSA9IHRoaXMucHJlcGFyZUZpbmRQYXJhbWV0ZXJzKHN0YXJ0XywgbGVuZ3RoXywgYmFja3dhcmRfKTtcbiAgICAgICAgY29uc3QgcGF0dGVybkxlbmd0aCA9IHBhdHRlcm4ubGVuZ3RoO1xuICAgICAgICBpZiAocGF0dGVybkxlbmd0aCA+IGxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICgtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0dGVybkFycmF5ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybkxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgcGF0dGVybkFycmF5LnB1c2gocGF0dGVybi52aWV3W2ldKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gKGxlbmd0aCAtIHBhdHRlcm5MZW5ndGgpOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBlcXVhbCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBlcXVhbFN0YXJ0ID0gKGJhY2t3YXJkKSA/IChzdGFydCAtIHBhdHRlcm5MZW5ndGggLSBpKSA6IChzdGFydCArIGkpO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXR0ZXJuTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3W2ogKyBlcXVhbFN0YXJ0XSAhPSBwYXR0ZXJuQXJyYXlbal0pIHtcbiAgICAgICAgICAgICAgICAgICAgZXF1YWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVxdWFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChiYWNrd2FyZCkgPyAoc3RhcnQgLSBwYXR0ZXJuTGVuZ3RoIC0gaSkgOiAoc3RhcnQgKyBwYXR0ZXJuTGVuZ3RoICsgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgtMSk7XG4gICAgfVxuICAgIGZpbmRGaXJzdEluKHBhdHRlcm5zLCBzdGFydF8sIGxlbmd0aF8sIGJhY2t3YXJkXykge1xuICAgICAgICBjb25zdCB7IHN0YXJ0LCBsZW5ndGgsIGJhY2t3YXJkIH0gPSB0aGlzLnByZXBhcmVGaW5kUGFyYW1ldGVycyhzdGFydF8sIGxlbmd0aF8sIGJhY2t3YXJkXyk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGlkOiAoLTEpLFxuICAgICAgICAgICAgcG9zaXRpb246IChiYWNrd2FyZCkgPyAwIDogKHN0YXJ0ICsgbGVuZ3RoKSxcbiAgICAgICAgICAgIGxlbmd0aDogMFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdHRlcm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuZmluZFBhdHRlcm4ocGF0dGVybnNbaV0sIHN0YXJ0LCBsZW5ndGgsIGJhY2t3YXJkKTtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiAhPSAoLTEpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0dGVybkxlbmd0aCA9IHBhdHRlcm5zW2ldLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoYmFja3dhcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwb3NpdGlvbiAtIHBhdHRlcm5MZW5ndGgpID49IChyZXN1bHQucG9zaXRpb24gLSByZXN1bHQubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocG9zaXRpb24gLSBwYXR0ZXJuTGVuZ3RoKSA8PSAocmVzdWx0LnBvc2l0aW9uIC0gcmVzdWx0Lmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmlkID0gaTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lmxlbmd0aCA9IHBhdHRlcm5MZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZpbmRBbGxJbihwYXR0ZXJucywgc3RhcnRfLCBsZW5ndGhfKSB7XG4gICAgICAgIGxldCB7IHN0YXJ0LCBsZW5ndGggfSA9IHRoaXMucHJlcGFyZUZpbmRQYXJhbWV0ZXJzKHN0YXJ0XywgbGVuZ3RoXyk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXQgcGF0dGVybkZvdW5kID0ge1xuICAgICAgICAgICAgaWQ6ICgtMSksXG4gICAgICAgICAgICBwb3NpdGlvbjogc3RhcnRcbiAgICAgICAgfTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBwYXR0ZXJuRm91bmQucG9zaXRpb247XG4gICAgICAgICAgICBwYXR0ZXJuRm91bmQgPSB0aGlzLmZpbmRGaXJzdEluKHBhdHRlcm5zLCBwYXR0ZXJuRm91bmQucG9zaXRpb24sIGxlbmd0aCk7XG4gICAgICAgICAgICBpZiAocGF0dGVybkZvdW5kLmlkID09ICgtMSkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxlbmd0aCAtPSAocGF0dGVybkZvdW5kLnBvc2l0aW9uIC0gcG9zaXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiBwYXR0ZXJuRm91bmQuaWQsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHBhdHRlcm5Gb3VuZC5wb3NpdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gd2hpbGUgKHRydWUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmaW5kQWxsUGF0dGVybkluKHBhdHRlcm4sIHN0YXJ0XywgbGVuZ3RoXykge1xuICAgICAgICBjb25zdCB7IHN0YXJ0LCBsZW5ndGggfSA9IHRoaXMucHJlcGFyZUZpbmRQYXJhbWV0ZXJzKHN0YXJ0XywgbGVuZ3RoXyk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBjb25zdCBwYXR0ZXJuTGVuZ3RoID0gcGF0dGVybi5sZW5ndGg7XG4gICAgICAgIGlmIChwYXR0ZXJuTGVuZ3RoID4gbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gKC0xKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXR0ZXJuQXJyYXkgPSBBcnJheS5mcm9tKHBhdHRlcm4udmlldyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IChsZW5ndGggLSBwYXR0ZXJuTGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZXF1YWwgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgZXF1YWxTdGFydCA9IHN0YXJ0ICsgaTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGF0dGVybkxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld1tqICsgZXF1YWxTdGFydF0gIT0gcGF0dGVybkFycmF5W2pdKSB7XG4gICAgICAgICAgICAgICAgICAgIGVxdWFsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcXVhbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHN0YXJ0ICsgcGF0dGVybkxlbmd0aCArIGkpO1xuICAgICAgICAgICAgICAgIGkgKz0gKHBhdHRlcm5MZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmaW5kRmlyc3ROb3RJbihwYXR0ZXJucywgc3RhcnRfLCBsZW5ndGhfLCBiYWNrd2FyZF8pIHtcbiAgICAgICAgbGV0IHsgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQgfSA9IHRoaXMucHJlcGFyZUZpbmRQYXJhbWV0ZXJzKHN0YXJ0XywgbGVuZ3RoXywgYmFja3dhcmRfKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgIGlkOiAoLTEpLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdGFydFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJpZ2h0OiB7XG4gICAgICAgICAgICAgICAgaWQ6ICgtMSksXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWx1ZTogbmV3IEJ5dGVTdHJlYW0oKVxuICAgICAgICB9O1xuICAgICAgICBsZXQgY3VycmVudExlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHQucmlnaHQgPSB0aGlzLmZpbmRGaXJzdEluKHBhdHRlcm5zLCAoYmFja3dhcmQpID8gKHN0YXJ0IC0gbGVuZ3RoICsgY3VycmVudExlbmd0aCkgOiAoc3RhcnQgKyBsZW5ndGggLSBjdXJyZW50TGVuZ3RoKSwgY3VycmVudExlbmd0aCwgYmFja3dhcmQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5yaWdodC5pZCA9PSAoLTEpKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY3VycmVudExlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoYmFja3dhcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgLT0gbGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSByZXN1bHQubGVmdC5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LnZhbHVlID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHRoaXMuX2J1ZmZlci5zbGljZShzdGFydCwgc3RhcnQgKyBsZW5ndGgpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5yaWdodC5wb3NpdGlvbiAhPSAoKGJhY2t3YXJkKSA/IChyZXN1bHQubGVmdC5wb3NpdGlvbiAtIHBhdHRlcm5zW3Jlc3VsdC5yaWdodC5pZF0ubGVuZ3RoKSA6IChyZXN1bHQubGVmdC5wb3NpdGlvbiArIHBhdHRlcm5zW3Jlc3VsdC5yaWdodC5pZF0ubGVuZ3RoKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmFja3dhcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSByZXN1bHQucmlnaHQucG9zaXRpb24gKyBwYXR0ZXJuc1tyZXN1bHQucmlnaHQuaWRdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gcmVzdWx0LmxlZnQucG9zaXRpb24gLSByZXN1bHQucmlnaHQucG9zaXRpb24gLSBwYXR0ZXJuc1tyZXN1bHQucmlnaHQuaWRdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gcmVzdWx0LmxlZnQucG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IHJlc3VsdC5yaWdodC5wb3NpdGlvbiAtIHJlc3VsdC5sZWZ0LnBvc2l0aW9uIC0gcGF0dGVybnNbcmVzdWx0LnJpZ2h0LmlkXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IG5ldyBCeXRlU3RyZWFtKHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiB0aGlzLl9idWZmZXIuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5sZWZ0ID0gcmVzdWx0LnJpZ2h0O1xuICAgICAgICAgICAgY3VycmVudExlbmd0aCAtPSBwYXR0ZXJuc1tyZXN1bHQucmlnaHQuaWRdLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmFja3dhcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSByZXN1bHQucmlnaHQ7XG4gICAgICAgICAgICByZXN1bHQucmlnaHQgPSByZXN1bHQubGVmdDtcbiAgICAgICAgICAgIHJlc3VsdC5sZWZ0ID0gdGVtcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmaW5kQWxsTm90SW4ocGF0dGVybnMsIHN0YXJ0XywgbGVuZ3RoXykge1xuICAgICAgICBsZXQgeyBzdGFydCwgbGVuZ3RoIH0gPSB0aGlzLnByZXBhcmVGaW5kUGFyYW1ldGVycyhzdGFydF8sIGxlbmd0aF8pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IHBhdHRlcm5Gb3VuZCA9IHtcbiAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICBpZDogKC0xKSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogc3RhcnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByaWdodDoge1xuICAgICAgICAgICAgICAgIGlkOiAoLTEpLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdGFydFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgQnl0ZVN0cmVhbSgpXG4gICAgICAgIH07XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcGF0dGVybkZvdW5kLnJpZ2h0LnBvc2l0aW9uO1xuICAgICAgICAgICAgcGF0dGVybkZvdW5kID0gdGhpcy5maW5kRmlyc3ROb3RJbihwYXR0ZXJucywgcGF0dGVybkZvdW5kLnJpZ2h0LnBvc2l0aW9uLCBsZW5ndGgpO1xuICAgICAgICAgICAgbGVuZ3RoIC09IChwYXR0ZXJuRm91bmQucmlnaHQucG9zaXRpb24gLSBwb3NpdGlvbik7XG4gICAgICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgICBpZDogcGF0dGVybkZvdW5kLmxlZnQuaWQsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBwYXR0ZXJuRm91bmQubGVmdC5wb3NpdGlvblxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmlnaHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHBhdHRlcm5Gb3VuZC5yaWdodC5pZCxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHBhdHRlcm5Gb3VuZC5yaWdodC5wb3NpdGlvblxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhdHRlcm5Gb3VuZC52YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gd2hpbGUgKHBhdHRlcm5Gb3VuZC5yaWdodC5pZCAhPSAoLTEpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZmluZEZpcnN0U2VxdWVuY2UocGF0dGVybnMsIHN0YXJ0XywgbGVuZ3RoXywgYmFja3dhcmRfKSB7XG4gICAgICAgIGxldCB7IHN0YXJ0LCBsZW5ndGgsIGJhY2t3YXJkIH0gPSB0aGlzLnByZXBhcmVGaW5kUGFyYW1ldGVycyhzdGFydF8sIGxlbmd0aF8sIGJhY2t3YXJkXyk7XG4gICAgICAgIGNvbnN0IGZpcnN0SW4gPSB0aGlzLnNraXBOb3RQYXR0ZXJucyhwYXR0ZXJucywgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQpO1xuICAgICAgICBpZiAoZmlyc3RJbiA9PSAoLTEpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAoLTEpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgQnl0ZVN0cmVhbSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpcnN0Tm90SW4gPSB0aGlzLnNraXBQYXR0ZXJucyhwYXR0ZXJucywgZmlyc3RJbiwgbGVuZ3RoIC0gKChiYWNrd2FyZCkgPyAoc3RhcnQgLSBmaXJzdEluKSA6IChmaXJzdEluIC0gc3RhcnQpKSwgYmFja3dhcmQpO1xuICAgICAgICBpZiAoYmFja3dhcmQpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gZmlyc3ROb3RJbjtcbiAgICAgICAgICAgIGxlbmd0aCA9IChmaXJzdEluIC0gZmlyc3ROb3RJbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFydCA9IGZpcnN0SW47XG4gICAgICAgICAgICBsZW5ndGggPSAoZmlyc3ROb3RJbiAtIGZpcnN0SW4pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IEJ5dGVTdHJlYW0oe1xuICAgICAgICAgICAgYnVmZmVyOiB0aGlzLl9idWZmZXIuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogZmlyc3ROb3RJbixcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZpbmRBbGxTZXF1ZW5jZXMocGF0dGVybnMsIHN0YXJ0XywgbGVuZ3RoXykge1xuICAgICAgICBsZXQgeyBzdGFydCwgbGVuZ3RoIH0gPSB0aGlzLnByZXBhcmVGaW5kUGFyYW1ldGVycyhzdGFydF8sIGxlbmd0aF8pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IHBhdHRlcm5Gb3VuZCA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdGFydCxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgQnl0ZVN0cmVhbSgpXG4gICAgICAgIH07XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcGF0dGVybkZvdW5kLnBvc2l0aW9uO1xuICAgICAgICAgICAgcGF0dGVybkZvdW5kID0gdGhpcy5maW5kRmlyc3RTZXF1ZW5jZShwYXR0ZXJucywgcGF0dGVybkZvdW5kLnBvc2l0aW9uLCBsZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHBhdHRlcm5Gb3VuZC5wb3NpdGlvbiAhPSAoLTEpKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoIC09IChwYXR0ZXJuRm91bmQucG9zaXRpb24gLSBwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcGF0dGVybkZvdW5kLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcGF0dGVybkZvdW5kLnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChwYXR0ZXJuRm91bmQucG9zaXRpb24gIT0gKC0xKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZpbmRQYWlyZWRQYXR0ZXJucyhsZWZ0UGF0dGVybiwgcmlnaHRQYXR0ZXJuLCBzdGFydF8sIGxlbmd0aF8pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIGlmIChsZWZ0UGF0dGVybi5pc0VxdWFsKHJpZ2h0UGF0dGVybikpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICBjb25zdCB7IHN0YXJ0LCBsZW5ndGggfSA9IHRoaXMucHJlcGFyZUZpbmRQYXJhbWV0ZXJzKHN0YXJ0XywgbGVuZ3RoXyk7XG4gICAgICAgIGxldCBjdXJyZW50UG9zaXRpb25MZWZ0ID0gMDtcbiAgICAgICAgY29uc3QgbGVmdFBhdHRlcm5zID0gdGhpcy5maW5kQWxsUGF0dGVybkluKGxlZnRQYXR0ZXJuLCBzdGFydCwgbGVuZ3RoKTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGxlZnRQYXR0ZXJucykgfHwgbGVmdFBhdHRlcm5zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJpZ2h0UGF0dGVybnMgPSB0aGlzLmZpbmRBbGxQYXR0ZXJuSW4ocmlnaHRQYXR0ZXJuLCBzdGFydCwgbGVuZ3RoKTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJpZ2h0UGF0dGVybnMpIHx8IHJpZ2h0UGF0dGVybnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGN1cnJlbnRQb3NpdGlvbkxlZnQgPCBsZWZ0UGF0dGVybnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAocmlnaHRQYXR0ZXJucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlZnRQYXR0ZXJuc1swXSA9PSByaWdodFBhdHRlcm5zWzBdKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0UGF0dGVybnNbMF0sXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiByaWdodFBhdHRlcm5zWzBdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGVmdFBhdHRlcm5zLnNwbGljZSgwLCAxKTtcbiAgICAgICAgICAgICAgICByaWdodFBhdHRlcm5zLnNwbGljZSgwLCAxKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZWZ0UGF0dGVybnNbY3VycmVudFBvc2l0aW9uTGVmdF0gPiByaWdodFBhdHRlcm5zWzBdKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAobGVmdFBhdHRlcm5zW2N1cnJlbnRQb3NpdGlvbkxlZnRdIDwgcmlnaHRQYXR0ZXJuc1swXSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbkxlZnQrKztcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBvc2l0aW9uTGVmdCA+PSBsZWZ0UGF0dGVybnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0UGF0dGVybnNbY3VycmVudFBvc2l0aW9uTGVmdCAtIDFdLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiByaWdodFBhdHRlcm5zWzBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxlZnRQYXR0ZXJucy5zcGxpY2UoY3VycmVudFBvc2l0aW9uTGVmdCAtIDEsIDEpO1xuICAgICAgICAgICAgcmlnaHRQYXR0ZXJucy5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICBjdXJyZW50UG9zaXRpb25MZWZ0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQuc29ydCgoYSwgYikgPT4gKGEubGVmdCAtIGIubGVmdCkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmaW5kUGFpcmVkQXJyYXlzKGlucHV0TGVmdFBhdHRlcm5zLCBpbnB1dFJpZ2h0UGF0dGVybnMsIHN0YXJ0XywgbGVuZ3RoXykge1xuICAgICAgICBjb25zdCB7IHN0YXJ0LCBsZW5ndGggfSA9IHRoaXMucHJlcGFyZUZpbmRQYXJhbWV0ZXJzKHN0YXJ0XywgbGVuZ3RoXyk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudFBvc2l0aW9uTGVmdCA9IDA7XG4gICAgICAgIGNvbnN0IGxlZnRQYXR0ZXJucyA9IHRoaXMuZmluZEFsbEluKGlucHV0TGVmdFBhdHRlcm5zLCBzdGFydCwgbGVuZ3RoKTtcbiAgICAgICAgaWYgKGxlZnRQYXR0ZXJucy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGNvbnN0IHJpZ2h0UGF0dGVybnMgPSB0aGlzLmZpbmRBbGxJbihpbnB1dFJpZ2h0UGF0dGVybnMsIHN0YXJ0LCBsZW5ndGgpO1xuICAgICAgICBpZiAocmlnaHRQYXR0ZXJucy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIHdoaWxlIChjdXJyZW50UG9zaXRpb25MZWZ0IDwgbGVmdFBhdHRlcm5zLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHJpZ2h0UGF0dGVybnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZWZ0UGF0dGVybnNbMF0ucG9zaXRpb24gPT0gcmlnaHRQYXR0ZXJuc1swXS5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogbGVmdFBhdHRlcm5zWzBdLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogcmlnaHRQYXR0ZXJuc1swXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxlZnRQYXR0ZXJucy5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICAgICAgcmlnaHRQYXR0ZXJucy5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGVmdFBhdHRlcm5zW2N1cnJlbnRQb3NpdGlvbkxlZnRdLnBvc2l0aW9uID4gcmlnaHRQYXR0ZXJuc1swXS5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGxlZnRQYXR0ZXJuc1tjdXJyZW50UG9zaXRpb25MZWZ0XS5wb3NpdGlvbiA8IHJpZ2h0UGF0dGVybnNbMF0ucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UG9zaXRpb25MZWZ0Kys7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQb3NpdGlvbkxlZnQgPj0gbGVmdFBhdHRlcm5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICAgICAgbGVmdDogbGVmdFBhdHRlcm5zW2N1cnJlbnRQb3NpdGlvbkxlZnQgLSAxXSxcbiAgICAgICAgICAgICAgICByaWdodDogcmlnaHRQYXR0ZXJuc1swXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZWZ0UGF0dGVybnMuc3BsaWNlKGN1cnJlbnRQb3NpdGlvbkxlZnQgLSAxLCAxKTtcbiAgICAgICAgICAgIHJpZ2h0UGF0dGVybnMuc3BsaWNlKDAsIDEpO1xuICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uTGVmdCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0LnNvcnQoKGEsIGIpID0+IChhLmxlZnQucG9zaXRpb24gLSBiLmxlZnQucG9zaXRpb24pKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmVwbGFjZVBhdHRlcm4oc2VhcmNoUGF0dGVybiwgcmVwbGFjZVBhdHRlcm4sIHN0YXJ0XywgbGVuZ3RoXywgZmluZEFsbFJlc3VsdCA9IG51bGwpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAoLTEpLFxuICAgICAgICAgICAgc2VhcmNoUGF0dGVyblBvc2l0aW9uczogW10sXG4gICAgICAgICAgICByZXBsYWNlUGF0dGVyblBvc2l0aW9uczogW11cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgeyBzdGFydCwgbGVuZ3RoIH0gPSB0aGlzLnByZXBhcmVGaW5kUGFyYW1ldGVycyhzdGFydF8sIGxlbmd0aF8pO1xuICAgICAgICBpZiAoZmluZEFsbFJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmZpbmRBbGxJbihbc2VhcmNoUGF0dGVybl0sIHN0YXJ0LCBsZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBmaW5kQWxsUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dC5zZWFyY2hQYXR0ZXJuUG9zaXRpb25zLnB1c2goLi4uQXJyYXkuZnJvbShyZXN1bHQsIGVsZW1lbnQgPT4gZWxlbWVudC5wb3NpdGlvbikpO1xuICAgICAgICBjb25zdCBwYXR0ZXJuRGlmZmVyZW5jZSA9IHNlYXJjaFBhdHRlcm4ubGVuZ3RoIC0gcmVwbGFjZVBhdHRlcm4ubGVuZ3RoO1xuICAgICAgICBjb25zdCBjaGFuZ2VkQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMudmlldy5sZW5ndGggLSAocmVzdWx0Lmxlbmd0aCAqIHBhdHRlcm5EaWZmZXJlbmNlKSk7XG4gICAgICAgIGNvbnN0IGNoYW5nZWRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoY2hhbmdlZEJ1ZmZlcik7XG4gICAgICAgIGNoYW5nZWRWaWV3LnNldChuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlciwgMCwgc3RhcnQpKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gKGkgPT0gMCkgPyBzdGFydCA6IHJlc3VsdFtpIC0gMV0ucG9zaXRpb247XG4gICAgICAgICAgICBjaGFuZ2VkVmlldy5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIsIGN1cnJlbnRQb3NpdGlvbiwgcmVzdWx0W2ldLnBvc2l0aW9uIC0gc2VhcmNoUGF0dGVybi5sZW5ndGggLSBjdXJyZW50UG9zaXRpb24pLCBjdXJyZW50UG9zaXRpb24gLSBpICogcGF0dGVybkRpZmZlcmVuY2UpO1xuICAgICAgICAgICAgY2hhbmdlZFZpZXcuc2V0KHJlcGxhY2VQYXR0ZXJuLnZpZXcsIHJlc3VsdFtpXS5wb3NpdGlvbiAtIHNlYXJjaFBhdHRlcm4ubGVuZ3RoIC0gaSAqIHBhdHRlcm5EaWZmZXJlbmNlKTtcbiAgICAgICAgICAgIG91dHB1dC5yZXBsYWNlUGF0dGVyblBvc2l0aW9ucy5wdXNoKHJlc3VsdFtpXS5wb3NpdGlvbiAtIHNlYXJjaFBhdHRlcm4ubGVuZ3RoIC0gaSAqIHBhdHRlcm5EaWZmZXJlbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpLS07XG4gICAgICAgIGNoYW5nZWRWaWV3LnNldChuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlciwgcmVzdWx0W2ldLnBvc2l0aW9uLCB0aGlzLmxlbmd0aCAtIHJlc3VsdFtpXS5wb3NpdGlvbiksIHJlc3VsdFtpXS5wb3NpdGlvbiAtIHNlYXJjaFBhdHRlcm4ubGVuZ3RoICsgcmVwbGFjZVBhdHRlcm4ubGVuZ3RoIC0gaSAqIHBhdHRlcm5EaWZmZXJlbmNlKTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBjaGFuZ2VkQnVmZmVyO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcik7XG4gICAgICAgIG91dHB1dC5zdGF0dXMgPSAxO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBza2lwUGF0dGVybnMocGF0dGVybnMsIHN0YXJ0XywgbGVuZ3RoXywgYmFja3dhcmRfKSB7XG4gICAgICAgIGNvbnN0IHsgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQgfSA9IHRoaXMucHJlcGFyZUZpbmRQYXJhbWV0ZXJzKHN0YXJ0XywgbGVuZ3RoXywgYmFja3dhcmRfKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHN0YXJ0O1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHBhdHRlcm5zLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBjb25zdCBwYXR0ZXJuTGVuZ3RoID0gcGF0dGVybnNba10ubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgZXF1YWxTdGFydCA9IChiYWNrd2FyZCkgPyAocmVzdWx0IC0gcGF0dGVybkxlbmd0aCkgOiAocmVzdWx0KTtcbiAgICAgICAgICAgIGxldCBlcXVhbCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhdHRlcm5MZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdbaiArIGVxdWFsU3RhcnRdICE9IHBhdHRlcm5zW2tdLnZpZXdbal0pIHtcbiAgICAgICAgICAgICAgICAgICAgZXF1YWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVxdWFsKSB7XG4gICAgICAgICAgICAgICAgayA9ICgtMSk7XG4gICAgICAgICAgICAgICAgaWYgKGJhY2t3YXJkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCAtPSBwYXR0ZXJuTGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0IDw9IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHBhdHRlcm5MZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPj0gKHN0YXJ0ICsgbGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHNraXBOb3RQYXR0ZXJucyhwYXR0ZXJucywgc3RhcnRfLCBsZW5ndGhfLCBiYWNrd2FyZF8pIHtcbiAgICAgICAgY29uc3QgeyBzdGFydCwgbGVuZ3RoLCBiYWNrd2FyZCB9ID0gdGhpcy5wcmVwYXJlRmluZFBhcmFtZXRlcnMoc3RhcnRfLCBsZW5ndGhfLCBiYWNrd2FyZF8pO1xuICAgICAgICBsZXQgcmVzdWx0ID0gKC0xKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBwYXR0ZXJucy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm5MZW5ndGggPSBwYXR0ZXJuc1trXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgY29uc3QgZXF1YWxTdGFydCA9IChiYWNrd2FyZCkgPyAoc3RhcnQgLSBpIC0gcGF0dGVybkxlbmd0aCkgOiAoc3RhcnQgKyBpKTtcbiAgICAgICAgICAgICAgICBsZXQgZXF1YWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGF0dGVybkxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdbaiArIGVxdWFsU3RhcnRdICE9IHBhdHRlcm5zW2tdLnZpZXdbal0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXF1YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKGJhY2t3YXJkKSA/IChzdGFydCAtIGkpIDogKHN0YXJ0ICsgaSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gKC0xKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHByZXBhcmVGaW5kUGFyYW1ldGVycyhzdGFydCA9IG51bGwsIGxlbmd0aCA9IG51bGwsIGJhY2t3YXJkID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSBudWxsKSB7XG4gICAgICAgICAgICBzdGFydCA9IChiYWNrd2FyZCkgPyB0aGlzLmxlbmd0aCA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhY2t3YXJkKSB7XG4gICAgICAgICAgICBpZiAobGVuZ3RoID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gc3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGVuZ3RoID4gc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBzdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChsZW5ndGggPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aCAtIHN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlbmd0aCA+ICh0aGlzLmxlbmd0aCAtIHN0YXJ0KSkge1xuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoIC0gc3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhcnQsIGxlbmd0aCwgYmFja3dhcmQgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/byte_stream.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/helpers.js":
/*!********************************************************!*\
  !*** ./node_modules/bytestreamjs/build/mjs/helpers.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseByteMap: () => (/* binding */ parseByteMap)\n/* harmony export */ });\nfunction parseByteMap(stream, map, elements, start = null, length = null) {\n    if (start === null) {\n        start = 0;\n    }\n    if (start > (stream.length - 1)) {\n        return [];\n    }\n    if (length === null) {\n        length = stream.length - start;\n    }\n    if (length > (stream.length - start)) {\n        length = stream.length - start;\n    }\n    let dataView;\n    if ((start == 0) && (length == stream.length)) {\n        dataView = stream.view;\n    }\n    else {\n        dataView = new Uint8Array(stream.buffer, start, length);\n    }\n    const resultArray = new Array(elements);\n    let elementsCount = 0;\n    let count = 0;\n    const mapLength = map.length;\n    while (count < length) {\n        let structureLength = 0;\n        resultArray[elementsCount] = {};\n        for (let i = 0; i < mapLength; i++) {\n            if (map[i].maxlength == 0) {\n                if (\"defaultValue\" in map[i]) {\n                    (resultArray[elementsCount])[map[i].name] = map[i].defaultValue;\n                }\n                continue;\n            }\n            const array = new Uint8Array(map[i].maxlength);\n            for (let j = 0; j < map[i].maxlength; j++) {\n                array[j] = dataView[count++];\n            }\n            const result = (map[i].func)(array);\n            if (result.status == (-1)) {\n                if (resultArray.length == 1) {\n                    return [];\n                }\n                return resultArray.slice(0, resultArray.length - 1);\n            }\n            if (map[i].type != \"check\") {\n                (resultArray[elementsCount])[map[i].name] = result.value;\n            }\n            count -= (map[i].maxlength - result.length);\n            structureLength += result.length;\n        }\n        (resultArray[elementsCount++]).structureLength = structureLength;\n    }\n    return resultArray;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL2hlbHBlcnMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL2hlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnl0ZU1hcChzdHJlYW0sIG1hcCwgZWxlbWVudHMsIHN0YXJ0ID0gbnVsbCwgbGVuZ3RoID0gbnVsbCkge1xuICAgIGlmIChzdGFydCA9PT0gbnVsbCkge1xuICAgICAgICBzdGFydCA9IDA7XG4gICAgfVxuICAgIGlmIChzdGFydCA+IChzdHJlYW0ubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAobGVuZ3RoID09PSBudWxsKSB7XG4gICAgICAgIGxlbmd0aCA9IHN0cmVhbS5sZW5ndGggLSBzdGFydDtcbiAgICB9XG4gICAgaWYgKGxlbmd0aCA+IChzdHJlYW0ubGVuZ3RoIC0gc3RhcnQpKSB7XG4gICAgICAgIGxlbmd0aCA9IHN0cmVhbS5sZW5ndGggLSBzdGFydDtcbiAgICB9XG4gICAgbGV0IGRhdGFWaWV3O1xuICAgIGlmICgoc3RhcnQgPT0gMCkgJiYgKGxlbmd0aCA9PSBzdHJlYW0ubGVuZ3RoKSkge1xuICAgICAgICBkYXRhVmlldyA9IHN0cmVhbS52aWV3O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZGF0YVZpZXcgPSBuZXcgVWludDhBcnJheShzdHJlYW0uYnVmZmVyLCBzdGFydCwgbGVuZ3RoKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0QXJyYXkgPSBuZXcgQXJyYXkoZWxlbWVudHMpO1xuICAgIGxldCBlbGVtZW50c0NvdW50ID0gMDtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIGNvbnN0IG1hcExlbmd0aCA9IG1hcC5sZW5ndGg7XG4gICAgd2hpbGUgKGNvdW50IDwgbGVuZ3RoKSB7XG4gICAgICAgIGxldCBzdHJ1Y3R1cmVMZW5ndGggPSAwO1xuICAgICAgICByZXN1bHRBcnJheVtlbGVtZW50c0NvdW50XSA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobWFwW2ldLm1heGxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiZGVmYXVsdFZhbHVlXCIgaW4gbWFwW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIChyZXN1bHRBcnJheVtlbGVtZW50c0NvdW50XSlbbWFwW2ldLm5hbWVdID0gbWFwW2ldLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KG1hcFtpXS5tYXhsZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtYXBbaV0ubWF4bGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBhcnJheVtqXSA9IGRhdGFWaWV3W2NvdW50KytdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKG1hcFtpXS5mdW5jKShhcnJheSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PSAoLTEpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdEFycmF5Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdEFycmF5LnNsaWNlKDAsIHJlc3VsdEFycmF5Lmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hcFtpXS50eXBlICE9IFwiY2hlY2tcIikge1xuICAgICAgICAgICAgICAgIChyZXN1bHRBcnJheVtlbGVtZW50c0NvdW50XSlbbWFwW2ldLm5hbWVdID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY291bnQgLT0gKG1hcFtpXS5tYXhsZW5ndGggLSByZXN1bHQubGVuZ3RoKTtcbiAgICAgICAgICAgIHN0cnVjdHVyZUxlbmd0aCArPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIChyZXN1bHRBcnJheVtlbGVtZW50c0NvdW50KytdKS5zdHJ1Y3R1cmVMZW5ndGggPSBzdHJ1Y3R1cmVMZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRBcnJheTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/helpers.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/index.js":
/*!******************************************************!*\
  !*** ./node_modules/bytestreamjs/build/mjs/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BitStream: () => (/* reexport safe */ _bit_stream__WEBPACK_IMPORTED_MODULE_3__.BitStream),\n/* harmony export */   ByteStream: () => (/* reexport safe */ _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream),\n/* harmony export */   SeqBitStream: () => (/* reexport safe */ _seq_bit_stream__WEBPACK_IMPORTED_MODULE_4__.SeqBitStream),\n/* harmony export */   SeqStream: () => (/* reexport safe */ _seq_stream__WEBPACK_IMPORTED_MODULE_1__.SeqStream),\n/* harmony export */   parseByteMap: () => (/* reexport safe */ _helpers__WEBPACK_IMPORTED_MODULE_2__.parseByteMap)\n/* harmony export */ });\n/* harmony import */ var _byte_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./byte_stream */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/byte_stream.js\");\n/* harmony import */ var _seq_stream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./seq_stream */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/seq_stream.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/helpers.js\");\n/* harmony import */ var _bit_stream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bit_stream */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/bit_stream.js\");\n/* harmony import */ var _seq_bit_stream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./seq_bit_stream */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/seq_bit_stream.js\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBOEI7QUFDRDtBQUNIO0FBQ0c7QUFDSSIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2J5dGVfc3RyZWFtXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zZXFfc3RyZWFtXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9oZWxwZXJzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9iaXRfc3RyZWFtXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zZXFfYml0X3N0cmVhbVwiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/seq_bit_stream.js":
/*!***************************************************************!*\
  !*** ./node_modules/bytestreamjs/build/mjs/seq_bit_stream.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SeqBitStream: () => (/* binding */ SeqBitStream)\n/* harmony export */ });\n/* harmony import */ var _bit_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bit_stream */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/bit_stream.js\");\n\nclass SeqBitStream {\n    constructor(parameters = {}) {\n        var _a;\n        this._length = 0;\n        this._start = 0;\n        this.prevLength = 0;\n        this.prevStart = 0;\n        this.stream = ((_a = parameters.stream) === null || _a === void 0 ? void 0 : _a.slice()) || new _bit_stream__WEBPACK_IMPORTED_MODULE_0__.BitStream();\n        this.appendBlock = parameters.appendBlock || 0;\n        if (parameters.start && parameters.start > 0) {\n            this.start = parameters.start;\n        }\n        if (parameters.length && parameters.length > 0) {\n            this.length = parameters.length;\n        }\n        this.backward = parameters.backward || false;\n    }\n    set start(value) {\n        if (value > this.stream.bitsCount) {\n            return;\n        }\n        this._length -= ((this.backward) ? (this._start - value) : (value - this._start));\n        this._start = value;\n        this.prevStart = this._start;\n        this.prevLength = this._length;\n    }\n    get start() {\n        return this._start;\n    }\n    set length(value) {\n        if (value > this.stream.bitsCount) {\n            return;\n        }\n        this.prevLength = this._length;\n        this._length = value;\n    }\n    get length() {\n        return this._length;\n    }\n    set stream(value) {\n        this._stream = value;\n        this.prevLength = this._length;\n        this._length = value.bitsCount;\n        this.prevStart = this._start;\n        this._start = (this.backward) ? this.length : 0;\n    }\n    get stream() {\n        return this._stream;\n    }\n    getBits(length = null) {\n        if (length === null) {\n            length = 0;\n        }\n        else if (length === 0) {\n            return new _bit_stream__WEBPACK_IMPORTED_MODULE_0__.BitStream();\n        }\n        if ((this.start + length) > this.stream.bitsCount) {\n            length = (this.stream.bitsCount - this.start);\n        }\n        let result;\n        if (this.backward) {\n            result = this.stream.copy(this.start - length, length);\n            this.start -= result.bitsCount;\n        }\n        else {\n            result = this.stream.copy(this.start, length);\n            this.start += result.bitsCount;\n        }\n        return result;\n    }\n    getBitsString(length) {\n        return this.getBits(length).toString();\n    }\n    getBitsReversedValue(length) {\n        const initialValue = this.getBitsString(length);\n        const initialValueLength = initialValue.length;\n        let byteIndex;\n        const initialOffset = 8 - (initialValueLength % 8);\n        const reversedValue = new Array(initialValueLength);\n        const value = new Uint32Array(1);\n        const valueView = new Uint8Array(value.buffer, 0, 4);\n        let i;\n        if (initialValueLength > 32) {\n            return (-1);\n        }\n        if (length == 32) {\n            byteIndex = 3;\n        }\n        else {\n            byteIndex = ((initialValueLength - 1) >> 3);\n        }\n        for (i = 0; i < initialValueLength; i++) {\n            reversedValue[initialValueLength - 1 - i] = initialValue[i];\n        }\n        for (i = initialOffset; i < (initialOffset + initialValueLength); i++) {\n            if (reversedValue[i - initialOffset] == \"1\") {\n                valueView[byteIndex] |= 0x01 << (7 - (i % 8));\n            }\n            if (i && (((i + 1) % 8) == 0)) {\n                byteIndex--;\n            }\n        }\n        return value[0];\n    }\n    toString() {\n        const streamToDisplay = this.stream.copy(this.start, this.length);\n        return streamToDisplay.toString();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL3NlcV9iaXRfc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXlDO0FBQ2xDO0FBQ1AsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3R0FBd0csa0RBQVM7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdCQUF3QjtBQUM1QztBQUNBO0FBQ0EsZ0NBQWdDLDBDQUEwQztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbm9kZV9tb2R1bGVzL2J5dGVzdHJlYW1qcy9idWlsZC9tanMvc2VxX2JpdF9zdHJlYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQml0U3RyZWFtIH0gZnJvbSBcIi4vYml0X3N0cmVhbVwiO1xuZXhwb3J0IGNsYXNzIFNlcUJpdFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSAwO1xuICAgICAgICB0aGlzLnByZXZMZW5ndGggPSAwO1xuICAgICAgICB0aGlzLnByZXZTdGFydCA9IDA7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gKChfYSA9IHBhcmFtZXRlcnMuc3RyZWFtKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2xpY2UoKSkgfHwgbmV3IEJpdFN0cmVhbSgpO1xuICAgICAgICB0aGlzLmFwcGVuZEJsb2NrID0gcGFyYW1ldGVycy5hcHBlbmRCbG9jayB8fCAwO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zdGFydCAmJiBwYXJhbWV0ZXJzLnN0YXJ0ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCA9IHBhcmFtZXRlcnMuc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMubGVuZ3RoICYmIHBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBwYXJhbWV0ZXJzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJhY2t3YXJkID0gcGFyYW1ldGVycy5iYWNrd2FyZCB8fCBmYWxzZTtcbiAgICB9XG4gICAgc2V0IHN0YXJ0KHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA+IHRoaXMuc3RyZWFtLmJpdHNDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xlbmd0aCAtPSAoKHRoaXMuYmFja3dhcmQpID8gKHRoaXMuX3N0YXJ0IC0gdmFsdWUpIDogKHZhbHVlIC0gdGhpcy5fc3RhcnQpKTtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wcmV2U3RhcnQgPSB0aGlzLl9zdGFydDtcbiAgICAgICAgdGhpcy5wcmV2TGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIH1cbiAgICBnZXQgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGFydDtcbiAgICB9XG4gICAgc2V0IGxlbmd0aCh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPiB0aGlzLnN0cmVhbS5iaXRzQ291bnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZXZMZW5ndGggPSB0aGlzLl9sZW5ndGg7XG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xuICAgIH1cbiAgICBzZXQgc3RyZWFtKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3N0cmVhbSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnByZXZMZW5ndGggPSB0aGlzLl9sZW5ndGg7XG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IHZhbHVlLmJpdHNDb3VudDtcbiAgICAgICAgdGhpcy5wcmV2U3RhcnQgPSB0aGlzLl9zdGFydDtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSAodGhpcy5iYWNrd2FyZCkgPyB0aGlzLmxlbmd0aCA6IDA7XG4gICAgfVxuICAgIGdldCBzdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdHJlYW07XG4gICAgfVxuICAgIGdldEJpdHMobGVuZ3RoID0gbnVsbCkge1xuICAgICAgICBpZiAobGVuZ3RoID09PSBudWxsKSB7XG4gICAgICAgICAgICBsZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaXRTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHRoaXMuc3RhcnQgKyBsZW5ndGgpID4gdGhpcy5zdHJlYW0uYml0c0NvdW50KSB7XG4gICAgICAgICAgICBsZW5ndGggPSAodGhpcy5zdHJlYW0uYml0c0NvdW50IC0gdGhpcy5zdGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgaWYgKHRoaXMuYmFja3dhcmQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuc3RyZWFtLmNvcHkodGhpcy5zdGFydCAtIGxlbmd0aCwgbGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgLT0gcmVzdWx0LmJpdHNDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuc3RyZWFtLmNvcHkodGhpcy5zdGFydCwgbGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgKz0gcmVzdWx0LmJpdHNDb3VudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXRCaXRzU3RyaW5nKGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRCaXRzKGxlbmd0aCkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgZ2V0Qml0c1JldmVyc2VkVmFsdWUobGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IHRoaXMuZ2V0Qml0c1N0cmluZyhsZW5ndGgpO1xuICAgICAgICBjb25zdCBpbml0aWFsVmFsdWVMZW5ndGggPSBpbml0aWFsVmFsdWUubGVuZ3RoO1xuICAgICAgICBsZXQgYnl0ZUluZGV4O1xuICAgICAgICBjb25zdCBpbml0aWFsT2Zmc2V0ID0gOCAtIChpbml0aWFsVmFsdWVMZW5ndGggJSA4KTtcbiAgICAgICAgY29uc3QgcmV2ZXJzZWRWYWx1ZSA9IG5ldyBBcnJheShpbml0aWFsVmFsdWVMZW5ndGgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IG5ldyBVaW50MzJBcnJheSgxKTtcbiAgICAgICAgY29uc3QgdmFsdWVWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUuYnVmZmVyLCAwLCA0KTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmIChpbml0aWFsVmFsdWVMZW5ndGggPiAzMikge1xuICAgICAgICAgICAgcmV0dXJuICgtMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA9PSAzMikge1xuICAgICAgICAgICAgYnl0ZUluZGV4ID0gMztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJ5dGVJbmRleCA9ICgoaW5pdGlhbFZhbHVlTGVuZ3RoIC0gMSkgPj4gMyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGluaXRpYWxWYWx1ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXZlcnNlZFZhbHVlW2luaXRpYWxWYWx1ZUxlbmd0aCAtIDEgLSBpXSA9IGluaXRpYWxWYWx1ZVtpXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSBpbml0aWFsT2Zmc2V0OyBpIDwgKGluaXRpYWxPZmZzZXQgKyBpbml0aWFsVmFsdWVMZW5ndGgpOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChyZXZlcnNlZFZhbHVlW2kgLSBpbml0aWFsT2Zmc2V0XSA9PSBcIjFcIikge1xuICAgICAgICAgICAgICAgIHZhbHVlVmlld1tieXRlSW5kZXhdIHw9IDB4MDEgPDwgKDcgLSAoaSAlIDgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpICYmICgoKGkgKyAxKSAlIDgpID09IDApKSB7XG4gICAgICAgICAgICAgICAgYnl0ZUluZGV4LS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlWzBdO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtVG9EaXNwbGF5ID0gdGhpcy5zdHJlYW0uY29weSh0aGlzLnN0YXJ0LCB0aGlzLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBzdHJlYW1Ub0Rpc3BsYXkudG9TdHJpbmcoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/seq_bit_stream.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/seq_stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/bytestreamjs/build/mjs/seq_stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SeqStream: () => (/* binding */ SeqStream)\n/* harmony export */ });\n/* harmony import */ var _byte_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./byte_stream */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/byte_stream.js\");\n\nconst pow2_24 = 16777216;\nclass SeqStream {\n    constructor(parameters = {}) {\n        this._stream = new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream();\n        this._length = 0;\n        this._start = 0;\n        this.backward = false;\n        this.appendBlock = 0;\n        this.prevLength = 0;\n        this.prevStart = 0;\n        if (\"view\" in parameters) {\n            this.stream = new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream({ view: parameters.view });\n        }\n        else if (\"buffer\" in parameters) {\n            this.stream = new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream({ buffer: parameters.buffer });\n        }\n        else if (\"string\" in parameters) {\n            this.stream = new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream({ string: parameters.string });\n        }\n        else if (\"hexstring\" in parameters) {\n            this.stream = new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream({ hexstring: parameters.hexstring });\n        }\n        else if (\"stream\" in parameters) {\n            this.stream = parameters.stream.slice();\n        }\n        else {\n            this.stream = new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream();\n        }\n        if (\"backward\" in parameters && parameters.backward) {\n            this.backward = parameters.backward;\n            this._start = this.stream.length;\n        }\n        if (\"length\" in parameters && parameters.length > 0) {\n            this._length = parameters.length;\n        }\n        if (\"start\" in parameters && parameters.start && parameters.start > 0) {\n            this._start = parameters.start;\n        }\n        if (\"appendBlock\" in parameters && parameters.appendBlock && parameters.appendBlock > 0) {\n            this.appendBlock = parameters.appendBlock;\n        }\n    }\n    set stream(value) {\n        this._stream = value;\n        this.prevLength = this._length;\n        this._length = value.length;\n        this.prevStart = this._start;\n        this._start = 0;\n    }\n    get stream() {\n        return this._stream;\n    }\n    set length(value) {\n        this.prevLength = this._length;\n        this._length = value;\n    }\n    get length() {\n        if (this.appendBlock) {\n            return this.start;\n        }\n        return this._length;\n    }\n    set start(value) {\n        if (value > this.stream.length)\n            return;\n        this.prevStart = this._start;\n        this.prevLength = this._length;\n        this._length -= (this.backward) ? (this._start - value) : (value - this._start);\n        this._start = value;\n    }\n    get start() {\n        return this._start;\n    }\n    get buffer() {\n        return this._stream.buffer.slice(0, this._length);\n    }\n    resetPosition() {\n        this._start = this.prevStart;\n        this._length = this.prevLength;\n    }\n    findPattern(pattern, gap = null) {\n        if ((gap == null) || (gap > this.length)) {\n            gap = this.length;\n        }\n        const result = this.stream.findPattern(pattern, this.start, this.length, this.backward);\n        if (result == (-1))\n            return result;\n        if (this.backward) {\n            if (result < (this.start - pattern.length - gap)) {\n                return (-1);\n            }\n        }\n        else {\n            if (result > (this.start + pattern.length + gap)) {\n                return (-1);\n            }\n        }\n        this.start = result;\n        return result;\n    }\n    findFirstIn(patterns, gap = null) {\n        if ((gap == null) || (gap > this.length)) {\n            gap = this.length;\n        }\n        const result = this.stream.findFirstIn(patterns, this.start, this.length, this.backward);\n        if (result.id == (-1))\n            return result;\n        if (this.backward) {\n            if (result.position < (this.start - patterns[result.id].length - gap)) {\n                return {\n                    id: (-1),\n                    position: (this.backward) ? 0 : (this.start + this.length)\n                };\n            }\n        }\n        else {\n            if (result.position > (this.start + patterns[result.id].length + gap)) {\n                return {\n                    id: (-1),\n                    position: (this.backward) ? 0 : (this.start + this.length)\n                };\n            }\n        }\n        this.start = result.position;\n        return result;\n    }\n    findAllIn(patterns) {\n        const start = (this.backward) ? (this.start - this.length) : this.start;\n        return this.stream.findAllIn(patterns, start, this.length);\n    }\n    findFirstNotIn(patterns, gap = null) {\n        if ((gap == null) || (gap > this._length)) {\n            gap = this._length;\n        }\n        const result = this._stream.findFirstNotIn(patterns, this._start, this._length, this.backward);\n        if ((result.left.id == (-1)) && (result.right.id == (-1))) {\n            return result;\n        }\n        if (this.backward) {\n            if (result.right.id != (-1)) {\n                if (result.right.position < (this._start - patterns[result.right.id].length - gap)) {\n                    return {\n                        left: {\n                            id: (-1),\n                            position: this._start\n                        },\n                        right: {\n                            id: (-1),\n                            position: 0\n                        },\n                        value: new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream()\n                    };\n                }\n            }\n        }\n        else {\n            if (result.left.id != (-1)) {\n                if (result.left.position > (this._start + patterns[result.left.id].length + gap)) {\n                    return {\n                        left: {\n                            id: (-1),\n                            position: this._start\n                        },\n                        right: {\n                            id: (-1),\n                            position: 0\n                        },\n                        value: new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream()\n                    };\n                }\n            }\n        }\n        if (this.backward) {\n            if (result.left.id == (-1)) {\n                this.start = 0;\n            }\n            else {\n                this.start = result.left.position;\n            }\n        }\n        else {\n            if (result.right.id == (-1)) {\n                this.start = (this._start + this._length);\n            }\n            else {\n                this.start = result.right.position;\n            }\n        }\n        return result;\n    }\n    findAllNotIn(patterns) {\n        const start = (this.backward) ? (this._start - this._length) : this._start;\n        return this._stream.findAllNotIn(patterns, start, this._length);\n    }\n    findFirstSequence(patterns, length = null, gap = null) {\n        if ((length == null) || (length > this._length)) {\n            length = this._length;\n        }\n        if ((gap == null) || (gap > length)) {\n            gap = length;\n        }\n        const result = this._stream.findFirstSequence(patterns, this._start, length, this.backward);\n        if (result.value.length == 0) {\n            return result;\n        }\n        if (this.backward) {\n            if (result.position < (this._start - result.value.length - gap)) {\n                return {\n                    position: (-1),\n                    value: new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream()\n                };\n            }\n        }\n        else {\n            if (result.position > (this._start + result.value.length + gap)) {\n                return {\n                    position: (-1),\n                    value: new _byte_stream__WEBPACK_IMPORTED_MODULE_0__.ByteStream()\n                };\n            }\n        }\n        this.start = result.position;\n        return result;\n    }\n    findAllSequences(patterns) {\n        const start = (this.backward) ? (this.start - this.length) : this.start;\n        return this.stream.findAllSequences(patterns, start, this.length);\n    }\n    findPairedPatterns(leftPattern, rightPattern, gap = null) {\n        if ((gap == null) || (gap > this.length)) {\n            gap = this.length;\n        }\n        const start = (this.backward) ? (this.start - this.length) : this.start;\n        const result = this.stream.findPairedPatterns(leftPattern, rightPattern, start, this.length);\n        if (result.length) {\n            if (this.backward) {\n                if (result[0].right < (this.start - rightPattern.length - gap)) {\n                    return [];\n                }\n            }\n            else {\n                if (result[0].left > (this.start + leftPattern.length + gap)) {\n                    return [];\n                }\n            }\n        }\n        return result;\n    }\n    findPairedArrays(leftPatterns, rightPatterns, gap = null) {\n        if ((gap == null) || (gap > this.length)) {\n            gap = this.length;\n        }\n        const start = (this.backward) ? (this.start - this.length) : this.start;\n        const result = this.stream.findPairedArrays(leftPatterns, rightPatterns, start, this.length);\n        if (result.length) {\n            if (this.backward) {\n                if (result[0].right.position < (this.start - rightPatterns[result[0].right.id].length - gap)) {\n                    return [];\n                }\n            }\n            else {\n                if (result[0].left.position > (this.start + leftPatterns[result[0].left.id].length + gap)) {\n                    return [];\n                }\n            }\n        }\n        return result;\n    }\n    replacePattern(searchPattern, replacePattern) {\n        const start = (this.backward) ? (this.start - this.length) : this.start;\n        return this.stream.replacePattern(searchPattern, replacePattern, start, this.length);\n    }\n    skipPatterns(patterns) {\n        const result = this.stream.skipPatterns(patterns, this.start, this.length, this.backward);\n        this.start = result;\n        return result;\n    }\n    skipNotPatterns(patterns) {\n        const result = this.stream.skipNotPatterns(patterns, this.start, this.length, this.backward);\n        if (result == (-1))\n            return (-1);\n        this.start = result;\n        return result;\n    }\n    append(stream) {\n        this.beforeAppend(stream.length);\n        this._stream.view.set(stream.view, this._start);\n        this._length += (stream.length * 2);\n        this.start = (this._start + stream.length);\n        this.prevLength -= (stream.length * 2);\n    }\n    appendView(view) {\n        this.beforeAppend(view.length);\n        this._stream.view.set(view, this._start);\n        this._length += (view.length * 2);\n        this.start = (this._start + view.length);\n        this.prevLength -= (view.length * 2);\n    }\n    appendChar(char) {\n        this.beforeAppend(1);\n        this._stream.view[this._start] = char;\n        this._length += 2;\n        this.start = (this._start + 1);\n        this.prevLength -= 2;\n    }\n    appendUint16(number) {\n        this.beforeAppend(2);\n        const value = new Uint16Array([number]);\n        const view = new Uint8Array(value.buffer);\n        this.stream.view[this._start] = view[1];\n        this._stream.view[this._start + 1] = view[0];\n        this._length += 4;\n        this.start = this._start + 2;\n        this.prevLength -= 4;\n    }\n    appendUint24(number) {\n        this.beforeAppend(3);\n        const value = new Uint32Array([number]);\n        const view = new Uint8Array(value.buffer);\n        this._stream.view[this._start] = view[2];\n        this._stream.view[this._start + 1] = view[1];\n        this._stream.view[this._start + 2] = view[0];\n        this._length += 6;\n        this.start = (this._start + 3);\n        this.prevLength -= 6;\n    }\n    appendUint32(number) {\n        this.beforeAppend(4);\n        const value = new Uint32Array([number]);\n        const view = new Uint8Array(value.buffer);\n        this._stream.view[this._start] = view[3];\n        this._stream.view[this._start + 1] = view[2];\n        this._stream.view[this._start + 2] = view[1];\n        this._stream.view[this._start + 3] = view[0];\n        this._length += 8;\n        this.start = (this._start + 4);\n        this.prevLength -= 8;\n    }\n    appendInt16(number) {\n        this.beforeAppend(2);\n        const value = new Int16Array([number]);\n        const view = new Uint8Array(value.buffer);\n        this._stream.view[this._start] = view[1];\n        this._stream.view[this._start + 1] = view[0];\n        this._length += 4;\n        this.start = (this._start + 2);\n        this.prevLength -= 4;\n    }\n    appendInt32(number) {\n        this.beforeAppend(4);\n        const value = new Int32Array([number]);\n        const view = new Uint8Array(value.buffer);\n        this._stream.view[this._start] = view[3];\n        this._stream.view[this._start + 1] = view[2];\n        this._stream.view[this._start + 2] = view[1];\n        this._stream.view[this._start + 3] = view[0];\n        this._length += 8;\n        this.start = (this._start + 4);\n        this.prevLength -= 8;\n    }\n    getBlock(size, changeLength = true) {\n        if (this._length <= 0) {\n            return new Uint8Array(0);\n        }\n        if (this._length < size) {\n            size = this._length;\n        }\n        let result;\n        if (this.backward) {\n            const view = this._stream.view.subarray(this._length - size, this._length);\n            result = new Uint8Array(size);\n            for (let i = 0; i < size; i++) {\n                result[size - 1 - i] = view[i];\n            }\n        }\n        else {\n            result = this._stream.view.subarray(this._start, this._start + size);\n        }\n        if (changeLength) {\n            this.start += ((this.backward) ? ((-1) * size) : size);\n        }\n        return result;\n    }\n    getUint16(changeLength = true) {\n        const block = this.getBlock(2, changeLength);\n        if (block.length < 2)\n            return 0;\n        return (block[0] << 8) | block[1];\n    }\n    getInt16(changeLength = true) {\n        const num = this.getUint16(changeLength);\n        const negative = 0x8000;\n        if (num & negative) {\n            return -(negative - (num ^ negative));\n        }\n        return num;\n    }\n    getUint24(changeLength = true) {\n        const block = this.getBlock(4, changeLength);\n        if (block.length < 3)\n            return 0;\n        return (block[0] << 16) |\n            (block[1] << 8) |\n            block[2];\n    }\n    getUint32(changeLength = true) {\n        const block = this.getBlock(4, changeLength);\n        if (block.length < 4)\n            return 0;\n        return (block[0] * pow2_24) +\n            (block[1] << 16) +\n            (block[2] << 8) +\n            block[3];\n    }\n    getInt32(changeLength = true) {\n        const num = this.getUint32(changeLength);\n        const negative = 0x80000000;\n        if (num & negative) {\n            return -(negative - (num ^ negative));\n        }\n        return num;\n    }\n    beforeAppend(size) {\n        if ((this._start + size) > this._stream.length) {\n            if (size > this.appendBlock) {\n                this.appendBlock = size + SeqStream.APPEND_BLOCK;\n            }\n            this._stream.realloc(this._stream.length + this.appendBlock);\n        }\n    }\n}\nSeqStream.APPEND_BLOCK = 1000;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL3NlcV9zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkM7QUFDM0M7QUFDTztBQUNQLCtCQUErQjtBQUMvQiwyQkFBMkIsb0RBQVU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQVUsR0FBRyx1QkFBdUI7QUFDbEU7QUFDQTtBQUNBLDhCQUE4QixvREFBVSxHQUFHLDJCQUEyQjtBQUN0RTtBQUNBO0FBQ0EsOEJBQThCLG9EQUFVLEdBQUcsMkJBQTJCO0FBQ3RFO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQVUsR0FBRyxpQ0FBaUM7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvREFBVTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsbUNBQW1DLG9EQUFVO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLG1DQUFtQyxvREFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9EQUFVO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9EQUFVO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9ieXRlc3RyZWFtanMvYnVpbGQvbWpzL3NlcV9zdHJlYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnl0ZVN0cmVhbSB9IGZyb20gXCIuL2J5dGVfc3RyZWFtXCI7XG5jb25zdCBwb3cyXzI0ID0gMTY3NzcyMTY7XG5leHBvcnQgY2xhc3MgU2VxU3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgdGhpcy5fc3RyZWFtID0gbmV3IEJ5dGVTdHJlYW0oKTtcbiAgICAgICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSAwO1xuICAgICAgICB0aGlzLmJhY2t3YXJkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYXBwZW5kQmxvY2sgPSAwO1xuICAgICAgICB0aGlzLnByZXZMZW5ndGggPSAwO1xuICAgICAgICB0aGlzLnByZXZTdGFydCA9IDA7XG4gICAgICAgIGlmIChcInZpZXdcIiBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnN0cmVhbSA9IG5ldyBCeXRlU3RyZWFtKHsgdmlldzogcGFyYW1ldGVycy52aWV3IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFwiYnVmZmVyXCIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5zdHJlYW0gPSBuZXcgQnl0ZVN0cmVhbSh7IGJ1ZmZlcjogcGFyYW1ldGVycy5idWZmZXIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXCJzdHJpbmdcIiBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnN0cmVhbSA9IG5ldyBCeXRlU3RyZWFtKHsgc3RyaW5nOiBwYXJhbWV0ZXJzLnN0cmluZyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChcImhleHN0cmluZ1wiIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuc3RyZWFtID0gbmV3IEJ5dGVTdHJlYW0oeyBoZXhzdHJpbmc6IHBhcmFtZXRlcnMuaGV4c3RyaW5nIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFwic3RyZWFtXCIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5zdHJlYW0gPSBwYXJhbWV0ZXJzLnN0cmVhbS5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdHJlYW0gPSBuZXcgQnl0ZVN0cmVhbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImJhY2t3YXJkXCIgaW4gcGFyYW1ldGVycyAmJiBwYXJhbWV0ZXJzLmJhY2t3YXJkKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2t3YXJkID0gcGFyYW1ldGVycy5iYWNrd2FyZDtcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0ID0gdGhpcy5zdHJlYW0ubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImxlbmd0aFwiIGluIHBhcmFtZXRlcnMgJiYgcGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9sZW5ndGggPSBwYXJhbWV0ZXJzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJzdGFydFwiIGluIHBhcmFtZXRlcnMgJiYgcGFyYW1ldGVycy5zdGFydCAmJiBwYXJhbWV0ZXJzLnN0YXJ0ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fc3RhcnQgPSBwYXJhbWV0ZXJzLnN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImFwcGVuZEJsb2NrXCIgaW4gcGFyYW1ldGVycyAmJiBwYXJhbWV0ZXJzLmFwcGVuZEJsb2NrICYmIHBhcmFtZXRlcnMuYXBwZW5kQmxvY2sgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZEJsb2NrID0gcGFyYW1ldGVycy5hcHBlbmRCbG9jaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXQgc3RyZWFtKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3N0cmVhbSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnByZXZMZW5ndGggPSB0aGlzLl9sZW5ndGg7XG4gICAgICAgIHRoaXMuX2xlbmd0aCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgdGhpcy5wcmV2U3RhcnQgPSB0aGlzLl9zdGFydDtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSAwO1xuICAgIH1cbiAgICBnZXQgc3RyZWFtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RyZWFtO1xuICAgIH1cbiAgICBzZXQgbGVuZ3RoKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJldkxlbmd0aCA9IHRoaXMuX2xlbmd0aDtcbiAgICAgICAgdGhpcy5fbGVuZ3RoID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIGlmICh0aGlzLmFwcGVuZEJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xuICAgIH1cbiAgICBzZXQgc3RhcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID4gdGhpcy5zdHJlYW0ubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnByZXZTdGFydCA9IHRoaXMuX3N0YXJ0O1xuICAgICAgICB0aGlzLnByZXZMZW5ndGggPSB0aGlzLl9sZW5ndGg7XG4gICAgICAgIHRoaXMuX2xlbmd0aCAtPSAodGhpcy5iYWNrd2FyZCkgPyAodGhpcy5fc3RhcnQgLSB2YWx1ZSkgOiAodmFsdWUgLSB0aGlzLl9zdGFydCk7XG4gICAgICAgIHRoaXMuX3N0YXJ0ID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0O1xuICAgIH1cbiAgICBnZXQgYnVmZmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RyZWFtLmJ1ZmZlci5zbGljZSgwLCB0aGlzLl9sZW5ndGgpO1xuICAgIH1cbiAgICByZXNldFBvc2l0aW9uKCkge1xuICAgICAgICB0aGlzLl9zdGFydCA9IHRoaXMucHJldlN0YXJ0O1xuICAgICAgICB0aGlzLl9sZW5ndGggPSB0aGlzLnByZXZMZW5ndGg7XG4gICAgfVxuICAgIGZpbmRQYXR0ZXJuKHBhdHRlcm4sIGdhcCA9IG51bGwpIHtcbiAgICAgICAgaWYgKChnYXAgPT0gbnVsbCkgfHwgKGdhcCA+IHRoaXMubGVuZ3RoKSkge1xuICAgICAgICAgICAgZ2FwID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zdHJlYW0uZmluZFBhdHRlcm4ocGF0dGVybiwgdGhpcy5zdGFydCwgdGhpcy5sZW5ndGgsIHRoaXMuYmFja3dhcmQpO1xuICAgICAgICBpZiAocmVzdWx0ID09ICgtMSkpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICBpZiAodGhpcy5iYWNrd2FyZCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA8ICh0aGlzLnN0YXJ0IC0gcGF0dGVybi5sZW5ndGggLSBnYXApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID4gKHRoaXMuc3RhcnQgKyBwYXR0ZXJuLmxlbmd0aCArIGdhcCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXJ0ID0gcmVzdWx0O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmaW5kRmlyc3RJbihwYXR0ZXJucywgZ2FwID0gbnVsbCkge1xuICAgICAgICBpZiAoKGdhcCA9PSBudWxsKSB8fCAoZ2FwID4gdGhpcy5sZW5ndGgpKSB7XG4gICAgICAgICAgICBnYXAgPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnN0cmVhbS5maW5kRmlyc3RJbihwYXR0ZXJucywgdGhpcy5zdGFydCwgdGhpcy5sZW5ndGgsIHRoaXMuYmFja3dhcmQpO1xuICAgICAgICBpZiAocmVzdWx0LmlkID09ICgtMSkpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICBpZiAodGhpcy5iYWNrd2FyZCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5wb3NpdGlvbiA8ICh0aGlzLnN0YXJ0IC0gcGF0dGVybnNbcmVzdWx0LmlkXS5sZW5ndGggLSBnYXApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICgtMSksXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAodGhpcy5iYWNrd2FyZCkgPyAwIDogKHRoaXMuc3RhcnQgKyB0aGlzLmxlbmd0aClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5wb3NpdGlvbiA+ICh0aGlzLnN0YXJ0ICsgcGF0dGVybnNbcmVzdWx0LmlkXS5sZW5ndGggKyBnYXApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICgtMSksXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAodGhpcy5iYWNrd2FyZCkgPyAwIDogKHRoaXMuc3RhcnQgKyB0aGlzLmxlbmd0aClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhcnQgPSByZXN1bHQucG9zaXRpb247XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZpbmRBbGxJbihwYXR0ZXJucykge1xuICAgICAgICBjb25zdCBzdGFydCA9ICh0aGlzLmJhY2t3YXJkKSA/ICh0aGlzLnN0YXJ0IC0gdGhpcy5sZW5ndGgpIDogdGhpcy5zdGFydDtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLmZpbmRBbGxJbihwYXR0ZXJucywgc3RhcnQsIHRoaXMubGVuZ3RoKTtcbiAgICB9XG4gICAgZmluZEZpcnN0Tm90SW4ocGF0dGVybnMsIGdhcCA9IG51bGwpIHtcbiAgICAgICAgaWYgKChnYXAgPT0gbnVsbCkgfHwgKGdhcCA+IHRoaXMuX2xlbmd0aCkpIHtcbiAgICAgICAgICAgIGdhcCA9IHRoaXMuX2xlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9zdHJlYW0uZmluZEZpcnN0Tm90SW4ocGF0dGVybnMsIHRoaXMuX3N0YXJ0LCB0aGlzLl9sZW5ndGgsIHRoaXMuYmFja3dhcmQpO1xuICAgICAgICBpZiAoKHJlc3VsdC5sZWZ0LmlkID09ICgtMSkpICYmIChyZXN1bHQucmlnaHQuaWQgPT0gKC0xKSkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYmFja3dhcmQpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQucmlnaHQuaWQgIT0gKC0xKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmlnaHQucG9zaXRpb24gPCAodGhpcy5fc3RhcnQgLSBwYXR0ZXJuc1tyZXN1bHQucmlnaHQuaWRdLmxlbmd0aCAtIGdhcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogKC0xKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5fc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAoLTEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBCeXRlU3RyZWFtKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmxlZnQuaWQgIT0gKC0xKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVmdC5wb3NpdGlvbiA+ICh0aGlzLl9zdGFydCArIHBhdHRlcm5zW3Jlc3VsdC5sZWZ0LmlkXS5sZW5ndGggKyBnYXApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICgtMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHRoaXMuX3N0YXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogKC0xKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgQnl0ZVN0cmVhbSgpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJhY2t3YXJkKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmxlZnQuaWQgPT0gKC0xKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IHJlc3VsdC5sZWZ0LnBvc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5yaWdodC5pZCA9PSAoLTEpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9ICh0aGlzLl9zdGFydCArIHRoaXMuX2xlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gcmVzdWx0LnJpZ2h0LnBvc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZpbmRBbGxOb3RJbihwYXR0ZXJucykge1xuICAgICAgICBjb25zdCBzdGFydCA9ICh0aGlzLmJhY2t3YXJkKSA/ICh0aGlzLl9zdGFydCAtIHRoaXMuX2xlbmd0aCkgOiB0aGlzLl9zdGFydDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0cmVhbS5maW5kQWxsTm90SW4ocGF0dGVybnMsIHN0YXJ0LCB0aGlzLl9sZW5ndGgpO1xuICAgIH1cbiAgICBmaW5kRmlyc3RTZXF1ZW5jZShwYXR0ZXJucywgbGVuZ3RoID0gbnVsbCwgZ2FwID0gbnVsbCkge1xuICAgICAgICBpZiAoKGxlbmd0aCA9PSBudWxsKSB8fCAobGVuZ3RoID4gdGhpcy5fbGVuZ3RoKSkge1xuICAgICAgICAgICAgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoZ2FwID09IG51bGwpIHx8IChnYXAgPiBsZW5ndGgpKSB7XG4gICAgICAgICAgICBnYXAgPSBsZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fc3RyZWFtLmZpbmRGaXJzdFNlcXVlbmNlKHBhdHRlcm5zLCB0aGlzLl9zdGFydCwgbGVuZ3RoLCB0aGlzLmJhY2t3YXJkKTtcbiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5iYWNrd2FyZCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5wb3NpdGlvbiA8ICh0aGlzLl9zdGFydCAtIHJlc3VsdC52YWx1ZS5sZW5ndGggLSBnYXApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICgtMSksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgQnl0ZVN0cmVhbSgpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQucG9zaXRpb24gPiAodGhpcy5fc3RhcnQgKyByZXN1bHQudmFsdWUubGVuZ3RoICsgZ2FwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAoLTEpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IEJ5dGVTdHJlYW0oKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGFydCA9IHJlc3VsdC5wb3NpdGlvbjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZmluZEFsbFNlcXVlbmNlcyhwYXR0ZXJucykge1xuICAgICAgICBjb25zdCBzdGFydCA9ICh0aGlzLmJhY2t3YXJkKSA/ICh0aGlzLnN0YXJ0IC0gdGhpcy5sZW5ndGgpIDogdGhpcy5zdGFydDtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLmZpbmRBbGxTZXF1ZW5jZXMocGF0dGVybnMsIHN0YXJ0LCB0aGlzLmxlbmd0aCk7XG4gICAgfVxuICAgIGZpbmRQYWlyZWRQYXR0ZXJucyhsZWZ0UGF0dGVybiwgcmlnaHRQYXR0ZXJuLCBnYXAgPSBudWxsKSB7XG4gICAgICAgIGlmICgoZ2FwID09IG51bGwpIHx8IChnYXAgPiB0aGlzLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIGdhcCA9IHRoaXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gKHRoaXMuYmFja3dhcmQpID8gKHRoaXMuc3RhcnQgLSB0aGlzLmxlbmd0aCkgOiB0aGlzLnN0YXJ0O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnN0cmVhbS5maW5kUGFpcmVkUGF0dGVybnMobGVmdFBhdHRlcm4sIHJpZ2h0UGF0dGVybiwgc3RhcnQsIHRoaXMubGVuZ3RoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJhY2t3YXJkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFswXS5yaWdodCA8ICh0aGlzLnN0YXJ0IC0gcmlnaHRQYXR0ZXJuLmxlbmd0aCAtIGdhcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbMF0ubGVmdCA+ICh0aGlzLnN0YXJ0ICsgbGVmdFBhdHRlcm4ubGVuZ3RoICsgZ2FwKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZpbmRQYWlyZWRBcnJheXMobGVmdFBhdHRlcm5zLCByaWdodFBhdHRlcm5zLCBnYXAgPSBudWxsKSB7XG4gICAgICAgIGlmICgoZ2FwID09IG51bGwpIHx8IChnYXAgPiB0aGlzLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIGdhcCA9IHRoaXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gKHRoaXMuYmFja3dhcmQpID8gKHRoaXMuc3RhcnQgLSB0aGlzLmxlbmd0aCkgOiB0aGlzLnN0YXJ0O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnN0cmVhbS5maW5kUGFpcmVkQXJyYXlzKGxlZnRQYXR0ZXJucywgcmlnaHRQYXR0ZXJucywgc3RhcnQsIHRoaXMubGVuZ3RoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJhY2t3YXJkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFswXS5yaWdodC5wb3NpdGlvbiA8ICh0aGlzLnN0YXJ0IC0gcmlnaHRQYXR0ZXJuc1tyZXN1bHRbMF0ucmlnaHQuaWRdLmxlbmd0aCAtIGdhcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbMF0ubGVmdC5wb3NpdGlvbiA+ICh0aGlzLnN0YXJ0ICsgbGVmdFBhdHRlcm5zW3Jlc3VsdFswXS5sZWZ0LmlkXS5sZW5ndGggKyBnYXApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmVwbGFjZVBhdHRlcm4oc2VhcmNoUGF0dGVybiwgcmVwbGFjZVBhdHRlcm4pIHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSAodGhpcy5iYWNrd2FyZCkgPyAodGhpcy5zdGFydCAtIHRoaXMubGVuZ3RoKSA6IHRoaXMuc3RhcnQ7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmVhbS5yZXBsYWNlUGF0dGVybihzZWFyY2hQYXR0ZXJuLCByZXBsYWNlUGF0dGVybiwgc3RhcnQsIHRoaXMubGVuZ3RoKTtcbiAgICB9XG4gICAgc2tpcFBhdHRlcm5zKHBhdHRlcm5zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc3RyZWFtLnNraXBQYXR0ZXJucyhwYXR0ZXJucywgdGhpcy5zdGFydCwgdGhpcy5sZW5ndGgsIHRoaXMuYmFja3dhcmQpO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gcmVzdWx0O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBza2lwTm90UGF0dGVybnMocGF0dGVybnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zdHJlYW0uc2tpcE5vdFBhdHRlcm5zKHBhdHRlcm5zLCB0aGlzLnN0YXJ0LCB0aGlzLmxlbmd0aCwgdGhpcy5iYWNrd2FyZCk7XG4gICAgICAgIGlmIChyZXN1bHQgPT0gKC0xKSlcbiAgICAgICAgICAgIHJldHVybiAoLTEpO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gcmVzdWx0O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhcHBlbmQoc3RyZWFtKSB7XG4gICAgICAgIHRoaXMuYmVmb3JlQXBwZW5kKHN0cmVhbS5sZW5ndGgpO1xuICAgICAgICB0aGlzLl9zdHJlYW0udmlldy5zZXQoc3RyZWFtLnZpZXcsIHRoaXMuX3N0YXJ0KTtcbiAgICAgICAgdGhpcy5fbGVuZ3RoICs9IChzdHJlYW0ubGVuZ3RoICogMik7XG4gICAgICAgIHRoaXMuc3RhcnQgPSAodGhpcy5fc3RhcnQgKyBzdHJlYW0ubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5wcmV2TGVuZ3RoIC09IChzdHJlYW0ubGVuZ3RoICogMik7XG4gICAgfVxuICAgIGFwcGVuZFZpZXcodmlldykge1xuICAgICAgICB0aGlzLmJlZm9yZUFwcGVuZCh2aWV3Lmxlbmd0aCk7XG4gICAgICAgIHRoaXMuX3N0cmVhbS52aWV3LnNldCh2aWV3LCB0aGlzLl9zdGFydCk7XG4gICAgICAgIHRoaXMuX2xlbmd0aCArPSAodmlldy5sZW5ndGggKiAyKTtcbiAgICAgICAgdGhpcy5zdGFydCA9ICh0aGlzLl9zdGFydCArIHZpZXcubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5wcmV2TGVuZ3RoIC09ICh2aWV3Lmxlbmd0aCAqIDIpO1xuICAgIH1cbiAgICBhcHBlbmRDaGFyKGNoYXIpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVBcHBlbmQoMSk7XG4gICAgICAgIHRoaXMuX3N0cmVhbS52aWV3W3RoaXMuX3N0YXJ0XSA9IGNoYXI7XG4gICAgICAgIHRoaXMuX2xlbmd0aCArPSAyO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gKHRoaXMuX3N0YXJ0ICsgMSk7XG4gICAgICAgIHRoaXMucHJldkxlbmd0aCAtPSAyO1xuICAgIH1cbiAgICBhcHBlbmRVaW50MTYobnVtYmVyKSB7XG4gICAgICAgIHRoaXMuYmVmb3JlQXBwZW5kKDIpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IG5ldyBVaW50MTZBcnJheShbbnVtYmVyXSk7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICB0aGlzLnN0cmVhbS52aWV3W3RoaXMuX3N0YXJ0XSA9IHZpZXdbMV07XG4gICAgICAgIHRoaXMuX3N0cmVhbS52aWV3W3RoaXMuX3N0YXJ0ICsgMV0gPSB2aWV3WzBdO1xuICAgICAgICB0aGlzLl9sZW5ndGggKz0gNDtcbiAgICAgICAgdGhpcy5zdGFydCA9IHRoaXMuX3N0YXJ0ICsgMjtcbiAgICAgICAgdGhpcy5wcmV2TGVuZ3RoIC09IDQ7XG4gICAgfVxuICAgIGFwcGVuZFVpbnQyNChudW1iZXIpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVBcHBlbmQoMyk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IFVpbnQzMkFycmF5KFtudW1iZXJdKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgIHRoaXMuX3N0cmVhbS52aWV3W3RoaXMuX3N0YXJ0XSA9IHZpZXdbMl07XG4gICAgICAgIHRoaXMuX3N0cmVhbS52aWV3W3RoaXMuX3N0YXJ0ICsgMV0gPSB2aWV3WzFdO1xuICAgICAgICB0aGlzLl9zdHJlYW0udmlld1t0aGlzLl9zdGFydCArIDJdID0gdmlld1swXTtcbiAgICAgICAgdGhpcy5fbGVuZ3RoICs9IDY7XG4gICAgICAgIHRoaXMuc3RhcnQgPSAodGhpcy5fc3RhcnQgKyAzKTtcbiAgICAgICAgdGhpcy5wcmV2TGVuZ3RoIC09IDY7XG4gICAgfVxuICAgIGFwcGVuZFVpbnQzMihudW1iZXIpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVBcHBlbmQoNCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IFVpbnQzMkFycmF5KFtudW1iZXJdKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgIHRoaXMuX3N0cmVhbS52aWV3W3RoaXMuX3N0YXJ0XSA9IHZpZXdbM107XG4gICAgICAgIHRoaXMuX3N0cmVhbS52aWV3W3RoaXMuX3N0YXJ0ICsgMV0gPSB2aWV3WzJdO1xuICAgICAgICB0aGlzLl9zdHJlYW0udmlld1t0aGlzLl9zdGFydCArIDJdID0gdmlld1sxXTtcbiAgICAgICAgdGhpcy5fc3RyZWFtLnZpZXdbdGhpcy5fc3RhcnQgKyAzXSA9IHZpZXdbMF07XG4gICAgICAgIHRoaXMuX2xlbmd0aCArPSA4O1xuICAgICAgICB0aGlzLnN0YXJ0ID0gKHRoaXMuX3N0YXJ0ICsgNCk7XG4gICAgICAgIHRoaXMucHJldkxlbmd0aCAtPSA4O1xuICAgIH1cbiAgICBhcHBlbmRJbnQxNihudW1iZXIpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVBcHBlbmQoMik7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IEludDE2QXJyYXkoW251bWJlcl0pO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgdGhpcy5fc3RyZWFtLnZpZXdbdGhpcy5fc3RhcnRdID0gdmlld1sxXTtcbiAgICAgICAgdGhpcy5fc3RyZWFtLnZpZXdbdGhpcy5fc3RhcnQgKyAxXSA9IHZpZXdbMF07XG4gICAgICAgIHRoaXMuX2xlbmd0aCArPSA0O1xuICAgICAgICB0aGlzLnN0YXJ0ID0gKHRoaXMuX3N0YXJ0ICsgMik7XG4gICAgICAgIHRoaXMucHJldkxlbmd0aCAtPSA0O1xuICAgIH1cbiAgICBhcHBlbmRJbnQzMihudW1iZXIpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVBcHBlbmQoNCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IEludDMyQXJyYXkoW251bWJlcl0pO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgdGhpcy5fc3RyZWFtLnZpZXdbdGhpcy5fc3RhcnRdID0gdmlld1szXTtcbiAgICAgICAgdGhpcy5fc3RyZWFtLnZpZXdbdGhpcy5fc3RhcnQgKyAxXSA9IHZpZXdbMl07XG4gICAgICAgIHRoaXMuX3N0cmVhbS52aWV3W3RoaXMuX3N0YXJ0ICsgMl0gPSB2aWV3WzFdO1xuICAgICAgICB0aGlzLl9zdHJlYW0udmlld1t0aGlzLl9zdGFydCArIDNdID0gdmlld1swXTtcbiAgICAgICAgdGhpcy5fbGVuZ3RoICs9IDg7XG4gICAgICAgIHRoaXMuc3RhcnQgPSAodGhpcy5fc3RhcnQgKyA0KTtcbiAgICAgICAgdGhpcy5wcmV2TGVuZ3RoIC09IDg7XG4gICAgfVxuICAgIGdldEJsb2NrKHNpemUsIGNoYW5nZUxlbmd0aCA9IHRydWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2xlbmd0aCA8IHNpemUpIHtcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLl9sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgaWYgKHRoaXMuYmFja3dhcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLl9zdHJlYW0udmlldy5zdWJhcnJheSh0aGlzLl9sZW5ndGggLSBzaXplLCB0aGlzLl9sZW5ndGgpO1xuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtzaXplIC0gMSAtIGldID0gdmlld1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3N0cmVhbS52aWV3LnN1YmFycmF5KHRoaXMuX3N0YXJ0LCB0aGlzLl9zdGFydCArIHNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VMZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgKz0gKCh0aGlzLmJhY2t3YXJkKSA/ICgoLTEpICogc2l6ZSkgOiBzaXplKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXRVaW50MTYoY2hhbmdlTGVuZ3RoID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBibG9jayA9IHRoaXMuZ2V0QmxvY2soMiwgY2hhbmdlTGVuZ3RoKTtcbiAgICAgICAgaWYgKGJsb2NrLmxlbmd0aCA8IDIpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgcmV0dXJuIChibG9ja1swXSA8PCA4KSB8IGJsb2NrWzFdO1xuICAgIH1cbiAgICBnZXRJbnQxNihjaGFuZ2VMZW5ndGggPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IG51bSA9IHRoaXMuZ2V0VWludDE2KGNoYW5nZUxlbmd0aCk7XG4gICAgICAgIGNvbnN0IG5lZ2F0aXZlID0gMHg4MDAwO1xuICAgICAgICBpZiAobnVtICYgbmVnYXRpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiAtKG5lZ2F0aXZlIC0gKG51bSBeIG5lZ2F0aXZlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bTtcbiAgICB9XG4gICAgZ2V0VWludDI0KGNoYW5nZUxlbmd0aCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgYmxvY2sgPSB0aGlzLmdldEJsb2NrKDQsIGNoYW5nZUxlbmd0aCk7XG4gICAgICAgIGlmIChibG9jay5sZW5ndGggPCAzKVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIHJldHVybiAoYmxvY2tbMF0gPDwgMTYpIHxcbiAgICAgICAgICAgIChibG9ja1sxXSA8PCA4KSB8XG4gICAgICAgICAgICBibG9ja1syXTtcbiAgICB9XG4gICAgZ2V0VWludDMyKGNoYW5nZUxlbmd0aCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgYmxvY2sgPSB0aGlzLmdldEJsb2NrKDQsIGNoYW5nZUxlbmd0aCk7XG4gICAgICAgIGlmIChibG9jay5sZW5ndGggPCA0KVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIHJldHVybiAoYmxvY2tbMF0gKiBwb3cyXzI0KSArXG4gICAgICAgICAgICAoYmxvY2tbMV0gPDwgMTYpICtcbiAgICAgICAgICAgIChibG9ja1syXSA8PCA4KSArXG4gICAgICAgICAgICBibG9ja1szXTtcbiAgICB9XG4gICAgZ2V0SW50MzIoY2hhbmdlTGVuZ3RoID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBudW0gPSB0aGlzLmdldFVpbnQzMihjaGFuZ2VMZW5ndGgpO1xuICAgICAgICBjb25zdCBuZWdhdGl2ZSA9IDB4ODAwMDAwMDA7XG4gICAgICAgIGlmIChudW0gJiBuZWdhdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuIC0obmVnYXRpdmUgLSAobnVtIF4gbmVnYXRpdmUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVtO1xuICAgIH1cbiAgICBiZWZvcmVBcHBlbmQoc2l6ZSkge1xuICAgICAgICBpZiAoKHRoaXMuX3N0YXJ0ICsgc2l6ZSkgPiB0aGlzLl9zdHJlYW0ubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoc2l6ZSA+IHRoaXMuYXBwZW5kQmxvY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEJsb2NrID0gc2l6ZSArIFNlcVN0cmVhbS5BUFBFTkRfQkxPQ0s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zdHJlYW0ucmVhbGxvYyh0aGlzLl9zdHJlYW0ubGVuZ3RoICsgdGhpcy5hcHBlbmRCbG9jayk7XG4gICAgICAgIH1cbiAgICB9XG59XG5TZXFTdHJlYW0uQVBQRU5EX0JMT0NLID0gMTAwMDtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/seq_stream.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/goober/dist/goober.modern.js":
/*!***************************************************!*\
  !*** ./node_modules/goober/dist/goober.modern.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   css: () => (/* binding */ u),\n/* harmony export */   extractCss: () => (/* binding */ r),\n/* harmony export */   glob: () => (/* binding */ b),\n/* harmony export */   keyframes: () => (/* binding */ h),\n/* harmony export */   setup: () => (/* binding */ m),\n/* harmony export */   styled: () => (/* binding */ w)\n/* harmony export */ });\nlet e={data:\"\"},t=t=>{if(\"object\"==typeof window){let e=(t?t.querySelector(\"#_goober\"):window._goober)||Object.assign(document.createElement(\"style\"),{innerHTML:\" \",id:\"_goober\"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||e},r=e=>{let r=t(e),l=r.data;return r.data=\"\",l},l=/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g,a=/\\/\\*[^]*?\\*\\/|  +/g,n=/\\n+/g,o=(e,t)=>{let r=\"\",l=\"\",a=\"\";for(let n in e){let c=e[n];\"@\"==n[0]?\"i\"==n[1]?r=n+\" \"+c+\";\":l+=\"f\"==n[1]?o(c,n):n+\"{\"+o(c,\"k\"==n[1]?\"\":t)+\"}\":\"object\"==typeof c?l+=o(c,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\\S+\\([^)]*\\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+\" \"+t:t)):n):null!=c&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,\"-$&\").toLowerCase(),a+=o.p?o.p(n,c):n+\":\"+c+\";\")}return r+(t&&a?t+\"{\"+a+\"}\":a)+l},c={},s=e=>{if(\"object\"==typeof e){let t=\"\";for(let r in e)t+=r+s(e[r]);return t}return e},i=(e,t,r,i,p)=>{let u=s(e),d=c[u]||(c[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return\"go\"+r})(u));if(!c[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(a,\"\"));)t[4]?o.shift():t[3]?(r=t[3].replace(n,\" \").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(n,\" \").trim();return o[0]})(e);c[d]=o(p?{[\"@keyframes \"+d]:t}:t,r?\"\":\".\"+d)}let f=r&&c.g?c.g:null;return r&&(c.g=c[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[d],t,i,f),d},p=(e,t,r)=>e.reduce((e,l,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?\".\"+t:e&&\"object\"==typeof e?e.props?\"\":o(e,\"\"):!1===e?\"\":e}return e+l+(null==n?\"\":n)},\"\");function u(e){let r=this||{},l=e.call?e(r.p):e;return i(l.unshift?l.raw?p(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}let d,f,g,b=u.bind({g:1}),h=u.bind({k:1});function m(e,t,r,l){o.p=t,d=e,f=r,g=l}function w(e,t){let r=this||{};return function(){let l=arguments;function a(n,o){let c=Object.assign({},n),s=c.className||a.className;r.p=Object.assign({theme:f&&f()},c),r.o=/ *go\\d+/.test(s),c.className=u.apply(r,l)+(s?\" \"+s:\"\"),t&&(c.ref=o);let i=e;return e[0]&&(i=c.as||e,delete c.as),g&&i[0]&&g(c),d(i,c)}return t?t(a):a}}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9nb29iZXIvZGlzdC9nb29iZXIubW9kZXJuLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLE9BQU8sUUFBUSxPQUFPLDRCQUE0QixxR0FBcUcsMkJBQTJCLEVBQUUsNkZBQTZGLFlBQVksT0FBTyxvQkFBb0IsbUJBQW1CLHlDQUF5QyxLQUFLLE9BQU8sT0FBTyxJQUFJLGlEQUFpRCxtQkFBbUIsZ0JBQWdCLFdBQVcsZ0NBQWdDLDBCQUEwQix3QkFBd0IsZ1BBQWdQLEdBQUcsbUJBQW1CLE1BQU0sT0FBTyxLQUFLLE9BQU8sdUJBQXVCLFNBQVMsNEJBQTRCLFNBQVMsU0FBUyxpQkFBaUIsOEJBQThCLGFBQWEsS0FBSyxXQUFXLCtCQUErQixhQUFhLE1BQU0sVUFBVSxtQkFBbUIsYUFBYSxFQUFFLEtBQUssMEJBQTBCLGdGQUFnRix5Q0FBeUMsWUFBWSxLQUFLLFVBQVUsb0JBQW9CLGVBQWUsc0JBQXNCLGtDQUFrQyxrRkFBa0YsZ0JBQWdCLCtCQUErQixXQUFXLGNBQWMsNkRBQTZELCtEQUErRCwwQkFBMEIsS0FBSyxjQUFjLGNBQWMsbUJBQW1CLG1IQUFtSCw2QkFBNkIsb0JBQW9CLElBQUksWUFBWSxJQUFJLEVBQUUsb0JBQW9CLGtCQUFrQixnQkFBZ0IsZUFBZSxrQkFBa0IsZ0JBQWdCLGdCQUFnQixzQkFBc0IsK0JBQStCLG1CQUFtQixhQUFhLDZFQUE2RSxRQUFRLDBEQUEwRCxpQkFBa0ciLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvZ29vYmVyL2Rpc3QvZ29vYmVyLm1vZGVybi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgZT17ZGF0YTpcIlwifSx0PXQ9PntpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93KXtsZXQgZT0odD90LnF1ZXJ5U2VsZWN0b3IoXCIjX2dvb2JlclwiKTp3aW5kb3cuX2dvb2Jlcil8fE9iamVjdC5hc3NpZ24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLHtpbm5lckhUTUw6XCIgXCIsaWQ6XCJfZ29vYmVyXCJ9KTtyZXR1cm4gZS5ub25jZT13aW5kb3cuX19ub25jZV9fLGUucGFyZW50Tm9kZXx8KHR8fGRvY3VtZW50LmhlYWQpLmFwcGVuZENoaWxkKGUpLGUuZmlyc3RDaGlsZH1yZXR1cm4gdHx8ZX0scj1lPT57bGV0IHI9dChlKSxsPXIuZGF0YTtyZXR1cm4gci5kYXRhPVwiXCIsbH0sbD0vKD86KFtcXHUwMDgwLVxcdUZGRkZcXHctJUBdKykgKjo/ICooW157O10rPyk7fChbXjt9e10qPykgKnspfCh9XFxzKikvZyxhPS9cXC9cXCpbXl0qP1xcKlxcL3wgICsvZyxuPS9cXG4rL2csbz0oZSx0KT0+e2xldCByPVwiXCIsbD1cIlwiLGE9XCJcIjtmb3IobGV0IG4gaW4gZSl7bGV0IGM9ZVtuXTtcIkBcIj09blswXT9cImlcIj09blsxXT9yPW4rXCIgXCIrYytcIjtcIjpsKz1cImZcIj09blsxXT9vKGMsbik6bitcIntcIitvKGMsXCJrXCI9PW5bMV0/XCJcIjp0KStcIn1cIjpcIm9iamVjdFwiPT10eXBlb2YgYz9sKz1vKGMsdD90LnJlcGxhY2UoLyhbXixdKSsvZyxlPT5uLnJlcGxhY2UoLyhbXixdKjpcXFMrXFwoW14pXSpcXCkpfChbXixdKSsvZyx0PT4vJi8udGVzdCh0KT90LnJlcGxhY2UoLyYvZyxlKTplP2UrXCIgXCIrdDp0KSk6bik6bnVsbCE9YyYmKG49L14tLS8udGVzdChuKT9uOm4ucmVwbGFjZSgvW0EtWl0vZyxcIi0kJlwiKS50b0xvd2VyQ2FzZSgpLGErPW8ucD9vLnAobixjKTpuK1wiOlwiK2MrXCI7XCIpfXJldHVybiByKyh0JiZhP3QrXCJ7XCIrYStcIn1cIjphKStsfSxjPXt9LHM9ZT0+e2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlKXtsZXQgdD1cIlwiO2ZvcihsZXQgciBpbiBlKXQrPXIrcyhlW3JdKTtyZXR1cm4gdH1yZXR1cm4gZX0saT0oZSx0LHIsaSxwKT0+e2xldCB1PXMoZSksZD1jW3VdfHwoY1t1XT0oZT0+e2xldCB0PTAscj0xMTtmb3IoO3Q8ZS5sZW5ndGg7KXI9MTAxKnIrZS5jaGFyQ29kZUF0KHQrKyk+Pj4wO3JldHVyblwiZ29cIityfSkodSkpO2lmKCFjW2RdKXtsZXQgdD11IT09ZT9lOihlPT57bGV0IHQscixvPVt7fV07Zm9yKDt0PWwuZXhlYyhlLnJlcGxhY2UoYSxcIlwiKSk7KXRbNF0/by5zaGlmdCgpOnRbM10/KHI9dFszXS5yZXBsYWNlKG4sXCIgXCIpLnRyaW0oKSxvLnVuc2hpZnQob1swXVtyXT1vWzBdW3JdfHx7fSkpOm9bMF1bdFsxXV09dFsyXS5yZXBsYWNlKG4sXCIgXCIpLnRyaW0oKTtyZXR1cm4gb1swXX0pKGUpO2NbZF09byhwP3tbXCJAa2V5ZnJhbWVzIFwiK2RdOnR9OnQscj9cIlwiOlwiLlwiK2QpfWxldCBmPXImJmMuZz9jLmc6bnVsbDtyZXR1cm4gciYmKGMuZz1jW2RdKSwoKGUsdCxyLGwpPT57bD90LmRhdGE9dC5kYXRhLnJlcGxhY2UobCxlKTotMT09PXQuZGF0YS5pbmRleE9mKGUpJiYodC5kYXRhPXI/ZSt0LmRhdGE6dC5kYXRhK2UpfSkoY1tkXSx0LGksZiksZH0scD0oZSx0LHIpPT5lLnJlZHVjZSgoZSxsLGEpPT57bGV0IG49dFthXTtpZihuJiZuLmNhbGwpe2xldCBlPW4ociksdD1lJiZlLnByb3BzJiZlLnByb3BzLmNsYXNzTmFtZXx8L15nby8udGVzdChlKSYmZTtuPXQ/XCIuXCIrdDplJiZcIm9iamVjdFwiPT10eXBlb2YgZT9lLnByb3BzP1wiXCI6byhlLFwiXCIpOiExPT09ZT9cIlwiOmV9cmV0dXJuIGUrbCsobnVsbD09bj9cIlwiOm4pfSxcIlwiKTtmdW5jdGlvbiB1KGUpe2xldCByPXRoaXN8fHt9LGw9ZS5jYWxsP2Uoci5wKTplO3JldHVybiBpKGwudW5zaGlmdD9sLnJhdz9wKGwsW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksci5wKTpsLnJlZHVjZSgoZSx0KT0+T2JqZWN0LmFzc2lnbihlLHQmJnQuY2FsbD90KHIucCk6dCkse30pOmwsdChyLnRhcmdldCksci5nLHIubyxyLmspfWxldCBkLGYsZyxiPXUuYmluZCh7ZzoxfSksaD11LmJpbmQoe2s6MX0pO2Z1bmN0aW9uIG0oZSx0LHIsbCl7by5wPXQsZD1lLGY9cixnPWx9ZnVuY3Rpb24gdyhlLHQpe2xldCByPXRoaXN8fHt9O3JldHVybiBmdW5jdGlvbigpe2xldCBsPWFyZ3VtZW50cztmdW5jdGlvbiBhKG4sbyl7bGV0IGM9T2JqZWN0LmFzc2lnbih7fSxuKSxzPWMuY2xhc3NOYW1lfHxhLmNsYXNzTmFtZTtyLnA9T2JqZWN0LmFzc2lnbih7dGhlbWU6ZiYmZigpfSxjKSxyLm89LyAqZ29cXGQrLy50ZXN0KHMpLGMuY2xhc3NOYW1lPXUuYXBwbHkocixsKSsocz9cIiBcIitzOlwiXCIpLHQmJihjLnJlZj1vKTtsZXQgaT1lO3JldHVybiBlWzBdJiYoaT1jLmFzfHxlLGRlbGV0ZSBjLmFzKSxnJiZpWzBdJiZnKGMpLGQoaSxjKX1yZXR1cm4gdD90KGEpOmF9fWV4cG9ydHt1IGFzIGNzcyxyIGFzIGV4dHJhY3RDc3MsYiBhcyBnbG9iLGggYXMga2V5ZnJhbWVzLG0gYXMgc2V0dXAsdyBhcyBzdHlsZWR9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/goober/dist/goober.modern.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/api/image.js":
/*!*********************************************!*\
  !*** ./node_modules/next/dist/api/image.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* reexport default from dynamic */ _shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0___default.a)\n/* harmony export */ });\n/* harmony import */ var _shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../shared/lib/image-external */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/image-external.js\");\n/* harmony import */ var _shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n//# sourceMappingURL=image.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYXBpL2ltYWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF1RDtBQUNWOztBQUU3QyIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYXBpL2ltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGRlZmF1bHQgfSBmcm9tICcuLi9zaGFyZWQvbGliL2ltYWdlLWV4dGVybmFsJztcbmV4cG9ydCAqIGZyb20gJy4uL3NoYXJlZC9saWIvaW1hZ2UtZXh0ZXJuYWwnO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/api/image.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":
/*!*****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false! ***!
  \*****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/page.tsx */ \"(app-pages-browser)/./app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWNsaWVudC1lbnRyeS1sb2FkZXIuanM/bW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGVXNlcnMlMkZqZXJlbWlhaCUyRkRlc2t0b3AlMkZjMnBhJTIwdG9vbCUyRmFwcCUyRnBhZ2UudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJnNlcnZlcj1mYWxzZSEiLCJtYXBwaW5ncyI6IkFBQUEsc0pBQW1GIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvYXBwL3BhZ2UudHN4XCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/client/image-component.js":
/*!**********************************************************!*\
  !*** ./node_modules/next/dist/client/image-component.js ***!
  \**********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/* __next_internal_client_entry_do_not_use__  cjs */ \nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"Image\", ({\n    enumerable: true,\n    get: function() {\n        return Image;\n    }\n}));\nconst _interop_require_default = __webpack_require__(/*! @swc/helpers/_/_interop_require_default */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_interop_require_default.js\");\nconst _interop_require_wildcard = __webpack_require__(/*! @swc/helpers/_/_interop_require_wildcard */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_interop_require_wildcard.js\");\nconst _jsxruntime = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\nconst _react = /*#__PURE__*/ _interop_require_wildcard._(__webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"));\nconst _reactdom = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! react-dom */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/index.js\"));\nconst _head = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! ../shared/lib/head */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/head.js\"));\nconst _getimgprops = __webpack_require__(/*! ../shared/lib/get-img-props */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/get-img-props.js\");\nconst _imageconfig = __webpack_require__(/*! ../shared/lib/image-config */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/image-config.js\");\nconst _imageconfigcontextsharedruntime = __webpack_require__(/*! ../shared/lib/image-config-context.shared-runtime */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/image-config-context.shared-runtime.js\");\nconst _warnonce = __webpack_require__(/*! ../shared/lib/utils/warn-once */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js\");\nconst _routercontextsharedruntime = __webpack_require__(/*! ../shared/lib/router-context.shared-runtime */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/router-context.shared-runtime.js\");\nconst _imageloader = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! next/dist/shared/lib/image-loader */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/image-loader.js\"));\nconst _usemergedref = __webpack_require__(/*! ./use-merged-ref */ \"(app-pages-browser)/./node_modules/next/dist/client/use-merged-ref.js\");\n// This is replaced by webpack define plugin\nconst configEnv = {\"deviceSizes\":[640,750,828,1080,1200,1920,2048,3840],\"imageSizes\":[16,32,48,64,96,128,256,384],\"path\":\"/_next/image\",\"loader\":\"default\",\"dangerouslyAllowSVG\":false,\"unoptimized\":false,\"domains\":[],\"remotePatterns\":[]};\nif (false) {}\n// See https://stackoverflow.com/q/39777833/266535 for why we use this ref\n// handler instead of the img's onLoad attribute.\nfunction handleLoading(img, placeholder, onLoadRef, onLoadingCompleteRef, setBlurComplete, unoptimized, sizesInput) {\n    const src = img == null ? void 0 : img.src;\n    if (!img || img['data-loaded-src'] === src) {\n        return;\n    }\n    img['data-loaded-src'] = src;\n    const p = 'decode' in img ? img.decode() : Promise.resolve();\n    p.catch(()=>{}).then(()=>{\n        if (!img.parentElement || !img.isConnected) {\n            // Exit early in case of race condition:\n            // - onload() is called\n            // - decode() is called but incomplete\n            // - unmount is called\n            // - decode() completes\n            return;\n        }\n        if (placeholder !== 'empty') {\n            setBlurComplete(true);\n        }\n        if (onLoadRef == null ? void 0 : onLoadRef.current) {\n            // Since we don't have the SyntheticEvent here,\n            // we must create one with the same shape.\n            // See https://reactjs.org/docs/events.html\n            const event = new Event('load');\n            Object.defineProperty(event, 'target', {\n                writable: false,\n                value: img\n            });\n            let prevented = false;\n            let stopped = false;\n            onLoadRef.current({\n                ...event,\n                nativeEvent: event,\n                currentTarget: img,\n                target: img,\n                isDefaultPrevented: ()=>prevented,\n                isPropagationStopped: ()=>stopped,\n                persist: ()=>{},\n                preventDefault: ()=>{\n                    prevented = true;\n                    event.preventDefault();\n                },\n                stopPropagation: ()=>{\n                    stopped = true;\n                    event.stopPropagation();\n                }\n            });\n        }\n        if (onLoadingCompleteRef == null ? void 0 : onLoadingCompleteRef.current) {\n            onLoadingCompleteRef.current(img);\n        }\n        if (true) {\n            const origSrc = new URL(src, 'http://n').searchParams.get('url') || src;\n            if (img.getAttribute('data-nimg') === 'fill') {\n                if (!unoptimized && (!sizesInput || sizesInput === '100vw')) {\n                    let widthViewportRatio = img.getBoundingClientRect().width / window.innerWidth;\n                    if (widthViewportRatio < 0.6) {\n                        if (sizesInput === '100vw') {\n                            (0, _warnonce.warnOnce)('Image with src \"' + origSrc + '\" has \"fill\" prop and \"sizes\" prop of \"100vw\", but image is not rendered at full viewport width. Please adjust \"sizes\" to improve page performance. Read more: https://nextjs.org/docs/api-reference/next/image#sizes');\n                        } else {\n                            (0, _warnonce.warnOnce)('Image with src \"' + origSrc + '\" has \"fill\" but is missing \"sizes\" prop. Please add it to improve page performance. Read more: https://nextjs.org/docs/api-reference/next/image#sizes');\n                        }\n                    }\n                }\n                if (img.parentElement) {\n                    const { position } = window.getComputedStyle(img.parentElement);\n                    const valid = [\n                        'absolute',\n                        'fixed',\n                        'relative'\n                    ];\n                    if (!valid.includes(position)) {\n                        (0, _warnonce.warnOnce)('Image with src \"' + origSrc + '\" has \"fill\" and parent element with invalid \"position\". Provided \"' + position + '\" should be one of ' + valid.map(String).join(',') + \".\");\n                    }\n                }\n                if (img.height === 0) {\n                    (0, _warnonce.warnOnce)('Image with src \"' + origSrc + '\" has \"fill\" and a height value of 0. This is likely because the parent element of the image has not been styled to have a set height.');\n                }\n            }\n            const heightModified = img.height.toString() !== img.getAttribute('height');\n            const widthModified = img.width.toString() !== img.getAttribute('width');\n            if (heightModified && !widthModified || !heightModified && widthModified) {\n                (0, _warnonce.warnOnce)('Image with src \"' + origSrc + '\" has either width or height modified, but not the other. If you use CSS to change the size of your image, also include the styles \\'width: \"auto\"\\' or \\'height: \"auto\"\\' to maintain the aspect ratio.');\n            }\n        }\n    });\n}\nfunction getDynamicProps(fetchPriority) {\n    if (Boolean(_react.use)) {\n        // In React 19.0.0 or newer, we must use camelCase\n        // prop to avoid \"Warning: Invalid DOM property\".\n        // See https://github.com/facebook/react/pull/25927\n        return {\n            fetchPriority\n        };\n    }\n    // In React 18.2.0 or older, we must use lowercase prop\n    // to avoid \"Warning: Invalid DOM property\".\n    return {\n        fetchpriority: fetchPriority\n    };\n}\nconst ImageElement = /*#__PURE__*/ (0, _react.forwardRef)((param, forwardedRef)=>{\n    let { src, srcSet, sizes, height, width, decoding, className, style, fetchPriority, placeholder, loading, unoptimized, fill, onLoadRef, onLoadingCompleteRef, setBlurComplete, setShowAltText, sizesInput, onLoad, onError, ...rest } = param;\n    const ownRef = (0, _react.useCallback)((img)=>{\n        if (!img) {\n            return;\n        }\n        if (onError) {\n            // If the image has an error before react hydrates, then the error is lost.\n            // The workaround is to wait until the image is mounted which is after hydration,\n            // then we set the src again to trigger the error handler (if there was an error).\n            // eslint-disable-next-line no-self-assign\n            img.src = img.src;\n        }\n        if (true) {\n            if (!src) {\n                console.error('Image is missing required \"src\" property:', img);\n            }\n            if (img.getAttribute('alt') === null) {\n                console.error('Image is missing required \"alt\" property. Please add Alternative Text to describe the image for screen readers and search engines.');\n            }\n        }\n        if (img.complete) {\n            handleLoading(img, placeholder, onLoadRef, onLoadingCompleteRef, setBlurComplete, unoptimized, sizesInput);\n        }\n    }, [\n        src,\n        placeholder,\n        onLoadRef,\n        onLoadingCompleteRef,\n        setBlurComplete,\n        onError,\n        unoptimized,\n        sizesInput\n    ]);\n    const ref = (0, _usemergedref.useMergedRef)(forwardedRef, ownRef);\n    return /*#__PURE__*/ (0, _jsxruntime.jsx)(\"img\", {\n        ...rest,\n        ...getDynamicProps(fetchPriority),\n        // It's intended to keep `loading` before `src` because React updates\n        // props in order which causes Safari/Firefox to not lazy load properly.\n        // See https://github.com/facebook/react/issues/25883\n        loading: loading,\n        width: width,\n        height: height,\n        decoding: decoding,\n        \"data-nimg\": fill ? 'fill' : '1',\n        className: className,\n        style: style,\n        // It's intended to keep `src` the last attribute because React updates\n        // attributes in order. If we keep `src` the first one, Safari will\n        // immediately start to fetch `src`, before `sizes` and `srcSet` are even\n        // updated by React. That causes multiple unnecessary requests if `srcSet`\n        // and `sizes` are defined.\n        // This bug cannot be reproduced in Chrome or Firefox.\n        sizes: sizes,\n        srcSet: srcSet,\n        src: src,\n        ref: ref,\n        onLoad: (event)=>{\n            const img = event.currentTarget;\n            handleLoading(img, placeholder, onLoadRef, onLoadingCompleteRef, setBlurComplete, unoptimized, sizesInput);\n        },\n        onError: (event)=>{\n            // if the real image fails to load, this will ensure \"alt\" is visible\n            setShowAltText(true);\n            if (placeholder !== 'empty') {\n                // If the real image fails to load, this will still remove the placeholder.\n                setBlurComplete(true);\n            }\n            if (onError) {\n                onError(event);\n            }\n        }\n    });\n});\nfunction ImagePreload(param) {\n    let { isAppRouter, imgAttributes } = param;\n    const opts = {\n        as: 'image',\n        imageSrcSet: imgAttributes.srcSet,\n        imageSizes: imgAttributes.sizes,\n        crossOrigin: imgAttributes.crossOrigin,\n        referrerPolicy: imgAttributes.referrerPolicy,\n        ...getDynamicProps(imgAttributes.fetchPriority)\n    };\n    if (isAppRouter && _reactdom.default.preload) {\n        // See https://github.com/facebook/react/pull/26940\n        _reactdom.default.preload(imgAttributes.src, opts);\n        return null;\n    }\n    return /*#__PURE__*/ (0, _jsxruntime.jsx)(_head.default, {\n        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(\"link\", {\n            rel: \"preload\",\n            // Note how we omit the `href` attribute, as it would only be relevant\n            // for browsers that do not support `imagesrcset`, and in those cases\n            // it would cause the incorrect image to be preloaded.\n            //\n            // https://html.spec.whatwg.org/multipage/semantics.html#attr-link-imagesrcset\n            href: imgAttributes.srcSet ? undefined : imgAttributes.src,\n            ...opts\n        }, '__nimg-' + imgAttributes.src + imgAttributes.srcSet + imgAttributes.sizes)\n    });\n}\n_c = ImagePreload;\nconst Image = /*#__PURE__*/ (0, _react.forwardRef)((props, forwardedRef)=>{\n    const pagesRouter = (0, _react.useContext)(_routercontextsharedruntime.RouterContext);\n    // We're in the app directory if there is no pages router.\n    const isAppRouter = !pagesRouter;\n    const configContext = (0, _react.useContext)(_imageconfigcontextsharedruntime.ImageConfigContext);\n    const config = (0, _react.useMemo)(()=>{\n        var _c_qualities;\n        const c = configEnv || configContext || _imageconfig.imageConfigDefault;\n        const allSizes = [\n            ...c.deviceSizes,\n            ...c.imageSizes\n        ].sort((a, b)=>a - b);\n        const deviceSizes = c.deviceSizes.sort((a, b)=>a - b);\n        const qualities = (_c_qualities = c.qualities) == null ? void 0 : _c_qualities.sort((a, b)=>a - b);\n        return {\n            ...c,\n            allSizes,\n            deviceSizes,\n            qualities\n        };\n    }, [\n        configContext\n    ]);\n    const { onLoad, onLoadingComplete } = props;\n    const onLoadRef = (0, _react.useRef)(onLoad);\n    (0, _react.useEffect)(()=>{\n        onLoadRef.current = onLoad;\n    }, [\n        onLoad\n    ]);\n    const onLoadingCompleteRef = (0, _react.useRef)(onLoadingComplete);\n    (0, _react.useEffect)(()=>{\n        onLoadingCompleteRef.current = onLoadingComplete;\n    }, [\n        onLoadingComplete\n    ]);\n    const [blurComplete, setBlurComplete] = (0, _react.useState)(false);\n    const [showAltText, setShowAltText] = (0, _react.useState)(false);\n    const { props: imgAttributes, meta: imgMeta } = (0, _getimgprops.getImgProps)(props, {\n        defaultLoader: _imageloader.default,\n        imgConf: config,\n        blurComplete,\n        showAltText\n    });\n    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {\n        children: [\n            /*#__PURE__*/ (0, _jsxruntime.jsx)(ImageElement, {\n                ...imgAttributes,\n                unoptimized: imgMeta.unoptimized,\n                placeholder: imgMeta.placeholder,\n                fill: imgMeta.fill,\n                onLoadRef: onLoadRef,\n                onLoadingCompleteRef: onLoadingCompleteRef,\n                setBlurComplete: setBlurComplete,\n                setShowAltText: setShowAltText,\n                sizesInput: props.sizes,\n                ref: forwardedRef\n            }),\n            imgMeta.priority ? /*#__PURE__*/ (0, _jsxruntime.jsx)(ImagePreload, {\n                isAppRouter: isAppRouter,\n                imgAttributes: imgAttributes\n            }) : null\n        ]\n    });\n});\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n    Object.defineProperty(exports.default, '__esModule', {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=image-component.js.map\nvar _c;\n$RefreshReg$(_c, \"ImagePreload\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2ltYWdlLWNvbXBvbmVudC5qcyIsIm1hcHBpbmdzIjoiOzs7O3lDQTBXYUE7OztlQUFBQTs7Ozs7OzZFQS9WTjsrRUFDYzsyRUFDSjt5Q0FDVzt5Q0FZTzs2REFDQTtzQ0FDVjt3REFDSztrRkFHSjswQ0FDRztBQUU3Qiw0Q0FBNEM7QUFDNUMsTUFBTUMsWUFBWUMsME5BQTZCO0FBRS9DLElBQUksS0FBNkIsRUFBRSxFQUVsQztBQW1CRCwwRUFBMEU7QUFDMUUsaURBQWlEO0FBQ2pELFNBQVNNLGNBQ1BDLEdBQTJCLEVBQzNCQyxXQUE2QixFQUM3QkMsU0FBcUQsRUFDckRDLG9CQUEyRSxFQUMzRUMsZUFBcUMsRUFDckNDLFdBQW9CLEVBQ3BCQyxVQUE4QjtJQUU5QixNQUFNQyxNQUFNUCxPQUFBQSxPQUFBQSxLQUFBQSxJQUFBQSxJQUFLTyxHQUFHO0lBQ3BCLElBQUksQ0FBQ1AsT0FBT0EsR0FBRyxDQUFDLGtCQUFrQixLQUFLTyxLQUFLO1FBQzFDO0lBQ0Y7SUFDQVAsR0FBRyxDQUFDLGtCQUFrQixHQUFHTztJQUN6QixNQUFNQyxJQUFJLFlBQVlSLE1BQU1BLElBQUlTLE1BQU0sS0FBS0MsUUFBUUMsT0FBTztJQUMxREgsRUFBRUksS0FBSyxDQUFDLEtBQU8sR0FBR0MsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQ2IsSUFBSWMsYUFBYSxJQUFJLENBQUNkLElBQUllLFdBQVcsRUFBRTtZQUMxQyx3Q0FBd0M7WUFDeEMsdUJBQXVCO1lBQ3ZCLHNDQUFzQztZQUN0QyxzQkFBc0I7WUFDdEIsdUJBQXVCO1lBQ3ZCO1FBQ0Y7UUFDQSxJQUFJZCxnQkFBZ0IsU0FBUztZQUMzQkcsZ0JBQWdCO1FBQ2xCO1FBQ0EsSUFBSUYsYUFBQUEsT0FBQUEsS0FBQUEsSUFBQUEsVUFBV2MsT0FBTyxFQUFFO1lBQ3RCLCtDQUErQztZQUMvQywwQ0FBMEM7WUFDMUMsMkNBQTJDO1lBQzND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QTtnQkFDYkMsZUFBZUE7aUJBRWY7OztBQUdWIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvc3JjL2NsaWVudC9pbWFnZS1jb21wb25lbnQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QsIHtcbiAgdXNlUmVmLFxuICB1c2VFZmZlY3QsXG4gIHVzZUNhbGxiYWNrLFxuICB1c2VDb250ZXh0LFxuICB1c2VNZW1vLFxuICB1c2VTdGF0ZSxcbiAgZm9yd2FyZFJlZixcbiAgdXNlLFxufSBmcm9tICdyZWFjdCdcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nXG5pbXBvcnQgSGVhZCBmcm9tICcuLi9zaGFyZWQvbGliL2hlYWQnXG5pbXBvcnQgeyBnZXRJbWdQcm9wcyB9IGZyb20gJy4uL3NoYXJlZC9saWIvZ2V0LWltZy1wcm9wcydcbmltcG9ydCB0eXBlIHtcbiAgSW1hZ2VQcm9wcyxcbiAgSW1nUHJvcHMsXG4gIE9uTG9hZCxcbiAgT25Mb2FkaW5nQ29tcGxldGUsXG4gIFBsYWNlaG9sZGVyVmFsdWUsXG59IGZyb20gJy4uL3NoYXJlZC9saWIvZ2V0LWltZy1wcm9wcydcbmltcG9ydCB0eXBlIHtcbiAgSW1hZ2VDb25maWdDb21wbGV0ZSxcbiAgSW1hZ2VMb2FkZXJQcm9wcyxcbn0gZnJvbSAnLi4vc2hhcmVkL2xpYi9pbWFnZS1jb25maWcnXG5pbXBvcnQgeyBpbWFnZUNvbmZpZ0RlZmF1bHQgfSBmcm9tICcuLi9zaGFyZWQvbGliL2ltYWdlLWNvbmZpZydcbmltcG9ydCB7IEltYWdlQ29uZmlnQ29udGV4dCB9IGZyb20gJy4uL3NoYXJlZC9saWIvaW1hZ2UtY29uZmlnLWNvbnRleHQuc2hhcmVkLXJ1bnRpbWUnXG5pbXBvcnQgeyB3YXJuT25jZSB9IGZyb20gJy4uL3NoYXJlZC9saWIvdXRpbHMvd2Fybi1vbmNlJ1xuaW1wb3J0IHsgUm91dGVyQ29udGV4dCB9IGZyb20gJy4uL3NoYXJlZC9saWIvcm91dGVyLWNvbnRleHQuc2hhcmVkLXJ1bnRpbWUnXG5cbi8vIEB0cy1pZ25vcmUgLSBUaGlzIGlzIHJlcGxhY2VkIGJ5IHdlYnBhY2sgYWxpYXNcbmltcG9ydCBkZWZhdWx0TG9hZGVyIGZyb20gJ25leHQvZGlzdC9zaGFyZWQvbGliL2ltYWdlLWxvYWRlcidcbmltcG9ydCB7IHVzZU1lcmdlZFJlZiB9IGZyb20gJy4vdXNlLW1lcmdlZC1yZWYnXG5cbi8vIFRoaXMgaXMgcmVwbGFjZWQgYnkgd2VicGFjayBkZWZpbmUgcGx1Z2luXG5jb25zdCBjb25maWdFbnYgPSBwcm9jZXNzLmVudi5fX05FWFRfSU1BR0VfT1BUUyBhcyBhbnkgYXMgSW1hZ2VDb25maWdDb21wbGV0ZVxuXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgOyhnbG9iYWxUaGlzIGFzIGFueSkuX19ORVhUX0lNQUdFX0lNUE9SVEVEID0gdHJ1ZVxufVxuXG5leHBvcnQgdHlwZSB7IEltYWdlTG9hZGVyUHJvcHMgfVxuZXhwb3J0IHR5cGUgSW1hZ2VMb2FkZXIgPSAocDogSW1hZ2VMb2FkZXJQcm9wcykgPT4gc3RyaW5nXG5cbnR5cGUgSW1nRWxlbWVudFdpdGhEYXRhUHJvcCA9IEhUTUxJbWFnZUVsZW1lbnQgJiB7XG4gICdkYXRhLWxvYWRlZC1zcmMnOiBzdHJpbmcgfCB1bmRlZmluZWRcbn1cblxudHlwZSBJbWFnZUVsZW1lbnRQcm9wcyA9IEltZ1Byb3BzICYge1xuICB1bm9wdGltaXplZDogYm9vbGVhblxuICBwbGFjZWhvbGRlcjogUGxhY2Vob2xkZXJWYWx1ZVxuICBvbkxvYWRSZWY6IFJlYWN0Lk11dGFibGVSZWZPYmplY3Q8T25Mb2FkIHwgdW5kZWZpbmVkPlxuICBvbkxvYWRpbmdDb21wbGV0ZVJlZjogUmVhY3QuTXV0YWJsZVJlZk9iamVjdDxPbkxvYWRpbmdDb21wbGV0ZSB8IHVuZGVmaW5lZD5cbiAgc2V0Qmx1ckNvbXBsZXRlOiAoYjogYm9vbGVhbikgPT4gdm9pZFxuICBzZXRTaG93QWx0VGV4dDogKGI6IGJvb2xlYW4pID0+IHZvaWRcbiAgc2l6ZXNJbnB1dDogc3RyaW5nIHwgdW5kZWZpbmVkXG59XG5cbi8vIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMzk3Nzc4MzMvMjY2NTM1IGZvciB3aHkgd2UgdXNlIHRoaXMgcmVmXG4vLyBoYW5kbGVyIGluc3RlYWQgb2YgdGhlIGltZydzIG9uTG9hZCBhdHRyaWJ1dGUuXG5mdW5jdGlvbiBoYW5kbGVMb2FkaW5nKFxuICBpbWc6IEltZ0VsZW1lbnRXaXRoRGF0YVByb3AsXG4gIHBsYWNlaG9sZGVyOiBQbGFjZWhvbGRlclZhbHVlLFxuICBvbkxvYWRSZWY6IFJlYWN0Lk11dGFibGVSZWZPYmplY3Q8T25Mb2FkIHwgdW5kZWZpbmVkPixcbiAgb25Mb2FkaW5nQ29tcGxldGVSZWY6IFJlYWN0Lk11dGFibGVSZWZPYmplY3Q8T25Mb2FkaW5nQ29tcGxldGUgfCB1bmRlZmluZWQ+LFxuICBzZXRCbHVyQ29tcGxldGU6IChiOiBib29sZWFuKSA9PiB2b2lkLFxuICB1bm9wdGltaXplZDogYm9vbGVhbixcbiAgc2l6ZXNJbnB1dDogc3RyaW5nIHwgdW5kZWZpbmVkXG4pIHtcbiAgY29uc3Qgc3JjID0gaW1nPy5zcmNcbiAgaWYgKCFpbWcgfHwgaW1nWydkYXRhLWxvYWRlZC1zcmMnXSA9PT0gc3JjKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgaW1nWydkYXRhLWxvYWRlZC1zcmMnXSA9IHNyY1xuICBjb25zdCBwID0gJ2RlY29kZScgaW4gaW1nID8gaW1nLmRlY29kZSgpIDogUHJvbWlzZS5yZXNvbHZlKClcbiAgcC5jYXRjaCgoKSA9PiB7fSkudGhlbigoKSA9PiB7XG4gICAgaWYgKCFpbWcucGFyZW50RWxlbWVudCB8fCAhaW1nLmlzQ29ubmVjdGVkKSB7XG4gICAgICAvLyBFeGl0IGVhcmx5IGluIGNhc2Ugb2YgcmFjZSBjb25kaXRpb246XG4gICAgICAvLyAtIG9ubG9hZCgpIGlzIGNhbGxlZFxuICAgICAgLy8gLSBkZWNvZGUoKSBpcyBjYWxsZWQgYnV0IGluY29tcGxldGVcbiAgICAgIC8vIC0gdW5tb3VudCBpcyBjYWxsZWRcbiAgICAgIC8vIC0gZGVjb2RlKCkgY29tcGxldGVzXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHBsYWNlaG9sZGVyICE9PSAnZW1wdHknKSB7XG4gICAgICBzZXRCbHVyQ29tcGxldGUodHJ1ZSlcbiAgICB9XG4gICAgaWYgKG9uTG9hZFJlZj8uY3VycmVudCkge1xuICAgICAgLy8gU2luY2Ugd2UgZG9uJ3QgaGF2ZSB0aGUgU3ludGhldGljRXZlbnQgaGVyZSxcbiAgICAgIC8vIHdlIG11c3QgY3JlYXRlIG9uZSB3aXRoIHRoZSBzYW1lIHNoYXBlLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9ldmVudHMuaHRtbFxuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoJ2xvYWQnKVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV2ZW50LCAndGFyZ2V0JywgeyB3cml0YWJsZTogZmFsc2UsIHZhbHVlOiBpbWcgfSlcbiAgICAgIGxldCBwcmV2ZW50ZWQgPSBmYWxzZVxuICAgICAgbGV0IHN0b3BwZWQgPSBmYWxzZVxuICAgICAgb25Mb2FkUmVmLmN1cnJlbnQoe1xuICAgICAgICAuLi5ldmVudCxcbiAgICAgICAgbmF0aXZlRXZlbnQ6IGV2ZW50LFxuICAgICAgICBjdXJyZW50VGFyZ2V0OiBpbWcsXG4gICAgICAgIHRhcmdldDogaW1nLFxuICAgICAgICBpc0RlZmF1bHRQcmV2ZW50ZWQ6ICgpID0+IHByZXZlbnRlZCxcbiAgICAgICAgaXNQcm9wYWdhdGlvblN0b3BwZWQ6ICgpID0+IHN0b3BwZWQsXG4gICAgICAgIHBlcnNpc3Q6ICgpID0+IHt9LFxuICAgICAgICBwcmV2ZW50RGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgIHByZXZlbnRlZCA9IHRydWVcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIH0sXG4gICAgICAgIHN0b3BQcm9wYWdhdGlvbjogKCkgPT4ge1xuICAgICAgICAgIHN0b3BwZWQgPSB0cnVlXG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvbkxvYWRpbmdDb21wbGV0ZVJlZj8uY3VycmVudCkge1xuICAgICAgb25Mb2FkaW5nQ29tcGxldGVSZWYuY3VycmVudChpbWcpXG4gICAgfVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zdCBvcmlnU3JjID0gbmV3IFVSTChzcmMsICdodHRwOi8vbicpLnNlYXJjaFBhcmFtcy5nZXQoJ3VybCcpIHx8IHNyY1xuICAgICAgaWYgKGltZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmltZycpID09PSAnZmlsbCcpIHtcbiAgICAgICAgaWYgKCF1bm9wdGltaXplZCAmJiAoIXNpemVzSW5wdXQgfHwgc2l6ZXNJbnB1dCA9PT0gJzEwMHZ3JykpIHtcbiAgICAgICAgICBsZXQgd2lkdGhWaWV3cG9ydFJhdGlvID1cbiAgICAgICAgICAgIGltZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoXG4gICAgICAgICAgaWYgKHdpZHRoVmlld3BvcnRSYXRpbyA8IDAuNikge1xuICAgICAgICAgICAgaWYgKHNpemVzSW5wdXQgPT09ICcxMDB2dycpIHtcbiAgICAgICAgICAgICAgd2Fybk9uY2UoXG4gICAgICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtvcmlnU3JjfVwiIGhhcyBcImZpbGxcIiBwcm9wIGFuZCBcInNpemVzXCIgcHJvcCBvZiBcIjEwMHZ3XCIsIGJ1dCBpbWFnZSBpcyBub3QgcmVuZGVyZWQgYXQgZnVsbCB2aWV3cG9ydCB3aWR0aC4gUGxlYXNlIGFkanVzdCBcInNpemVzXCIgdG8gaW1wcm92ZSBwYWdlIHBlcmZvcm1hbmNlLiBSZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNzaXplc2BcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd2Fybk9uY2UoXG4gICAgICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtvcmlnU3JjfVwiIGhhcyBcImZpbGxcIiBidXQgaXMgbWlzc2luZyBcInNpemVzXCIgcHJvcC4gUGxlYXNlIGFkZCBpdCB0byBpbXByb3ZlIHBhZ2UgcGVyZm9ybWFuY2UuIFJlYWQgbW9yZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBpLXJlZmVyZW5jZS9uZXh0L2ltYWdlI3NpemVzYFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbWcucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIGNvbnN0IHsgcG9zaXRpb24gfSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGltZy5wYXJlbnRFbGVtZW50KVxuICAgICAgICAgIGNvbnN0IHZhbGlkID0gWydhYnNvbHV0ZScsICdmaXhlZCcsICdyZWxhdGl2ZSddXG4gICAgICAgICAgaWYgKCF2YWxpZC5pbmNsdWRlcyhwb3NpdGlvbikpIHtcbiAgICAgICAgICAgIHdhcm5PbmNlKFxuICAgICAgICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke29yaWdTcmN9XCIgaGFzIFwiZmlsbFwiIGFuZCBwYXJlbnQgZWxlbWVudCB3aXRoIGludmFsaWQgXCJwb3NpdGlvblwiLiBQcm92aWRlZCBcIiR7cG9zaXRpb259XCIgc2hvdWxkIGJlIG9uZSBvZiAke3ZhbGlkXG4gICAgICAgICAgICAgICAgLm1hcChTdHJpbmcpXG4gICAgICAgICAgICAgICAgLmpvaW4oJywnKX0uYFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1nLmhlaWdodCA9PT0gMCkge1xuICAgICAgICAgIHdhcm5PbmNlKFxuICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtvcmlnU3JjfVwiIGhhcyBcImZpbGxcIiBhbmQgYSBoZWlnaHQgdmFsdWUgb2YgMC4gVGhpcyBpcyBsaWtlbHkgYmVjYXVzZSB0aGUgcGFyZW50IGVsZW1lbnQgb2YgdGhlIGltYWdlIGhhcyBub3QgYmVlbiBzdHlsZWQgdG8gaGF2ZSBhIHNldCBoZWlnaHQuYFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBoZWlnaHRNb2RpZmllZCA9XG4gICAgICAgIGltZy5oZWlnaHQudG9TdHJpbmcoKSAhPT0gaW1nLmdldEF0dHJpYnV0ZSgnaGVpZ2h0JylcbiAgICAgIGNvbnN0IHdpZHRoTW9kaWZpZWQgPSBpbWcud2lkdGgudG9TdHJpbmcoKSAhPT0gaW1nLmdldEF0dHJpYnV0ZSgnd2lkdGgnKVxuICAgICAgaWYgKFxuICAgICAgICAoaGVpZ2h0TW9kaWZpZWQgJiYgIXdpZHRoTW9kaWZpZWQpIHx8XG4gICAgICAgICghaGVpZ2h0TW9kaWZpZWQgJiYgd2lkdGhNb2RpZmllZClcbiAgICAgICkge1xuICAgICAgICB3YXJuT25jZShcbiAgICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke29yaWdTcmN9XCIgaGFzIGVpdGhlciB3aWR0aCBvciBoZWlnaHQgbW9kaWZpZWQsIGJ1dCBub3QgdGhlIG90aGVyLiBJZiB5b3UgdXNlIENTUyB0byBjaGFuZ2UgdGhlIHNpemUgb2YgeW91ciBpbWFnZSwgYWxzbyBpbmNsdWRlIHRoZSBzdHlsZXMgJ3dpZHRoOiBcImF1dG9cIicgb3IgJ2hlaWdodDogXCJhdXRvXCInIHRvIG1haW50YWluIHRoZSBhc3BlY3QgcmF0aW8uYFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuXG5mdW5jdGlvbiBnZXREeW5hbWljUHJvcHMoXG4gIGZldGNoUHJpb3JpdHk/OiBzdHJpbmdcbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICBpZiAoQm9vbGVhbih1c2UpKSB7XG4gICAgLy8gSW4gUmVhY3QgMTkuMC4wIG9yIG5ld2VyLCB3ZSBtdXN0IHVzZSBjYW1lbENhc2VcbiAgICAvLyBwcm9wIHRvIGF2b2lkIFwiV2FybmluZzogSW52YWxpZCBET00gcHJvcGVydHlcIi5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L3B1bGwvMjU5MjdcbiAgICByZXR1cm4geyBmZXRjaFByaW9yaXR5IH1cbiAgfVxuICAvLyBJbiBSZWFjdCAxOC4yLjAgb3Igb2xkZXIsIHdlIG11c3QgdXNlIGxvd2VyY2FzZSBwcm9wXG4gIC8vIHRvIGF2b2lkIFwiV2FybmluZzogSW52YWxpZCBET00gcHJvcGVydHlcIi5cbiAgcmV0dXJuIHsgZmV0Y2hwcmlvcml0eTogZmV0Y2hQcmlvcml0eSB9XG59XG5cbmNvbnN0IEltYWdlRWxlbWVudCA9IGZvcndhcmRSZWY8SFRNTEltYWdlRWxlbWVudCB8IG51bGwsIEltYWdlRWxlbWVudFByb3BzPihcbiAgKFxuICAgIHtcbiAgICAgIHNyYyxcbiAgICAgIHNyY1NldCxcbiAgICAgIHNpemVzLFxuICAgICAgaGVpZ2h0LFxuICAgICAgd2lkdGgsXG4gICAgICBkZWNvZGluZyxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHN0eWxlLFxuICAgICAgZmV0Y2hQcmlvcml0eSxcbiAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgbG9hZGluZyxcbiAgICAgIHVub3B0aW1pemVkLFxuICAgICAgZmlsbCxcbiAgICAgIG9uTG9hZFJlZixcbiAgICAgIG9uTG9hZGluZ0NvbXBsZXRlUmVmLFxuICAgICAgc2V0Qmx1ckNvbXBsZXRlLFxuICAgICAgc2V0U2hvd0FsdFRleHQsXG4gICAgICBzaXplc0lucHV0LFxuICAgICAgb25Mb2FkLFxuICAgICAgb25FcnJvcixcbiAgICAgIC4uLnJlc3RcbiAgICB9LFxuICAgIGZvcndhcmRlZFJlZlxuICApID0+IHtcbiAgICBjb25zdCBvd25SZWYgPSB1c2VDYWxsYmFjayhcbiAgICAgIChpbWc6IEltZ0VsZW1lbnRXaXRoRGF0YVByb3AgfCBudWxsKSA9PiB7XG4gICAgICAgIGlmICghaW1nKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgaW1hZ2UgaGFzIGFuIGVycm9yIGJlZm9yZSByZWFjdCBoeWRyYXRlcywgdGhlbiB0aGUgZXJyb3IgaXMgbG9zdC5cbiAgICAgICAgICAvLyBUaGUgd29ya2Fyb3VuZCBpcyB0byB3YWl0IHVudGlsIHRoZSBpbWFnZSBpcyBtb3VudGVkIHdoaWNoIGlzIGFmdGVyIGh5ZHJhdGlvbixcbiAgICAgICAgICAvLyB0aGVuIHdlIHNldCB0aGUgc3JjIGFnYWluIHRvIHRyaWdnZXIgdGhlIGVycm9yIGhhbmRsZXIgKGlmIHRoZXJlIHdhcyBhbiBlcnJvcikuXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtYXNzaWduXG4gICAgICAgICAgaW1nLnNyYyA9IGltZy5zcmNcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGlmICghc3JjKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBJbWFnZSBpcyBtaXNzaW5nIHJlcXVpcmVkIFwic3JjXCIgcHJvcGVydHk6YCwgaW1nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW1nLmdldEF0dHJpYnV0ZSgnYWx0JykgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIGBJbWFnZSBpcyBtaXNzaW5nIHJlcXVpcmVkIFwiYWx0XCIgcHJvcGVydHkuIFBsZWFzZSBhZGQgQWx0ZXJuYXRpdmUgVGV4dCB0byBkZXNjcmliZSB0aGUgaW1hZ2UgZm9yIHNjcmVlbiByZWFkZXJzIGFuZCBzZWFyY2ggZW5naW5lcy5gXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbWcuY29tcGxldGUpIHtcbiAgICAgICAgICBoYW5kbGVMb2FkaW5nKFxuICAgICAgICAgICAgaW1nLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXIsXG4gICAgICAgICAgICBvbkxvYWRSZWYsXG4gICAgICAgICAgICBvbkxvYWRpbmdDb21wbGV0ZVJlZixcbiAgICAgICAgICAgIHNldEJsdXJDb21wbGV0ZSxcbiAgICAgICAgICAgIHVub3B0aW1pemVkLFxuICAgICAgICAgICAgc2l6ZXNJbnB1dFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFtcbiAgICAgICAgc3JjLFxuICAgICAgICBwbGFjZWhvbGRlcixcbiAgICAgICAgb25Mb2FkUmVmLFxuICAgICAgICBvbkxvYWRpbmdDb21wbGV0ZVJlZixcbiAgICAgICAgc2V0Qmx1ckNvbXBsZXRlLFxuICAgICAgICBvbkVycm9yLFxuICAgICAgICB1bm9wdGltaXplZCxcbiAgICAgICAgc2l6ZXNJbnB1dCxcbiAgICAgIF1cbiAgICApXG5cbiAgICBjb25zdCByZWYgPSB1c2VNZXJnZWRSZWYoZm9yd2FyZGVkUmVmLCBvd25SZWYpXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGltZ1xuICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgey4uLmdldER5bmFtaWNQcm9wcyhmZXRjaFByaW9yaXR5KX1cbiAgICAgICAgLy8gSXQncyBpbnRlbmRlZCB0byBrZWVwIGBsb2FkaW5nYCBiZWZvcmUgYHNyY2AgYmVjYXVzZSBSZWFjdCB1cGRhdGVzXG4gICAgICAgIC8vIHByb3BzIGluIG9yZGVyIHdoaWNoIGNhdXNlcyBTYWZhcmkvRmlyZWZveCB0byBub3QgbGF6eSBsb2FkIHByb3Blcmx5LlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8yNTg4M1xuICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICBkZWNvZGluZz17ZGVjb2Rpbmd9XG4gICAgICAgIGRhdGEtbmltZz17ZmlsbCA/ICdmaWxsJyA6ICcxJ31cbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgLy8gSXQncyBpbnRlbmRlZCB0byBrZWVwIGBzcmNgIHRoZSBsYXN0IGF0dHJpYnV0ZSBiZWNhdXNlIFJlYWN0IHVwZGF0ZXNcbiAgICAgICAgLy8gYXR0cmlidXRlcyBpbiBvcmRlci4gSWYgd2Uga2VlcCBgc3JjYCB0aGUgZmlyc3Qgb25lLCBTYWZhcmkgd2lsbFxuICAgICAgICAvLyBpbW1lZGlhdGVseSBzdGFydCB0byBmZXRjaCBgc3JjYCwgYmVmb3JlIGBzaXplc2AgYW5kIGBzcmNTZXRgIGFyZSBldmVuXG4gICAgICAgIC8vIHVwZGF0ZWQgYnkgUmVhY3QuIFRoYXQgY2F1c2VzIG11bHRpcGxlIHVubmVjZXNzYXJ5IHJlcXVlc3RzIGlmIGBzcmNTZXRgXG4gICAgICAgIC8vIGFuZCBgc2l6ZXNgIGFyZSBkZWZpbmVkLlxuICAgICAgICAvLyBUaGlzIGJ1ZyBjYW5ub3QgYmUgcmVwcm9kdWNlZCBpbiBDaHJvbWUgb3IgRmlyZWZveC5cbiAgICAgICAgc2l6ZXM9e3NpemVzfVxuICAgICAgICBzcmNTZXQ9e3NyY1NldH1cbiAgICAgICAgc3JjPXtzcmN9XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICBvbkxvYWQ9eyhldmVudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGltZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSW1nRWxlbWVudFdpdGhEYXRhUHJvcFxuICAgICAgICAgIGhhbmRsZUxvYWRpbmcoXG4gICAgICAgICAgICBpbWcsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcixcbiAgICAgICAgICAgIG9uTG9hZFJlZixcbiAgICAgICAgICAgIG9uTG9hZGluZ0NvbXBsZXRlUmVmLFxuICAgICAgICAgICAgc2V0Qmx1ckNvbXBsZXRlLFxuICAgICAgICAgICAgdW5vcHRpbWl6ZWQsXG4gICAgICAgICAgICBzaXplc0lucHV0XG4gICAgICAgICAgKVxuICAgICAgICB9fVxuICAgICAgICBvbkVycm9yPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAvLyBpZiB0aGUgcmVhbCBpbWFnZSBmYWlscyB0byBsb2FkLCB0aGlzIHdpbGwgZW5zdXJlIFwiYWx0XCIgaXMgdmlzaWJsZVxuICAgICAgICAgIHNldFNob3dBbHRUZXh0KHRydWUpXG4gICAgICAgICAgaWYgKHBsYWNlaG9sZGVyICE9PSAnZW1wdHknKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVhbCBpbWFnZSBmYWlscyB0byBsb2FkLCB0aGlzIHdpbGwgc3RpbGwgcmVtb3ZlIHRoZSBwbGFjZWhvbGRlci5cbiAgICAgICAgICAgIHNldEJsdXJDb21wbGV0ZSh0cnVlKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgICAgb25FcnJvcihldmVudClcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgIClcbiAgfVxuKVxuXG5mdW5jdGlvbiBJbWFnZVByZWxvYWQoe1xuICBpc0FwcFJvdXRlcixcbiAgaW1nQXR0cmlidXRlcyxcbn06IHtcbiAgaXNBcHBSb3V0ZXI6IGJvb2xlYW5cbiAgaW1nQXR0cmlidXRlczogSW1nUHJvcHNcbn0pIHtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBhczogJ2ltYWdlJyxcbiAgICBpbWFnZVNyY1NldDogaW1nQXR0cmlidXRlcy5zcmNTZXQsXG4gICAgaW1hZ2VTaXplczogaW1nQXR0cmlidXRlcy5zaXplcyxcbiAgICBjcm9zc09yaWdpbjogaW1nQXR0cmlidXRlcy5jcm9zc09yaWdpbixcbiAgICByZWZlcnJlclBvbGljeTogaW1nQXR0cmlidXRlcy5yZWZlcnJlclBvbGljeSxcbiAgICAuLi5nZXREeW5hbWljUHJvcHMoaW1nQXR0cmlidXRlcy5mZXRjaFByaW9yaXR5KSxcbiAgfVxuXG4gIGlmIChpc0FwcFJvdXRlciAmJiBSZWFjdERPTS5wcmVsb2FkKSB7XG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9wdWxsLzI2OTQwXG4gICAgUmVhY3RET00ucHJlbG9hZChcbiAgICAgIGltZ0F0dHJpYnV0ZXMuc3JjLFxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1cGdyYWRlIHRvIGBAdHlwZXMvcmVhY3QtZG9tQDE4LjMueGBcbiAgICAgIG9wdHNcbiAgICApXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEhlYWQ+XG4gICAgICA8bGlua1xuICAgICAgICBrZXk9e1xuICAgICAgICAgICdfX25pbWctJyArXG4gICAgICAgICAgaW1nQXR0cmlidXRlcy5zcmMgK1xuICAgICAgICAgIGltZ0F0dHJpYnV0ZXMuc3JjU2V0ICtcbiAgICAgICAgICBpbWdBdHRyaWJ1dGVzLnNpemVzXG4gICAgICAgIH1cbiAgICAgICAgcmVsPVwicHJlbG9hZFwiXG4gICAgICAgIC8vIE5vdGUgaG93IHdlIG9taXQgdGhlIGBocmVmYCBhdHRyaWJ1dGUsIGFzIGl0IHdvdWxkIG9ubHkgYmUgcmVsZXZhbnRcbiAgICAgICAgLy8gZm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgYGltYWdlc3Jjc2V0YCwgYW5kIGluIHRob3NlIGNhc2VzXG4gICAgICAgIC8vIGl0IHdvdWxkIGNhdXNlIHRoZSBpbmNvcnJlY3QgaW1hZ2UgdG8gYmUgcHJlbG9hZGVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zZW1hbnRpY3MuaHRtbCNhdHRyLWxpbmstaW1hZ2VzcmNzZXRcbiAgICAgICAgaHJlZj17aW1nQXR0cmlidXRlcy5zcmNTZXQgPyB1bmRlZmluZWQgOiBpbWdBdHRyaWJ1dGVzLnNyY31cbiAgICAgICAgey4uLm9wdHN9XG4gICAgICAvPlxuICAgIDwvSGVhZD5cbiAgKVxufVxuXG4vKipcbiAqIFRoZSBgSW1hZ2VgIGNvbXBvbmVudCBpcyB1c2VkIHRvIG9wdGltaXplIGltYWdlcy5cbiAqXG4gKiBSZWFkIG1vcmU6IFtOZXh0LmpzIGRvY3M6IGBJbWFnZWBdKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9hcGktcmVmZXJlbmNlL2NvbXBvbmVudHMvaW1hZ2UpXG4gKi9cbmV4cG9ydCBjb25zdCBJbWFnZSA9IGZvcndhcmRSZWY8SFRNTEltYWdlRWxlbWVudCB8IG51bGwsIEltYWdlUHJvcHM+KFxuICAocHJvcHMsIGZvcndhcmRlZFJlZikgPT4ge1xuICAgIGNvbnN0IHBhZ2VzUm91dGVyID0gdXNlQ29udGV4dChSb3V0ZXJDb250ZXh0KVxuICAgIC8vIFdlJ3JlIGluIHRoZSBhcHAgZGlyZWN0b3J5IGlmIHRoZXJlIGlzIG5vIHBhZ2VzIHJvdXRlci5cbiAgICBjb25zdCBpc0FwcFJvdXRlciA9ICFwYWdlc1JvdXRlclxuXG4gICAgY29uc3QgY29uZmlnQ29udGV4dCA9IHVzZUNvbnRleHQoSW1hZ2VDb25maWdDb250ZXh0KVxuICAgIGNvbnN0IGNvbmZpZyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgY29uc3QgYyA9IGNvbmZpZ0VudiB8fCBjb25maWdDb250ZXh0IHx8IGltYWdlQ29uZmlnRGVmYXVsdFxuICAgICAgY29uc3QgYWxsU2l6ZXMgPSBbLi4uYy5kZXZpY2VTaXplcywgLi4uYy5pbWFnZVNpemVzXS5zb3J0KChhLCBiKSA9PiBhIC0gYilcbiAgICAgIGNvbnN0IGRldmljZVNpemVzID0gYy5kZXZpY2VTaXplcy5zb3J0KChhLCBiKSA9PiBhIC0gYilcbiAgICAgIGNvbnN0IHF1YWxpdGllcyA9IGMucXVhbGl0aWVzPy5zb3J0KChhLCBiKSA9PiBhIC0gYilcbiAgICAgIHJldHVybiB7IC4uLmMsIGFsbFNpemVzLCBkZXZpY2VTaXplcywgcXVhbGl0aWVzIH1cbiAgICB9LCBbY29uZmlnQ29udGV4dF0pXG5cbiAgICBjb25zdCB7IG9uTG9hZCwgb25Mb2FkaW5nQ29tcGxldGUgfSA9IHByb3BzXG4gICAgY29uc3Qgb25Mb2FkUmVmID0gdXNlUmVmKG9uTG9hZClcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBvbkxvYWRSZWYuY3VycmVudCA9IG9uTG9hZFxuICAgIH0sIFtvbkxvYWRdKVxuXG4gICAgY29uc3Qgb25Mb2FkaW5nQ29tcGxldGVSZWYgPSB1c2VSZWYob25Mb2FkaW5nQ29tcGxldGUpXG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgb25Mb2FkaW5nQ29tcGxldGVSZWYuY3VycmVudCA9IG9uTG9hZGluZ0NvbXBsZXRlXG4gICAgfSwgW29uTG9hZGluZ0NvbXBsZXRlXSlcblxuICAgIGNvbnN0IFtibHVyQ29tcGxldGUsIHNldEJsdXJDb21wbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgICBjb25zdCBbc2hvd0FsdFRleHQsIHNldFNob3dBbHRUZXh0XSA9IHVzZVN0YXRlKGZhbHNlKVxuXG4gICAgY29uc3QgeyBwcm9wczogaW1nQXR0cmlidXRlcywgbWV0YTogaW1nTWV0YSB9ID0gZ2V0SW1nUHJvcHMocHJvcHMsIHtcbiAgICAgIGRlZmF1bHRMb2FkZXIsXG4gICAgICBpbWdDb25mOiBjb25maWcsXG4gICAgICBibHVyQ29tcGxldGUsXG4gICAgICBzaG93QWx0VGV4dCxcbiAgICB9KVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIHtcbiAgICAgICAgICA8SW1hZ2VFbGVtZW50XG4gICAgICAgICAgICB7Li4uaW1nQXR0cmlidXRlc31cbiAgICAgICAgICAgIHVub3B0aW1pemVkPXtpbWdNZXRhLnVub3B0aW1pemVkfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2ltZ01ldGEucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICBmaWxsPXtpbWdNZXRhLmZpbGx9XG4gICAgICAgICAgICBvbkxvYWRSZWY9e29uTG9hZFJlZn1cbiAgICAgICAgICAgIG9uTG9hZGluZ0NvbXBsZXRlUmVmPXtvbkxvYWRpbmdDb21wbGV0ZVJlZn1cbiAgICAgICAgICAgIHNldEJsdXJDb21wbGV0ZT17c2V0Qmx1ckNvbXBsZXRlfVxuICAgICAgICAgICAgc2V0U2hvd0FsdFRleHQ9e3NldFNob3dBbHRUZXh0fVxuICAgICAgICAgICAgc2l6ZXNJbnB1dD17cHJvcHMuc2l6ZXN9XG4gICAgICAgICAgICByZWY9e2ZvcndhcmRlZFJlZn1cbiAgICAgICAgICAvPlxuICAgICAgICB9XG4gICAgICAgIHtpbWdNZXRhLnByaW9yaXR5ID8gKFxuICAgICAgICAgIDxJbWFnZVByZWxvYWRcbiAgICAgICAgICAgIGlzQXBwUm91dGVyPXtpc0FwcFJvdXRlcn1cbiAgICAgICAgICAgIGltZ0F0dHJpYnV0ZXM9e2ltZ0F0dHJpYnV0ZXN9XG4gICAgICAgICAgLz5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICA8Lz5cbiAgICApXG4gIH1cbilcbiJdLCJuYW1lcyI6WyJJbWFnZSIsImNvbmZpZ0VudiIsInByb2Nlc3MiLCJlbnYiLCJfX05FWFRfSU1BR0VfT1BUUyIsIndpbmRvdyIsImdsb2JhbFRoaXMiLCJfX05FWFRfSU1BR0VfSU1QT1JURUQiLCJoYW5kbGVMb2FkaW5nIiwiaW1nIiwicGxhY2Vob2xkZXIiLCJvbkxvYWRSZWYiLCJvbkxvYWRpbmdDb21wbGV0ZVJlZiIsInNldEJsdXJDb21wbGV0ZSIsInVub3B0aW1pemVkIiwic2l6ZXNJbnB1dCIsInNyYyIsInAiLCJkZWNvZGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNhdGNoIiwidGhlbiIsInBhcmVudEVsZW1lbnQiLCJpc0Nvbm5lY3RlZCIsImN1cnJlbnQiLCJldmVudCIsIkV2ZW50IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3cml0YWJsZSIsInZhbHVlIiwicHJldmVudGVkIiwic3RvcHBlZCIsIm5hdGl2ZUV2ZW50IiwiY3VycmVudFRhcmdldCIsInRhcmdldCIsImlzRGVmYXVsdFByZXZlbnRlZCIsImlzUHJvcGFnYXRpb25TdG9wcGVkIiwicGVyc2lzdCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiTk9ERV9FTlYiLCJvcmlnU3JjIiwiVVJMIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwiZ2V0QXR0cmlidXRlIiwid2lkdGhWaWV3cG9ydFJhdGlvIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJpbm5lcldpZHRoIiwid2Fybk9uY2UiLCJwb3NpdGlvbiIsImdldENvbXB1dGVkU3R5bGUiLCJ2YWxpZCIsImluY2x1ZGVzIiwibWFwIiwiU3RyaW5nIiwiam9pbiIsImhlaWdodCIsImhlaWdodE1vZGlmaWVkIiwidG9TdHJpbmciLCJ3aWR0aE1vZGlmaWVkIiwiZ2V0RHluYW1pY1Byb3BzIiwiZmV0Y2hQcmlvcml0eSIsIkJvb2xlYW4iLCJ1c2UiLCJmZXRjaHByaW9yaXR5IiwiSW1hZ2VFbGVtZW50IiwiZm9yd2FyZFJlZiIsImZvcndhcmRlZFJlZiIsInNyY1NldCIsInNpemVzIiwiZGVjb2RpbmciLCJjbGFzc05hbWUiLCJzdHlsZSIsImxvYWRpbmciLCJmaWxsIiwic2V0U2hvd0FsdFRleHQiLCJvbkxvYWQiLCJvbkVycm9yIiwicmVzdCIsIm93blJlZiIsInVzZUNhbGxiYWNrIiwiY29uc29sZSIsImVycm9yIiwiY29tcGxldGUiLCJyZWYiLCJ1c2VNZXJnZWRSZWYiLCJkYXRhLW5pbWciLCJJbWFnZVByZWxvYWQiLCJpc0FwcFJvdXRlciIsImltZ0F0dHJpYnV0ZXMiLCJvcHRzIiwiYXMiLCJpbWFnZVNyY1NldCIsImltYWdlU2l6ZXMiLCJjcm9zc09yaWdpbiIsInJlZmVycmVyUG9saWN5IiwiUmVhY3RET00iLCJwcmVsb2FkIiwiSGVhZCIsImxpbmsiLCJyZWwiLCJocmVmIiwidW5kZWZpbmVkIiwicHJvcHMiLCJwYWdlc1JvdXRlciIsInVzZUNvbnRleHQiLCJSb3V0ZXJDb250ZXh0IiwiY29uZmlnQ29udGV4dCIsIkltYWdlQ29uZmlnQ29udGV4dCIsImNvbmZpZyIsInVzZU1lbW8iLCJjIiwiaW1hZ2VDb25maWdEZWZhdWx0IiwiYWxsU2l6ZXMiLCJkZXZpY2VTaXplcyIsInNvcnQiLCJhIiwiYiIsInF1YWxpdGllcyIsIm9uTG9hZGluZ0NvbXBsZXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiYmx1ckNvbXBsZXRlIiwidXNlU3RhdGUiLCJzaG93QWx0VGV4dCIsIm1ldGEiLCJpbWdNZXRhIiwiZ2V0SW1nUHJvcHMiLCJkZWZhdWx0TG9hZGVyIiwiaW1nQ29uZiIsInByaW9yaXR5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/image-component.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/client/use-merged-ref.js":
/*!*********************************************************!*\
  !*** ./node_modules/next/dist/client/use-merged-ref.js ***!
  \*********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"useMergedRef\", ({\n    enumerable: true,\n    get: function() {\n        return useMergedRef;\n    }\n}));\nconst _react = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\nfunction useMergedRef(refA, refB) {\n    const cleanupA = (0, _react.useRef)(null);\n    const cleanupB = (0, _react.useRef)(null);\n    // NOTE: In theory, we could skip the wrapping if only one of the refs is non-null.\n    // (this happens often if the user doesn't pass a ref to Link/Form/Image)\n    // But this can cause us to leak a cleanup-ref into user code (e.g. via `<Link legacyBehavior>`),\n    // and the user might pass that ref into ref-merging library that doesn't support cleanup refs\n    // (because it hasn't been updated for React 19)\n    // which can then cause things to blow up, because a cleanup-returning ref gets called with `null`.\n    // So in practice, it's safer to be defensive and always wrap the ref, even on React 19.\n    return (0, _react.useCallback)((current)=>{\n        if (current === null) {\n            const cleanupFnA = cleanupA.current;\n            if (cleanupFnA) {\n                cleanupA.current = null;\n                cleanupFnA();\n            }\n            const cleanupFnB = cleanupB.current;\n            if (cleanupFnB) {\n                cleanupB.current = null;\n                cleanupFnB();\n            }\n        } else {\n            if (refA) {\n                cleanupA.current = applyRef(refA, current);\n            }\n            if (refB) {\n                cleanupB.current = applyRef(refB, current);\n            }\n        }\n    }, [\n        refA,\n        refB\n    ]);\n}\nfunction applyRef(refA, current) {\n    if (typeof refA === 'function') {\n        const cleanup = refA(current);\n        if (typeof cleanup === 'function') {\n            return cleanup;\n        } else {\n            return ()=>refA(null);\n        }\n    } else {\n        refA.current = current;\n        return ()=>{\n            refA.current = null;\n        };\n    }\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n    Object.defineProperty(exports.default, '__esModule', {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=use-merged-ref.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L3VzZS1tZXJnZWQtcmVmLmpzIiwibWFwcGluZ3MiOiI7Ozs7Z0RBU2dCQTs7O2VBQUFBOzs7bUNBVDhCO0FBU3ZDLFNBQVNBLGFBQ2RDLElBQW1CLEVBQ25CQyxJQUFtQjtJQUVuQixNQUFNQyxXQUFXQyxDQUFBQSxHQUFBQSxPQUFBQSxNQUFBQSxFQUE0QjtJQUM3QyxNQUFNQyxXQUFXRCxDQUFBQSxHQUFBQSxPQUFBQSxNQUFBQSxFQUE0QjtJQUU3QyxtRkFBbUY7SUFDbkYseUVBQXlFO0lBQ3pFLGlHQUFpRztJQUNqRyw4RkFBOEY7SUFDOUYsZ0RBQWdEO0lBQ2hELG1HQUFtRztJQUNuRyx3RkFBd0Y7SUFDeEYsT0FBT0UsQ0FBQUEsR0FBQUEsT0FBQUEsV0FBQUEsRUFDTCxDQUFDQztRQUNDLElBQUlBLFlBQVksTUFBTTtZQUNwQixNQUFNQyxhQUFhTCxTQUFTSSxPQUFPO1lBQ25DLElBQUlDLFlBQVk7Z0JBQ2RMLFNBQVNJLE9BQU8sR0FBRztnQkFDbkJDO1lBQ0Y7WUFDQSxNQUFNQyxhQUFhSixTQUFTRSxPQUFPO1lBQ25DLElBQUlFLFlBQVk7Z0JBQ2RKLFNBQVNFLE9BQU8sR0FBRztnQkFDbkJFO1lBQ0Y7UUFDRixPQUFPO1lBQ0wsSUFBSVIsTUFBTTtnQkFDUkUsU0FBU0ksT0FBTyxHQUFHRyxTQUFTVCxNQUFNTTtZQUNwQztZQUNBLElBQUlMLE1BQU07Z0JBQ1JHLFNBQVNFLE9BQU8sR0FBR0csU0FBU1IsTUFBTUs7WUFDcEM7UUFDRjtJQUNGLEdBQ0E7UUFBQ047UUFBTUM7S0FBSztBQUVoQjtBQUVBLFNBQVNRLFNBQ1BULElBQWdDLEVBQ2hDTSxPQUFpQjtJQUVqQixJQUFJLE9BQU9OLFNBQVMsWUFBWTtRQUM5QixNQUFNVSxVQUFVVixLQUFLTTtRQUNyQixJQUFJLE9BQU9JLFlBQVksWUFBWTtZQUNqQyxPQUFPQTtRQUNULE9BQU87WUFDTCxPQUFPLElBQU1WLEtBQUs7UUFDcEI7SUFDRixPQUFPO1FBQ0xBLEtBQUtNLE9BQU8sR0FBR0E7UUFDZixPQUFPO1lBQ0xOLEtBQUtNLE9BQU8sR0FBRztRQUNqQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9zcmMvY2xpZW50L3VzZS1tZXJnZWQtcmVmLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHR5cGUgUmVmIH0gZnJvbSAncmVhY3QnXG5cbi8vIFRoaXMgaXMgYSBjb21wYXRpYmlsaXR5IGhvb2sgdG8gc3VwcG9ydCBSZWFjdCAxOCBhbmQgMTkgcmVmcy5cbi8vIEluIDE5LCBhIGNsZWFudXAgZnVuY3Rpb24gZnJvbSByZWZzIG1heSBiZSByZXR1cm5lZC5cbi8vIEluIDE4LCByZXR1cm5pbmcgYSBjbGVhbnVwIGZ1bmN0aW9uIGNyZWF0ZXMgYSB3YXJuaW5nLlxuLy8gU2luY2Ugd2UgdGFrZSB1c2Vyc3BhY2UgcmVmcywgd2UgZG9uJ3Qga25vdyBhaGVhZCBvZiB0aW1lIGlmIGEgY2xlYW51cCBmdW5jdGlvbiB3aWxsIGJlIHJldHVybmVkLlxuLy8gVGhpcyBpbXBsZW1lbnRzIGNsZWFudXAgZnVuY3Rpb25zIHdpdGggdGhlIG9sZCBiZWhhdmlvciBpbiAxOC5cbi8vIFdlIGtub3cgcmVmcyBhcmUgYWx3YXlzIGNhbGxlZCBhbHRlcm5hdGluZyB3aXRoIGBudWxsYCBhbmQgdGhlbiBgVGAuXG4vLyBTbyBhIGNhbGwgd2l0aCBgbnVsbGAgbWVhbnMgd2UgbmVlZCB0byBjYWxsIHRoZSBwcmV2aW91cyBjbGVhbnVwIGZ1bmN0aW9ucy5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNZXJnZWRSZWY8VEVsZW1lbnQ+KFxuICByZWZBOiBSZWY8VEVsZW1lbnQ+LFxuICByZWZCOiBSZWY8VEVsZW1lbnQ+XG4pOiBSZWY8VEVsZW1lbnQ+IHtcbiAgY29uc3QgY2xlYW51cEEgPSB1c2VSZWY8KCgpID0+IHZvaWQpIHwgbnVsbD4obnVsbClcbiAgY29uc3QgY2xlYW51cEIgPSB1c2VSZWY8KCgpID0+IHZvaWQpIHwgbnVsbD4obnVsbClcblxuICAvLyBOT1RFOiBJbiB0aGVvcnksIHdlIGNvdWxkIHNraXAgdGhlIHdyYXBwaW5nIGlmIG9ubHkgb25lIG9mIHRoZSByZWZzIGlzIG5vbi1udWxsLlxuICAvLyAodGhpcyBoYXBwZW5zIG9mdGVuIGlmIHRoZSB1c2VyIGRvZXNuJ3QgcGFzcyBhIHJlZiB0byBMaW5rL0Zvcm0vSW1hZ2UpXG4gIC8vIEJ1dCB0aGlzIGNhbiBjYXVzZSB1cyB0byBsZWFrIGEgY2xlYW51cC1yZWYgaW50byB1c2VyIGNvZGUgKGUuZy4gdmlhIGA8TGluayBsZWdhY3lCZWhhdmlvcj5gKSxcbiAgLy8gYW5kIHRoZSB1c2VyIG1pZ2h0IHBhc3MgdGhhdCByZWYgaW50byByZWYtbWVyZ2luZyBsaWJyYXJ5IHRoYXQgZG9lc24ndCBzdXBwb3J0IGNsZWFudXAgcmVmc1xuICAvLyAoYmVjYXVzZSBpdCBoYXNuJ3QgYmVlbiB1cGRhdGVkIGZvciBSZWFjdCAxOSlcbiAgLy8gd2hpY2ggY2FuIHRoZW4gY2F1c2UgdGhpbmdzIHRvIGJsb3cgdXAsIGJlY2F1c2UgYSBjbGVhbnVwLXJldHVybmluZyByZWYgZ2V0cyBjYWxsZWQgd2l0aCBgbnVsbGAuXG4gIC8vIFNvIGluIHByYWN0aWNlLCBpdCdzIHNhZmVyIHRvIGJlIGRlZmVuc2l2ZSBhbmQgYWx3YXlzIHdyYXAgdGhlIHJlZiwgZXZlbiBvbiBSZWFjdCAxOS5cbiAgcmV0dXJuIHVzZUNhbGxiYWNrKFxuICAgIChjdXJyZW50OiBURWxlbWVudCB8IG51bGwpOiB2b2lkID0+IHtcbiAgICAgIGlmIChjdXJyZW50ID09PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGNsZWFudXBGbkEgPSBjbGVhbnVwQS5jdXJyZW50XG4gICAgICAgIGlmIChjbGVhbnVwRm5BKSB7XG4gICAgICAgICAgY2xlYW51cEEuY3VycmVudCA9IG51bGxcbiAgICAgICAgICBjbGVhbnVwRm5BKClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGVhbnVwRm5CID0gY2xlYW51cEIuY3VycmVudFxuICAgICAgICBpZiAoY2xlYW51cEZuQikge1xuICAgICAgICAgIGNsZWFudXBCLmN1cnJlbnQgPSBudWxsXG4gICAgICAgICAgY2xlYW51cEZuQigpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyZWZBKSB7XG4gICAgICAgICAgY2xlYW51cEEuY3VycmVudCA9IGFwcGx5UmVmKHJlZkEsIGN1cnJlbnQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlZkIpIHtcbiAgICAgICAgICBjbGVhbnVwQi5jdXJyZW50ID0gYXBwbHlSZWYocmVmQiwgY3VycmVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgW3JlZkEsIHJlZkJdXG4gIClcbn1cblxuZnVuY3Rpb24gYXBwbHlSZWY8VEVsZW1lbnQ+KFxuICByZWZBOiBOb25OdWxsYWJsZTxSZWY8VEVsZW1lbnQ+PixcbiAgY3VycmVudDogVEVsZW1lbnRcbikge1xuICBpZiAodHlwZW9mIHJlZkEgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zdCBjbGVhbnVwID0gcmVmQShjdXJyZW50KVxuICAgIGlmICh0eXBlb2YgY2xlYW51cCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGNsZWFudXBcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgpID0+IHJlZkEobnVsbClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVmQS5jdXJyZW50ID0gY3VycmVudFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZWZBLmN1cnJlbnQgPSBudWxsXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsidXNlTWVyZ2VkUmVmIiwicmVmQSIsInJlZkIiLCJjbGVhbnVwQSIsInVzZVJlZiIsImNsZWFudXBCIiwidXNlQ2FsbGJhY2siLCJjdXJyZW50IiwiY2xlYW51cEZuQSIsImNsZWFudXBGbkIiLCJhcHBseVJlZiIsImNsZWFudXAiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/use-merged-ref.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/buffer/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/next/dist/compiled/buffer/index.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("var __dirname = \"/\";\n(function(){var e={675:function(e,r){\"use strict\";r.byteLength=byteLength;r.toByteArray=toByteArray;r.fromByteArray=fromByteArray;var t=[];var f=[];var n=typeof Uint8Array!==\"undefined\"?Uint8Array:Array;var i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";for(var o=0,u=i.length;o<u;++o){t[o]=i[o];f[i.charCodeAt(o)]=o}f[\"-\".charCodeAt(0)]=62;f[\"_\".charCodeAt(0)]=63;function getLens(e){var r=e.length;if(r%4>0){throw new Error(\"Invalid string. Length must be a multiple of 4\")}var t=e.indexOf(\"=\");if(t===-1)t=r;var f=t===r?0:4-t%4;return[t,f]}function byteLength(e){var r=getLens(e);var t=r[0];var f=r[1];return(t+f)*3/4-f}function _byteLength(e,r,t){return(r+t)*3/4-t}function toByteArray(e){var r;var t=getLens(e);var i=t[0];var o=t[1];var u=new n(_byteLength(e,i,o));var a=0;var s=o>0?i-4:i;var h;for(h=0;h<s;h+=4){r=f[e.charCodeAt(h)]<<18|f[e.charCodeAt(h+1)]<<12|f[e.charCodeAt(h+2)]<<6|f[e.charCodeAt(h+3)];u[a++]=r>>16&255;u[a++]=r>>8&255;u[a++]=r&255}if(o===2){r=f[e.charCodeAt(h)]<<2|f[e.charCodeAt(h+1)]>>4;u[a++]=r&255}if(o===1){r=f[e.charCodeAt(h)]<<10|f[e.charCodeAt(h+1)]<<4|f[e.charCodeAt(h+2)]>>2;u[a++]=r>>8&255;u[a++]=r&255}return u}function tripletToBase64(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[e&63]}function encodeChunk(e,r,t){var f;var n=[];for(var i=r;i<t;i+=3){f=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255);n.push(tripletToBase64(f))}return n.join(\"\")}function fromByteArray(e){var r;var f=e.length;var n=f%3;var i=[];var o=16383;for(var u=0,a=f-n;u<a;u+=o){i.push(encodeChunk(e,u,u+o>a?a:u+o))}if(n===1){r=e[f-1];i.push(t[r>>2]+t[r<<4&63]+\"==\")}else if(n===2){r=(e[f-2]<<8)+e[f-1];i.push(t[r>>10]+t[r>>4&63]+t[r<<2&63]+\"=\")}return i.join(\"\")}},72:function(e,r,t){\"use strict\";\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */var f=t(675);var n=t(783);var i=typeof Symbol===\"function\"&&typeof Symbol.for===\"function\"?Symbol.for(\"nodejs.util.inspect.custom\"):null;r.Buffer=Buffer;r.SlowBuffer=SlowBuffer;r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!==\"undefined\"&&typeof console.error===\"function\"){console.error(\"This browser lacks typed array (Uint8Array) support which is required by \"+\"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.\")}function typedArraySupport(){try{var e=new Uint8Array(1);var r={foo:function(){return 42}};Object.setPrototypeOf(r,Uint8Array.prototype);Object.setPrototypeOf(e,r);return e.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,\"parent\",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,\"offset\",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(e){if(e>o){throw new RangeError('The value \"'+e+'\" is invalid for option \"size\"')}var r=new Uint8Array(e);Object.setPrototypeOf(r,Buffer.prototype);return r}function Buffer(e,r,t){if(typeof e===\"number\"){if(typeof r===\"string\"){throw new TypeError('The \"string\" argument must be of type string. Received type number')}return allocUnsafe(e)}return from(e,r,t)}Buffer.poolSize=8192;function from(e,r,t){if(typeof e===\"string\"){return fromString(e,r)}if(ArrayBuffer.isView(e)){return fromArrayLike(e)}if(e==null){throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, \"+\"or Array-like Object. Received type \"+typeof e)}if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer)){return fromArrayBuffer(e,r,t)}if(typeof SharedArrayBuffer!==\"undefined\"&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer))){return fromArrayBuffer(e,r,t)}if(typeof e===\"number\"){throw new TypeError('The \"value\" argument must not be of type number. Received type number')}var f=e.valueOf&&e.valueOf();if(f!=null&&f!==e){return Buffer.from(f,r,t)}var n=fromObject(e);if(n)return n;if(typeof Symbol!==\"undefined\"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]===\"function\"){return Buffer.from(e[Symbol.toPrimitive](\"string\"),r,t)}throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, \"+\"or Array-like Object. Received type \"+typeof e)}Buffer.from=function(e,r,t){return from(e,r,t)};Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype);Object.setPrototypeOf(Buffer,Uint8Array);function assertSize(e){if(typeof e!==\"number\"){throw new TypeError('\"size\" argument must be of type number')}else if(e<0){throw new RangeError('The value \"'+e+'\" is invalid for option \"size\"')}}function alloc(e,r,t){assertSize(e);if(e<=0){return createBuffer(e)}if(r!==undefined){return typeof t===\"string\"?createBuffer(e).fill(r,t):createBuffer(e).fill(r)}return createBuffer(e)}Buffer.alloc=function(e,r,t){return alloc(e,r,t)};function allocUnsafe(e){assertSize(e);return createBuffer(e<0?0:checked(e)|0)}Buffer.allocUnsafe=function(e){return allocUnsafe(e)};Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)};function fromString(e,r){if(typeof r!==\"string\"||r===\"\"){r=\"utf8\"}if(!Buffer.isEncoding(r)){throw new TypeError(\"Unknown encoding: \"+r)}var t=byteLength(e,r)|0;var f=createBuffer(t);var n=f.write(e,r);if(n!==t){f=f.slice(0,n)}return f}function fromArrayLike(e){var r=e.length<0?0:checked(e.length)|0;var t=createBuffer(r);for(var f=0;f<r;f+=1){t[f]=e[f]&255}return t}function fromArrayBuffer(e,r,t){if(r<0||e.byteLength<r){throw new RangeError('\"offset\" is outside of buffer bounds')}if(e.byteLength<r+(t||0)){throw new RangeError('\"length\" is outside of buffer bounds')}var f;if(r===undefined&&t===undefined){f=new Uint8Array(e)}else if(t===undefined){f=new Uint8Array(e,r)}else{f=new Uint8Array(e,r,t)}Object.setPrototypeOf(f,Buffer.prototype);return f}function fromObject(e){if(Buffer.isBuffer(e)){var r=checked(e.length)|0;var t=createBuffer(r);if(t.length===0){return t}e.copy(t,0,0,r);return t}if(e.length!==undefined){if(typeof e.length!==\"number\"||numberIsNaN(e.length)){return createBuffer(0)}return fromArrayLike(e)}if(e.type===\"Buffer\"&&Array.isArray(e.data)){return fromArrayLike(e.data)}}function checked(e){if(e>=o){throw new RangeError(\"Attempt to allocate Buffer larger than maximum \"+\"size: 0x\"+o.toString(16)+\" bytes\")}return e|0}function SlowBuffer(e){if(+e!=e){e=0}return Buffer.alloc(+e)}Buffer.isBuffer=function isBuffer(e){return e!=null&&e._isBuffer===true&&e!==Buffer.prototype};Buffer.compare=function compare(e,r){if(isInstance(e,Uint8Array))e=Buffer.from(e,e.offset,e.byteLength);if(isInstance(r,Uint8Array))r=Buffer.from(r,r.offset,r.byteLength);if(!Buffer.isBuffer(e)||!Buffer.isBuffer(r)){throw new TypeError('The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array')}if(e===r)return 0;var t=e.length;var f=r.length;for(var n=0,i=Math.min(t,f);n<i;++n){if(e[n]!==r[n]){t=e[n];f=r[n];break}}if(t<f)return-1;if(f<t)return 1;return 0};Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return true;default:return false}};Buffer.concat=function concat(e,r){if(!Array.isArray(e)){throw new TypeError('\"list\" argument must be an Array of Buffers')}if(e.length===0){return Buffer.alloc(0)}var t;if(r===undefined){r=0;for(t=0;t<e.length;++t){r+=e[t].length}}var f=Buffer.allocUnsafe(r);var n=0;for(t=0;t<e.length;++t){var i=e[t];if(isInstance(i,Uint8Array)){i=Buffer.from(i)}if(!Buffer.isBuffer(i)){throw new TypeError('\"list\" argument must be an Array of Buffers')}i.copy(f,n);n+=i.length}return f};function byteLength(e,r){if(Buffer.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer)){return e.byteLength}if(typeof e!==\"string\"){throw new TypeError('The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. '+\"Received type \"+typeof e)}var t=e.length;var f=arguments.length>2&&arguments[2]===true;if(!f&&t===0)return 0;var n=false;for(;;){switch(r){case\"ascii\":case\"latin1\":case\"binary\":return t;case\"utf8\":case\"utf-8\":return utf8ToBytes(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return t*2;case\"hex\":return t>>>1;case\"base64\":return base64ToBytes(e).length;default:if(n){return f?-1:utf8ToBytes(e).length}r=(\"\"+r).toLowerCase();n=true}}}Buffer.byteLength=byteLength;function slowToString(e,r,t){var f=false;if(r===undefined||r<0){r=0}if(r>this.length){return\"\"}if(t===undefined||t>this.length){t=this.length}if(t<=0){return\"\"}t>>>=0;r>>>=0;if(t<=r){return\"\"}if(!e)e=\"utf8\";while(true){switch(e){case\"hex\":return hexSlice(this,r,t);case\"utf8\":case\"utf-8\":return utf8Slice(this,r,t);case\"ascii\":return asciiSlice(this,r,t);case\"latin1\":case\"binary\":return latin1Slice(this,r,t);case\"base64\":return base64Slice(this,r,t);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return utf16leSlice(this,r,t);default:if(f)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase();f=true}}}Buffer.prototype._isBuffer=true;function swap(e,r,t){var f=e[r];e[r]=e[t];e[t]=f}Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!==0){throw new RangeError(\"Buffer size must be a multiple of 16-bits\")}for(var r=0;r<e;r+=2){swap(this,r,r+1)}return this};Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!==0){throw new RangeError(\"Buffer size must be a multiple of 32-bits\")}for(var r=0;r<e;r+=4){swap(this,r,r+3);swap(this,r+1,r+2)}return this};Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!==0){throw new RangeError(\"Buffer size must be a multiple of 64-bits\")}for(var r=0;r<e;r+=8){swap(this,r,r+7);swap(this,r+1,r+6);swap(this,r+2,r+5);swap(this,r+3,r+4)}return this};Buffer.prototype.toString=function toString(){var e=this.length;if(e===0)return\"\";if(arguments.length===0)return utf8Slice(this,0,e);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");if(this===e)return true;return Buffer.compare(this,e)===0};Buffer.prototype.inspect=function inspect(){var e=\"\";var t=r.INSPECT_MAX_BYTES;e=this.toString(\"hex\",0,t).replace(/(.{2})/g,\"$1 \").trim();if(this.length>t)e+=\" ... \";return\"<Buffer \"+e+\">\"};if(i){Buffer.prototype[i]=Buffer.prototype.inspect}Buffer.prototype.compare=function compare(e,r,t,f,n){if(isInstance(e,Uint8Array)){e=Buffer.from(e,e.offset,e.byteLength)}if(!Buffer.isBuffer(e)){throw new TypeError('The \"target\" argument must be one of type Buffer or Uint8Array. '+\"Received type \"+typeof e)}if(r===undefined){r=0}if(t===undefined){t=e?e.length:0}if(f===undefined){f=0}if(n===undefined){n=this.length}if(r<0||t>e.length||f<0||n>this.length){throw new RangeError(\"out of range index\")}if(f>=n&&r>=t){return 0}if(f>=n){return-1}if(r>=t){return 1}r>>>=0;t>>>=0;f>>>=0;n>>>=0;if(this===e)return 0;var i=n-f;var o=t-r;var u=Math.min(i,o);var a=this.slice(f,n);var s=e.slice(r,t);for(var h=0;h<u;++h){if(a[h]!==s[h]){i=a[h];o=s[h];break}}if(i<o)return-1;if(o<i)return 1;return 0};function bidirectionalIndexOf(e,r,t,f,n){if(e.length===0)return-1;if(typeof t===\"string\"){f=t;t=0}else if(t>2147483647){t=2147483647}else if(t<-2147483648){t=-2147483648}t=+t;if(numberIsNaN(t)){t=n?0:e.length-1}if(t<0)t=e.length+t;if(t>=e.length){if(n)return-1;else t=e.length-1}else if(t<0){if(n)t=0;else return-1}if(typeof r===\"string\"){r=Buffer.from(r,f)}if(Buffer.isBuffer(r)){if(r.length===0){return-1}return arrayIndexOf(e,r,t,f,n)}else if(typeof r===\"number\"){r=r&255;if(typeof Uint8Array.prototype.indexOf===\"function\"){if(n){return Uint8Array.prototype.indexOf.call(e,r,t)}else{return Uint8Array.prototype.lastIndexOf.call(e,r,t)}}return arrayIndexOf(e,[r],t,f,n)}throw new TypeError(\"val must be string, number or Buffer\")}function arrayIndexOf(e,r,t,f,n){var i=1;var o=e.length;var u=r.length;if(f!==undefined){f=String(f).toLowerCase();if(f===\"ucs2\"||f===\"ucs-2\"||f===\"utf16le\"||f===\"utf-16le\"){if(e.length<2||r.length<2){return-1}i=2;o/=2;u/=2;t/=2}}function read(e,r){if(i===1){return e[r]}else{return e.readUInt16BE(r*i)}}var a;if(n){var s=-1;for(a=t;a<o;a++){if(read(e,a)===read(r,s===-1?0:a-s)){if(s===-1)s=a;if(a-s+1===u)return s*i}else{if(s!==-1)a-=a-s;s=-1}}}else{if(t+u>o)t=o-u;for(a=t;a>=0;a--){var h=true;for(var c=0;c<u;c++){if(read(e,a+c)!==read(r,c)){h=false;break}}if(h)return a}}return-1}Buffer.prototype.includes=function includes(e,r,t){return this.indexOf(e,r,t)!==-1};Buffer.prototype.indexOf=function indexOf(e,r,t){return bidirectionalIndexOf(this,e,r,t,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(e,r,t){return bidirectionalIndexOf(this,e,r,t,false)};function hexWrite(e,r,t,f){t=Number(t)||0;var n=e.length-t;if(!f){f=n}else{f=Number(f);if(f>n){f=n}}var i=r.length;if(f>i/2){f=i/2}for(var o=0;o<f;++o){var u=parseInt(r.substr(o*2,2),16);if(numberIsNaN(u))return o;e[t+o]=u}return o}function utf8Write(e,r,t,f){return blitBuffer(utf8ToBytes(r,e.length-t),e,t,f)}function asciiWrite(e,r,t,f){return blitBuffer(asciiToBytes(r),e,t,f)}function latin1Write(e,r,t,f){return asciiWrite(e,r,t,f)}function base64Write(e,r,t,f){return blitBuffer(base64ToBytes(r),e,t,f)}function ucs2Write(e,r,t,f){return blitBuffer(utf16leToBytes(r,e.length-t),e,t,f)}Buffer.prototype.write=function write(e,r,t,f){if(r===undefined){f=\"utf8\";t=this.length;r=0}else if(t===undefined&&typeof r===\"string\"){f=r;t=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(t)){t=t>>>0;if(f===undefined)f=\"utf8\"}else{f=t;t=undefined}}else{throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\")}var n=this.length-r;if(t===undefined||t>n)t=n;if(e.length>0&&(t<0||r<0)||r>this.length){throw new RangeError(\"Attempt to write outside buffer bounds\")}if(!f)f=\"utf8\";var i=false;for(;;){switch(f){case\"hex\":return hexWrite(this,e,r,t);case\"utf8\":case\"utf-8\":return utf8Write(this,e,r,t);case\"ascii\":return asciiWrite(this,e,r,t);case\"latin1\":case\"binary\":return latin1Write(this,e,r,t);case\"base64\":return base64Write(this,e,r,t);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return ucs2Write(this,e,r,t);default:if(i)throw new TypeError(\"Unknown encoding: \"+f);f=(\"\"+f).toLowerCase();i=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(e,r,t){if(r===0&&t===e.length){return f.fromByteArray(e)}else{return f.fromByteArray(e.slice(r,t))}}function utf8Slice(e,r,t){t=Math.min(e.length,t);var f=[];var n=r;while(n<t){var i=e[n];var o=null;var u=i>239?4:i>223?3:i>191?2:1;if(n+u<=t){var a,s,h,c;switch(u){case 1:if(i<128){o=i}break;case 2:a=e[n+1];if((a&192)===128){c=(i&31)<<6|a&63;if(c>127){o=c}}break;case 3:a=e[n+1];s=e[n+2];if((a&192)===128&&(s&192)===128){c=(i&15)<<12|(a&63)<<6|s&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:a=e[n+1];s=e[n+2];h=e[n+3];if((a&192)===128&&(s&192)===128&&(h&192)===128){c=(i&15)<<18|(a&63)<<12|(s&63)<<6|h&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;u=1}else if(o>65535){o-=65536;f.push(o>>>10&1023|55296);o=56320|o&1023}f.push(o);n+=u}return decodeCodePointsArray(f)}var u=4096;function decodeCodePointsArray(e){var r=e.length;if(r<=u){return String.fromCharCode.apply(String,e)}var t=\"\";var f=0;while(f<r){t+=String.fromCharCode.apply(String,e.slice(f,f+=u))}return t}function asciiSlice(e,r,t){var f=\"\";t=Math.min(e.length,t);for(var n=r;n<t;++n){f+=String.fromCharCode(e[n]&127)}return f}function latin1Slice(e,r,t){var f=\"\";t=Math.min(e.length,t);for(var n=r;n<t;++n){f+=String.fromCharCode(e[n])}return f}function hexSlice(e,r,t){var f=e.length;if(!r||r<0)r=0;if(!t||t<0||t>f)t=f;var n=\"\";for(var i=r;i<t;++i){n+=s[e[i]]}return n}function utf16leSlice(e,r,t){var f=e.slice(r,t);var n=\"\";for(var i=0;i<f.length;i+=2){n+=String.fromCharCode(f[i]+f[i+1]*256)}return n}Buffer.prototype.slice=function slice(e,r){var t=this.length;e=~~e;r=r===undefined?t:~~r;if(e<0){e+=t;if(e<0)e=0}else if(e>t){e=t}if(r<0){r+=t;if(r<0)r=0}else if(r>t){r=t}if(r<e)r=e;var f=this.subarray(e,r);Object.setPrototypeOf(f,Buffer.prototype);return f};function checkOffset(e,r,t){if(e%1!==0||e<0)throw new RangeError(\"offset is not uint\");if(e+r>t)throw new RangeError(\"Trying to access beyond buffer length\")}Buffer.prototype.readUIntLE=function readUIntLE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=this[e];var n=1;var i=0;while(++i<r&&(n*=256)){f+=this[e+i]*n}return f};Buffer.prototype.readUIntBE=function readUIntBE(e,r,t){e=e>>>0;r=r>>>0;if(!t){checkOffset(e,r,this.length)}var f=this[e+--r];var n=1;while(r>0&&(n*=256)){f+=this[e+--r]*n}return f};Buffer.prototype.readUInt8=function readUInt8(e,r){e=e>>>0;if(!r)checkOffset(e,1,this.length);return this[e]};Buffer.prototype.readUInt16LE=function readUInt16LE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);return this[e]|this[e+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);return this[e]<<8|this[e+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer.prototype.readIntLE=function readIntLE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=this[e];var n=1;var i=0;while(++i<r&&(n*=256)){f+=this[e+i]*n}n*=128;if(f>=n)f-=Math.pow(2,8*r);return f};Buffer.prototype.readIntBE=function readIntBE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=r;var n=1;var i=this[e+--f];while(f>0&&(n*=256)){i+=this[e+--f]*n}n*=128;if(i>=n)i-=Math.pow(2,8*r);return i};Buffer.prototype.readInt8=function readInt8(e,r){e=e>>>0;if(!r)checkOffset(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);var t=this[e]|this[e+1]<<8;return t&32768?t|4294901760:t};Buffer.prototype.readInt16BE=function readInt16BE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);var t=this[e+1]|this[e]<<8;return t&32768?t|4294901760:t};Buffer.prototype.readInt32LE=function readInt32LE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer.prototype.readFloatLE=function readFloatLE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return n.read(this,e,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return n.read(this,e,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(e,r){e=e>>>0;if(!r)checkOffset(e,8,this.length);return n.read(this,e,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(e,r){e=e>>>0;if(!r)checkOffset(e,8,this.length);return n.read(this,e,false,52,8)};function checkInt(e,r,t,f,n,i){if(!Buffer.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(r>n||r<i)throw new RangeError('\"value\" argument is out of bounds');if(t+f>e.length)throw new RangeError(\"Index out of range\")}Buffer.prototype.writeUIntLE=function writeUIntLE(e,r,t,f){e=+e;r=r>>>0;t=t>>>0;if(!f){var n=Math.pow(2,8*t)-1;checkInt(this,e,r,t,n,0)}var i=1;var o=0;this[r]=e&255;while(++o<t&&(i*=256)){this[r+o]=e/i&255}return r+t};Buffer.prototype.writeUIntBE=function writeUIntBE(e,r,t,f){e=+e;r=r>>>0;t=t>>>0;if(!f){var n=Math.pow(2,8*t)-1;checkInt(this,e,r,t,n,0)}var i=t-1;var o=1;this[r+i]=e&255;while(--i>=0&&(o*=256)){this[r+i]=e/o&255}return r+t};Buffer.prototype.writeUInt8=function writeUInt8(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,1,255,0);this[r]=e&255;return r+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,65535,0);this[r]=e&255;this[r+1]=e>>>8;return r+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,65535,0);this[r]=e>>>8;this[r+1]=e&255;return r+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,4294967295,0);this[r+3]=e>>>24;this[r+2]=e>>>16;this[r+1]=e>>>8;this[r]=e&255;return r+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,4294967295,0);this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};Buffer.prototype.writeIntLE=function writeIntLE(e,r,t,f){e=+e;r=r>>>0;if(!f){var n=Math.pow(2,8*t-1);checkInt(this,e,r,t,n-1,-n)}var i=0;var o=1;var u=0;this[r]=e&255;while(++i<t&&(o*=256)){if(e<0&&u===0&&this[r+i-1]!==0){u=1}this[r+i]=(e/o>>0)-u&255}return r+t};Buffer.prototype.writeIntBE=function writeIntBE(e,r,t,f){e=+e;r=r>>>0;if(!f){var n=Math.pow(2,8*t-1);checkInt(this,e,r,t,n-1,-n)}var i=t-1;var o=1;var u=0;this[r+i]=e&255;while(--i>=0&&(o*=256)){if(e<0&&u===0&&this[r+i+1]!==0){u=1}this[r+i]=(e/o>>0)-u&255}return r+t};Buffer.prototype.writeInt8=function writeInt8(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,1,127,-128);if(e<0)e=255+e+1;this[r]=e&255;return r+1};Buffer.prototype.writeInt16LE=function writeInt16LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,32767,-32768);this[r]=e&255;this[r+1]=e>>>8;return r+2};Buffer.prototype.writeInt16BE=function writeInt16BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,32767,-32768);this[r]=e>>>8;this[r+1]=e&255;return r+2};Buffer.prototype.writeInt32LE=function writeInt32LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,2147483647,-2147483648);this[r]=e&255;this[r+1]=e>>>8;this[r+2]=e>>>16;this[r+3]=e>>>24;return r+4};Buffer.prototype.writeInt32BE=function writeInt32BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};function checkIEEE754(e,r,t,f,n,i){if(t+f>e.length)throw new RangeError(\"Index out of range\");if(t<0)throw new RangeError(\"Index out of range\")}function writeFloat(e,r,t,f,i){r=+r;t=t>>>0;if(!i){checkIEEE754(e,r,t,4,34028234663852886e22,-34028234663852886e22)}n.write(e,r,t,f,23,4);return t+4}Buffer.prototype.writeFloatLE=function writeFloatLE(e,r,t){return writeFloat(this,e,r,true,t)};Buffer.prototype.writeFloatBE=function writeFloatBE(e,r,t){return writeFloat(this,e,r,false,t)};function writeDouble(e,r,t,f,i){r=+r;t=t>>>0;if(!i){checkIEEE754(e,r,t,8,17976931348623157e292,-17976931348623157e292)}n.write(e,r,t,f,52,8);return t+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,r,t){return writeDouble(this,e,r,true,t)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,r,t){return writeDouble(this,e,r,false,t)};Buffer.prototype.copy=function copy(e,r,t,f){if(!Buffer.isBuffer(e))throw new TypeError(\"argument should be a Buffer\");if(!t)t=0;if(!f&&f!==0)f=this.length;if(r>=e.length)r=e.length;if(!r)r=0;if(f>0&&f<t)f=t;if(f===t)return 0;if(e.length===0||this.length===0)return 0;if(r<0){throw new RangeError(\"targetStart out of bounds\")}if(t<0||t>=this.length)throw new RangeError(\"Index out of range\");if(f<0)throw new RangeError(\"sourceEnd out of bounds\");if(f>this.length)f=this.length;if(e.length-r<f-t){f=e.length-r+t}var n=f-t;if(this===e&&typeof Uint8Array.prototype.copyWithin===\"function\"){this.copyWithin(r,t,f)}else if(this===e&&t<r&&r<f){for(var i=n-1;i>=0;--i){e[i+r]=this[i+t]}}else{Uint8Array.prototype.set.call(e,this.subarray(t,f),r)}return n};Buffer.prototype.fill=function fill(e,r,t,f){if(typeof e===\"string\"){if(typeof r===\"string\"){f=r;r=0;t=this.length}else if(typeof t===\"string\"){f=t;t=this.length}if(f!==undefined&&typeof f!==\"string\"){throw new TypeError(\"encoding must be a string\")}if(typeof f===\"string\"&&!Buffer.isEncoding(f)){throw new TypeError(\"Unknown encoding: \"+f)}if(e.length===1){var n=e.charCodeAt(0);if(f===\"utf8\"&&n<128||f===\"latin1\"){e=n}}}else if(typeof e===\"number\"){e=e&255}else if(typeof e===\"boolean\"){e=Number(e)}if(r<0||this.length<r||this.length<t){throw new RangeError(\"Out of range index\")}if(t<=r){return this}r=r>>>0;t=t===undefined?this.length:t>>>0;if(!e)e=0;var i;if(typeof e===\"number\"){for(i=r;i<t;++i){this[i]=e}}else{var o=Buffer.isBuffer(e)?e:Buffer.from(e,f);var u=o.length;if(u===0){throw new TypeError('The value \"'+e+'\" is invalid for argument \"value\"')}for(i=0;i<t-r;++i){this[i+r]=o[i%u]}}return this};var a=/[^+/0-9A-Za-z-_]/g;function base64clean(e){e=e.split(\"=\")[0];e=e.trim().replace(a,\"\");if(e.length<2)return\"\";while(e.length%4!==0){e=e+\"=\"}return e}function utf8ToBytes(e,r){r=r||Infinity;var t;var f=e.length;var n=null;var i=[];for(var o=0;o<f;++o){t=e.charCodeAt(o);if(t>55295&&t<57344){if(!n){if(t>56319){if((r-=3)>-1)i.push(239,191,189);continue}else if(o+1===f){if((r-=3)>-1)i.push(239,191,189);continue}n=t;continue}if(t<56320){if((r-=3)>-1)i.push(239,191,189);n=t;continue}t=(n-55296<<10|t-56320)+65536}else if(n){if((r-=3)>-1)i.push(239,191,189)}n=null;if(t<128){if((r-=1)<0)break;i.push(t)}else if(t<2048){if((r-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((r-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((r-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else{throw new Error(\"Invalid code point\")}}return i}function asciiToBytes(e){var r=[];for(var t=0;t<e.length;++t){r.push(e.charCodeAt(t)&255)}return r}function utf16leToBytes(e,r){var t,f,n;var i=[];for(var o=0;o<e.length;++o){if((r-=2)<0)break;t=e.charCodeAt(o);f=t>>8;n=t%256;i.push(n);i.push(f)}return i}function base64ToBytes(e){return f.toByteArray(base64clean(e))}function blitBuffer(e,r,t,f){for(var n=0;n<f;++n){if(n+t>=r.length||n>=e.length)break;r[n+t]=e[n]}return n}function isInstance(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function numberIsNaN(e){return e!==e}var s=function(){var e=\"0123456789abcdef\";var r=new Array(256);for(var t=0;t<16;++t){var f=t*16;for(var n=0;n<16;++n){r[f+n]=e[t]+e[n]}}return r}()},783:function(e,r){\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nr.read=function(e,r,t,f,n){var i,o;var u=n*8-f-1;var a=(1<<u)-1;var s=a>>1;var h=-7;var c=t?n-1:0;var l=t?-1:1;var p=e[r+c];c+=l;i=p&(1<<-h)-1;p>>=-h;h+=u;for(;h>0;i=i*256+e[r+c],c+=l,h-=8){}o=i&(1<<-h)-1;i>>=-h;h+=f;for(;h>0;o=o*256+e[r+c],c+=l,h-=8){}if(i===0){i=1-s}else if(i===a){return o?NaN:(p?-1:1)*Infinity}else{o=o+Math.pow(2,f);i=i-s}return(p?-1:1)*o*Math.pow(2,i-f)};r.write=function(e,r,t,f,n,i){var o,u,a;var s=i*8-n-1;var h=(1<<s)-1;var c=h>>1;var l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=f?0:i-1;var y=f?1:-1;var g=r<0||r===0&&1/r<0?1:0;r=Math.abs(r);if(isNaN(r)||r===Infinity){u=isNaN(r)?1:0;o=h}else{o=Math.floor(Math.log(r)/Math.LN2);if(r*(a=Math.pow(2,-o))<1){o--;a*=2}if(o+c>=1){r+=l/a}else{r+=l*Math.pow(2,1-c)}if(r*a>=2){o++;a/=2}if(o+c>=h){u=0;o=h}else if(o+c>=1){u=(r*a-1)*Math.pow(2,n);o=o+c}else{u=r*Math.pow(2,c-1)*Math.pow(2,n);o=0}}for(;n>=8;e[t+p]=u&255,p+=y,u/=256,n-=8){}o=o<<n|u;s+=n;for(;s>0;e[t+p]=o&255,p+=y,o/=256,s-=8){}e[t+p-y]|=g*128}}};var r={};function __nccwpck_require__(t){var f=r[t];if(f!==undefined){return f.exports}var n=r[t]={exports:{}};var i=true;try{e[t](n,n.exports,__nccwpck_require__);i=false}finally{if(i)delete r[t]}return n.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var t=__nccwpck_require__(72);module.exports=t})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvYnVmZmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7QUFBQSxZQUFZLE9BQU8sa0JBQWtCLGFBQWEsd0JBQXdCLDBCQUEwQiw4QkFBOEIsU0FBUyxTQUFTLHVEQUF1RCx5RUFBeUUsdUJBQXVCLElBQUksS0FBSyxVQUFVLHFCQUFxQix3QkFBd0Isd0JBQXdCLG9CQUFvQixlQUFlLFVBQVUsa0VBQWtFLHFCQUFxQixjQUFjLG9CQUFvQixZQUFZLHVCQUF1QixpQkFBaUIsV0FBVyxXQUFXLGtCQUFrQiw0QkFBNEIsa0JBQWtCLHdCQUF3QixNQUFNLGlCQUFpQixXQUFXLFdBQVcsZ0NBQWdDLFFBQVEsZ0JBQWdCLE1BQU0sUUFBUSxJQUFJLE1BQU0sK0ZBQStGLGlCQUFpQixnQkFBZ0IsYUFBYSxVQUFVLGdEQUFnRCxhQUFhLFVBQVUseUVBQXlFLGdCQUFnQixhQUFhLFNBQVMsNEJBQTRCLGtEQUFrRCw0QkFBNEIsTUFBTSxTQUFTLFlBQVksSUFBSSxNQUFNLHFEQUFxRCwyQkFBMkIsa0JBQWtCLDBCQUEwQixNQUFNLGVBQWUsVUFBVSxTQUFTLFlBQVksa0JBQWtCLElBQUksTUFBTSxxQ0FBcUMsVUFBVSxTQUFTLGdDQUFnQyxlQUFlLHFCQUFxQiwyQ0FBMkMsbUJBQW1CLG9CQUFvQjtBQUM5ckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhLCtHQUErRyxnQkFBZ0Isd0JBQXdCLHVCQUF1QixpQkFBaUIsZUFBZSwrQ0FBK0MsaUdBQWlHLGtLQUFrSyw2QkFBNkIsSUFBSSx3QkFBd0IsT0FBTyxlQUFlLFlBQVksOENBQThDLDJCQUEyQixvQkFBb0IsU0FBUyxjQUFjLGlEQUFpRCwrQkFBK0IsMkNBQTJDLG9CQUFvQixFQUFFLGlEQUFpRCwrQkFBK0IsMkNBQTJDLHdCQUF3QixFQUFFLHlCQUF5QixRQUFRLHVFQUF1RSx3QkFBd0IsMENBQTBDLFNBQVMs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Q0FBK0MsY0FBYyxhQUFhLDRCQUE0QixjQUFjLDJCQUEyQixlQUFlLElBQUksS0FBSyxtQ0FBbUMsMkJBQTJCLElBQUksS0FBSyxXQUFXLE9BQU8sS0FBSyxxQkFBcUIsV0FBVyxJQUFJLEtBQUssV0FBVyxJQUFJLElBQUksZ0JBQWdCLHdCQUF3QixNQUFNLEtBQUssa0NBQWtDLEtBQUssS0FBSyxLQUFLLGdDQUFnQyxTQUFTLEtBQUssS0FBSyxJQUFJLGdDQUFnQyxtQkFBbUIsU0FBUyxnQ0FBZ0MsV0FBVyxrQkFBa0IsaUJBQWlCLFlBQVksWUFBWSxXQUFXLElBQUksc0NBQXNDLFFBQVEsUUFBUSxpQkFBaUIsaUJBQWlCLG1FQUFtRSxTQUFTLEtBQUssOEJBQThCLGlCQUFpQiIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvYnVmZmVyL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe3ZhciBlPXs2NzU6ZnVuY3Rpb24oZSxyKXtcInVzZSBzdHJpY3RcIjtyLmJ5dGVMZW5ndGg9Ynl0ZUxlbmd0aDtyLnRvQnl0ZUFycmF5PXRvQnl0ZUFycmF5O3IuZnJvbUJ5dGVBcnJheT1mcm9tQnl0ZUFycmF5O3ZhciB0PVtdO3ZhciBmPVtdO3ZhciBuPXR5cGVvZiBVaW50OEFycmF5IT09XCJ1bmRlZmluZWRcIj9VaW50OEFycmF5OkFycmF5O3ZhciBpPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiO2Zvcih2YXIgbz0wLHU9aS5sZW5ndGg7bzx1Oysrbyl7dFtvXT1pW29dO2ZbaS5jaGFyQ29kZUF0KG8pXT1vfWZbXCItXCIuY2hhckNvZGVBdCgwKV09NjI7ZltcIl9cIi5jaGFyQ29kZUF0KDApXT02MztmdW5jdGlvbiBnZXRMZW5zKGUpe3ZhciByPWUubGVuZ3RoO2lmKHIlND4wKXt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpfXZhciB0PWUuaW5kZXhPZihcIj1cIik7aWYodD09PS0xKXQ9cjt2YXIgZj10PT09cj8wOjQtdCU0O3JldHVyblt0LGZdfWZ1bmN0aW9uIGJ5dGVMZW5ndGgoZSl7dmFyIHI9Z2V0TGVucyhlKTt2YXIgdD1yWzBdO3ZhciBmPXJbMV07cmV0dXJuKHQrZikqMy80LWZ9ZnVuY3Rpb24gX2J5dGVMZW5ndGgoZSxyLHQpe3JldHVybihyK3QpKjMvNC10fWZ1bmN0aW9uIHRvQnl0ZUFycmF5KGUpe3ZhciByO3ZhciB0PWdldExlbnMoZSk7dmFyIGk9dFswXTt2YXIgbz10WzFdO3ZhciB1PW5ldyBuKF9ieXRlTGVuZ3RoKGUsaSxvKSk7dmFyIGE9MDt2YXIgcz1vPjA/aS00Omk7dmFyIGg7Zm9yKGg9MDtoPHM7aCs9NCl7cj1mW2UuY2hhckNvZGVBdChoKV08PDE4fGZbZS5jaGFyQ29kZUF0KGgrMSldPDwxMnxmW2UuY2hhckNvZGVBdChoKzIpXTw8NnxmW2UuY2hhckNvZGVBdChoKzMpXTt1W2ErK109cj4+MTYmMjU1O3VbYSsrXT1yPj44JjI1NTt1W2ErK109ciYyNTV9aWYobz09PTIpe3I9ZltlLmNoYXJDb2RlQXQoaCldPDwyfGZbZS5jaGFyQ29kZUF0KGgrMSldPj40O3VbYSsrXT1yJjI1NX1pZihvPT09MSl7cj1mW2UuY2hhckNvZGVBdChoKV08PDEwfGZbZS5jaGFyQ29kZUF0KGgrMSldPDw0fGZbZS5jaGFyQ29kZUF0KGgrMildPj4yO3VbYSsrXT1yPj44JjI1NTt1W2ErK109ciYyNTV9cmV0dXJuIHV9ZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0KGUpe3JldHVybiB0W2U+PjE4JjYzXSt0W2U+PjEyJjYzXSt0W2U+PjYmNjNdK3RbZSY2M119ZnVuY3Rpb24gZW5jb2RlQ2h1bmsoZSxyLHQpe3ZhciBmO3ZhciBuPVtdO2Zvcih2YXIgaT1yO2k8dDtpKz0zKXtmPShlW2ldPDwxNiYxNjcxMTY4MCkrKGVbaSsxXTw8OCY2NTI4MCkrKGVbaSsyXSYyNTUpO24ucHVzaCh0cmlwbGV0VG9CYXNlNjQoZikpfXJldHVybiBuLmpvaW4oXCJcIil9ZnVuY3Rpb24gZnJvbUJ5dGVBcnJheShlKXt2YXIgcjt2YXIgZj1lLmxlbmd0aDt2YXIgbj1mJTM7dmFyIGk9W107dmFyIG89MTYzODM7Zm9yKHZhciB1PTAsYT1mLW47dTxhO3UrPW8pe2kucHVzaChlbmNvZGVDaHVuayhlLHUsdStvPmE/YTp1K28pKX1pZihuPT09MSl7cj1lW2YtMV07aS5wdXNoKHRbcj4+Ml0rdFtyPDw0JjYzXStcIj09XCIpfWVsc2UgaWYobj09PTIpe3I9KGVbZi0yXTw8OCkrZVtmLTFdO2kucHVzaCh0W3I+PjEwXSt0W3I+PjQmNjNdK3Rbcjw8MiY2M10rXCI9XCIpfXJldHVybiBpLmpvaW4oXCJcIil9fSw3MjpmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi92YXIgZj10KDY3NSk7dmFyIG49dCg3ODMpO3ZhciBpPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBTeW1ib2wuZm9yPT09XCJmdW5jdGlvblwiP1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKTpudWxsO3IuQnVmZmVyPUJ1ZmZlcjtyLlNsb3dCdWZmZXI9U2xvd0J1ZmZlcjtyLklOU1BFQ1RfTUFYX0JZVEVTPTUwO3ZhciBvPTIxNDc0ODM2NDc7ci5rTWF4TGVuZ3RoPW87QnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dHlwZWRBcnJheVN1cHBvcnQoKTtpZighQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQmJnR5cGVvZiBjb25zb2xlIT09XCJ1bmRlZmluZWRcIiYmdHlwZW9mIGNvbnNvbGUuZXJyb3I9PT1cImZ1bmN0aW9uXCIpe2NvbnNvbGUuZXJyb3IoXCJUaGlzIGJyb3dzZXIgbGFja3MgdHlwZWQgYXJyYXkgKFVpbnQ4QXJyYXkpIHN1cHBvcnQgd2hpY2ggaXMgcmVxdWlyZWQgYnkgXCIrXCJgYnVmZmVyYCB2NS54LiBVc2UgYGJ1ZmZlcmAgdjQueCBpZiB5b3UgcmVxdWlyZSBvbGQgYnJvd3NlciBzdXBwb3J0LlwiKX1mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCgpe3RyeXt2YXIgZT1uZXcgVWludDhBcnJheSgxKTt2YXIgcj17Zm9vOmZ1bmN0aW9uKCl7cmV0dXJuIDQyfX07T2JqZWN0LnNldFByb3RvdHlwZU9mKHIsVWludDhBcnJheS5wcm90b3R5cGUpO09iamVjdC5zZXRQcm90b3R5cGVPZihlLHIpO3JldHVybiBlLmZvbygpPT09NDJ9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSxcInBhcmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7aWYoIUJ1ZmZlci5pc0J1ZmZlcih0aGlzKSlyZXR1cm4gdW5kZWZpbmVkO3JldHVybiB0aGlzLmJ1ZmZlcn19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSxcIm9mZnNldFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7aWYoIUJ1ZmZlci5pc0J1ZmZlcih0aGlzKSlyZXR1cm4gdW5kZWZpbmVkO3JldHVybiB0aGlzLmJ5dGVPZmZzZXR9fSk7ZnVuY3Rpb24gY3JlYXRlQnVmZmVyKGUpe2lmKGU+byl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicrZSsnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJyl9dmFyIHI9bmV3IFVpbnQ4QXJyYXkoZSk7T2JqZWN0LnNldFByb3RvdHlwZU9mKHIsQnVmZmVyLnByb3RvdHlwZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQnVmZmVyKGUscix0KXtpZih0eXBlb2YgZT09PVwibnVtYmVyXCIpe2lmKHR5cGVvZiByPT09XCJzdHJpbmdcIil7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwic3RyaW5nXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZy4gUmVjZWl2ZWQgdHlwZSBudW1iZXInKX1yZXR1cm4gYWxsb2NVbnNhZmUoZSl9cmV0dXJuIGZyb20oZSxyLHQpfUJ1ZmZlci5wb29sU2l6ZT04MTkyO2Z1bmN0aW9uIGZyb20oZSxyLHQpe2lmKHR5cGVvZiBlPT09XCJzdHJpbmdcIil7cmV0dXJuIGZyb21TdHJpbmcoZSxyKX1pZihBcnJheUJ1ZmZlci5pc1ZpZXcoZSkpe3JldHVybiBmcm9tQXJyYXlMaWtlKGUpfWlmKGU9PW51bGwpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBcIitcIm9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlIFwiK3R5cGVvZiBlKX1pZihpc0luc3RhbmNlKGUsQXJyYXlCdWZmZXIpfHxlJiZpc0luc3RhbmNlKGUuYnVmZmVyLEFycmF5QnVmZmVyKSl7cmV0dXJuIGZyb21BcnJheUJ1ZmZlcihlLHIsdCl9aWYodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyIT09XCJ1bmRlZmluZWRcIiYmKGlzSW5zdGFuY2UoZSxTaGFyZWRBcnJheUJ1ZmZlcil8fGUmJmlzSW5zdGFuY2UoZS5idWZmZXIsU2hhcmVkQXJyYXlCdWZmZXIpKSl7cmV0dXJuIGZyb21BcnJheUJ1ZmZlcihlLHIsdCl9aWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcicpfXZhciBmPWUudmFsdWVPZiYmZS52YWx1ZU9mKCk7aWYoZiE9bnVsbCYmZiE9PWUpe3JldHVybiBCdWZmZXIuZnJvbShmLHIsdCl9dmFyIG49ZnJvbU9iamVjdChlKTtpZihuKXJldHVybiBuO2lmKHR5cGVvZiBTeW1ib2whPT1cInVuZGVmaW5lZFwiJiZTeW1ib2wudG9QcmltaXRpdmUhPW51bGwmJnR5cGVvZiBlW1N5bWJvbC50b1ByaW1pdGl2ZV09PT1cImZ1bmN0aW9uXCIpe3JldHVybiBCdWZmZXIuZnJvbShlW1N5bWJvbC50b1ByaW1pdGl2ZV0oXCJzdHJpbmdcIikscix0KX10aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgXCIrXCJvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSBcIit0eXBlb2YgZSl9QnVmZmVyLmZyb209ZnVuY3Rpb24oZSxyLHQpe3JldHVybiBmcm9tKGUscix0KX07T2JqZWN0LnNldFByb3RvdHlwZU9mKEJ1ZmZlci5wcm90b3R5cGUsVWludDhBcnJheS5wcm90b3R5cGUpO09iamVjdC5zZXRQcm90b3R5cGVPZihCdWZmZXIsVWludDhBcnJheSk7ZnVuY3Rpb24gYXNzZXJ0U2l6ZShlKXtpZih0eXBlb2YgZSE9PVwibnVtYmVyXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXInKX1lbHNlIGlmKGU8MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicrZSsnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJyl9fWZ1bmN0aW9uIGFsbG9jKGUscix0KXthc3NlcnRTaXplKGUpO2lmKGU8PTApe3JldHVybiBjcmVhdGVCdWZmZXIoZSl9aWYociE9PXVuZGVmaW5lZCl7cmV0dXJuIHR5cGVvZiB0PT09XCJzdHJpbmdcIj9jcmVhdGVCdWZmZXIoZSkuZmlsbChyLHQpOmNyZWF0ZUJ1ZmZlcihlKS5maWxsKHIpfXJldHVybiBjcmVhdGVCdWZmZXIoZSl9QnVmZmVyLmFsbG9jPWZ1bmN0aW9uKGUscix0KXtyZXR1cm4gYWxsb2MoZSxyLHQpfTtmdW5jdGlvbiBhbGxvY1Vuc2FmZShlKXthc3NlcnRTaXplKGUpO3JldHVybiBjcmVhdGVCdWZmZXIoZTwwPzA6Y2hlY2tlZChlKXwwKX1CdWZmZXIuYWxsb2NVbnNhZmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGFsbG9jVW5zYWZlKGUpfTtCdWZmZXIuYWxsb2NVbnNhZmVTbG93PWZ1bmN0aW9uKGUpe3JldHVybiBhbGxvY1Vuc2FmZShlKX07ZnVuY3Rpb24gZnJvbVN0cmluZyhlLHIpe2lmKHR5cGVvZiByIT09XCJzdHJpbmdcInx8cj09PVwiXCIpe3I9XCJ1dGY4XCJ9aWYoIUJ1ZmZlci5pc0VuY29kaW5nKHIpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrcil9dmFyIHQ9Ynl0ZUxlbmd0aChlLHIpfDA7dmFyIGY9Y3JlYXRlQnVmZmVyKHQpO3ZhciBuPWYud3JpdGUoZSxyKTtpZihuIT09dCl7Zj1mLnNsaWNlKDAsbil9cmV0dXJuIGZ9ZnVuY3Rpb24gZnJvbUFycmF5TGlrZShlKXt2YXIgcj1lLmxlbmd0aDwwPzA6Y2hlY2tlZChlLmxlbmd0aCl8MDt2YXIgdD1jcmVhdGVCdWZmZXIocik7Zm9yKHZhciBmPTA7ZjxyO2YrPTEpe3RbZl09ZVtmXSYyNTV9cmV0dXJuIHR9ZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyKGUscix0KXtpZihyPDB8fGUuYnl0ZUxlbmd0aDxyKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJvZmZzZXRcIiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKX1pZihlLmJ5dGVMZW5ndGg8cisodHx8MCkpe3Rocm93IG5ldyBSYW5nZUVycm9yKCdcImxlbmd0aFwiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpfXZhciBmO2lmKHI9PT11bmRlZmluZWQmJnQ9PT11bmRlZmluZWQpe2Y9bmV3IFVpbnQ4QXJyYXkoZSl9ZWxzZSBpZih0PT09dW5kZWZpbmVkKXtmPW5ldyBVaW50OEFycmF5KGUscil9ZWxzZXtmPW5ldyBVaW50OEFycmF5KGUscix0KX1PYmplY3Quc2V0UHJvdG90eXBlT2YoZixCdWZmZXIucHJvdG90eXBlKTtyZXR1cm4gZn1mdW5jdGlvbiBmcm9tT2JqZWN0KGUpe2lmKEJ1ZmZlci5pc0J1ZmZlcihlKSl7dmFyIHI9Y2hlY2tlZChlLmxlbmd0aCl8MDt2YXIgdD1jcmVhdGVCdWZmZXIocik7aWYodC5sZW5ndGg9PT0wKXtyZXR1cm4gdH1lLmNvcHkodCwwLDAscik7cmV0dXJuIHR9aWYoZS5sZW5ndGghPT11bmRlZmluZWQpe2lmKHR5cGVvZiBlLmxlbmd0aCE9PVwibnVtYmVyXCJ8fG51bWJlcklzTmFOKGUubGVuZ3RoKSl7cmV0dXJuIGNyZWF0ZUJ1ZmZlcigwKX1yZXR1cm4gZnJvbUFycmF5TGlrZShlKX1pZihlLnR5cGU9PT1cIkJ1ZmZlclwiJiZBcnJheS5pc0FycmF5KGUuZGF0YSkpe3JldHVybiBmcm9tQXJyYXlMaWtlKGUuZGF0YSl9fWZ1bmN0aW9uIGNoZWNrZWQoZSl7aWYoZT49byl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIFwiK1wic2l6ZTogMHhcIitvLnRvU3RyaW5nKDE2KStcIiBieXRlc1wiKX1yZXR1cm4gZXwwfWZ1bmN0aW9uIFNsb3dCdWZmZXIoZSl7aWYoK2UhPWUpe2U9MH1yZXR1cm4gQnVmZmVyLmFsbG9jKCtlKX1CdWZmZXIuaXNCdWZmZXI9ZnVuY3Rpb24gaXNCdWZmZXIoZSl7cmV0dXJuIGUhPW51bGwmJmUuX2lzQnVmZmVyPT09dHJ1ZSYmZSE9PUJ1ZmZlci5wcm90b3R5cGV9O0J1ZmZlci5jb21wYXJlPWZ1bmN0aW9uIGNvbXBhcmUoZSxyKXtpZihpc0luc3RhbmNlKGUsVWludDhBcnJheSkpZT1CdWZmZXIuZnJvbShlLGUub2Zmc2V0LGUuYnl0ZUxlbmd0aCk7aWYoaXNJbnN0YW5jZShyLFVpbnQ4QXJyYXkpKXI9QnVmZmVyLmZyb20ocixyLm9mZnNldCxyLmJ5dGVMZW5ndGgpO2lmKCFCdWZmZXIuaXNCdWZmZXIoZSl8fCFCdWZmZXIuaXNCdWZmZXIocikpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImJ1ZjFcIiwgXCJidWYyXCIgYXJndW1lbnRzIG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXknKX1pZihlPT09cilyZXR1cm4gMDt2YXIgdD1lLmxlbmd0aDt2YXIgZj1yLmxlbmd0aDtmb3IodmFyIG49MCxpPU1hdGgubWluKHQsZik7bjxpOysrbil7aWYoZVtuXSE9PXJbbl0pe3Q9ZVtuXTtmPXJbbl07YnJlYWt9fWlmKHQ8ZilyZXR1cm4tMTtpZihmPHQpcmV0dXJuIDE7cmV0dXJuIDB9O0J1ZmZlci5pc0VuY29kaW5nPWZ1bmN0aW9uIGlzRW5jb2RpbmcoZSl7c3dpdGNoKFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcImJhc2U2NFwiOmNhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX07QnVmZmVyLmNvbmNhdD1mdW5jdGlvbiBjb25jYXQoZSxyKXtpZighQXJyYXkuaXNBcnJheShlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyl9aWYoZS5sZW5ndGg9PT0wKXtyZXR1cm4gQnVmZmVyLmFsbG9jKDApfXZhciB0O2lmKHI9PT11bmRlZmluZWQpe3I9MDtmb3IodD0wO3Q8ZS5sZW5ndGg7Kyt0KXtyKz1lW3RdLmxlbmd0aH19dmFyIGY9QnVmZmVyLmFsbG9jVW5zYWZlKHIpO3ZhciBuPTA7Zm9yKHQ9MDt0PGUubGVuZ3RoOysrdCl7dmFyIGk9ZVt0XTtpZihpc0luc3RhbmNlKGksVWludDhBcnJheSkpe2k9QnVmZmVyLmZyb20oaSl9aWYoIUJ1ZmZlci5pc0J1ZmZlcihpKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyl9aS5jb3B5KGYsbik7bis9aS5sZW5ndGh9cmV0dXJuIGZ9O2Z1bmN0aW9uIGJ5dGVMZW5ndGgoZSxyKXtpZihCdWZmZXIuaXNCdWZmZXIoZSkpe3JldHVybiBlLmxlbmd0aH1pZihBcnJheUJ1ZmZlci5pc1ZpZXcoZSl8fGlzSW5zdGFuY2UoZSxBcnJheUJ1ZmZlcikpe3JldHVybiBlLmJ5dGVMZW5ndGh9aWYodHlwZW9mIGUhPT1cInN0cmluZ1wiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJzdHJpbmdcIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBvciBBcnJheUJ1ZmZlci4gJytcIlJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIGUpfXZhciB0PWUubGVuZ3RoO3ZhciBmPWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdPT09dHJ1ZTtpZighZiYmdD09PTApcmV0dXJuIDA7dmFyIG49ZmFsc2U7Zm9yKDs7KXtzd2l0Y2gocil7Y2FzZVwiYXNjaWlcIjpjYXNlXCJsYXRpbjFcIjpjYXNlXCJiaW5hcnlcIjpyZXR1cm4gdDtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gdXRmOFRvQnl0ZXMoZSkubGVuZ3RoO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiB0KjI7Y2FzZVwiaGV4XCI6cmV0dXJuIHQ+Pj4xO2Nhc2VcImJhc2U2NFwiOnJldHVybiBiYXNlNjRUb0J5dGVzKGUpLmxlbmd0aDtkZWZhdWx0OmlmKG4pe3JldHVybiBmPy0xOnV0ZjhUb0J5dGVzKGUpLmxlbmd0aH1yPShcIlwiK3IpLnRvTG93ZXJDYXNlKCk7bj10cnVlfX19QnVmZmVyLmJ5dGVMZW5ndGg9Ynl0ZUxlbmd0aDtmdW5jdGlvbiBzbG93VG9TdHJpbmcoZSxyLHQpe3ZhciBmPWZhbHNlO2lmKHI9PT11bmRlZmluZWR8fHI8MCl7cj0wfWlmKHI+dGhpcy5sZW5ndGgpe3JldHVyblwiXCJ9aWYodD09PXVuZGVmaW5lZHx8dD50aGlzLmxlbmd0aCl7dD10aGlzLmxlbmd0aH1pZih0PD0wKXtyZXR1cm5cIlwifXQ+Pj49MDtyPj4+PTA7aWYodDw9cil7cmV0dXJuXCJcIn1pZighZSllPVwidXRmOFwiO3doaWxlKHRydWUpe3N3aXRjaChlKXtjYXNlXCJoZXhcIjpyZXR1cm4gaGV4U2xpY2UodGhpcyxyLHQpO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiB1dGY4U2xpY2UodGhpcyxyLHQpO2Nhc2VcImFzY2lpXCI6cmV0dXJuIGFzY2lpU2xpY2UodGhpcyxyLHQpO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBsYXRpbjFTbGljZSh0aGlzLHIsdCk7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMscix0KTtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMscix0KTtkZWZhdWx0OmlmKGYpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK2UpO2U9KGUrXCJcIikudG9Mb3dlckNhc2UoKTtmPXRydWV9fX1CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlcj10cnVlO2Z1bmN0aW9uIHN3YXAoZSxyLHQpe3ZhciBmPWVbcl07ZVtyXT1lW3RdO2VbdF09Zn1CdWZmZXIucHJvdG90eXBlLnN3YXAxNj1mdW5jdGlvbiBzd2FwMTYoKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTIhPT0wKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzXCIpfWZvcih2YXIgcj0wO3I8ZTtyKz0yKXtzd2FwKHRoaXMscixyKzEpfXJldHVybiB0aGlzfTtCdWZmZXIucHJvdG90eXBlLnN3YXAzMj1mdW5jdGlvbiBzd2FwMzIoKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTQhPT0wKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzXCIpfWZvcih2YXIgcj0wO3I8ZTtyKz00KXtzd2FwKHRoaXMscixyKzMpO3N3YXAodGhpcyxyKzEscisyKX1yZXR1cm4gdGhpc307QnVmZmVyLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24gc3dhcDY0KCl7dmFyIGU9dGhpcy5sZW5ndGg7aWYoZSU4IT09MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0c1wiKX1mb3IodmFyIHI9MDtyPGU7cis9OCl7c3dhcCh0aGlzLHIscis3KTtzd2FwKHRoaXMscisxLHIrNik7c3dhcCh0aGlzLHIrMixyKzUpO3N3YXAodGhpcyxyKzMscis0KX1yZXR1cm4gdGhpc307QnVmZmVyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbiB0b1N0cmluZygpe3ZhciBlPXRoaXMubGVuZ3RoO2lmKGU9PT0wKXJldHVyblwiXCI7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApcmV0dXJuIHV0ZjhTbGljZSh0aGlzLDAsZSk7cmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O0J1ZmZlci5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmc9QnVmZmVyLnByb3RvdHlwZS50b1N0cmluZztCdWZmZXIucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbiBlcXVhbHMoZSl7aWYoIUJ1ZmZlci5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlclwiKTtpZih0aGlzPT09ZSlyZXR1cm4gdHJ1ZTtyZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcyxlKT09PTB9O0J1ZmZlci5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbiBpbnNwZWN0KCl7dmFyIGU9XCJcIjt2YXIgdD1yLklOU1BFQ1RfTUFYX0JZVEVTO2U9dGhpcy50b1N0cmluZyhcImhleFwiLDAsdCkucmVwbGFjZSgvKC57Mn0pL2csXCIkMSBcIikudHJpbSgpO2lmKHRoaXMubGVuZ3RoPnQpZSs9XCIgLi4uIFwiO3JldHVyblwiPEJ1ZmZlciBcIitlK1wiPlwifTtpZihpKXtCdWZmZXIucHJvdG90eXBlW2ldPUJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdH1CdWZmZXIucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24gY29tcGFyZShlLHIsdCxmLG4pe2lmKGlzSW5zdGFuY2UoZSxVaW50OEFycmF5KSl7ZT1CdWZmZXIuZnJvbShlLGUub2Zmc2V0LGUuYnl0ZUxlbmd0aCl9aWYoIUJ1ZmZlci5pc0J1ZmZlcihlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwidGFyZ2V0XCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gJytcIlJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIGUpfWlmKHI9PT11bmRlZmluZWQpe3I9MH1pZih0PT09dW5kZWZpbmVkKXt0PWU/ZS5sZW5ndGg6MH1pZihmPT09dW5kZWZpbmVkKXtmPTB9aWYobj09PXVuZGVmaW5lZCl7bj10aGlzLmxlbmd0aH1pZihyPDB8fHQ+ZS5sZW5ndGh8fGY8MHx8bj50aGlzLmxlbmd0aCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvdXQgb2YgcmFuZ2UgaW5kZXhcIil9aWYoZj49biYmcj49dCl7cmV0dXJuIDB9aWYoZj49bil7cmV0dXJuLTF9aWYocj49dCl7cmV0dXJuIDF9cj4+Pj0wO3Q+Pj49MDtmPj4+PTA7bj4+Pj0wO2lmKHRoaXM9PT1lKXJldHVybiAwO3ZhciBpPW4tZjt2YXIgbz10LXI7dmFyIHU9TWF0aC5taW4oaSxvKTt2YXIgYT10aGlzLnNsaWNlKGYsbik7dmFyIHM9ZS5zbGljZShyLHQpO2Zvcih2YXIgaD0wO2g8dTsrK2gpe2lmKGFbaF0hPT1zW2hdKXtpPWFbaF07bz1zW2hdO2JyZWFrfX1pZihpPG8pcmV0dXJuLTE7aWYobzxpKXJldHVybiAxO3JldHVybiAwfTtmdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZihlLHIsdCxmLG4pe2lmKGUubGVuZ3RoPT09MClyZXR1cm4tMTtpZih0eXBlb2YgdD09PVwic3RyaW5nXCIpe2Y9dDt0PTB9ZWxzZSBpZih0PjIxNDc0ODM2NDcpe3Q9MjE0NzQ4MzY0N31lbHNlIGlmKHQ8LTIxNDc0ODM2NDgpe3Q9LTIxNDc0ODM2NDh9dD0rdDtpZihudW1iZXJJc05hTih0KSl7dD1uPzA6ZS5sZW5ndGgtMX1pZih0PDApdD1lLmxlbmd0aCt0O2lmKHQ+PWUubGVuZ3RoKXtpZihuKXJldHVybi0xO2Vsc2UgdD1lLmxlbmd0aC0xfWVsc2UgaWYodDwwKXtpZihuKXQ9MDtlbHNlIHJldHVybi0xfWlmKHR5cGVvZiByPT09XCJzdHJpbmdcIil7cj1CdWZmZXIuZnJvbShyLGYpfWlmKEJ1ZmZlci5pc0J1ZmZlcihyKSl7aWYoci5sZW5ndGg9PT0wKXtyZXR1cm4tMX1yZXR1cm4gYXJyYXlJbmRleE9mKGUscix0LGYsbil9ZWxzZSBpZih0eXBlb2Ygcj09PVwibnVtYmVyXCIpe3I9ciYyNTU7aWYodHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y9PT1cImZ1bmN0aW9uXCIpe2lmKG4pe3JldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxyLHQpfWVsc2V7cmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoZSxyLHQpfX1yZXR1cm4gYXJyYXlJbmRleE9mKGUsW3JdLHQsZixuKX10aHJvdyBuZXcgVHlwZUVycm9yKFwidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyXCIpfWZ1bmN0aW9uIGFycmF5SW5kZXhPZihlLHIsdCxmLG4pe3ZhciBpPTE7dmFyIG89ZS5sZW5ndGg7dmFyIHU9ci5sZW5ndGg7aWYoZiE9PXVuZGVmaW5lZCl7Zj1TdHJpbmcoZikudG9Mb3dlckNhc2UoKTtpZihmPT09XCJ1Y3MyXCJ8fGY9PT1cInVjcy0yXCJ8fGY9PT1cInV0ZjE2bGVcInx8Zj09PVwidXRmLTE2bGVcIil7aWYoZS5sZW5ndGg8Mnx8ci5sZW5ndGg8Mil7cmV0dXJuLTF9aT0yO28vPTI7dS89Mjt0Lz0yfX1mdW5jdGlvbiByZWFkKGUscil7aWYoaT09PTEpe3JldHVybiBlW3JdfWVsc2V7cmV0dXJuIGUucmVhZFVJbnQxNkJFKHIqaSl9fXZhciBhO2lmKG4pe3ZhciBzPS0xO2ZvcihhPXQ7YTxvO2ErKyl7aWYocmVhZChlLGEpPT09cmVhZChyLHM9PT0tMT8wOmEtcykpe2lmKHM9PT0tMSlzPWE7aWYoYS1zKzE9PT11KXJldHVybiBzKml9ZWxzZXtpZihzIT09LTEpYS09YS1zO3M9LTF9fX1lbHNle2lmKHQrdT5vKXQ9by11O2ZvcihhPXQ7YT49MDthLS0pe3ZhciBoPXRydWU7Zm9yKHZhciBjPTA7Yzx1O2MrKyl7aWYocmVhZChlLGErYykhPT1yZWFkKHIsYykpe2g9ZmFsc2U7YnJlYWt9fWlmKGgpcmV0dXJuIGF9fXJldHVybi0xfUJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24gaW5jbHVkZXMoZSxyLHQpe3JldHVybiB0aGlzLmluZGV4T2YoZSxyLHQpIT09LTF9O0J1ZmZlci5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbiBpbmRleE9mKGUscix0KXtyZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcyxlLHIsdCx0cnVlKX07QnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbiBsYXN0SW5kZXhPZihlLHIsdCl7cmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsZSxyLHQsZmFsc2UpfTtmdW5jdGlvbiBoZXhXcml0ZShlLHIsdCxmKXt0PU51bWJlcih0KXx8MDt2YXIgbj1lLmxlbmd0aC10O2lmKCFmKXtmPW59ZWxzZXtmPU51bWJlcihmKTtpZihmPm4pe2Y9bn19dmFyIGk9ci5sZW5ndGg7aWYoZj5pLzIpe2Y9aS8yfWZvcih2YXIgbz0wO288ZjsrK28pe3ZhciB1PXBhcnNlSW50KHIuc3Vic3RyKG8qMiwyKSwxNik7aWYobnVtYmVySXNOYU4odSkpcmV0dXJuIG87ZVt0K29dPXV9cmV0dXJuIG99ZnVuY3Rpb24gdXRmOFdyaXRlKGUscix0LGYpe3JldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHIsZS5sZW5ndGgtdCksZSx0LGYpfWZ1bmN0aW9uIGFzY2lpV3JpdGUoZSxyLHQsZil7cmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHIpLGUsdCxmKX1mdW5jdGlvbiBsYXRpbjFXcml0ZShlLHIsdCxmKXtyZXR1cm4gYXNjaWlXcml0ZShlLHIsdCxmKX1mdW5jdGlvbiBiYXNlNjRXcml0ZShlLHIsdCxmKXtyZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHIpLGUsdCxmKX1mdW5jdGlvbiB1Y3MyV3JpdGUoZSxyLHQsZil7cmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMocixlLmxlbmd0aC10KSxlLHQsZil9QnVmZmVyLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbiB3cml0ZShlLHIsdCxmKXtpZihyPT09dW5kZWZpbmVkKXtmPVwidXRmOFwiO3Q9dGhpcy5sZW5ndGg7cj0wfWVsc2UgaWYodD09PXVuZGVmaW5lZCYmdHlwZW9mIHI9PT1cInN0cmluZ1wiKXtmPXI7dD10aGlzLmxlbmd0aDtyPTB9ZWxzZSBpZihpc0Zpbml0ZShyKSl7cj1yPj4+MDtpZihpc0Zpbml0ZSh0KSl7dD10Pj4+MDtpZihmPT09dW5kZWZpbmVkKWY9XCJ1dGY4XCJ9ZWxzZXtmPXQ7dD11bmRlZmluZWR9fWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWRcIil9dmFyIG49dGhpcy5sZW5ndGgtcjtpZih0PT09dW5kZWZpbmVkfHx0Pm4pdD1uO2lmKGUubGVuZ3RoPjAmJih0PDB8fHI8MCl8fHI+dGhpcy5sZW5ndGgpe3Rocm93IG5ldyBSYW5nZUVycm9yKFwiQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHNcIil9aWYoIWYpZj1cInV0ZjhcIjt2YXIgaT1mYWxzZTtmb3IoOzspe3N3aXRjaChmKXtjYXNlXCJoZXhcIjpyZXR1cm4gaGV4V3JpdGUodGhpcyxlLHIsdCk7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIHV0ZjhXcml0ZSh0aGlzLGUscix0KTtjYXNlXCJhc2NpaVwiOnJldHVybiBhc2NpaVdyaXRlKHRoaXMsZSxyLHQpO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBsYXRpbjFXcml0ZSh0aGlzLGUscix0KTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gYmFzZTY0V3JpdGUodGhpcyxlLHIsdCk7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIHVjczJXcml0ZSh0aGlzLGUscix0KTtkZWZhdWx0OmlmKGkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK2YpO2Y9KFwiXCIrZikudG9Mb3dlckNhc2UoKTtpPXRydWV9fX07QnVmZmVyLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24gdG9KU09OKCl7cmV0dXJue3R5cGU6XCJCdWZmZXJcIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O2Z1bmN0aW9uIGJhc2U2NFNsaWNlKGUscix0KXtpZihyPT09MCYmdD09PWUubGVuZ3RoKXtyZXR1cm4gZi5mcm9tQnl0ZUFycmF5KGUpfWVsc2V7cmV0dXJuIGYuZnJvbUJ5dGVBcnJheShlLnNsaWNlKHIsdCkpfX1mdW5jdGlvbiB1dGY4U2xpY2UoZSxyLHQpe3Q9TWF0aC5taW4oZS5sZW5ndGgsdCk7dmFyIGY9W107dmFyIG49cjt3aGlsZShuPHQpe3ZhciBpPWVbbl07dmFyIG89bnVsbDt2YXIgdT1pPjIzOT80Omk+MjIzPzM6aT4xOTE/MjoxO2lmKG4rdTw9dCl7dmFyIGEscyxoLGM7c3dpdGNoKHUpe2Nhc2UgMTppZihpPDEyOCl7bz1pfWJyZWFrO2Nhc2UgMjphPWVbbisxXTtpZigoYSYxOTIpPT09MTI4KXtjPShpJjMxKTw8NnxhJjYzO2lmKGM+MTI3KXtvPWN9fWJyZWFrO2Nhc2UgMzphPWVbbisxXTtzPWVbbisyXTtpZigoYSYxOTIpPT09MTI4JiYocyYxOTIpPT09MTI4KXtjPShpJjE1KTw8MTJ8KGEmNjMpPDw2fHMmNjM7aWYoYz4yMDQ3JiYoYzw1NTI5Nnx8Yz41NzM0Mykpe289Y319YnJlYWs7Y2FzZSA0OmE9ZVtuKzFdO3M9ZVtuKzJdO2g9ZVtuKzNdO2lmKChhJjE5Mik9PT0xMjgmJihzJjE5Mik9PT0xMjgmJihoJjE5Mik9PT0xMjgpe2M9KGkmMTUpPDwxOHwoYSY2Myk8PDEyfChzJjYzKTw8NnxoJjYzO2lmKGM+NjU1MzUmJmM8MTExNDExMil7bz1jfX19fWlmKG89PT1udWxsKXtvPTY1NTMzO3U9MX1lbHNlIGlmKG8+NjU1MzUpe28tPTY1NTM2O2YucHVzaChvPj4+MTAmMTAyM3w1NTI5Nik7bz01NjMyMHxvJjEwMjN9Zi5wdXNoKG8pO24rPXV9cmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShmKX12YXIgdT00MDk2O2Z1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheShlKXt2YXIgcj1lLmxlbmd0aDtpZihyPD11KXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZSl9dmFyIHQ9XCJcIjt2YXIgZj0wO3doaWxlKGY8cil7dCs9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZS5zbGljZShmLGYrPXUpKX1yZXR1cm4gdH1mdW5jdGlvbiBhc2NpaVNsaWNlKGUscix0KXt2YXIgZj1cIlwiO3Q9TWF0aC5taW4oZS5sZW5ndGgsdCk7Zm9yKHZhciBuPXI7bjx0Oysrbil7Zis9U3RyaW5nLmZyb21DaGFyQ29kZShlW25dJjEyNyl9cmV0dXJuIGZ9ZnVuY3Rpb24gbGF0aW4xU2xpY2UoZSxyLHQpe3ZhciBmPVwiXCI7dD1NYXRoLm1pbihlLmxlbmd0aCx0KTtmb3IodmFyIG49cjtuPHQ7KytuKXtmKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbbl0pfXJldHVybiBmfWZ1bmN0aW9uIGhleFNsaWNlKGUscix0KXt2YXIgZj1lLmxlbmd0aDtpZighcnx8cjwwKXI9MDtpZighdHx8dDwwfHx0PmYpdD1mO3ZhciBuPVwiXCI7Zm9yKHZhciBpPXI7aTx0OysraSl7bis9c1tlW2ldXX1yZXR1cm4gbn1mdW5jdGlvbiB1dGYxNmxlU2xpY2UoZSxyLHQpe3ZhciBmPWUuc2xpY2Uocix0KTt2YXIgbj1cIlwiO2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSs9Mil7bis9U3RyaW5nLmZyb21DaGFyQ29kZShmW2ldK2ZbaSsxXSoyNTYpfXJldHVybiBufUJ1ZmZlci5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24gc2xpY2UoZSxyKXt2YXIgdD10aGlzLmxlbmd0aDtlPX5+ZTtyPXI9PT11bmRlZmluZWQ/dDp+fnI7aWYoZTwwKXtlKz10O2lmKGU8MCllPTB9ZWxzZSBpZihlPnQpe2U9dH1pZihyPDApe3IrPXQ7aWYocjwwKXI9MH1lbHNlIGlmKHI+dCl7cj10fWlmKHI8ZSlyPWU7dmFyIGY9dGhpcy5zdWJhcnJheShlLHIpO09iamVjdC5zZXRQcm90b3R5cGVPZihmLEJ1ZmZlci5wcm90b3R5cGUpO3JldHVybiBmfTtmdW5jdGlvbiBjaGVja09mZnNldChlLHIsdCl7aWYoZSUxIT09MHx8ZTwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwib2Zmc2V0IGlzIG5vdCB1aW50XCIpO2lmKGUrcj50KXRocm93IG5ldyBSYW5nZUVycm9yKFwiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKX1CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24gcmVhZFVJbnRMRShlLHIsdCl7ZT1lPj4+MDtyPXI+Pj4wO2lmKCF0KWNoZWNrT2Zmc2V0KGUscix0aGlzLmxlbmd0aCk7dmFyIGY9dGhpc1tlXTt2YXIgbj0xO3ZhciBpPTA7d2hpbGUoKytpPHImJihuKj0yNTYpKXtmKz10aGlzW2UraV0qbn1yZXR1cm4gZn07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uIHJlYWRVSW50QkUoZSxyLHQpe2U9ZT4+PjA7cj1yPj4+MDtpZighdCl7Y2hlY2tPZmZzZXQoZSxyLHRoaXMubGVuZ3RoKX12YXIgZj10aGlzW2UrLS1yXTt2YXIgbj0xO3doaWxlKHI+MCYmKG4qPTI1Nikpe2YrPXRoaXNbZSstLXJdKm59cmV0dXJuIGZ9O0J1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uIHJlYWRVSW50OChlLHIpe2U9ZT4+PjA7aWYoIXIpY2hlY2tPZmZzZXQoZSwxLHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1tlXX07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24gcmVhZFVJbnQxNkxFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2VdfHRoaXNbZSsxXTw8OH07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24gcmVhZFVJbnQxNkJFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2VdPDw4fHRoaXNbZSsxXX07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24gcmVhZFVJbnQzMkxFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDQsdGhpcy5sZW5ndGgpO3JldHVybih0aGlzW2VdfHRoaXNbZSsxXTw8OHx0aGlzW2UrMl08PDE2KSt0aGlzW2UrM10qMTY3NzcyMTZ9O0J1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFPWZ1bmN0aW9uIHJlYWRVSW50MzJCRShlLHIpe2U9ZT4+PjA7aWYoIXIpY2hlY2tPZmZzZXQoZSw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1tlXSoxNjc3NzIxNisodGhpc1tlKzFdPDwxNnx0aGlzW2UrMl08PDh8dGhpc1tlKzNdKX07QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEU9ZnVuY3Rpb24gcmVhZEludExFKGUscix0KXtlPWU+Pj4wO3I9cj4+PjA7aWYoIXQpY2hlY2tPZmZzZXQoZSxyLHRoaXMubGVuZ3RoKTt2YXIgZj10aGlzW2VdO3ZhciBuPTE7dmFyIGk9MDt3aGlsZSgrK2k8ciYmKG4qPTI1Nikpe2YrPXRoaXNbZStpXSpufW4qPTEyODtpZihmPj1uKWYtPU1hdGgucG93KDIsOCpyKTtyZXR1cm4gZn07QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24gcmVhZEludEJFKGUscix0KXtlPWU+Pj4wO3I9cj4+PjA7aWYoIXQpY2hlY2tPZmZzZXQoZSxyLHRoaXMubGVuZ3RoKTt2YXIgZj1yO3ZhciBuPTE7dmFyIGk9dGhpc1tlKy0tZl07d2hpbGUoZj4wJiYobio9MjU2KSl7aSs9dGhpc1tlKy0tZl0qbn1uKj0xMjg7aWYoaT49bilpLT1NYXRoLnBvdygyLDgqcik7cmV0dXJuIGl9O0J1ZmZlci5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24gcmVhZEludDgoZSxyKXtlPWU+Pj4wO2lmKCFyKWNoZWNrT2Zmc2V0KGUsMSx0aGlzLmxlbmd0aCk7aWYoISh0aGlzW2VdJjEyOCkpcmV0dXJuIHRoaXNbZV07cmV0dXJuKDI1NS10aGlzW2VdKzEpKi0xfTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uIHJlYWRJbnQxNkxFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDIsdGhpcy5sZW5ndGgpO3ZhciB0PXRoaXNbZV18dGhpc1tlKzFdPDw4O3JldHVybiB0JjMyNzY4P3R8NDI5NDkwMTc2MDp0fTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFPWZ1bmN0aW9uIHJlYWRJbnQxNkJFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDIsdGhpcy5sZW5ndGgpO3ZhciB0PXRoaXNbZSsxXXx0aGlzW2VdPDw4O3JldHVybiB0JjMyNzY4P3R8NDI5NDkwMTc2MDp0fTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uIHJlYWRJbnQzMkxFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2VdfHRoaXNbZSsxXTw8OHx0aGlzW2UrMl08PDE2fHRoaXNbZSszXTw8MjR9O0J1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24gcmVhZEludDMyQkUoZSxyKXtlPWU+Pj4wO2lmKCFyKWNoZWNrT2Zmc2V0KGUsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbZV08PDI0fHRoaXNbZSsxXTw8MTZ8dGhpc1tlKzJdPDw4fHRoaXNbZSszXX07QnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbiByZWFkRmxvYXRMRShlLHIpe2U9ZT4+PjA7aWYoIXIpY2hlY2tPZmZzZXQoZSw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gbi5yZWFkKHRoaXMsZSx0cnVlLDIzLDQpfTtCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uIHJlYWRGbG9hdEJFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDQsdGhpcy5sZW5ndGgpO3JldHVybiBuLnJlYWQodGhpcyxlLGZhbHNlLDIzLDQpfTtCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbiByZWFkRG91YmxlTEUoZSxyKXtlPWU+Pj4wO2lmKCFyKWNoZWNrT2Zmc2V0KGUsOCx0aGlzLmxlbmd0aCk7cmV0dXJuIG4ucmVhZCh0aGlzLGUsdHJ1ZSw1Miw4KX07QnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24gcmVhZERvdWJsZUJFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDgsdGhpcy5sZW5ndGgpO3JldHVybiBuLnJlYWQodGhpcyxlLGZhbHNlLDUyLDgpfTtmdW5jdGlvbiBjaGVja0ludChlLHIsdCxmLG4saSl7aWYoIUJ1ZmZlci5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZihyPm58fHI8aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKTtpZih0K2Y+ZS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIil9QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRT1mdW5jdGlvbiB3cml0ZVVJbnRMRShlLHIsdCxmKXtlPStlO3I9cj4+PjA7dD10Pj4+MDtpZighZil7dmFyIG49TWF0aC5wb3coMiw4KnQpLTE7Y2hlY2tJbnQodGhpcyxlLHIsdCxuLDApfXZhciBpPTE7dmFyIG89MDt0aGlzW3JdPWUmMjU1O3doaWxlKCsrbzx0JiYoaSo9MjU2KSl7dGhpc1tyK29dPWUvaSYyNTV9cmV0dXJuIHIrdH07QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbiB3cml0ZVVJbnRCRShlLHIsdCxmKXtlPStlO3I9cj4+PjA7dD10Pj4+MDtpZighZil7dmFyIG49TWF0aC5wb3coMiw4KnQpLTE7Y2hlY2tJbnQodGhpcyxlLHIsdCxuLDApfXZhciBpPXQtMTt2YXIgbz0xO3RoaXNbcitpXT1lJjI1NTt3aGlsZSgtLWk+PTAmJihvKj0yNTYpKXt0aGlzW3IraV09ZS9vJjI1NX1yZXR1cm4gcit0fTtCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24gd3JpdGVVSW50OChlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDEsMjU1LDApO3RoaXNbcl09ZSYyNTU7cmV0dXJuIHIrMX07QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uIHdyaXRlVUludDE2TEUoZSxyLHQpe2U9K2U7cj1yPj4+MDtpZighdCljaGVja0ludCh0aGlzLGUsciwyLDY1NTM1LDApO3RoaXNbcl09ZSYyNTU7dGhpc1tyKzFdPWU+Pj44O3JldHVybiByKzJ9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbiB3cml0ZVVJbnQxNkJFKGUscix0KXtlPStlO3I9cj4+PjA7aWYoIXQpY2hlY2tJbnQodGhpcyxlLHIsMiw2NTUzNSwwKTt0aGlzW3JdPWU+Pj44O3RoaXNbcisxXT1lJjI1NTtyZXR1cm4gcisyfTtCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEU9ZnVuY3Rpb24gd3JpdGVVSW50MzJMRShlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDQsNDI5NDk2NzI5NSwwKTt0aGlzW3IrM109ZT4+PjI0O3RoaXNbcisyXT1lPj4+MTY7dGhpc1tyKzFdPWU+Pj44O3RoaXNbcl09ZSYyNTU7cmV0dXJuIHIrNH07QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uIHdyaXRlVUludDMyQkUoZSxyLHQpe2U9K2U7cj1yPj4+MDtpZighdCljaGVja0ludCh0aGlzLGUsciw0LDQyOTQ5NjcyOTUsMCk7dGhpc1tyXT1lPj4+MjQ7dGhpc1tyKzFdPWU+Pj4xNjt0aGlzW3IrMl09ZT4+Pjg7dGhpc1tyKzNdPWUmMjU1O3JldHVybiByKzR9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbiB3cml0ZUludExFKGUscix0LGYpe2U9K2U7cj1yPj4+MDtpZighZil7dmFyIG49TWF0aC5wb3coMiw4KnQtMSk7Y2hlY2tJbnQodGhpcyxlLHIsdCxuLTEsLW4pfXZhciBpPTA7dmFyIG89MTt2YXIgdT0wO3RoaXNbcl09ZSYyNTU7d2hpbGUoKytpPHQmJihvKj0yNTYpKXtpZihlPDAmJnU9PT0wJiZ0aGlzW3IraS0xXSE9PTApe3U9MX10aGlzW3IraV09KGUvbz4+MCktdSYyNTV9cmV0dXJuIHIrdH07QnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFPWZ1bmN0aW9uIHdyaXRlSW50QkUoZSxyLHQsZil7ZT0rZTtyPXI+Pj4wO2lmKCFmKXt2YXIgbj1NYXRoLnBvdygyLDgqdC0xKTtjaGVja0ludCh0aGlzLGUscix0LG4tMSwtbil9dmFyIGk9dC0xO3ZhciBvPTE7dmFyIHU9MDt0aGlzW3IraV09ZSYyNTU7d2hpbGUoLS1pPj0wJiYobyo9MjU2KSl7aWYoZTwwJiZ1PT09MCYmdGhpc1tyK2krMV0hPT0wKXt1PTF9dGhpc1tyK2ldPShlL28+PjApLXUmMjU1fXJldHVybiByK3R9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uIHdyaXRlSW50OChlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDEsMTI3LC0xMjgpO2lmKGU8MCllPTI1NStlKzE7dGhpc1tyXT1lJjI1NTtyZXR1cm4gcisxfTtCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbiB3cml0ZUludDE2TEUoZSxyLHQpe2U9K2U7cj1yPj4+MDtpZighdCljaGVja0ludCh0aGlzLGUsciwyLDMyNzY3LC0zMjc2OCk7dGhpc1tyXT1lJjI1NTt0aGlzW3IrMV09ZT4+Pjg7cmV0dXJuIHIrMn07QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24gd3JpdGVJbnQxNkJFKGUscix0KXtlPStlO3I9cj4+PjA7aWYoIXQpY2hlY2tJbnQodGhpcyxlLHIsMiwzMjc2NywtMzI3NjgpO3RoaXNbcl09ZT4+Pjg7dGhpc1tyKzFdPWUmMjU1O3JldHVybiByKzJ9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uIHdyaXRlSW50MzJMRShlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCk7dGhpc1tyXT1lJjI1NTt0aGlzW3IrMV09ZT4+Pjg7dGhpc1tyKzJdPWU+Pj4xNjt0aGlzW3IrM109ZT4+PjI0O3JldHVybiByKzR9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uIHdyaXRlSW50MzJCRShlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCk7aWYoZTwwKWU9NDI5NDk2NzI5NStlKzE7dGhpc1tyXT1lPj4+MjQ7dGhpc1tyKzFdPWU+Pj4xNjt0aGlzW3IrMl09ZT4+Pjg7dGhpc1tyKzNdPWUmMjU1O3JldHVybiByKzR9O2Z1bmN0aW9uIGNoZWNrSUVFRTc1NChlLHIsdCxmLG4saSl7aWYodCtmPmUubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpO2lmKHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKX1mdW5jdGlvbiB3cml0ZUZsb2F0KGUscix0LGYsaSl7cj0rcjt0PXQ+Pj4wO2lmKCFpKXtjaGVja0lFRUU3NTQoZSxyLHQsNCwzNDAyODIzNDY2Mzg1Mjg4NmUyMiwtMzQwMjgyMzQ2NjM4NTI4ODZlMjIpfW4ud3JpdGUoZSxyLHQsZiwyMyw0KTtyZXR1cm4gdCs0fUJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uIHdyaXRlRmxvYXRMRShlLHIsdCl7cmV0dXJuIHdyaXRlRmxvYXQodGhpcyxlLHIsdHJ1ZSx0KX07QnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24gd3JpdGVGbG9hdEJFKGUscix0KXtyZXR1cm4gd3JpdGVGbG9hdCh0aGlzLGUscixmYWxzZSx0KX07ZnVuY3Rpb24gd3JpdGVEb3VibGUoZSxyLHQsZixpKXtyPStyO3Q9dD4+PjA7aWYoIWkpe2NoZWNrSUVFRTc1NChlLHIsdCw4LDE3OTc2OTMxMzQ4NjIzMTU3ZTI5MiwtMTc5NzY5MzEzNDg2MjMxNTdlMjkyKX1uLndyaXRlKGUscix0LGYsNTIsOCk7cmV0dXJuIHQrOH1CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24gd3JpdGVEb3VibGVMRShlLHIsdCl7cmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsZSxyLHRydWUsdCl9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbiB3cml0ZURvdWJsZUJFKGUscix0KXtyZXR1cm4gd3JpdGVEb3VibGUodGhpcyxlLHIsZmFsc2UsdCl9O0J1ZmZlci5wcm90b3R5cGUuY29weT1mdW5jdGlvbiBjb3B5KGUscix0LGYpe2lmKCFCdWZmZXIuaXNCdWZmZXIoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImFyZ3VtZW50IHNob3VsZCBiZSBhIEJ1ZmZlclwiKTtpZighdCl0PTA7aWYoIWYmJmYhPT0wKWY9dGhpcy5sZW5ndGg7aWYocj49ZS5sZW5ndGgpcj1lLmxlbmd0aDtpZighcilyPTA7aWYoZj4wJiZmPHQpZj10O2lmKGY9PT10KXJldHVybiAwO2lmKGUubGVuZ3RoPT09MHx8dGhpcy5sZW5ndGg9PT0wKXJldHVybiAwO2lmKHI8MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzXCIpfWlmKHQ8MHx8dD49dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIik7aWYoZjwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwic291cmNlRW5kIG91dCBvZiBib3VuZHNcIik7aWYoZj50aGlzLmxlbmd0aClmPXRoaXMubGVuZ3RoO2lmKGUubGVuZ3RoLXI8Zi10KXtmPWUubGVuZ3RoLXIrdH12YXIgbj1mLXQ7aWYodGhpcz09PWUmJnR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluPT09XCJmdW5jdGlvblwiKXt0aGlzLmNvcHlXaXRoaW4ocix0LGYpfWVsc2UgaWYodGhpcz09PWUmJnQ8ciYmcjxmKXtmb3IodmFyIGk9bi0xO2k+PTA7LS1pKXtlW2krcl09dGhpc1tpK3RdfX1lbHNle1VpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKGUsdGhpcy5zdWJhcnJheSh0LGYpLHIpfXJldHVybiBufTtCdWZmZXIucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24gZmlsbChlLHIsdCxmKXtpZih0eXBlb2YgZT09PVwic3RyaW5nXCIpe2lmKHR5cGVvZiByPT09XCJzdHJpbmdcIil7Zj1yO3I9MDt0PXRoaXMubGVuZ3RofWVsc2UgaWYodHlwZW9mIHQ9PT1cInN0cmluZ1wiKXtmPXQ7dD10aGlzLmxlbmd0aH1pZihmIT09dW5kZWZpbmVkJiZ0eXBlb2YgZiE9PVwic3RyaW5nXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nXCIpfWlmKHR5cGVvZiBmPT09XCJzdHJpbmdcIiYmIUJ1ZmZlci5pc0VuY29kaW5nKGYpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrZil9aWYoZS5sZW5ndGg9PT0xKXt2YXIgbj1lLmNoYXJDb2RlQXQoMCk7aWYoZj09PVwidXRmOFwiJiZuPDEyOHx8Zj09PVwibGF0aW4xXCIpe2U9bn19fWVsc2UgaWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXtlPWUmMjU1fWVsc2UgaWYodHlwZW9mIGU9PT1cImJvb2xlYW5cIil7ZT1OdW1iZXIoZSl9aWYocjwwfHx0aGlzLmxlbmd0aDxyfHx0aGlzLmxlbmd0aDx0KXt0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk91dCBvZiByYW5nZSBpbmRleFwiKX1pZih0PD1yKXtyZXR1cm4gdGhpc31yPXI+Pj4wO3Q9dD09PXVuZGVmaW5lZD90aGlzLmxlbmd0aDp0Pj4+MDtpZighZSllPTA7dmFyIGk7aWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXtmb3IoaT1yO2k8dDsrK2kpe3RoaXNbaV09ZX19ZWxzZXt2YXIgbz1CdWZmZXIuaXNCdWZmZXIoZSk/ZTpCdWZmZXIuZnJvbShlLGYpO3ZhciB1PW8ubGVuZ3RoO2lmKHU9PT0wKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgdmFsdWUgXCInK2UrJ1wiIGlzIGludmFsaWQgZm9yIGFyZ3VtZW50IFwidmFsdWVcIicpfWZvcihpPTA7aTx0LXI7KytpKXt0aGlzW2krcl09b1tpJXVdfX1yZXR1cm4gdGhpc307dmFyIGE9L1teKy8wLTlBLVphLXotX10vZztmdW5jdGlvbiBiYXNlNjRjbGVhbihlKXtlPWUuc3BsaXQoXCI9XCIpWzBdO2U9ZS50cmltKCkucmVwbGFjZShhLFwiXCIpO2lmKGUubGVuZ3RoPDIpcmV0dXJuXCJcIjt3aGlsZShlLmxlbmd0aCU0IT09MCl7ZT1lK1wiPVwifXJldHVybiBlfWZ1bmN0aW9uIHV0ZjhUb0J5dGVzKGUscil7cj1yfHxJbmZpbml0eTt2YXIgdDt2YXIgZj1lLmxlbmd0aDt2YXIgbj1udWxsO3ZhciBpPVtdO2Zvcih2YXIgbz0wO288ZjsrK28pe3Q9ZS5jaGFyQ29kZUF0KG8pO2lmKHQ+NTUyOTUmJnQ8NTczNDQpe2lmKCFuKXtpZih0PjU2MzE5KXtpZigoci09Myk+LTEpaS5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1lbHNlIGlmKG8rMT09PWYpe2lmKChyLT0zKT4tMSlpLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfW49dDtjb250aW51ZX1pZih0PDU2MzIwKXtpZigoci09Myk+LTEpaS5wdXNoKDIzOSwxOTEsMTg5KTtuPXQ7Y29udGludWV9dD0obi01NTI5Njw8MTB8dC01NjMyMCkrNjU1MzZ9ZWxzZSBpZihuKXtpZigoci09Myk+LTEpaS5wdXNoKDIzOSwxOTEsMTg5KX1uPW51bGw7aWYodDwxMjgpe2lmKChyLT0xKTwwKWJyZWFrO2kucHVzaCh0KX1lbHNlIGlmKHQ8MjA0OCl7aWYoKHItPTIpPDApYnJlYWs7aS5wdXNoKHQ+PjZ8MTkyLHQmNjN8MTI4KX1lbHNlIGlmKHQ8NjU1MzYpe2lmKChyLT0zKTwwKWJyZWFrO2kucHVzaCh0Pj4xMnwyMjQsdD4+NiY2M3wxMjgsdCY2M3wxMjgpfWVsc2UgaWYodDwxMTE0MTEyKXtpZigoci09NCk8MClicmVhaztpLnB1c2godD4+MTh8MjQwLHQ+PjEyJjYzfDEyOCx0Pj42JjYzfDEyOCx0JjYzfDEyOCl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvZGUgcG9pbnRcIil9fXJldHVybiBpfWZ1bmN0aW9uIGFzY2lpVG9CeXRlcyhlKXt2YXIgcj1bXTtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoOysrdCl7ci5wdXNoKGUuY2hhckNvZGVBdCh0KSYyNTUpfXJldHVybiByfWZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzKGUscil7dmFyIHQsZixuO3ZhciBpPVtdO2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7KytvKXtpZigoci09Mik8MClicmVhazt0PWUuY2hhckNvZGVBdChvKTtmPXQ+Pjg7bj10JTI1NjtpLnB1c2gobik7aS5wdXNoKGYpfXJldHVybiBpfWZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMoZSl7cmV0dXJuIGYudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oZSkpfWZ1bmN0aW9uIGJsaXRCdWZmZXIoZSxyLHQsZil7Zm9yKHZhciBuPTA7bjxmOysrbil7aWYobit0Pj1yLmxlbmd0aHx8bj49ZS5sZW5ndGgpYnJlYWs7cltuK3RdPWVbbl19cmV0dXJuIG59ZnVuY3Rpb24gaXNJbnN0YW5jZShlLHIpe3JldHVybiBlIGluc3RhbmNlb2Ygcnx8ZSE9bnVsbCYmZS5jb25zdHJ1Y3RvciE9bnVsbCYmZS5jb25zdHJ1Y3Rvci5uYW1lIT1udWxsJiZlLmNvbnN0cnVjdG9yLm5hbWU9PT1yLm5hbWV9ZnVuY3Rpb24gbnVtYmVySXNOYU4oZSl7cmV0dXJuIGUhPT1lfXZhciBzPWZ1bmN0aW9uKCl7dmFyIGU9XCIwMTIzNDU2Nzg5YWJjZGVmXCI7dmFyIHI9bmV3IEFycmF5KDI1Nik7Zm9yKHZhciB0PTA7dDwxNjsrK3Qpe3ZhciBmPXQqMTY7Zm9yKHZhciBuPTA7bjwxNjsrK24pe3JbZituXT1lW3RdK2Vbbl19fXJldHVybiByfSgpfSw3ODM6ZnVuY3Rpb24oZSxyKXtcbi8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovXG5yLnJlYWQ9ZnVuY3Rpb24oZSxyLHQsZixuKXt2YXIgaSxvO3ZhciB1PW4qOC1mLTE7dmFyIGE9KDE8PHUpLTE7dmFyIHM9YT4+MTt2YXIgaD0tNzt2YXIgYz10P24tMTowO3ZhciBsPXQ/LTE6MTt2YXIgcD1lW3IrY107Yys9bDtpPXAmKDE8PC1oKS0xO3A+Pj0taDtoKz11O2Zvcig7aD4wO2k9aSoyNTYrZVtyK2NdLGMrPWwsaC09OCl7fW89aSYoMTw8LWgpLTE7aT4+PS1oO2grPWY7Zm9yKDtoPjA7bz1vKjI1NitlW3IrY10sYys9bCxoLT04KXt9aWYoaT09PTApe2k9MS1zfWVsc2UgaWYoaT09PWEpe3JldHVybiBvP05hTjoocD8tMToxKSpJbmZpbml0eX1lbHNle289bytNYXRoLnBvdygyLGYpO2k9aS1zfXJldHVybihwPy0xOjEpKm8qTWF0aC5wb3coMixpLWYpfTtyLndyaXRlPWZ1bmN0aW9uKGUscix0LGYsbixpKXt2YXIgbyx1LGE7dmFyIHM9aSo4LW4tMTt2YXIgaD0oMTw8cyktMTt2YXIgYz1oPj4xO3ZhciBsPW49PT0yMz9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjA7dmFyIHA9Zj8wOmktMTt2YXIgeT1mPzE6LTE7dmFyIGc9cjwwfHxyPT09MCYmMS9yPDA/MTowO3I9TWF0aC5hYnMocik7aWYoaXNOYU4ocil8fHI9PT1JbmZpbml0eSl7dT1pc05hTihyKT8xOjA7bz1ofWVsc2V7bz1NYXRoLmZsb29yKE1hdGgubG9nKHIpL01hdGguTE4yKTtpZihyKihhPU1hdGgucG93KDIsLW8pKTwxKXtvLS07YSo9Mn1pZihvK2M+PTEpe3IrPWwvYX1lbHNle3IrPWwqTWF0aC5wb3coMiwxLWMpfWlmKHIqYT49Mil7bysrO2EvPTJ9aWYobytjPj1oKXt1PTA7bz1ofWVsc2UgaWYobytjPj0xKXt1PShyKmEtMSkqTWF0aC5wb3coMixuKTtvPW8rY31lbHNle3U9cipNYXRoLnBvdygyLGMtMSkqTWF0aC5wb3coMixuKTtvPTB9fWZvcig7bj49ODtlW3QrcF09dSYyNTUscCs9eSx1Lz0yNTYsbi09OCl7fW89bzw8bnx1O3MrPW47Zm9yKDtzPjA7ZVt0K3BdPW8mMjU1LHArPXksby89MjU2LHMtPTgpe31lW3QrcC15XXw9ZyoxMjh9fX07dmFyIHI9e307ZnVuY3Rpb24gX19uY2N3cGNrX3JlcXVpcmVfXyh0KXt2YXIgZj1yW3RdO2lmKGYhPT11bmRlZmluZWQpe3JldHVybiBmLmV4cG9ydHN9dmFyIG49clt0XT17ZXhwb3J0czp7fX07dmFyIGk9dHJ1ZTt0cnl7ZVt0XShuLG4uZXhwb3J0cyxfX25jY3dwY2tfcmVxdWlyZV9fKTtpPWZhbHNlfWZpbmFsbHl7aWYoaSlkZWxldGUgclt0XX1yZXR1cm4gbi5leHBvcnRzfWlmKHR5cGVvZiBfX25jY3dwY2tfcmVxdWlyZV9fIT09XCJ1bmRlZmluZWRcIilfX25jY3dwY2tfcmVxdWlyZV9fLmFiPV9fZGlybmFtZStcIi9cIjt2YXIgdD1fX25jY3dwY2tfcmVxdWlyZV9fKDcyKTttb2R1bGUuZXhwb3J0cz10fSkoKTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/buffer/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/picomatch/index.js":
/*!************************************************************!*\
  !*** ./node_modules/next/dist/compiled/picomatch/index.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("var __dirname = \"/\";\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n(()=>{\"use strict\";var t={170:(t,e,u)=>{const n=u(510);const isWindows=()=>{if(typeof navigator!==\"undefined\"&&navigator.platform){const t=navigator.platform.toLowerCase();return t===\"win32\"||t===\"windows\"}if(typeof process!==\"undefined\"&&process.platform){return process.platform===\"win32\"}return false};function picomatch(t,e,u=false){if(e&&(e.windows===null||e.windows===undefined)){e={...e,windows:isWindows()}}return n(t,e,u)}Object.assign(picomatch,n);t.exports=picomatch},154:t=>{const e=\"\\\\\\\\/\";const u=`[^${e}]`;const n=\"\\\\.\";const o=\"\\\\+\";const s=\"\\\\?\";const r=\"\\\\/\";const a=\"(?=.)\";const i=\"[^/]\";const c=`(?:${r}|$)`;const p=`(?:^|${r})`;const l=`${n}{1,2}${c}`;const f=`(?!${n})`;const A=`(?!${p}${l})`;const _=`(?!${n}{0,1}${c})`;const R=`(?!${l})`;const E=`[^.${r}]`;const h=`${i}*?`;const g=\"/\";const b={DOT_LITERAL:n,PLUS_LITERAL:o,QMARK_LITERAL:s,SLASH_LITERAL:r,ONE_CHAR:a,QMARK:i,END_ANCHOR:c,DOTS_SLASH:l,NO_DOT:f,NO_DOTS:A,NO_DOT_SLASH:_,NO_DOTS_SLASH:R,QMARK_NO_DOT:E,STAR:h,START_ANCHOR:p,SEP:g};const C={...b,SLASH_LITERAL:`[${e}]`,QMARK:u,STAR:`${u}*?`,DOTS_SLASH:`${n}{1,2}(?:[${e}]|$)`,NO_DOT:`(?!${n})`,NO_DOTS:`(?!(?:^|[${e}])${n}{1,2}(?:[${e}]|$))`,NO_DOT_SLASH:`(?!${n}{0,1}(?:[${e}]|$))`,NO_DOTS_SLASH:`(?!${n}{1,2}(?:[${e}]|$))`,QMARK_NO_DOT:`[^.${e}]`,START_ANCHOR:`(?:^|[${e}])`,END_ANCHOR:`(?:[${e}]|$)`,SEP:\"\\\\\"};const y={alnum:\"a-zA-Z0-9\",alpha:\"a-zA-Z\",ascii:\"\\\\x00-\\\\x7F\",blank:\" \\\\t\",cntrl:\"\\\\x00-\\\\x1F\\\\x7F\",digit:\"0-9\",graph:\"\\\\x21-\\\\x7E\",lower:\"a-z\",print:\"\\\\x20-\\\\x7E \",punct:\"\\\\-!\\\"#$%&'()\\\\*+,./:;<=>?@[\\\\]^_`{|}~\",space:\" \\\\t\\\\r\\\\n\\\\v\\\\f\",upper:\"A-Z\",word:\"A-Za-z0-9_\",xdigit:\"A-Fa-f0-9\"};t.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:y,REGEX_BACKSLASH:/\\\\(?![*+?^${}(|)[\\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\\].,$*+?^{}()|\\\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\\\?)((\\W)(\\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\\[.*?[^\\\\]\\]|\\\\(?=.))/g,REPLACEMENTS:{\"***\":\"*\",\"**/**\":\"**\",\"**/**/**\":\"**\"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{\"!\":{type:\"negate\",open:\"(?:(?!(?:\",close:`))${t.STAR})`},\"?\":{type:\"qmark\",open:\"(?:\",close:\")?\"},\"+\":{type:\"plus\",open:\"(?:\",close:\")+\"},\"*\":{type:\"star\",open:\"(?:\",close:\")*\"},\"@\":{type:\"at\",open:\"(?:\",close:\")\"}}},globChars(t){return t===true?C:b}}},697:(t,e,u)=>{const n=u(154);const o=u(96);const{MAX_LENGTH:s,POSIX_REGEX_SOURCE:r,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:i,REPLACEMENTS:c}=n;const expandRange=(t,e)=>{if(typeof e.expandRange===\"function\"){return e.expandRange(...t,e)}t.sort();const u=`[${t.join(\"-\")}]`;try{new RegExp(u)}catch(e){return t.map((t=>o.escapeRegex(t))).join(\"..\")}return u};const syntaxError=(t,e)=>`Missing ${t}: \"${e}\" - use \"\\\\\\\\${e}\" to match literal characters`;const parse=(t,e)=>{if(typeof t!==\"string\"){throw new TypeError(\"Expected a string\")}t=c[t]||t;const u={...e};const p=typeof u.maxLength===\"number\"?Math.min(s,u.maxLength):s;let l=t.length;if(l>p){throw new SyntaxError(`Input length: ${l}, exceeds maximum allowed length: ${p}`)}const f={type:\"bos\",value:\"\",output:u.prepend||\"\"};const A=[f];const _=u.capture?\"\":\"?:\";const R=n.globChars(u.windows);const E=n.extglobChars(R);const{DOT_LITERAL:h,PLUS_LITERAL:g,SLASH_LITERAL:b,ONE_CHAR:C,DOTS_SLASH:y,NO_DOT:$,NO_DOT_SLASH:x,NO_DOTS_SLASH:S,QMARK:H,QMARK_NO_DOT:v,STAR:d,START_ANCHOR:L}=R;const globstar=t=>`(${_}(?:(?!${L}${t.dot?y:h}).)*?)`;const T=u.dot?\"\":$;const O=u.dot?H:v;let k=u.bash===true?globstar(u):d;if(u.capture){k=`(${k})`}if(typeof u.noext===\"boolean\"){u.noextglob=u.noext}const m={input:t,index:-1,start:0,dot:u.dot===true,consumed:\"\",output:\"\",prefix:\"\",backtrack:false,negated:false,brackets:0,braces:0,parens:0,quotes:0,globstar:false,tokens:A};t=o.removePrefix(t,m);l=t.length;const w=[];const N=[];const I=[];let B=f;let G;const eos=()=>m.index===l-1;const D=m.peek=(e=1)=>t[m.index+e];const M=m.advance=()=>t[++m.index]||\"\";const remaining=()=>t.slice(m.index+1);const consume=(t=\"\",e=0)=>{m.consumed+=t;m.index+=e};const append=t=>{m.output+=t.output!=null?t.output:t.value;consume(t.value)};const negate=()=>{let t=1;while(D()===\"!\"&&(D(2)!==\"(\"||D(3)===\"?\")){M();m.start++;t++}if(t%2===0){return false}m.negated=true;m.start++;return true};const increment=t=>{m[t]++;I.push(t)};const decrement=t=>{m[t]--;I.pop()};const push=t=>{if(B.type===\"globstar\"){const e=m.braces>0&&(t.type===\"comma\"||t.type===\"brace\");const u=t.extglob===true||w.length&&(t.type===\"pipe\"||t.type===\"paren\");if(t.type!==\"slash\"&&t.type!==\"paren\"&&!e&&!u){m.output=m.output.slice(0,-B.output.length);B.type=\"star\";B.value=\"*\";B.output=k;m.output+=B.output}}if(w.length&&t.type!==\"paren\"){w[w.length-1].inner+=t.value}if(t.value||t.output)append(t);if(B&&B.type===\"text\"&&t.type===\"text\"){B.output=(B.output||B.value)+t.value;B.value+=t.value;return}t.prev=B;A.push(t);B=t};const extglobOpen=(t,e)=>{const n={...E[e],conditions:1,inner:\"\"};n.prev=B;n.parens=m.parens;n.output=m.output;const o=(u.capture?\"(\":\"\")+n.open;increment(\"parens\");push({type:t,value:e,output:m.output?\"\":C});push({type:\"paren\",extglob:true,value:M(),output:o});w.push(n)};const extglobClose=t=>{let n=t.close+(u.capture?\")\":\"\");let o;if(t.type===\"negate\"){let s=k;if(t.inner&&t.inner.length>1&&t.inner.includes(\"/\")){s=globstar(u)}if(s!==k||eos()||/^\\)+$/.test(remaining())){n=t.close=`)$))${s}`}if(t.inner.includes(\"*\")&&(o=remaining())&&/^\\.[^\\\\/.]+$/.test(o)){const u=parse(o,{...e,fastpaths:false}).output;n=t.close=`)${u})${s})`}if(t.prev.type===\"bos\"){m.negatedExtglob=true}}push({type:\"paren\",extglob:true,value:G,output:n});decrement(\"parens\")};if(u.fastpaths!==false&&!/(^[*!]|[/()[\\]{}\"])/.test(t)){let n=false;let s=t.replace(i,((t,e,u,o,s,r)=>{if(o===\"\\\\\"){n=true;return t}if(o===\"?\"){if(e){return e+o+(s?H.repeat(s.length):\"\")}if(r===0){return O+(s?H.repeat(s.length):\"\")}return H.repeat(u.length)}if(o===\".\"){return h.repeat(u.length)}if(o===\"*\"){if(e){return e+o+(s?k:\"\")}return k}return e?t:`\\\\${t}`}));if(n===true){if(u.unescape===true){s=s.replace(/\\\\/g,\"\")}else{s=s.replace(/\\\\+/g,(t=>t.length%2===0?\"\\\\\\\\\":t?\"\\\\\":\"\"))}}if(s===t&&u.contains===true){m.output=t;return m}m.output=o.wrapOutput(s,m,e);return m}while(!eos()){G=M();if(G===\"\\0\"){continue}if(G===\"\\\\\"){const t=D();if(t===\"/\"&&u.bash!==true){continue}if(t===\".\"||t===\";\"){continue}if(!t){G+=\"\\\\\";push({type:\"text\",value:G});continue}const e=/^\\\\+/.exec(remaining());let n=0;if(e&&e[0].length>2){n=e[0].length;m.index+=n;if(n%2!==0){G+=\"\\\\\"}}if(u.unescape===true){G=M()}else{G+=M()}if(m.brackets===0){push({type:\"text\",value:G});continue}}if(m.brackets>0&&(G!==\"]\"||B.value===\"[\"||B.value===\"[^\")){if(u.posix!==false&&G===\":\"){const t=B.value.slice(1);if(t.includes(\"[\")){B.posix=true;if(t.includes(\":\")){const t=B.value.lastIndexOf(\"[\");const e=B.value.slice(0,t);const u=B.value.slice(t+2);const n=r[u];if(n){B.value=e+n;m.backtrack=true;M();if(!f.output&&A.indexOf(B)===1){f.output=C}continue}}}}if(G===\"[\"&&D()!==\":\"||G===\"-\"&&D()===\"]\"){G=`\\\\${G}`}if(G===\"]\"&&(B.value===\"[\"||B.value===\"[^\")){G=`\\\\${G}`}if(u.posix===true&&G===\"!\"&&B.value===\"[\"){G=\"^\"}B.value+=G;append({value:G});continue}if(m.quotes===1&&G!=='\"'){G=o.escapeRegex(G);B.value+=G;append({value:G});continue}if(G==='\"'){m.quotes=m.quotes===1?0:1;if(u.keepQuotes===true){push({type:\"text\",value:G})}continue}if(G===\"(\"){increment(\"parens\");push({type:\"paren\",value:G});continue}if(G===\")\"){if(m.parens===0&&u.strictBrackets===true){throw new SyntaxError(syntaxError(\"opening\",\"(\"))}const t=w[w.length-1];if(t&&m.parens===t.parens+1){extglobClose(w.pop());continue}push({type:\"paren\",value:G,output:m.parens?\")\":\"\\\\)\"});decrement(\"parens\");continue}if(G===\"[\"){if(u.nobracket===true||!remaining().includes(\"]\")){if(u.nobracket!==true&&u.strictBrackets===true){throw new SyntaxError(syntaxError(\"closing\",\"]\"))}G=`\\\\${G}`}else{increment(\"brackets\")}push({type:\"bracket\",value:G});continue}if(G===\"]\"){if(u.nobracket===true||B&&B.type===\"bracket\"&&B.value.length===1){push({type:\"text\",value:G,output:`\\\\${G}`});continue}if(m.brackets===0){if(u.strictBrackets===true){throw new SyntaxError(syntaxError(\"opening\",\"[\"))}push({type:\"text\",value:G,output:`\\\\${G}`});continue}decrement(\"brackets\");const t=B.value.slice(1);if(B.posix!==true&&t[0]===\"^\"&&!t.includes(\"/\")){G=`/${G}`}B.value+=G;append({value:G});if(u.literalBrackets===false||o.hasRegexChars(t)){continue}const e=o.escapeRegex(B.value);m.output=m.output.slice(0,-B.value.length);if(u.literalBrackets===true){m.output+=e;B.value=e;continue}B.value=`(${_}${e}|${B.value})`;m.output+=B.value;continue}if(G===\"{\"&&u.nobrace!==true){increment(\"braces\");const t={type:\"brace\",value:G,output:\"(\",outputIndex:m.output.length,tokensIndex:m.tokens.length};N.push(t);push(t);continue}if(G===\"}\"){const t=N[N.length-1];if(u.nobrace===true||!t){push({type:\"text\",value:G,output:G});continue}let e=\")\";if(t.dots===true){const t=A.slice();const n=[];for(let e=t.length-1;e>=0;e--){A.pop();if(t[e].type===\"brace\"){break}if(t[e].type!==\"dots\"){n.unshift(t[e].value)}}e=expandRange(n,u);m.backtrack=true}if(t.comma!==true&&t.dots!==true){const u=m.output.slice(0,t.outputIndex);const n=m.tokens.slice(t.tokensIndex);t.value=t.output=\"\\\\{\";G=e=\"\\\\}\";m.output=u;for(const t of n){m.output+=t.output||t.value}}push({type:\"brace\",value:G,output:e});decrement(\"braces\");N.pop();continue}if(G===\"|\"){if(w.length>0){w[w.length-1].conditions++}push({type:\"text\",value:G});continue}if(G===\",\"){let t=G;const e=N[N.length-1];if(e&&I[I.length-1]===\"braces\"){e.comma=true;t=\"|\"}push({type:\"comma\",value:G,output:t});continue}if(G===\"/\"){if(B.type===\"dot\"&&m.index===m.start+1){m.start=m.index+1;m.consumed=\"\";m.output=\"\";A.pop();B=f;continue}push({type:\"slash\",value:G,output:b});continue}if(G===\".\"){if(m.braces>0&&B.type===\"dot\"){if(B.value===\".\")B.output=h;const t=N[N.length-1];B.type=\"dots\";B.output+=G;B.value+=G;t.dots=true;continue}if(m.braces+m.parens===0&&B.type!==\"bos\"&&B.type!==\"slash\"){push({type:\"text\",value:G,output:h});continue}push({type:\"dot\",value:G,output:h});continue}if(G===\"?\"){const t=B&&B.value===\"(\";if(!t&&u.noextglob!==true&&D()===\"(\"&&D(2)!==\"?\"){extglobOpen(\"qmark\",G);continue}if(B&&B.type===\"paren\"){const t=D();let e=G;if(B.value===\"(\"&&!/[!=<:]/.test(t)||t===\"<\"&&!/<([!=]|\\w+>)/.test(remaining())){e=`\\\\${G}`}push({type:\"text\",value:G,output:e});continue}if(u.dot!==true&&(B.type===\"slash\"||B.type===\"bos\")){push({type:\"qmark\",value:G,output:v});continue}push({type:\"qmark\",value:G,output:H});continue}if(G===\"!\"){if(u.noextglob!==true&&D()===\"(\"){if(D(2)!==\"?\"||!/[!=<:]/.test(D(3))){extglobOpen(\"negate\",G);continue}}if(u.nonegate!==true&&m.index===0){negate();continue}}if(G===\"+\"){if(u.noextglob!==true&&D()===\"(\"&&D(2)!==\"?\"){extglobOpen(\"plus\",G);continue}if(B&&B.value===\"(\"||u.regex===false){push({type:\"plus\",value:G,output:g});continue}if(B&&(B.type===\"bracket\"||B.type===\"paren\"||B.type===\"brace\")||m.parens>0){push({type:\"plus\",value:G});continue}push({type:\"plus\",value:g});continue}if(G===\"@\"){if(u.noextglob!==true&&D()===\"(\"&&D(2)!==\"?\"){push({type:\"at\",extglob:true,value:G,output:\"\"});continue}push({type:\"text\",value:G});continue}if(G!==\"*\"){if(G===\"$\"||G===\"^\"){G=`\\\\${G}`}const t=a.exec(remaining());if(t){G+=t[0];m.index+=t[0].length}push({type:\"text\",value:G});continue}if(B&&(B.type===\"globstar\"||B.star===true)){B.type=\"star\";B.star=true;B.value+=G;B.output=k;m.backtrack=true;m.globstar=true;consume(G);continue}let e=remaining();if(u.noextglob!==true&&/^\\([^?]/.test(e)){extglobOpen(\"star\",G);continue}if(B.type===\"star\"){if(u.noglobstar===true){consume(G);continue}const n=B.prev;const o=n.prev;const s=n.type===\"slash\"||n.type===\"bos\";const r=o&&(o.type===\"star\"||o.type===\"globstar\");if(u.bash===true&&(!s||e[0]&&e[0]!==\"/\")){push({type:\"star\",value:G,output:\"\"});continue}const a=m.braces>0&&(n.type===\"comma\"||n.type===\"brace\");const i=w.length&&(n.type===\"pipe\"||n.type===\"paren\");if(!s&&n.type!==\"paren\"&&!a&&!i){push({type:\"star\",value:G,output:\"\"});continue}while(e.slice(0,3)===\"/**\"){const u=t[m.index+4];if(u&&u!==\"/\"){break}e=e.slice(3);consume(\"/**\",3)}if(n.type===\"bos\"&&eos()){B.type=\"globstar\";B.value+=G;B.output=globstar(u);m.output=B.output;m.globstar=true;consume(G);continue}if(n.type===\"slash\"&&n.prev.type!==\"bos\"&&!r&&eos()){m.output=m.output.slice(0,-(n.output+B.output).length);n.output=`(?:${n.output}`;B.type=\"globstar\";B.output=globstar(u)+(u.strictSlashes?\")\":\"|$)\");B.value+=G;m.globstar=true;m.output+=n.output+B.output;consume(G);continue}if(n.type===\"slash\"&&n.prev.type!==\"bos\"&&e[0]===\"/\"){const t=e[1]!==void 0?\"|$\":\"\";m.output=m.output.slice(0,-(n.output+B.output).length);n.output=`(?:${n.output}`;B.type=\"globstar\";B.output=`${globstar(u)}${b}|${b}${t})`;B.value+=G;m.output+=n.output+B.output;m.globstar=true;consume(G+M());push({type:\"slash\",value:\"/\",output:\"\"});continue}if(n.type===\"bos\"&&e[0]===\"/\"){B.type=\"globstar\";B.value+=G;B.output=`(?:^|${b}|${globstar(u)}${b})`;m.output=B.output;m.globstar=true;consume(G+M());push({type:\"slash\",value:\"/\",output:\"\"});continue}m.output=m.output.slice(0,-B.output.length);B.type=\"globstar\";B.output=globstar(u);B.value+=G;m.output+=B.output;m.globstar=true;consume(G);continue}const n={type:\"star\",value:G,output:k};if(u.bash===true){n.output=\".*?\";if(B.type===\"bos\"||B.type===\"slash\"){n.output=T+n.output}push(n);continue}if(B&&(B.type===\"bracket\"||B.type===\"paren\")&&u.regex===true){n.output=G;push(n);continue}if(m.index===m.start||B.type===\"slash\"||B.type===\"dot\"){if(B.type===\"dot\"){m.output+=x;B.output+=x}else if(u.dot===true){m.output+=S;B.output+=S}else{m.output+=T;B.output+=T}if(D()!==\"*\"){m.output+=C;B.output+=C}}push(n)}while(m.brackets>0){if(u.strictBrackets===true)throw new SyntaxError(syntaxError(\"closing\",\"]\"));m.output=o.escapeLast(m.output,\"[\");decrement(\"brackets\")}while(m.parens>0){if(u.strictBrackets===true)throw new SyntaxError(syntaxError(\"closing\",\")\"));m.output=o.escapeLast(m.output,\"(\");decrement(\"parens\")}while(m.braces>0){if(u.strictBrackets===true)throw new SyntaxError(syntaxError(\"closing\",\"}\"));m.output=o.escapeLast(m.output,\"{\");decrement(\"braces\")}if(u.strictSlashes!==true&&(B.type===\"star\"||B.type===\"bracket\")){push({type:\"maybe_slash\",value:\"\",output:`${b}?`})}if(m.backtrack===true){m.output=\"\";for(const t of m.tokens){m.output+=t.output!=null?t.output:t.value;if(t.suffix){m.output+=t.suffix}}}return m};parse.fastpaths=(t,e)=>{const u={...e};const r=typeof u.maxLength===\"number\"?Math.min(s,u.maxLength):s;const a=t.length;if(a>r){throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${r}`)}t=c[t]||t;const{DOT_LITERAL:i,SLASH_LITERAL:p,ONE_CHAR:l,DOTS_SLASH:f,NO_DOT:A,NO_DOTS:_,NO_DOTS_SLASH:R,STAR:E,START_ANCHOR:h}=n.globChars(u.windows);const g=u.dot?_:A;const b=u.dot?R:A;const C=u.capture?\"\":\"?:\";const y={negated:false,prefix:\"\"};let $=u.bash===true?\".*?\":E;if(u.capture){$=`(${$})`}const globstar=t=>{if(t.noglobstar===true)return $;return`(${C}(?:(?!${h}${t.dot?f:i}).)*?)`};const create=t=>{switch(t){case\"*\":return`${g}${l}${$}`;case\".*\":return`${i}${l}${$}`;case\"*.*\":return`${g}${$}${i}${l}${$}`;case\"*/*\":return`${g}${$}${p}${l}${b}${$}`;case\"**\":return g+globstar(u);case\"**/*\":return`(?:${g}${globstar(u)}${p})?${b}${l}${$}`;case\"**/*.*\":return`(?:${g}${globstar(u)}${p})?${b}${$}${i}${l}${$}`;case\"**/.*\":return`(?:${g}${globstar(u)}${p})?${i}${l}${$}`;default:{const e=/^(.*?)\\.(\\w+)$/.exec(t);if(!e)return;const u=create(e[1]);if(!u)return;return u+i+e[2]}}};const x=o.removePrefix(t,y);let S=create(x);if(S&&u.strictSlashes!==true){S+=`${p}?`}return S};t.exports=parse},510:(t,e,u)=>{const n=u(716);const o=u(697);const s=u(96);const r=u(154);const isObject=t=>t&&typeof t===\"object\"&&!Array.isArray(t);const picomatch=(t,e,u=false)=>{if(Array.isArray(t)){const n=t.map((t=>picomatch(t,e,u)));const arrayMatcher=t=>{for(const e of n){const u=e(t);if(u)return u}return false};return arrayMatcher}const n=isObject(t)&&t.tokens&&t.input;if(t===\"\"||typeof t!==\"string\"&&!n){throw new TypeError(\"Expected pattern to be a non-empty string\")}const o=e||{};const s=o.windows;const r=n?picomatch.compileRe(t,e):picomatch.makeRe(t,e,false,true);const a=r.state;delete r.state;let isIgnored=()=>false;if(o.ignore){const t={...e,ignore:null,onMatch:null,onResult:null};isIgnored=picomatch(o.ignore,t,u)}const matcher=(u,n=false)=>{const{isMatch:i,match:c,output:p}=picomatch.test(u,r,e,{glob:t,posix:s});const l={glob:t,state:a,regex:r,posix:s,input:u,output:p,match:c,isMatch:i};if(typeof o.onResult===\"function\"){o.onResult(l)}if(i===false){l.isMatch=false;return n?l:false}if(isIgnored(u)){if(typeof o.onIgnore===\"function\"){o.onIgnore(l)}l.isMatch=false;return n?l:false}if(typeof o.onMatch===\"function\"){o.onMatch(l)}return n?l:true};if(u){matcher.state=a}return matcher};picomatch.test=(t,e,u,{glob:n,posix:o}={})=>{if(typeof t!==\"string\"){throw new TypeError(\"Expected input to be a string\")}if(t===\"\"){return{isMatch:false,output:\"\"}}const r=u||{};const a=r.format||(o?s.toPosixSlashes:null);let i=t===n;let c=i&&a?a(t):t;if(i===false){c=a?a(t):t;i=c===n}if(i===false||r.capture===true){if(r.matchBase===true||r.basename===true){i=picomatch.matchBase(t,e,u,o)}else{i=e.exec(c)}}return{isMatch:Boolean(i),match:i,output:c}};picomatch.matchBase=(t,e,u)=>{const n=e instanceof RegExp?e:picomatch.makeRe(e,u);return n.test(s.basename(t))};picomatch.isMatch=(t,e,u)=>picomatch(e,u)(t);picomatch.parse=(t,e)=>{if(Array.isArray(t))return t.map((t=>picomatch.parse(t,e)));return o(t,{...e,fastpaths:false})};picomatch.scan=(t,e)=>n(t,e);picomatch.compileRe=(t,e,u=false,n=false)=>{if(u===true){return t.output}const o=e||{};const s=o.contains?\"\":\"^\";const r=o.contains?\"\":\"$\";let a=`${s}(?:${t.output})${r}`;if(t&&t.negated===true){a=`^(?!${a}).*$`}const i=picomatch.toRegex(a,e);if(n===true){i.state=t}return i};picomatch.makeRe=(t,e={},u=false,n=false)=>{if(!t||typeof t!==\"string\"){throw new TypeError(\"Expected a non-empty string\")}let s={negated:false,fastpaths:true};if(e.fastpaths!==false&&(t[0]===\".\"||t[0]===\"*\")){s.output=o.fastpaths(t,e)}if(!s.output){s=o(t,e)}return picomatch.compileRe(s,e,u,n)};picomatch.toRegex=(t,e)=>{try{const u=e||{};return new RegExp(t,u.flags||(u.nocase?\"i\":\"\"))}catch(t){if(e&&e.debug===true)throw t;return/$^/}};picomatch.constants=r;t.exports=picomatch},716:(t,e,u)=>{const n=u(96);const{CHAR_ASTERISK:o,CHAR_AT:s,CHAR_BACKWARD_SLASH:r,CHAR_COMMA:a,CHAR_DOT:i,CHAR_EXCLAMATION_MARK:c,CHAR_FORWARD_SLASH:p,CHAR_LEFT_CURLY_BRACE:l,CHAR_LEFT_PARENTHESES:f,CHAR_LEFT_SQUARE_BRACKET:A,CHAR_PLUS:_,CHAR_QUESTION_MARK:R,CHAR_RIGHT_CURLY_BRACE:E,CHAR_RIGHT_PARENTHESES:h,CHAR_RIGHT_SQUARE_BRACKET:g}=u(154);const isPathSeparator=t=>t===p||t===r;const depth=t=>{if(t.isPrefix!==true){t.depth=t.isGlobstar?Infinity:1}};const scan=(t,e)=>{const u=e||{};const b=t.length-1;const C=u.parts===true||u.scanToEnd===true;const y=[];const $=[];const x=[];let S=t;let H=-1;let v=0;let d=0;let L=false;let T=false;let O=false;let k=false;let m=false;let w=false;let N=false;let I=false;let B=false;let G=false;let D=0;let M;let P;let K={value:\"\",depth:0,isGlob:false};const eos=()=>H>=b;const peek=()=>S.charCodeAt(H+1);const advance=()=>{M=P;return S.charCodeAt(++H)};while(H<b){P=advance();let t;if(P===r){N=K.backslashes=true;P=advance();if(P===l){w=true}continue}if(w===true||P===l){D++;while(eos()!==true&&(P=advance())){if(P===r){N=K.backslashes=true;advance();continue}if(P===l){D++;continue}if(w!==true&&P===i&&(P=advance())===i){L=K.isBrace=true;O=K.isGlob=true;G=true;if(C===true){continue}break}if(w!==true&&P===a){L=K.isBrace=true;O=K.isGlob=true;G=true;if(C===true){continue}break}if(P===E){D--;if(D===0){w=false;L=K.isBrace=true;G=true;break}}}if(C===true){continue}break}if(P===p){y.push(H);$.push(K);K={value:\"\",depth:0,isGlob:false};if(G===true)continue;if(M===i&&H===v+1){v+=2;continue}d=H+1;continue}if(u.noext!==true){const t=P===_||P===s||P===o||P===R||P===c;if(t===true&&peek()===f){O=K.isGlob=true;k=K.isExtglob=true;G=true;if(P===c&&H===v){B=true}if(C===true){while(eos()!==true&&(P=advance())){if(P===r){N=K.backslashes=true;P=advance();continue}if(P===h){O=K.isGlob=true;G=true;break}}continue}break}}if(P===o){if(M===o)m=K.isGlobstar=true;O=K.isGlob=true;G=true;if(C===true){continue}break}if(P===R){O=K.isGlob=true;G=true;if(C===true){continue}break}if(P===A){while(eos()!==true&&(t=advance())){if(t===r){N=K.backslashes=true;advance();continue}if(t===g){T=K.isBracket=true;O=K.isGlob=true;G=true;break}}if(C===true){continue}break}if(u.nonegate!==true&&P===c&&H===v){I=K.negated=true;v++;continue}if(u.noparen!==true&&P===f){O=K.isGlob=true;if(C===true){while(eos()!==true&&(P=advance())){if(P===f){N=K.backslashes=true;P=advance();continue}if(P===h){G=true;break}}continue}break}if(O===true){G=true;if(C===true){continue}break}}if(u.noext===true){k=false;O=false}let U=S;let X=\"\";let F=\"\";if(v>0){X=S.slice(0,v);S=S.slice(v);d-=v}if(U&&O===true&&d>0){U=S.slice(0,d);F=S.slice(d)}else if(O===true){U=\"\";F=S}else{U=S}if(U&&U!==\"\"&&U!==\"/\"&&U!==S){if(isPathSeparator(U.charCodeAt(U.length-1))){U=U.slice(0,-1)}}if(u.unescape===true){if(F)F=n.removeBackslashes(F);if(U&&N===true){U=n.removeBackslashes(U)}}const Q={prefix:X,input:t,start:v,base:U,glob:F,isBrace:L,isBracket:T,isGlob:O,isExtglob:k,isGlobstar:m,negated:I,negatedExtglob:B};if(u.tokens===true){Q.maxDepth=0;if(!isPathSeparator(P)){$.push(K)}Q.tokens=$}if(u.parts===true||u.tokens===true){let e;for(let n=0;n<y.length;n++){const o=e?e+1:v;const s=y[n];const r=t.slice(o,s);if(u.tokens){if(n===0&&v!==0){$[n].isPrefix=true;$[n].value=X}else{$[n].value=r}depth($[n]);Q.maxDepth+=$[n].depth}if(n!==0||r!==\"\"){x.push(r)}e=s}if(e&&e+1<t.length){const n=t.slice(e+1);x.push(n);if(u.tokens){$[$.length-1].value=n;depth($[$.length-1]);Q.maxDepth+=$[$.length-1].depth}}Q.slashes=y;Q.parts=x}return Q};t.exports=scan},96:(t,e,u)=>{const{REGEX_BACKSLASH:n,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:r}=u(154);e.isObject=t=>t!==null&&typeof t===\"object\"&&!Array.isArray(t);e.hasRegexChars=t=>s.test(t);e.isRegexChar=t=>t.length===1&&e.hasRegexChars(t);e.escapeRegex=t=>t.replace(r,\"\\\\$1\");e.toPosixSlashes=t=>t.replace(n,\"/\");e.removeBackslashes=t=>t.replace(o,(t=>t===\"\\\\\"?\"\":t));e.escapeLast=(t,u,n)=>{const o=t.lastIndexOf(u,n);if(o===-1)return t;if(t[o-1]===\"\\\\\")return e.escapeLast(t,u,o-1);return`${t.slice(0,o)}\\\\${t.slice(o)}`};e.removePrefix=(t,e={})=>{let u=t;if(u.startsWith(\"./\")){u=u.slice(2);e.prefix=\"./\"}return u};e.wrapOutput=(t,e={},u={})=>{const n=u.contains?\"\":\"^\";const o=u.contains?\"\":\"$\";let s=`${n}(?:${t})${o}`;if(e.negated===true){s=`(?:^(?!${s}).*$)`}return s};e.basename=(t,{windows:e}={})=>{const u=t.split(e?/[\\\\/]/:\"/\");const n=u[u.length-1];if(n===\"\"){return u[u.length-2]}return n}}};var e={};function __nccwpck_require__(u){var n=e[u];if(n!==undefined){return n.exports}var o=e[u]={exports:{}};var s=true;try{t[u](o,o.exports,__nccwpck_require__);s=false}finally{if(s)delete e[u]}return o.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var u=__nccwpck_require__(170);module.exports=u})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcGljb21hdGNoL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxhQUFhLE9BQU8sY0FBYyxlQUFlLHFCQUFxQix1REFBdUQseUNBQXlDLGtDQUFrQyxVQUFVLE9BQU8sZ0JBQWdCLE9BQU8sV0FBVyxPQUFPLE9BQU8sb0JBQW9CLGNBQWMsZ0NBQWdDLGlEQUFpRCxHQUFHLDBCQUEwQixnQkFBZ0IsMkJBQTJCLG9CQUFvQixTQUFTLGdCQUFnQixhQUFhLEVBQUUsR0FBRyxjQUFjLGNBQWMsY0FBYyxjQUFjLGdCQUFnQixlQUFlLGNBQWMsRUFBRSxLQUFLLGdCQUFnQixFQUFFLEdBQUcsV0FBVyxHQUFHLElBQUksRUFBRSxFQUFFLEVBQUUsY0FBYyxFQUFFLEdBQUcsY0FBYyxFQUFFLEVBQUUsRUFBRSxHQUFHLGNBQWMsR0FBRyxJQUFJLEVBQUUsRUFBRSxHQUFHLGNBQWMsRUFBRSxHQUFHLGNBQWMsRUFBRSxHQUFHLFdBQVcsRUFBRSxJQUFJLFlBQVksU0FBUyx3TUFBd00sU0FBUyx1QkFBdUIsRUFBRSxtQkFBbUIsRUFBRSxrQkFBa0IsR0FBRyxJQUFJLE1BQU0sRUFBRSxtQkFBbUIsRUFBRSx1QkFBdUIsRUFBRSxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUUsMEJBQTBCLEdBQUcsSUFBSSxNQUFNLEVBQUUsMkJBQTJCLEdBQUcsSUFBSSxNQUFNLEVBQUUsMEJBQTBCLEVBQUUseUJBQXlCLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLFNBQVMseUxBQXlMLGFBQWEsRUFBRSw4RUFBOEUsV0FBVyxzRUFBc0UscURBQXFELHlDQUF5QyxnR0FBZ0csNEVBQTRFLHVDQUF1QyxtM0JBQW0zQixPQUFPLEtBQUssMENBQTBDLE9BQU8sR0FBRyxNQUFNLG1DQUFtQyxNQUFNLGtDQUFrQyxNQUFNLGtDQUFrQyxNQUFNLGlDQUFpQyxjQUFjLHNCQUFzQixlQUFlLGVBQWUs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QUFPLGFBQWEsU0FBUyxPQUFPLG1CQUFtQixRQUFRLFFBQVEsUUFBUSxTQUFTLFNBQVMsUUFBUSxlQUFlLGFBQWEsS0FBSyxxQkFBcUIsZUFBZSxhQUFhLGtCQUFrQixLQUFLLElBQUksS0FBSyxJQUFJLDhCQUE4Qiw4Q0FBOEMsaUJBQWlCLHNCQUFzQiw4QkFBOEIsZ0JBQWdCLDBCQUEwQixTQUFTLDJIQUEySCxvQkFBb0IsYUFBYSx3QkFBd0IsVUFBVSxXQUFXLG9DQUFvQyxNQUFNLFlBQVksV0FBVyxLQUFLLGdCQUFnQixhQUFhLHFCQUFxQixhQUFhLGlCQUFpQixtQkFBbUIsYUFBYSxLQUFLLGFBQWEsWUFBWSx1QkFBdUIsa0JBQWtCLFVBQVUsSUFBSSxvQkFBb0IscUJBQXFCLFVBQVUsYUFBYSxzQkFBc0IscUJBQXFCLGlDQUFpQyxZQUFZLFVBQVUsVUFBVSxlQUFlLGNBQWMsTUFBTSw4RkFBOEYsUUFBUSwrREFBK0QsNkJBQTZCLGtEQUFrRCxxQ0FBcUMscUNBQXFDLHVEQUF1RCx1QkFBdUIsMkJBQTJCLG1CQUFtQiw4Q0FBOEMsU0FBUyxhQUFhLElBQUksV0FBVyxHQUFHLHNCQUFzQixJQUFJLFFBQVEsdUJBQXVCLGFBQWEsY0FBYyxVQUFVLG9CQUFvQixLQUFLLElBQUksMEJBQTBCLDBCQUEwQixTQUFTLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxFQUFFLHFCQUFxQixZQUFZLEVBQUUsT0FBTyxVQUFVLGVBQWUsVUFBVSxHQUFHLElBQUksK0JBQStCLHNCQUFzQixXQUFXLHFCQUFxQixZQUFZLFNBQVMsZ0NBQWdDLFdBQVcsa0JBQWtCLGlCQUFpQixZQUFZLFlBQVksV0FBVyxJQUFJLHNDQUFzQyxRQUFRLFFBQVEsaUJBQWlCLGlCQUFpQixtRUFBbUUsU0FBUyxLQUFLLCtCQUErQixpQkFBaUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3BpY29tYXRjaC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoKCk9PntcInVzZSBzdHJpY3RcIjt2YXIgdD17MTcwOih0LGUsdSk9Pntjb25zdCBuPXUoNTEwKTtjb25zdCBpc1dpbmRvd3M9KCk9PntpZih0eXBlb2YgbmF2aWdhdG9yIT09XCJ1bmRlZmluZWRcIiYmbmF2aWdhdG9yLnBsYXRmb3JtKXtjb25zdCB0PW5hdmlnYXRvci5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpO3JldHVybiB0PT09XCJ3aW4zMlwifHx0PT09XCJ3aW5kb3dzXCJ9aWYodHlwZW9mIHByb2Nlc3MhPT1cInVuZGVmaW5lZFwiJiZwcm9jZXNzLnBsYXRmb3JtKXtyZXR1cm4gcHJvY2Vzcy5wbGF0Zm9ybT09PVwid2luMzJcIn1yZXR1cm4gZmFsc2V9O2Z1bmN0aW9uIHBpY29tYXRjaCh0LGUsdT1mYWxzZSl7aWYoZSYmKGUud2luZG93cz09PW51bGx8fGUud2luZG93cz09PXVuZGVmaW5lZCkpe2U9ey4uLmUsd2luZG93czppc1dpbmRvd3MoKX19cmV0dXJuIG4odCxlLHUpfU9iamVjdC5hc3NpZ24ocGljb21hdGNoLG4pO3QuZXhwb3J0cz1waWNvbWF0Y2h9LDE1NDp0PT57Y29uc3QgZT1cIlxcXFxcXFxcL1wiO2NvbnN0IHU9YFteJHtlfV1gO2NvbnN0IG49XCJcXFxcLlwiO2NvbnN0IG89XCJcXFxcK1wiO2NvbnN0IHM9XCJcXFxcP1wiO2NvbnN0IHI9XCJcXFxcL1wiO2NvbnN0IGE9XCIoPz0uKVwiO2NvbnN0IGk9XCJbXi9dXCI7Y29uc3QgYz1gKD86JHtyfXwkKWA7Y29uc3QgcD1gKD86Xnwke3J9KWA7Y29uc3QgbD1gJHtufXsxLDJ9JHtjfWA7Y29uc3QgZj1gKD8hJHtufSlgO2NvbnN0IEE9YCg/ISR7cH0ke2x9KWA7Y29uc3QgXz1gKD8hJHtufXswLDF9JHtjfSlgO2NvbnN0IFI9YCg/ISR7bH0pYDtjb25zdCBFPWBbXi4ke3J9XWA7Y29uc3QgaD1gJHtpfSo/YDtjb25zdCBnPVwiL1wiO2NvbnN0IGI9e0RPVF9MSVRFUkFMOm4sUExVU19MSVRFUkFMOm8sUU1BUktfTElURVJBTDpzLFNMQVNIX0xJVEVSQUw6cixPTkVfQ0hBUjphLFFNQVJLOmksRU5EX0FOQ0hPUjpjLERPVFNfU0xBU0g6bCxOT19ET1Q6ZixOT19ET1RTOkEsTk9fRE9UX1NMQVNIOl8sTk9fRE9UU19TTEFTSDpSLFFNQVJLX05PX0RPVDpFLFNUQVI6aCxTVEFSVF9BTkNIT1I6cCxTRVA6Z307Y29uc3QgQz17Li4uYixTTEFTSF9MSVRFUkFMOmBbJHtlfV1gLFFNQVJLOnUsU1RBUjpgJHt1fSo/YCxET1RTX1NMQVNIOmAke259ezEsMn0oPzpbJHtlfV18JClgLE5PX0RPVDpgKD8hJHtufSlgLE5PX0RPVFM6YCg/ISg/Ol58WyR7ZX1dKSR7bn17MSwyfSg/Olske2V9XXwkKSlgLE5PX0RPVF9TTEFTSDpgKD8hJHtufXswLDF9KD86WyR7ZX1dfCQpKWAsTk9fRE9UU19TTEFTSDpgKD8hJHtufXsxLDJ9KD86WyR7ZX1dfCQpKWAsUU1BUktfTk9fRE9UOmBbXi4ke2V9XWAsU1RBUlRfQU5DSE9SOmAoPzpefFske2V9XSlgLEVORF9BTkNIT1I6YCg/Olske2V9XXwkKWAsU0VQOlwiXFxcXFwifTtjb25zdCB5PXthbG51bTpcImEtekEtWjAtOVwiLGFscGhhOlwiYS16QS1aXCIsYXNjaWk6XCJcXFxceDAwLVxcXFx4N0ZcIixibGFuazpcIiBcXFxcdFwiLGNudHJsOlwiXFxcXHgwMC1cXFxceDFGXFxcXHg3RlwiLGRpZ2l0OlwiMC05XCIsZ3JhcGg6XCJcXFxceDIxLVxcXFx4N0VcIixsb3dlcjpcImEtelwiLHByaW50OlwiXFxcXHgyMC1cXFxceDdFIFwiLHB1bmN0OlwiXFxcXC0hXFxcIiMkJSYnKClcXFxcKissLi86Ozw9Pj9AW1xcXFxdXl9ge3x9flwiLHNwYWNlOlwiIFxcXFx0XFxcXHJcXFxcblxcXFx2XFxcXGZcIix1cHBlcjpcIkEtWlwiLHdvcmQ6XCJBLVphLXowLTlfXCIseGRpZ2l0OlwiQS1GYS1mMC05XCJ9O3QuZXhwb3J0cz17TUFYX0xFTkdUSDoxMDI0KjY0LFBPU0lYX1JFR0VYX1NPVVJDRTp5LFJFR0VYX0JBQ0tTTEFTSDovXFxcXCg/IVsqKz9eJHt9KHwpW1xcXV0pL2csUkVHRVhfTk9OX1NQRUNJQUxfQ0hBUlM6L15bXkAhW1xcXS4sJCorP157fSgpfFxcXFwvXSsvLFJFR0VYX1NQRUNJQUxfQ0hBUlM6L1stKis/Ll4ke30ofClbXFxdXS8sUkVHRVhfU1BFQ0lBTF9DSEFSU19CQUNLUkVGOi8oXFxcXD8pKChcXFcpKFxcMyopKS9nLFJFR0VYX1NQRUNJQUxfQ0hBUlNfR0xPQkFMOi8oWy0qKz8uXiR7fSh8KVtcXF1dKS9nLFJFR0VYX1JFTU9WRV9CQUNLU0xBU0g6Lyg/OlxcWy4qP1teXFxcXF1cXF18XFxcXCg/PS4pKS9nLFJFUExBQ0VNRU5UUzp7XCIqKipcIjpcIipcIixcIioqLyoqXCI6XCIqKlwiLFwiKiovKiovKipcIjpcIioqXCJ9LENIQVJfMDo0OCxDSEFSXzk6NTcsQ0hBUl9VUFBFUkNBU0VfQTo2NSxDSEFSX0xPV0VSQ0FTRV9BOjk3LENIQVJfVVBQRVJDQVNFX1o6OTAsQ0hBUl9MT1dFUkNBU0VfWjoxMjIsQ0hBUl9MRUZUX1BBUkVOVEhFU0VTOjQwLENIQVJfUklHSFRfUEFSRU5USEVTRVM6NDEsQ0hBUl9BU1RFUklTSzo0MixDSEFSX0FNUEVSU0FORDozOCxDSEFSX0FUOjY0LENIQVJfQkFDS1dBUkRfU0xBU0g6OTIsQ0hBUl9DQVJSSUFHRV9SRVRVUk46MTMsQ0hBUl9DSVJDVU1GTEVYX0FDQ0VOVDo5NCxDSEFSX0NPTE9OOjU4LENIQVJfQ09NTUE6NDQsQ0hBUl9ET1Q6NDYsQ0hBUl9ET1VCTEVfUVVPVEU6MzQsQ0hBUl9FUVVBTDo2MSxDSEFSX0VYQ0xBTUFUSU9OX01BUks6MzMsQ0hBUl9GT1JNX0ZFRUQ6MTIsQ0hBUl9GT1JXQVJEX1NMQVNIOjQ3LENIQVJfR1JBVkVfQUNDRU5UOjk2LENIQVJfSEFTSDozNSxDSEFSX0hZUEhFTl9NSU5VUzo0NSxDSEFSX0xFRlRfQU5HTEVfQlJBQ0tFVDo2MCxDSEFSX0xFRlRfQ1VSTFlfQlJBQ0U6MTIzLENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVDo5MSxDSEFSX0xJTkVfRkVFRDoxMCxDSEFSX05PX0JSRUFLX1NQQUNFOjE2MCxDSEFSX1BFUkNFTlQ6MzcsQ0hBUl9QTFVTOjQzLENIQVJfUVVFU1RJT05fTUFSSzo2MyxDSEFSX1JJR0hUX0FOR0xFX0JSQUNLRVQ6NjIsQ0hBUl9SSUdIVF9DVVJMWV9CUkFDRToxMjUsQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVDo5MyxDSEFSX1NFTUlDT0xPTjo1OSxDSEFSX1NJTkdMRV9RVU9URTozOSxDSEFSX1NQQUNFOjMyLENIQVJfVEFCOjksQ0hBUl9VTkRFUlNDT1JFOjk1LENIQVJfVkVSVElDQUxfTElORToxMjQsQ0hBUl9aRVJPX1dJRFRIX05PQlJFQUtfU1BBQ0U6NjUyNzksZXh0Z2xvYkNoYXJzKHQpe3JldHVybntcIiFcIjp7dHlwZTpcIm5lZ2F0ZVwiLG9wZW46XCIoPzooPyEoPzpcIixjbG9zZTpgKSkke3QuU1RBUn0pYH0sXCI/XCI6e3R5cGU6XCJxbWFya1wiLG9wZW46XCIoPzpcIixjbG9zZTpcIik/XCJ9LFwiK1wiOnt0eXBlOlwicGx1c1wiLG9wZW46XCIoPzpcIixjbG9zZTpcIikrXCJ9LFwiKlwiOnt0eXBlOlwic3RhclwiLG9wZW46XCIoPzpcIixjbG9zZTpcIikqXCJ9LFwiQFwiOnt0eXBlOlwiYXRcIixvcGVuOlwiKD86XCIsY2xvc2U6XCIpXCJ9fX0sZ2xvYkNoYXJzKHQpe3JldHVybiB0PT09dHJ1ZT9DOmJ9fX0sNjk3Oih0LGUsdSk9Pntjb25zdCBuPXUoMTU0KTtjb25zdCBvPXUoOTYpO2NvbnN0e01BWF9MRU5HVEg6cyxQT1NJWF9SRUdFWF9TT1VSQ0U6cixSRUdFWF9OT05fU1BFQ0lBTF9DSEFSUzphLFJFR0VYX1NQRUNJQUxfQ0hBUlNfQkFDS1JFRjppLFJFUExBQ0VNRU5UUzpjfT1uO2NvbnN0IGV4cGFuZFJhbmdlPSh0LGUpPT57aWYodHlwZW9mIGUuZXhwYW5kUmFuZ2U9PT1cImZ1bmN0aW9uXCIpe3JldHVybiBlLmV4cGFuZFJhbmdlKC4uLnQsZSl9dC5zb3J0KCk7Y29uc3QgdT1gWyR7dC5qb2luKFwiLVwiKX1dYDt0cnl7bmV3IFJlZ0V4cCh1KX1jYXRjaChlKXtyZXR1cm4gdC5tYXAoKHQ9Pm8uZXNjYXBlUmVnZXgodCkpKS5qb2luKFwiLi5cIil9cmV0dXJuIHV9O2NvbnN0IHN5bnRheEVycm9yPSh0LGUpPT5gTWlzc2luZyAke3R9OiBcIiR7ZX1cIiAtIHVzZSBcIlxcXFxcXFxcJHtlfVwiIHRvIG1hdGNoIGxpdGVyYWwgY2hhcmFjdGVyc2A7Y29uc3QgcGFyc2U9KHQsZSk9PntpZih0eXBlb2YgdCE9PVwic3RyaW5nXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBhIHN0cmluZ1wiKX10PWNbdF18fHQ7Y29uc3QgdT17Li4uZX07Y29uc3QgcD10eXBlb2YgdS5tYXhMZW5ndGg9PT1cIm51bWJlclwiP01hdGgubWluKHMsdS5tYXhMZW5ndGgpOnM7bGV0IGw9dC5sZW5ndGg7aWYobD5wKXt0aHJvdyBuZXcgU3ludGF4RXJyb3IoYElucHV0IGxlbmd0aDogJHtsfSwgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQgbGVuZ3RoOiAke3B9YCl9Y29uc3QgZj17dHlwZTpcImJvc1wiLHZhbHVlOlwiXCIsb3V0cHV0OnUucHJlcGVuZHx8XCJcIn07Y29uc3QgQT1bZl07Y29uc3QgXz11LmNhcHR1cmU/XCJcIjpcIj86XCI7Y29uc3QgUj1uLmdsb2JDaGFycyh1LndpbmRvd3MpO2NvbnN0IEU9bi5leHRnbG9iQ2hhcnMoUik7Y29uc3R7RE9UX0xJVEVSQUw6aCxQTFVTX0xJVEVSQUw6ZyxTTEFTSF9MSVRFUkFMOmIsT05FX0NIQVI6QyxET1RTX1NMQVNIOnksTk9fRE9UOiQsTk9fRE9UX1NMQVNIOngsTk9fRE9UU19TTEFTSDpTLFFNQVJLOkgsUU1BUktfTk9fRE9UOnYsU1RBUjpkLFNUQVJUX0FOQ0hPUjpMfT1SO2NvbnN0IGdsb2JzdGFyPXQ9PmAoJHtffSg/Oig/ISR7TH0ke3QuZG90P3k6aH0pLikqPylgO2NvbnN0IFQ9dS5kb3Q/XCJcIjokO2NvbnN0IE89dS5kb3Q/SDp2O2xldCBrPXUuYmFzaD09PXRydWU/Z2xvYnN0YXIodSk6ZDtpZih1LmNhcHR1cmUpe2s9YCgke2t9KWB9aWYodHlwZW9mIHUubm9leHQ9PT1cImJvb2xlYW5cIil7dS5ub2V4dGdsb2I9dS5ub2V4dH1jb25zdCBtPXtpbnB1dDp0LGluZGV4Oi0xLHN0YXJ0OjAsZG90OnUuZG90PT09dHJ1ZSxjb25zdW1lZDpcIlwiLG91dHB1dDpcIlwiLHByZWZpeDpcIlwiLGJhY2t0cmFjazpmYWxzZSxuZWdhdGVkOmZhbHNlLGJyYWNrZXRzOjAsYnJhY2VzOjAscGFyZW5zOjAscXVvdGVzOjAsZ2xvYnN0YXI6ZmFsc2UsdG9rZW5zOkF9O3Q9by5yZW1vdmVQcmVmaXgodCxtKTtsPXQubGVuZ3RoO2NvbnN0IHc9W107Y29uc3QgTj1bXTtjb25zdCBJPVtdO2xldCBCPWY7bGV0IEc7Y29uc3QgZW9zPSgpPT5tLmluZGV4PT09bC0xO2NvbnN0IEQ9bS5wZWVrPShlPTEpPT50W20uaW5kZXgrZV07Y29uc3QgTT1tLmFkdmFuY2U9KCk9PnRbKyttLmluZGV4XXx8XCJcIjtjb25zdCByZW1haW5pbmc9KCk9PnQuc2xpY2UobS5pbmRleCsxKTtjb25zdCBjb25zdW1lPSh0PVwiXCIsZT0wKT0+e20uY29uc3VtZWQrPXQ7bS5pbmRleCs9ZX07Y29uc3QgYXBwZW5kPXQ9PnttLm91dHB1dCs9dC5vdXRwdXQhPW51bGw/dC5vdXRwdXQ6dC52YWx1ZTtjb25zdW1lKHQudmFsdWUpfTtjb25zdCBuZWdhdGU9KCk9PntsZXQgdD0xO3doaWxlKEQoKT09PVwiIVwiJiYoRCgyKSE9PVwiKFwifHxEKDMpPT09XCI/XCIpKXtNKCk7bS5zdGFydCsrO3QrK31pZih0JTI9PT0wKXtyZXR1cm4gZmFsc2V9bS5uZWdhdGVkPXRydWU7bS5zdGFydCsrO3JldHVybiB0cnVlfTtjb25zdCBpbmNyZW1lbnQ9dD0+e21bdF0rKztJLnB1c2godCl9O2NvbnN0IGRlY3JlbWVudD10PT57bVt0XS0tO0kucG9wKCl9O2NvbnN0IHB1c2g9dD0+e2lmKEIudHlwZT09PVwiZ2xvYnN0YXJcIil7Y29uc3QgZT1tLmJyYWNlcz4wJiYodC50eXBlPT09XCJjb21tYVwifHx0LnR5cGU9PT1cImJyYWNlXCIpO2NvbnN0IHU9dC5leHRnbG9iPT09dHJ1ZXx8dy5sZW5ndGgmJih0LnR5cGU9PT1cInBpcGVcInx8dC50eXBlPT09XCJwYXJlblwiKTtpZih0LnR5cGUhPT1cInNsYXNoXCImJnQudHlwZSE9PVwicGFyZW5cIiYmIWUmJiF1KXttLm91dHB1dD1tLm91dHB1dC5zbGljZSgwLC1CLm91dHB1dC5sZW5ndGgpO0IudHlwZT1cInN0YXJcIjtCLnZhbHVlPVwiKlwiO0Iub3V0cHV0PWs7bS5vdXRwdXQrPUIub3V0cHV0fX1pZih3Lmxlbmd0aCYmdC50eXBlIT09XCJwYXJlblwiKXt3W3cubGVuZ3RoLTFdLmlubmVyKz10LnZhbHVlfWlmKHQudmFsdWV8fHQub3V0cHV0KWFwcGVuZCh0KTtpZihCJiZCLnR5cGU9PT1cInRleHRcIiYmdC50eXBlPT09XCJ0ZXh0XCIpe0Iub3V0cHV0PShCLm91dHB1dHx8Qi52YWx1ZSkrdC52YWx1ZTtCLnZhbHVlKz10LnZhbHVlO3JldHVybn10LnByZXY9QjtBLnB1c2godCk7Qj10fTtjb25zdCBleHRnbG9iT3Blbj0odCxlKT0+e2NvbnN0IG49ey4uLkVbZV0sY29uZGl0aW9uczoxLGlubmVyOlwiXCJ9O24ucHJldj1CO24ucGFyZW5zPW0ucGFyZW5zO24ub3V0cHV0PW0ub3V0cHV0O2NvbnN0IG89KHUuY2FwdHVyZT9cIihcIjpcIlwiKStuLm9wZW47aW5jcmVtZW50KFwicGFyZW5zXCIpO3B1c2goe3R5cGU6dCx2YWx1ZTplLG91dHB1dDptLm91dHB1dD9cIlwiOkN9KTtwdXNoKHt0eXBlOlwicGFyZW5cIixleHRnbG9iOnRydWUsdmFsdWU6TSgpLG91dHB1dDpvfSk7dy5wdXNoKG4pfTtjb25zdCBleHRnbG9iQ2xvc2U9dD0+e2xldCBuPXQuY2xvc2UrKHUuY2FwdHVyZT9cIilcIjpcIlwiKTtsZXQgbztpZih0LnR5cGU9PT1cIm5lZ2F0ZVwiKXtsZXQgcz1rO2lmKHQuaW5uZXImJnQuaW5uZXIubGVuZ3RoPjEmJnQuaW5uZXIuaW5jbHVkZXMoXCIvXCIpKXtzPWdsb2JzdGFyKHUpfWlmKHMhPT1rfHxlb3MoKXx8L15cXCkrJC8udGVzdChyZW1haW5pbmcoKSkpe249dC5jbG9zZT1gKSQpKSR7c31gfWlmKHQuaW5uZXIuaW5jbHVkZXMoXCIqXCIpJiYobz1yZW1haW5pbmcoKSkmJi9eXFwuW15cXFxcLy5dKyQvLnRlc3Qobykpe2NvbnN0IHU9cGFyc2Uobyx7Li4uZSxmYXN0cGF0aHM6ZmFsc2V9KS5vdXRwdXQ7bj10LmNsb3NlPWApJHt1fSkke3N9KWB9aWYodC5wcmV2LnR5cGU9PT1cImJvc1wiKXttLm5lZ2F0ZWRFeHRnbG9iPXRydWV9fXB1c2goe3R5cGU6XCJwYXJlblwiLGV4dGdsb2I6dHJ1ZSx2YWx1ZTpHLG91dHB1dDpufSk7ZGVjcmVtZW50KFwicGFyZW5zXCIpfTtpZih1LmZhc3RwYXRocyE9PWZhbHNlJiYhLyheWyohXXxbLygpW1xcXXt9XCJdKS8udGVzdCh0KSl7bGV0IG49ZmFsc2U7bGV0IHM9dC5yZXBsYWNlKGksKCh0LGUsdSxvLHMscik9PntpZihvPT09XCJcXFxcXCIpe249dHJ1ZTtyZXR1cm4gdH1pZihvPT09XCI/XCIpe2lmKGUpe3JldHVybiBlK28rKHM/SC5yZXBlYXQocy5sZW5ndGgpOlwiXCIpfWlmKHI9PT0wKXtyZXR1cm4gTysocz9ILnJlcGVhdChzLmxlbmd0aCk6XCJcIil9cmV0dXJuIEgucmVwZWF0KHUubGVuZ3RoKX1pZihvPT09XCIuXCIpe3JldHVybiBoLnJlcGVhdCh1Lmxlbmd0aCl9aWYobz09PVwiKlwiKXtpZihlKXtyZXR1cm4gZStvKyhzP2s6XCJcIil9cmV0dXJuIGt9cmV0dXJuIGU/dDpgXFxcXCR7dH1gfSkpO2lmKG49PT10cnVlKXtpZih1LnVuZXNjYXBlPT09dHJ1ZSl7cz1zLnJlcGxhY2UoL1xcXFwvZyxcIlwiKX1lbHNle3M9cy5yZXBsYWNlKC9cXFxcKy9nLCh0PT50Lmxlbmd0aCUyPT09MD9cIlxcXFxcXFxcXCI6dD9cIlxcXFxcIjpcIlwiKSl9fWlmKHM9PT10JiZ1LmNvbnRhaW5zPT09dHJ1ZSl7bS5vdXRwdXQ9dDtyZXR1cm4gbX1tLm91dHB1dD1vLndyYXBPdXRwdXQocyxtLGUpO3JldHVybiBtfXdoaWxlKCFlb3MoKSl7Rz1NKCk7aWYoRz09PVwiXFwwXCIpe2NvbnRpbnVlfWlmKEc9PT1cIlxcXFxcIil7Y29uc3QgdD1EKCk7aWYodD09PVwiL1wiJiZ1LmJhc2ghPT10cnVlKXtjb250aW51ZX1pZih0PT09XCIuXCJ8fHQ9PT1cIjtcIil7Y29udGludWV9aWYoIXQpe0crPVwiXFxcXFwiO3B1c2goe3R5cGU6XCJ0ZXh0XCIsdmFsdWU6R30pO2NvbnRpbnVlfWNvbnN0IGU9L15cXFxcKy8uZXhlYyhyZW1haW5pbmcoKSk7bGV0IG49MDtpZihlJiZlWzBdLmxlbmd0aD4yKXtuPWVbMF0ubGVuZ3RoO20uaW5kZXgrPW47aWYobiUyIT09MCl7Rys9XCJcXFxcXCJ9fWlmKHUudW5lc2NhcGU9PT10cnVlKXtHPU0oKX1lbHNle0crPU0oKX1pZihtLmJyYWNrZXRzPT09MCl7cHVzaCh7dHlwZTpcInRleHRcIix2YWx1ZTpHfSk7Y29udGludWV9fWlmKG0uYnJhY2tldHM+MCYmKEchPT1cIl1cInx8Qi52YWx1ZT09PVwiW1wifHxCLnZhbHVlPT09XCJbXlwiKSl7aWYodS5wb3NpeCE9PWZhbHNlJiZHPT09XCI6XCIpe2NvbnN0IHQ9Qi52YWx1ZS5zbGljZSgxKTtpZih0LmluY2x1ZGVzKFwiW1wiKSl7Qi5wb3NpeD10cnVlO2lmKHQuaW5jbHVkZXMoXCI6XCIpKXtjb25zdCB0PUIudmFsdWUubGFzdEluZGV4T2YoXCJbXCIpO2NvbnN0IGU9Qi52YWx1ZS5zbGljZSgwLHQpO2NvbnN0IHU9Qi52YWx1ZS5zbGljZSh0KzIpO2NvbnN0IG49clt1XTtpZihuKXtCLnZhbHVlPWUrbjttLmJhY2t0cmFjaz10cnVlO00oKTtpZighZi5vdXRwdXQmJkEuaW5kZXhPZihCKT09PTEpe2Yub3V0cHV0PUN9Y29udGludWV9fX19aWYoRz09PVwiW1wiJiZEKCkhPT1cIjpcInx8Rz09PVwiLVwiJiZEKCk9PT1cIl1cIil7Rz1gXFxcXCR7R31gfWlmKEc9PT1cIl1cIiYmKEIudmFsdWU9PT1cIltcInx8Qi52YWx1ZT09PVwiW15cIikpe0c9YFxcXFwke0d9YH1pZih1LnBvc2l4PT09dHJ1ZSYmRz09PVwiIVwiJiZCLnZhbHVlPT09XCJbXCIpe0c9XCJeXCJ9Qi52YWx1ZSs9RzthcHBlbmQoe3ZhbHVlOkd9KTtjb250aW51ZX1pZihtLnF1b3Rlcz09PTEmJkchPT0nXCInKXtHPW8uZXNjYXBlUmVnZXgoRyk7Qi52YWx1ZSs9RzthcHBlbmQoe3ZhbHVlOkd9KTtjb250aW51ZX1pZihHPT09J1wiJyl7bS5xdW90ZXM9bS5xdW90ZXM9PT0xPzA6MTtpZih1LmtlZXBRdW90ZXM9PT10cnVlKXtwdXNoKHt0eXBlOlwidGV4dFwiLHZhbHVlOkd9KX1jb250aW51ZX1pZihHPT09XCIoXCIpe2luY3JlbWVudChcInBhcmVuc1wiKTtwdXNoKHt0eXBlOlwicGFyZW5cIix2YWx1ZTpHfSk7Y29udGludWV9aWYoRz09PVwiKVwiKXtpZihtLnBhcmVucz09PTAmJnUuc3RyaWN0QnJhY2tldHM9PT10cnVlKXt0aHJvdyBuZXcgU3ludGF4RXJyb3Ioc3ludGF4RXJyb3IoXCJvcGVuaW5nXCIsXCIoXCIpKX1jb25zdCB0PXdbdy5sZW5ndGgtMV07aWYodCYmbS5wYXJlbnM9PT10LnBhcmVucysxKXtleHRnbG9iQ2xvc2Uody5wb3AoKSk7Y29udGludWV9cHVzaCh7dHlwZTpcInBhcmVuXCIsdmFsdWU6RyxvdXRwdXQ6bS5wYXJlbnM/XCIpXCI6XCJcXFxcKVwifSk7ZGVjcmVtZW50KFwicGFyZW5zXCIpO2NvbnRpbnVlfWlmKEc9PT1cIltcIil7aWYodS5ub2JyYWNrZXQ9PT10cnVlfHwhcmVtYWluaW5nKCkuaW5jbHVkZXMoXCJdXCIpKXtpZih1Lm5vYnJhY2tldCE9PXRydWUmJnUuc3RyaWN0QnJhY2tldHM9PT10cnVlKXt0aHJvdyBuZXcgU3ludGF4RXJyb3Ioc3ludGF4RXJyb3IoXCJjbG9zaW5nXCIsXCJdXCIpKX1HPWBcXFxcJHtHfWB9ZWxzZXtpbmNyZW1lbnQoXCJicmFja2V0c1wiKX1wdXNoKHt0eXBlOlwiYnJhY2tldFwiLHZhbHVlOkd9KTtjb250aW51ZX1pZihHPT09XCJdXCIpe2lmKHUubm9icmFja2V0PT09dHJ1ZXx8QiYmQi50eXBlPT09XCJicmFja2V0XCImJkIudmFsdWUubGVuZ3RoPT09MSl7cHVzaCh7dHlwZTpcInRleHRcIix2YWx1ZTpHLG91dHB1dDpgXFxcXCR7R31gfSk7Y29udGludWV9aWYobS5icmFja2V0cz09PTApe2lmKHUuc3RyaWN0QnJhY2tldHM9PT10cnVlKXt0aHJvdyBuZXcgU3ludGF4RXJyb3Ioc3ludGF4RXJyb3IoXCJvcGVuaW5nXCIsXCJbXCIpKX1wdXNoKHt0eXBlOlwidGV4dFwiLHZhbHVlOkcsb3V0cHV0OmBcXFxcJHtHfWB9KTtjb250aW51ZX1kZWNyZW1lbnQoXCJicmFja2V0c1wiKTtjb25zdCB0PUIudmFsdWUuc2xpY2UoMSk7aWYoQi5wb3NpeCE9PXRydWUmJnRbMF09PT1cIl5cIiYmIXQuaW5jbHVkZXMoXCIvXCIpKXtHPWAvJHtHfWB9Qi52YWx1ZSs9RzthcHBlbmQoe3ZhbHVlOkd9KTtpZih1LmxpdGVyYWxCcmFja2V0cz09PWZhbHNlfHxvLmhhc1JlZ2V4Q2hhcnModCkpe2NvbnRpbnVlfWNvbnN0IGU9by5lc2NhcGVSZWdleChCLnZhbHVlKTttLm91dHB1dD1tLm91dHB1dC5zbGljZSgwLC1CLnZhbHVlLmxlbmd0aCk7aWYodS5saXRlcmFsQnJhY2tldHM9PT10cnVlKXttLm91dHB1dCs9ZTtCLnZhbHVlPWU7Y29udGludWV9Qi52YWx1ZT1gKCR7X30ke2V9fCR7Qi52YWx1ZX0pYDttLm91dHB1dCs9Qi52YWx1ZTtjb250aW51ZX1pZihHPT09XCJ7XCImJnUubm9icmFjZSE9PXRydWUpe2luY3JlbWVudChcImJyYWNlc1wiKTtjb25zdCB0PXt0eXBlOlwiYnJhY2VcIix2YWx1ZTpHLG91dHB1dDpcIihcIixvdXRwdXRJbmRleDptLm91dHB1dC5sZW5ndGgsdG9rZW5zSW5kZXg6bS50b2tlbnMubGVuZ3RofTtOLnB1c2godCk7cHVzaCh0KTtjb250aW51ZX1pZihHPT09XCJ9XCIpe2NvbnN0IHQ9TltOLmxlbmd0aC0xXTtpZih1Lm5vYnJhY2U9PT10cnVlfHwhdCl7cHVzaCh7dHlwZTpcInRleHRcIix2YWx1ZTpHLG91dHB1dDpHfSk7Y29udGludWV9bGV0IGU9XCIpXCI7aWYodC5kb3RzPT09dHJ1ZSl7Y29uc3QgdD1BLnNsaWNlKCk7Y29uc3Qgbj1bXTtmb3IobGV0IGU9dC5sZW5ndGgtMTtlPj0wO2UtLSl7QS5wb3AoKTtpZih0W2VdLnR5cGU9PT1cImJyYWNlXCIpe2JyZWFrfWlmKHRbZV0udHlwZSE9PVwiZG90c1wiKXtuLnVuc2hpZnQodFtlXS52YWx1ZSl9fWU9ZXhwYW5kUmFuZ2Uobix1KTttLmJhY2t0cmFjaz10cnVlfWlmKHQuY29tbWEhPT10cnVlJiZ0LmRvdHMhPT10cnVlKXtjb25zdCB1PW0ub3V0cHV0LnNsaWNlKDAsdC5vdXRwdXRJbmRleCk7Y29uc3Qgbj1tLnRva2Vucy5zbGljZSh0LnRva2Vuc0luZGV4KTt0LnZhbHVlPXQub3V0cHV0PVwiXFxcXHtcIjtHPWU9XCJcXFxcfVwiO20ub3V0cHV0PXU7Zm9yKGNvbnN0IHQgb2Ygbil7bS5vdXRwdXQrPXQub3V0cHV0fHx0LnZhbHVlfX1wdXNoKHt0eXBlOlwiYnJhY2VcIix2YWx1ZTpHLG91dHB1dDplfSk7ZGVjcmVtZW50KFwiYnJhY2VzXCIpO04ucG9wKCk7Y29udGludWV9aWYoRz09PVwifFwiKXtpZih3Lmxlbmd0aD4wKXt3W3cubGVuZ3RoLTFdLmNvbmRpdGlvbnMrK31wdXNoKHt0eXBlOlwidGV4dFwiLHZhbHVlOkd9KTtjb250aW51ZX1pZihHPT09XCIsXCIpe2xldCB0PUc7Y29uc3QgZT1OW04ubGVuZ3RoLTFdO2lmKGUmJklbSS5sZW5ndGgtMV09PT1cImJyYWNlc1wiKXtlLmNvbW1hPXRydWU7dD1cInxcIn1wdXNoKHt0eXBlOlwiY29tbWFcIix2YWx1ZTpHLG91dHB1dDp0fSk7Y29udGludWV9aWYoRz09PVwiL1wiKXtpZihCLnR5cGU9PT1cImRvdFwiJiZtLmluZGV4PT09bS5zdGFydCsxKXttLnN0YXJ0PW0uaW5kZXgrMTttLmNvbnN1bWVkPVwiXCI7bS5vdXRwdXQ9XCJcIjtBLnBvcCgpO0I9Zjtjb250aW51ZX1wdXNoKHt0eXBlOlwic2xhc2hcIix2YWx1ZTpHLG91dHB1dDpifSk7Y29udGludWV9aWYoRz09PVwiLlwiKXtpZihtLmJyYWNlcz4wJiZCLnR5cGU9PT1cImRvdFwiKXtpZihCLnZhbHVlPT09XCIuXCIpQi5vdXRwdXQ9aDtjb25zdCB0PU5bTi5sZW5ndGgtMV07Qi50eXBlPVwiZG90c1wiO0Iub3V0cHV0Kz1HO0IudmFsdWUrPUc7dC5kb3RzPXRydWU7Y29udGludWV9aWYobS5icmFjZXMrbS5wYXJlbnM9PT0wJiZCLnR5cGUhPT1cImJvc1wiJiZCLnR5cGUhPT1cInNsYXNoXCIpe3B1c2goe3R5cGU6XCJ0ZXh0XCIsdmFsdWU6RyxvdXRwdXQ6aH0pO2NvbnRpbnVlfXB1c2goe3R5cGU6XCJkb3RcIix2YWx1ZTpHLG91dHB1dDpofSk7Y29udGludWV9aWYoRz09PVwiP1wiKXtjb25zdCB0PUImJkIudmFsdWU9PT1cIihcIjtpZighdCYmdS5ub2V4dGdsb2IhPT10cnVlJiZEKCk9PT1cIihcIiYmRCgyKSE9PVwiP1wiKXtleHRnbG9iT3BlbihcInFtYXJrXCIsRyk7Y29udGludWV9aWYoQiYmQi50eXBlPT09XCJwYXJlblwiKXtjb25zdCB0PUQoKTtsZXQgZT1HO2lmKEIudmFsdWU9PT1cIihcIiYmIS9bIT08Ol0vLnRlc3QodCl8fHQ9PT1cIjxcIiYmIS88KFshPV18XFx3Kz4pLy50ZXN0KHJlbWFpbmluZygpKSl7ZT1gXFxcXCR7R31gfXB1c2goe3R5cGU6XCJ0ZXh0XCIsdmFsdWU6RyxvdXRwdXQ6ZX0pO2NvbnRpbnVlfWlmKHUuZG90IT09dHJ1ZSYmKEIudHlwZT09PVwic2xhc2hcInx8Qi50eXBlPT09XCJib3NcIikpe3B1c2goe3R5cGU6XCJxbWFya1wiLHZhbHVlOkcsb3V0cHV0OnZ9KTtjb250aW51ZX1wdXNoKHt0eXBlOlwicW1hcmtcIix2YWx1ZTpHLG91dHB1dDpIfSk7Y29udGludWV9aWYoRz09PVwiIVwiKXtpZih1Lm5vZXh0Z2xvYiE9PXRydWUmJkQoKT09PVwiKFwiKXtpZihEKDIpIT09XCI/XCJ8fCEvWyE9PDpdLy50ZXN0KEQoMykpKXtleHRnbG9iT3BlbihcIm5lZ2F0ZVwiLEcpO2NvbnRpbnVlfX1pZih1Lm5vbmVnYXRlIT09dHJ1ZSYmbS5pbmRleD09PTApe25lZ2F0ZSgpO2NvbnRpbnVlfX1pZihHPT09XCIrXCIpe2lmKHUubm9leHRnbG9iIT09dHJ1ZSYmRCgpPT09XCIoXCImJkQoMikhPT1cIj9cIil7ZXh0Z2xvYk9wZW4oXCJwbHVzXCIsRyk7Y29udGludWV9aWYoQiYmQi52YWx1ZT09PVwiKFwifHx1LnJlZ2V4PT09ZmFsc2Upe3B1c2goe3R5cGU6XCJwbHVzXCIsdmFsdWU6RyxvdXRwdXQ6Z30pO2NvbnRpbnVlfWlmKEImJihCLnR5cGU9PT1cImJyYWNrZXRcInx8Qi50eXBlPT09XCJwYXJlblwifHxCLnR5cGU9PT1cImJyYWNlXCIpfHxtLnBhcmVucz4wKXtwdXNoKHt0eXBlOlwicGx1c1wiLHZhbHVlOkd9KTtjb250aW51ZX1wdXNoKHt0eXBlOlwicGx1c1wiLHZhbHVlOmd9KTtjb250aW51ZX1pZihHPT09XCJAXCIpe2lmKHUubm9leHRnbG9iIT09dHJ1ZSYmRCgpPT09XCIoXCImJkQoMikhPT1cIj9cIil7cHVzaCh7dHlwZTpcImF0XCIsZXh0Z2xvYjp0cnVlLHZhbHVlOkcsb3V0cHV0OlwiXCJ9KTtjb250aW51ZX1wdXNoKHt0eXBlOlwidGV4dFwiLHZhbHVlOkd9KTtjb250aW51ZX1pZihHIT09XCIqXCIpe2lmKEc9PT1cIiRcInx8Rz09PVwiXlwiKXtHPWBcXFxcJHtHfWB9Y29uc3QgdD1hLmV4ZWMocmVtYWluaW5nKCkpO2lmKHQpe0crPXRbMF07bS5pbmRleCs9dFswXS5sZW5ndGh9cHVzaCh7dHlwZTpcInRleHRcIix2YWx1ZTpHfSk7Y29udGludWV9aWYoQiYmKEIudHlwZT09PVwiZ2xvYnN0YXJcInx8Qi5zdGFyPT09dHJ1ZSkpe0IudHlwZT1cInN0YXJcIjtCLnN0YXI9dHJ1ZTtCLnZhbHVlKz1HO0Iub3V0cHV0PWs7bS5iYWNrdHJhY2s9dHJ1ZTttLmdsb2JzdGFyPXRydWU7Y29uc3VtZShHKTtjb250aW51ZX1sZXQgZT1yZW1haW5pbmcoKTtpZih1Lm5vZXh0Z2xvYiE9PXRydWUmJi9eXFwoW14/XS8udGVzdChlKSl7ZXh0Z2xvYk9wZW4oXCJzdGFyXCIsRyk7Y29udGludWV9aWYoQi50eXBlPT09XCJzdGFyXCIpe2lmKHUubm9nbG9ic3Rhcj09PXRydWUpe2NvbnN1bWUoRyk7Y29udGludWV9Y29uc3Qgbj1CLnByZXY7Y29uc3Qgbz1uLnByZXY7Y29uc3Qgcz1uLnR5cGU9PT1cInNsYXNoXCJ8fG4udHlwZT09PVwiYm9zXCI7Y29uc3Qgcj1vJiYoby50eXBlPT09XCJzdGFyXCJ8fG8udHlwZT09PVwiZ2xvYnN0YXJcIik7aWYodS5iYXNoPT09dHJ1ZSYmKCFzfHxlWzBdJiZlWzBdIT09XCIvXCIpKXtwdXNoKHt0eXBlOlwic3RhclwiLHZhbHVlOkcsb3V0cHV0OlwiXCJ9KTtjb250aW51ZX1jb25zdCBhPW0uYnJhY2VzPjAmJihuLnR5cGU9PT1cImNvbW1hXCJ8fG4udHlwZT09PVwiYnJhY2VcIik7Y29uc3QgaT13Lmxlbmd0aCYmKG4udHlwZT09PVwicGlwZVwifHxuLnR5cGU9PT1cInBhcmVuXCIpO2lmKCFzJiZuLnR5cGUhPT1cInBhcmVuXCImJiFhJiYhaSl7cHVzaCh7dHlwZTpcInN0YXJcIix2YWx1ZTpHLG91dHB1dDpcIlwifSk7Y29udGludWV9d2hpbGUoZS5zbGljZSgwLDMpPT09XCIvKipcIil7Y29uc3QgdT10W20uaW5kZXgrNF07aWYodSYmdSE9PVwiL1wiKXticmVha31lPWUuc2xpY2UoMyk7Y29uc3VtZShcIi8qKlwiLDMpfWlmKG4udHlwZT09PVwiYm9zXCImJmVvcygpKXtCLnR5cGU9XCJnbG9ic3RhclwiO0IudmFsdWUrPUc7Qi5vdXRwdXQ9Z2xvYnN0YXIodSk7bS5vdXRwdXQ9Qi5vdXRwdXQ7bS5nbG9ic3Rhcj10cnVlO2NvbnN1bWUoRyk7Y29udGludWV9aWYobi50eXBlPT09XCJzbGFzaFwiJiZuLnByZXYudHlwZSE9PVwiYm9zXCImJiFyJiZlb3MoKSl7bS5vdXRwdXQ9bS5vdXRwdXQuc2xpY2UoMCwtKG4ub3V0cHV0K0Iub3V0cHV0KS5sZW5ndGgpO24ub3V0cHV0PWAoPzoke24ub3V0cHV0fWA7Qi50eXBlPVwiZ2xvYnN0YXJcIjtCLm91dHB1dD1nbG9ic3Rhcih1KSsodS5zdHJpY3RTbGFzaGVzP1wiKVwiOlwifCQpXCIpO0IudmFsdWUrPUc7bS5nbG9ic3Rhcj10cnVlO20ub3V0cHV0Kz1uLm91dHB1dCtCLm91dHB1dDtjb25zdW1lKEcpO2NvbnRpbnVlfWlmKG4udHlwZT09PVwic2xhc2hcIiYmbi5wcmV2LnR5cGUhPT1cImJvc1wiJiZlWzBdPT09XCIvXCIpe2NvbnN0IHQ9ZVsxXSE9PXZvaWQgMD9cInwkXCI6XCJcIjttLm91dHB1dD1tLm91dHB1dC5zbGljZSgwLC0obi5vdXRwdXQrQi5vdXRwdXQpLmxlbmd0aCk7bi5vdXRwdXQ9YCg/OiR7bi5vdXRwdXR9YDtCLnR5cGU9XCJnbG9ic3RhclwiO0Iub3V0cHV0PWAke2dsb2JzdGFyKHUpfSR7Yn18JHtifSR7dH0pYDtCLnZhbHVlKz1HO20ub3V0cHV0Kz1uLm91dHB1dCtCLm91dHB1dDttLmdsb2JzdGFyPXRydWU7Y29uc3VtZShHK00oKSk7cHVzaCh7dHlwZTpcInNsYXNoXCIsdmFsdWU6XCIvXCIsb3V0cHV0OlwiXCJ9KTtjb250aW51ZX1pZihuLnR5cGU9PT1cImJvc1wiJiZlWzBdPT09XCIvXCIpe0IudHlwZT1cImdsb2JzdGFyXCI7Qi52YWx1ZSs9RztCLm91dHB1dD1gKD86Xnwke2J9fCR7Z2xvYnN0YXIodSl9JHtifSlgO20ub3V0cHV0PUIub3V0cHV0O20uZ2xvYnN0YXI9dHJ1ZTtjb25zdW1lKEcrTSgpKTtwdXNoKHt0eXBlOlwic2xhc2hcIix2YWx1ZTpcIi9cIixvdXRwdXQ6XCJcIn0pO2NvbnRpbnVlfW0ub3V0cHV0PW0ub3V0cHV0LnNsaWNlKDAsLUIub3V0cHV0Lmxlbmd0aCk7Qi50eXBlPVwiZ2xvYnN0YXJcIjtCLm91dHB1dD1nbG9ic3Rhcih1KTtCLnZhbHVlKz1HO20ub3V0cHV0Kz1CLm91dHB1dDttLmdsb2JzdGFyPXRydWU7Y29uc3VtZShHKTtjb250aW51ZX1jb25zdCBuPXt0eXBlOlwic3RhclwiLHZhbHVlOkcsb3V0cHV0Omt9O2lmKHUuYmFzaD09PXRydWUpe24ub3V0cHV0PVwiLio/XCI7aWYoQi50eXBlPT09XCJib3NcInx8Qi50eXBlPT09XCJzbGFzaFwiKXtuLm91dHB1dD1UK24ub3V0cHV0fXB1c2gobik7Y29udGludWV9aWYoQiYmKEIudHlwZT09PVwiYnJhY2tldFwifHxCLnR5cGU9PT1cInBhcmVuXCIpJiZ1LnJlZ2V4PT09dHJ1ZSl7bi5vdXRwdXQ9RztwdXNoKG4pO2NvbnRpbnVlfWlmKG0uaW5kZXg9PT1tLnN0YXJ0fHxCLnR5cGU9PT1cInNsYXNoXCJ8fEIudHlwZT09PVwiZG90XCIpe2lmKEIudHlwZT09PVwiZG90XCIpe20ub3V0cHV0Kz14O0Iub3V0cHV0Kz14fWVsc2UgaWYodS5kb3Q9PT10cnVlKXttLm91dHB1dCs9UztCLm91dHB1dCs9U31lbHNle20ub3V0cHV0Kz1UO0Iub3V0cHV0Kz1UfWlmKEQoKSE9PVwiKlwiKXttLm91dHB1dCs9QztCLm91dHB1dCs9Q319cHVzaChuKX13aGlsZShtLmJyYWNrZXRzPjApe2lmKHUuc3RyaWN0QnJhY2tldHM9PT10cnVlKXRocm93IG5ldyBTeW50YXhFcnJvcihzeW50YXhFcnJvcihcImNsb3NpbmdcIixcIl1cIikpO20ub3V0cHV0PW8uZXNjYXBlTGFzdChtLm91dHB1dCxcIltcIik7ZGVjcmVtZW50KFwiYnJhY2tldHNcIil9d2hpbGUobS5wYXJlbnM+MCl7aWYodS5zdHJpY3RCcmFja2V0cz09PXRydWUpdGhyb3cgbmV3IFN5bnRheEVycm9yKHN5bnRheEVycm9yKFwiY2xvc2luZ1wiLFwiKVwiKSk7bS5vdXRwdXQ9by5lc2NhcGVMYXN0KG0ub3V0cHV0LFwiKFwiKTtkZWNyZW1lbnQoXCJwYXJlbnNcIil9d2hpbGUobS5icmFjZXM+MCl7aWYodS5zdHJpY3RCcmFja2V0cz09PXRydWUpdGhyb3cgbmV3IFN5bnRheEVycm9yKHN5bnRheEVycm9yKFwiY2xvc2luZ1wiLFwifVwiKSk7bS5vdXRwdXQ9by5lc2NhcGVMYXN0KG0ub3V0cHV0LFwie1wiKTtkZWNyZW1lbnQoXCJicmFjZXNcIil9aWYodS5zdHJpY3RTbGFzaGVzIT09dHJ1ZSYmKEIudHlwZT09PVwic3RhclwifHxCLnR5cGU9PT1cImJyYWNrZXRcIikpe3B1c2goe3R5cGU6XCJtYXliZV9zbGFzaFwiLHZhbHVlOlwiXCIsb3V0cHV0OmAke2J9P2B9KX1pZihtLmJhY2t0cmFjaz09PXRydWUpe20ub3V0cHV0PVwiXCI7Zm9yKGNvbnN0IHQgb2YgbS50b2tlbnMpe20ub3V0cHV0Kz10Lm91dHB1dCE9bnVsbD90Lm91dHB1dDp0LnZhbHVlO2lmKHQuc3VmZml4KXttLm91dHB1dCs9dC5zdWZmaXh9fX1yZXR1cm4gbX07cGFyc2UuZmFzdHBhdGhzPSh0LGUpPT57Y29uc3QgdT17Li4uZX07Y29uc3Qgcj10eXBlb2YgdS5tYXhMZW5ndGg9PT1cIm51bWJlclwiP01hdGgubWluKHMsdS5tYXhMZW5ndGgpOnM7Y29uc3QgYT10Lmxlbmd0aDtpZihhPnIpe3Rocm93IG5ldyBTeW50YXhFcnJvcihgSW5wdXQgbGVuZ3RoOiAke2F9LCBleGNlZWRzIG1heGltdW0gYWxsb3dlZCBsZW5ndGg6ICR7cn1gKX10PWNbdF18fHQ7Y29uc3R7RE9UX0xJVEVSQUw6aSxTTEFTSF9MSVRFUkFMOnAsT05FX0NIQVI6bCxET1RTX1NMQVNIOmYsTk9fRE9UOkEsTk9fRE9UUzpfLE5PX0RPVFNfU0xBU0g6UixTVEFSOkUsU1RBUlRfQU5DSE9SOmh9PW4uZ2xvYkNoYXJzKHUud2luZG93cyk7Y29uc3QgZz11LmRvdD9fOkE7Y29uc3QgYj11LmRvdD9SOkE7Y29uc3QgQz11LmNhcHR1cmU/XCJcIjpcIj86XCI7Y29uc3QgeT17bmVnYXRlZDpmYWxzZSxwcmVmaXg6XCJcIn07bGV0ICQ9dS5iYXNoPT09dHJ1ZT9cIi4qP1wiOkU7aWYodS5jYXB0dXJlKXskPWAoJHskfSlgfWNvbnN0IGdsb2JzdGFyPXQ9PntpZih0Lm5vZ2xvYnN0YXI9PT10cnVlKXJldHVybiAkO3JldHVybmAoJHtDfSg/Oig/ISR7aH0ke3QuZG90P2Y6aX0pLikqPylgfTtjb25zdCBjcmVhdGU9dD0+e3N3aXRjaCh0KXtjYXNlXCIqXCI6cmV0dXJuYCR7Z30ke2x9JHskfWA7Y2FzZVwiLipcIjpyZXR1cm5gJHtpfSR7bH0keyR9YDtjYXNlXCIqLipcIjpyZXR1cm5gJHtnfSR7JH0ke2l9JHtsfSR7JH1gO2Nhc2VcIiovKlwiOnJldHVybmAke2d9JHskfSR7cH0ke2x9JHtifSR7JH1gO2Nhc2VcIioqXCI6cmV0dXJuIGcrZ2xvYnN0YXIodSk7Y2FzZVwiKiovKlwiOnJldHVybmAoPzoke2d9JHtnbG9ic3Rhcih1KX0ke3B9KT8ke2J9JHtsfSR7JH1gO2Nhc2VcIioqLyouKlwiOnJldHVybmAoPzoke2d9JHtnbG9ic3Rhcih1KX0ke3B9KT8ke2J9JHskfSR7aX0ke2x9JHskfWA7Y2FzZVwiKiovLipcIjpyZXR1cm5gKD86JHtnfSR7Z2xvYnN0YXIodSl9JHtwfSk/JHtpfSR7bH0keyR9YDtkZWZhdWx0Ontjb25zdCBlPS9eKC4qPylcXC4oXFx3KykkLy5leGVjKHQpO2lmKCFlKXJldHVybjtjb25zdCB1PWNyZWF0ZShlWzFdKTtpZighdSlyZXR1cm47cmV0dXJuIHUraStlWzJdfX19O2NvbnN0IHg9by5yZW1vdmVQcmVmaXgodCx5KTtsZXQgUz1jcmVhdGUoeCk7aWYoUyYmdS5zdHJpY3RTbGFzaGVzIT09dHJ1ZSl7Uys9YCR7cH0/YH1yZXR1cm4gU307dC5leHBvcnRzPXBhcnNlfSw1MTA6KHQsZSx1KT0+e2NvbnN0IG49dSg3MTYpO2NvbnN0IG89dSg2OTcpO2NvbnN0IHM9dSg5Nik7Y29uc3Qgcj11KDE1NCk7Y29uc3QgaXNPYmplY3Q9dD0+dCYmdHlwZW9mIHQ9PT1cIm9iamVjdFwiJiYhQXJyYXkuaXNBcnJheSh0KTtjb25zdCBwaWNvbWF0Y2g9KHQsZSx1PWZhbHNlKT0+e2lmKEFycmF5LmlzQXJyYXkodCkpe2NvbnN0IG49dC5tYXAoKHQ9PnBpY29tYXRjaCh0LGUsdSkpKTtjb25zdCBhcnJheU1hdGNoZXI9dD0+e2Zvcihjb25zdCBlIG9mIG4pe2NvbnN0IHU9ZSh0KTtpZih1KXJldHVybiB1fXJldHVybiBmYWxzZX07cmV0dXJuIGFycmF5TWF0Y2hlcn1jb25zdCBuPWlzT2JqZWN0KHQpJiZ0LnRva2VucyYmdC5pbnB1dDtpZih0PT09XCJcInx8dHlwZW9mIHQhPT1cInN0cmluZ1wiJiYhbil7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIHBhdHRlcm4gdG8gYmUgYSBub24tZW1wdHkgc3RyaW5nXCIpfWNvbnN0IG89ZXx8e307Y29uc3Qgcz1vLndpbmRvd3M7Y29uc3Qgcj1uP3BpY29tYXRjaC5jb21waWxlUmUodCxlKTpwaWNvbWF0Y2gubWFrZVJlKHQsZSxmYWxzZSx0cnVlKTtjb25zdCBhPXIuc3RhdGU7ZGVsZXRlIHIuc3RhdGU7bGV0IGlzSWdub3JlZD0oKT0+ZmFsc2U7aWYoby5pZ25vcmUpe2NvbnN0IHQ9ey4uLmUsaWdub3JlOm51bGwsb25NYXRjaDpudWxsLG9uUmVzdWx0Om51bGx9O2lzSWdub3JlZD1waWNvbWF0Y2goby5pZ25vcmUsdCx1KX1jb25zdCBtYXRjaGVyPSh1LG49ZmFsc2UpPT57Y29uc3R7aXNNYXRjaDppLG1hdGNoOmMsb3V0cHV0OnB9PXBpY29tYXRjaC50ZXN0KHUscixlLHtnbG9iOnQscG9zaXg6c30pO2NvbnN0IGw9e2dsb2I6dCxzdGF0ZTphLHJlZ2V4OnIscG9zaXg6cyxpbnB1dDp1LG91dHB1dDpwLG1hdGNoOmMsaXNNYXRjaDppfTtpZih0eXBlb2Ygby5vblJlc3VsdD09PVwiZnVuY3Rpb25cIil7by5vblJlc3VsdChsKX1pZihpPT09ZmFsc2Upe2wuaXNNYXRjaD1mYWxzZTtyZXR1cm4gbj9sOmZhbHNlfWlmKGlzSWdub3JlZCh1KSl7aWYodHlwZW9mIG8ub25JZ25vcmU9PT1cImZ1bmN0aW9uXCIpe28ub25JZ25vcmUobCl9bC5pc01hdGNoPWZhbHNlO3JldHVybiBuP2w6ZmFsc2V9aWYodHlwZW9mIG8ub25NYXRjaD09PVwiZnVuY3Rpb25cIil7by5vbk1hdGNoKGwpfXJldHVybiBuP2w6dHJ1ZX07aWYodSl7bWF0Y2hlci5zdGF0ZT1hfXJldHVybiBtYXRjaGVyfTtwaWNvbWF0Y2gudGVzdD0odCxlLHUse2dsb2I6bixwb3NpeDpvfT17fSk9PntpZih0eXBlb2YgdCE9PVwic3RyaW5nXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBpbnB1dCB0byBiZSBhIHN0cmluZ1wiKX1pZih0PT09XCJcIil7cmV0dXJue2lzTWF0Y2g6ZmFsc2Usb3V0cHV0OlwiXCJ9fWNvbnN0IHI9dXx8e307Y29uc3QgYT1yLmZvcm1hdHx8KG8/cy50b1Bvc2l4U2xhc2hlczpudWxsKTtsZXQgaT10PT09bjtsZXQgYz1pJiZhP2EodCk6dDtpZihpPT09ZmFsc2Upe2M9YT9hKHQpOnQ7aT1jPT09bn1pZihpPT09ZmFsc2V8fHIuY2FwdHVyZT09PXRydWUpe2lmKHIubWF0Y2hCYXNlPT09dHJ1ZXx8ci5iYXNlbmFtZT09PXRydWUpe2k9cGljb21hdGNoLm1hdGNoQmFzZSh0LGUsdSxvKX1lbHNle2k9ZS5leGVjKGMpfX1yZXR1cm57aXNNYXRjaDpCb29sZWFuKGkpLG1hdGNoOmksb3V0cHV0OmN9fTtwaWNvbWF0Y2gubWF0Y2hCYXNlPSh0LGUsdSk9Pntjb25zdCBuPWUgaW5zdGFuY2VvZiBSZWdFeHA/ZTpwaWNvbWF0Y2gubWFrZVJlKGUsdSk7cmV0dXJuIG4udGVzdChzLmJhc2VuYW1lKHQpKX07cGljb21hdGNoLmlzTWF0Y2g9KHQsZSx1KT0+cGljb21hdGNoKGUsdSkodCk7cGljb21hdGNoLnBhcnNlPSh0LGUpPT57aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdC5tYXAoKHQ9PnBpY29tYXRjaC5wYXJzZSh0LGUpKSk7cmV0dXJuIG8odCx7Li4uZSxmYXN0cGF0aHM6ZmFsc2V9KX07cGljb21hdGNoLnNjYW49KHQsZSk9Pm4odCxlKTtwaWNvbWF0Y2guY29tcGlsZVJlPSh0LGUsdT1mYWxzZSxuPWZhbHNlKT0+e2lmKHU9PT10cnVlKXtyZXR1cm4gdC5vdXRwdXR9Y29uc3Qgbz1lfHx7fTtjb25zdCBzPW8uY29udGFpbnM/XCJcIjpcIl5cIjtjb25zdCByPW8uY29udGFpbnM/XCJcIjpcIiRcIjtsZXQgYT1gJHtzfSg/OiR7dC5vdXRwdXR9KSR7cn1gO2lmKHQmJnQubmVnYXRlZD09PXRydWUpe2E9YF4oPyEke2F9KS4qJGB9Y29uc3QgaT1waWNvbWF0Y2gudG9SZWdleChhLGUpO2lmKG49PT10cnVlKXtpLnN0YXRlPXR9cmV0dXJuIGl9O3BpY29tYXRjaC5tYWtlUmU9KHQsZT17fSx1PWZhbHNlLG49ZmFsc2UpPT57aWYoIXR8fHR5cGVvZiB0IT09XCJzdHJpbmdcIil7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIGEgbm9uLWVtcHR5IHN0cmluZ1wiKX1sZXQgcz17bmVnYXRlZDpmYWxzZSxmYXN0cGF0aHM6dHJ1ZX07aWYoZS5mYXN0cGF0aHMhPT1mYWxzZSYmKHRbMF09PT1cIi5cInx8dFswXT09PVwiKlwiKSl7cy5vdXRwdXQ9by5mYXN0cGF0aHModCxlKX1pZighcy5vdXRwdXQpe3M9byh0LGUpfXJldHVybiBwaWNvbWF0Y2guY29tcGlsZVJlKHMsZSx1LG4pfTtwaWNvbWF0Y2gudG9SZWdleD0odCxlKT0+e3RyeXtjb25zdCB1PWV8fHt9O3JldHVybiBuZXcgUmVnRXhwKHQsdS5mbGFnc3x8KHUubm9jYXNlP1wiaVwiOlwiXCIpKX1jYXRjaCh0KXtpZihlJiZlLmRlYnVnPT09dHJ1ZSl0aHJvdyB0O3JldHVybi8kXi99fTtwaWNvbWF0Y2guY29uc3RhbnRzPXI7dC5leHBvcnRzPXBpY29tYXRjaH0sNzE2Oih0LGUsdSk9Pntjb25zdCBuPXUoOTYpO2NvbnN0e0NIQVJfQVNURVJJU0s6byxDSEFSX0FUOnMsQ0hBUl9CQUNLV0FSRF9TTEFTSDpyLENIQVJfQ09NTUE6YSxDSEFSX0RPVDppLENIQVJfRVhDTEFNQVRJT05fTUFSSzpjLENIQVJfRk9SV0FSRF9TTEFTSDpwLENIQVJfTEVGVF9DVVJMWV9CUkFDRTpsLENIQVJfTEVGVF9QQVJFTlRIRVNFUzpmLENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVDpBLENIQVJfUExVUzpfLENIQVJfUVVFU1RJT05fTUFSSzpSLENIQVJfUklHSFRfQ1VSTFlfQlJBQ0U6RSxDSEFSX1JJR0hUX1BBUkVOVEhFU0VTOmgsQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVDpnfT11KDE1NCk7Y29uc3QgaXNQYXRoU2VwYXJhdG9yPXQ9PnQ9PT1wfHx0PT09cjtjb25zdCBkZXB0aD10PT57aWYodC5pc1ByZWZpeCE9PXRydWUpe3QuZGVwdGg9dC5pc0dsb2JzdGFyP0luZmluaXR5OjF9fTtjb25zdCBzY2FuPSh0LGUpPT57Y29uc3QgdT1lfHx7fTtjb25zdCBiPXQubGVuZ3RoLTE7Y29uc3QgQz11LnBhcnRzPT09dHJ1ZXx8dS5zY2FuVG9FbmQ9PT10cnVlO2NvbnN0IHk9W107Y29uc3QgJD1bXTtjb25zdCB4PVtdO2xldCBTPXQ7bGV0IEg9LTE7bGV0IHY9MDtsZXQgZD0wO2xldCBMPWZhbHNlO2xldCBUPWZhbHNlO2xldCBPPWZhbHNlO2xldCBrPWZhbHNlO2xldCBtPWZhbHNlO2xldCB3PWZhbHNlO2xldCBOPWZhbHNlO2xldCBJPWZhbHNlO2xldCBCPWZhbHNlO2xldCBHPWZhbHNlO2xldCBEPTA7bGV0IE07bGV0IFA7bGV0IEs9e3ZhbHVlOlwiXCIsZGVwdGg6MCxpc0dsb2I6ZmFsc2V9O2NvbnN0IGVvcz0oKT0+SD49Yjtjb25zdCBwZWVrPSgpPT5TLmNoYXJDb2RlQXQoSCsxKTtjb25zdCBhZHZhbmNlPSgpPT57TT1QO3JldHVybiBTLmNoYXJDb2RlQXQoKytIKX07d2hpbGUoSDxiKXtQPWFkdmFuY2UoKTtsZXQgdDtpZihQPT09cil7Tj1LLmJhY2tzbGFzaGVzPXRydWU7UD1hZHZhbmNlKCk7aWYoUD09PWwpe3c9dHJ1ZX1jb250aW51ZX1pZih3PT09dHJ1ZXx8UD09PWwpe0QrKzt3aGlsZShlb3MoKSE9PXRydWUmJihQPWFkdmFuY2UoKSkpe2lmKFA9PT1yKXtOPUsuYmFja3NsYXNoZXM9dHJ1ZTthZHZhbmNlKCk7Y29udGludWV9aWYoUD09PWwpe0QrKztjb250aW51ZX1pZih3IT09dHJ1ZSYmUD09PWkmJihQPWFkdmFuY2UoKSk9PT1pKXtMPUsuaXNCcmFjZT10cnVlO089Sy5pc0dsb2I9dHJ1ZTtHPXRydWU7aWYoQz09PXRydWUpe2NvbnRpbnVlfWJyZWFrfWlmKHchPT10cnVlJiZQPT09YSl7TD1LLmlzQnJhY2U9dHJ1ZTtPPUsuaXNHbG9iPXRydWU7Rz10cnVlO2lmKEM9PT10cnVlKXtjb250aW51ZX1icmVha31pZihQPT09RSl7RC0tO2lmKEQ9PT0wKXt3PWZhbHNlO0w9Sy5pc0JyYWNlPXRydWU7Rz10cnVlO2JyZWFrfX19aWYoQz09PXRydWUpe2NvbnRpbnVlfWJyZWFrfWlmKFA9PT1wKXt5LnB1c2goSCk7JC5wdXNoKEspO0s9e3ZhbHVlOlwiXCIsZGVwdGg6MCxpc0dsb2I6ZmFsc2V9O2lmKEc9PT10cnVlKWNvbnRpbnVlO2lmKE09PT1pJiZIPT09disxKXt2Kz0yO2NvbnRpbnVlfWQ9SCsxO2NvbnRpbnVlfWlmKHUubm9leHQhPT10cnVlKXtjb25zdCB0PVA9PT1ffHxQPT09c3x8UD09PW98fFA9PT1SfHxQPT09YztpZih0PT09dHJ1ZSYmcGVlaygpPT09Zil7Tz1LLmlzR2xvYj10cnVlO2s9Sy5pc0V4dGdsb2I9dHJ1ZTtHPXRydWU7aWYoUD09PWMmJkg9PT12KXtCPXRydWV9aWYoQz09PXRydWUpe3doaWxlKGVvcygpIT09dHJ1ZSYmKFA9YWR2YW5jZSgpKSl7aWYoUD09PXIpe049Sy5iYWNrc2xhc2hlcz10cnVlO1A9YWR2YW5jZSgpO2NvbnRpbnVlfWlmKFA9PT1oKXtPPUsuaXNHbG9iPXRydWU7Rz10cnVlO2JyZWFrfX1jb250aW51ZX1icmVha319aWYoUD09PW8pe2lmKE09PT1vKW09Sy5pc0dsb2JzdGFyPXRydWU7Tz1LLmlzR2xvYj10cnVlO0c9dHJ1ZTtpZihDPT09dHJ1ZSl7Y29udGludWV9YnJlYWt9aWYoUD09PVIpe089Sy5pc0dsb2I9dHJ1ZTtHPXRydWU7aWYoQz09PXRydWUpe2NvbnRpbnVlfWJyZWFrfWlmKFA9PT1BKXt3aGlsZShlb3MoKSE9PXRydWUmJih0PWFkdmFuY2UoKSkpe2lmKHQ9PT1yKXtOPUsuYmFja3NsYXNoZXM9dHJ1ZTthZHZhbmNlKCk7Y29udGludWV9aWYodD09PWcpe1Q9Sy5pc0JyYWNrZXQ9dHJ1ZTtPPUsuaXNHbG9iPXRydWU7Rz10cnVlO2JyZWFrfX1pZihDPT09dHJ1ZSl7Y29udGludWV9YnJlYWt9aWYodS5ub25lZ2F0ZSE9PXRydWUmJlA9PT1jJiZIPT09dil7ST1LLm5lZ2F0ZWQ9dHJ1ZTt2Kys7Y29udGludWV9aWYodS5ub3BhcmVuIT09dHJ1ZSYmUD09PWYpe089Sy5pc0dsb2I9dHJ1ZTtpZihDPT09dHJ1ZSl7d2hpbGUoZW9zKCkhPT10cnVlJiYoUD1hZHZhbmNlKCkpKXtpZihQPT09Zil7Tj1LLmJhY2tzbGFzaGVzPXRydWU7UD1hZHZhbmNlKCk7Y29udGludWV9aWYoUD09PWgpe0c9dHJ1ZTticmVha319Y29udGludWV9YnJlYWt9aWYoTz09PXRydWUpe0c9dHJ1ZTtpZihDPT09dHJ1ZSl7Y29udGludWV9YnJlYWt9fWlmKHUubm9leHQ9PT10cnVlKXtrPWZhbHNlO089ZmFsc2V9bGV0IFU9UztsZXQgWD1cIlwiO2xldCBGPVwiXCI7aWYodj4wKXtYPVMuc2xpY2UoMCx2KTtTPVMuc2xpY2Uodik7ZC09dn1pZihVJiZPPT09dHJ1ZSYmZD4wKXtVPVMuc2xpY2UoMCxkKTtGPVMuc2xpY2UoZCl9ZWxzZSBpZihPPT09dHJ1ZSl7VT1cIlwiO0Y9U31lbHNle1U9U31pZihVJiZVIT09XCJcIiYmVSE9PVwiL1wiJiZVIT09Uyl7aWYoaXNQYXRoU2VwYXJhdG9yKFUuY2hhckNvZGVBdChVLmxlbmd0aC0xKSkpe1U9VS5zbGljZSgwLC0xKX19aWYodS51bmVzY2FwZT09PXRydWUpe2lmKEYpRj1uLnJlbW92ZUJhY2tzbGFzaGVzKEYpO2lmKFUmJk49PT10cnVlKXtVPW4ucmVtb3ZlQmFja3NsYXNoZXMoVSl9fWNvbnN0IFE9e3ByZWZpeDpYLGlucHV0OnQsc3RhcnQ6dixiYXNlOlUsZ2xvYjpGLGlzQnJhY2U6TCxpc0JyYWNrZXQ6VCxpc0dsb2I6Tyxpc0V4dGdsb2I6ayxpc0dsb2JzdGFyOm0sbmVnYXRlZDpJLG5lZ2F0ZWRFeHRnbG9iOkJ9O2lmKHUudG9rZW5zPT09dHJ1ZSl7US5tYXhEZXB0aD0wO2lmKCFpc1BhdGhTZXBhcmF0b3IoUCkpeyQucHVzaChLKX1RLnRva2Vucz0kfWlmKHUucGFydHM9PT10cnVlfHx1LnRva2Vucz09PXRydWUpe2xldCBlO2ZvcihsZXQgbj0wO248eS5sZW5ndGg7bisrKXtjb25zdCBvPWU/ZSsxOnY7Y29uc3Qgcz15W25dO2NvbnN0IHI9dC5zbGljZShvLHMpO2lmKHUudG9rZW5zKXtpZihuPT09MCYmdiE9PTApeyRbbl0uaXNQcmVmaXg9dHJ1ZTskW25dLnZhbHVlPVh9ZWxzZXskW25dLnZhbHVlPXJ9ZGVwdGgoJFtuXSk7US5tYXhEZXB0aCs9JFtuXS5kZXB0aH1pZihuIT09MHx8ciE9PVwiXCIpe3gucHVzaChyKX1lPXN9aWYoZSYmZSsxPHQubGVuZ3RoKXtjb25zdCBuPXQuc2xpY2UoZSsxKTt4LnB1c2gobik7aWYodS50b2tlbnMpeyRbJC5sZW5ndGgtMV0udmFsdWU9bjtkZXB0aCgkWyQubGVuZ3RoLTFdKTtRLm1heERlcHRoKz0kWyQubGVuZ3RoLTFdLmRlcHRofX1RLnNsYXNoZXM9eTtRLnBhcnRzPXh9cmV0dXJuIFF9O3QuZXhwb3J0cz1zY2FufSw5NjoodCxlLHUpPT57Y29uc3R7UkVHRVhfQkFDS1NMQVNIOm4sUkVHRVhfUkVNT1ZFX0JBQ0tTTEFTSDpvLFJFR0VYX1NQRUNJQUxfQ0hBUlM6cyxSRUdFWF9TUEVDSUFMX0NIQVJTX0dMT0JBTDpyfT11KDE1NCk7ZS5pc09iamVjdD10PT50IT09bnVsbCYmdHlwZW9mIHQ9PT1cIm9iamVjdFwiJiYhQXJyYXkuaXNBcnJheSh0KTtlLmhhc1JlZ2V4Q2hhcnM9dD0+cy50ZXN0KHQpO2UuaXNSZWdleENoYXI9dD0+dC5sZW5ndGg9PT0xJiZlLmhhc1JlZ2V4Q2hhcnModCk7ZS5lc2NhcGVSZWdleD10PT50LnJlcGxhY2UocixcIlxcXFwkMVwiKTtlLnRvUG9zaXhTbGFzaGVzPXQ9PnQucmVwbGFjZShuLFwiL1wiKTtlLnJlbW92ZUJhY2tzbGFzaGVzPXQ9PnQucmVwbGFjZShvLCh0PT50PT09XCJcXFxcXCI/XCJcIjp0KSk7ZS5lc2NhcGVMYXN0PSh0LHUsbik9Pntjb25zdCBvPXQubGFzdEluZGV4T2YodSxuKTtpZihvPT09LTEpcmV0dXJuIHQ7aWYodFtvLTFdPT09XCJcXFxcXCIpcmV0dXJuIGUuZXNjYXBlTGFzdCh0LHUsby0xKTtyZXR1cm5gJHt0LnNsaWNlKDAsbyl9XFxcXCR7dC5zbGljZShvKX1gfTtlLnJlbW92ZVByZWZpeD0odCxlPXt9KT0+e2xldCB1PXQ7aWYodS5zdGFydHNXaXRoKFwiLi9cIikpe3U9dS5zbGljZSgyKTtlLnByZWZpeD1cIi4vXCJ9cmV0dXJuIHV9O2Uud3JhcE91dHB1dD0odCxlPXt9LHU9e30pPT57Y29uc3Qgbj11LmNvbnRhaW5zP1wiXCI6XCJeXCI7Y29uc3Qgbz11LmNvbnRhaW5zP1wiXCI6XCIkXCI7bGV0IHM9YCR7bn0oPzoke3R9KSR7b31gO2lmKGUubmVnYXRlZD09PXRydWUpe3M9YCg/Ol4oPyEke3N9KS4qJClgfXJldHVybiBzfTtlLmJhc2VuYW1lPSh0LHt3aW5kb3dzOmV9PXt9KT0+e2NvbnN0IHU9dC5zcGxpdChlPy9bXFxcXC9dLzpcIi9cIik7Y29uc3Qgbj11W3UubGVuZ3RoLTFdO2lmKG49PT1cIlwiKXtyZXR1cm4gdVt1Lmxlbmd0aC0yXX1yZXR1cm4gbn19fTt2YXIgZT17fTtmdW5jdGlvbiBfX25jY3dwY2tfcmVxdWlyZV9fKHUpe3ZhciBuPWVbdV07aWYobiE9PXVuZGVmaW5lZCl7cmV0dXJuIG4uZXhwb3J0c312YXIgbz1lW3VdPXtleHBvcnRzOnt9fTt2YXIgcz10cnVlO3RyeXt0W3VdKG8sby5leHBvcnRzLF9fbmNjd3Bja19yZXF1aXJlX18pO3M9ZmFsc2V9ZmluYWxseXtpZihzKWRlbGV0ZSBlW3VdfXJldHVybiBvLmV4cG9ydHN9aWYodHlwZW9mIF9fbmNjd3Bja19yZXF1aXJlX18hPT1cInVuZGVmaW5lZFwiKV9fbmNjd3Bja19yZXF1aXJlX18uYWI9X19kaXJuYW1lK1wiL1wiO3ZhciB1PV9fbmNjd3Bja19yZXF1aXJlX18oMTcwKTttb2R1bGUuZXhwb3J0cz11fSkoKTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/picomatch/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n true &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PORTAL_TYPE:\n          return \"Portal\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_CONTEXT_TYPE:\n            return (type.displayName || \"Context\") + \".Provider\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(\n      type,\n      key,\n      self,\n      source,\n      owner,\n      props,\n      debugStack,\n      debugTask\n    ) {\n      self = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== self ? self : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      source,\n      self,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        self,\n        source,\n        getOwner(),\n        maybeKey,\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      \"object\" === typeof node &&\n        null !== node &&\n        node.$$typeof === REACT_ELEMENT_TYPE &&\n        node._store &&\n        (node._store.validated = 1);\n    }\n    var React = __webpack_require__(/*! next/dist/compiled/react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\");\n    Symbol.for(\"react.provider\");\n    var REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          },\n      specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsxDEV = function (\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      source,\n      self\n    ) {\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        isStaticChildren,\n        source,\n        self,\n        Error(\"react-stack-top-frame\"),\n        createTask(getTaskName(type))\n      );\n    };\n  })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7QUFDYixLQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLCtDQUErQyw2QkFBNkI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsZ0RBQWdEO0FBQ2hFLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQSxnQ0FBZ0Msa0NBQWtDLE9BQU87QUFDekU7QUFDQSxnR0FBZ0csU0FBUyxVQUFVLHNGQUFzRixhQUFhLFVBQVUsVUFBVTtBQUMxTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtQkFBTyxDQUFDLHNHQUEwQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdCQUFnQjtBQUNwQixJQUFJLGNBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlIFJlYWN0XG4gKiByZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WICYmXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpIHtcbiAgICAgIGlmIChudWxsID09IHR5cGUpIHJldHVybiBudWxsO1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIHR5cGUpXG4gICAgICAgIHJldHVybiB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9DTElFTlRfUkVGRVJFTkNFXG4gICAgICAgICAgPyBudWxsXG4gICAgICAgICAgOiB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBudWxsO1xuICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0eXBlKSByZXR1cm4gdHlwZTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFJFQUNUX0ZSQUdNRU5UX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiRnJhZ21lbnRcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9QT1JUQUxfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJQb3J0YWxcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIlByb2ZpbGVyXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1RSSUNUX01PREVfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdHJpY3RNb2RlXCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZVwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJTdXNwZW5zZUxpc3RcIjtcbiAgICAgIH1cbiAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgdHlwZSlcbiAgICAgICAgc3dpdGNoIChcbiAgICAgICAgICAoXCJudW1iZXJcIiA9PT0gdHlwZW9mIHR5cGUudGFnICYmXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcIlJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgb2JqZWN0IGluIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSgpLiBUaGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuXCJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgdHlwZS4kJHR5cGVvZilcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKHR5cGUuZGlzcGxheU5hbWUgfHwgXCJDb250ZXh0XCIpICsgXCIuUHJvdmlkZXJcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0NPTlNVTUVSX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKHR5cGUuX2NvbnRleHQuZGlzcGxheU5hbWUgfHwgXCJDb250ZXh0XCIpICsgXCIuQ29uc3VtZXJcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6XG4gICAgICAgICAgICB2YXIgaW5uZXJUeXBlID0gdHlwZS5yZW5kZXI7XG4gICAgICAgICAgICB0eXBlID0gdHlwZS5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIHR5cGUgfHxcbiAgICAgICAgICAgICAgKCh0eXBlID0gaW5uZXJUeXBlLmRpc3BsYXlOYW1lIHx8IGlubmVyVHlwZS5uYW1lIHx8IFwiXCIpLFxuICAgICAgICAgICAgICAodHlwZSA9IFwiXCIgIT09IHR5cGUgPyBcIkZvcndhcmRSZWYoXCIgKyB0eXBlICsgXCIpXCIgOiBcIkZvcndhcmRSZWZcIikpO1xuICAgICAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAoaW5uZXJUeXBlID0gdHlwZS5kaXNwbGF5TmFtZSB8fCBudWxsKSxcbiAgICAgICAgICAgICAgbnVsbCAhPT0gaW5uZXJUeXBlXG4gICAgICAgICAgICAgICAgPyBpbm5lclR5cGVcbiAgICAgICAgICAgICAgICA6IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8IFwiTWVtb1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOlxuICAgICAgICAgICAgaW5uZXJUeXBlID0gdHlwZS5fcGF5bG9hZDtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLl9pbml0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKGlubmVyVHlwZSkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge31cbiAgICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tLZXlTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICExO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSAhMDtcbiAgICAgIH1cbiAgICAgIGlmIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQpIHtcbiAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gY29uc29sZTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdC5lcnJvcjtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMCA9XG4gICAgICAgICAgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFN5bWJvbCAmJlxuICAgICAgICAgICAgU3ltYm9sLnRvU3RyaW5nVGFnICYmXG4gICAgICAgICAgICB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddKSB8fFxuICAgICAgICAgIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHxcbiAgICAgICAgICBcIk9iamVjdFwiO1xuICAgICAgICBKU0NvbXBpbGVyX3RlbXBfY29uc3QuY2FsbChcbiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQsXG4gICAgICAgICAgXCJUaGUgcHJvdmlkZWQga2V5IGlzIGFuIHVuc3VwcG9ydGVkIHR5cGUgJXMuIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLlwiLFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VGFza05hbWUodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHJldHVybiBcIjw+XCI7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlICYmXG4gICAgICAgIG51bGwgIT09IHR5cGUgJiZcbiAgICAgICAgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFXG4gICAgICApXG4gICAgICAgIHJldHVybiBcIjwuLi4+XCI7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgcmV0dXJuIG5hbWUgPyBcIjxcIiArIG5hbWUgKyBcIj5cIiA6IFwiPC4uLj5cIjtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0T3duZXIoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkE7XG4gICAgICByZXR1cm4gbnVsbCA9PT0gZGlzcGF0Y2hlciA/IG51bGwgOiBkaXNwYXRjaGVyLmdldE93bmVyKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhc1ZhbGlkS2V5KGNvbmZpZykge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBcImtleVwiKSkge1xuICAgICAgICB2YXIgZ2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjb25maWcsIFwia2V5XCIpLmdldDtcbiAgICAgICAgaWYgKGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmcpIHJldHVybiAhMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2b2lkIDAgIT09IGNvbmZpZy5rZXk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlZmluZUtleVByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSkge1xuICAgICAgZnVuY3Rpb24gd2FybkFib3V0QWNjZXNzaW5nS2V5KCkge1xuICAgICAgICBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biB8fFxuICAgICAgICAgICgoc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd24gPSAhMCksXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgIFwiJXM6IGBrZXlgIGlzIG5vdCBhIHByb3AuIFRyeWluZyB0byBhY2Nlc3MgaXQgd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSB2YWx1ZSB3aXRoaW4gdGhlIGNoaWxkIGNvbXBvbmVudCwgeW91IHNob3VsZCBwYXNzIGl0IGFzIGEgZGlmZmVyZW50IHByb3AuIChodHRwczovL3JlYWN0LmRldi9saW5rL3NwZWNpYWwtcHJvcHMpXCIsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZVxuICAgICAgICAgICkpO1xuICAgICAgfVxuICAgICAgd2FybkFib3V0QWNjZXNzaW5nS2V5LmlzUmVhY3RXYXJuaW5nID0gITA7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvcHMsIFwia2V5XCIsIHtcbiAgICAgICAgZ2V0OiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXksXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbGVtZW50UmVmR2V0dGVyV2l0aERlcHJlY2F0aW9uV2FybmluZygpIHtcbiAgICAgIHZhciBjb21wb25lbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHRoaXMudHlwZSk7XG4gICAgICBkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdIHx8XG4gICAgICAgICgoZGlkV2FybkFib3V0RWxlbWVudFJlZltjb21wb25lbnROYW1lXSA9ICEwKSxcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIkFjY2Vzc2luZyBlbGVtZW50LnJlZiB3YXMgcmVtb3ZlZCBpbiBSZWFjdCAxOS4gcmVmIGlzIG5vdyBhIHJlZ3VsYXIgcHJvcC4gSXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIEpTWCBFbGVtZW50IHR5cGUgaW4gYSBmdXR1cmUgcmVsZWFzZS5cIlxuICAgICAgICApKTtcbiAgICAgIGNvbXBvbmVudE5hbWUgPSB0aGlzLnByb3BzLnJlZjtcbiAgICAgIHJldHVybiB2b2lkIDAgIT09IGNvbXBvbmVudE5hbWUgPyBjb21wb25lbnROYW1lIDogbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gUmVhY3RFbGVtZW50KFxuICAgICAgdHlwZSxcbiAgICAgIGtleSxcbiAgICAgIHNlbGYsXG4gICAgICBzb3VyY2UsXG4gICAgICBvd25lcixcbiAgICAgIHByb3BzLFxuICAgICAgZGVidWdTdGFjayxcbiAgICAgIGRlYnVnVGFza1xuICAgICkge1xuICAgICAgc2VsZiA9IHByb3BzLnJlZjtcbiAgICAgIHR5cGUgPSB7XG4gICAgICAgICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgIF9vd25lcjogb3duZXJcbiAgICAgIH07XG4gICAgICBudWxsICE9PSAodm9pZCAwICE9PSBzZWxmID8gc2VsZiA6IG51bGwpXG4gICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwicmVmXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICAgICAgZ2V0OiBlbGVtZW50UmVmR2V0dGVyV2l0aERlcHJlY2F0aW9uV2FybmluZ1xuICAgICAgICAgIH0pXG4gICAgICAgIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwicmVmXCIsIHsgZW51bWVyYWJsZTogITEsIHZhbHVlOiBudWxsIH0pO1xuICAgICAgdHlwZS5fc3RvcmUgPSB7fTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLl9zdG9yZSwgXCJ2YWxpZGF0ZWRcIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogMFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJfZGVidWdJbmZvXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnU3RhY2tcIiwge1xuICAgICAgICBjb25maWd1cmFibGU6ICExLFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgICB2YWx1ZTogZGVidWdTdGFja1xuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJfZGVidWdUYXNrXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IGRlYnVnVGFza1xuICAgICAgfSk7XG4gICAgICBPYmplY3QuZnJlZXplICYmIChPYmplY3QuZnJlZXplKHR5cGUucHJvcHMpLCBPYmplY3QuZnJlZXplKHR5cGUpKTtcbiAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBqc3hERVZJbXBsKFxuICAgICAgdHlwZSxcbiAgICAgIGNvbmZpZyxcbiAgICAgIG1heWJlS2V5LFxuICAgICAgaXNTdGF0aWNDaGlsZHJlbixcbiAgICAgIHNvdXJjZSxcbiAgICAgIHNlbGYsXG4gICAgICBkZWJ1Z1N0YWNrLFxuICAgICAgZGVidWdUYXNrXG4gICAgKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBjb25maWcuY2hpbGRyZW47XG4gICAgICBpZiAodm9pZCAwICE9PSBjaGlsZHJlbilcbiAgICAgICAgaWYgKGlzU3RhdGljQ2hpbGRyZW4pXG4gICAgICAgICAgaWYgKGlzQXJyYXlJbXBsKGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA9IDA7XG4gICAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4gPCBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4rK1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhjaGlsZHJlbltpc1N0YXRpY0NoaWxkcmVuXSk7XG4gICAgICAgICAgICBPYmplY3QuZnJlZXplICYmIE9iamVjdC5mcmVlemUoY2hpbGRyZW4pO1xuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJSZWFjdC5qc3g6IFN0YXRpYyBjaGlsZHJlbiBzaG91bGQgYWx3YXlzIGJlIGFuIGFycmF5LiBZb3UgYXJlIGxpa2VseSBleHBsaWNpdGx5IGNhbGxpbmcgUmVhY3QuanN4cyBvciBSZWFjdC5qc3hERVYuIFVzZSB0aGUgQmFiZWwgdHJhbnNmb3JtIGluc3RlYWQuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIGVsc2UgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW4pO1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBcImtleVwiKSkge1xuICAgICAgICBjaGlsZHJlbiA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpLmZpbHRlcihmdW5jdGlvbiAoaykge1xuICAgICAgICAgIHJldHVybiBcImtleVwiICE9PSBrO1xuICAgICAgICB9KTtcbiAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA9XG4gICAgICAgICAgMCA8IGtleXMubGVuZ3RoXG4gICAgICAgICAgICA/IFwie2tleTogc29tZUtleSwgXCIgKyBrZXlzLmpvaW4oXCI6IC4uLiwgXCIpICsgXCI6IC4uLn1cIlxuICAgICAgICAgICAgOiBcIntrZXk6IHNvbWVLZXl9XCI7XG4gICAgICAgIGRpZFdhcm5BYm91dEtleVNwcmVhZFtjaGlsZHJlbiArIGlzU3RhdGljQ2hpbGRyZW5dIHx8XG4gICAgICAgICAgKChrZXlzID1cbiAgICAgICAgICAgIDAgPCBrZXlzLmxlbmd0aCA/IFwie1wiICsga2V5cy5qb2luKFwiOiAuLi4sIFwiKSArIFwiOiAuLi59XCIgOiBcInt9XCIpLFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAnQSBwcm9wcyBvYmplY3QgY29udGFpbmluZyBhIFwia2V5XCIgcHJvcCBpcyBiZWluZyBzcHJlYWQgaW50byBKU1g6XFxuICBsZXQgcHJvcHMgPSAlcztcXG4gIDwlcyB7Li4ucHJvcHN9IC8+XFxuUmVhY3Qga2V5cyBtdXN0IGJlIHBhc3NlZCBkaXJlY3RseSB0byBKU1ggd2l0aG91dCB1c2luZyBzcHJlYWQ6XFxuICBsZXQgcHJvcHMgPSAlcztcXG4gIDwlcyBrZXk9e3NvbWVLZXl9IHsuLi5wcm9wc30gLz4nLFxuICAgICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbixcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAga2V5cyxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgKSxcbiAgICAgICAgICAoZGlkV2FybkFib3V0S2V5U3ByZWFkW2NoaWxkcmVuICsgaXNTdGF0aWNDaGlsZHJlbl0gPSAhMCkpO1xuICAgICAgfVxuICAgICAgY2hpbGRyZW4gPSBudWxsO1xuICAgICAgdm9pZCAwICE9PSBtYXliZUtleSAmJlxuICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihtYXliZUtleSksIChjaGlsZHJlbiA9IFwiXCIgKyBtYXliZUtleSkpO1xuICAgICAgaGFzVmFsaWRLZXkoY29uZmlnKSAmJlxuICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjb25maWcua2V5KSwgKGNoaWxkcmVuID0gXCJcIiArIGNvbmZpZy5rZXkpKTtcbiAgICAgIGlmIChcImtleVwiIGluIGNvbmZpZykge1xuICAgICAgICBtYXliZUtleSA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBjb25maWcpXG4gICAgICAgICAgXCJrZXlcIiAhPT0gcHJvcE5hbWUgJiYgKG1heWJlS2V5W3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV0pO1xuICAgICAgfSBlbHNlIG1heWJlS2V5ID0gY29uZmlnO1xuICAgICAgY2hpbGRyZW4gJiZcbiAgICAgICAgZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIoXG4gICAgICAgICAgbWF5YmVLZXksXG4gICAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdHlwZVxuICAgICAgICAgICAgPyB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBcIlVua25vd25cIlxuICAgICAgICAgICAgOiB0eXBlXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gUmVhY3RFbGVtZW50KFxuICAgICAgICB0eXBlLFxuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgc2VsZixcbiAgICAgICAgc291cmNlLFxuICAgICAgICBnZXRPd25lcigpLFxuICAgICAgICBtYXliZUtleSxcbiAgICAgICAgZGVidWdTdGFjayxcbiAgICAgICAgZGVidWdUYXNrXG4gICAgICApO1xuICAgIH1cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUNoaWxkS2V5cyhub2RlKSB7XG4gICAgICBcIm9iamVjdFwiID09PSB0eXBlb2Ygbm9kZSAmJlxuICAgICAgICBudWxsICE9PSBub2RlICYmXG4gICAgICAgIG5vZGUuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRSAmJlxuICAgICAgICBub2RlLl9zdG9yZSAmJlxuICAgICAgICAobm9kZS5fc3RvcmUudmFsaWRhdGVkID0gMSk7XG4gICAgfVxuICAgIHZhciBSZWFjdCA9IHJlcXVpcmUoXCJuZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3RcIiksXG4gICAgICBSRUFDVF9FTEVNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QudHJhbnNpdGlvbmFsLmVsZW1lbnRcIiksXG4gICAgICBSRUFDVF9QT1JUQUxfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5wb3J0YWxcIiksXG4gICAgICBSRUFDVF9GUkFHTUVOVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmZyYWdtZW50XCIpLFxuICAgICAgUkVBQ1RfU1RSSUNUX01PREVfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5zdHJpY3RfbW9kZVwiKSxcbiAgICAgIFJFQUNUX1BST0ZJTEVSX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QucHJvZmlsZXJcIik7XG4gICAgU3ltYm9sLmZvcihcInJlYWN0LnByb3ZpZGVyXCIpO1xuICAgIHZhciBSRUFDVF9DT05TVU1FUl9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmNvbnN1bWVyXCIpLFxuICAgICAgUkVBQ1RfQ09OVEVYVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmNvbnRleHRcIiksXG4gICAgICBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmZvcndhcmRfcmVmXCIpLFxuICAgICAgUkVBQ1RfU1VTUEVOU0VfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5zdXNwZW5zZVwiKSxcbiAgICAgIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5zdXNwZW5zZV9saXN0XCIpLFxuICAgICAgUkVBQ1RfTUVNT19UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9cIiksXG4gICAgICBSRUFDVF9MQVpZX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QubGF6eVwiKSxcbiAgICAgIFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UgPSBTeW1ib2wuZm9yKFwicmVhY3QuY2xpZW50LnJlZmVyZW5jZVwiKSxcbiAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzID1cbiAgICAgICAgUmVhY3QuX19DTElFTlRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfV0FSTl9VU0VSU19USEVZX0NBTk5PVF9VUEdSQURFLFxuICAgICAgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgaXNBcnJheUltcGwgPSBBcnJheS5pc0FycmF5LFxuICAgICAgY3JlYXRlVGFzayA9IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA/IGNvbnNvbGUuY3JlYXRlVGFza1xuICAgICAgICA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH0sXG4gICAgICBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93bjtcbiAgICB2YXIgZGlkV2FybkFib3V0RWxlbWVudFJlZiA9IHt9O1xuICAgIHZhciBkaWRXYXJuQWJvdXRLZXlTcHJlYWQgPSB7fTtcbiAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbiAgICBleHBvcnRzLmpzeERFViA9IGZ1bmN0aW9uIChcbiAgICAgIHR5cGUsXG4gICAgICBjb25maWcsXG4gICAgICBtYXliZUtleSxcbiAgICAgIGlzU3RhdGljQ2hpbGRyZW4sXG4gICAgICBzb3VyY2UsXG4gICAgICBzZWxmXG4gICAgKSB7XG4gICAgICByZXR1cm4ganN4REVWSW1wbChcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBtYXliZUtleSxcbiAgICAgICAgaXNTdGF0aWNDaGlsZHJlbixcbiAgICAgICAgc291cmNlLFxuICAgICAgICBzZWxmLFxuICAgICAgICBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKSxcbiAgICAgICAgY3JlYXRlVGFzayhnZXRUYXNrTmFtZSh0eXBlKSlcbiAgICAgICk7XG4gICAgfTtcbiAgfSkoKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/jsx-dev-runtime.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-jsx-dev-runtime.development.js */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvanN4LWRldi1ydW50aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSw4TEFBc0U7QUFDeEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0L2pzeC1kZXYtcnVudGltZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLnByb2R1Y3Rpb24uanMnKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLmRldmVsb3BtZW50LmpzJyk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/amp-context.shared-runtime.js":
/*!*************************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/amp-context.shared-runtime.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"AmpStateContext\", ({\n    enumerable: true,\n    get: function() {\n        return AmpStateContext;\n    }\n}));\nconst _interop_require_default = __webpack_require__(/*! @swc/helpers/_/_interop_require_default */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_interop_require_default.js\");\nconst _react = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"));\nconst AmpStateContext = _react.default.createContext({});\nif (true) {\n    AmpStateContext.displayName = 'AmpStateContext';\n} //# sourceMappingURL=amp-context.shared-runtime.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9hbXAtY29udGV4dC5zaGFyZWQtcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7O21EQUVhQTs7O2VBQUFBOzs7OzRFQUZLO0FBRVgsTUFBTUEsa0JBQXNDQyxPQUFBQSxPQUFLLENBQUNDLGFBQWEsQ0FBQyxDQUFDO0FBRXhFLElBQUlDLElBQW9CLEVBQW1CO0lBQ3pDSCxnQkFBZ0JNLFdBQVcsR0FBRztBQUNoQyIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy9zaGFyZWQvbGliL2FtcC1jb250ZXh0LnNoYXJlZC1ydW50aW1lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcblxuZXhwb3J0IGNvbnN0IEFtcFN0YXRlQ29udGV4dDogUmVhY3QuQ29udGV4dDxhbnk+ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7fSlcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgQW1wU3RhdGVDb250ZXh0LmRpc3BsYXlOYW1lID0gJ0FtcFN0YXRlQ29udGV4dCdcbn1cbiJdLCJuYW1lcyI6WyJBbXBTdGF0ZUNvbnRleHQiLCJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJkaXNwbGF5TmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/amp-context.shared-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/amp-mode.js":
/*!*******************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/amp-mode.js ***!
  \*******************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"isInAmpMode\", ({\n    enumerable: true,\n    get: function() {\n        return isInAmpMode;\n    }\n}));\nfunction isInAmpMode(param) {\n    let { ampFirst = false, hybrid = false, hasQuery = false } = param === void 0 ? {} : param;\n    return ampFirst || hybrid && hasQuery;\n} //# sourceMappingURL=amp-mode.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9hbXAtbW9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7OytDQUFnQkE7OztlQUFBQTs7O0FBQVQsU0FBU0EsWUFBWTtJQUFBLE1BQzFCQyxXQUFXLEtBQUssRUFDaEJDLFNBQVMsS0FBSyxFQUNkQyxXQUFXLEtBQUssRUFDakIsR0FKMkIsbUJBSXhCLENBQUMsSUFKdUI7SUFLMUIsT0FBT0YsWUFBYUMsVUFBVUM7QUFDaEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2hhcmVkL2xpYi9hbXAtbW9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaXNJbkFtcE1vZGUoe1xuICBhbXBGaXJzdCA9IGZhbHNlLFxuICBoeWJyaWQgPSBmYWxzZSxcbiAgaGFzUXVlcnkgPSBmYWxzZSxcbn0gPSB7fSk6IGJvb2xlYW4ge1xuICByZXR1cm4gYW1wRmlyc3QgfHwgKGh5YnJpZCAmJiBoYXNRdWVyeSlcbn1cbiJdLCJuYW1lcyI6WyJpc0luQW1wTW9kZSIsImFtcEZpcnN0IiwiaHlicmlkIiwiaGFzUXVlcnkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/amp-mode.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/get-img-props.js":
/*!************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/get-img-props.js ***!
  \************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"getImgProps\", ({\n    enumerable: true,\n    get: function() {\n        return getImgProps;\n    }\n}));\nconst _warnonce = __webpack_require__(/*! ./utils/warn-once */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js\");\nconst _imageblursvg = __webpack_require__(/*! ./image-blur-svg */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/image-blur-svg.js\");\nconst _imageconfig = __webpack_require__(/*! ./image-config */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/image-config.js\");\nconst VALID_LOADING_VALUES = [\n    'lazy',\n    'eager',\n    undefined\n];\nfunction isStaticRequire(src) {\n    return src.default !== undefined;\n}\nfunction isStaticImageData(src) {\n    return src.src !== undefined;\n}\nfunction isStaticImport(src) {\n    return !!src && typeof src === 'object' && (isStaticRequire(src) || isStaticImageData(src));\n}\nconst allImgs = new Map();\nlet perfObserver;\nfunction getInt(x) {\n    if (typeof x === 'undefined') {\n        return x;\n    }\n    if (typeof x === 'number') {\n        return Number.isFinite(x) ? x : NaN;\n    }\n    if (typeof x === 'string' && /^[0-9]+$/.test(x)) {\n        return parseInt(x, 10);\n    }\n    return NaN;\n}\nfunction getWidths(param, width, sizes) {\n    let { deviceSizes, allSizes } = param;\n    if (sizes) {\n        // Find all the \"vw\" percent sizes used in the sizes prop\n        const viewportWidthRe = /(^|\\s)(1?\\d?\\d)vw/g;\n        const percentSizes = [];\n        for(let match; match = viewportWidthRe.exec(sizes); match){\n            percentSizes.push(parseInt(match[2]));\n        }\n        if (percentSizes.length) {\n            const smallestRatio = Math.min(...percentSizes) * 0.01;\n            return {\n                widths: allSizes.filter((s)=>s >= deviceSizes[0] * smallestRatio),\n                kind: 'w'\n            };\n        }\n        return {\n            widths: allSizes,\n            kind: 'w'\n        };\n    }\n    if (typeof width !== 'number') {\n        return {\n            widths: deviceSizes,\n            kind: 'w'\n        };\n    }\n    const widths = [\n        ...new Set(// > are actually 3x in the green color, but only 1.5x in the red and\n        // > blue colors. Showing a 3x resolution image in the app vs a 2x\n        // > resolution image will be visually the same, though the 3x image\n        // > takes significantly more data. Even true 3x resolution screens are\n        // > wasteful as the human eye cannot see that level of detail without\n        // > something like a magnifying glass.\n        // https://blog.twitter.com/engineering/en_us/topics/infrastructure/2019/capping-image-fidelity-on-ultra-high-resolution-devices.html\n        [\n            width,\n            width * 2 /*, width * 3*/ \n        ].map((w)=>allSizes.find((p)=>p >= w) || allSizes[allSizes.length - 1]))\n    ];\n    return {\n        widths,\n        kind: 'x'\n    };\n}\nfunction generateImgAttrs(param) {\n    let { config, src, unoptimized, width, quality, sizes, loader } = param;\n    if (unoptimized) {\n        return {\n            src,\n            srcSet: undefined,\n            sizes: undefined\n        };\n    }\n    const { widths, kind } = getWidths(config, width, sizes);\n    const last = widths.length - 1;\n    return {\n        sizes: !sizes && kind === 'w' ? '100vw' : sizes,\n        srcSet: widths.map((w, i)=>loader({\n                config,\n                src,\n                quality,\n                width: w\n            }) + \" \" + (kind === 'w' ? w : i + 1) + kind).join(', '),\n        // It's intended to keep `src` the last attribute because React updates\n        // attributes in order. If we keep `src` the first one, Safari will\n        // immediately start to fetch `src`, before `sizes` and `srcSet` are even\n        // updated by React. That causes multiple unnecessary requests if `srcSet`\n        // and `sizes` are defined.\n        // This bug cannot be reproduced in Chrome or Firefox.\n        src: loader({\n            config,\n            src,\n            quality,\n            width: widths[last]\n        })\n    };\n}\nfunction getImgProps(param, _state) {\n    let { src, sizes, unoptimized = false, priority = false, loading, className, quality, width, height, fill = false, style, overrideSrc, onLoad, onLoadingComplete, placeholder = 'empty', blurDataURL, fetchPriority, decoding = 'async', layout, objectFit, objectPosition, lazyBoundary, lazyRoot, ...rest } = param;\n    const { imgConf, showAltText, blurComplete, defaultLoader } = _state;\n    let config;\n    let c = imgConf || _imageconfig.imageConfigDefault;\n    if ('allSizes' in c) {\n        config = c;\n    } else {\n        var _c_qualities;\n        const allSizes = [\n            ...c.deviceSizes,\n            ...c.imageSizes\n        ].sort((a, b)=>a - b);\n        const deviceSizes = c.deviceSizes.sort((a, b)=>a - b);\n        const qualities = (_c_qualities = c.qualities) == null ? void 0 : _c_qualities.sort((a, b)=>a - b);\n        config = {\n            ...c,\n            allSizes,\n            deviceSizes,\n            qualities\n        };\n    }\n    if (typeof defaultLoader === 'undefined') {\n        throw Object.defineProperty(new Error('images.loaderFile detected but the file is missing default export.\\nRead more: https://nextjs.org/docs/messages/invalid-images-config'), \"__NEXT_ERROR_CODE\", {\n            value: \"E163\",\n            enumerable: false,\n            configurable: true\n        });\n    }\n    let loader = rest.loader || defaultLoader;\n    // Remove property so it's not spread on <img> element\n    delete rest.loader;\n    delete rest.srcSet;\n    // This special value indicates that the user\n    // didn't define a \"loader\" prop or \"loader\" config.\n    const isDefaultLoader = '__next_img_default' in loader;\n    if (isDefaultLoader) {\n        if (config.loader === 'custom') {\n            throw Object.defineProperty(new Error('Image with src \"' + src + '\" is missing \"loader\" prop.' + \"\\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader\"), \"__NEXT_ERROR_CODE\", {\n                value: \"E252\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n    } else {\n        // The user defined a \"loader\" prop or config.\n        // Since the config object is internal only, we\n        // must not pass it to the user-defined \"loader\".\n        const customImageLoader = loader;\n        loader = (obj)=>{\n            const { config: _, ...opts } = obj;\n            return customImageLoader(opts);\n        };\n    }\n    if (layout) {\n        if (layout === 'fill') {\n            fill = true;\n        }\n        const layoutToStyle = {\n            intrinsic: {\n                maxWidth: '100%',\n                height: 'auto'\n            },\n            responsive: {\n                width: '100%',\n                height: 'auto'\n            }\n        };\n        const layoutToSizes = {\n            responsive: '100vw',\n            fill: '100vw'\n        };\n        const layoutStyle = layoutToStyle[layout];\n        if (layoutStyle) {\n            style = {\n                ...style,\n                ...layoutStyle\n            };\n        }\n        const layoutSizes = layoutToSizes[layout];\n        if (layoutSizes && !sizes) {\n            sizes = layoutSizes;\n        }\n    }\n    let staticSrc = '';\n    let widthInt = getInt(width);\n    let heightInt = getInt(height);\n    let blurWidth;\n    let blurHeight;\n    if (isStaticImport(src)) {\n        const staticImageData = isStaticRequire(src) ? src.default : src;\n        if (!staticImageData.src) {\n            throw Object.defineProperty(new Error(\"An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received \" + JSON.stringify(staticImageData)), \"__NEXT_ERROR_CODE\", {\n                value: \"E460\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (!staticImageData.height || !staticImageData.width) {\n            throw Object.defineProperty(new Error(\"An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received \" + JSON.stringify(staticImageData)), \"__NEXT_ERROR_CODE\", {\n                value: \"E48\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        blurWidth = staticImageData.blurWidth;\n        blurHeight = staticImageData.blurHeight;\n        blurDataURL = blurDataURL || staticImageData.blurDataURL;\n        staticSrc = staticImageData.src;\n        if (!fill) {\n            if (!widthInt && !heightInt) {\n                widthInt = staticImageData.width;\n                heightInt = staticImageData.height;\n            } else if (widthInt && !heightInt) {\n                const ratio = widthInt / staticImageData.width;\n                heightInt = Math.round(staticImageData.height * ratio);\n            } else if (!widthInt && heightInt) {\n                const ratio = heightInt / staticImageData.height;\n                widthInt = Math.round(staticImageData.width * ratio);\n            }\n        }\n    }\n    src = typeof src === 'string' ? src : staticSrc;\n    let isLazy = !priority && (loading === 'lazy' || typeof loading === 'undefined');\n    if (!src || src.startsWith('data:') || src.startsWith('blob:')) {\n        // https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\n        unoptimized = true;\n        isLazy = false;\n    }\n    if (config.unoptimized) {\n        unoptimized = true;\n    }\n    if (isDefaultLoader && !config.dangerouslyAllowSVG && src.split('?', 1)[0].endsWith('.svg')) {\n        // Special case to make svg serve as-is to avoid proxying\n        // through the built-in Image Optimization API.\n        unoptimized = true;\n    }\n    const qualityInt = getInt(quality);\n    if (true) {\n        if (config.output === 'export' && isDefaultLoader && !unoptimized) {\n            throw Object.defineProperty(new Error(\"Image Optimization using the default loader is not compatible with `{ output: 'export' }`.\\n  Possible solutions:\\n    - Remove `{ output: 'export' }` and run \\\"next start\\\" to run server mode including the Image Optimization API.\\n    - Configure `{ images: { unoptimized: true } }` in `next.config.js` to disable the Image Optimization API.\\n  Read more: https://nextjs.org/docs/messages/export-image-api\"), \"__NEXT_ERROR_CODE\", {\n                value: \"E500\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (!src) {\n            // React doesn't show the stack trace and there's\n            // no `src` to help identify which image, so we\n            // instead console.error(ref) during mount.\n            unoptimized = true;\n        } else {\n            if (fill) {\n                if (width) {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" has both \"width\" and \"fill\" properties. Only one should be used.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E96\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if (height) {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" has both \"height\" and \"fill\" properties. Only one should be used.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E115\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if ((style == null ? void 0 : style.position) && style.position !== 'absolute') {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" has both \"fill\" and \"style.position\" properties. Images with \"fill\" always use position absolute - it cannot be modified.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E216\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if ((style == null ? void 0 : style.width) && style.width !== '100%') {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" has both \"fill\" and \"style.width\" properties. Images with \"fill\" always use width 100% - it cannot be modified.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E73\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if ((style == null ? void 0 : style.height) && style.height !== '100%') {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" has both \"fill\" and \"style.height\" properties. Images with \"fill\" always use height 100% - it cannot be modified.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E404\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n            } else {\n                if (typeof widthInt === 'undefined') {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" is missing required \"width\" property.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E451\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                } else if (isNaN(widthInt)) {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" has invalid \"width\" property. Expected a numeric value in pixels but received \"' + width + '\".'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E66\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if (typeof heightInt === 'undefined') {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" is missing required \"height\" property.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E397\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                } else if (isNaN(heightInt)) {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" has invalid \"height\" property. Expected a numeric value in pixels but received \"' + height + '\".'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E444\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                // eslint-disable-next-line no-control-regex\n                if (/^[\\x00-\\x20]/.test(src)) {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" cannot start with a space or control character. Use src.trimStart() to remove it or encodeURIComponent(src) to keep it.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E176\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                // eslint-disable-next-line no-control-regex\n                if (/[\\x00-\\x20]$/.test(src)) {\n                    throw Object.defineProperty(new Error('Image with src \"' + src + '\" cannot end with a space or control character. Use src.trimEnd() to remove it or encodeURIComponent(src) to keep it.'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E21\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n            }\n        }\n        if (!VALID_LOADING_VALUES.includes(loading)) {\n            throw Object.defineProperty(new Error('Image with src \"' + src + '\" has invalid \"loading\" property. Provided \"' + loading + '\" should be one of ' + VALID_LOADING_VALUES.map(String).join(',') + \".\"), \"__NEXT_ERROR_CODE\", {\n                value: \"E357\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (priority && loading === 'lazy') {\n            throw Object.defineProperty(new Error('Image with src \"' + src + '\" has both \"priority\" and \"loading=\\'lazy\\'\" properties. Only one should be used.'), \"__NEXT_ERROR_CODE\", {\n                value: \"E218\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (placeholder !== 'empty' && placeholder !== 'blur' && !placeholder.startsWith('data:image/')) {\n            throw Object.defineProperty(new Error('Image with src \"' + src + '\" has invalid \"placeholder\" property \"' + placeholder + '\".'), \"__NEXT_ERROR_CODE\", {\n                value: \"E431\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (placeholder !== 'empty') {\n            if (widthInt && heightInt && widthInt * heightInt < 1600) {\n                (0, _warnonce.warnOnce)('Image with src \"' + src + '\" is smaller than 40x40. Consider removing the \"placeholder\" property to improve performance.');\n            }\n        }\n        if (placeholder === 'blur' && !blurDataURL) {\n            const VALID_BLUR_EXT = [\n                'jpeg',\n                'png',\n                'webp',\n                'avif'\n            ] // should match next-image-loader\n            ;\n            throw Object.defineProperty(new Error('Image with src \"' + src + '\" has \"placeholder=\\'blur\\'\" property but is missing the \"blurDataURL\" property.\\n        Possible solutions:\\n          - Add a \"blurDataURL\" property, the contents should be a small Data URL to represent the image\\n          - Change the \"src\" property to a static import with one of the supported file types: ' + VALID_BLUR_EXT.join(',') + ' (animated images not supported)\\n          - Remove the \"placeholder\" property, effectively no blur effect\\n        Read more: https://nextjs.org/docs/messages/placeholder-blur-data-url'), \"__NEXT_ERROR_CODE\", {\n                value: \"E371\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if ('ref' in rest) {\n            (0, _warnonce.warnOnce)('Image with src \"' + src + '\" is using unsupported \"ref\" property. Consider using the \"onLoad\" property instead.');\n        }\n        if (!unoptimized && !isDefaultLoader) {\n            const urlStr = loader({\n                config,\n                src,\n                width: widthInt || 400,\n                quality: qualityInt || 75\n            });\n            let url;\n            try {\n                url = new URL(urlStr);\n            } catch (err) {}\n            if (urlStr === src || url && url.pathname === src && !url.search) {\n                (0, _warnonce.warnOnce)('Image with src \"' + src + '\" has a \"loader\" property that does not implement width. Please implement it or use the \"unoptimized\" property instead.' + \"\\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader-width\");\n            }\n        }\n        if (onLoadingComplete) {\n            (0, _warnonce.warnOnce)('Image with src \"' + src + '\" is using deprecated \"onLoadingComplete\" property. Please use the \"onLoad\" property instead.');\n        }\n        for (const [legacyKey, legacyValue] of Object.entries({\n            layout,\n            objectFit,\n            objectPosition,\n            lazyBoundary,\n            lazyRoot\n        })){\n            if (legacyValue) {\n                (0, _warnonce.warnOnce)('Image with src \"' + src + '\" has legacy prop \"' + legacyKey + '\". Did you forget to run the codemod?' + \"\\nRead more: https://nextjs.org/docs/messages/next-image-upgrade-to-13\");\n            }\n        }\n        if ( true && !perfObserver && window.PerformanceObserver) {\n            perfObserver = new PerformanceObserver((entryList)=>{\n                for (const entry of entryList.getEntries()){\n                    var _entry_element;\n                    // @ts-ignore - missing \"LargestContentfulPaint\" class with \"element\" prop\n                    const imgSrc = (entry == null ? void 0 : (_entry_element = entry.element) == null ? void 0 : _entry_element.src) || '';\n                    const lcpImage = allImgs.get(imgSrc);\n                    if (lcpImage && !lcpImage.priority && lcpImage.placeholder === 'empty' && !lcpImage.src.startsWith('data:') && !lcpImage.src.startsWith('blob:')) {\n                        // https://web.dev/lcp/#measure-lcp-in-javascript\n                        (0, _warnonce.warnOnce)('Image with src \"' + lcpImage.src + '\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.' + \"\\nRead more: https://nextjs.org/docs/api-reference/next/image#priority\");\n                    }\n                }\n            });\n            try {\n                perfObserver.observe({\n                    type: 'largest-contentful-paint',\n                    buffered: true\n                });\n            } catch (err) {\n                // Log error but don't crash the app\n                console.error(err);\n            }\n        }\n    }\n    const imgStyle = Object.assign(fill ? {\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        objectFit,\n        objectPosition\n    } : {}, showAltText ? {} : {\n        color: 'transparent'\n    }, style);\n    const backgroundImage = !blurComplete && placeholder !== 'empty' ? placeholder === 'blur' ? 'url(\"data:image/svg+xml;charset=utf-8,' + (0, _imageblursvg.getImageBlurSvg)({\n        widthInt,\n        heightInt,\n        blurWidth,\n        blurHeight,\n        blurDataURL: blurDataURL || '',\n        objectFit: imgStyle.objectFit\n    }) + '\")' : 'url(\"' + placeholder + '\")' // assume `data:image/`\n     : null;\n    let placeholderStyle = backgroundImage ? {\n        backgroundSize: imgStyle.objectFit || 'cover',\n        backgroundPosition: imgStyle.objectPosition || '50% 50%',\n        backgroundRepeat: 'no-repeat',\n        backgroundImage\n    } : {};\n    if (true) {\n        if (placeholderStyle.backgroundImage && placeholder === 'blur' && (blurDataURL == null ? void 0 : blurDataURL.startsWith('/'))) {\n            // During `next dev`, we don't want to generate blur placeholders with webpack\n            // because it can delay starting the dev server. Instead, `next-image-loader.js`\n            // will inline a special url to lazily generate the blur placeholder at request time.\n            placeholderStyle.backgroundImage = 'url(\"' + blurDataURL + '\")';\n        }\n    }\n    const imgAttributes = generateImgAttrs({\n        config,\n        src,\n        unoptimized,\n        width: widthInt,\n        quality: qualityInt,\n        sizes,\n        loader\n    });\n    if (true) {\n        if (true) {\n            let fullUrl;\n            try {\n                fullUrl = new URL(imgAttributes.src);\n            } catch (e) {\n                fullUrl = new URL(imgAttributes.src, window.location.href);\n            }\n            allImgs.set(fullUrl.href, {\n                src,\n                priority,\n                placeholder\n            });\n        }\n    }\n    const props = {\n        ...rest,\n        loading: isLazy ? 'lazy' : loading,\n        fetchPriority,\n        width: widthInt,\n        height: heightInt,\n        decoding,\n        className,\n        style: {\n            ...imgStyle,\n            ...placeholderStyle\n        },\n        sizes: imgAttributes.sizes,\n        srcSet: imgAttributes.srcSet,\n        src: overrideSrc || imgAttributes.src\n    };\n    const meta = {\n        unoptimized,\n        priority,\n        placeholder,\n        fill\n    };\n    return {\n        props,\n        meta\n    };\n} //# sourceMappingURL=get-img-props.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9nZXQtaW1nLXByb3BzLmpzIiwibWFwcGluZ3MiOiI7Ozs7K0NBOE9nQkE7OztlQUFBQTs7O3NDQTlPUzswQ0FDTzt5Q0FDRztBQStFbkMsTUFBTUMsdUJBQXVCO0lBQUM7SUFBUTtJQUFTQztDQUFVO0FBa0J6RCxTQUFTQyxnQkFDUEMsR0FBb0M7SUFFcEMsT0FBUUEsSUFBc0JDLE9BQU8sS0FBS0g7QUFDNUM7QUFFQSxTQUFTSSxrQkFDUEYsR0FBb0M7SUFFcEMsT0FBUUEsSUFBd0JBLEdBQUcsS0FBS0Y7QUFDMUM7QUFFQSxTQUFTSyxlQUFlSCxHQUEwQjtJQUNoRCxPQUNFLENBQUMsQ0FBQ0EsT0FDRixPQUFPQSxRQUFRLFlBQ2RELENBQUFBLGdCQUFnQkMsUUFDZkUsa0JBQWtCRixJQUFBQSxDQUFtQjtBQUUzQztBQUVBLE1BQU1JLFVBQVUsSUFBSUM7QUFJcEIsSUFBSUM7QUFFSixTQUFTQyxPQUFPQyxDQUFVO0lBQ3hCLElBQUksT0FBT0EsTUFBTSxhQUFhO1FBQzVCLE9BQU9BO0lBQ1Q7SUFDQSxJQUFJLE9BQU9BLE1BQU0sVUFBVTtRQUN6QixPQUFPQyxPQUFPQyxRQUFRLENBQUNGLEtBQUtBLElBQUlHO0lBQ2xDO0lBQ0EsSUFBSSxPQUFPSCxNQUFNLFlBQVksV0FBV0ksSUFBSSxDQUFDSixJQUFJO1FBQy9DLE9BQU9LLFNBQVNMLEdBQUc7SUFDckI7SUFDQSxPQUFPRztBQUNUO0FBRUEsU0FBU0csVUFDUCxLQUFzQyxFQUN0Q0MsS0FBeUIsRUFDekJDLEtBQXlCO0lBRnpCLE1BQUVDLFdBQVcsRUFBRUMsUUFBUSxFQUFlLEdBQXRDO0lBSUEsSUFBSUYsT0FBTztRQUNULHlEQUF5RDtRQUN6RCxNQUFNRyxrQkFBa0I7UUFDeEIsTUFBTUMsZUFBZSxFQUFFO1FBQ3ZCLElBQUssSUFBSUMsT0FBUUEsUUFBUUYsZ0JBQWdCRyxJQUFJLENBQUNOLFFBQVNL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cnMvc3JjL3NoYXJlZC9saWIvZ2V0LWltZy1wcm9wcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB3YXJuT25jZSB9IGZyb20gJy4vdXRpbHMvd2Fybi1vbmNlJ1xuaW1wb3J0IHsgZ2V0SW1hZ2VCbHVyU3ZnIH0gZnJvbSAnLi9pbWFnZS1ibHVyLXN2ZydcbmltcG9ydCB7IGltYWdlQ29uZmlnRGVmYXVsdCB9IGZyb20gJy4vaW1hZ2UtY29uZmlnJ1xuaW1wb3J0IHR5cGUge1xuICBJbWFnZUNvbmZpZ0NvbXBsZXRlLFxuICBJbWFnZUxvYWRlclByb3BzLFxuICBJbWFnZUxvYWRlclByb3BzV2l0aENvbmZpZyxcbn0gZnJvbSAnLi9pbWFnZS1jb25maWcnXG5cbmltcG9ydCB0eXBlIHsgSlNYIH0gZnJvbSAncmVhY3QnXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGljSW1hZ2VEYXRhIHtcbiAgc3JjOiBzdHJpbmdcbiAgaGVpZ2h0OiBudW1iZXJcbiAgd2lkdGg6IG51bWJlclxuICBibHVyRGF0YVVSTD86IHN0cmluZ1xuICBibHVyV2lkdGg/OiBudW1iZXJcbiAgYmx1ckhlaWdodD86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRpY1JlcXVpcmUge1xuICBkZWZhdWx0OiBTdGF0aWNJbWFnZURhdGFcbn1cblxuZXhwb3J0IHR5cGUgU3RhdGljSW1wb3J0ID0gU3RhdGljUmVxdWlyZSB8IFN0YXRpY0ltYWdlRGF0YVxuXG5leHBvcnQgdHlwZSBJbWFnZVByb3BzID0gT21pdDxcbiAgSlNYLkludHJpbnNpY0VsZW1lbnRzWydpbWcnXSxcbiAgJ3NyYycgfCAnc3JjU2V0JyB8ICdyZWYnIHwgJ2FsdCcgfCAnd2lkdGgnIHwgJ2hlaWdodCcgfCAnbG9hZGluZydcbj4gJiB7XG4gIHNyYzogc3RyaW5nIHwgU3RhdGljSW1wb3J0XG4gIGFsdDogc3RyaW5nXG4gIHdpZHRoPzogbnVtYmVyIHwgYCR7bnVtYmVyfWBcbiAgaGVpZ2h0PzogbnVtYmVyIHwgYCR7bnVtYmVyfWBcbiAgZmlsbD86IGJvb2xlYW5cbiAgbG9hZGVyPzogSW1hZ2VMb2FkZXJcbiAgcXVhbGl0eT86IG51bWJlciB8IGAke251bWJlcn1gXG4gIHByaW9yaXR5PzogYm9vbGVhblxuICBsb2FkaW5nPzogTG9hZGluZ1ZhbHVlXG4gIHBsYWNlaG9sZGVyPzogUGxhY2Vob2xkZXJWYWx1ZVxuICBibHVyRGF0YVVSTD86IHN0cmluZ1xuICB1bm9wdGltaXplZD86IGJvb2xlYW5cbiAgb3ZlcnJpZGVTcmM/OiBzdHJpbmdcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBgb25Mb2FkYCBpbnN0ZWFkLlxuICAgKiBAc2VlIGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwcC9hcGktcmVmZXJlbmNlL2NvbXBvbmVudHMvaW1hZ2Ujb25sb2FkXG4gICAqL1xuICBvbkxvYWRpbmdDb21wbGV0ZT86IE9uTG9hZGluZ0NvbXBsZXRlXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYGZpbGxgIHByb3AgaW5zdGVhZCBvZiBgbGF5b3V0PVwiZmlsbFwiYCBvciBjaGFuZ2UgaW1wb3J0IHRvIGBuZXh0L2xlZ2FjeS9pbWFnZWAuXG4gICAqIEBzZWUgaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBpLXJlZmVyZW5jZS9uZXh0L2xlZ2FjeS9pbWFnZVxuICAgKi9cbiAgbGF5b3V0Pzogc3RyaW5nXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYHN0eWxlYCBwcm9wIGluc3RlYWQuXG4gICAqL1xuICBvYmplY3RGaXQ/OiBzdHJpbmdcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBgc3R5bGVgIHByb3AgaW5zdGVhZC5cbiAgICovXG4gIG9iamVjdFBvc2l0aW9uPzogc3RyaW5nXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBUaGlzIHByb3AgZG9lcyBub3QgZG8gYW55dGhpbmcuXG4gICAqL1xuICBsYXp5Qm91bmRhcnk/OiBzdHJpbmdcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFRoaXMgcHJvcCBkb2VzIG5vdCBkbyBhbnl0aGluZy5cbiAgICovXG4gIGxhenlSb290Pzogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIEltZ1Byb3BzID0gT21pdDxJbWFnZVByb3BzLCAnc3JjJyB8ICdsb2FkZXInPiAmIHtcbiAgbG9hZGluZzogTG9hZGluZ1ZhbHVlXG4gIHdpZHRoOiBudW1iZXIgfCB1bmRlZmluZWRcbiAgaGVpZ2h0OiBudW1iZXIgfCB1bmRlZmluZWRcbiAgc3R5bGU6IE5vbk51bGxhYmxlPEpTWC5JbnRyaW5zaWNFbGVtZW50c1snaW1nJ11bJ3N0eWxlJ10+XG4gIHNpemVzOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgc3JjU2V0OiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgc3JjOiBzdHJpbmdcbn1cblxuY29uc3QgVkFMSURfTE9BRElOR19WQUxVRVMgPSBbJ2xhenknLCAnZWFnZXInLCB1bmRlZmluZWRdIGFzIGNvbnN0XG50eXBlIExvYWRpbmdWYWx1ZSA9ICh0eXBlb2YgVkFMSURfTE9BRElOR19WQUxVRVMpW251bWJlcl1cbnR5cGUgSW1hZ2VDb25maWcgPSBJbWFnZUNvbmZpZ0NvbXBsZXRlICYge1xuICBhbGxTaXplczogbnVtYmVyW11cbiAgb3V0cHV0PzogJ3N0YW5kYWxvbmUnIHwgJ2V4cG9ydCdcbn1cblxuZXhwb3J0IHR5cGUgSW1hZ2VMb2FkZXIgPSAocDogSW1hZ2VMb2FkZXJQcm9wcykgPT4gc3RyaW5nXG5cbi8vIERvIG5vdCBleHBvcnQgLSB0aGlzIGlzIGFuIGludGVybmFsIHR5cGUgb25seVxuLy8gYmVjYXVzZSBgbmV4dC5jb25maWcuanNgIGlzIG9ubHkgbWVhbnQgZm9yIHRoZVxuLy8gYnVpbHQtaW4gbG9hZGVycywgbm90IGZvciBhIGN1c3RvbSBsb2FkZXIoKSBwcm9wLlxudHlwZSBJbWFnZUxvYWRlcldpdGhDb25maWcgPSAocDogSW1hZ2VMb2FkZXJQcm9wc1dpdGhDb25maWcpID0+IHN0cmluZ1xuXG5leHBvcnQgdHlwZSBQbGFjZWhvbGRlclZhbHVlID0gJ2JsdXInIHwgJ2VtcHR5JyB8IGBkYXRhOmltYWdlLyR7c3RyaW5nfWBcbmV4cG9ydCB0eXBlIE9uTG9hZCA9IFJlYWN0LlJlYWN0RXZlbnRIYW5kbGVyPEhUTUxJbWFnZUVsZW1lbnQ+IHwgdW5kZWZpbmVkXG5leHBvcnQgdHlwZSBPbkxvYWRpbmdDb21wbGV0ZSA9IChpbWc6IEhUTUxJbWFnZUVsZW1lbnQpID0+IHZvaWRcblxuZnVuY3Rpb24gaXNTdGF0aWNSZXF1aXJlKFxuICBzcmM6IFN0YXRpY1JlcXVpcmUgfCBTdGF0aWNJbWFnZURhdGFcbik6IHNyYyBpcyBTdGF0aWNSZXF1aXJlIHtcbiAgcmV0dXJuIChzcmMgYXMgU3RhdGljUmVxdWlyZSkuZGVmYXVsdCAhPT0gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGlzU3RhdGljSW1hZ2VEYXRhKFxuICBzcmM6IFN0YXRpY1JlcXVpcmUgfCBTdGF0aWNJbWFnZURhdGFcbik6IHNyYyBpcyBTdGF0aWNJbWFnZURhdGEge1xuICByZXR1cm4gKHNyYyBhcyBTdGF0aWNJbWFnZURhdGEpLnNyYyAhPT0gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGlzU3RhdGljSW1wb3J0KHNyYzogc3RyaW5nIHwgU3RhdGljSW1wb3J0KTogc3JjIGlzIFN0YXRpY0ltcG9ydCB7XG4gIHJldHVybiAoXG4gICAgISFzcmMgJiZcbiAgICB0eXBlb2Ygc3JjID09PSAnb2JqZWN0JyAmJlxuICAgIChpc1N0YXRpY1JlcXVpcmUoc3JjIGFzIFN0YXRpY0ltcG9ydCkgfHxcbiAgICAgIGlzU3RhdGljSW1hZ2VEYXRhKHNyYyBhcyBTdGF0aWNJbXBvcnQpKVxuICApXG59XG5cbmNvbnN0IGFsbEltZ3MgPSBuZXcgTWFwPFxuICBzdHJpbmcsXG4gIHsgc3JjOiBzdHJpbmc7IHByaW9yaXR5OiBib29sZWFuOyBwbGFjZWhvbGRlcjogUGxhY2Vob2xkZXJWYWx1ZSB9XG4+KClcbmxldCBwZXJmT2JzZXJ2ZXI6IFBlcmZvcm1hbmNlT2JzZXJ2ZXIgfCB1bmRlZmluZWRcblxuZnVuY3Rpb24gZ2V0SW50KHg6IHVua25vd24pOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICBpZiAodHlwZW9mIHggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHhcbiAgfVxuICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZSh4KSA/IHggOiBOYU5cbiAgfVxuICBpZiAodHlwZW9mIHggPT09ICdzdHJpbmcnICYmIC9eWzAtOV0rJC8udGVzdCh4KSkge1xuICAgIHJldHVybiBwYXJzZUludCh4LCAxMClcbiAgfVxuICByZXR1cm4gTmFOXG59XG5cbmZ1bmN0aW9uIGdldFdpZHRocyhcbiAgeyBkZXZpY2VTaXplcywgYWxsU2l6ZXMgfTogSW1hZ2VDb25maWcsXG4gIHdpZHRoOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gIHNpemVzOiBzdHJpbmcgfCB1bmRlZmluZWRcbik6IHsgd2lkdGhzOiBudW1iZXJbXTsga2luZDogJ3cnIHwgJ3gnIH0ge1xuICBpZiAoc2l6ZXMpIHtcbiAgICAvLyBGaW5kIGFsbCB0aGUgXCJ2d1wiIHBlcmNlbnQgc2l6ZXMgdXNlZCBpbiB0aGUgc2l6ZXMgcHJvcFxuICAgIGNvbnN0IHZpZXdwb3J0V2lkdGhSZSA9IC8oXnxcXHMpKDE/XFxkP1xcZCl2dy9nXG4gICAgY29uc3QgcGVyY2VudFNpemVzID0gW11cbiAgICBmb3IgKGxldCBtYXRjaDsgKG1hdGNoID0gdmlld3BvcnRXaWR0aFJlLmV4ZWMoc2l6ZXMpKTsgbWF0Y2gpIHtcbiAgICAgIHBlcmNlbnRTaXplcy5wdXNoKHBhcnNlSW50KG1hdGNoWzJdKSlcbiAgICB9XG4gICAgaWYgKHBlcmNlbnRTaXplcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNtYWxsZXN0UmF0aW8gPSBNYXRoLm1pbiguLi5wZXJjZW50U2l6ZXMpICogMC4wMVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGhzOiBhbGxTaXplcy5maWx0ZXIoKHMpID0+IHMgPj0gZGV2aWNlU2l6ZXNbMF0gKiBzbWFsbGVzdFJhdGlvKSxcbiAgICAgICAga2luZDogJ3cnLFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB3aWR0aHM6IGFsbFNpemVzLCBraW5kOiAndycgfVxuICB9XG4gIGlmICh0eXBlb2Ygd2lkdGggIT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHsgd2lkdGhzOiBkZXZpY2VTaXplcywga2luZDogJ3cnIH1cbiAgfVxuXG4gIGNvbnN0IHdpZHRocyA9IFtcbiAgICAuLi5uZXcgU2V0KFxuICAgICAgLy8gPiBUaGlzIG1lYW5zIHRoYXQgbW9zdCBPTEVEIHNjcmVlbnMgdGhhdCBzYXkgdGhleSBhcmUgM3ggcmVzb2x1dGlvbixcbiAgICAgIC8vID4gYXJlIGFjdHVhbGx5IDN4IGluIHRoZSBncmVlbiBjb2xvciwgYnV0IG9ubHkgMS41eCBpbiB0aGUgcmVkIGFuZFxuICAgICAgLy8gPiBibHVlIGNvbG9ycy4gU2hvd2luZyBhIDN4IHJlc29sdXRpb24gaW1hZ2UgaW4gdGhlIGFwcCB2cyBhIDJ4XG4gICAgICAvLyA+IHJlc29sdXRpb24gaW1hZ2Ugd2lsbCBiZSB2aXN1YWxseSB0aGUgc2FtZSwgdGhvdWdoIHRoZSAzeCBpbWFnZVxuICAgICAgLy8gPiB0YWtlcyBzaWduaWZpY2FudGx5IG1vcmUgZGF0YS4gRXZlbiB0cnVlIDN4IHJlc29sdXRpb24gc2NyZWVucyBhcmVcbiAgICAgIC8vID4gd2FzdGVmdWwgYXMgdGhlIGh1bWFuIGV5ZSBjYW5ub3Qgc2VlIHRoYXQgbGV2ZWwgb2YgZGV0YWlsIHdpdGhvdXRcbiAgICAgIC8vID4gc29tZXRoaW5nIGxpa2UgYSBtYWduaWZ5aW5nIGdsYXNzLlxuICAgICAgLy8gaHR0cHM6Ly9ibG9nLnR3aXR0ZXIuY29tL2VuZ2luZWVyaW5nL2VuX3VzL3RvcGljcy9pbmZyYXN0cnVjdHVyZS8yMDE5L2NhcHBpbmctaW1hZ2UtZmlkZWxpdHktb24tdWx0cmEtaGlnaC1yZXNvbHV0aW9uLWRldmljZXMuaHRtbFxuICAgICAgW3dpZHRoLCB3aWR0aCAqIDIgLyosIHdpZHRoICogMyovXS5tYXAoXG4gICAgICAgICh3KSA9PiBhbGxTaXplcy5maW5kKChwKSA9PiBwID49IHcpIHx8IGFsbFNpemVzW2FsbFNpemVzLmxlbmd0aCAtIDFdXG4gICAgICApXG4gICAgKSxcbiAgXVxuICByZXR1cm4geyB3aWR0aHMsIGtpbmQ6ICd4JyB9XG59XG5cbnR5cGUgR2VuSW1nQXR0cnNEYXRhID0ge1xuICBjb25maWc6IEltYWdlQ29uZmlnXG4gIHNyYzogc3RyaW5nXG4gIHVub3B0aW1pemVkOiBib29sZWFuXG4gIGxvYWRlcjogSW1hZ2VMb2FkZXJXaXRoQ29uZmlnXG4gIHdpZHRoPzogbnVtYmVyXG4gIHF1YWxpdHk/OiBudW1iZXJcbiAgc2l6ZXM/OiBzdHJpbmdcbn1cblxudHlwZSBHZW5JbWdBdHRyc1Jlc3VsdCA9IHtcbiAgc3JjOiBzdHJpbmdcbiAgc3JjU2V0OiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgc2l6ZXM6IHN0cmluZyB8IHVuZGVmaW5lZFxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUltZ0F0dHJzKHtcbiAgY29uZmlnLFxuICBzcmMsXG4gIHVub3B0aW1pemVkLFxuICB3aWR0aCxcbiAgcXVhbGl0eSxcbiAgc2l6ZXMsXG4gIGxvYWRlcixcbn06IEdlbkltZ0F0dHJzRGF0YSk6IEdlbkltZ0F0dHJzUmVzdWx0IHtcbiAgaWYgKHVub3B0aW1pemVkKSB7XG4gICAgcmV0dXJuIHsgc3JjLCBzcmNTZXQ6IHVuZGVmaW5lZCwgc2l6ZXM6IHVuZGVmaW5lZCB9XG4gIH1cblxuICBjb25zdCB7IHdpZHRocywga2luZCB9ID0gZ2V0V2lkdGhzKGNvbmZpZywgd2lkdGgsIHNpemVzKVxuICBjb25zdCBsYXN0ID0gd2lkdGhzLmxlbmd0aCAtIDFcblxuICByZXR1cm4ge1xuICAgIHNpemVzOiAhc2l6ZXMgJiYga2luZCA9PT0gJ3cnID8gJzEwMHZ3JyA6IHNpemVzLFxuICAgIHNyY1NldDogd2lkdGhzXG4gICAgICAubWFwKFxuICAgICAgICAodywgaSkgPT5cbiAgICAgICAgICBgJHtsb2FkZXIoeyBjb25maWcsIHNyYywgcXVhbGl0eSwgd2lkdGg6IHcgfSl9ICR7XG4gICAgICAgICAgICBraW5kID09PSAndycgPyB3IDogaSArIDFcbiAgICAgICAgICB9JHtraW5kfWBcbiAgICAgIClcbiAgICAgIC5qb2luKCcsICcpLFxuXG4gICAgLy8gSXQncyBpbnRlbmRlZCB0byBrZWVwIGBzcmNgIHRoZSBsYXN0IGF0dHJpYnV0ZSBiZWNhdXNlIFJlYWN0IHVwZGF0ZXNcbiAgICAvLyBhdHRyaWJ1dGVzIGluIG9yZGVyLiBJZiB3ZSBrZWVwIGBzcmNgIHRoZSBmaXJzdCBvbmUsIFNhZmFyaSB3aWxsXG4gICAgLy8gaW1tZWRpYXRlbHkgc3RhcnQgdG8gZmV0Y2ggYHNyY2AsIGJlZm9yZSBgc2l6ZXNgIGFuZCBgc3JjU2V0YCBhcmUgZXZlblxuICAgIC8vIHVwZGF0ZWQgYnkgUmVhY3QuIFRoYXQgY2F1c2VzIG11bHRpcGxlIHVubmVjZXNzYXJ5IHJlcXVlc3RzIGlmIGBzcmNTZXRgXG4gICAgLy8gYW5kIGBzaXplc2AgYXJlIGRlZmluZWQuXG4gICAgLy8gVGhpcyBidWcgY2Fubm90IGJlIHJlcHJvZHVjZWQgaW4gQ2hyb21lIG9yIEZpcmVmb3guXG4gICAgc3JjOiBsb2FkZXIoeyBjb25maWcsIHNyYywgcXVhbGl0eSwgd2lkdGg6IHdpZHRoc1tsYXN0XSB9KSxcbiAgfVxufVxuXG4vKipcbiAqIEEgc2hhcmVkIGZ1bmN0aW9uLCB1c2VkIG9uIGJvdGggY2xpZW50IGFuZCBzZXJ2ZXIsIHRvIGdlbmVyYXRlIHRoZSBwcm9wcyBmb3IgPGltZz4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbWdQcm9wcyhcbiAge1xuICAgIHNyYyxcbiAgICBzaXplcyxcbiAgICB1bm9wdGltaXplZCA9IGZhbHNlLFxuICAgIHByaW9yaXR5ID0gZmFsc2UsXG4gICAgbG9hZGluZyxcbiAgICBjbGFzc05hbWUsXG4gICAgcXVhbGl0eSxcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgZmlsbCA9IGZhbHNlLFxuICAgIHN0eWxlLFxuICAgIG92ZXJyaWRlU3JjLFxuICAgIG9uTG9hZCxcbiAgICBvbkxvYWRpbmdDb21wbGV0ZSxcbiAgICBwbGFjZWhvbGRlciA9ICdlbXB0eScsXG4gICAgYmx1ckRhdGFVUkwsXG4gICAgZmV0Y2hQcmlvcml0eSxcbiAgICBkZWNvZGluZyA9ICdhc3luYycsXG4gICAgbGF5b3V0LFxuICAgIG9iamVjdEZpdCxcbiAgICBvYmplY3RQb3NpdGlvbixcbiAgICBsYXp5Qm91bmRhcnksXG4gICAgbGF6eVJvb3QsXG4gICAgLi4ucmVzdFxuICB9OiBJbWFnZVByb3BzLFxuICBfc3RhdGU6IHtcbiAgICBkZWZhdWx0TG9hZGVyOiBJbWFnZUxvYWRlcldpdGhDb25maWdcbiAgICBpbWdDb25mOiBJbWFnZUNvbmZpZ0NvbXBsZXRlXG4gICAgc2hvd0FsdFRleHQ/OiBib29sZWFuXG4gICAgYmx1ckNvbXBsZXRlPzogYm9vbGVhblxuICB9XG4pOiB7XG4gIHByb3BzOiBJbWdQcm9wc1xuICBtZXRhOiB7XG4gICAgdW5vcHRpbWl6ZWQ6IGJvb2xlYW5cbiAgICBwcmlvcml0eTogYm9vbGVhblxuICAgIHBsYWNlaG9sZGVyOiBOb25OdWxsYWJsZTxJbWFnZVByb3BzWydwbGFjZWhvbGRlciddPlxuICAgIGZpbGw6IGJvb2xlYW5cbiAgfVxufSB7XG4gIGNvbnN0IHsgaW1nQ29uZiwgc2hvd0FsdFRleHQsIGJsdXJDb21wbGV0ZSwgZGVmYXVsdExvYWRlciB9ID0gX3N0YXRlXG4gIGxldCBjb25maWc6IEltYWdlQ29uZmlnXG4gIGxldCBjID0gaW1nQ29uZiB8fCBpbWFnZUNvbmZpZ0RlZmF1bHRcbiAgaWYgKCdhbGxTaXplcycgaW4gYykge1xuICAgIGNvbmZpZyA9IGMgYXMgSW1hZ2VDb25maWdcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBhbGxTaXplcyA9IFsuLi5jLmRldmljZVNpemVzLCAuLi5jLmltYWdlU2l6ZXNdLnNvcnQoKGEsIGIpID0+IGEgLSBiKVxuICAgIGNvbnN0IGRldmljZVNpemVzID0gYy5kZXZpY2VTaXplcy5zb3J0KChhLCBiKSA9PiBhIC0gYilcbiAgICBjb25zdCBxdWFsaXRpZXMgPSBjLnF1YWxpdGllcz8uc29ydCgoYSwgYikgPT4gYSAtIGIpXG4gICAgY29uZmlnID0geyAuLi5jLCBhbGxTaXplcywgZGV2aWNlU2l6ZXMsIHF1YWxpdGllcyB9XG4gIH1cblxuICBpZiAodHlwZW9mIGRlZmF1bHRMb2FkZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ2ltYWdlcy5sb2FkZXJGaWxlIGRldGVjdGVkIGJ1dCB0aGUgZmlsZSBpcyBtaXNzaW5nIGRlZmF1bHQgZXhwb3J0LlxcblJlYWQgbW9yZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvaW52YWxpZC1pbWFnZXMtY29uZmlnJ1xuICAgIClcbiAgfVxuICBsZXQgbG9hZGVyOiBJbWFnZUxvYWRlcldpdGhDb25maWcgPSByZXN0LmxvYWRlciB8fCBkZWZhdWx0TG9hZGVyXG5cbiAgLy8gUmVtb3ZlIHByb3BlcnR5IHNvIGl0J3Mgbm90IHNwcmVhZCBvbiA8aW1nPiBlbGVtZW50XG4gIGRlbGV0ZSByZXN0LmxvYWRlclxuICBkZWxldGUgKHJlc3QgYXMgYW55KS5zcmNTZXRcblxuICAvLyBUaGlzIHNwZWNpYWwgdmFsdWUgaW5kaWNhdGVzIHRoYXQgdGhlIHVzZXJcbiAgLy8gZGlkbid0IGRlZmluZSBhIFwibG9hZGVyXCIgcHJvcCBvciBcImxvYWRlclwiIGNvbmZpZy5cbiAgY29uc3QgaXNEZWZhdWx0TG9hZGVyID0gJ19fbmV4dF9pbWdfZGVmYXVsdCcgaW4gbG9hZGVyXG5cbiAgaWYgKGlzRGVmYXVsdExvYWRlcikge1xuICAgIGlmIChjb25maWcubG9hZGVyID09PSAnY3VzdG9tJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke3NyY31cIiBpcyBtaXNzaW5nIFwibG9hZGVyXCIgcHJvcC5gICtcbiAgICAgICAgICBgXFxuUmVhZCBtb3JlOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9uZXh0LWltYWdlLW1pc3NpbmctbG9hZGVyYFxuICAgICAgKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBUaGUgdXNlciBkZWZpbmVkIGEgXCJsb2FkZXJcIiBwcm9wIG9yIGNvbmZpZy5cbiAgICAvLyBTaW5jZSB0aGUgY29uZmlnIG9iamVjdCBpcyBpbnRlcm5hbCBvbmx5LCB3ZVxuICAgIC8vIG11c3Qgbm90IHBhc3MgaXQgdG8gdGhlIHVzZXItZGVmaW5lZCBcImxvYWRlclwiLlxuICAgIGNvbnN0IGN1c3RvbUltYWdlTG9hZGVyID0gbG9hZGVyIGFzIEltYWdlTG9hZGVyXG4gICAgbG9hZGVyID0gKG9iaikgPT4ge1xuICAgICAgY29uc3QgeyBjb25maWc6IF8sIC4uLm9wdHMgfSA9IG9ialxuICAgICAgcmV0dXJuIGN1c3RvbUltYWdlTG9hZGVyKG9wdHMpXG4gICAgfVxuICB9XG5cbiAgaWYgKGxheW91dCkge1xuICAgIGlmIChsYXlvdXQgPT09ICdmaWxsJykge1xuICAgICAgZmlsbCA9IHRydWVcbiAgICB9XG4gICAgY29uc3QgbGF5b3V0VG9TdHlsZTogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IHVuZGVmaW5lZD4gPSB7XG4gICAgICBpbnRyaW5zaWM6IHsgbWF4V2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnYXV0bycgfSxcbiAgICAgIHJlc3BvbnNpdmU6IHsgd2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnYXV0bycgfSxcbiAgICB9XG4gICAgY29uc3QgbGF5b3V0VG9TaXplczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPiA9IHtcbiAgICAgIHJlc3BvbnNpdmU6ICcxMDB2dycsXG4gICAgICBmaWxsOiAnMTAwdncnLFxuICAgIH1cbiAgICBjb25zdCBsYXlvdXRTdHlsZSA9IGxheW91dFRvU3R5bGVbbGF5b3V0XVxuICAgIGlmIChsYXlvdXRTdHlsZSkge1xuICAgICAgc3R5bGUgPSB7IC4uLnN0eWxlLCAuLi5sYXlvdXRTdHlsZSB9XG4gICAgfVxuICAgIGNvbnN0IGxheW91dFNpemVzID0gbGF5b3V0VG9TaXplc1tsYXlvdXRdXG4gICAgaWYgKGxheW91dFNpemVzICYmICFzaXplcykge1xuICAgICAgc2l6ZXMgPSBsYXlvdXRTaXplc1xuICAgIH1cbiAgfVxuXG4gIGxldCBzdGF0aWNTcmMgPSAnJ1xuICBsZXQgd2lkdGhJbnQgPSBnZXRJbnQod2lkdGgpXG4gIGxldCBoZWlnaHRJbnQgPSBnZXRJbnQoaGVpZ2h0KVxuICBsZXQgYmx1cldpZHRoOiBudW1iZXIgfCB1bmRlZmluZWRcbiAgbGV0IGJsdXJIZWlnaHQ6IG51bWJlciB8IHVuZGVmaW5lZFxuICBpZiAoaXNTdGF0aWNJbXBvcnQoc3JjKSkge1xuICAgIGNvbnN0IHN0YXRpY0ltYWdlRGF0YSA9IGlzU3RhdGljUmVxdWlyZShzcmMpID8gc3JjLmRlZmF1bHQgOiBzcmNcblxuICAgIGlmICghc3RhdGljSW1hZ2VEYXRhLnNyYykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQW4gb2JqZWN0IHNob3VsZCBvbmx5IGJlIHBhc3NlZCB0byB0aGUgaW1hZ2UgY29tcG9uZW50IHNyYyBwYXJhbWV0ZXIgaWYgaXQgY29tZXMgZnJvbSBhIHN0YXRpYyBpbWFnZSBpbXBvcnQuIEl0IG11c3QgaW5jbHVkZSBzcmMuIFJlY2VpdmVkICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgc3RhdGljSW1hZ2VEYXRhXG4gICAgICAgICl9YFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoIXN0YXRpY0ltYWdlRGF0YS5oZWlnaHQgfHwgIXN0YXRpY0ltYWdlRGF0YS53aWR0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQW4gb2JqZWN0IHNob3VsZCBvbmx5IGJlIHBhc3NlZCB0byB0aGUgaW1hZ2UgY29tcG9uZW50IHNyYyBwYXJhbWV0ZXIgaWYgaXQgY29tZXMgZnJvbSBhIHN0YXRpYyBpbWFnZSBpbXBvcnQuIEl0IG11c3QgaW5jbHVkZSBoZWlnaHQgYW5kIHdpZHRoLiBSZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgIHN0YXRpY0ltYWdlRGF0YVxuICAgICAgICApfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBibHVyV2lkdGggPSBzdGF0aWNJbWFnZURhdGEuYmx1cldpZHRoXG4gICAgYmx1ckhlaWdodCA9IHN0YXRpY0ltYWdlRGF0YS5ibHVySGVpZ2h0XG4gICAgYmx1ckRhdGFVUkwgPSBibHVyRGF0YVVSTCB8fCBzdGF0aWNJbWFnZURhdGEuYmx1ckRhdGFVUkxcbiAgICBzdGF0aWNTcmMgPSBzdGF0aWNJbWFnZURhdGEuc3JjXG5cbiAgICBpZiAoIWZpbGwpIHtcbiAgICAgIGlmICghd2lkdGhJbnQgJiYgIWhlaWdodEludCkge1xuICAgICAgICB3aWR0aEludCA9IHN0YXRpY0ltYWdlRGF0YS53aWR0aFxuICAgICAgICBoZWlnaHRJbnQgPSBzdGF0aWNJbWFnZURhdGEuaGVpZ2h0XG4gICAgICB9IGVsc2UgaWYgKHdpZHRoSW50ICYmICFoZWlnaHRJbnQpIHtcbiAgICAgICAgY29uc3QgcmF0aW8gPSB3aWR0aEludCAvIHN0YXRpY0ltYWdlRGF0YS53aWR0aFxuICAgICAgICBoZWlnaHRJbnQgPSBNYXRoLnJvdW5kKHN0YXRpY0ltYWdlRGF0YS5oZWlnaHQgKiByYXRpbylcbiAgICAgIH0gZWxzZSBpZiAoIXdpZHRoSW50ICYmIGhlaWdodEludCkge1xuICAgICAgICBjb25zdCByYXRpbyA9IGhlaWdodEludCAvIHN0YXRpY0ltYWdlRGF0YS5oZWlnaHRcbiAgICAgICAgd2lkdGhJbnQgPSBNYXRoLnJvdW5kKHN0YXRpY0ltYWdlRGF0YS53aWR0aCAqIHJhdGlvKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBzcmMgPSB0eXBlb2Ygc3JjID09PSAnc3RyaW5nJyA/IHNyYyA6IHN0YXRpY1NyY1xuXG4gIGxldCBpc0xhenkgPVxuICAgICFwcmlvcml0eSAmJiAobG9hZGluZyA9PT0gJ2xhenknIHx8IHR5cGVvZiBsb2FkaW5nID09PSAndW5kZWZpbmVkJylcbiAgaWYgKCFzcmMgfHwgc3JjLnN0YXJ0c1dpdGgoJ2RhdGE6JykgfHwgc3JjLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9IVFRQL0Jhc2ljc19vZl9IVFRQL0RhdGFfVVJJc1xuICAgIHVub3B0aW1pemVkID0gdHJ1ZVxuICAgIGlzTGF6eSA9IGZhbHNlXG4gIH1cbiAgaWYgKGNvbmZpZy51bm9wdGltaXplZCkge1xuICAgIHVub3B0aW1pemVkID0gdHJ1ZVxuICB9XG4gIGlmIChcbiAgICBpc0RlZmF1bHRMb2FkZXIgJiZcbiAgICAhY29uZmlnLmRhbmdlcm91c2x5QWxsb3dTVkcgJiZcbiAgICBzcmMuc3BsaXQoJz8nLCAxKVswXS5lbmRzV2l0aCgnLnN2ZycpXG4gICkge1xuICAgIC8vIFNwZWNpYWwgY2FzZSB0byBtYWtlIHN2ZyBzZXJ2ZSBhcy1pcyB0byBhdm9pZCBwcm94eWluZ1xuICAgIC8vIHRocm91Z2ggdGhlIGJ1aWx0LWluIEltYWdlIE9wdGltaXphdGlvbiBBUEkuXG4gICAgdW5vcHRpbWl6ZWQgPSB0cnVlXG4gIH1cblxuICBjb25zdCBxdWFsaXR5SW50ID0gZ2V0SW50KHF1YWxpdHkpXG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoY29uZmlnLm91dHB1dCA9PT0gJ2V4cG9ydCcgJiYgaXNEZWZhdWx0TG9hZGVyICYmICF1bm9wdGltaXplZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW1hZ2UgT3B0aW1pemF0aW9uIHVzaW5nIHRoZSBkZWZhdWx0IGxvYWRlciBpcyBub3QgY29tcGF0aWJsZSB3aXRoIFxcYHsgb3V0cHV0OiAnZXhwb3J0JyB9XFxgLlxuICBQb3NzaWJsZSBzb2x1dGlvbnM6XG4gICAgLSBSZW1vdmUgXFxgeyBvdXRwdXQ6ICdleHBvcnQnIH1cXGAgYW5kIHJ1biBcIm5leHQgc3RhcnRcIiB0byBydW4gc2VydmVyIG1vZGUgaW5jbHVkaW5nIHRoZSBJbWFnZSBPcHRpbWl6YXRpb24gQVBJLlxuICAgIC0gQ29uZmlndXJlIFxcYHsgaW1hZ2VzOiB7IHVub3B0aW1pemVkOiB0cnVlIH0gfVxcYCBpbiBcXGBuZXh0LmNvbmZpZy5qc1xcYCB0byBkaXNhYmxlIHRoZSBJbWFnZSBPcHRpbWl6YXRpb24gQVBJLlxuICBSZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2V4cG9ydC1pbWFnZS1hcGlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICghc3JjKSB7XG4gICAgICAvLyBSZWFjdCBkb2Vzbid0IHNob3cgdGhlIHN0YWNrIHRyYWNlIGFuZCB0aGVyZSdzXG4gICAgICAvLyBubyBgc3JjYCB0byBoZWxwIGlkZW50aWZ5IHdoaWNoIGltYWdlLCBzbyB3ZVxuICAgICAgLy8gaW5zdGVhZCBjb25zb2xlLmVycm9yKHJlZikgZHVyaW5nIG1vdW50LlxuICAgICAgdW5vcHRpbWl6ZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChmaWxsKSB7XG4gICAgICAgIGlmICh3aWR0aCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBJbWFnZSB3aXRoIHNyYyBcIiR7c3JjfVwiIGhhcyBib3RoIFwid2lkdGhcIiBhbmQgXCJmaWxsXCIgcHJvcGVydGllcy4gT25seSBvbmUgc2hvdWxkIGJlIHVzZWQuYFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVpZ2h0KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtzcmN9XCIgaGFzIGJvdGggXCJoZWlnaHRcIiBhbmQgXCJmaWxsXCIgcHJvcGVydGllcy4gT25seSBvbmUgc2hvdWxkIGJlIHVzZWQuYFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3R5bGU/LnBvc2l0aW9uICYmIHN0eWxlLnBvc2l0aW9uICE9PSAnYWJzb2x1dGUnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtzcmN9XCIgaGFzIGJvdGggXCJmaWxsXCIgYW5kIFwic3R5bGUucG9zaXRpb25cIiBwcm9wZXJ0aWVzLiBJbWFnZXMgd2l0aCBcImZpbGxcIiBhbHdheXMgdXNlIHBvc2l0aW9uIGFic29sdXRlIC0gaXQgY2Fubm90IGJlIG1vZGlmaWVkLmBcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0eWxlPy53aWR0aCAmJiBzdHlsZS53aWR0aCAhPT0gJzEwMCUnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtzcmN9XCIgaGFzIGJvdGggXCJmaWxsXCIgYW5kIFwic3R5bGUud2lkdGhcIiBwcm9wZXJ0aWVzLiBJbWFnZXMgd2l0aCBcImZpbGxcIiBhbHdheXMgdXNlIHdpZHRoIDEwMCUgLSBpdCBjYW5ub3QgYmUgbW9kaWZpZWQuYFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3R5bGU/LmhlaWdodCAmJiBzdHlsZS5oZWlnaHQgIT09ICcxMDAlJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBJbWFnZSB3aXRoIHNyYyBcIiR7c3JjfVwiIGhhcyBib3RoIFwiZmlsbFwiIGFuZCBcInN0eWxlLmhlaWdodFwiIHByb3BlcnRpZXMuIEltYWdlcyB3aXRoIFwiZmlsbFwiIGFsd2F5cyB1c2UgaGVpZ2h0IDEwMCUgLSBpdCBjYW5ub3QgYmUgbW9kaWZpZWQuYFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aWR0aEludCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke3NyY31cIiBpcyBtaXNzaW5nIHJlcXVpcmVkIFwid2lkdGhcIiBwcm9wZXJ0eS5gXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2UgaWYgKGlzTmFOKHdpZHRoSW50KSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBJbWFnZSB3aXRoIHNyYyBcIiR7c3JjfVwiIGhhcyBpbnZhbGlkIFwid2lkdGhcIiBwcm9wZXJ0eS4gRXhwZWN0ZWQgYSBudW1lcmljIHZhbHVlIGluIHBpeGVscyBidXQgcmVjZWl2ZWQgXCIke3dpZHRofVwiLmBcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBoZWlnaHRJbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtzcmN9XCIgaXMgbWlzc2luZyByZXF1aXJlZCBcImhlaWdodFwiIHByb3BlcnR5LmBcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSBpZiAoaXNOYU4oaGVpZ2h0SW50KSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBJbWFnZSB3aXRoIHNyYyBcIiR7c3JjfVwiIGhhcyBpbnZhbGlkIFwiaGVpZ2h0XCIgcHJvcGVydHkuIEV4cGVjdGVkIGEgbnVtZXJpYyB2YWx1ZSBpbiBwaXhlbHMgYnV0IHJlY2VpdmVkIFwiJHtoZWlnaHR9XCIuYFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgICAgICBpZiAoL15bXFx4MDAtXFx4MjBdLy50ZXN0KHNyYykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke3NyY31cIiBjYW5ub3Qgc3RhcnQgd2l0aCBhIHNwYWNlIG9yIGNvbnRyb2wgY2hhcmFjdGVyLiBVc2Ugc3JjLnRyaW1TdGFydCgpIHRvIHJlbW92ZSBpdCBvciBlbmNvZGVVUklDb21wb25lbnQoc3JjKSB0byBrZWVwIGl0LmBcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgICAgaWYgKC9bXFx4MDAtXFx4MjBdJC8udGVzdChzcmMpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtzcmN9XCIgY2Fubm90IGVuZCB3aXRoIGEgc3BhY2Ugb3IgY29udHJvbCBjaGFyYWN0ZXIuIFVzZSBzcmMudHJpbUVuZCgpIHRvIHJlbW92ZSBpdCBvciBlbmNvZGVVUklDb21wb25lbnQoc3JjKSB0byBrZWVwIGl0LmBcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFWQUxJRF9MT0FESU5HX1ZBTFVFUy5pbmNsdWRlcyhsb2FkaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke3NyY31cIiBoYXMgaW52YWxpZCBcImxvYWRpbmdcIiBwcm9wZXJ0eS4gUHJvdmlkZWQgXCIke2xvYWRpbmd9XCIgc2hvdWxkIGJlIG9uZSBvZiAke1ZBTElEX0xPQURJTkdfVkFMVUVTLm1hcChcbiAgICAgICAgICBTdHJpbmdcbiAgICAgICAgKS5qb2luKCcsJyl9LmBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHByaW9yaXR5ICYmIGxvYWRpbmcgPT09ICdsYXp5Jykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke3NyY31cIiBoYXMgYm90aCBcInByaW9yaXR5XCIgYW5kIFwibG9hZGluZz0nbGF6eSdcIiBwcm9wZXJ0aWVzLiBPbmx5IG9uZSBzaG91bGQgYmUgdXNlZC5gXG4gICAgICApXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHBsYWNlaG9sZGVyICE9PSAnZW1wdHknICYmXG4gICAgICBwbGFjZWhvbGRlciAhPT0gJ2JsdXInICYmXG4gICAgICAhcGxhY2Vob2xkZXIuc3RhcnRzV2l0aCgnZGF0YTppbWFnZS8nKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke3NyY31cIiBoYXMgaW52YWxpZCBcInBsYWNlaG9sZGVyXCIgcHJvcGVydHkgXCIke3BsYWNlaG9sZGVyfVwiLmBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHBsYWNlaG9sZGVyICE9PSAnZW1wdHknKSB7XG4gICAgICBpZiAod2lkdGhJbnQgJiYgaGVpZ2h0SW50ICYmIHdpZHRoSW50ICogaGVpZ2h0SW50IDwgMTYwMCkge1xuICAgICAgICB3YXJuT25jZShcbiAgICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke3NyY31cIiBpcyBzbWFsbGVyIHRoYW4gNDB4NDAuIENvbnNpZGVyIHJlbW92aW5nIHRoZSBcInBsYWNlaG9sZGVyXCIgcHJvcGVydHkgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZS5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBsYWNlaG9sZGVyID09PSAnYmx1cicgJiYgIWJsdXJEYXRhVVJMKSB7XG4gICAgICBjb25zdCBWQUxJRF9CTFVSX0VYVCA9IFsnanBlZycsICdwbmcnLCAnd2VicCcsICdhdmlmJ10gLy8gc2hvdWxkIG1hdGNoIG5leHQtaW1hZ2UtbG9hZGVyXG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtzcmN9XCIgaGFzIFwicGxhY2Vob2xkZXI9J2JsdXInXCIgcHJvcGVydHkgYnV0IGlzIG1pc3NpbmcgdGhlIFwiYmx1ckRhdGFVUkxcIiBwcm9wZXJ0eS5cbiAgICAgICAgUG9zc2libGUgc29sdXRpb25zOlxuICAgICAgICAgIC0gQWRkIGEgXCJibHVyRGF0YVVSTFwiIHByb3BlcnR5LCB0aGUgY29udGVudHMgc2hvdWxkIGJlIGEgc21hbGwgRGF0YSBVUkwgdG8gcmVwcmVzZW50IHRoZSBpbWFnZVxuICAgICAgICAgIC0gQ2hhbmdlIHRoZSBcInNyY1wiIHByb3BlcnR5IHRvIGEgc3RhdGljIGltcG9ydCB3aXRoIG9uZSBvZiB0aGUgc3VwcG9ydGVkIGZpbGUgdHlwZXM6ICR7VkFMSURfQkxVUl9FWFQuam9pbihcbiAgICAgICAgICAgICcsJ1xuICAgICAgICAgICl9IChhbmltYXRlZCBpbWFnZXMgbm90IHN1cHBvcnRlZClcbiAgICAgICAgICAtIFJlbW92ZSB0aGUgXCJwbGFjZWhvbGRlclwiIHByb3BlcnR5LCBlZmZlY3RpdmVseSBubyBibHVyIGVmZmVjdFxuICAgICAgICBSZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL3BsYWNlaG9sZGVyLWJsdXItZGF0YS11cmxgXG4gICAgICApXG4gICAgfVxuICAgIGlmICgncmVmJyBpbiByZXN0KSB7XG4gICAgICB3YXJuT25jZShcbiAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtzcmN9XCIgaXMgdXNpbmcgdW5zdXBwb3J0ZWQgXCJyZWZcIiBwcm9wZXJ0eS4gQ29uc2lkZXIgdXNpbmcgdGhlIFwib25Mb2FkXCIgcHJvcGVydHkgaW5zdGVhZC5gXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKCF1bm9wdGltaXplZCAmJiAhaXNEZWZhdWx0TG9hZGVyKSB7XG4gICAgICBjb25zdCB1cmxTdHIgPSBsb2FkZXIoe1xuICAgICAgICBjb25maWcsXG4gICAgICAgIHNyYyxcbiAgICAgICAgd2lkdGg6IHdpZHRoSW50IHx8IDQwMCxcbiAgICAgICAgcXVhbGl0eTogcXVhbGl0eUludCB8fCA3NSxcbiAgICAgIH0pXG4gICAgICBsZXQgdXJsOiBVUkwgfCB1bmRlZmluZWRcbiAgICAgIHRyeSB7XG4gICAgICAgIHVybCA9IG5ldyBVUkwodXJsU3RyKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgaWYgKHVybFN0ciA9PT0gc3JjIHx8ICh1cmwgJiYgdXJsLnBhdGhuYW1lID09PSBzcmMgJiYgIXVybC5zZWFyY2gpKSB7XG4gICAgICAgIHdhcm5PbmNlKFxuICAgICAgICAgIGBJbWFnZSB3aXRoIHNyYyBcIiR7c3JjfVwiIGhhcyBhIFwibG9hZGVyXCIgcHJvcGVydHkgdGhhdCBkb2VzIG5vdCBpbXBsZW1lbnQgd2lkdGguIFBsZWFzZSBpbXBsZW1lbnQgaXQgb3IgdXNlIHRoZSBcInVub3B0aW1pemVkXCIgcHJvcGVydHkgaW5zdGVhZC5gICtcbiAgICAgICAgICAgIGBcXG5SZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL25leHQtaW1hZ2UtbWlzc2luZy1sb2FkZXItd2lkdGhgXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob25Mb2FkaW5nQ29tcGxldGUpIHtcbiAgICAgIHdhcm5PbmNlKFxuICAgICAgICBgSW1hZ2Ugd2l0aCBzcmMgXCIke3NyY31cIiBpcyB1c2luZyBkZXByZWNhdGVkIFwib25Mb2FkaW5nQ29tcGxldGVcIiBwcm9wZXJ0eS4gUGxlYXNlIHVzZSB0aGUgXCJvbkxvYWRcIiBwcm9wZXJ0eSBpbnN0ZWFkLmBcbiAgICAgIClcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtsZWdhY3lLZXksIGxlZ2FjeVZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh7XG4gICAgICBsYXlvdXQsXG4gICAgICBvYmplY3RGaXQsXG4gICAgICBvYmplY3RQb3NpdGlvbixcbiAgICAgIGxhenlCb3VuZGFyeSxcbiAgICAgIGxhenlSb290LFxuICAgIH0pKSB7XG4gICAgICBpZiAobGVnYWN5VmFsdWUpIHtcbiAgICAgICAgd2Fybk9uY2UoXG4gICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtzcmN9XCIgaGFzIGxlZ2FjeSBwcm9wIFwiJHtsZWdhY3lLZXl9XCIuIERpZCB5b3UgZm9yZ2V0IHRvIHJ1biB0aGUgY29kZW1vZD9gICtcbiAgICAgICAgICAgIGBcXG5SZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL25leHQtaW1hZ2UtdXBncmFkZS10by0xM2BcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAhcGVyZk9ic2VydmVyICYmXG4gICAgICB3aW5kb3cuUGVyZm9ybWFuY2VPYnNlcnZlclxuICAgICkge1xuICAgICAgcGVyZk9ic2VydmVyID0gbmV3IFBlcmZvcm1hbmNlT2JzZXJ2ZXIoKGVudHJ5TGlzdCkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJ5TGlzdC5nZXRFbnRyaWVzKCkpIHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlIC0gbWlzc2luZyBcIkxhcmdlc3RDb250ZW50ZnVsUGFpbnRcIiBjbGFzcyB3aXRoIFwiZWxlbWVudFwiIHByb3BcbiAgICAgICAgICBjb25zdCBpbWdTcmMgPSBlbnRyeT8uZWxlbWVudD8uc3JjIHx8ICcnXG4gICAgICAgICAgY29uc3QgbGNwSW1hZ2UgPSBhbGxJbWdzLmdldChpbWdTcmMpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbGNwSW1hZ2UgJiZcbiAgICAgICAgICAgICFsY3BJbWFnZS5wcmlvcml0eSAmJlxuICAgICAgICAgICAgbGNwSW1hZ2UucGxhY2Vob2xkZXIgPT09ICdlbXB0eScgJiZcbiAgICAgICAgICAgICFsY3BJbWFnZS5zcmMuc3RhcnRzV2l0aCgnZGF0YTonKSAmJlxuICAgICAgICAgICAgIWxjcEltYWdlLnNyYy5zdGFydHNXaXRoKCdibG9iOicpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBodHRwczovL3dlYi5kZXYvbGNwLyNtZWFzdXJlLWxjcC1pbi1qYXZhc2NyaXB0XG4gICAgICAgICAgICB3YXJuT25jZShcbiAgICAgICAgICAgICAgYEltYWdlIHdpdGggc3JjIFwiJHtsY3BJbWFnZS5zcmN9XCIgd2FzIGRldGVjdGVkIGFzIHRoZSBMYXJnZXN0IENvbnRlbnRmdWwgUGFpbnQgKExDUCkuIFBsZWFzZSBhZGQgdGhlIFwicHJpb3JpdHlcIiBwcm9wZXJ0eSBpZiB0aGlzIGltYWdlIGlzIGFib3ZlIHRoZSBmb2xkLmAgK1xuICAgICAgICAgICAgICAgIGBcXG5SZWFkIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNwcmlvcml0eWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICB0cnkge1xuICAgICAgICBwZXJmT2JzZXJ2ZXIub2JzZXJ2ZSh7XG4gICAgICAgICAgdHlwZTogJ2xhcmdlc3QtY29udGVudGZ1bC1wYWludCcsXG4gICAgICAgICAgYnVmZmVyZWQ6IHRydWUsXG4gICAgICAgIH0pXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gTG9nIGVycm9yIGJ1dCBkb24ndCBjcmFzaCB0aGUgYXBwXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBpbWdTdHlsZSA9IE9iamVjdC5hc3NpZ24oXG4gICAgZmlsbFxuICAgICAgPyB7XG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgICAgb2JqZWN0Rml0LFxuICAgICAgICAgIG9iamVjdFBvc2l0aW9uLFxuICAgICAgICB9XG4gICAgICA6IHt9LFxuICAgIHNob3dBbHRUZXh0ID8ge30gOiB7IGNvbG9yOiAndHJhbnNwYXJlbnQnIH0sXG4gICAgc3R5bGVcbiAgKVxuXG4gIGNvbnN0IGJhY2tncm91bmRJbWFnZSA9XG4gICAgIWJsdXJDb21wbGV0ZSAmJiBwbGFjZWhvbGRlciAhPT0gJ2VtcHR5J1xuICAgICAgPyBwbGFjZWhvbGRlciA9PT0gJ2JsdXInXG4gICAgICAgID8gYHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCR7Z2V0SW1hZ2VCbHVyU3ZnKHtcbiAgICAgICAgICAgIHdpZHRoSW50LFxuICAgICAgICAgICAgaGVpZ2h0SW50LFxuICAgICAgICAgICAgYmx1cldpZHRoLFxuICAgICAgICAgICAgYmx1ckhlaWdodCxcbiAgICAgICAgICAgIGJsdXJEYXRhVVJMOiBibHVyRGF0YVVSTCB8fCAnJywgLy8gYXNzdW1lIG5vdCB1bmRlZmluZWRcbiAgICAgICAgICAgIG9iamVjdEZpdDogaW1nU3R5bGUub2JqZWN0Rml0LFxuICAgICAgICAgIH0pfVwiKWBcbiAgICAgICAgOiBgdXJsKFwiJHtwbGFjZWhvbGRlcn1cIilgIC8vIGFzc3VtZSBgZGF0YTppbWFnZS9gXG4gICAgICA6IG51bGxcblxuICBsZXQgcGxhY2Vob2xkZXJTdHlsZSA9IGJhY2tncm91bmRJbWFnZVxuICAgID8ge1xuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogaW1nU3R5bGUub2JqZWN0Rml0IHx8ICdjb3ZlcicsXG4gICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogaW1nU3R5bGUub2JqZWN0UG9zaXRpb24gfHwgJzUwJSA1MCUnLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JyxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlLFxuICAgICAgfVxuICAgIDoge31cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICBpZiAoXG4gICAgICBwbGFjZWhvbGRlclN0eWxlLmJhY2tncm91bmRJbWFnZSAmJlxuICAgICAgcGxhY2Vob2xkZXIgPT09ICdibHVyJyAmJlxuICAgICAgYmx1ckRhdGFVUkw/LnN0YXJ0c1dpdGgoJy8nKVxuICAgICkge1xuICAgICAgLy8gRHVyaW5nIGBuZXh0IGRldmAsIHdlIGRvbid0IHdhbnQgdG8gZ2VuZXJhdGUgYmx1ciBwbGFjZWhvbGRlcnMgd2l0aCB3ZWJwYWNrXG4gICAgICAvLyBiZWNhdXNlIGl0IGNhbiBkZWxheSBzdGFydGluZyB0aGUgZGV2IHNlcnZlci4gSW5zdGVhZCwgYG5leHQtaW1hZ2UtbG9hZGVyLmpzYFxuICAgICAgLy8gd2lsbCBpbmxpbmUgYSBzcGVjaWFsIHVybCB0byBsYXppbHkgZ2VuZXJhdGUgdGhlIGJsdXIgcGxhY2Vob2xkZXIgYXQgcmVxdWVzdCB0aW1lLlxuICAgICAgcGxhY2Vob2xkZXJTdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtibHVyRGF0YVVSTH1cIilgXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaW1nQXR0cmlidXRlcyA9IGdlbmVyYXRlSW1nQXR0cnMoe1xuICAgIGNvbmZpZyxcbiAgICBzcmMsXG4gICAgdW5vcHRpbWl6ZWQsXG4gICAgd2lkdGg6IHdpZHRoSW50LFxuICAgIHF1YWxpdHk6IHF1YWxpdHlJbnQsXG4gICAgc2l6ZXMsXG4gICAgbG9hZGVyLFxuICB9KVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsZXQgZnVsbFVybDogVVJMXG4gICAgICB0cnkge1xuICAgICAgICBmdWxsVXJsID0gbmV3IFVSTChpbWdBdHRyaWJ1dGVzLnNyYylcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZnVsbFVybCA9IG5ldyBVUkwoaW1nQXR0cmlidXRlcy5zcmMsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgICAgfVxuICAgICAgYWxsSW1ncy5zZXQoZnVsbFVybC5ocmVmLCB7IHNyYywgcHJpb3JpdHksIHBsYWNlaG9sZGVyIH0pXG4gICAgfVxuICB9XG5cbiAgY29uc3QgcHJvcHM6IEltZ1Byb3BzID0ge1xuICAgIC4uLnJlc3QsXG4gICAgbG9hZGluZzogaXNMYXp5ID8gJ2xhenknIDogbG9hZGluZyxcbiAgICBmZXRjaFByaW9yaXR5LFxuICAgIHdpZHRoOiB3aWR0aEludCxcbiAgICBoZWlnaHQ6IGhlaWdodEludCxcbiAgICBkZWNvZGluZyxcbiAgICBjbGFzc05hbWUsXG4gICAgc3R5bGU6IHsgLi4uaW1nU3R5bGUsIC4uLnBsYWNlaG9sZGVyU3R5bGUgfSxcbiAgICBzaXplczogaW1nQXR0cmlidXRlcy5zaXplcyxcbiAgICBzcmNTZXQ6IGltZ0F0dHJpYnV0ZXMuc3JjU2V0LFxuICAgIHNyYzogb3ZlcnJpZGVTcmMgfHwgaW1nQXR0cmlidXRlcy5zcmMsXG4gIH1cbiAgY29uc3QgbWV0YSA9IHsgdW5vcHRpbWl6ZWQsIHByaW9yaXR5LCBwbGFjZWhvbGRlciwgZmlsbCB9XG4gIHJldHVybiB7IHByb3BzLCBtZXRhIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRJbWdQcm9wcyIsIlZBTElEX0xPQURJTkdfVkFMVUVTIiwidW5kZWZpbmVkIiwiaXNTdGF0aWNSZXF1aXJlIiwic3JjIiwiZGVmYXVsdCIsImlzU3RhdGljSW1hZ2VEYXRhIiwiaXNTdGF0aWNJbXBvcnQiLCJhbGxJbWdzIiwiTWFwIiwicGVyZk9ic2VydmVyIiwiZ2V0SW50IiwieCIsIk51bWJlciIsImlzRmluaXRlIiwiTmFOIiwidGVzdCIsInBhcnNlSW50IiwiZ2V0V2lkdGhzIiwid2lkdGgiLCJzaXplcyIsImRldmljZVNpemVzIiwiYWxsU2l6ZXMiLCJ2aWV3cG9ydFdpZHRoUmUiLCJwZXJjZW50U2l6ZXMiLCJtYXRjaCIsImV4ZWMiLCJwdXNoIiwibGVuZ3RoIiwic21hbGxlc3RSYXRpbyIsIk1hdGgiLCJtaW4iLCJ3aWR0aHMiLCJmaWx0ZXIiLCJzIiwia2luZCIsIlNldCIsIm1hcCIsInciLCJmaW5kIiwicCIsImdlbmVyYXRlSW1nQXR0cnMiLCJjb25maWciLCJ1bm9wdGltaXplZCIsInF1YWxpdHkiLCJsb2FkZXIiLCJzcmNTZXQiLCJsYXN0IiwiaSIsImpvaW4iLCJfc3RhdGUiLCJwcmlvcml0eSIsImxvYWRpbmciLCJjbGFzc05hbWUiLCJoZWlnaHQiLCJmaWxsIiwic3R5bGUiLCJvdmVycmlkZVNyYyIsIm9uTG9hZCIsIm9uTG9hZGluZ0NvbXBsZXRlIiwicGxhY2Vob2xkZXIiLCJibHVyRGF0YVVSTCIsImZldGNoUHJpb3JpdHkiLCJkZWNvZGluZyIsImxheW91dCIsIm9iamVjdEZpdCIsIm9iamVjdFBvc2l0aW9uIiwibGF6eUJvdW5kYXJ5IiwibGF6eVJvb3QiLCJyZXN0IiwiaW1nQ29uZiIsInNob3dBbHRUZXh0IiwiYmx1ckNvbXBsZXRlIiwiZGVmYXVsdExvYWRlciIsImMiLCJpbWFnZUNvbmZpZ0RlZmF1bHQiLCJpbWFnZVNpemVzIiwic29ydCIsImEiLCJiIiwicXVhbGl0aWVzIiwiRXJyb3IiLCJpc0RlZmF1bHRMb2FkZXIiLCJjdXN0b21JbWFnZUxvYWRlciIsIm9iaiIsIl8iLCJvcHRzIiwibGF5b3V0VG9TdHlsZSIsImludHJpbnNpYyIsIm1heFdpZHRoIiwicmVzcG9uc2l2ZSIsImxheW91dFRvU2l6ZXMiLCJsYXlvdXRTdHlsZSIsImxheW91dFNpemVzIiwic3RhdGljU3JjIiwid2lkdGhJbnQiLCJoZWlnaHRJbnQiLCJibHVyV2lkdGgiLCJibHVySGVpZ2h0Iiwic3RhdGljSW1hZ2VEYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInJhdGlvIiwicm91bmQiLCJpc0xhenkiLCJzdGFydHNXaXRoIiwiZGFuZ2Vyb3VzbHlBbGxvd1NWRyIsInNwbGl0IiwiZW5kc1dpdGgiLCJxdWFsaXR5SW50IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwib3V0cHV0IiwicG9zaXRpb24iLCJpc05hTiIsImluY2x1ZGVzIiwiU3RyaW5nIiwid2Fybk9uY2UiLCJWQUxJRF9CTFVSX0VYVCIsInVybFN0ciIsInVybCIsIlVSTCIsImVyciIsInBhdGhuYW1lIiwic2VhcmNoIiwibGVnYWN5S2V5IiwibGVnYWN5VmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwid2luZG93IiwiUGVyZm9ybWFuY2VPYnNlcnZlciIsImVudHJ5TGlzdCIsImVudHJ5IiwiZ2V0RW50cmllcyIsImltZ1NyYyIsImVsZW1lbnQiLCJsY3BJbWFnZSIsImdldCIsIm9ic2VydmUiLCJ0eXBlIiwiYnVmZmVyZWQiLCJjb25zb2xlIiwiZXJyb3IiLCJpbWdTdHlsZSIsImFzc2lnbiIsImxlZnQiLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImNvbG9yIiwiYmFja2dyb3VuZEltYWdlIiwiZ2V0SW1hZ2VCbHVyU3ZnIiwicGxhY2Vob2xkZXJTdHlsZSIsImJhY2tncm91bmRTaXplIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwiYmFja2dyb3VuZFJlcGVhdCIsImltZ0F0dHJpYnV0ZXMiLCJmdWxsVXJsIiwiZSIsImxvY2F0aW9uIiwiaHJlZiIsInNldCIsInByb3BzIiwibWV0YSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/get-img-props.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/head.js":
/*!***************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/head.js ***!
  \***************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/* __next_internal_client_entry_do_not_use__  cjs */ \nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    default: function() {\n        return _default;\n    },\n    defaultHead: function() {\n        return defaultHead;\n    }\n});\nconst _interop_require_default = __webpack_require__(/*! @swc/helpers/_/_interop_require_default */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_interop_require_default.js\");\nconst _interop_require_wildcard = __webpack_require__(/*! @swc/helpers/_/_interop_require_wildcard */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_interop_require_wildcard.js\");\nconst _jsxruntime = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\nconst _react = /*#__PURE__*/ _interop_require_wildcard._(__webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"));\nconst _sideeffect = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! ./side-effect */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/side-effect.js\"));\nconst _ampcontextsharedruntime = __webpack_require__(/*! ./amp-context.shared-runtime */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/amp-context.shared-runtime.js\");\nconst _headmanagercontextsharedruntime = __webpack_require__(/*! ./head-manager-context.shared-runtime */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/head-manager-context.shared-runtime.js\");\nconst _ampmode = __webpack_require__(/*! ./amp-mode */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/amp-mode.js\");\nconst _warnonce = __webpack_require__(/*! ./utils/warn-once */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js\");\nfunction defaultHead(inAmpMode) {\n    if (inAmpMode === void 0) inAmpMode = false;\n    const head = [\n        /*#__PURE__*/ (0, _jsxruntime.jsx)(\"meta\", {\n            charSet: \"utf-8\"\n        }, \"charset\")\n    ];\n    if (!inAmpMode) {\n        head.push(/*#__PURE__*/ (0, _jsxruntime.jsx)(\"meta\", {\n            name: \"viewport\",\n            content: \"width=device-width\"\n        }, \"viewport\"));\n    }\n    return head;\n}\nfunction onlyReactElement(list, child) {\n    // React children can be \"string\" or \"number\" in this case we ignore them for backwards compat\n    if (typeof child === 'string' || typeof child === 'number') {\n        return list;\n    }\n    // Adds support for React.Fragment\n    if (child.type === _react.default.Fragment) {\n        return list.concat(_react.default.Children.toArray(child.props.children).reduce((fragmentList, fragmentChild)=>{\n            if (typeof fragmentChild === 'string' || typeof fragmentChild === 'number') {\n                return fragmentList;\n            }\n            return fragmentList.concat(fragmentChild);\n        }, []));\n    }\n    return list.concat(child);\n}\nconst METATYPES = [\n    'name',\n    'httpEquiv',\n    'charSet',\n    'itemProp'\n];\n/*\n returns a function for filtering head child elements\n which shouldn't be duplicated, like <title/>\n Also adds support for deduplicated `key` properties\n*/ function unique() {\n    const keys = new Set();\n    const tags = new Set();\n    const metaTypes = new Set();\n    const metaCategories = {};\n    return (h)=>{\n        let isUnique = true;\n        let hasKey = false;\n        if (h.key && typeof h.key !== 'number' && h.key.indexOf('$') > 0) {\n            hasKey = true;\n            const key = h.key.slice(h.key.indexOf('$') + 1);\n            if (keys.has(key)) {\n                isUnique = false;\n            } else {\n                keys.add(key);\n            }\n        }\n        // eslint-disable-next-line default-case\n        switch(h.type){\n            case 'title':\n            case 'base':\n                if (tags.has(h.type)) {\n                    isUnique = false;\n                } else {\n                    tags.add(h.type);\n                }\n                break;\n            case 'meta':\n                for(let i = 0, len = METATYPES.length; i < len; i++){\n                    const metatype = METATYPES[i];\n                    if (!h.props.hasOwnProperty(metatype)) continue;\n                    if (metatype === 'charSet') {\n                        if (metaTypes.has(metatype)) {\n                            isUnique = false;\n                        } else {\n                            metaTypes.add(metatype);\n                        }\n                    } else {\n                        const category = h.props[metatype];\n                        const categories = metaCategories[metatype] || new Set();\n                        if ((metatype !== 'name' || !hasKey) && categories.has(category)) {\n                            isUnique = false;\n                        } else {\n                            categories.add(category);\n                            metaCategories[metatype] = categories;\n                        }\n                    }\n                }\n                break;\n        }\n        return isUnique;\n    };\n}\n/**\n *\n * @param headChildrenElements List of children of <Head>\n */ function reduceComponents(headChildrenElements, props) {\n    const { inAmpMode } = props;\n    return headChildrenElements.reduce(onlyReactElement, []).reverse().concat(defaultHead(inAmpMode).reverse()).filter(unique()).reverse().map((c, i)=>{\n        const key = c.key || i;\n        if (false) {}\n        if (true) {\n            // omit JSON-LD structured data snippets from the warning\n            if (c.type === 'script' && c.props['type'] !== 'application/ld+json') {\n                const srcMessage = c.props['src'] ? '<script> tag with src=\"' + c.props['src'] + '\"' : \"inline <script>\";\n                (0, _warnonce.warnOnce)(\"Do not add <script> tags using next/head (see \" + srcMessage + \"). Use next/script instead. \\nSee more info here: https://nextjs.org/docs/messages/no-script-tags-in-head-component\");\n            } else if (c.type === 'link' && c.props['rel'] === 'stylesheet') {\n                (0, _warnonce.warnOnce)('Do not add stylesheets using next/head (see <link rel=\"stylesheet\"> tag with href=\"' + c.props['href'] + '\"). Use Document instead. \\nSee more info here: https://nextjs.org/docs/messages/no-stylesheets-in-head-component');\n            }\n        }\n        return /*#__PURE__*/ _react.default.cloneElement(c, {\n            key\n        });\n    });\n}\n/**\n * This component injects elements to `<head>` of your page.\n * To avoid duplicated `tags` in `<head>` you can use the `key` property, which will make sure every tag is only rendered once.\n */ function Head(param) {\n    let { children } = param;\n    const ampState = (0, _react.useContext)(_ampcontextsharedruntime.AmpStateContext);\n    const headManager = (0, _react.useContext)(_headmanagercontextsharedruntime.HeadManagerContext);\n    return /*#__PURE__*/ (0, _jsxruntime.jsx)(_sideeffect.default, {\n        reduceComponentsToState: reduceComponents,\n        headManager: headManager,\n        inAmpMode: (0, _ampmode.isInAmpMode)(ampState),\n        children: children\n    });\n}\n_c = Head;\nconst _default = Head;\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n    Object.defineProperty(exports.default, '__esModule', {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=head.js.map\nvar _c;\n$RefreshReg$(_c, \"Head\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9oZWFkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztJQXVNQSxPQUFtQjtlQUFuQjs7SUExTGdCQSxXQUFXO2VBQVhBOzs7Ozs7NkVBWDRCO2lGQUN6QjtxREFDYTs2REFDRztxQ0FDUDtzQ0FDSDtBQU1sQixTQUFTQSxZQUFZQyxTQUFpQjtJQUFqQkEsSUFBQUEsY0FBQUEsS0FBQUEsR0FBQUEsWUFBWTtJQUN0QyxNQUFNQyxPQUFPO3NCQUFDLHFCQUFDQyxRQUFBQTtZQUFLQyxTQUFRO1dBQVk7S0FBYTtJQUNyRCxJQUFJLENBQUNILFdBQVc7UUFDZEMsS0FBS0csSUFBSSxlQUNQLHFCQUFDRixRQUFBQTtZQUFLRyxNQUFLO1lBQVdDLFNBQVE7V0FBeUI7SUFFM0Q7SUFDQSxPQUFPTDtBQUNUO0FBRUEsU0FBU00saUJBQ1BDLElBQW9DLEVBQ3BDQyxLQUEyQztJQUUzQyw4RkFBOEY7SUFDOUYsSUFBSSxPQUFPQSxVQUFVLFlBQVksT0FBT0EsVUFBVSxVQUFVO1FBQzFELE9BQU9EO0lBQ1Q7SUFDQSxrQ0FBa0M7SUFDbEMsSUFBSUMsTUFBTUMsSUFBSSxLQUFLQyxPQUFBQSxPQUFLLENBQUNDLFFBQVEsRUFBRTtRQUNqQyxPQUFPSixLQUFLSyxNQUFNLENBQ2hCLE9BQ0FGLE9BQUssQ0FBQ0csUUFBUSxDQUFDQyxPQUFPLENBQUNOLE1BQU1PLEtBQUssQ0FBQ0MsUUFBUSxFQUFFQyxNQUFNLENBQ2pELENBRUVDLGNBQ0FDO1lBRUEsSUFDRSxPQUFPQSxrQkFBa0IsWUFDekIsT0FBT0Esa0JBQWtCLFVBQ3pCO2dCQUNBLE9BQU9EO1lBQ1Q7WUFDQSxPQUFPQSxhQUFhTixNQUFNLENBQUNPO1FBQzdCLEdBQ0EsRUFBRTtJQUdSO0lBQ0EsT0FBT1osS0FBS0ssTUFBTSxDQUFDSjtBQUNyQjtBQUVBLE1BQU1ZLFlBQVk7SUFBQztJQUFRO0lBQWE7SUFBVztDQUFX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LENBQUMsTUFBTSxLQUFLLGNBQWM7Z0JBQy9ENEMsQ0FBQUEsR0FBQUEsVUFBQUEsUUFBQUEsRUFDRyx3RkFBcUZaLEVBQUVoQyxLQUFLLENBQUMsT0FBTyxHQUFDO1lBRTFHO1FBQ0Y7UUFDQSxxQkFBT0wsT0FBQUEsT0FBSyxDQUFDK0MsWUFBWSxDQUFDVixHQUFHO1lBQUVqQjtRQUFJO0lBQ3JDO0FBQ0o7QUFFQTs7O0NBR0MsR0FDRCxjQUFjLEtBQTJDO0lBQTNDLE1BQUVkLFFBQVEsRUFBaUMsR0FBM0M7SUFDWixNQUFNNkMsV0FBV0MsQ0FBQUEsR0FBQUEsT0FBQUEsVUFBQUEsRUFBV0MseUJBQUFBLGVBQWU7SUFDM0MsTUFBTUMsY0FBY0YsQ0FBQUEsR0FBQUEsT0FBQUEsVUFBQUEsRUFBV0csaUNBQUFBLGtCQUFrQjtJQUNqRCxxQkFDRSxxQkFBQ0MsWUFBQUEsT0FBTTtRQUNMQyx5QkFBeUJ6QjtRQUN6QnNCLGFBQWFBO1FBQ2JqRSxXQUFXcUUsQ0FBQUEsR0FBQUEsU0FBQUEsV0FBQUEsRUFBWVA7a0JBRXRCN0M7O0FBR1A7S0FaUzRDO01BY1QsV0FBZUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2hhcmVkL2xpYi9oZWFkLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQsIHR5cGUgSlNYIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgRWZmZWN0IGZyb20gJy4vc2lkZS1lZmZlY3QnXG5pbXBvcnQgeyBBbXBTdGF0ZUNvbnRleHQgfSBmcm9tICcuL2FtcC1jb250ZXh0LnNoYXJlZC1ydW50aW1lJ1xuaW1wb3J0IHsgSGVhZE1hbmFnZXJDb250ZXh0IH0gZnJvbSAnLi9oZWFkLW1hbmFnZXItY29udGV4dC5zaGFyZWQtcnVudGltZSdcbmltcG9ydCB7IGlzSW5BbXBNb2RlIH0gZnJvbSAnLi9hbXAtbW9kZSdcbmltcG9ydCB7IHdhcm5PbmNlIH0gZnJvbSAnLi91dGlscy93YXJuLW9uY2UnXG5cbnR5cGUgV2l0aEluQW1wTW9kZSA9IHtcbiAgaW5BbXBNb2RlPzogYm9vbGVhblxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdEhlYWQoaW5BbXBNb2RlID0gZmFsc2UpOiBKU1guRWxlbWVudFtdIHtcbiAgY29uc3QgaGVhZCA9IFs8bWV0YSBjaGFyU2V0PVwidXRmLThcIiBrZXk9XCJjaGFyc2V0XCIgLz5dXG4gIGlmICghaW5BbXBNb2RlKSB7XG4gICAgaGVhZC5wdXNoKFxuICAgICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aFwiIGtleT1cInZpZXdwb3J0XCIgLz5cbiAgICApXG4gIH1cbiAgcmV0dXJuIGhlYWRcbn1cblxuZnVuY3Rpb24gb25seVJlYWN0RWxlbWVudChcbiAgbGlzdDogQXJyYXk8UmVhY3QuUmVhY3RFbGVtZW50PGFueT4+LFxuICBjaGlsZDogUmVhY3QuUmVhY3RFbGVtZW50IHwgbnVtYmVyIHwgc3RyaW5nXG4pOiBBcnJheTxSZWFjdC5SZWFjdEVsZW1lbnQ8YW55Pj4ge1xuICAvLyBSZWFjdCBjaGlsZHJlbiBjYW4gYmUgXCJzdHJpbmdcIiBvciBcIm51bWJlclwiIGluIHRoaXMgY2FzZSB3ZSBpZ25vcmUgdGhlbSBmb3IgYmFja3dhcmRzIGNvbXBhdFxuICBpZiAodHlwZW9mIGNoaWxkID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgY2hpbGQgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIGxpc3RcbiAgfVxuICAvLyBBZGRzIHN1cHBvcnQgZm9yIFJlYWN0LkZyYWdtZW50XG4gIGlmIChjaGlsZC50eXBlID09PSBSZWFjdC5GcmFnbWVudCkge1xuICAgIHJldHVybiBsaXN0LmNvbmNhdChcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgQHR5cGVzL3JlYWN0IGRvZXMgbm90IHJlbW92ZSBmcmFnbWVudHMgYnV0IHRoaXMgY291bGQgYWxzbyByZXR1cm4gUmVhY3RQb3J0YWxbXVxuICAgICAgUmVhY3QuQ2hpbGRyZW4udG9BcnJheShjaGlsZC5wcm9wcy5jaGlsZHJlbikucmVkdWNlKFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEB0eXBlcy9yZWFjdCBkb2VzIG5vdCByZW1vdmUgZnJhZ21lbnRzIGJ1dCB0aGlzIGNvdWxkIGFsc28gcmV0dXJuIFJlYWN0UG9ydGFsW11cbiAgICAgICAgKFxuICAgICAgICAgIGZyYWdtZW50TGlzdDogQXJyYXk8UmVhY3QuUmVhY3RFbGVtZW50PGFueT4+LFxuICAgICAgICAgIGZyYWdtZW50Q2hpbGQ6IFJlYWN0LlJlYWN0RWxlbWVudCB8IG51bWJlciB8IHN0cmluZ1xuICAgICAgICApOiBBcnJheTxSZWFjdC5SZWFjdEVsZW1lbnQ8YW55Pj4gPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiBmcmFnbWVudENoaWxkID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgdHlwZW9mIGZyYWdtZW50Q2hpbGQgPT09ICdudW1iZXInXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZnJhZ21lbnRMaXN0XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmcmFnbWVudExpc3QuY29uY2F0KGZyYWdtZW50Q2hpbGQpXG4gICAgICAgIH0sXG4gICAgICAgIFtdXG4gICAgICApXG4gICAgKVxuICB9XG4gIHJldHVybiBsaXN0LmNvbmNhdChjaGlsZClcbn1cblxuY29uc3QgTUVUQVRZUEVTID0gWyduYW1lJywgJ2h0dHBFcXVpdicsICdjaGFyU2V0JywgJ2l0ZW1Qcm9wJ11cblxuLypcbiByZXR1cm5zIGEgZnVuY3Rpb24gZm9yIGZpbHRlcmluZyBoZWFkIGNoaWxkIGVsZW1lbnRzXG4gd2hpY2ggc2hvdWxkbid0IGJlIGR1cGxpY2F0ZWQsIGxpa2UgPHRpdGxlLz5cbiBBbHNvIGFkZHMgc3VwcG9ydCBmb3IgZGVkdXBsaWNhdGVkIGBrZXlgIHByb3BlcnRpZXNcbiovXG5mdW5jdGlvbiB1bmlxdWUoKSB7XG4gIGNvbnN0IGtleXMgPSBuZXcgU2V0KClcbiAgY29uc3QgdGFncyA9IG5ldyBTZXQoKVxuICBjb25zdCBtZXRhVHlwZXMgPSBuZXcgU2V0KClcbiAgY29uc3QgbWV0YUNhdGVnb3JpZXM6IHsgW21ldGF0eXBlOiBzdHJpbmddOiBTZXQ8c3RyaW5nPiB9ID0ge31cblxuICByZXR1cm4gKGg6IFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+KSA9PiB7XG4gICAgbGV0IGlzVW5pcXVlID0gdHJ1ZVxuICAgIGxldCBoYXNLZXkgPSBmYWxzZVxuXG4gICAgaWYgKGgua2V5ICYmIHR5cGVvZiBoLmtleSAhPT0gJ251bWJlcicgJiYgaC5rZXkuaW5kZXhPZignJCcpID4gMCkge1xuICAgICAgaGFzS2V5ID0gdHJ1ZVxuICAgICAgY29uc3Qga2V5ID0gaC5rZXkuc2xpY2UoaC5rZXkuaW5kZXhPZignJCcpICsgMSlcbiAgICAgIGlmIChrZXlzLmhhcyhrZXkpKSB7XG4gICAgICAgIGlzVW5pcXVlID0gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtleXMuYWRkKGtleSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXG4gICAgc3dpdGNoIChoLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgIGNhc2UgJ2Jhc2UnOlxuICAgICAgICBpZiAodGFncy5oYXMoaC50eXBlKSkge1xuICAgICAgICAgIGlzVW5pcXVlID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YWdzLmFkZChoLnR5cGUpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21ldGEnOlxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gTUVUQVRZUEVTLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgbWV0YXR5cGUgPSBNRVRBVFlQRVNbaV1cbiAgICAgICAgICBpZiAoIWgucHJvcHMuaGFzT3duUHJvcGVydHkobWV0YXR5cGUpKSBjb250aW51ZVxuXG4gICAgICAgICAgaWYgKG1ldGF0eXBlID09PSAnY2hhclNldCcpIHtcbiAgICAgICAgICAgIGlmIChtZXRhVHlwZXMuaGFzKG1ldGF0eXBlKSkge1xuICAgICAgICAgICAgICBpc1VuaXF1ZSA9IGZhbHNlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtZXRhVHlwZXMuYWRkKG1ldGF0eXBlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9IGgucHJvcHNbbWV0YXR5cGVdXG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gbWV0YUNhdGVnb3JpZXNbbWV0YXR5cGVdIHx8IG5ldyBTZXQoKVxuICAgICAgICAgICAgaWYgKChtZXRhdHlwZSAhPT0gJ25hbWUnIHx8ICFoYXNLZXkpICYmIGNhdGVnb3JpZXMuaGFzKGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgICBpc1VuaXF1ZSA9IGZhbHNlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYXRlZ29yaWVzLmFkZChjYXRlZ29yeSlcbiAgICAgICAgICAgICAgbWV0YUNhdGVnb3JpZXNbbWV0YXR5cGVdID0gY2F0ZWdvcmllc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIHJldHVybiBpc1VuaXF1ZVxuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBoZWFkQ2hpbGRyZW5FbGVtZW50cyBMaXN0IG9mIGNoaWxkcmVuIG9mIDxIZWFkPlxuICovXG5mdW5jdGlvbiByZWR1Y2VDb21wb25lbnRzPFQgZXh0ZW5kcyB7fSAmIFdpdGhJbkFtcE1vZGU+KFxuICBoZWFkQ2hpbGRyZW5FbGVtZW50czogQXJyYXk8UmVhY3QuUmVhY3RFbGVtZW50PGFueT4+LFxuICBwcm9wczogVFxuKSB7XG4gIGNvbnN0IHsgaW5BbXBNb2RlIH0gPSBwcm9wc1xuICByZXR1cm4gaGVhZENoaWxkcmVuRWxlbWVudHNcbiAgICAucmVkdWNlKG9ubHlSZWFjdEVsZW1lbnQsIFtdKVxuICAgIC5yZXZlcnNlKClcbiAgICAuY29uY2F0KGRlZmF1bHRIZWFkKGluQW1wTW9kZSkucmV2ZXJzZSgpKVxuICAgIC5maWx0ZXIodW5pcXVlKCkpXG4gICAgLnJldmVyc2UoKVxuICAgIC5tYXAoKGM6IFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+LCBpOiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGMua2V5IHx8IGlcbiAgICAgIGlmIChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdkZXZlbG9wbWVudCcgJiZcbiAgICAgICAgcHJvY2Vzcy5lbnYuX19ORVhUX09QVElNSVpFX0ZPTlRTICYmXG4gICAgICAgICFpbkFtcE1vZGVcbiAgICAgICkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgYy50eXBlID09PSAnbGluaycgJiZcbiAgICAgICAgICBjLnByb3BzWydocmVmJ10gJiZcbiAgICAgICAgICAvLyBUT0RPKHByYXRlZWtiaEApOiBSZXBsYWNlIHRoaXMgd2l0aCBjb25zdCBmcm9tIGBjb25zdGFudHNgIHdoZW4gdGhlIHRyZWUgc2hha2luZyB3b3Jrcy5cbiAgICAgICAgICBbJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzJywgJ2h0dHBzOi8vdXNlLnR5cGVraXQubmV0LyddLnNvbWUoXG4gICAgICAgICAgICAodXJsKSA9PiBjLnByb3BzWydocmVmJ10uc3RhcnRzV2l0aCh1cmwpXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBuZXdQcm9wcyA9IHsgLi4uKGMucHJvcHMgfHwge30pIH1cbiAgICAgICAgICBuZXdQcm9wc1snZGF0YS1ocmVmJ10gPSBuZXdQcm9wc1snaHJlZiddXG4gICAgICAgICAgbmV3UHJvcHNbJ2hyZWYnXSA9IHVuZGVmaW5lZFxuXG4gICAgICAgICAgLy8gQWRkIHRoaXMgYXR0cmlidXRlIHRvIG1ha2UgaXQgZWFzeSB0byBpZGVudGlmeSBvcHRpbWl6ZWQgdGFnc1xuICAgICAgICAgIG5ld1Byb3BzWydkYXRhLW9wdGltaXplZC1mb250cyddID0gdHJ1ZVxuXG4gICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjLCBuZXdQcm9wcylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIC8vIG9taXQgSlNPTi1MRCBzdHJ1Y3R1cmVkIGRhdGEgc25pcHBldHMgZnJvbSB0aGUgd2FybmluZ1xuICAgICAgICBpZiAoYy50eXBlID09PSAnc2NyaXB0JyAmJiBjLnByb3BzWyd0eXBlJ10gIT09ICdhcHBsaWNhdGlvbi9sZCtqc29uJykge1xuICAgICAgICAgIGNvbnN0IHNyY01lc3NhZ2UgPSBjLnByb3BzWydzcmMnXVxuICAgICAgICAgICAgPyBgPHNjcmlwdD4gdGFnIHdpdGggc3JjPVwiJHtjLnByb3BzWydzcmMnXX1cImBcbiAgICAgICAgICAgIDogYGlubGluZSA8c2NyaXB0PmBcbiAgICAgICAgICB3YXJuT25jZShcbiAgICAgICAgICAgIGBEbyBub3QgYWRkIDxzY3JpcHQ+IHRhZ3MgdXNpbmcgbmV4dC9oZWFkIChzZWUgJHtzcmNNZXNzYWdlfSkuIFVzZSBuZXh0L3NjcmlwdCBpbnN0ZWFkLiBcXG5TZWUgbW9yZSBpbmZvIGhlcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL25vLXNjcmlwdC10YWdzLWluLWhlYWQtY29tcG9uZW50YFxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIGlmIChjLnR5cGUgPT09ICdsaW5rJyAmJiBjLnByb3BzWydyZWwnXSA9PT0gJ3N0eWxlc2hlZXQnKSB7XG4gICAgICAgICAgd2Fybk9uY2UoXG4gICAgICAgICAgICBgRG8gbm90IGFkZCBzdHlsZXNoZWV0cyB1c2luZyBuZXh0L2hlYWQgKHNlZSA8bGluayByZWw9XCJzdHlsZXNoZWV0XCI+IHRhZyB3aXRoIGhyZWY9XCIke2MucHJvcHNbJ2hyZWYnXX1cIikuIFVzZSBEb2N1bWVudCBpbnN0ZWFkLiBcXG5TZWUgbW9yZSBpbmZvIGhlcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL25vLXN0eWxlc2hlZXRzLWluLWhlYWQtY29tcG9uZW50YFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjLCB7IGtleSB9KVxuICAgIH0pXG59XG5cbi8qKlxuICogVGhpcyBjb21wb25lbnQgaW5qZWN0cyBlbGVtZW50cyB0byBgPGhlYWQ+YCBvZiB5b3VyIHBhZ2UuXG4gKiBUbyBhdm9pZCBkdXBsaWNhdGVkIGB0YWdzYCBpbiBgPGhlYWQ+YCB5b3UgY2FuIHVzZSB0aGUgYGtleWAgcHJvcGVydHksIHdoaWNoIHdpbGwgbWFrZSBzdXJlIGV2ZXJ5IHRhZyBpcyBvbmx5IHJlbmRlcmVkIG9uY2UuXG4gKi9cbmZ1bmN0aW9uIEhlYWQoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICBjb25zdCBhbXBTdGF0ZSA9IHVzZUNvbnRleHQoQW1wU3RhdGVDb250ZXh0KVxuICBjb25zdCBoZWFkTWFuYWdlciA9IHVzZUNvbnRleHQoSGVhZE1hbmFnZXJDb250ZXh0KVxuICByZXR1cm4gKFxuICAgIDxFZmZlY3RcbiAgICAgIHJlZHVjZUNvbXBvbmVudHNUb1N0YXRlPXtyZWR1Y2VDb21wb25lbnRzfVxuICAgICAgaGVhZE1hbmFnZXI9e2hlYWRNYW5hZ2VyfVxuICAgICAgaW5BbXBNb2RlPXtpc0luQW1wTW9kZShhbXBTdGF0ZSl9XG4gICAgPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvRWZmZWN0PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IEhlYWRcbiJdLCJuYW1lcyI6WyJkZWZhdWx0SGVhZCIsImluQW1wTW9kZSIsImhlYWQiLCJtZXRhIiwiY2hhclNldCIsInB1c2giLCJuYW1lIiwiY29udGVudCIsIm9ubHlSZWFjdEVsZW1lbnQiLCJsaXN0IiwiY2hpbGQiLCJ0eXBlIiwiUmVhY3QiLCJGcmFnbWVudCIsImNvbmNhdCIsIkNoaWxkcmVuIiwidG9BcnJheSIsInByb3BzIiwiY2hpbGRyZW4iLCJyZWR1Y2UiLCJmcmFnbWVudExpc3QiLCJmcmFnbWVudENoaWxkIiwiTUVUQVRZUEVTIiwidW5pcXVlIiwia2V5cyIsIlNldCIsInRhZ3MiLCJtZXRhVHlwZXMiLCJtZXRhQ2F0ZWdvcmllcyIsImgiLCJpc1VuaXF1ZSIsImhhc0tleSIsImtleSIsImluZGV4T2YiLCJzbGljZSIsImhhcyIsImFkZCIsImkiLCJsZW4iLCJsZW5ndGgiLCJtZXRhdHlwZSIsImhhc093blByb3BlcnR5IiwiY2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwicmVkdWNlQ29tcG9uZW50cyIsImhlYWRDaGlsZHJlbkVsZW1lbnRzIiwicmV2ZXJzZSIsImZpbHRlciIsIm1hcCIsImMiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJfX05FWFRfT1BUSU1JWkVfRk9OVFMiLCJzb21lIiwidXJsIiwic3RhcnRzV2l0aCIsIm5ld1Byb3BzIiwidW5kZWZpbmVkIiwiY2xvbmVFbGVtZW50Iiwic3JjTWVzc2FnZSIsIndhcm5PbmNlIiwiSGVhZCIsImFtcFN0YXRlIiwidXNlQ29udGV4dCIsIkFtcFN0YXRlQ29udGV4dCIsImhlYWRNYW5hZ2VyIiwiSGVhZE1hbmFnZXJDb250ZXh0IiwiRWZmZWN0IiwicmVkdWNlQ29tcG9uZW50c1RvU3RhdGUiLCJpc0luQW1wTW9kZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/head.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/image-blur-svg.js":
/*!*************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/image-blur-svg.js ***!
  \*************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/**\n * A shared function, used on both client and server, to generate a SVG blur placeholder.\n */ \nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"getImageBlurSvg\", ({\n    enumerable: true,\n    get: function() {\n        return getImageBlurSvg;\n    }\n}));\nfunction getImageBlurSvg(param) {\n    let { widthInt, heightInt, blurWidth, blurHeight, blurDataURL, objectFit } = param;\n    const std = 20;\n    const svgWidth = blurWidth ? blurWidth * 40 : widthInt;\n    const svgHeight = blurHeight ? blurHeight * 40 : heightInt;\n    const viewBox = svgWidth && svgHeight ? \"viewBox='0 0 \" + svgWidth + \" \" + svgHeight + \"'\" : '';\n    const preserveAspectRatio = viewBox ? 'none' : objectFit === 'contain' ? 'xMidYMid' : objectFit === 'cover' ? 'xMidYMid slice' : 'none';\n    return \"%3Csvg xmlns='http://www.w3.org/2000/svg' \" + viewBox + \"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='\" + std + \"'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='\" + std + \"'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='\" + preserveAspectRatio + \"' style='filter: url(%23b);' href='\" + blurDataURL + \"'/%3E%3C/svg%3E\";\n} //# sourceMappingURL=image-blur-svg.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9pbWFnZS1ibHVyLXN2Zy5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7Q0FFQzs7OzttREFDZUE7OztlQUFBQTs7O0FBQVQsU0FBU0EsZ0JBQWdCLEtBYy9CO0lBZCtCLE1BQzlCQyxRQUFRLEVBQ1JDLFNBQVMsRUFDVEMsU0FBUyxFQUNUQyxVQUFVLEVBQ1ZDLFdBQVcsRUFDWEMsU0FBUyxFQVFWLEdBZCtCO0lBZTlCLE1BQU1DLE1BQU07SUFDWixNQUFNQyxXQUFXTCxZQUFZQSxZQUFZLEtBQUtGO0lBQzlDLE1BQU1RLFlBQVlMLGFBQWFBLGFBQWEsS0FBS0Y7SUFFakQsTUFBTVEsVUFDSkYsWUFBWUMsWUFBYSxrQkFBZUQsV0FBUyxNQUFHQyxZQUFVLE1BQUs7SUFDckUsTUFBTUUsc0JBQXNCRCxVQUN4QixTQUNBSixjQUFjLFlBQ1osYUFDQUEsY0FBYyxVQUNaLG1CQUNBO0lBRVIsT0FBUSwrQ0FBNENJLFVBQVEsOEZBQTJGSCxNQUFJLG9RQUFpUUEsTUFBSSxnR0FBNkZJLHNCQUFvQix3Q0FBcUNOLGNBQVk7QUFDcGtCIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NoYXJlZC9saWIvaW1hZ2UtYmx1ci1zdmcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBIHNoYXJlZCBmdW5jdGlvbiwgdXNlZCBvbiBib3RoIGNsaWVudCBhbmQgc2VydmVyLCB0byBnZW5lcmF0ZSBhIFNWRyBibHVyIHBsYWNlaG9sZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW1hZ2VCbHVyU3ZnKHtcbiAgd2lkdGhJbnQsXG4gIGhlaWdodEludCxcbiAgYmx1cldpZHRoLFxuICBibHVySGVpZ2h0LFxuICBibHVyRGF0YVVSTCxcbiAgb2JqZWN0Rml0LFxufToge1xuICB3aWR0aEludD86IG51bWJlclxuICBoZWlnaHRJbnQ/OiBudW1iZXJcbiAgYmx1cldpZHRoPzogbnVtYmVyXG4gIGJsdXJIZWlnaHQ/OiBudW1iZXJcbiAgYmx1ckRhdGFVUkw6IHN0cmluZ1xuICBvYmplY3RGaXQ/OiBzdHJpbmdcbn0pOiBzdHJpbmcge1xuICBjb25zdCBzdGQgPSAyMFxuICBjb25zdCBzdmdXaWR0aCA9IGJsdXJXaWR0aCA/IGJsdXJXaWR0aCAqIDQwIDogd2lkdGhJbnRcbiAgY29uc3Qgc3ZnSGVpZ2h0ID0gYmx1ckhlaWdodCA/IGJsdXJIZWlnaHQgKiA0MCA6IGhlaWdodEludFxuXG4gIGNvbnN0IHZpZXdCb3ggPVxuICAgIHN2Z1dpZHRoICYmIHN2Z0hlaWdodCA/IGB2aWV3Qm94PScwIDAgJHtzdmdXaWR0aH0gJHtzdmdIZWlnaHR9J2AgOiAnJ1xuICBjb25zdCBwcmVzZXJ2ZUFzcGVjdFJhdGlvID0gdmlld0JveFxuICAgID8gJ25vbmUnXG4gICAgOiBvYmplY3RGaXQgPT09ICdjb250YWluJ1xuICAgICAgPyAneE1pZFlNaWQnXG4gICAgICA6IG9iamVjdEZpdCA9PT0gJ2NvdmVyJ1xuICAgICAgICA/ICd4TWlkWU1pZCBzbGljZSdcbiAgICAgICAgOiAnbm9uZSdcblxuICByZXR1cm4gYCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICR7dmlld0JveH0lM0UlM0NmaWx0ZXIgaWQ9J2InIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0nc1JHQiclM0UlM0NmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249JyR7c3RkfScvJTNFJTNDZmVDb2xvck1hdHJpeCB2YWx1ZXM9JzEgMCAwIDAgMCAwIDEgMCAwIDAgMCAwIDEgMCAwIDAgMCAwIDEwMCAtMScgcmVzdWx0PSdzJy8lM0UlM0NmZUZsb29kIHg9JzAnIHk9JzAnIHdpZHRoPScxMDAlMjUnIGhlaWdodD0nMTAwJTI1Jy8lM0UlM0NmZUNvbXBvc2l0ZSBvcGVyYXRvcj0nb3V0JyBpbj0ncycvJTNFJTNDZmVDb21wb3NpdGUgaW4yPSdTb3VyY2VHcmFwaGljJy8lM0UlM0NmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249JyR7c3RkfScvJTNFJTNDL2ZpbHRlciUzRSUzQ2ltYWdlIHdpZHRoPScxMDAlMjUnIGhlaWdodD0nMTAwJTI1JyB4PScwJyB5PScwJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPScke3ByZXNlcnZlQXNwZWN0UmF0aW99JyBzdHlsZT0nZmlsdGVyOiB1cmwoJTIzYik7JyBocmVmPScke2JsdXJEYXRhVVJMfScvJTNFJTNDL3N2ZyUzRWBcbn1cbiJdLCJuYW1lcyI6WyJnZXRJbWFnZUJsdXJTdmciLCJ3aWR0aEludCIsImhlaWdodEludCIsImJsdXJXaWR0aCIsImJsdXJIZWlnaHQiLCJibHVyRGF0YVVSTCIsIm9iamVjdEZpdCIsInN0ZCIsInN2Z1dpZHRoIiwic3ZnSGVpZ2h0Iiwidmlld0JveCIsInByZXNlcnZlQXNwZWN0UmF0aW8iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/image-blur-svg.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/image-config-context.shared-runtime.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/image-config-context.shared-runtime.js ***!
  \**********************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"ImageConfigContext\", ({\n    enumerable: true,\n    get: function() {\n        return ImageConfigContext;\n    }\n}));\nconst _interop_require_default = __webpack_require__(/*! @swc/helpers/_/_interop_require_default */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_interop_require_default.js\");\nconst _react = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"));\nconst _imageconfig = __webpack_require__(/*! ./image-config */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/image-config.js\");\nconst ImageConfigContext = _react.default.createContext(_imageconfig.imageConfigDefault);\nif (true) {\n    ImageConfigContext.displayName = 'ImageConfigContext';\n} //# sourceMappingURL=image-config-context.shared-runtime.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9pbWFnZS1jb25maWctY29udGV4dC5zaGFyZWQtcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7O3NEQUlhQTs7O2VBQUFBOzs7OzRFQUpLO3lDQUVpQjtBQUU1QixNQUFNQSxxQkFDWEMsT0FBQUEsT0FBSyxDQUFDQyxhQUFhLENBQXNCQyxhQUFBQSxrQkFBa0I7QUFFN0QsSUFBSUMsSUFBb0IsRUFBbUI7SUFDekNKLG1CQUFtQk8sV0FBVyxHQUFHO0FBQ25DIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NoYXJlZC9saWIvaW1hZ2UtY29uZmlnLWNvbnRleHQuc2hhcmVkLXJ1bnRpbWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHR5cGUgeyBJbWFnZUNvbmZpZ0NvbXBsZXRlIH0gZnJvbSAnLi9pbWFnZS1jb25maWcnXG5pbXBvcnQgeyBpbWFnZUNvbmZpZ0RlZmF1bHQgfSBmcm9tICcuL2ltYWdlLWNvbmZpZydcblxuZXhwb3J0IGNvbnN0IEltYWdlQ29uZmlnQ29udGV4dCA9XG4gIFJlYWN0LmNyZWF0ZUNvbnRleHQ8SW1hZ2VDb25maWdDb21wbGV0ZT4oaW1hZ2VDb25maWdEZWZhdWx0KVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBJbWFnZUNvbmZpZ0NvbnRleHQuZGlzcGxheU5hbWUgPSAnSW1hZ2VDb25maWdDb250ZXh0J1xufVxuIl0sIm5hbWVzIjpbIkltYWdlQ29uZmlnQ29udGV4dCIsIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsImltYWdlQ29uZmlnRGVmYXVsdCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImRpc3BsYXlOYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/image-config-context.shared-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/image-config.js":
/*!***********************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/image-config.js ***!
  \***********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    VALID_LOADERS: function() {\n        return VALID_LOADERS;\n    },\n    imageConfigDefault: function() {\n        return imageConfigDefault;\n    }\n});\nconst VALID_LOADERS = [\n    'default',\n    'imgix',\n    'cloudinary',\n    'akamai',\n    'custom'\n];\nconst imageConfigDefault = {\n    deviceSizes: [\n        640,\n        750,\n        828,\n        1080,\n        1200,\n        1920,\n        2048,\n        3840\n    ],\n    imageSizes: [\n        16,\n        32,\n        48,\n        64,\n        96,\n        128,\n        256,\n        384\n    ],\n    path: '/_next/image',\n    loader: 'default',\n    loaderFile: '',\n    domains: [],\n    disableStaticImages: false,\n    minimumCacheTTL: 60,\n    formats: [\n        'image/webp'\n    ],\n    dangerouslyAllowSVG: false,\n    contentSecurityPolicy: \"script-src 'none'; frame-src 'none'; sandbox;\",\n    contentDispositionType: 'attachment',\n    localPatterns: undefined,\n    remotePatterns: [],\n    qualities: undefined,\n    unoptimized: false\n}; //# sourceMappingURL=image-config.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9pbWFnZS1jb25maWcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0lBQWFBLGFBQWE7ZUFBYkE7O0lBaUlBQyxrQkFBa0I7ZUFBbEJBOzs7QUFqSU4sTUFBTUQsZ0JBQWdCO0lBQzNCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQTJITSxNQUFNQyxxQkFBMEM7SUFDckRDLGFBQWE7UUFBQztRQUFLO1FBQUs7UUFBSztRQUFNO1FBQU07UUFBTTtRQUFNO0tBQUs7SUFDMURDLFlBQVk7UUFBQztRQUFJO1FBQUk7UUFBSTtRQUFJO1FBQUk7UUFBSztRQUFLO0tBQUk7SUFDL0NDLE1BQU07SUFDTkMsUUFBUTtJQUNSQyxZQUFZO0lBQ1pDLFNBQVMsRUFBRTtJQUNYQyxxQkFBcUI7SUFDckJDLGlCQUFpQjtJQUNqQkMsU0FBUztRQUFDO0tBQWE7SUFDdkJDLHFCQUFxQjtJQUNyQkMsdUJBQXdCO0lBQ3hCQyx3QkFBd0I7SUFDeEJDLGVBQWVDO0lBQ2ZDLGdCQUFnQixFQUFFO0lBQ2xCQyxXQUFXRjtJQUNYRyxhQUFhO0FBQ2YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2hhcmVkL2xpYi9pbWFnZS1jb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFZBTElEX0xPQURFUlMgPSBbXG4gICdkZWZhdWx0JyxcbiAgJ2ltZ2l4JyxcbiAgJ2Nsb3VkaW5hcnknLFxuICAnYWthbWFpJyxcbiAgJ2N1c3RvbScsXG5dIGFzIGNvbnN0XG5cbmV4cG9ydCB0eXBlIExvYWRlclZhbHVlID0gKHR5cGVvZiBWQUxJRF9MT0FERVJTKVtudW1iZXJdXG5cbmV4cG9ydCB0eXBlIEltYWdlTG9hZGVyUHJvcHMgPSB7XG4gIHNyYzogc3RyaW5nXG4gIHdpZHRoOiBudW1iZXJcbiAgcXVhbGl0eT86IG51bWJlclxufVxuXG5leHBvcnQgdHlwZSBJbWFnZUxvYWRlclByb3BzV2l0aENvbmZpZyA9IEltYWdlTG9hZGVyUHJvcHMgJiB7XG4gIGNvbmZpZzogUmVhZG9ubHk8SW1hZ2VDb25maWc+XG59XG5cbmV4cG9ydCB0eXBlIExvY2FsUGF0dGVybiA9IHtcbiAgLyoqXG4gICAqIENhbiBiZSBsaXRlcmFsIG9yIHdpbGRjYXJkLlxuICAgKiBTaW5nbGUgYCpgIG1hdGNoZXMgYSBzaW5nbGUgcGF0aCBzZWdtZW50LlxuICAgKiBEb3VibGUgYCoqYCBtYXRjaGVzIGFueSBudW1iZXIgb2YgcGF0aCBzZWdtZW50cy5cbiAgICovXG4gIHBhdGhuYW1lPzogc3RyaW5nXG5cbiAgLyoqXG4gICAqIENhbiBiZSBsaXRlcmFsIHF1ZXJ5IHN0cmluZyBzdWNoIGFzIGA/dj0xYCBvclxuICAgKiBlbXB0eSBzdHJpbmcgbWVhbmluZyBubyBxdWVyeSBzdHJpbmcuXG4gICAqL1xuICBzZWFyY2g/OiBzdHJpbmdcbn1cblxuZXhwb3J0IHR5cGUgUmVtb3RlUGF0dGVybiA9IHtcbiAgLyoqXG4gICAqIE11c3QgYmUgYGh0dHBgIG9yIGBodHRwc2AuXG4gICAqL1xuICBwcm90b2NvbD86ICdodHRwJyB8ICdodHRwcydcblxuICAvKipcbiAgICogQ2FuIGJlIGxpdGVyYWwgb3Igd2lsZGNhcmQuXG4gICAqIFNpbmdsZSBgKmAgbWF0Y2hlcyBhIHNpbmdsZSBzdWJkb21haW4uXG4gICAqIERvdWJsZSBgKipgIG1hdGNoZXMgYW55IG51bWJlciBvZiBzdWJkb21haW5zLlxuICAgKi9cbiAgaG9zdG5hbWU6IHN0cmluZ1xuXG4gIC8qKlxuICAgKiBDYW4gYmUgbGl0ZXJhbCBwb3J0IHN1Y2ggYXMgYDgwODBgIG9yIGVtcHR5IHN0cmluZ1xuICAgKiBtZWFuaW5nIG5vIHBvcnQuXG4gICAqL1xuICBwb3J0Pzogc3RyaW5nXG5cbiAgLyoqXG4gICAqIENhbiBiZSBsaXRlcmFsIG9yIHdpbGRjYXJkLlxuICAgKiBTaW5nbGUgYCpgIG1hdGNoZXMgYSBzaW5nbGUgcGF0aCBzZWdtZW50LlxuICAgKiBEb3VibGUgYCoqYCBtYXRjaGVzIGFueSBudW1iZXIgb2YgcGF0aCBzZWdtZW50cy5cbiAgICovXG4gIHBhdGhuYW1lPzogc3RyaW5nXG5cbiAgLyoqXG4gICAqIENhbiBiZSBsaXRlcmFsIHF1ZXJ5IHN0cmluZyBzdWNoIGFzIGA/dj0xYCBvclxuICAgKiBlbXB0eSBzdHJpbmcgbWVhbmluZyBubyBxdWVyeSBzdHJpbmcuXG4gICAqL1xuICBzZWFyY2g/OiBzdHJpbmdcbn1cblxudHlwZSBJbWFnZUZvcm1hdCA9ICdpbWFnZS9hdmlmJyB8ICdpbWFnZS93ZWJwJ1xuXG4vKipcbiAqIEltYWdlIGNvbmZpZ3VyYXRpb25zXG4gKlxuICogQHNlZSBbSW1hZ2UgY29uZmlndXJhdGlvbiBvcHRpb25zXShodHRwczovL25leHRqcy5vcmcvZG9jcy9hcGktcmVmZXJlbmNlL25leHQvaW1hZ2UjY29uZmlndXJhdGlvbi1vcHRpb25zKVxuICovXG5leHBvcnQgdHlwZSBJbWFnZUNvbmZpZ0NvbXBsZXRlID0ge1xuICAvKiogQHNlZSBbRGV2aWNlIHNpemVzIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNkZXZpY2Utc2l6ZXMpICovXG4gIGRldmljZVNpemVzOiBudW1iZXJbXVxuXG4gIC8qKiBAc2VlIFtJbWFnZSBzaXppbmcgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2J1aWxkaW5nLXlvdXItYXBwbGljYXRpb24vb3B0aW1pemluZy9pbWFnZXMjaW1hZ2Utc2l6aW5nKSAqL1xuICBpbWFnZVNpemVzOiBudW1iZXJbXVxuXG4gIC8qKiBAc2VlIFtJbWFnZSBsb2FkZXJzIGNvbmZpZ3VyYXRpb25dKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9sZWdhY3kvaW1hZ2UjbG9hZGVyKSAqL1xuICBsb2FkZXI6IExvYWRlclZhbHVlXG5cbiAgLyoqIEBzZWUgW0ltYWdlIGxvYWRlciBjb25maWd1cmF0aW9uXShodHRwczovL25leHRqcy5vcmcvZG9jcy9hcGktcmVmZXJlbmNlL25leHQvbGVnYWN5L2ltYWdlI2xvYWRlci1jb25maWd1cmF0aW9uKSAqL1xuICBwYXRoOiBzdHJpbmdcblxuICAvKiogQHNlZSBbSW1hZ2UgbG9hZGVyIGNvbmZpZ3VyYXRpb25dKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNsb2FkZXItY29uZmlndXJhdGlvbikgKi9cbiAgbG9hZGVyRmlsZTogc3RyaW5nXG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBgcmVtb3RlUGF0dGVybnNgIGluc3RlYWQuXG4gICAqL1xuICBkb21haW5zOiBzdHJpbmdbXVxuXG4gIC8qKiBAc2VlIFtEaXNhYmxlIHN0YXRpYyBpbWFnZSBpbXBvcnQgY29uZmlndXJhdGlvbl0oaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBpLXJlZmVyZW5jZS9uZXh0L2ltYWdlI2Rpc2FibGUtc3RhdGljLWltcG9ydHMpICovXG4gIGRpc2FibGVTdGF0aWNJbWFnZXM6IGJvb2xlYW5cblxuICAvKiogQHNlZSBbQ2FjaGUgYmVoYXZpb3JdKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNjYWNoaW5nLWJlaGF2aW9yKSAqL1xuICBtaW5pbXVtQ2FjaGVUVEw6IG51bWJlclxuXG4gIC8qKiBAc2VlIFtBY2NlcHRhYmxlIGZvcm1hdHNdKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNhY2NlcHRhYmxlLWZvcm1hdHMpICovXG4gIGZvcm1hdHM6IEltYWdlRm9ybWF0W11cblxuICAvKiogQHNlZSBbRGFuZ2Vyb3VzbHkgQWxsb3cgU1ZHXShodHRwczovL25leHRqcy5vcmcvZG9jcy9hcGktcmVmZXJlbmNlL25leHQvaW1hZ2UjZGFuZ2Vyb3VzbHktYWxsb3ctc3ZnKSAqL1xuICBkYW5nZXJvdXNseUFsbG93U1ZHOiBib29sZWFuXG5cbiAgLyoqIEBzZWUgW0Rhbmdlcm91c2x5IEFsbG93IFNWR10oaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBpLXJlZmVyZW5jZS9uZXh0L2ltYWdlI2Rhbmdlcm91c2x5LWFsbG93LXN2ZykgKi9cbiAgY29udGVudFNlY3VyaXR5UG9saWN5OiBzdHJpbmdcblxuICAvKiogQHNlZSBbRGFuZ2Vyb3VzbHkgQWxsb3cgU1ZHXShodHRwczovL25leHRqcy5vcmcvZG9jcy9hcGktcmVmZXJlbmNlL25leHQvaW1hZ2UjZGFuZ2Vyb3VzbHktYWxsb3ctc3ZnKSAqL1xuICBjb250ZW50RGlzcG9zaXRpb25UeXBlOiAnaW5saW5lJyB8ICdhdHRhY2htZW50J1xuXG4gIC8qKiBAc2VlIFtSZW1vdGUgUGF0dGVybnNdKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNyZW1vdGVwYXR0ZXJucykgKi9cbiAgcmVtb3RlUGF0dGVybnM6IFJlbW90ZVBhdHRlcm5bXVxuXG4gIC8qKiBAc2VlIFtSZW1vdGUgUGF0dGVybnNdKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNsb2NhbFBhdHRlcm5zKSAqL1xuICBsb2NhbFBhdHRlcm5zOiBMb2NhbFBhdHRlcm5bXSB8IHVuZGVmaW5lZFxuXG4gIC8qKiBAc2VlIFtRdWFsaXRpZXNdKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSNxdWFsaXRpZXMpICovXG4gIHF1YWxpdGllczogbnVtYmVyW10gfCB1bmRlZmluZWRcblxuICAvKiogQHNlZSBbVW5vcHRpbWl6ZWRdKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UvbmV4dC9pbWFnZSN1bm9wdGltaXplZCkgKi9cbiAgdW5vcHRpbWl6ZWQ6IGJvb2xlYW5cbn1cblxuZXhwb3J0IHR5cGUgSW1hZ2VDb25maWcgPSBQYXJ0aWFsPEltYWdlQ29uZmlnQ29tcGxldGU+XG5cbmV4cG9ydCBjb25zdCBpbWFnZUNvbmZpZ0RlZmF1bHQ6IEltYWdlQ29uZmlnQ29tcGxldGUgPSB7XG4gIGRldmljZVNpemVzOiBbNjQwLCA3NTAsIDgyOCwgMTA4MCwgMTIwMCwgMTkyMCwgMjA0OCwgMzg0MF0sXG4gIGltYWdlU2l6ZXM6IFsxNiwgMzIsIDQ4LCA2NCwgOTYsIDEyOCwgMjU2LCAzODRdLFxuICBwYXRoOiAnL19uZXh0L2ltYWdlJyxcbiAgbG9hZGVyOiAnZGVmYXVsdCcsXG4gIGxvYWRlckZpbGU6ICcnLFxuICBkb21haW5zOiBbXSxcbiAgZGlzYWJsZVN0YXRpY0ltYWdlczogZmFsc2UsXG4gIG1pbmltdW1DYWNoZVRUTDogNjAsXG4gIGZvcm1hdHM6IFsnaW1hZ2Uvd2VicCddLFxuICBkYW5nZXJvdXNseUFsbG93U1ZHOiBmYWxzZSxcbiAgY29udGVudFNlY3VyaXR5UG9saWN5OiBgc2NyaXB0LXNyYyAnbm9uZSc7IGZyYW1lLXNyYyAnbm9uZSc7IHNhbmRib3g7YCxcbiAgY29udGVudERpc3Bvc2l0aW9uVHlwZTogJ2F0dGFjaG1lbnQnLFxuICBsb2NhbFBhdHRlcm5zOiB1bmRlZmluZWQsIC8vIGRlZmF1bHQ6IGFsbG93IGFsbCBsb2NhbCBpbWFnZXNcbiAgcmVtb3RlUGF0dGVybnM6IFtdLCAvLyBkZWZhdWx0OiBhbGxvdyBubyByZW1vdGUgaW1hZ2VzXG4gIHF1YWxpdGllczogdW5kZWZpbmVkLCAvLyBkZWZhdWx0OiBhbGxvdyBhbGwgcXVhbGl0aWVzXG4gIHVub3B0aW1pemVkOiBmYWxzZSxcbn1cbiJdLCJuYW1lcyI6WyJWQUxJRF9MT0FERVJTIiwiaW1hZ2VDb25maWdEZWZhdWx0IiwiZGV2aWNlU2l6ZXMiLCJpbWFnZVNpemVzIiwicGF0aCIsImxvYWRlciIsImxvYWRlckZpbGUiLCJkb21haW5zIiwiZGlzYWJsZVN0YXRpY0ltYWdlcyIsIm1pbmltdW1DYWNoZVRUTCIsImZvcm1hdHMiLCJkYW5nZXJvdXNseUFsbG93U1ZHIiwiY29udGVudFNlY3VyaXR5UG9saWN5IiwiY29udGVudERpc3Bvc2l0aW9uVHlwZSIsImxvY2FsUGF0dGVybnMiLCJ1bmRlZmluZWQiLCJyZW1vdGVQYXR0ZXJucyIsInF1YWxpdGllcyIsInVub3B0aW1pemVkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/image-config.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/image-external.js":
/*!*************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/image-external.js ***!
  \*************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    default: function() {\n        return _default;\n    },\n    getImageProps: function() {\n        return getImageProps;\n    }\n});\nconst _interop_require_default = __webpack_require__(/*! @swc/helpers/_/_interop_require_default */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_interop_require_default.js\");\nconst _getimgprops = __webpack_require__(/*! ./get-img-props */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/get-img-props.js\");\nconst _imagecomponent = __webpack_require__(/*! ../../client/image-component */ \"(app-pages-browser)/./node_modules/next/dist/client/image-component.js\");\nconst _imageloader = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! next/dist/shared/lib/image-loader */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/image-loader.js\"));\nfunction getImageProps(imgProps) {\n    const { props } = (0, _getimgprops.getImgProps)(imgProps, {\n        defaultLoader: _imageloader.default,\n        // This is replaced by webpack define plugin\n        imgConf: {\"deviceSizes\":[640,750,828,1080,1200,1920,2048,3840],\"imageSizes\":[16,32,48,64,96,128,256,384],\"path\":\"/_next/image\",\"loader\":\"default\",\"dangerouslyAllowSVG\":false,\"unoptimized\":false,\"domains\":[],\"remotePatterns\":[]}\n    });\n    // Normally we don't care about undefined props because we pass to JSX,\n    // but this exported function could be used by the end user for anything\n    // so we delete undefined props to clean it up a little.\n    for (const [key, value] of Object.entries(props)){\n        if (value === undefined) {\n            delete props[key];\n        }\n    }\n    return {\n        props\n    };\n}\nconst _default = _imagecomponent.Image; //# sourceMappingURL=image-external.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9pbWFnZS1leHRlcm5hbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFpQ0EsT0FBb0I7ZUFBcEI7O0lBakJnQkEsYUFBYTtlQUFiQTs7Ozt5Q0FiWTs0Q0FDTjtrRkFHSTtBQVNuQixTQUFTQSxjQUFjQyxRQUFvQjtJQUNoRCxNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHQyxDQUFBQSxHQUFBQSxhQUFBQSxXQUFBQSxFQUFZRixVQUFVO1FBQ3RDRyxlQUFBQSxhQUFBQSxPQUFhO1FBQ2IsNENBQTRDO1FBQzVDQyxTQUFTQywwTkFBNkI7SUFDeEM7SUFDQSx1RUFBdUU7SUFDdkUsd0VBQXdFO0lBQ3hFLHdEQUF3RDtJQUN4RCxLQUFLLE1BQU0sQ0FBQ0csS0FBS0MsTUFBTSxJQUFJQyxPQUFPQyxPQUFPLENBQUNWLE9BQVE7UUFDaEQsSUFBSVEsVUFBVUcsV0FBVztZQUN2QixPQUFPWCxLQUFLLENBQUNPLElBQTBCO1FBQ3pDO0lBQ0Y7SUFDQSxPQUFPO1FBQUVQO0lBQU07QUFDakI7TUFFQSxXQUFlWSxnQkFBQUEsS0FBSyIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy9zaGFyZWQvbGliL2ltYWdlLWV4dGVybmFsLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEltYWdlQ29uZmlnQ29tcGxldGUsIEltYWdlTG9hZGVyUHJvcHMgfSBmcm9tICcuL2ltYWdlLWNvbmZpZydcbmltcG9ydCB0eXBlIHsgSW1hZ2VQcm9wcywgSW1hZ2VMb2FkZXIsIFN0YXRpY0ltYWdlRGF0YSB9IGZyb20gJy4vZ2V0LWltZy1wcm9wcydcblxuaW1wb3J0IHsgZ2V0SW1nUHJvcHMgfSBmcm9tICcuL2dldC1pbWctcHJvcHMnXG5pbXBvcnQgeyBJbWFnZSB9IGZyb20gJy4uLy4uL2NsaWVudC9pbWFnZS1jb21wb25lbnQnXG5cbi8vIEB0cy1pZ25vcmUgLSBUaGlzIGlzIHJlcGxhY2VkIGJ5IHdlYnBhY2sgYWxpYXNcbmltcG9ydCBkZWZhdWx0TG9hZGVyIGZyb20gJ25leHQvZGlzdC9zaGFyZWQvbGliL2ltYWdlLWxvYWRlcidcblxuLyoqXG4gKiBGb3IgbW9yZSBhZHZhbmNlZCB1c2UgY2FzZXMsIHlvdSBjYW4gY2FsbCBgZ2V0SW1hZ2VQcm9wcygpYFxuICogdG8gZ2V0IHRoZSBwcm9wcyB0aGF0IHdvdWxkIGJlIHBhc3NlZCB0byB0aGUgdW5kZXJseWluZyBgPGltZz5gIGVsZW1lbnQsXG4gKiBhbmQgaW5zdGVhZCBwYXNzIHRvIHRoZW0gdG8gYW5vdGhlciBjb21wb25lbnQsIHN0eWxlLCBjYW52YXMsIGV0Yy5cbiAqXG4gKiBSZWFkIG1vcmU6IFtOZXh0LmpzIGRvY3M6IGBnZXRJbWFnZVByb3BzYF0oaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2FwaS1yZWZlcmVuY2UvY29tcG9uZW50cy9pbWFnZSNnZXRpbWFnZXByb3BzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW1hZ2VQcm9wcyhpbWdQcm9wczogSW1hZ2VQcm9wcykge1xuICBjb25zdCB7IHByb3BzIH0gPSBnZXRJbWdQcm9wcyhpbWdQcm9wcywge1xuICAgIGRlZmF1bHRMb2FkZXIsXG4gICAgLy8gVGhpcyBpcyByZXBsYWNlZCBieSB3ZWJwYWNrIGRlZmluZSBwbHVnaW5cbiAgICBpbWdDb25mOiBwcm9jZXNzLmVudi5fX05FWFRfSU1BR0VfT1BUUyBhcyBhbnkgYXMgSW1hZ2VDb25maWdDb21wbGV0ZSxcbiAgfSlcbiAgLy8gTm9ybWFsbHkgd2UgZG9uJ3QgY2FyZSBhYm91dCB1bmRlZmluZWQgcHJvcHMgYmVjYXVzZSB3ZSBwYXNzIHRvIEpTWCxcbiAgLy8gYnV0IHRoaXMgZXhwb3J0ZWQgZnVuY3Rpb24gY291bGQgYmUgdXNlZCBieSB0aGUgZW5kIHVzZXIgZm9yIGFueXRoaW5nXG4gIC8vIHNvIHdlIGRlbGV0ZSB1bmRlZmluZWQgcHJvcHMgdG8gY2xlYW4gaXQgdXAgYSBsaXR0bGUuXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BzKSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWxldGUgcHJvcHNba2V5IGFzIGtleW9mIHR5cGVvZiBwcm9wc11cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgcHJvcHMgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZVxuXG5leHBvcnQgdHlwZSB7IEltYWdlUHJvcHMsIEltYWdlTG9hZGVyUHJvcHMsIEltYWdlTG9hZGVyLCBTdGF0aWNJbWFnZURhdGEgfVxuIl0sIm5hbWVzIjpbImdldEltYWdlUHJvcHMiLCJpbWdQcm9wcyIsInByb3BzIiwiZ2V0SW1nUHJvcHMiLCJkZWZhdWx0TG9hZGVyIiwiaW1nQ29uZiIsInByb2Nlc3MiLCJlbnYiLCJfX05FWFRfSU1BR0VfT1BUUyIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsInVuZGVmaW5lZCIsIkltYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/image-external.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/image-loader.js":
/*!***********************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/image-loader.js ***!
  \***********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"default\", ({\n    enumerable: true,\n    get: function() {\n        return _default;\n    }\n}));\nconst DEFAULT_Q = 75;\nfunction defaultLoader(param) {\n    let { config, src, width, quality } = param;\n    var _config_qualities;\n    if (true) {\n        const missingValues = [];\n        // these should always be provided but make sure they are\n        if (!src) missingValues.push('src');\n        if (!width) missingValues.push('width');\n        if (missingValues.length > 0) {\n            throw Object.defineProperty(new Error(\"Next Image Optimization requires \" + missingValues.join(', ') + \" to be provided. Make sure you pass them as props to the `next/image` component. Received: \" + JSON.stringify({\n                src,\n                width,\n                quality\n            })), \"__NEXT_ERROR_CODE\", {\n                value: \"E188\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (src.startsWith('//')) {\n            throw Object.defineProperty(new Error('Failed to parse src \"' + src + '\" on `next/image`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)'), \"__NEXT_ERROR_CODE\", {\n                value: \"E360\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n        if (src.startsWith('/') && config.localPatterns) {\n            if (true) {\n                // We use dynamic require because this should only error in development\n                const { hasLocalMatch } = __webpack_require__(/*! ./match-local-pattern */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/match-local-pattern.js\");\n                if (!hasLocalMatch(config.localPatterns, src)) {\n                    throw Object.defineProperty(new Error(\"Invalid src prop (\" + src + \") on `next/image` does not match `images.localPatterns` configured in your `next.config.js`\\n\" + \"See more info: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns\"), \"__NEXT_ERROR_CODE\", {\n                        value: \"E426\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n            }\n        }\n        if (!src.startsWith('/') && (config.domains || config.remotePatterns)) {\n            let parsedSrc;\n            try {\n                parsedSrc = new URL(src);\n            } catch (err) {\n                console.error(err);\n                throw Object.defineProperty(new Error('Failed to parse src \"' + src + '\" on `next/image`, if using relative image it must start with a leading slash \"/\" or be an absolute URL (http:// or https://)'), \"__NEXT_ERROR_CODE\", {\n                    value: \"E63\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (true) {\n                // We use dynamic require because this should only error in development\n                const { hasRemoteMatch } = __webpack_require__(/*! ./match-remote-pattern */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/match-remote-pattern.js\");\n                if (!hasRemoteMatch(config.domains, config.remotePatterns, parsedSrc)) {\n                    throw Object.defineProperty(new Error(\"Invalid src prop (\" + src + ') on `next/image`, hostname \"' + parsedSrc.hostname + '\" is not configured under images in your `next.config.js`\\n' + \"See more info: https://nextjs.org/docs/messages/next-image-unconfigured-host\"), \"__NEXT_ERROR_CODE\", {\n                        value: \"E231\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n            }\n        }\n        if (quality && config.qualities && !config.qualities.includes(quality)) {\n            throw Object.defineProperty(new Error(\"Invalid quality prop (\" + quality + \") on `next/image` does not match `images.qualities` configured in your `next.config.js`\\n\" + \"See more info: https://nextjs.org/docs/messages/next-image-unconfigured-qualities\"), \"__NEXT_ERROR_CODE\", {\n                value: \"E623\",\n                enumerable: false,\n                configurable: true\n            });\n        }\n    }\n    const q = quality || ((_config_qualities = config.qualities) == null ? void 0 : _config_qualities.reduce((prev, cur)=>Math.abs(cur - DEFAULT_Q) < Math.abs(prev - DEFAULT_Q) ? cur : prev)) || DEFAULT_Q;\n    return config.path + \"?url=\" + encodeURIComponent(src) + \"&w=\" + width + \"&q=\" + q + (src.startsWith('/_next/static/media/') && false ? 0 : '');\n}\n// We use this to determine if the import is the default loader\n// or a custom loader defined by the user in next.config.js\ndefaultLoader.__next_img_default = true;\nconst _default = defaultLoader; //# sourceMappingURL=image-loader.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9pbWFnZS1sb2FkZXIuanMiLCJtYXBwaW5ncyI6Ijs7OzsyQ0F1R0E7OztlQUFBOzs7QUFyR0EsTUFBTUEsWUFBWTtBQUVsQixTQUFTQyxjQUFjLEtBS007SUFMTixNQUNyQkMsTUFBTSxFQUNOQyxHQUFHLEVBQ0hDLEtBQUssRUFDTEMsT0FBTyxFQUNvQixHQUxOO1FBbUZuQkg7SUE3RUYsSUFBSUksSUFBb0IsRUFBbUI7UUFDekMsTUFBTUcsZ0JBQWdCLEVBQUU7UUFFeEIseURBQXlEO1FBQ3pELElBQUksQ0FBQ04sS0FBS00sY0FBY0MsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQ04sT0FBT0ssY0FBY0MsSUFBSSxDQUFDO1FBRS9CLElBQUlELGNBQWNFLE1BQU0sR0FBRyxHQUFHO1lBQzVCLE1BQU0scUJBTUwsQ0FOSyxJQUFJQyxNQUNQLHNDQUFtQ0gsY0FBY0ksSUFBSSxDQUNwRCxRQUNBLGdHQUErRkMsS0FBS0MsU0FBUyxDQUM3RztnQkFBRVo7Z0JBQUtDO2dCQUFPQztZQUFRLEtBSnBCO3VCQUFBOzRCQUFBOzhCQUFBO1lBTU47UUFDRjtRQUVBLElBQUlGLElBQUlhLFVBQVUsQ0FBQyxPQUFPO1lBQ3hCLE1BQU0scUJBRUwsQ0FGSyxJQUFJSixNQUNQLDBCQUF1QlQsTUFBSSwyR0FEeEI7dUJBQUE7NEJBQUE7OEJBQUE7WUFFTjtRQUNGO1FBRUEsSUFBSUEsSUFBSWEsVUFBVSxDQUFDLFFBQVFkLE9BQU9lLGFBQWEsRUFBRTtZQUMvQyxJQUNFWCxJQUVtQyxFQUNuQztnQkFDQSx1RUFBdUU7Z0JBQ3ZFLE1BQU0sRUFBRWEsYUFBYSxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDLDZHQUF1QjtnQkFDekQsSUFBSSxDQUFDRCxjQUFjakIsT0FBT2UsYUFBYSxFQUFFZCxNQUFNO29CQUM3QyxNQUFNLHFCQUdMLENBSEssSUFBSVMsTUFDUCx1QkFBb0JULE1BQUksa0dBQ3RCLDBGQUZDOytCQUFBO29DQUFBO3NDQUFBO29CQUdOO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLElBQUksQ0FBQ0EsSUFBSWEsVUFBVSxDQUFDLFFBQVNkLENBQUFBLE9BQU9tQixPQUFPLElBQUluQixPQUFPb0IsY0FBQUEsR0FBaUI7WUFDckUsSUFBSUM7WUFDSixJQUFJO2dCQUNGQSxZQUFZLElBQUlDLElBQUlyQjtZQUN0QixFQUFFLE9BQU9zQixLQUFLO2dCQUNaQyxRQUFRQyxLQUFLLENBQUNGO2dCQUNkLE1BQU0scUJBRUwsQ0FGSyxJQUFJYixNQUNQLDBCQUF1QlQsTUFBSSxrSUFEeEI7MkJBQUE7Z0NBQUE7a0NBQUE7Z0JBRU47WUFDRjtZQUVBLElBQ0VHLElBRW1DLEVBQ25DO2dCQUNBLHVFQUF1RTtnQkFDdkUsTUFBTSxFQUFFc0IsY0FBYyxFQUFFLEdBQUdSLG1CQUFPQSxDQUFDLCtHQUF3QjtnQkFDM0QsSUFBSSxDQUFDUSxlQUFlMUIsT0FBT21CLE9BQU8sRUFBRW5CLE9BQU9vQixjQUFjLEVBQUVDLFlBQVk7b0JBQ3JFLE1BQU0scUJBR0wsQ0FISyxJQUFJWCxNQUNQLHVCQUFvQlQsTUFBSSxrQ0FBaUNvQixVQUFVTSxRQUFRLEdBQUMsZ0VBQzFFLGlGQUZDOytCQUFBO29DQUFBO3NDQUFBO29CQUdOO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLElBQUl4QixXQUFXSCxPQUFPNEIsU0FBUyxJQUFJLENBQUM1QixPQUFPNEIsU0FBUyxDQUFDQyxRQUFRLENBQUMxQixVQUFVO1lBQ3RFLE1BQU0scUJBR0wsQ0FISyxJQUFJTyxNQUNQLDJCQUF3QlAsVUFBUSw4RkFDOUIsc0ZBRkM7dUJBQUE7NEJBQUE7OEJBQUE7WUFHTjtRQUNGO0lBQ0Y7SUFFQSxNQUFNMkIsSUFDSjNCLFdBQUFBLENBQUFBLENBQ0FILG9CQUFBQSxPQUFPNEIsU0FBQUEsS0FBUyxnQkFBaEI1QixrQkFBa0IrQixNQUFNLENBQUMsQ0FBQ0MsTUFBTUMsTUFDOUJDLEtBQUtDLEdBQUcsQ0FBQ0YsTUFBTW5DLGFBQWFvQyxLQUFLQyxHQUFHLENBQUNILE9BQU9sQyxhQUFhbUMsTUFBTUQsS0FBQUEsS0FFakVsQztJQUVGLE9BQVVFLE9BQU9vQyxJQUFJLEdBQUMsVUFBT0MsbUJBQW1CcEMsT0FBSyxRQUFLQyxRQUFNLFFBQUs0QixJQUNuRTdCLENBQUFBLElBQUlhLFVBQVUsQ0FBQywyQkFBMkJWLEtBQThCLEdBQ25FLENBQXFDLEdBQ3RDLEdBQUM7QUFFVDtBQUVBLCtEQUErRDtBQUMvRCwyREFBMkQ7QUFDM0RMLGNBQWN3QyxrQkFBa0IsR0FBRztNQUVuQyxXQUFleEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2hhcmVkL2xpYi9pbWFnZS1sb2FkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBJbWFnZUxvYWRlclByb3BzV2l0aENvbmZpZyB9IGZyb20gJy4vaW1hZ2UtY29uZmlnJ1xuXG5jb25zdCBERUZBVUxUX1EgPSA3NVxuXG5mdW5jdGlvbiBkZWZhdWx0TG9hZGVyKHtcbiAgY29uZmlnLFxuICBzcmMsXG4gIHdpZHRoLFxuICBxdWFsaXR5LFxufTogSW1hZ2VMb2FkZXJQcm9wc1dpdGhDb25maWcpOiBzdHJpbmcge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGNvbnN0IG1pc3NpbmdWYWx1ZXMgPSBbXVxuXG4gICAgLy8gdGhlc2Ugc2hvdWxkIGFsd2F5cyBiZSBwcm92aWRlZCBidXQgbWFrZSBzdXJlIHRoZXkgYXJlXG4gICAgaWYgKCFzcmMpIG1pc3NpbmdWYWx1ZXMucHVzaCgnc3JjJylcbiAgICBpZiAoIXdpZHRoKSBtaXNzaW5nVmFsdWVzLnB1c2goJ3dpZHRoJylcblxuICAgIGlmIChtaXNzaW5nVmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE5leHQgSW1hZ2UgT3B0aW1pemF0aW9uIHJlcXVpcmVzICR7bWlzc2luZ1ZhbHVlcy5qb2luKFxuICAgICAgICAgICcsICdcbiAgICAgICAgKX0gdG8gYmUgcHJvdmlkZWQuIE1ha2Ugc3VyZSB5b3UgcGFzcyB0aGVtIGFzIHByb3BzIHRvIHRoZSBcXGBuZXh0L2ltYWdlXFxgIGNvbXBvbmVudC4gUmVjZWl2ZWQ6ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgeyBzcmMsIHdpZHRoLCBxdWFsaXR5IH1cbiAgICAgICAgKX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHNyYy5zdGFydHNXaXRoKCcvLycpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gcGFyc2Ugc3JjIFwiJHtzcmN9XCIgb24gXFxgbmV4dC9pbWFnZVxcYCwgcHJvdG9jb2wtcmVsYXRpdmUgVVJMICgvLykgbXVzdCBiZSBjaGFuZ2VkIHRvIGFuIGFic29sdXRlIFVSTCAoaHR0cDovLyBvciBodHRwczovLylgXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHNyYy5zdGFydHNXaXRoKCcvJykgJiYgY29uZmlnLmxvY2FsUGF0dGVybnMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0JyAmJlxuICAgICAgICAvLyBtaWNyb21hdGNoIGlzbid0IGNvbXBhdGlibGUgd2l0aCBlZGdlIHJ1bnRpbWVcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9SVU5USU1FICE9PSAnZWRnZSdcbiAgICAgICkge1xuICAgICAgICAvLyBXZSB1c2UgZHluYW1pYyByZXF1aXJlIGJlY2F1c2UgdGhpcyBzaG91bGQgb25seSBlcnJvciBpbiBkZXZlbG9wbWVudFxuICAgICAgICBjb25zdCB7IGhhc0xvY2FsTWF0Y2ggfSA9IHJlcXVpcmUoJy4vbWF0Y2gtbG9jYWwtcGF0dGVybicpXG4gICAgICAgIGlmICghaGFzTG9jYWxNYXRjaChjb25maWcubG9jYWxQYXR0ZXJucywgc3JjKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBJbnZhbGlkIHNyYyBwcm9wICgke3NyY30pIG9uIFxcYG5leHQvaW1hZ2VcXGAgZG9lcyBub3QgbWF0Y2ggXFxgaW1hZ2VzLmxvY2FsUGF0dGVybnNcXGAgY29uZmlndXJlZCBpbiB5b3VyIFxcYG5leHQuY29uZmlnLmpzXFxgXFxuYCArXG4gICAgICAgICAgICAgIGBTZWUgbW9yZSBpbmZvOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9uZXh0LWltYWdlLXVuY29uZmlndXJlZC1sb2NhbHBhdHRlcm5zYFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghc3JjLnN0YXJ0c1dpdGgoJy8nKSAmJiAoY29uZmlnLmRvbWFpbnMgfHwgY29uZmlnLnJlbW90ZVBhdHRlcm5zKSkge1xuICAgICAgbGV0IHBhcnNlZFNyYzogVVJMXG4gICAgICB0cnkge1xuICAgICAgICBwYXJzZWRTcmMgPSBuZXcgVVJMKHNyYylcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBGYWlsZWQgdG8gcGFyc2Ugc3JjIFwiJHtzcmN9XCIgb24gXFxgbmV4dC9pbWFnZVxcYCwgaWYgdXNpbmcgcmVsYXRpdmUgaW1hZ2UgaXQgbXVzdCBzdGFydCB3aXRoIGEgbGVhZGluZyBzbGFzaCBcIi9cIiBvciBiZSBhbiBhYnNvbHV0ZSBVUkwgKGh0dHA6Ly8gb3IgaHR0cHM6Ly8pYFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0JyAmJlxuICAgICAgICAvLyBtaWNyb21hdGNoIGlzbid0IGNvbXBhdGlibGUgd2l0aCBlZGdlIHJ1bnRpbWVcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9SVU5USU1FICE9PSAnZWRnZSdcbiAgICAgICkge1xuICAgICAgICAvLyBXZSB1c2UgZHluYW1pYyByZXF1aXJlIGJlY2F1c2UgdGhpcyBzaG91bGQgb25seSBlcnJvciBpbiBkZXZlbG9wbWVudFxuICAgICAgICBjb25zdCB7IGhhc1JlbW90ZU1hdGNoIH0gPSByZXF1aXJlKCcuL21hdGNoLXJlbW90ZS1wYXR0ZXJuJylcbiAgICAgICAgaWYgKCFoYXNSZW1vdGVNYXRjaChjb25maWcuZG9tYWlucywgY29uZmlnLnJlbW90ZVBhdHRlcm5zLCBwYXJzZWRTcmMpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEludmFsaWQgc3JjIHByb3AgKCR7c3JjfSkgb24gXFxgbmV4dC9pbWFnZVxcYCwgaG9zdG5hbWUgXCIke3BhcnNlZFNyYy5ob3N0bmFtZX1cIiBpcyBub3QgY29uZmlndXJlZCB1bmRlciBpbWFnZXMgaW4geW91ciBcXGBuZXh0LmNvbmZpZy5qc1xcYFxcbmAgK1xuICAgICAgICAgICAgICBgU2VlIG1vcmUgaW5mbzogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvbmV4dC1pbWFnZS11bmNvbmZpZ3VyZWQtaG9zdGBcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocXVhbGl0eSAmJiBjb25maWcucXVhbGl0aWVzICYmICFjb25maWcucXVhbGl0aWVzLmluY2x1ZGVzKHF1YWxpdHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIHF1YWxpdHkgcHJvcCAoJHtxdWFsaXR5fSkgb24gXFxgbmV4dC9pbWFnZVxcYCBkb2VzIG5vdCBtYXRjaCBcXGBpbWFnZXMucXVhbGl0aWVzXFxgIGNvbmZpZ3VyZWQgaW4geW91ciBcXGBuZXh0LmNvbmZpZy5qc1xcYFxcbmAgK1xuICAgICAgICAgIGBTZWUgbW9yZSBpbmZvOiBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9uZXh0LWltYWdlLXVuY29uZmlndXJlZC1xdWFsaXRpZXNgXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgY29uc3QgcSA9XG4gICAgcXVhbGl0eSB8fFxuICAgIGNvbmZpZy5xdWFsaXRpZXM/LnJlZHVjZSgocHJldiwgY3VyKSA9PlxuICAgICAgTWF0aC5hYnMoY3VyIC0gREVGQVVMVF9RKSA8IE1hdGguYWJzKHByZXYgLSBERUZBVUxUX1EpID8gY3VyIDogcHJldlxuICAgICkgfHxcbiAgICBERUZBVUxUX1FcblxuICByZXR1cm4gYCR7Y29uZmlnLnBhdGh9P3VybD0ke2VuY29kZVVSSUNvbXBvbmVudChzcmMpfSZ3PSR7d2lkdGh9JnE9JHtxfSR7XG4gICAgc3JjLnN0YXJ0c1dpdGgoJy9fbmV4dC9zdGF0aWMvbWVkaWEvJykgJiYgcHJvY2Vzcy5lbnYuTkVYVF9ERVBMT1lNRU5UX0lEXG4gICAgICA/IGAmZHBsPSR7cHJvY2Vzcy5lbnYuTkVYVF9ERVBMT1lNRU5UX0lEfWBcbiAgICAgIDogJydcbiAgfWBcbn1cblxuLy8gV2UgdXNlIHRoaXMgdG8gZGV0ZXJtaW5lIGlmIHRoZSBpbXBvcnQgaXMgdGhlIGRlZmF1bHQgbG9hZGVyXG4vLyBvciBhIGN1c3RvbSBsb2FkZXIgZGVmaW5lZCBieSB0aGUgdXNlciBpbiBuZXh0LmNvbmZpZy5qc1xuZGVmYXVsdExvYWRlci5fX25leHRfaW1nX2RlZmF1bHQgPSB0cnVlXG5cbmV4cG9ydCBkZWZhdWx0IGRlZmF1bHRMb2FkZXJcbiJdLCJuYW1lcyI6WyJERUZBVUxUX1EiLCJkZWZhdWx0TG9hZGVyIiwiY29uZmlnIiwic3JjIiwid2lkdGgiLCJxdWFsaXR5IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwibWlzc2luZ1ZhbHVlcyIsInB1c2giLCJsZW5ndGgiLCJFcnJvciIsImpvaW4iLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhcnRzV2l0aCIsImxvY2FsUGF0dGVybnMiLCJORVhUX1JVTlRJTUUiLCJoYXNMb2NhbE1hdGNoIiwicmVxdWlyZSIsImRvbWFpbnMiLCJyZW1vdGVQYXR0ZXJucyIsInBhcnNlZFNyYyIsIlVSTCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImhhc1JlbW90ZU1hdGNoIiwiaG9zdG5hbWUiLCJxdWFsaXRpZXMiLCJpbmNsdWRlcyIsInEiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyIiwiTWF0aCIsImFicyIsInBhdGgiLCJlbmNvZGVVUklDb21wb25lbnQiLCJORVhUX0RFUExPWU1FTlRfSUQiLCJfX25leHRfaW1nX2RlZmF1bHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/image-loader.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/match-local-pattern.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/match-local-pattern.js ***!
  \******************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    hasLocalMatch: function() {\n        return hasLocalMatch;\n    },\n    matchLocalPattern: function() {\n        return matchLocalPattern;\n    }\n});\nconst _picomatch = __webpack_require__(/*! next/dist/compiled/picomatch */ \"(app-pages-browser)/./node_modules/next/dist/compiled/picomatch/index.js\");\nfunction matchLocalPattern(pattern, url) {\n    if (pattern.search !== undefined) {\n        if (pattern.search !== url.search) {\n            return false;\n        }\n    }\n    var _pattern_pathname;\n    if (!(0, _picomatch.makeRe)((_pattern_pathname = pattern.pathname) != null ? _pattern_pathname : '**', {\n        dot: true\n    }).test(url.pathname)) {\n        return false;\n    }\n    return true;\n}\nfunction hasLocalMatch(localPatterns, urlPathAndQuery) {\n    if (!localPatterns) {\n        // if the user didn't define \"localPatterns\", we allow all local images\n        return true;\n    }\n    const url = new URL(urlPathAndQuery, 'http://n');\n    return localPatterns.some((p)=>matchLocalPattern(p, url));\n} //# sourceMappingURL=match-local-pattern.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9tYXRjaC1sb2NhbC1wYXR0ZXJuLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztJQWtCZ0JBLGFBQWE7ZUFBYkE7O0lBZEFDLGlCQUFpQjtlQUFqQkE7Ozt1Q0FITztBQUdoQixTQUFTQSxrQkFBa0JDLE9BQXFCLEVBQUVDLEdBQVE7SUFDL0QsSUFBSUQsUUFBUUUsTUFBTSxLQUFLQyxXQUFXO1FBQ2hDLElBQUlILFFBQVFFLE1BQU0sS0FBS0QsSUFBSUMsTUFBTSxFQUFFO1lBQ2pDLE9BQU87UUFDVDtJQUNGO1FBRVlGO0lBQVosSUFBSSxDQUFDSSxDQUFBQSxHQUFBQSxXQUFBQSxNQUFBQSxFQUFPSixDQUFBQSxvQkFBQUEsUUFBUUssUUFBQUEsS0FBUSxPQUFoQkwsb0JBQW9CLE1BQU07UUFBRU0sS0FBSztJQUFLLEdBQUdDLElBQUksQ0FBQ04sSUFBSUksUUFBUSxHQUFHO1FBQ3ZFLE9BQU87SUFDVDtJQUVBLE9BQU87QUFDVDtBQUVPLFNBQVNQLGNBQ2RVLGFBQXlDLEVBQ3pDQyxlQUF1QjtJQUV2QixJQUFJLENBQUNELGVBQWU7UUFDbEIsdUVBQXVFO1FBQ3ZFLE9BQU87SUFDVDtJQUNBLE1BQU1QLE1BQU0sSUFBSVMsSUFBSUQsaUJBQWlCO0lBQ3JDLE9BQU9ELGNBQWNHLElBQUksQ0FBQyxDQUFDQyxJQUFNYixrQkFBa0JhLEdBQUdYO0FBQ3hEIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NoYXJlZC9saWIvbWF0Y2gtbG9jYWwtcGF0dGVybi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IExvY2FsUGF0dGVybiB9IGZyb20gJy4vaW1hZ2UtY29uZmlnJ1xuaW1wb3J0IHsgbWFrZVJlIH0gZnJvbSAnbmV4dC9kaXN0L2NvbXBpbGVkL3BpY29tYXRjaCdcblxuLy8gTW9kaWZ5aW5nIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGFsc28gbW9kaWZ5IHdyaXRlSW1hZ2VzTWFuaWZlc3QoKVxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoTG9jYWxQYXR0ZXJuKHBhdHRlcm46IExvY2FsUGF0dGVybiwgdXJsOiBVUkwpOiBib29sZWFuIHtcbiAgaWYgKHBhdHRlcm4uc2VhcmNoICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAocGF0dGVybi5zZWFyY2ggIT09IHVybC5zZWFyY2gpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGlmICghbWFrZVJlKHBhdHRlcm4ucGF0aG5hbWUgPz8gJyoqJywgeyBkb3Q6IHRydWUgfSkudGVzdCh1cmwucGF0aG5hbWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzTG9jYWxNYXRjaChcbiAgbG9jYWxQYXR0ZXJuczogTG9jYWxQYXR0ZXJuW10gfCB1bmRlZmluZWQsXG4gIHVybFBhdGhBbmRRdWVyeTogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgaWYgKCFsb2NhbFBhdHRlcm5zKSB7XG4gICAgLy8gaWYgdGhlIHVzZXIgZGlkbid0IGRlZmluZSBcImxvY2FsUGF0dGVybnNcIiwgd2UgYWxsb3cgYWxsIGxvY2FsIGltYWdlc1xuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgY29uc3QgdXJsID0gbmV3IFVSTCh1cmxQYXRoQW5kUXVlcnksICdodHRwOi8vbicpXG4gIHJldHVybiBsb2NhbFBhdHRlcm5zLnNvbWUoKHApID0+IG1hdGNoTG9jYWxQYXR0ZXJuKHAsIHVybCkpXG59XG4iXSwibmFtZXMiOlsiaGFzTG9jYWxNYXRjaCIsIm1hdGNoTG9jYWxQYXR0ZXJuIiwicGF0dGVybiIsInVybCIsInNlYXJjaCIsInVuZGVmaW5lZCIsIm1ha2VSZSIsInBhdGhuYW1lIiwiZG90IiwidGVzdCIsImxvY2FsUGF0dGVybnMiLCJ1cmxQYXRoQW5kUXVlcnkiLCJVUkwiLCJzb21lIiwicCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/match-local-pattern.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/match-remote-pattern.js":
/*!*******************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/match-remote-pattern.js ***!
  \*******************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    hasRemoteMatch: function() {\n        return hasRemoteMatch;\n    },\n    matchRemotePattern: function() {\n        return matchRemotePattern;\n    }\n});\nconst _picomatch = __webpack_require__(/*! next/dist/compiled/picomatch */ \"(app-pages-browser)/./node_modules/next/dist/compiled/picomatch/index.js\");\nfunction matchRemotePattern(pattern, url) {\n    if (pattern.protocol !== undefined) {\n        const actualProto = url.protocol.slice(0, -1);\n        if (pattern.protocol !== actualProto) {\n            return false;\n        }\n    }\n    if (pattern.port !== undefined) {\n        if (pattern.port !== url.port) {\n            return false;\n        }\n    }\n    if (pattern.hostname === undefined) {\n        throw Object.defineProperty(new Error(\"Pattern should define hostname but found\\n\" + JSON.stringify(pattern)), \"__NEXT_ERROR_CODE\", {\n            value: \"E410\",\n            enumerable: false,\n            configurable: true\n        });\n    } else {\n        if (!(0, _picomatch.makeRe)(pattern.hostname).test(url.hostname)) {\n            return false;\n        }\n    }\n    if (pattern.search !== undefined) {\n        if (pattern.search !== url.search) {\n            return false;\n        }\n    }\n    var _pattern_pathname;\n    // Should be the same as writeImagesManifest()\n    if (!(0, _picomatch.makeRe)((_pattern_pathname = pattern.pathname) != null ? _pattern_pathname : '**', {\n        dot: true\n    }).test(url.pathname)) {\n        return false;\n    }\n    return true;\n}\nfunction hasRemoteMatch(domains, remotePatterns, url) {\n    return domains.some((domain)=>url.hostname === domain) || remotePatterns.some((p)=>matchRemotePattern(p, url));\n} //# sourceMappingURL=match-remote-pattern.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9tYXRjaC1yZW1vdGUtcGF0dGVybi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUF5Q2dCQSxjQUFjO2VBQWRBOztJQXJDQUMsa0JBQWtCO2VBQWxCQTs7O3VDQUhPO0FBR2hCLFNBQVNBLG1CQUFtQkMsT0FBc0IsRUFBRUMsR0FBUTtJQUNqRSxJQUFJRCxRQUFRRSxRQUFRLEtBQUtDLFdBQVc7UUFDbEMsTUFBTUMsY0FBY0gsSUFBSUMsUUFBUSxDQUFDRyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQzNDLElBQUlMLFFBQVFFLFFBQVEsS0FBS0UsYUFBYTtZQUNwQyxPQUFPO1FBQ1Q7SUFDRjtJQUNBLElBQUlKLFFBQVFNLElBQUksS0FBS0gsV0FBVztRQUM5QixJQUFJSCxRQUFRTSxJQUFJLEtBQUtMLElBQUlLLElBQUksRUFBRTtZQUM3QixPQUFPO1FBQ1Q7SUFDRjtJQUVBLElBQUlOLFFBQVFPLFFBQVEsS0FBS0osV0FBVztRQUNsQyxNQUFNLHFCQUVMLENBRkssSUFBSUssTUFDUCwrQ0FBNENDLEtBQUtDLFNBQVMsQ0FBQ1YsV0FEeEQ7bUJBQUE7d0JBQUE7MEJBQUE7UUFFTjtJQUNGLE9BQU87UUFDTCxJQUFJLENBQUNXLENBQUFBLEdBQUFBLFdBQUFBLE1BQUFBLEVBQU9YLFFBQVFPLFFBQVEsRUFBRUssSUFBSSxDQUFDWCxJQUFJTSxRQUFRLEdBQUc7WUFDaEQsT0FBTztRQUNUO0lBQ0Y7SUFFQSxJQUFJUCxRQUFRYSxNQUFNLEtBQUtWLFdBQVc7UUFDaEMsSUFBSUgsUUFBUWEsTUFBTSxLQUFLWixJQUFJWSxNQUFNLEVBQUU7WUFDakMsT0FBTztRQUNUO0lBQ0Y7UUFHWWI7SUFEWiw4Q0FBOEM7SUFDOUMsSUFBSSxDQUFDVyxDQUFBQSxHQUFBQSxXQUFBQSxNQUFBQSxFQUFPWCxDQUFBQSxvQkFBQUEsUUFBUWMsUUFBQUEsS0FBUSxPQUFoQmQsb0JBQW9CLE1BQU07UUFBRWUsS0FBSztJQUFLLEdBQUdILElBQUksQ0FBQ1gsSUFBSWEsUUFBUSxHQUFHO1FBQ3ZFLE9BQU87SUFDVDtJQUVBLE9BQU87QUFDVDtBQUVPLFNBQVNoQixlQUNka0IsT0FBaUIsRUFDakJDLGNBQStCLEVBQy9CaEIsR0FBUTtJQUVSLE9BQ0VlLFFBQVFFLElBQUksQ0FBQyxDQUFDQyxTQUFXbEIsSUFBSU0sUUFBUSxLQUFLWSxXQUMxQ0YsZUFBZUMsSUFBSSxDQUFDLENBQUNFLElBQU1yQixtQkFBbUJxQixHQUFHbkI7QUFFckQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2hhcmVkL2xpYi9tYXRjaC1yZW1vdGUtcGF0dGVybi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJlbW90ZVBhdHRlcm4gfSBmcm9tICcuL2ltYWdlLWNvbmZpZydcbmltcG9ydCB7IG1ha2VSZSB9IGZyb20gJ25leHQvZGlzdC9jb21waWxlZC9waWNvbWF0Y2gnXG5cbi8vIE1vZGlmeWluZyB0aGlzIGZ1bmN0aW9uIHNob3VsZCBhbHNvIG1vZGlmeSB3cml0ZUltYWdlc01hbmlmZXN0KClcbmV4cG9ydCBmdW5jdGlvbiBtYXRjaFJlbW90ZVBhdHRlcm4ocGF0dGVybjogUmVtb3RlUGF0dGVybiwgdXJsOiBVUkwpOiBib29sZWFuIHtcbiAgaWYgKHBhdHRlcm4ucHJvdG9jb2wgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGFjdHVhbFByb3RvID0gdXJsLnByb3RvY29sLnNsaWNlKDAsIC0xKVxuICAgIGlmIChwYXR0ZXJuLnByb3RvY29sICE9PSBhY3R1YWxQcm90bykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG4gIGlmIChwYXR0ZXJuLnBvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChwYXR0ZXJuLnBvcnQgIT09IHVybC5wb3J0KSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBpZiAocGF0dGVybi5ob3N0bmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFBhdHRlcm4gc2hvdWxkIGRlZmluZSBob3N0bmFtZSBidXQgZm91bmRcXG4ke0pTT04uc3RyaW5naWZ5KHBhdHRlcm4pfWBcbiAgICApXG4gIH0gZWxzZSB7XG4gICAgaWYgKCFtYWtlUmUocGF0dGVybi5ob3N0bmFtZSkudGVzdCh1cmwuaG9zdG5hbWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBpZiAocGF0dGVybi5zZWFyY2ggIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChwYXR0ZXJuLnNlYXJjaCAhPT0gdXJsLnNlYXJjaCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8gU2hvdWxkIGJlIHRoZSBzYW1lIGFzIHdyaXRlSW1hZ2VzTWFuaWZlc3QoKVxuICBpZiAoIW1ha2VSZShwYXR0ZXJuLnBhdGhuYW1lID8/ICcqKicsIHsgZG90OiB0cnVlIH0pLnRlc3QodXJsLnBhdGhuYW1lKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1JlbW90ZU1hdGNoKFxuICBkb21haW5zOiBzdHJpbmdbXSxcbiAgcmVtb3RlUGF0dGVybnM6IFJlbW90ZVBhdHRlcm5bXSxcbiAgdXJsOiBVUkxcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIGRvbWFpbnMuc29tZSgoZG9tYWluKSA9PiB1cmwuaG9zdG5hbWUgPT09IGRvbWFpbikgfHxcbiAgICByZW1vdGVQYXR0ZXJucy5zb21lKChwKSA9PiBtYXRjaFJlbW90ZVBhdHRlcm4ocCwgdXJsKSlcbiAgKVxufVxuIl0sIm5hbWVzIjpbImhhc1JlbW90ZU1hdGNoIiwibWF0Y2hSZW1vdGVQYXR0ZXJuIiwicGF0dGVybiIsInVybCIsInByb3RvY29sIiwidW5kZWZpbmVkIiwiYWN0dWFsUHJvdG8iLCJzbGljZSIsInBvcnQiLCJob3N0bmFtZSIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1ha2VSZSIsInRlc3QiLCJzZWFyY2giLCJwYXRobmFtZSIsImRvdCIsImRvbWFpbnMiLCJyZW1vdGVQYXR0ZXJucyIsInNvbWUiLCJkb21haW4iLCJwIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/match-remote-pattern.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/router-context.shared-runtime.js":
/*!****************************************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/router-context.shared-runtime.js ***!
  \****************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"RouterContext\", ({\n    enumerable: true,\n    get: function() {\n        return RouterContext;\n    }\n}));\nconst _interop_require_default = __webpack_require__(/*! @swc/helpers/_/_interop_require_default */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_interop_require_default.js\");\nconst _react = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"));\nconst RouterContext = _react.default.createContext(null);\nif (true) {\n    RouterContext.displayName = 'RouterContext';\n} //# sourceMappingURL=router-context.shared-runtime.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXItY29udGV4dC5zaGFyZWQtcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7O2lEQUdhQTs7O2VBQUFBOzs7OzRFQUhLO0FBR1gsTUFBTUEsZ0JBQWdCQyxPQUFBQSxPQUFLLENBQUNDLGFBQWEsQ0FBb0I7QUFFcEUsSUFBSUMsSUFBb0IsRUFBbUI7SUFDekNILGNBQWNNLFdBQVcsR0FBRztBQUM5QiIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy9zaGFyZWQvbGliL3JvdXRlci1jb250ZXh0LnNoYXJlZC1ydW50aW1lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB0eXBlIHsgTmV4dFJvdXRlciB9IGZyb20gJy4vcm91dGVyL3JvdXRlcidcblxuZXhwb3J0IGNvbnN0IFJvdXRlckNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PE5leHRSb3V0ZXIgfCBudWxsPihudWxsKVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBSb3V0ZXJDb250ZXh0LmRpc3BsYXlOYW1lID0gJ1JvdXRlckNvbnRleHQnXG59XG4iXSwibmFtZXMiOlsiUm91dGVyQ29udGV4dCIsIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImRpc3BsYXlOYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/router-context.shared-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/shared/lib/side-effect.js":
/*!**********************************************************!*\
  !*** ./node_modules/next/dist/shared/lib/side-effect.js ***!
  \**********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nvar _s = $RefreshSig$();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"default\", ({\n    enumerable: true,\n    get: function() {\n        return SideEffect;\n    }\n}));\nconst _react = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\nconst isServer = \"object\" === 'undefined';\nconst useClientOnlyLayoutEffect = isServer ? ()=>{} : _react.useLayoutEffect;\nconst useClientOnlyEffect = isServer ? ()=>{} : _react.useEffect;\nfunction SideEffect(props) {\n    _s();\n    const { headManager, reduceComponentsToState } = props;\n    function emitChange() {\n        if (headManager && headManager.mountedInstances) {\n            const headElements = _react.Children.toArray(Array.from(headManager.mountedInstances).filter(Boolean));\n            headManager.updateHead(reduceComponentsToState(headElements, props));\n        }\n    }\n    if (isServer) {\n        var _headManager_mountedInstances;\n        headManager == null ? void 0 : (_headManager_mountedInstances = headManager.mountedInstances) == null ? void 0 : _headManager_mountedInstances.add(props.children);\n        emitChange();\n    }\n    useClientOnlyLayoutEffect({\n        \"SideEffect.useClientOnlyLayoutEffect\": ()=>{\n            var _headManager_mountedInstances;\n            headManager == null ? void 0 : (_headManager_mountedInstances = headManager.mountedInstances) == null ? void 0 : _headManager_mountedInstances.add(props.children);\n            return ({\n                \"SideEffect.useClientOnlyLayoutEffect\": ()=>{\n                    var _headManager_mountedInstances;\n                    headManager == null ? void 0 : (_headManager_mountedInstances = headManager.mountedInstances) == null ? void 0 : _headManager_mountedInstances.delete(props.children);\n                }\n            })[\"SideEffect.useClientOnlyLayoutEffect\"];\n        }\n    }[\"SideEffect.useClientOnlyLayoutEffect\"]);\n    // We need to call `updateHead` method whenever the `SideEffect` is trigger in all\n    // life-cycles: mount, update, unmount. However, if there are multiple `SideEffect`s\n    // being rendered, we only trigger the method from the last one.\n    // This is ensured by keeping the last unflushed `updateHead` in the `_pendingUpdate`\n    // singleton in the layout effect pass, and actually trigger it in the effect pass.\n    useClientOnlyLayoutEffect({\n        \"SideEffect.useClientOnlyLayoutEffect\": ()=>{\n            if (headManager) {\n                headManager._pendingUpdate = emitChange;\n            }\n            return ({\n                \"SideEffect.useClientOnlyLayoutEffect\": ()=>{\n                    if (headManager) {\n                        headManager._pendingUpdate = emitChange;\n                    }\n                }\n            })[\"SideEffect.useClientOnlyLayoutEffect\"];\n        }\n    }[\"SideEffect.useClientOnlyLayoutEffect\"]);\n    useClientOnlyEffect({\n        \"SideEffect.useClientOnlyEffect\": ()=>{\n            if (headManager && headManager._pendingUpdate) {\n                headManager._pendingUpdate();\n                headManager._pendingUpdate = null;\n            }\n            return ({\n                \"SideEffect.useClientOnlyEffect\": ()=>{\n                    if (headManager && headManager._pendingUpdate) {\n                        headManager._pendingUpdate();\n                        headManager._pendingUpdate = null;\n                    }\n                }\n            })[\"SideEffect.useClientOnlyEffect\"];\n        }\n    }[\"SideEffect.useClientOnlyEffect\"]);\n    return null;\n} //# sourceMappingURL=side-effect.js.map\n_s(SideEffect, \"gHVkikNHNxjVdD11eJBzaqkCiPY=\", false, function() {\n    return [\n        useClientOnlyLayoutEffect,\n        useClientOnlyLayoutEffect,\n        useClientOnlyEffect\n    ];\n});\n_c = SideEffect;\nvar _c;\n$RefreshReg$(_c, \"SideEffect\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9zaWRlLWVmZmVjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7MkNBb0JBOzs7ZUFBd0JBOzs7bUNBbkJ1QztBQWUvRCxNQUFNQyxXQUFXLE9BQU9DLE1BQVc7QUFDbkMsTUFBTUMsNEJBQTRCRixXQUFXLEtBQU8sSUFBSUcsT0FBQUEsZUFBZTtBQUN2RSxNQUFNQyxzQkFBc0JKLFdBQVcsS0FBTyxJQUFJSyxPQUFBQSxTQUFTO0FBRTVDLG9CQUFvQkMsS0FBc0I7O0lBQ3ZELE1BQU0sRUFBRUMsV0FBVyxFQUFFQyx1QkFBdUIsRUFBRSxHQUFHRjtJQUVqRCxTQUFTRztRQUNQLElBQUlGLGVBQWVBLFlBQVlHLGdCQUFnQixFQUFFO1lBQy9DLE1BQU1DLGVBQWVDLE9BQUFBLFFBQVEsQ0FBQ0MsT0FBTyxDQUNuQ0MsTUFBTUMsSUFBSSxDQUFDUixZQUFZRyxnQkFBZ0IsRUFBMEJNLE1BQU0sQ0FDckVDO1lBR0pWLFlBQVlXLFVBQVUsQ0FBQ1Ysd0JBQXdCRyxjQUFjTDtRQUMvRDtJQUNGO0lBRUEsSUFBSU4sVUFBVTtZQUNaTztRQUFBQSxlQUFBQSxPQUFBQSxLQUFBQSxJQUFBQSxDQUFBQSxnQ0FBQUEsWUFBYUcsZ0JBQUFBLEtBQWdCLGdCQUE3QkgsOEJBQStCWSxHQUFHLENBQUNiLE1BQU1jLFFBQVE7UUFDakRYO0lBQ0Y7O2dEQUUwQjtnQkFDeEJGO1lBQUFBLGVBQUFBLE9BQUFBLEtBQUFBLElBQUFBLENBQUFBLGdDQUFBQSxZQUFhRyxnQkFBQUEsS0FBZ0IsZ0JBQTdCSCw4QkFBK0JZLEdBQUcsQ0FBQ2IsTUFBTWMsUUFBUTtZQUNqRDt3REFBTzt3QkFDTGI7b0JBQUFBLGVBQUFBLE9BQUFBLEtBQUFBLElBQUFBLENBQUFBLGdDQUFBQSxZQUFhRyxnQkFBQUEsS0FBZ0IsZ0JBQTdCSCw4QkFBK0JjLE1BQU0sQ0FBQ2YsTUFBTWMsUUFBUTtnQkFDdEQ7O1FBQ0Y7O0lBRUEsa0ZBQWtGO0lBQ2xGLG9GQUFvRjtJQUNwRixnRUFBZ0U7SUFDaEUscUZBQXFGO0lBQ3JGLG1GQUFtRjs7Z0RBQ3pEO1lBQ3hCLElBQUliLGFBQWE7Z0JBQ2ZBLFlBQVllLGNBQWMsR0FBR2I7WUFDL0I7WUFDQTt3REFBTztvQkFDTCxJQUFJRixhQUFhO3dCQUNmQSxZQUFZZSxjQUFjLEdBQUdiO29CQUMvQjtnQkFDRjs7UUFDRjs7OzBDQUVvQjtZQUNsQixJQUFJRixlQUFlQSxZQUFZZSxjQUFjLEVBQUU7Z0JBQzdDZixZQUFZZSxjQUFjO2dCQUMxQmYsWUFBWWUsY0FBYyxHQUFHO1lBQy9CO1lBQ0E7a0RBQU87b0JBQ0wsSUFBSWYsZUFBZUEsWUFBWWUsY0FBYyxFQUFFO3dCQUM3Q2YsWUFBWWUsY0FBYzt3QkFDMUJmLFlBQVllLGNBQWMsR0FBRztvQkFDL0I7Z0JBQ0Y7O1FBQ0Y7O0lBRUEsT0FBTztBQUNUOzs7UUFyQ0VwQjtRQVlBQTtRQVdBRTs7O0tBMUNzQkwiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2hhcmVkL2xpYi9zaWRlLWVmZmVjdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBDaGlsZHJlbiwgdXNlRWZmZWN0LCB1c2VMYXlvdXRFZmZlY3QsIHR5cGUgSlNYIH0gZnJvbSAncmVhY3QnXG5cbnR5cGUgU3RhdGUgPSBKU1guRWxlbWVudFtdIHwgdW5kZWZpbmVkXG5cbmV4cG9ydCB0eXBlIFNpZGVFZmZlY3RQcm9wcyA9IHtcbiAgcmVkdWNlQ29tcG9uZW50c1RvU3RhdGU6IDxUIGV4dGVuZHMge30+KFxuICAgIGNvbXBvbmVudHM6IEFycmF5PFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+PixcbiAgICBwcm9wczogVFxuICApID0+IFN0YXRlXG4gIGhhbmRsZVN0YXRlQ2hhbmdlPzogKHN0YXRlOiBTdGF0ZSkgPT4gdm9pZFxuICBoZWFkTWFuYWdlcjogYW55XG4gIGluQW1wTW9kZT86IGJvb2xlYW5cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZVxufVxuXG5jb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnXG5jb25zdCB1c2VDbGllbnRPbmx5TGF5b3V0RWZmZWN0ID0gaXNTZXJ2ZXIgPyAoKSA9PiB7fSA6IHVzZUxheW91dEVmZmVjdFxuY29uc3QgdXNlQ2xpZW50T25seUVmZmVjdCA9IGlzU2VydmVyID8gKCkgPT4ge30gOiB1c2VFZmZlY3RcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU2lkZUVmZmVjdChwcm9wczogU2lkZUVmZmVjdFByb3BzKSB7XG4gIGNvbnN0IHsgaGVhZE1hbmFnZXIsIHJlZHVjZUNvbXBvbmVudHNUb1N0YXRlIH0gPSBwcm9wc1xuXG4gIGZ1bmN0aW9uIGVtaXRDaGFuZ2UoKSB7XG4gICAgaWYgKGhlYWRNYW5hZ2VyICYmIGhlYWRNYW5hZ2VyLm1vdW50ZWRJbnN0YW5jZXMpIHtcbiAgICAgIGNvbnN0IGhlYWRFbGVtZW50cyA9IENoaWxkcmVuLnRvQXJyYXkoXG4gICAgICAgIEFycmF5LmZyb20oaGVhZE1hbmFnZXIubW91bnRlZEluc3RhbmNlcyBhcyBTZXQ8UmVhY3QuUmVhY3ROb2RlPikuZmlsdGVyKFxuICAgICAgICAgIEJvb2xlYW5cbiAgICAgICAgKVxuICAgICAgKSBhcyBSZWFjdC5SZWFjdEVsZW1lbnRbXVxuICAgICAgaGVhZE1hbmFnZXIudXBkYXRlSGVhZChyZWR1Y2VDb21wb25lbnRzVG9TdGF0ZShoZWFkRWxlbWVudHMsIHByb3BzKSlcbiAgICB9XG4gIH1cblxuICBpZiAoaXNTZXJ2ZXIpIHtcbiAgICBoZWFkTWFuYWdlcj8ubW91bnRlZEluc3RhbmNlcz8uYWRkKHByb3BzLmNoaWxkcmVuKVxuICAgIGVtaXRDaGFuZ2UoKVxuICB9XG5cbiAgdXNlQ2xpZW50T25seUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaGVhZE1hbmFnZXI/Lm1vdW50ZWRJbnN0YW5jZXM/LmFkZChwcm9wcy5jaGlsZHJlbilcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaGVhZE1hbmFnZXI/Lm1vdW50ZWRJbnN0YW5jZXM/LmRlbGV0ZShwcm9wcy5jaGlsZHJlbilcbiAgICB9XG4gIH0pXG5cbiAgLy8gV2UgbmVlZCB0byBjYWxsIGB1cGRhdGVIZWFkYCBtZXRob2Qgd2hlbmV2ZXIgdGhlIGBTaWRlRWZmZWN0YCBpcyB0cmlnZ2VyIGluIGFsbFxuICAvLyBsaWZlLWN5Y2xlczogbW91bnQsIHVwZGF0ZSwgdW5tb3VudC4gSG93ZXZlciwgaWYgdGhlcmUgYXJlIG11bHRpcGxlIGBTaWRlRWZmZWN0YHNcbiAgLy8gYmVpbmcgcmVuZGVyZWQsIHdlIG9ubHkgdHJpZ2dlciB0aGUgbWV0aG9kIGZyb20gdGhlIGxhc3Qgb25lLlxuICAvLyBUaGlzIGlzIGVuc3VyZWQgYnkga2VlcGluZyB0aGUgbGFzdCB1bmZsdXNoZWQgYHVwZGF0ZUhlYWRgIGluIHRoZSBgX3BlbmRpbmdVcGRhdGVgXG4gIC8vIHNpbmdsZXRvbiBpbiB0aGUgbGF5b3V0IGVmZmVjdCBwYXNzLCBhbmQgYWN0dWFsbHkgdHJpZ2dlciBpdCBpbiB0aGUgZWZmZWN0IHBhc3MuXG4gIHVzZUNsaWVudE9ubHlMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChoZWFkTWFuYWdlcikge1xuICAgICAgaGVhZE1hbmFnZXIuX3BlbmRpbmdVcGRhdGUgPSBlbWl0Q2hhbmdlXG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoaGVhZE1hbmFnZXIpIHtcbiAgICAgICAgaGVhZE1hbmFnZXIuX3BlbmRpbmdVcGRhdGUgPSBlbWl0Q2hhbmdlXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIHVzZUNsaWVudE9ubHlFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChoZWFkTWFuYWdlciAmJiBoZWFkTWFuYWdlci5fcGVuZGluZ1VwZGF0ZSkge1xuICAgICAgaGVhZE1hbmFnZXIuX3BlbmRpbmdVcGRhdGUoKVxuICAgICAgaGVhZE1hbmFnZXIuX3BlbmRpbmdVcGRhdGUgPSBudWxsXG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoaGVhZE1hbmFnZXIgJiYgaGVhZE1hbmFnZXIuX3BlbmRpbmdVcGRhdGUpIHtcbiAgICAgICAgaGVhZE1hbmFnZXIuX3BlbmRpbmdVcGRhdGUoKVxuICAgICAgICBoZWFkTWFuYWdlci5fcGVuZGluZ1VwZGF0ZSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIG51bGxcbn1cbiJdLCJuYW1lcyI6WyJTaWRlRWZmZWN0IiwiaXNTZXJ2ZXIiLCJ3aW5kb3ciLCJ1c2VDbGllbnRPbmx5TGF5b3V0RWZmZWN0IiwidXNlTGF5b3V0RWZmZWN0IiwidXNlQ2xpZW50T25seUVmZmVjdCIsInVzZUVmZmVjdCIsInByb3BzIiwiaGVhZE1hbmFnZXIiLCJyZWR1Y2VDb21wb25lbnRzVG9TdGF0ZSIsImVtaXRDaGFuZ2UiLCJtb3VudGVkSW5zdGFuY2VzIiwiaGVhZEVsZW1lbnRzIiwiQ2hpbGRyZW4iLCJ0b0FycmF5IiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwiQm9vbGVhbiIsInVwZGF0ZUhlYWQiLCJhZGQiLCJjaGlsZHJlbiIsImRlbGV0ZSIsIl9wZW5kaW5nVXBkYXRlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/side-effect.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/pkijs/build/index.es.js":
/*!**********************************************!*\
  !*** ./node_modules/pkijs/build/index.es.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbstractCryptoEngine: () => (/* binding */ AbstractCryptoEngine),\n/* harmony export */   AccessDescription: () => (/* binding */ AccessDescription),\n/* harmony export */   Accuracy: () => (/* binding */ Accuracy),\n/* harmony export */   AlgorithmIdentifier: () => (/* binding */ AlgorithmIdentifier),\n/* harmony export */   AltName: () => (/* binding */ AltName),\n/* harmony export */   ArgumentError: () => (/* binding */ ArgumentError),\n/* harmony export */   AsnError: () => (/* binding */ AsnError),\n/* harmony export */   AttCertValidityPeriod: () => (/* binding */ AttCertValidityPeriod),\n/* harmony export */   Attribute: () => (/* binding */ Attribute),\n/* harmony export */   AttributeCertificateInfoV1: () => (/* binding */ AttributeCertificateInfoV1),\n/* harmony export */   AttributeCertificateInfoV2: () => (/* binding */ AttributeCertificateInfoV2),\n/* harmony export */   AttributeCertificateV1: () => (/* binding */ AttributeCertificateV1),\n/* harmony export */   AttributeCertificateV2: () => (/* binding */ AttributeCertificateV2),\n/* harmony export */   AttributeTypeAndValue: () => (/* binding */ AttributeTypeAndValue),\n/* harmony export */   AuthenticatedSafe: () => (/* binding */ AuthenticatedSafe),\n/* harmony export */   AuthorityKeyIdentifier: () => (/* binding */ AuthorityKeyIdentifier),\n/* harmony export */   BasicConstraints: () => (/* binding */ BasicConstraints),\n/* harmony export */   BasicOCSPResponse: () => (/* binding */ BasicOCSPResponse),\n/* harmony export */   CAVersion: () => (/* binding */ CAVersion),\n/* harmony export */   CRLBag: () => (/* binding */ CRLBag),\n/* harmony export */   CRLDistributionPoints: () => (/* binding */ CRLDistributionPoints),\n/* harmony export */   CertBag: () => (/* binding */ CertBag),\n/* harmony export */   CertID: () => (/* binding */ CertID),\n/* harmony export */   Certificate: () => (/* binding */ Certificate),\n/* harmony export */   CertificateChainValidationEngine: () => (/* binding */ CertificateChainValidationEngine),\n/* harmony export */   CertificatePolicies: () => (/* binding */ CertificatePolicies),\n/* harmony export */   CertificateRevocationList: () => (/* binding */ CertificateRevocationList),\n/* harmony export */   CertificateSet: () => (/* binding */ CertificateSet),\n/* harmony export */   CertificateTemplate: () => (/* binding */ CertificateTemplate),\n/* harmony export */   CertificationRequest: () => (/* binding */ CertificationRequest),\n/* harmony export */   ChainValidationCode: () => (/* binding */ ChainValidationCode),\n/* harmony export */   ChainValidationError: () => (/* binding */ ChainValidationError),\n/* harmony export */   ContentInfo: () => (/* binding */ ContentInfo),\n/* harmony export */   CryptoEngine: () => (/* binding */ CryptoEngine),\n/* harmony export */   DigestInfo: () => (/* binding */ DigestInfo),\n/* harmony export */   DistributionPoint: () => (/* binding */ DistributionPoint),\n/* harmony export */   ECCCMSSharedInfo: () => (/* binding */ ECCCMSSharedInfo),\n/* harmony export */   ECNamedCurves: () => (/* binding */ ECNamedCurves),\n/* harmony export */   ECPrivateKey: () => (/* binding */ ECPrivateKey),\n/* harmony export */   ECPublicKey: () => (/* binding */ ECPublicKey),\n/* harmony export */   EncapsulatedContentInfo: () => (/* binding */ EncapsulatedContentInfo),\n/* harmony export */   EncryptedContentInfo: () => (/* binding */ EncryptedContentInfo),\n/* harmony export */   EncryptedData: () => (/* binding */ EncryptedData),\n/* harmony export */   EnvelopedData: () => (/* binding */ EnvelopedData),\n/* harmony export */   ExtKeyUsage: () => (/* binding */ ExtKeyUsage),\n/* harmony export */   Extension: () => (/* binding */ Extension),\n/* harmony export */   ExtensionValueFactory: () => (/* binding */ ExtensionValueFactory),\n/* harmony export */   Extensions: () => (/* binding */ Extensions),\n/* harmony export */   GeneralName: () => (/* binding */ GeneralName),\n/* harmony export */   GeneralNames: () => (/* binding */ GeneralNames),\n/* harmony export */   GeneralSubtree: () => (/* binding */ GeneralSubtree),\n/* harmony export */   HASHED_MESSAGE: () => (/* binding */ HASHED_MESSAGE),\n/* harmony export */   HASH_ALGORITHM: () => (/* binding */ HASH_ALGORITHM),\n/* harmony export */   Holder: () => (/* binding */ Holder),\n/* harmony export */   InfoAccess: () => (/* binding */ InfoAccess),\n/* harmony export */   IssuerAndSerialNumber: () => (/* binding */ IssuerAndSerialNumber),\n/* harmony export */   IssuerSerial: () => (/* binding */ IssuerSerial),\n/* harmony export */   IssuingDistributionPoint: () => (/* binding */ IssuingDistributionPoint),\n/* harmony export */   KEKIdentifier: () => (/* binding */ KEKIdentifier),\n/* harmony export */   KEKRecipientInfo: () => (/* binding */ KEKRecipientInfo),\n/* harmony export */   KeyAgreeRecipientIdentifier: () => (/* binding */ KeyAgreeRecipientIdentifier),\n/* harmony export */   KeyAgreeRecipientInfo: () => (/* binding */ KeyAgreeRecipientInfo),\n/* harmony export */   KeyBag: () => (/* binding */ KeyBag),\n/* harmony export */   KeyTransRecipientInfo: () => (/* binding */ KeyTransRecipientInfo),\n/* harmony export */   MICROS: () => (/* binding */ MICROS),\n/* harmony export */   MILLIS: () => (/* binding */ MILLIS),\n/* harmony export */   MacData: () => (/* binding */ MacData),\n/* harmony export */   MessageImprint: () => (/* binding */ MessageImprint),\n/* harmony export */   NameConstraints: () => (/* binding */ NameConstraints),\n/* harmony export */   OCSPRequest: () => (/* binding */ OCSPRequest),\n/* harmony export */   OCSPResponse: () => (/* binding */ OCSPResponse),\n/* harmony export */   ObjectDigestInfo: () => (/* binding */ ObjectDigestInfo),\n/* harmony export */   OriginatorIdentifierOrKey: () => (/* binding */ OriginatorIdentifierOrKey),\n/* harmony export */   OriginatorInfo: () => (/* binding */ OriginatorInfo),\n/* harmony export */   OriginatorPublicKey: () => (/* binding */ OriginatorPublicKey),\n/* harmony export */   OtherCertificateFormat: () => (/* binding */ OtherCertificateFormat),\n/* harmony export */   OtherKeyAttribute: () => (/* binding */ OtherKeyAttribute),\n/* harmony export */   OtherPrimeInfo: () => (/* binding */ OtherPrimeInfo),\n/* harmony export */   OtherRecipientInfo: () => (/* binding */ OtherRecipientInfo),\n/* harmony export */   OtherRevocationInfoFormat: () => (/* binding */ OtherRevocationInfoFormat),\n/* harmony export */   PBES2Params: () => (/* binding */ PBES2Params),\n/* harmony export */   PBKDF2Params: () => (/* binding */ PBKDF2Params),\n/* harmony export */   PFX: () => (/* binding */ PFX),\n/* harmony export */   PKCS8ShroudedKeyBag: () => (/* binding */ PKCS8ShroudedKeyBag),\n/* harmony export */   PKIStatus: () => (/* binding */ PKIStatus),\n/* harmony export */   PKIStatusInfo: () => (/* binding */ PKIStatusInfo),\n/* harmony export */   POLICY_IDENTIFIER: () => (/* binding */ POLICY_IDENTIFIER),\n/* harmony export */   POLICY_QUALIFIERS: () => (/* binding */ POLICY_QUALIFIERS),\n/* harmony export */   ParameterError: () => (/* binding */ ParameterError),\n/* harmony export */   PasswordRecipientinfo: () => (/* binding */ PasswordRecipientinfo),\n/* harmony export */   PkiObject: () => (/* binding */ PkiObject),\n/* harmony export */   PolicyConstraints: () => (/* binding */ PolicyConstraints),\n/* harmony export */   PolicyInformation: () => (/* binding */ PolicyInformation),\n/* harmony export */   PolicyMapping: () => (/* binding */ PolicyMapping),\n/* harmony export */   PolicyMappings: () => (/* binding */ PolicyMappings),\n/* harmony export */   PolicyQualifierInfo: () => (/* binding */ PolicyQualifierInfo),\n/* harmony export */   PrivateKeyInfo: () => (/* binding */ PrivateKeyInfo),\n/* harmony export */   PrivateKeyUsagePeriod: () => (/* binding */ PrivateKeyUsagePeriod),\n/* harmony export */   PublicKeyInfo: () => (/* binding */ PublicKeyInfo),\n/* harmony export */   QCStatement: () => (/* binding */ QCStatement),\n/* harmony export */   QCStatements: () => (/* binding */ QCStatements),\n/* harmony export */   RDN: () => (/* binding */ RDN),\n/* harmony export */   RSAESOAEPParams: () => (/* binding */ RSAESOAEPParams),\n/* harmony export */   RSAPrivateKey: () => (/* binding */ RSAPrivateKey),\n/* harmony export */   RSAPublicKey: () => (/* binding */ RSAPublicKey),\n/* harmony export */   RSASSAPSSParams: () => (/* binding */ RSASSAPSSParams),\n/* harmony export */   RecipientEncryptedKey: () => (/* binding */ RecipientEncryptedKey),\n/* harmony export */   RecipientEncryptedKeys: () => (/* binding */ RecipientEncryptedKeys),\n/* harmony export */   RecipientIdentifier: () => (/* binding */ RecipientIdentifier),\n/* harmony export */   RecipientInfo: () => (/* binding */ RecipientInfo),\n/* harmony export */   RecipientKeyIdentifier: () => (/* binding */ RecipientKeyIdentifier),\n/* harmony export */   RelativeDistinguishedNames: () => (/* binding */ RelativeDistinguishedNames),\n/* harmony export */   Request: () => (/* binding */ Request),\n/* harmony export */   ResponseBytes: () => (/* binding */ ResponseBytes),\n/* harmony export */   ResponseData: () => (/* binding */ ResponseData),\n/* harmony export */   RevocationInfoChoices: () => (/* binding */ RevocationInfoChoices),\n/* harmony export */   RevokedCertificate: () => (/* binding */ RevokedCertificate),\n/* harmony export */   SECONDS: () => (/* binding */ SECONDS),\n/* harmony export */   SafeBag: () => (/* binding */ SafeBag),\n/* harmony export */   SafeBagValueFactory: () => (/* binding */ SafeBagValueFactory),\n/* harmony export */   SafeContents: () => (/* binding */ SafeContents),\n/* harmony export */   SecretBag: () => (/* binding */ SecretBag),\n/* harmony export */   Signature: () => (/* binding */ Signature),\n/* harmony export */   SignedAndUnsignedAttributes: () => (/* binding */ SignedAndUnsignedAttributes),\n/* harmony export */   SignedCertificateTimestamp: () => (/* binding */ SignedCertificateTimestamp),\n/* harmony export */   SignedCertificateTimestampList: () => (/* binding */ SignedCertificateTimestampList),\n/* harmony export */   SignedData: () => (/* binding */ SignedData),\n/* harmony export */   SignedDataVerifyError: () => (/* binding */ SignedDataVerifyError),\n/* harmony export */   SignerInfo: () => (/* binding */ SignerInfo),\n/* harmony export */   SingleResponse: () => (/* binding */ SingleResponse),\n/* harmony export */   SubjectDirectoryAttributes: () => (/* binding */ SubjectDirectoryAttributes),\n/* harmony export */   TBSRequest: () => (/* binding */ TBSRequest),\n/* harmony export */   TSTInfo: () => (/* binding */ TSTInfo),\n/* harmony export */   TYPE: () => (/* binding */ TYPE$4),\n/* harmony export */   TYPE_AND_VALUES: () => (/* binding */ TYPE_AND_VALUES),\n/* harmony export */   Time: () => (/* binding */ Time),\n/* harmony export */   TimeStampReq: () => (/* binding */ TimeStampReq),\n/* harmony export */   TimeStampResp: () => (/* binding */ TimeStampResp),\n/* harmony export */   TimeType: () => (/* binding */ TimeType),\n/* harmony export */   V2Form: () => (/* binding */ V2Form),\n/* harmony export */   VALUE: () => (/* binding */ VALUE$5),\n/* harmony export */   VALUE_BEFORE_DECODE: () => (/* binding */ VALUE_BEFORE_DECODE),\n/* harmony export */   checkCA: () => (/* binding */ checkCA),\n/* harmony export */   createCMSECDSASignature: () => (/* binding */ createCMSECDSASignature),\n/* harmony export */   createECDSASignatureFromCMS: () => (/* binding */ createECDSASignatureFromCMS),\n/* harmony export */   engine: () => (/* binding */ engine),\n/* harmony export */   getAlgorithmByOID: () => (/* binding */ getAlgorithmByOID),\n/* harmony export */   getAlgorithmParameters: () => (/* binding */ getAlgorithmParameters),\n/* harmony export */   getCrypto: () => (/* binding */ getCrypto),\n/* harmony export */   getEngine: () => (/* binding */ getEngine),\n/* harmony export */   getHashAlgorithm: () => (/* binding */ getHashAlgorithm),\n/* harmony export */   getOIDByAlgorithm: () => (/* binding */ getOIDByAlgorithm),\n/* harmony export */   getRandomValues: () => (/* binding */ getRandomValues),\n/* harmony export */   id_AnyPolicy: () => (/* binding */ id_AnyPolicy),\n/* harmony export */   id_AuthorityInfoAccess: () => (/* binding */ id_AuthorityInfoAccess),\n/* harmony export */   id_AuthorityKeyIdentifier: () => (/* binding */ id_AuthorityKeyIdentifier),\n/* harmony export */   id_BaseCRLNumber: () => (/* binding */ id_BaseCRLNumber),\n/* harmony export */   id_BasicConstraints: () => (/* binding */ id_BasicConstraints),\n/* harmony export */   id_CRLBag_X509CRL: () => (/* binding */ id_CRLBag_X509CRL),\n/* harmony export */   id_CRLDistributionPoints: () => (/* binding */ id_CRLDistributionPoints),\n/* harmony export */   id_CRLNumber: () => (/* binding */ id_CRLNumber),\n/* harmony export */   id_CRLReason: () => (/* binding */ id_CRLReason),\n/* harmony export */   id_CertBag_AttributeCertificate: () => (/* binding */ id_CertBag_AttributeCertificate),\n/* harmony export */   id_CertBag_SDSICertificate: () => (/* binding */ id_CertBag_SDSICertificate),\n/* harmony export */   id_CertBag_X509Certificate: () => (/* binding */ id_CertBag_X509Certificate),\n/* harmony export */   id_CertificateIssuer: () => (/* binding */ id_CertificateIssuer),\n/* harmony export */   id_CertificatePolicies: () => (/* binding */ id_CertificatePolicies),\n/* harmony export */   id_ContentType_Data: () => (/* binding */ id_ContentType_Data),\n/* harmony export */   id_ContentType_EncryptedData: () => (/* binding */ id_ContentType_EncryptedData),\n/* harmony export */   id_ContentType_EnvelopedData: () => (/* binding */ id_ContentType_EnvelopedData),\n/* harmony export */   id_ContentType_SignedData: () => (/* binding */ id_ContentType_SignedData),\n/* harmony export */   id_ExtKeyUsage: () => (/* binding */ id_ExtKeyUsage),\n/* harmony export */   id_FreshestCRL: () => (/* binding */ id_FreshestCRL),\n/* harmony export */   id_InhibitAnyPolicy: () => (/* binding */ id_InhibitAnyPolicy),\n/* harmony export */   id_InvalidityDate: () => (/* binding */ id_InvalidityDate),\n/* harmony export */   id_IssuerAltName: () => (/* binding */ id_IssuerAltName),\n/* harmony export */   id_IssuingDistributionPoint: () => (/* binding */ id_IssuingDistributionPoint),\n/* harmony export */   id_KeyUsage: () => (/* binding */ id_KeyUsage),\n/* harmony export */   id_MicrosoftAppPolicies: () => (/* binding */ id_MicrosoftAppPolicies),\n/* harmony export */   id_MicrosoftCaVersion: () => (/* binding */ id_MicrosoftCaVersion),\n/* harmony export */   id_MicrosoftCertTemplateV1: () => (/* binding */ id_MicrosoftCertTemplateV1),\n/* harmony export */   id_MicrosoftCertTemplateV2: () => (/* binding */ id_MicrosoftCertTemplateV2),\n/* harmony export */   id_MicrosoftPrevCaCertHash: () => (/* binding */ id_MicrosoftPrevCaCertHash),\n/* harmony export */   id_NameConstraints: () => (/* binding */ id_NameConstraints),\n/* harmony export */   id_PKIX_OCSP_Basic: () => (/* binding */ id_PKIX_OCSP_Basic),\n/* harmony export */   id_PolicyConstraints: () => (/* binding */ id_PolicyConstraints),\n/* harmony export */   id_PolicyMappings: () => (/* binding */ id_PolicyMappings),\n/* harmony export */   id_PrivateKeyUsagePeriod: () => (/* binding */ id_PrivateKeyUsagePeriod),\n/* harmony export */   id_QCStatements: () => (/* binding */ id_QCStatements),\n/* harmony export */   id_SignedCertificateTimestampList: () => (/* binding */ id_SignedCertificateTimestampList),\n/* harmony export */   id_SubjectAltName: () => (/* binding */ id_SubjectAltName),\n/* harmony export */   id_SubjectDirectoryAttributes: () => (/* binding */ id_SubjectDirectoryAttributes),\n/* harmony export */   id_SubjectInfoAccess: () => (/* binding */ id_SubjectInfoAccess),\n/* harmony export */   id_SubjectKeyIdentifier: () => (/* binding */ id_SubjectKeyIdentifier),\n/* harmony export */   id_ad: () => (/* binding */ id_ad),\n/* harmony export */   id_ad_caIssuers: () => (/* binding */ id_ad_caIssuers),\n/* harmony export */   id_ad_ocsp: () => (/* binding */ id_ad_ocsp),\n/* harmony export */   id_eContentType_TSTInfo: () => (/* binding */ id_eContentType_TSTInfo),\n/* harmony export */   id_pkix: () => (/* binding */ id_pkix),\n/* harmony export */   id_sha1: () => (/* binding */ id_sha1),\n/* harmony export */   id_sha256: () => (/* binding */ id_sha256),\n/* harmony export */   id_sha384: () => (/* binding */ id_sha384),\n/* harmony export */   id_sha512: () => (/* binding */ id_sha512),\n/* harmony export */   kdf: () => (/* binding */ kdf),\n/* harmony export */   setEngine: () => (/* binding */ setEngine),\n/* harmony export */   stringPrep: () => (/* binding */ stringPrep),\n/* harmony export */   verifySCTsForCertificate: () => (/* binding */ verifySCTsForCertificate)\n/* harmony export */ });\n/* harmony import */ var asn1js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! asn1js */ \"(app-pages-browser)/./node_modules/asn1js/build/index.es.js\");\n/* harmony import */ var pvtsutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pvtsutils */ \"(app-pages-browser)/./node_modules/pvtsutils/build/index.js\");\n/* harmony import */ var pvutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pvutils */ \"(app-pages-browser)/./node_modules/pvutils/build/utils.es.js\");\n/* harmony import */ var bytestreamjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bytestreamjs */ \"(app-pages-browser)/./node_modules/bytestreamjs/build/mjs/index.js\");\n/* harmony import */ var _noble_hashes_sha1__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @noble/hashes/sha1 */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/sha1.js\");\n/* harmony import */ var _noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @noble/hashes/sha256 */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/sha256.js\");\n/* harmony import */ var _noble_hashes_sha512__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @noble/hashes/sha512 */ \"(app-pages-browser)/./node_modules/@noble/hashes/esm/sha512.js\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/*!\n * Copyright (c) 2014, GlobalSign\n * Copyright (c) 2015-2019, Peculiar Ventures\n * All rights reserved.\n * \n * Author 2014-2019, Yury Strozhevsky\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * * Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n * \n * * Redistributions in binary form must reproduce the above copyright notice, this\n *   list of conditions and the following disclaimer in the documentation and/or\n *   other materials provided with the distribution.\n * \n * * Neither the name of the {organization} nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n */\n\n\n\n\n\n\n\n\n\n\nconst EMPTY_BUFFER = new ArrayBuffer(0);\nconst EMPTY_STRING = \"\";\n\nclass ArgumentError extends TypeError {\n    constructor() {\n        super(...arguments);\n        this.name = ArgumentError.NAME;\n    }\n    static isType(value, type) {\n        if (typeof type === \"string\") {\n            if (type === \"Array\" && Array.isArray(value)) {\n                return true;\n            }\n            else if (type === \"ArrayBuffer\" && value instanceof ArrayBuffer) {\n                return true;\n            }\n            else if (type === \"ArrayBufferView\" && ArrayBuffer.isView(value)) {\n                return true;\n            }\n            else if (typeof value === type) {\n                return true;\n            }\n        }\n        else if (value instanceof type) {\n            return true;\n        }\n        return false;\n    }\n    static assert(value, name, ...types) {\n        for (const type of types) {\n            if (this.isType(value, type)) {\n                return;\n            }\n        }\n        const typeNames = types.map(o => o instanceof Function && \"name\" in o ? o.name : `${o}`);\n        throw new ArgumentError(`Parameter '${name}' is not of type ${typeNames.length > 1 ? `(${typeNames.join(\" or \")})` : typeNames[0]}`);\n    }\n}\nArgumentError.NAME = \"ArgumentError\";\n\nclass ParameterError extends TypeError {\n    static assert(...args) {\n        let target = null;\n        let params;\n        let fields;\n        if (typeof args[0] === \"string\") {\n            target = args[0];\n            params = args[1];\n            fields = args.slice(2);\n        }\n        else {\n            params = args[0];\n            fields = args.slice(1);\n        }\n        ArgumentError.assert(params, \"parameters\", \"object\");\n        for (const field of fields) {\n            const value = params[field];\n            if (value === undefined || value === null) {\n                throw new ParameterError(field, target);\n            }\n        }\n    }\n    static assertEmpty(value, name, target) {\n        if (value === undefined || value === null) {\n            throw new ParameterError(name, target);\n        }\n    }\n    constructor(field, target = null, message) {\n        super();\n        this.name = ParameterError.NAME;\n        this.field = field;\n        if (target) {\n            this.target = target;\n        }\n        if (message) {\n            this.message = message;\n        }\n        else {\n            this.message = `Absent mandatory parameter '${field}' ${target ? ` in '${target}'` : EMPTY_STRING}`;\n        }\n    }\n}\nParameterError.NAME = \"ParameterError\";\n\nclass AsnError extends Error {\n    static assertSchema(asn1, target) {\n        if (!asn1.verified) {\n            throw new Error(`Object's schema was not verified against input data for ${target}`);\n        }\n    }\n    static assert(asn, target) {\n        if (asn.offset === -1) {\n            throw new AsnError(`Error during parsing of ASN.1 data. Data is not correct for '${target}'.`);\n        }\n    }\n    constructor(message) {\n        super(message);\n        this.name = \"AsnError\";\n    }\n}\n\nclass PkiObject {\n    static blockName() {\n        return this.CLASS_NAME;\n    }\n    static fromBER(raw) {\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(raw);\n        AsnError.assert(asn1, this.name);\n        try {\n            return new this({ schema: asn1.result });\n        }\n        catch (e) {\n            throw new AsnError(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`);\n        }\n    }\n    static defaultValues(memberName) {\n        throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${memberName}`);\n    }\n    static schema(parameters = {}) {\n        throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`);\n    }\n    get className() {\n        return this.constructor.CLASS_NAME;\n    }\n    toString(encoding = \"hex\") {\n        let schema;\n        try {\n            schema = this.toSchema();\n        }\n        catch {\n            schema = this.toSchema(true);\n        }\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToString(schema.toBER(), encoding);\n    }\n}\nPkiObject.CLASS_NAME = \"PkiObject\";\n\nfunction stringPrep(inputString) {\n    let isSpace = false;\n    let cutResult = EMPTY_STRING;\n    const result = inputString.trim();\n    for (let i = 0; i < result.length; i++) {\n        if (result.charCodeAt(i) === 32) {\n            if (isSpace === false)\n                isSpace = true;\n        }\n        else {\n            if (isSpace) {\n                cutResult += \" \";\n                isSpace = false;\n            }\n            cutResult += result[i];\n        }\n    }\n    return cutResult.toLowerCase();\n}\n\nconst TYPE$5 = \"type\";\nconst VALUE$6 = \"value\";\nclass AttributeTypeAndValue extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.type = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TYPE$5, AttributeTypeAndValue.defaultValues(TYPE$5));\n        this.value = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUE$6, AttributeTypeAndValue.defaultValues(VALUE$6));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TYPE$5:\n                return EMPTY_STRING;\n            case VALUE$6:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.type || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.value || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            TYPE$5,\n            \"typeValue\"\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AttributeTypeAndValue.schema({\n            names: {\n                type: TYPE$5,\n                value: \"typeValue\"\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.type = asn1.result.type.valueBlock.toString();\n        this.value = asn1.result.typeValue;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.type }),\n                this.value\n            ]\n        }));\n    }\n    toJSON() {\n        const _object = {\n            type: this.type\n        };\n        if (Object.keys(this.value).length !== 0) {\n            _object.value = (this.value).toJSON();\n        }\n        else {\n            _object.value = this.value;\n        }\n        return _object;\n    }\n    isEqual(compareTo) {\n        const stringBlockNames = [\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.Utf8String.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.BmpString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.UniversalString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.NumericString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.TeletexString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.VideotexString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.IA5String.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.GraphicString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.VisibleString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralString.blockName(),\n            asn1js__WEBPACK_IMPORTED_MODULE_0__.CharacterString.blockName()\n        ];\n        if (compareTo instanceof ArrayBuffer) {\n            return pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(this.value.valueBeforeDecodeView, compareTo);\n        }\n        if (compareTo.constructor.blockName() === AttributeTypeAndValue.blockName()) {\n            if (this.type !== compareTo.type)\n                return false;\n            const isStringPair = [false, false];\n            const thisName = this.value.constructor.blockName();\n            for (const name of stringBlockNames) {\n                if (thisName === name) {\n                    isStringPair[0] = true;\n                }\n                if (compareTo.value.constructor.blockName() === name) {\n                    isStringPair[1] = true;\n                }\n            }\n            if (isStringPair[0] !== isStringPair[1]) {\n                return false;\n            }\n            const isString = (isStringPair[0] && isStringPair[1]);\n            if (isString) {\n                const value1 = stringPrep(this.value.valueBlock.value);\n                const value2 = stringPrep(compareTo.value.valueBlock.value);\n                if (value1.localeCompare(value2) !== 0)\n                    return false;\n            }\n            else {\n                if (!pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(this.value.valueBeforeDecodeView, compareTo.value.valueBeforeDecodeView))\n                    return false;\n            }\n            return true;\n        }\n        return false;\n    }\n}\nAttributeTypeAndValue.CLASS_NAME = \"AttributeTypeAndValue\";\n\nconst TYPE_AND_VALUES = \"typesAndValues\";\nconst VALUE_BEFORE_DECODE = \"valueBeforeDecode\";\nconst RDN = \"RDN\";\nclass RelativeDistinguishedNames extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.typesAndValues = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TYPE_AND_VALUES, RelativeDistinguishedNames.defaultValues(TYPE_AND_VALUES));\n        this.valueBeforeDecode = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUE_BEFORE_DECODE, RelativeDistinguishedNames.defaultValues(VALUE_BEFORE_DECODE));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TYPE_AND_VALUES:\n                return [];\n            case VALUE_BEFORE_DECODE:\n                return EMPTY_BUFFER;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case TYPE_AND_VALUES:\n                return (memberValue.length === 0);\n            case VALUE_BEFORE_DECODE:\n                return (memberValue.byteLength === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.repeatedSequence || EMPTY_STRING),\n                    value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                        value: [\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                                name: (names.repeatedSet || EMPTY_STRING),\n                                value: AttributeTypeAndValue.schema(names.typeAndValue || {})\n                            })\n                        ]\n                    })\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            RDN,\n            TYPE_AND_VALUES\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RelativeDistinguishedNames.schema({\n            names: {\n                blockName: RDN,\n                repeatedSet: TYPE_AND_VALUES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (TYPE_AND_VALUES in asn1.result) {\n            this.typesAndValues = Array.from(asn1.result.typesAndValues, element => new AttributeTypeAndValue({ schema: element }));\n        }\n        this.valueBeforeDecode = asn1.result.RDN.valueBeforeDecodeView.slice().buffer;\n    }\n    toSchema() {\n        if (this.valueBeforeDecode.byteLength === 0) {\n            return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                        value: Array.from(this.typesAndValues, o => o.toSchema())\n                    })]\n            }));\n        }\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.valueBeforeDecode);\n        AsnError.assert(asn1, \"RelativeDistinguishedNames\");\n        if (!(asn1.result instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence)) {\n            throw new Error(\"ASN.1 result should be SEQUENCE\");\n        }\n        return asn1.result;\n    }\n    toJSON() {\n        return {\n            typesAndValues: Array.from(this.typesAndValues, o => o.toJSON())\n        };\n    }\n    isEqual(compareTo) {\n        if (compareTo instanceof RelativeDistinguishedNames) {\n            if (this.typesAndValues.length !== compareTo.typesAndValues.length)\n                return false;\n            for (const [index, typeAndValue] of this.typesAndValues.entries()) {\n                if (typeAndValue.isEqual(compareTo.typesAndValues[index]) === false)\n                    return false;\n            }\n            return true;\n        }\n        if (compareTo instanceof ArrayBuffer) {\n            return pvutils__WEBPACK_IMPORTED_MODULE_2__.isEqualBuffer(this.valueBeforeDecode, compareTo);\n        }\n        return false;\n    }\n}\nRelativeDistinguishedNames.CLASS_NAME = \"RelativeDistinguishedNames\";\n\nconst TYPE$4 = \"type\";\nconst VALUE$5 = \"value\";\nfunction builtInStandardAttributes(parameters = {}, optional = false) {\n    const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n    return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n        optional,\n        value: [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 2,\n                    tagNumber: 1\n                },\n                name: (names.country_name || EMPTY_STRING),\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                        value: [\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.NumericString(),\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString()\n                        ]\n                    })\n                ]\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 2,\n                    tagNumber: 2\n                },\n                name: (names.administration_domain_name || EMPTY_STRING),\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                        value: [\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.NumericString(),\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString()\n                        ]\n                    })\n                ]\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                name: (names.network_address || EMPTY_STRING),\n                isHexOnly: true\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                name: (names.terminal_identifier || EMPTY_STRING),\n                isHexOnly: true\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                },\n                name: (names.private_domain_name || EMPTY_STRING),\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                        value: [\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.NumericString(),\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString()\n                        ]\n                    })\n                ]\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 3\n                },\n                name: (names.organization_name || EMPTY_STRING),\n                isHexOnly: true\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                optional: true,\n                name: (names.numeric_user_identifier || EMPTY_STRING),\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 4\n                },\n                isHexOnly: true\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                name: (names.personal_name || EMPTY_STRING),\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 5\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                        idBlock: {\n                            tagClass: 3,\n                            tagNumber: 0\n                        },\n                        isHexOnly: true\n                    }),\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                        optional: true,\n                        idBlock: {\n                            tagClass: 3,\n                            tagNumber: 1\n                        },\n                        isHexOnly: true\n                    }),\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                        optional: true,\n                        idBlock: {\n                            tagClass: 3,\n                            tagNumber: 2\n                        },\n                        isHexOnly: true\n                    }),\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                        optional: true,\n                        idBlock: {\n                            tagClass: 3,\n                            tagNumber: 3\n                        },\n                        isHexOnly: true\n                    })\n                ]\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                name: (names.organizational_unit_names || EMPTY_STRING),\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 6\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                        value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString()\n                    })\n                ]\n            })\n        ]\n    }));\n}\nfunction builtInDomainDefinedAttributes(optional = false) {\n    return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n        optional,\n        value: [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString(),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString()\n        ]\n    }));\n}\nfunction extensionAttributes(optional = false) {\n    return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n        optional,\n        value: [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                isHexOnly: true\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any()]\n            })\n        ]\n    }));\n}\nclass GeneralName extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.type = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TYPE$4, GeneralName.defaultValues(TYPE$4));\n        this.value = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUE$5, GeneralName.defaultValues(VALUE$5));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TYPE$4:\n                return 9;\n            case VALUE$5:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case TYPE$4:\n                return (memberValue === GeneralName.defaultValues(memberName));\n            case VALUE$5:\n                return (Object.keys(memberValue).length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    name: (names.blockName || EMPTY_STRING),\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier(),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 0\n                            },\n                            value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any()]\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 3\n                    },\n                    name: (names.blockName || EMPTY_STRING),\n                    value: [\n                        builtInStandardAttributes((names.builtInStandardAttributes || {}), false),\n                        builtInDomainDefinedAttributes(true),\n                        extensionAttributes(true)\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 4\n                    },\n                    name: (names.blockName || EMPTY_STRING),\n                    value: [RelativeDistinguishedNames.schema(names.directoryName || {})]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 5\n                    },\n                    name: (names.blockName || EMPTY_STRING),\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            optional: true,\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 0\n                            },\n                            value: [\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                                    value: [\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.TeletexString(),\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString(),\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.UniversalString(),\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Utf8String(),\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.BmpString()\n                                    ]\n                                })\n                            ]\n                        }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 1\n                            },\n                            value: [\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                                    value: [\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.TeletexString(),\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.PrintableString(),\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.UniversalString(),\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Utf8String(),\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.BmpString()\n                                    ]\n                                })\n                            ]\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 6\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 7\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 8\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            \"blockName\",\n            \"otherName\",\n            \"rfc822Name\",\n            \"dNSName\",\n            \"x400Address\",\n            \"directoryName\",\n            \"ediPartyName\",\n            \"uniformResourceIdentifier\",\n            \"iPAddress\",\n            \"registeredID\"\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, GeneralName.schema({\n            names: {\n                blockName: \"blockName\",\n                otherName: \"otherName\",\n                rfc822Name: \"rfc822Name\",\n                dNSName: \"dNSName\",\n                x400Address: \"x400Address\",\n                directoryName: {\n                    names: {\n                        blockName: \"directoryName\"\n                    }\n                },\n                ediPartyName: \"ediPartyName\",\n                uniformResourceIdentifier: \"uniformResourceIdentifier\",\n                iPAddress: \"iPAddress\",\n                registeredID: \"registeredID\"\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.type = asn1.result.blockName.idBlock.tagNumber;\n        switch (this.type) {\n            case 0:\n                this.value = asn1.result.blockName;\n                break;\n            case 1:\n            case 2:\n            case 6:\n                {\n                    const value = asn1.result.blockName;\n                    value.idBlock.tagClass = 1;\n                    value.idBlock.tagNumber = 22;\n                    const valueBER = value.toBER(false);\n                    const asnValue = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(valueBER);\n                    AsnError.assert(asnValue, \"GeneralName value\");\n                    this.value = asnValue.result.valueBlock.value;\n                }\n                break;\n            case 3:\n                this.value = asn1.result.blockName;\n                break;\n            case 4:\n                this.value = new RelativeDistinguishedNames({ schema: asn1.result.directoryName });\n                break;\n            case 5:\n                this.value = asn1.result.ediPartyName;\n                break;\n            case 7:\n                this.value = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: asn1.result.blockName.valueBlock.valueHex });\n                break;\n            case 8:\n                {\n                    const value = asn1.result.blockName;\n                    value.idBlock.tagClass = 1;\n                    value.idBlock.tagNumber = 6;\n                    const valueBER = value.toBER(false);\n                    const asnValue = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(valueBER);\n                    AsnError.assert(asnValue, \"GeneralName registeredID\");\n                    this.value = asnValue.result.valueBlock.toString();\n                }\n                break;\n        }\n    }\n    toSchema() {\n        switch (this.type) {\n            case 0:\n            case 3:\n            case 5:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: this.type\n                    },\n                    value: [\n                        this.value\n                    ]\n                });\n            case 1:\n            case 2:\n            case 6:\n                {\n                    const value = new asn1js__WEBPACK_IMPORTED_MODULE_0__.IA5String({ value: this.value });\n                    value.idBlock.tagClass = 3;\n                    value.idBlock.tagNumber = this.type;\n                    return value;\n                }\n            case 4:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 4\n                    },\n                    value: [this.value.toSchema()]\n                });\n            case 7:\n                {\n                    const value = this.value;\n                    value.idBlock.tagClass = 3;\n                    value.idBlock.tagNumber = this.type;\n                    return value;\n                }\n            case 8:\n                {\n                    const value = new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.value });\n                    value.idBlock.tagClass = 3;\n                    value.idBlock.tagNumber = this.type;\n                    return value;\n                }\n            default:\n                return GeneralName.schema();\n        }\n    }\n    toJSON() {\n        const _object = {\n            type: this.type,\n            value: EMPTY_STRING\n        };\n        if ((typeof this.value) === \"string\")\n            _object.value = this.value;\n        else {\n            try {\n                _object.value = this.value.toJSON();\n            }\n            catch (ex) {\n            }\n        }\n        return _object;\n    }\n}\nGeneralName.CLASS_NAME = \"GeneralName\";\n\nconst ACCESS_METHOD = \"accessMethod\";\nconst ACCESS_LOCATION = \"accessLocation\";\nconst CLEAR_PROPS$1v = [\n    ACCESS_METHOD,\n    ACCESS_LOCATION,\n];\nclass AccessDescription extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.accessMethod = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ACCESS_METHOD, AccessDescription.defaultValues(ACCESS_METHOD));\n        this.accessLocation = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ACCESS_LOCATION, AccessDescription.defaultValues(ACCESS_LOCATION));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ACCESS_METHOD:\n                return EMPTY_STRING;\n            case ACCESS_LOCATION:\n                return new GeneralName();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.accessMethod || EMPTY_STRING) }),\n                GeneralName.schema(names.accessLocation || {})\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1v);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AccessDescription.schema({\n            names: {\n                accessMethod: ACCESS_METHOD,\n                accessLocation: {\n                    names: {\n                        blockName: ACCESS_LOCATION\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.accessMethod = asn1.result.accessMethod.valueBlock.toString();\n        this.accessLocation = new GeneralName({ schema: asn1.result.accessLocation });\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.accessMethod }),\n                this.accessLocation.toSchema()\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            accessMethod: this.accessMethod,\n            accessLocation: this.accessLocation.toJSON()\n        };\n    }\n}\nAccessDescription.CLASS_NAME = \"AccessDescription\";\n\nconst SECONDS = \"seconds\";\nconst MILLIS = \"millis\";\nconst MICROS = \"micros\";\nclass Accuracy extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (SECONDS in parameters) {\n            this.seconds = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SECONDS, Accuracy.defaultValues(SECONDS));\n        }\n        if (MILLIS in parameters) {\n            this.millis = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MILLIS, Accuracy.defaultValues(MILLIS));\n        }\n        if (MICROS in parameters) {\n            this.micros = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MICROS, Accuracy.defaultValues(MICROS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case SECONDS:\n            case MILLIS:\n            case MICROS:\n                return 0;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case SECONDS:\n            case MILLIS:\n            case MICROS:\n                return (memberValue === Accuracy.defaultValues(memberName));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            optional: true,\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                    optional: true,\n                    name: (names.seconds || EMPTY_STRING)\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.millis || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.micros || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            SECONDS,\n            MILLIS,\n            MICROS,\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Accuracy.schema({\n            names: {\n                seconds: SECONDS,\n                millis: MILLIS,\n                micros: MICROS,\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (\"seconds\" in asn1.result) {\n            this.seconds = asn1.result.seconds.valueBlock.valueDec;\n        }\n        if (\"millis\" in asn1.result) {\n            const intMillis = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: asn1.result.millis.valueBlock.valueHex });\n            this.millis = intMillis.valueBlock.valueDec;\n        }\n        if (\"micros\" in asn1.result) {\n            const intMicros = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: asn1.result.micros.valueBlock.valueHex });\n            this.micros = intMicros.valueBlock.valueDec;\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        if (this.seconds !== undefined)\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.seconds }));\n        if (this.millis !== undefined) {\n            const intMillis = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.millis });\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                valueHex: intMillis.valueBlock.valueHexView\n            }));\n        }\n        if (this.micros !== undefined) {\n            const intMicros = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.micros });\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                valueHex: intMicros.valueBlock.valueHexView\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const _object = {};\n        if (this.seconds !== undefined)\n            _object.seconds = this.seconds;\n        if (this.millis !== undefined)\n            _object.millis = this.millis;\n        if (this.micros !== undefined)\n            _object.micros = this.micros;\n        return _object;\n    }\n}\nAccuracy.CLASS_NAME = \"Accuracy\";\n\nconst ALGORITHM_ID = \"algorithmId\";\nconst ALGORITHM_PARAMS = \"algorithmParams\";\nconst ALGORITHM$2 = \"algorithm\";\nconst PARAMS = \"params\";\nconst CLEAR_PROPS$1u = [\n    ALGORITHM$2,\n    PARAMS\n];\nclass AlgorithmIdentifier extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.algorithmId = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ALGORITHM_ID, AlgorithmIdentifier.defaultValues(ALGORITHM_ID));\n        if (ALGORITHM_PARAMS in parameters) {\n            this.algorithmParams = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ALGORITHM_PARAMS, AlgorithmIdentifier.defaultValues(ALGORITHM_PARAMS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ALGORITHM_ID:\n                return EMPTY_STRING;\n            case ALGORITHM_PARAMS:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case ALGORITHM_ID:\n                return (memberValue === EMPTY_STRING);\n            case ALGORITHM_PARAMS:\n                return (memberValue instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            optional: (names.optional || false),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.algorithmIdentifier || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.algorithmParams || EMPTY_STRING), optional: true })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1u);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AlgorithmIdentifier.schema({\n            names: {\n                algorithmIdentifier: ALGORITHM$2,\n                algorithmParams: PARAMS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.algorithmId = asn1.result.algorithm.valueBlock.toString();\n        if (PARAMS in asn1.result) {\n            this.algorithmParams = asn1.result.params;\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.algorithmId }));\n        if (this.algorithmParams && !(this.algorithmParams instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any)) {\n            outputArray.push(this.algorithmParams);\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const object = {\n            algorithmId: this.algorithmId\n        };\n        if (this.algorithmParams && !(this.algorithmParams instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any)) {\n            object.algorithmParams = this.algorithmParams.toJSON();\n        }\n        return object;\n    }\n    isEqual(algorithmIdentifier) {\n        if (!(algorithmIdentifier instanceof AlgorithmIdentifier)) {\n            return false;\n        }\n        if (this.algorithmId !== algorithmIdentifier.algorithmId) {\n            return false;\n        }\n        if (this.algorithmParams) {\n            if (algorithmIdentifier.algorithmParams) {\n                return JSON.stringify(this.algorithmParams) === JSON.stringify(algorithmIdentifier.algorithmParams);\n            }\n            return false;\n        }\n        if (algorithmIdentifier.algorithmParams) {\n            return false;\n        }\n        return true;\n    }\n}\nAlgorithmIdentifier.CLASS_NAME = \"AlgorithmIdentifier\";\n\nconst ALT_NAMES = \"altNames\";\nconst CLEAR_PROPS$1t = [\n    ALT_NAMES\n];\nclass AltName extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.altNames = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ALT_NAMES, AltName.defaultValues(ALT_NAMES));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ALT_NAMES:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.altNames || EMPTY_STRING),\n                    value: GeneralName.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1t);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AltName.schema({\n            names: {\n                altNames: ALT_NAMES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (ALT_NAMES in asn1.result) {\n            this.altNames = Array.from(asn1.result.altNames, element => new GeneralName({ schema: element }));\n        }\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.altNames, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            altNames: Array.from(this.altNames, o => o.toJSON())\n        };\n    }\n}\nAltName.CLASS_NAME = \"AltName\";\n\nconst TYPE$3 = \"type\";\nconst VALUES$1 = \"values\";\nconst CLEAR_PROPS$1s = [\n    TYPE$3,\n    VALUES$1\n];\nclass Attribute extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.type = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TYPE$3, Attribute.defaultValues(TYPE$3));\n        this.values = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUES$1, Attribute.defaultValues(VALUES$1));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TYPE$3:\n                return EMPTY_STRING;\n            case VALUES$1:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case TYPE$3:\n                return (memberValue === EMPTY_STRING);\n            case VALUES$1:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.type || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    name: (names.setName || EMPTY_STRING),\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.values || EMPTY_STRING),\n                            value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1s);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Attribute.schema({\n            names: {\n                type: TYPE$3,\n                values: VALUES$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.type = asn1.result.type.valueBlock.toString();\n        this.values = asn1.result.values;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.type }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    value: this.values\n                })\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            values: Array.from(this.values, o => o.toJSON())\n        };\n    }\n}\nAttribute.CLASS_NAME = \"Attribute\";\n\nconst NOT_BEFORE_TIME = \"notBeforeTime\";\nconst NOT_AFTER_TIME = \"notAfterTime\";\nconst CLEAR_PROPS$1r = [\n    NOT_BEFORE_TIME,\n    NOT_AFTER_TIME,\n];\nclass AttCertValidityPeriod extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.notBeforeTime = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NOT_BEFORE_TIME, AttCertValidityPeriod.defaultValues(NOT_BEFORE_TIME));\n        this.notAfterTime = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NOT_AFTER_TIME, AttCertValidityPeriod.defaultValues(NOT_AFTER_TIME));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case NOT_BEFORE_TIME:\n            case NOT_AFTER_TIME:\n                return new Date(0, 0, 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ name: (names.notBeforeTime || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ name: (names.notAfterTime || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1r);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AttCertValidityPeriod.schema({\n            names: {\n                notBeforeTime: NOT_BEFORE_TIME,\n                notAfterTime: NOT_AFTER_TIME\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.notBeforeTime = asn1.result.notBeforeTime.toDate();\n        this.notAfterTime = asn1.result.notAfterTime.toDate();\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.notBeforeTime }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.notAfterTime }),\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            notBeforeTime: this.notBeforeTime,\n            notAfterTime: this.notAfterTime\n        };\n    }\n}\nAttCertValidityPeriod.CLASS_NAME = \"AttCertValidityPeriod\";\n\nconst NAMES = \"names\";\nconst GENERAL_NAMES = \"generalNames\";\nclass GeneralNames extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NAMES, GeneralNames.defaultValues(NAMES));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case \"names\":\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}, optional = false) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NAMES, {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            optional,\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.generalNames || EMPTY_STRING),\n                    value: GeneralName.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            NAMES,\n            GENERAL_NAMES\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, GeneralNames.schema({\n            names: {\n                blockName: NAMES,\n                generalNames: GENERAL_NAMES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.names = Array.from(asn1.result.generalNames, element => new GeneralName({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.names, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            names: Array.from(this.names, o => o.toJSON())\n        };\n    }\n}\nGeneralNames.CLASS_NAME = \"GeneralNames\";\n\nconst id_SubjectDirectoryAttributes = \"2.5.29.9\";\nconst id_SubjectKeyIdentifier = \"2.5.29.14\";\nconst id_KeyUsage = \"2.5.29.15\";\nconst id_PrivateKeyUsagePeriod = \"2.5.29.16\";\nconst id_SubjectAltName = \"2.5.29.17\";\nconst id_IssuerAltName = \"2.5.29.18\";\nconst id_BasicConstraints = \"2.5.29.19\";\nconst id_CRLNumber = \"2.5.29.20\";\nconst id_BaseCRLNumber = \"2.5.29.27\";\nconst id_CRLReason = \"2.5.29.21\";\nconst id_InvalidityDate = \"2.5.29.24\";\nconst id_IssuingDistributionPoint = \"2.5.29.28\";\nconst id_CertificateIssuer = \"2.5.29.29\";\nconst id_NameConstraints = \"2.5.29.30\";\nconst id_CRLDistributionPoints = \"2.5.29.31\";\nconst id_FreshestCRL = \"2.5.29.46\";\nconst id_CertificatePolicies = \"2.5.29.32\";\nconst id_AnyPolicy = \"2.5.29.32.0\";\nconst id_MicrosoftAppPolicies = \"1.3.6.1.4.1.311.21.10\";\nconst id_PolicyMappings = \"2.5.29.33\";\nconst id_AuthorityKeyIdentifier = \"2.5.29.35\";\nconst id_PolicyConstraints = \"2.5.29.36\";\nconst id_ExtKeyUsage = \"2.5.29.37\";\nconst id_InhibitAnyPolicy = \"2.5.29.54\";\nconst id_AuthorityInfoAccess = \"1.3.6.1.5.5.7.1.1\";\nconst id_SubjectInfoAccess = \"1.3.6.1.5.5.7.1.11\";\nconst id_SignedCertificateTimestampList = \"1.3.6.1.4.1.11129.2.4.2\";\nconst id_MicrosoftCertTemplateV1 = \"1.3.6.1.4.1.311.20.2\";\nconst id_MicrosoftPrevCaCertHash = \"1.3.6.1.4.1.311.21.2\";\nconst id_MicrosoftCertTemplateV2 = \"1.3.6.1.4.1.311.21.7\";\nconst id_MicrosoftCaVersion = \"1.3.6.1.4.1.311.21.1\";\nconst id_QCStatements = \"1.3.6.1.5.5.7.1.3\";\nconst id_ContentType_Data = \"1.2.840.113549.1.7.1\";\nconst id_ContentType_SignedData = \"1.2.840.113549.1.7.2\";\nconst id_ContentType_EnvelopedData = \"1.2.840.113549.1.7.3\";\nconst id_ContentType_EncryptedData = \"1.2.840.113549.1.7.6\";\nconst id_eContentType_TSTInfo = \"1.2.840.113549.1.9.16.1.4\";\nconst id_CertBag_X509Certificate = \"1.2.840.113549.1.9.22.1\";\nconst id_CertBag_SDSICertificate = \"1.2.840.113549.1.9.22.2\";\nconst id_CertBag_AttributeCertificate = \"1.2.840.113549.1.9.22.3\";\nconst id_CRLBag_X509CRL = \"1.2.840.113549.1.9.23.1\";\nconst id_pkix = \"1.3.6.1.5.5.7\";\nconst id_ad = `${id_pkix}.48`;\nconst id_PKIX_OCSP_Basic = `${id_ad}.1.1`;\nconst id_ad_caIssuers = `${id_ad}.2`;\nconst id_ad_ocsp = `${id_ad}.1`;\nconst id_sha1 = \"1.3.14.3.2.26\";\nconst id_sha256 = \"2.16.840.1.101.3.4.2.1\";\nconst id_sha384 = \"2.16.840.1.101.3.4.2.2\";\nconst id_sha512 = \"2.16.840.1.101.3.4.2.3\";\n\nconst KEY_IDENTIFIER$1 = \"keyIdentifier\";\nconst AUTHORITY_CERT_ISSUER = \"authorityCertIssuer\";\nconst AUTHORITY_CERT_SERIAL_NUMBER = \"authorityCertSerialNumber\";\nconst CLEAR_PROPS$1q = [\n    KEY_IDENTIFIER$1,\n    AUTHORITY_CERT_ISSUER,\n    AUTHORITY_CERT_SERIAL_NUMBER,\n];\nclass AuthorityKeyIdentifier extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (KEY_IDENTIFIER$1 in parameters) {\n            this.keyIdentifier = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_IDENTIFIER$1, AuthorityKeyIdentifier.defaultValues(KEY_IDENTIFIER$1));\n        }\n        if (AUTHORITY_CERT_ISSUER in parameters) {\n            this.authorityCertIssuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, AUTHORITY_CERT_ISSUER, AuthorityKeyIdentifier.defaultValues(AUTHORITY_CERT_ISSUER));\n        }\n        if (AUTHORITY_CERT_SERIAL_NUMBER in parameters) {\n            this.authorityCertSerialNumber = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, AUTHORITY_CERT_SERIAL_NUMBER, AuthorityKeyIdentifier.defaultValues(AUTHORITY_CERT_SERIAL_NUMBER));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case KEY_IDENTIFIER$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case AUTHORITY_CERT_ISSUER:\n                return [];\n            case AUTHORITY_CERT_SERIAL_NUMBER:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.keyIdentifier || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.authorityCertIssuer || EMPTY_STRING),\n                            value: GeneralName.schema()\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.authorityCertSerialNumber || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1q);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AuthorityKeyIdentifier.schema({\n            names: {\n                keyIdentifier: KEY_IDENTIFIER$1,\n                authorityCertIssuer: AUTHORITY_CERT_ISSUER,\n                authorityCertSerialNumber: AUTHORITY_CERT_SERIAL_NUMBER\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (KEY_IDENTIFIER$1 in asn1.result)\n            this.keyIdentifier = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: asn1.result.keyIdentifier.valueBlock.valueHex });\n        if (AUTHORITY_CERT_ISSUER in asn1.result)\n            this.authorityCertIssuer = Array.from(asn1.result.authorityCertIssuer, o => new GeneralName({ schema: o }));\n        if (AUTHORITY_CERT_SERIAL_NUMBER in asn1.result)\n            this.authorityCertSerialNumber = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: asn1.result.authorityCertSerialNumber.valueBlock.valueHex });\n    }\n    toSchema() {\n        const outputArray = [];\n        if (this.keyIdentifier) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                valueHex: this.keyIdentifier.valueBlock.valueHexView\n            }));\n        }\n        if (this.authorityCertIssuer) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: Array.from(this.authorityCertIssuer, o => o.toSchema())\n            }));\n        }\n        if (this.authorityCertSerialNumber) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                },\n                valueHex: this.authorityCertSerialNumber.valueBlock.valueHexView\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const object = {};\n        if (this.keyIdentifier) {\n            object.keyIdentifier = this.keyIdentifier.toJSON();\n        }\n        if (this.authorityCertIssuer) {\n            object.authorityCertIssuer = Array.from(this.authorityCertIssuer, o => o.toJSON());\n        }\n        if (this.authorityCertSerialNumber) {\n            object.authorityCertSerialNumber = this.authorityCertSerialNumber.toJSON();\n        }\n        return object;\n    }\n}\nAuthorityKeyIdentifier.CLASS_NAME = \"AuthorityKeyIdentifier\";\n\nconst PATH_LENGTH_CONSTRAINT = \"pathLenConstraint\";\nconst CA = \"cA\";\nclass BasicConstraints extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.cA = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CA, false);\n        if (PATH_LENGTH_CONSTRAINT in parameters) {\n            this.pathLenConstraint = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PATH_LENGTH_CONSTRAINT, 0);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CA:\n                return false;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Boolean({\n                    optional: true,\n                    name: (names.cA || EMPTY_STRING)\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                    optional: true,\n                    name: (names.pathLenConstraint || EMPTY_STRING)\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            CA,\n            PATH_LENGTH_CONSTRAINT\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, BasicConstraints.schema({\n            names: {\n                cA: CA,\n                pathLenConstraint: PATH_LENGTH_CONSTRAINT\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (CA in asn1.result) {\n            this.cA = asn1.result.cA.valueBlock.value;\n        }\n        if (PATH_LENGTH_CONSTRAINT in asn1.result) {\n            if (asn1.result.pathLenConstraint.valueBlock.isHexOnly) {\n                this.pathLenConstraint = asn1.result.pathLenConstraint;\n            }\n            else {\n                this.pathLenConstraint = asn1.result.pathLenConstraint.valueBlock.valueDec;\n            }\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        if (this.cA !== BasicConstraints.defaultValues(CA))\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Boolean({ value: this.cA }));\n        if (PATH_LENGTH_CONSTRAINT in this) {\n            if (this.pathLenConstraint instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer) {\n                outputArray.push(this.pathLenConstraint);\n            }\n            else {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.pathLenConstraint }));\n            }\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const object = {};\n        if (this.cA !== BasicConstraints.defaultValues(CA)) {\n            object.cA = this.cA;\n        }\n        if (PATH_LENGTH_CONSTRAINT in this) {\n            if (this.pathLenConstraint instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer) {\n                object.pathLenConstraint = this.pathLenConstraint.toJSON();\n            }\n            else {\n                object.pathLenConstraint = this.pathLenConstraint;\n            }\n        }\n        return object;\n    }\n}\nBasicConstraints.CLASS_NAME = \"BasicConstraints\";\n\nconst CERTIFICATE_INDEX = \"certificateIndex\";\nconst KEY_INDEX = \"keyIndex\";\nclass CAVersion extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.certificateIndex = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERTIFICATE_INDEX, CAVersion.defaultValues(CERTIFICATE_INDEX));\n        this.keyIndex = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_INDEX, CAVersion.defaultValues(KEY_INDEX));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CERTIFICATE_INDEX:\n            case KEY_INDEX:\n                return 0;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer());\n    }\n    fromSchema(schema) {\n        if (schema.constructor.blockName() !== asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer.blockName()) {\n            throw new Error(\"Object's schema was not verified against input data for CAVersion\");\n        }\n        let value = schema.valueBlock.valueHex.slice(0);\n        const valueView = new Uint8Array(value);\n        switch (true) {\n            case (value.byteLength < 4):\n                {\n                    const tempValue = new ArrayBuffer(4);\n                    const tempValueView = new Uint8Array(tempValue);\n                    tempValueView.set(valueView, 4 - value.byteLength);\n                    value = tempValue.slice(0);\n                }\n                break;\n            case (value.byteLength > 4):\n                {\n                    const tempValue = new ArrayBuffer(4);\n                    const tempValueView = new Uint8Array(tempValue);\n                    tempValueView.set(valueView.slice(0, 4));\n                    value = tempValue.slice(0);\n                }\n                break;\n        }\n        const keyIndexBuffer = value.slice(0, 2);\n        const keyIndexView8 = new Uint8Array(keyIndexBuffer);\n        let temp = keyIndexView8[0];\n        keyIndexView8[0] = keyIndexView8[1];\n        keyIndexView8[1] = temp;\n        const keyIndexView16 = new Uint16Array(keyIndexBuffer);\n        this.keyIndex = keyIndexView16[0];\n        const certificateIndexBuffer = value.slice(2);\n        const certificateIndexView8 = new Uint8Array(certificateIndexBuffer);\n        temp = certificateIndexView8[0];\n        certificateIndexView8[0] = certificateIndexView8[1];\n        certificateIndexView8[1] = temp;\n        const certificateIndexView16 = new Uint16Array(certificateIndexBuffer);\n        this.certificateIndex = certificateIndexView16[0];\n    }\n    toSchema() {\n        const certificateIndexBuffer = new ArrayBuffer(2);\n        const certificateIndexView = new Uint16Array(certificateIndexBuffer);\n        certificateIndexView[0] = this.certificateIndex;\n        const certificateIndexView8 = new Uint8Array(certificateIndexBuffer);\n        let temp = certificateIndexView8[0];\n        certificateIndexView8[0] = certificateIndexView8[1];\n        certificateIndexView8[1] = temp;\n        const keyIndexBuffer = new ArrayBuffer(2);\n        const keyIndexView = new Uint16Array(keyIndexBuffer);\n        keyIndexView[0] = this.keyIndex;\n        const keyIndexView8 = new Uint8Array(keyIndexBuffer);\n        temp = keyIndexView8[0];\n        keyIndexView8[0] = keyIndexView8[1];\n        keyIndexView8[1] = temp;\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n            valueHex: pvutils__WEBPACK_IMPORTED_MODULE_2__.utilConcatBuf(keyIndexBuffer, certificateIndexBuffer)\n        }));\n    }\n    toJSON() {\n        return {\n            certificateIndex: this.certificateIndex,\n            keyIndex: this.keyIndex\n        };\n    }\n}\nCAVersion.CLASS_NAME = \"CAVersion\";\n\nconst POLICY_QUALIFIER_ID = \"policyQualifierId\";\nconst QUALIFIER = \"qualifier\";\nconst CLEAR_PROPS$1p = [\n    POLICY_QUALIFIER_ID,\n    QUALIFIER\n];\nclass PolicyQualifierInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.policyQualifierId = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, POLICY_QUALIFIER_ID, PolicyQualifierInfo.defaultValues(POLICY_QUALIFIER_ID));\n        this.qualifier = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, QUALIFIER, PolicyQualifierInfo.defaultValues(QUALIFIER));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case POLICY_QUALIFIER_ID:\n                return EMPTY_STRING;\n            case QUALIFIER:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.policyQualifierId || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.qualifier || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1p);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PolicyQualifierInfo.schema({\n            names: {\n                policyQualifierId: POLICY_QUALIFIER_ID,\n                qualifier: QUALIFIER\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.policyQualifierId = asn1.result.policyQualifierId.valueBlock.toString();\n        this.qualifier = asn1.result.qualifier;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.policyQualifierId }),\n                this.qualifier\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            policyQualifierId: this.policyQualifierId,\n            qualifier: this.qualifier.toJSON()\n        };\n    }\n}\nPolicyQualifierInfo.CLASS_NAME = \"PolicyQualifierInfo\";\n\nconst POLICY_IDENTIFIER = \"policyIdentifier\";\nconst POLICY_QUALIFIERS = \"policyQualifiers\";\nconst CLEAR_PROPS$1o = [\n    POLICY_IDENTIFIER,\n    POLICY_QUALIFIERS\n];\nclass PolicyInformation extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.policyIdentifier = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, POLICY_IDENTIFIER, PolicyInformation.defaultValues(POLICY_IDENTIFIER));\n        if (POLICY_QUALIFIERS in parameters) {\n            this.policyQualifiers = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, POLICY_QUALIFIERS, PolicyInformation.defaultValues(POLICY_QUALIFIERS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case POLICY_IDENTIFIER:\n                return EMPTY_STRING;\n            case POLICY_QUALIFIERS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.policyIdentifier || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    optional: true,\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.policyQualifiers || EMPTY_STRING),\n                            value: PolicyQualifierInfo.schema()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1o);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PolicyInformation.schema({\n            names: {\n                policyIdentifier: POLICY_IDENTIFIER,\n                policyQualifiers: POLICY_QUALIFIERS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.policyIdentifier = asn1.result.policyIdentifier.valueBlock.toString();\n        if (POLICY_QUALIFIERS in asn1.result) {\n            this.policyQualifiers = Array.from(asn1.result.policyQualifiers, element => new PolicyQualifierInfo({ schema: element }));\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.policyIdentifier }));\n        if (this.policyQualifiers) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: Array.from(this.policyQualifiers, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            policyIdentifier: this.policyIdentifier\n        };\n        if (this.policyQualifiers)\n            res.policyQualifiers = Array.from(this.policyQualifiers, o => o.toJSON());\n        return res;\n    }\n}\nPolicyInformation.CLASS_NAME = \"PolicyInformation\";\n\nconst CERTIFICATE_POLICIES = \"certificatePolicies\";\nconst CLEAR_PROPS$1n = [\n    CERTIFICATE_POLICIES,\n];\nclass CertificatePolicies extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.certificatePolicies = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERTIFICATE_POLICIES, CertificatePolicies.defaultValues(CERTIFICATE_POLICIES));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CERTIFICATE_POLICIES:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.certificatePolicies || EMPTY_STRING),\n                    value: PolicyInformation.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1n);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CertificatePolicies.schema({\n            names: {\n                certificatePolicies: CERTIFICATE_POLICIES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.certificatePolicies = Array.from(asn1.result.certificatePolicies, element => new PolicyInformation({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.certificatePolicies, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            certificatePolicies: Array.from(this.certificatePolicies, o => o.toJSON())\n        };\n    }\n}\nCertificatePolicies.CLASS_NAME = \"CertificatePolicies\";\n\nconst TEMPLATE_ID = \"templateID\";\nconst TEMPLATE_MAJOR_VERSION = \"templateMajorVersion\";\nconst TEMPLATE_MINOR_VERSION = \"templateMinorVersion\";\nconst CLEAR_PROPS$1m = [\n    TEMPLATE_ID,\n    TEMPLATE_MAJOR_VERSION,\n    TEMPLATE_MINOR_VERSION\n];\nclass CertificateTemplate extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.templateID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TEMPLATE_ID, CertificateTemplate.defaultValues(TEMPLATE_ID));\n        if (TEMPLATE_MAJOR_VERSION in parameters) {\n            this.templateMajorVersion = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TEMPLATE_MAJOR_VERSION, CertificateTemplate.defaultValues(TEMPLATE_MAJOR_VERSION));\n        }\n        if (TEMPLATE_MINOR_VERSION in parameters) {\n            this.templateMinorVersion = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TEMPLATE_MINOR_VERSION, CertificateTemplate.defaultValues(TEMPLATE_MINOR_VERSION));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TEMPLATE_ID:\n                return EMPTY_STRING;\n            case TEMPLATE_MAJOR_VERSION:\n            case TEMPLATE_MINOR_VERSION:\n                return 0;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.templateID || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                    name: (names.templateMajorVersion || EMPTY_STRING),\n                    optional: true\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                    name: (names.templateMinorVersion || EMPTY_STRING),\n                    optional: true\n                }),\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1m);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CertificateTemplate.schema({\n            names: {\n                templateID: TEMPLATE_ID,\n                templateMajorVersion: TEMPLATE_MAJOR_VERSION,\n                templateMinorVersion: TEMPLATE_MINOR_VERSION\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.templateID = asn1.result.templateID.valueBlock.toString();\n        if (TEMPLATE_MAJOR_VERSION in asn1.result) {\n            this.templateMajorVersion = asn1.result.templateMajorVersion.valueBlock.valueDec;\n        }\n        if (TEMPLATE_MINOR_VERSION in asn1.result) {\n            this.templateMinorVersion = asn1.result.templateMinorVersion.valueBlock.valueDec;\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.templateID }));\n        if (TEMPLATE_MAJOR_VERSION in this) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.templateMajorVersion }));\n        }\n        if (TEMPLATE_MINOR_VERSION in this) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.templateMinorVersion }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            templateID: this.templateID\n        };\n        if (TEMPLATE_MAJOR_VERSION in this)\n            res.templateMajorVersion = this.templateMajorVersion;\n        if (TEMPLATE_MINOR_VERSION in this)\n            res.templateMinorVersion = this.templateMinorVersion;\n        return res;\n    }\n}\n\nconst DISTRIBUTION_POINT$1 = \"distributionPoint\";\nconst DISTRIBUTION_POINT_NAMES$1 = \"distributionPointNames\";\nconst REASONS = \"reasons\";\nconst CRL_ISSUER = \"cRLIssuer\";\nconst CRL_ISSUER_NAMES = \"cRLIssuerNames\";\nconst CLEAR_PROPS$1l = [\n    DISTRIBUTION_POINT$1,\n    DISTRIBUTION_POINT_NAMES$1,\n    REASONS,\n    CRL_ISSUER,\n    CRL_ISSUER_NAMES,\n];\nclass DistributionPoint extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (DISTRIBUTION_POINT$1 in parameters) {\n            this.distributionPoint = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DISTRIBUTION_POINT$1, DistributionPoint.defaultValues(DISTRIBUTION_POINT$1));\n        }\n        if (REASONS in parameters) {\n            this.reasons = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REASONS, DistributionPoint.defaultValues(REASONS));\n        }\n        if (CRL_ISSUER in parameters) {\n            this.cRLIssuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRL_ISSUER, DistributionPoint.defaultValues(CRL_ISSUER));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case DISTRIBUTION_POINT$1:\n                return [];\n            case REASONS:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            case CRL_ISSUER:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                            value: [\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                    name: (names.distributionPoint || EMPTY_STRING),\n                                    optional: true,\n                                    idBlock: {\n                                        tagClass: 3,\n                                        tagNumber: 0\n                                    },\n                                    value: [\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                                            name: (names.distributionPointNames || EMPTY_STRING),\n                                            value: GeneralName.schema()\n                                        })\n                                    ]\n                                }),\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                    name: (names.distributionPoint || EMPTY_STRING),\n                                    optional: true,\n                                    idBlock: {\n                                        tagClass: 3,\n                                        tagNumber: 1\n                                    },\n                                    value: RelativeDistinguishedNames.schema().valueBlock.value\n                                })\n                            ]\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.reasons || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.cRLIssuer || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.cRLIssuerNames || EMPTY_STRING),\n                            value: GeneralName.schema()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1l);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, DistributionPoint.schema({\n            names: {\n                distributionPoint: DISTRIBUTION_POINT$1,\n                distributionPointNames: DISTRIBUTION_POINT_NAMES$1,\n                reasons: REASONS,\n                cRLIssuer: CRL_ISSUER,\n                cRLIssuerNames: CRL_ISSUER_NAMES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (DISTRIBUTION_POINT$1 in asn1.result) {\n            if (asn1.result.distributionPoint.idBlock.tagNumber === 0) {\n                this.distributionPoint = Array.from(asn1.result.distributionPointNames, element => new GeneralName({ schema: element }));\n            }\n            if (asn1.result.distributionPoint.idBlock.tagNumber === 1) {\n                this.distributionPoint = new RelativeDistinguishedNames({\n                    schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                        value: asn1.result.distributionPoint.valueBlock.value\n                    })\n                });\n            }\n        }\n        if (REASONS in asn1.result) {\n            this.reasons = new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ valueHex: asn1.result.reasons.valueBlock.valueHex });\n        }\n        if (CRL_ISSUER in asn1.result) {\n            this.cRLIssuer = Array.from(asn1.result.cRLIssuerNames, element => new GeneralName({ schema: element }));\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        if (this.distributionPoint) {\n            let internalValue;\n            if (this.distributionPoint instanceof Array) {\n                internalValue = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: Array.from(this.distributionPoint, o => o.toSchema())\n                });\n            }\n            else {\n                internalValue = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [this.distributionPoint.toSchema()]\n                });\n            }\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [internalValue]\n            }));\n        }\n        if (this.reasons) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                valueHex: this.reasons.valueBlock.valueHexView\n            }));\n        }\n        if (this.cRLIssuer) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                },\n                value: Array.from(this.cRLIssuer, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const object = {};\n        if (this.distributionPoint) {\n            if (this.distributionPoint instanceof Array) {\n                object.distributionPoint = Array.from(this.distributionPoint, o => o.toJSON());\n            }\n            else {\n                object.distributionPoint = this.distributionPoint.toJSON();\n            }\n        }\n        if (this.reasons) {\n            object.reasons = this.reasons.toJSON();\n        }\n        if (this.cRLIssuer) {\n            object.cRLIssuer = Array.from(this.cRLIssuer, o => o.toJSON());\n        }\n        return object;\n    }\n}\nDistributionPoint.CLASS_NAME = \"DistributionPoint\";\n\nconst DISTRIBUTION_POINTS = \"distributionPoints\";\nconst CLEAR_PROPS$1k = [\n    DISTRIBUTION_POINTS\n];\nclass CRLDistributionPoints extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.distributionPoints = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DISTRIBUTION_POINTS, CRLDistributionPoints.defaultValues(DISTRIBUTION_POINTS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case DISTRIBUTION_POINTS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.distributionPoints || EMPTY_STRING),\n                    value: DistributionPoint.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1k);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CRLDistributionPoints.schema({\n            names: {\n                distributionPoints: DISTRIBUTION_POINTS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.distributionPoints = Array.from(asn1.result.distributionPoints, element => new DistributionPoint({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.distributionPoints, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            distributionPoints: Array.from(this.distributionPoints, o => o.toJSON())\n        };\n    }\n}\nCRLDistributionPoints.CLASS_NAME = \"CRLDistributionPoints\";\n\nconst KEY_PURPOSES = \"keyPurposes\";\nconst CLEAR_PROPS$1j = [\n    KEY_PURPOSES,\n];\nclass ExtKeyUsage extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.keyPurposes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_PURPOSES, ExtKeyUsage.defaultValues(KEY_PURPOSES));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case KEY_PURPOSES:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.keyPurposes || EMPTY_STRING),\n                    value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1j);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, ExtKeyUsage.schema({\n            names: {\n                keyPurposes: KEY_PURPOSES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.keyPurposes = Array.from(asn1.result.keyPurposes, (element) => element.valueBlock.toString());\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.keyPurposes, element => new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: element }))\n        }));\n    }\n    toJSON() {\n        return {\n            keyPurposes: Array.from(this.keyPurposes)\n        };\n    }\n}\nExtKeyUsage.CLASS_NAME = \"ExtKeyUsage\";\n\nconst ACCESS_DESCRIPTIONS = \"accessDescriptions\";\nclass InfoAccess extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.accessDescriptions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ACCESS_DESCRIPTIONS, InfoAccess.defaultValues(ACCESS_DESCRIPTIONS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ACCESS_DESCRIPTIONS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.accessDescriptions || EMPTY_STRING),\n                    value: AccessDescription.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            ACCESS_DESCRIPTIONS\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, InfoAccess.schema({\n            names: {\n                accessDescriptions: ACCESS_DESCRIPTIONS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.accessDescriptions = Array.from(asn1.result.accessDescriptions, element => new AccessDescription({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.accessDescriptions, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            accessDescriptions: Array.from(this.accessDescriptions, o => o.toJSON())\n        };\n    }\n}\nInfoAccess.CLASS_NAME = \"InfoAccess\";\n\nconst DISTRIBUTION_POINT = \"distributionPoint\";\nconst DISTRIBUTION_POINT_NAMES = \"distributionPointNames\";\nconst ONLY_CONTAINS_USER_CERTS = \"onlyContainsUserCerts\";\nconst ONLY_CONTAINS_CA_CERTS = \"onlyContainsCACerts\";\nconst ONLY_SOME_REASON = \"onlySomeReasons\";\nconst INDIRECT_CRL = \"indirectCRL\";\nconst ONLY_CONTAINS_ATTRIBUTE_CERTS = \"onlyContainsAttributeCerts\";\nconst CLEAR_PROPS$1i = [\n    DISTRIBUTION_POINT,\n    DISTRIBUTION_POINT_NAMES,\n    ONLY_CONTAINS_USER_CERTS,\n    ONLY_CONTAINS_CA_CERTS,\n    ONLY_SOME_REASON,\n    INDIRECT_CRL,\n    ONLY_CONTAINS_ATTRIBUTE_CERTS,\n];\nclass IssuingDistributionPoint extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (DISTRIBUTION_POINT in parameters) {\n            this.distributionPoint = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DISTRIBUTION_POINT, IssuingDistributionPoint.defaultValues(DISTRIBUTION_POINT));\n        }\n        this.onlyContainsUserCerts = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ONLY_CONTAINS_USER_CERTS, IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_USER_CERTS));\n        this.onlyContainsCACerts = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ONLY_CONTAINS_CA_CERTS, IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_CA_CERTS));\n        if (ONLY_SOME_REASON in parameters) {\n            this.onlySomeReasons = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ONLY_SOME_REASON, IssuingDistributionPoint.defaultValues(ONLY_SOME_REASON));\n        }\n        this.indirectCRL = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, INDIRECT_CRL, IssuingDistributionPoint.defaultValues(INDIRECT_CRL));\n        this.onlyContainsAttributeCerts = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ONLY_CONTAINS_ATTRIBUTE_CERTS, IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case DISTRIBUTION_POINT:\n                return [];\n            case ONLY_CONTAINS_USER_CERTS:\n                return false;\n            case ONLY_CONTAINS_CA_CERTS:\n                return false;\n            case ONLY_SOME_REASON:\n                return 0;\n            case INDIRECT_CRL:\n                return false;\n            case ONLY_CONTAINS_ATTRIBUTE_CERTS:\n                return false;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                            value: [\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                    name: (names.distributionPoint || EMPTY_STRING),\n                                    idBlock: {\n                                        tagClass: 3,\n                                        tagNumber: 0\n                                    },\n                                    value: [\n                                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                                            name: (names.distributionPointNames || EMPTY_STRING),\n                                            value: GeneralName.schema()\n                                        })\n                                    ]\n                                }),\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                    name: (names.distributionPoint || EMPTY_STRING),\n                                    idBlock: {\n                                        tagClass: 3,\n                                        tagNumber: 1\n                                    },\n                                    value: RelativeDistinguishedNames.schema().valueBlock.value\n                                })\n                            ]\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.onlyContainsUserCerts || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.onlyContainsCACerts || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.onlySomeReasons || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 3\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.indirectCRL || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 4\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.onlyContainsAttributeCerts || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 5\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1i);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, IssuingDistributionPoint.schema({\n            names: {\n                distributionPoint: DISTRIBUTION_POINT,\n                distributionPointNames: DISTRIBUTION_POINT_NAMES,\n                onlyContainsUserCerts: ONLY_CONTAINS_USER_CERTS,\n                onlyContainsCACerts: ONLY_CONTAINS_CA_CERTS,\n                onlySomeReasons: ONLY_SOME_REASON,\n                indirectCRL: INDIRECT_CRL,\n                onlyContainsAttributeCerts: ONLY_CONTAINS_ATTRIBUTE_CERTS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (DISTRIBUTION_POINT in asn1.result) {\n            switch (true) {\n                case (asn1.result.distributionPoint.idBlock.tagNumber === 0):\n                    this.distributionPoint = Array.from(asn1.result.distributionPointNames, element => new GeneralName({ schema: element }));\n                    break;\n                case (asn1.result.distributionPoint.idBlock.tagNumber === 1):\n                    {\n                        this.distributionPoint = new RelativeDistinguishedNames({\n                            schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                                value: asn1.result.distributionPoint.valueBlock.value\n                            })\n                        });\n                    }\n                    break;\n                default:\n                    throw new Error(\"Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}\");\n            }\n        }\n        if (ONLY_CONTAINS_USER_CERTS in asn1.result) {\n            const view = new Uint8Array(asn1.result.onlyContainsUserCerts.valueBlock.valueHex);\n            this.onlyContainsUserCerts = (view[0] !== 0x00);\n        }\n        if (ONLY_CONTAINS_CA_CERTS in asn1.result) {\n            const view = new Uint8Array(asn1.result.onlyContainsCACerts.valueBlock.valueHex);\n            this.onlyContainsCACerts = (view[0] !== 0x00);\n        }\n        if (ONLY_SOME_REASON in asn1.result) {\n            const view = new Uint8Array(asn1.result.onlySomeReasons.valueBlock.valueHex);\n            this.onlySomeReasons = view[0];\n        }\n        if (INDIRECT_CRL in asn1.result) {\n            const view = new Uint8Array(asn1.result.indirectCRL.valueBlock.valueHex);\n            this.indirectCRL = (view[0] !== 0x00);\n        }\n        if (ONLY_CONTAINS_ATTRIBUTE_CERTS in asn1.result) {\n            const view = new Uint8Array(asn1.result.onlyContainsAttributeCerts.valueBlock.valueHex);\n            this.onlyContainsAttributeCerts = (view[0] !== 0x00);\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        if (this.distributionPoint) {\n            let value;\n            if (this.distributionPoint instanceof Array) {\n                value = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: Array.from(this.distributionPoint, o => o.toSchema())\n                });\n            }\n            else {\n                value = this.distributionPoint.toSchema();\n                value.idBlock.tagClass = 3;\n                value.idBlock.tagNumber = 1;\n            }\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [value]\n            }));\n        }\n        if (this.onlyContainsUserCerts !== IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_USER_CERTS)) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                valueHex: (new Uint8Array([0xFF])).buffer\n            }));\n        }\n        if (this.onlyContainsCACerts !== IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_CA_CERTS)) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                },\n                valueHex: (new Uint8Array([0xFF])).buffer\n            }));\n        }\n        if (this.onlySomeReasons !== undefined) {\n            const buffer = new ArrayBuffer(1);\n            const view = new Uint8Array(buffer);\n            view[0] = this.onlySomeReasons;\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 3\n                },\n                valueHex: buffer\n            }));\n        }\n        if (this.indirectCRL !== IssuingDistributionPoint.defaultValues(INDIRECT_CRL)) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 4\n                },\n                valueHex: (new Uint8Array([0xFF])).buffer\n            }));\n        }\n        if (this.onlyContainsAttributeCerts !== IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS)) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 5\n                },\n                valueHex: (new Uint8Array([0xFF])).buffer\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const obj = {};\n        if (this.distributionPoint) {\n            if (this.distributionPoint instanceof Array) {\n                obj.distributionPoint = Array.from(this.distributionPoint, o => o.toJSON());\n            }\n            else {\n                obj.distributionPoint = this.distributionPoint.toJSON();\n            }\n        }\n        if (this.onlyContainsUserCerts !== IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_USER_CERTS)) {\n            obj.onlyContainsUserCerts = this.onlyContainsUserCerts;\n        }\n        if (this.onlyContainsCACerts !== IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_CA_CERTS)) {\n            obj.onlyContainsCACerts = this.onlyContainsCACerts;\n        }\n        if (ONLY_SOME_REASON in this) {\n            obj.onlySomeReasons = this.onlySomeReasons;\n        }\n        if (this.indirectCRL !== IssuingDistributionPoint.defaultValues(INDIRECT_CRL)) {\n            obj.indirectCRL = this.indirectCRL;\n        }\n        if (this.onlyContainsAttributeCerts !== IssuingDistributionPoint.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS)) {\n            obj.onlyContainsAttributeCerts = this.onlyContainsAttributeCerts;\n        }\n        return obj;\n    }\n}\nIssuingDistributionPoint.CLASS_NAME = \"IssuingDistributionPoint\";\n\nconst BASE = \"base\";\nconst MINIMUM = \"minimum\";\nconst MAXIMUM = \"maximum\";\nconst CLEAR_PROPS$1h = [\n    BASE,\n    MINIMUM,\n    MAXIMUM\n];\nclass GeneralSubtree extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.base = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, BASE, GeneralSubtree.defaultValues(BASE));\n        this.minimum = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MINIMUM, GeneralSubtree.defaultValues(MINIMUM));\n        if (MAXIMUM in parameters) {\n            this.maximum = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MAXIMUM, GeneralSubtree.defaultValues(MAXIMUM));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case BASE:\n                return new GeneralName();\n            case MINIMUM:\n                return 0;\n            case MAXIMUM:\n                return 0;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                GeneralName.schema(names.base || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.minimum || EMPTY_STRING) })]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.maximum || EMPTY_STRING) })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1h);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, GeneralSubtree.schema({\n            names: {\n                base: {\n                    names: {\n                        blockName: BASE\n                    }\n                },\n                minimum: MINIMUM,\n                maximum: MAXIMUM\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.base = new GeneralName({ schema: asn1.result.base });\n        if (MINIMUM in asn1.result) {\n            if (asn1.result.minimum.valueBlock.isHexOnly)\n                this.minimum = asn1.result.minimum;\n            else\n                this.minimum = asn1.result.minimum.valueBlock.valueDec;\n        }\n        if (MAXIMUM in asn1.result) {\n            if (asn1.result.maximum.valueBlock.isHexOnly)\n                this.maximum = asn1.result.maximum;\n            else\n                this.maximum = asn1.result.maximum.valueBlock.valueDec;\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.base.toSchema());\n        if (this.minimum !== 0) {\n            let valueMinimum = 0;\n            if (this.minimum instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer) {\n                valueMinimum = this.minimum;\n            }\n            else {\n                valueMinimum = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.minimum });\n            }\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [valueMinimum]\n            }));\n        }\n        if (MAXIMUM in this) {\n            let valueMaximum = 0;\n            if (this.maximum instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer) {\n                valueMaximum = this.maximum;\n            }\n            else {\n                valueMaximum = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.maximum });\n            }\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: [valueMaximum]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            base: this.base.toJSON()\n        };\n        if (this.minimum !== 0) {\n            if (typeof this.minimum === \"number\") {\n                res.minimum = this.minimum;\n            }\n            else {\n                res.minimum = this.minimum.toJSON();\n            }\n        }\n        if (this.maximum !== undefined) {\n            if (typeof this.maximum === \"number\") {\n                res.maximum = this.maximum;\n            }\n            else {\n                res.maximum = this.maximum.toJSON();\n            }\n        }\n        return res;\n    }\n}\nGeneralSubtree.CLASS_NAME = \"GeneralSubtree\";\n\nconst PERMITTED_SUBTREES = \"permittedSubtrees\";\nconst EXCLUDED_SUBTREES = \"excludedSubtrees\";\nconst CLEAR_PROPS$1g = [\n    PERMITTED_SUBTREES,\n    EXCLUDED_SUBTREES\n];\nclass NameConstraints extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (PERMITTED_SUBTREES in parameters) {\n            this.permittedSubtrees = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PERMITTED_SUBTREES, NameConstraints.defaultValues(PERMITTED_SUBTREES));\n        }\n        if (EXCLUDED_SUBTREES in parameters) {\n            this.excludedSubtrees = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXCLUDED_SUBTREES, NameConstraints.defaultValues(EXCLUDED_SUBTREES));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case PERMITTED_SUBTREES:\n            case EXCLUDED_SUBTREES:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.permittedSubtrees || EMPTY_STRING),\n                            value: GeneralSubtree.schema()\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.excludedSubtrees || EMPTY_STRING),\n                            value: GeneralSubtree.schema()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1g);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, NameConstraints.schema({\n            names: {\n                permittedSubtrees: PERMITTED_SUBTREES,\n                excludedSubtrees: EXCLUDED_SUBTREES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (PERMITTED_SUBTREES in asn1.result)\n            this.permittedSubtrees = Array.from(asn1.result.permittedSubtrees, element => new GeneralSubtree({ schema: element }));\n        if (EXCLUDED_SUBTREES in asn1.result)\n            this.excludedSubtrees = Array.from(asn1.result.excludedSubtrees, element => new GeneralSubtree({ schema: element }));\n    }\n    toSchema() {\n        const outputArray = [];\n        if (this.permittedSubtrees) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: Array.from(this.permittedSubtrees, o => o.toSchema())\n            }));\n        }\n        if (this.excludedSubtrees) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: Array.from(this.excludedSubtrees, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const object = {};\n        if (this.permittedSubtrees) {\n            object.permittedSubtrees = Array.from(this.permittedSubtrees, o => o.toJSON());\n        }\n        if (this.excludedSubtrees) {\n            object.excludedSubtrees = Array.from(this.excludedSubtrees, o => o.toJSON());\n        }\n        return object;\n    }\n}\nNameConstraints.CLASS_NAME = \"NameConstraints\";\n\nconst REQUIRE_EXPLICIT_POLICY = \"requireExplicitPolicy\";\nconst INHIBIT_POLICY_MAPPING = \"inhibitPolicyMapping\";\nconst CLEAR_PROPS$1f = [\n    REQUIRE_EXPLICIT_POLICY,\n    INHIBIT_POLICY_MAPPING,\n];\nclass PolicyConstraints extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (REQUIRE_EXPLICIT_POLICY in parameters) {\n            this.requireExplicitPolicy = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REQUIRE_EXPLICIT_POLICY, PolicyConstraints.defaultValues(REQUIRE_EXPLICIT_POLICY));\n        }\n        if (INHIBIT_POLICY_MAPPING in parameters) {\n            this.inhibitPolicyMapping = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, INHIBIT_POLICY_MAPPING, PolicyConstraints.defaultValues(INHIBIT_POLICY_MAPPING));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case REQUIRE_EXPLICIT_POLICY:\n                return 0;\n            case INHIBIT_POLICY_MAPPING:\n                return 0;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.requireExplicitPolicy || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.inhibitPolicyMapping || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1f);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PolicyConstraints.schema({\n            names: {\n                requireExplicitPolicy: REQUIRE_EXPLICIT_POLICY,\n                inhibitPolicyMapping: INHIBIT_POLICY_MAPPING\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (REQUIRE_EXPLICIT_POLICY in asn1.result) {\n            const field1 = asn1.result.requireExplicitPolicy;\n            field1.idBlock.tagClass = 1;\n            field1.idBlock.tagNumber = 2;\n            const ber1 = field1.toBER(false);\n            const int1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(ber1);\n            AsnError.assert(int1, \"Integer\");\n            this.requireExplicitPolicy = int1.result.valueBlock.valueDec;\n        }\n        if (INHIBIT_POLICY_MAPPING in asn1.result) {\n            const field2 = asn1.result.inhibitPolicyMapping;\n            field2.idBlock.tagClass = 1;\n            field2.idBlock.tagNumber = 2;\n            const ber2 = field2.toBER(false);\n            const int2 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(ber2);\n            AsnError.assert(int2, \"Integer\");\n            this.inhibitPolicyMapping = int2.result.valueBlock.valueDec;\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        if (REQUIRE_EXPLICIT_POLICY in this) {\n            const int1 = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.requireExplicitPolicy });\n            int1.idBlock.tagClass = 3;\n            int1.idBlock.tagNumber = 0;\n            outputArray.push(int1);\n        }\n        if (INHIBIT_POLICY_MAPPING in this) {\n            const int2 = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.inhibitPolicyMapping });\n            int2.idBlock.tagClass = 3;\n            int2.idBlock.tagNumber = 1;\n            outputArray.push(int2);\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {};\n        if (REQUIRE_EXPLICIT_POLICY in this) {\n            res.requireExplicitPolicy = this.requireExplicitPolicy;\n        }\n        if (INHIBIT_POLICY_MAPPING in this) {\n            res.inhibitPolicyMapping = this.inhibitPolicyMapping;\n        }\n        return res;\n    }\n}\nPolicyConstraints.CLASS_NAME = \"PolicyConstraints\";\n\nconst ISSUER_DOMAIN_POLICY = \"issuerDomainPolicy\";\nconst SUBJECT_DOMAIN_POLICY = \"subjectDomainPolicy\";\nconst CLEAR_PROPS$1e = [\n    ISSUER_DOMAIN_POLICY,\n    SUBJECT_DOMAIN_POLICY\n];\nclass PolicyMapping extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.issuerDomainPolicy = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER_DOMAIN_POLICY, PolicyMapping.defaultValues(ISSUER_DOMAIN_POLICY));\n        this.subjectDomainPolicy = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUBJECT_DOMAIN_POLICY, PolicyMapping.defaultValues(SUBJECT_DOMAIN_POLICY));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ISSUER_DOMAIN_POLICY:\n                return EMPTY_STRING;\n            case SUBJECT_DOMAIN_POLICY:\n                return EMPTY_STRING;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.issuerDomainPolicy || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.subjectDomainPolicy || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1e);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PolicyMapping.schema({\n            names: {\n                issuerDomainPolicy: ISSUER_DOMAIN_POLICY,\n                subjectDomainPolicy: SUBJECT_DOMAIN_POLICY\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.issuerDomainPolicy = asn1.result.issuerDomainPolicy.valueBlock.toString();\n        this.subjectDomainPolicy = asn1.result.subjectDomainPolicy.valueBlock.toString();\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.issuerDomainPolicy }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.subjectDomainPolicy })\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            issuerDomainPolicy: this.issuerDomainPolicy,\n            subjectDomainPolicy: this.subjectDomainPolicy\n        };\n    }\n}\nPolicyMapping.CLASS_NAME = \"PolicyMapping\";\n\nconst MAPPINGS = \"mappings\";\nconst CLEAR_PROPS$1d = [\n    MAPPINGS,\n];\nclass PolicyMappings extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.mappings = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MAPPINGS, PolicyMappings.defaultValues(MAPPINGS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case MAPPINGS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.mappings || EMPTY_STRING),\n                    value: PolicyMapping.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1d);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PolicyMappings.schema({\n            names: {\n                mappings: MAPPINGS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.mappings = Array.from(asn1.result.mappings, element => new PolicyMapping({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.mappings, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            mappings: Array.from(this.mappings, o => o.toJSON())\n        };\n    }\n}\nPolicyMappings.CLASS_NAME = \"PolicyMappings\";\n\nconst NOT_BEFORE$1 = \"notBefore\";\nconst NOT_AFTER$1 = \"notAfter\";\nconst CLEAR_PROPS$1c = [\n    NOT_BEFORE$1,\n    NOT_AFTER$1\n];\nclass PrivateKeyUsagePeriod extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (NOT_BEFORE$1 in parameters) {\n            this.notBefore = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NOT_BEFORE$1, PrivateKeyUsagePeriod.defaultValues(NOT_BEFORE$1));\n        }\n        if (NOT_AFTER$1 in parameters) {\n            this.notAfter = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NOT_AFTER$1, PrivateKeyUsagePeriod.defaultValues(NOT_AFTER$1));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case NOT_BEFORE$1:\n                return new Date();\n            case NOT_AFTER$1:\n                return new Date();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.notBefore || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.notAfter || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1c);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PrivateKeyUsagePeriod.schema({\n            names: {\n                notBefore: NOT_BEFORE$1,\n                notAfter: NOT_AFTER$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (NOT_BEFORE$1 in asn1.result) {\n            const localNotBefore = new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime();\n            localNotBefore.fromBuffer(asn1.result.notBefore.valueBlock.valueHex);\n            this.notBefore = localNotBefore.toDate();\n        }\n        if (NOT_AFTER$1 in asn1.result) {\n            const localNotAfter = new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueHex: asn1.result.notAfter.valueBlock.valueHex });\n            localNotAfter.fromBuffer(asn1.result.notAfter.valueBlock.valueHex);\n            this.notAfter = localNotAfter.toDate();\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        if (NOT_BEFORE$1 in this) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                valueHex: (new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.notBefore })).valueBlock.valueHexView\n            }));\n        }\n        if (NOT_AFTER$1 in this) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                valueHex: (new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.notAfter })).valueBlock.valueHexView\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {};\n        if (this.notBefore) {\n            res.notBefore = this.notBefore;\n        }\n        if (this.notAfter) {\n            res.notAfter = this.notAfter;\n        }\n        return res;\n    }\n}\nPrivateKeyUsagePeriod.CLASS_NAME = \"PrivateKeyUsagePeriod\";\n\nconst ID = \"id\";\nconst TYPE$2 = \"type\";\nconst VALUES = \"values\";\nconst QC_STATEMENT_CLEAR_PROPS = [\n    ID,\n    TYPE$2\n];\nconst QC_STATEMENTS_CLEAR_PROPS = [\n    VALUES\n];\nclass QCStatement extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.id = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ID, QCStatement.defaultValues(ID));\n        if (TYPE$2 in parameters) {\n            this.type = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TYPE$2, QCStatement.defaultValues(TYPE$2));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ID:\n                return EMPTY_STRING;\n            case TYPE$2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case ID:\n                return (memberValue === EMPTY_STRING);\n            case TYPE$2:\n                return (memberValue instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Null);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.id || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({\n                    name: (names.type || EMPTY_STRING),\n                    optional: true\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, QC_STATEMENT_CLEAR_PROPS);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, QCStatement.schema({\n            names: {\n                id: ID,\n                type: TYPE$2\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.id = asn1.result.id.valueBlock.toString();\n        if (TYPE$2 in asn1.result)\n            this.type = asn1.result.type;\n    }\n    toSchema() {\n        const value = [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.id })\n        ];\n        if (TYPE$2 in this)\n            value.push(this.type);\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value,\n        }));\n    }\n    toJSON() {\n        const object = {\n            id: this.id\n        };\n        if (this.type) {\n            object.type = this.type.toJSON();\n        }\n        return object;\n    }\n}\nQCStatement.CLASS_NAME = \"QCStatement\";\nclass QCStatements extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.values = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUES, QCStatements.defaultValues(VALUES));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VALUES:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VALUES:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.values || EMPTY_STRING),\n                    value: QCStatement.schema(names.value || {})\n                }),\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, QC_STATEMENTS_CLEAR_PROPS);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, QCStatements.schema({\n            names: {\n                values: VALUES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.values = Array.from(asn1.result.values, element => new QCStatement({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.values, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            values: Array.from(this.values, o => o.toJSON())\n        };\n    }\n}\nQCStatements.CLASS_NAME = \"QCStatements\";\n\nvar _a;\nclass ECNamedCurves {\n    static register(name, id, size) {\n        this.namedCurves[name.toLowerCase()] = this.namedCurves[id] = { name, id, size };\n    }\n    static find(nameOrId) {\n        return this.namedCurves[nameOrId.toLowerCase()] || null;\n    }\n}\n_a = ECNamedCurves;\nECNamedCurves.namedCurves = {};\n(() => {\n    _a.register(\"P-256\", \"1.2.840.10045.3.1.7\", 32);\n    _a.register(\"P-384\", \"1.3.132.0.34\", 48);\n    _a.register(\"P-521\", \"1.3.132.0.35\", 66);\n    _a.register(\"brainpoolP256r1\", \"1.3.36.3.3.2.8.1.1.7\", 32);\n    _a.register(\"brainpoolP384r1\", \"1.3.36.3.3.2.8.1.1.11\", 48);\n    _a.register(\"brainpoolP512r1\", \"1.3.36.3.3.2.8.1.1.13\", 64);\n})();\n\nconst X = \"x\";\nconst Y = \"y\";\nconst NAMED_CURVE$1 = \"namedCurve\";\nclass ECPublicKey extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.x = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, X, ECPublicKey.defaultValues(X));\n        this.y = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, Y, ECPublicKey.defaultValues(Y));\n        this.namedCurve = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NAMED_CURVE$1, ECPublicKey.defaultValues(NAMED_CURVE$1));\n        if (parameters.json) {\n            this.fromJSON(parameters.json);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case X:\n            case Y:\n                return EMPTY_BUFFER;\n            case NAMED_CURVE$1:\n                return EMPTY_STRING;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case X:\n            case Y:\n                return memberValue instanceof ArrayBuffer &&\n                    (pvutils__WEBPACK_IMPORTED_MODULE_2__.isEqualBuffer(memberValue, ECPublicKey.defaultValues(memberName)));\n            case NAMED_CURVE$1:\n                return typeof memberValue === \"string\" &&\n                    memberValue === ECPublicKey.defaultValues(memberName);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema() {\n        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.RawData();\n    }\n    fromSchema(schema1) {\n        const view = pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toUint8Array(schema1);\n        if (view[0] !== 0x04) {\n            throw new Error(\"Object's schema was not verified against input data for ECPublicKey\");\n        }\n        const namedCurve = ECNamedCurves.find(this.namedCurve);\n        if (!namedCurve) {\n            throw new Error(`Incorrect curve OID: ${this.namedCurve}`);\n        }\n        const coordinateLength = namedCurve.size;\n        if (view.byteLength !== (coordinateLength * 2 + 1)) {\n            throw new Error(\"Object's schema was not verified against input data for ECPublicKey\");\n        }\n        this.namedCurve = namedCurve.name;\n        this.x = view.slice(1, coordinateLength + 1).buffer;\n        this.y = view.slice(1 + coordinateLength, coordinateLength * 2 + 1).buffer;\n    }\n    toSchema() {\n        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.RawData({\n            data: pvutils__WEBPACK_IMPORTED_MODULE_2__.utilConcatBuf((new Uint8Array([0x04])).buffer, this.x, this.y)\n        });\n    }\n    toJSON() {\n        const namedCurve = ECNamedCurves.find(this.namedCurve);\n        return {\n            crv: namedCurve ? namedCurve.name : this.namedCurve,\n            x: pvutils__WEBPACK_IMPORTED_MODULE_2__.toBase64(pvutils__WEBPACK_IMPORTED_MODULE_2__.arrayBufferToString(this.x), true, true, false),\n            y: pvutils__WEBPACK_IMPORTED_MODULE_2__.toBase64(pvutils__WEBPACK_IMPORTED_MODULE_2__.arrayBufferToString(this.y), true, true, false)\n        };\n    }\n    fromJSON(json) {\n        ParameterError.assert(\"json\", json, \"crv\", \"x\", \"y\");\n        let coordinateLength = 0;\n        const namedCurve = ECNamedCurves.find(json.crv);\n        if (namedCurve) {\n            this.namedCurve = namedCurve.id;\n            coordinateLength = namedCurve.size;\n        }\n        const xConvertBuffer = pvutils__WEBPACK_IMPORTED_MODULE_2__.stringToArrayBuffer(pvutils__WEBPACK_IMPORTED_MODULE_2__.fromBase64(json.x, true));\n        if (xConvertBuffer.byteLength < coordinateLength) {\n            this.x = new ArrayBuffer(coordinateLength);\n            const view = new Uint8Array(this.x);\n            const convertBufferView = new Uint8Array(xConvertBuffer);\n            view.set(convertBufferView, 1);\n        }\n        else {\n            this.x = xConvertBuffer.slice(0, coordinateLength);\n        }\n        const yConvertBuffer = pvutils__WEBPACK_IMPORTED_MODULE_2__.stringToArrayBuffer(pvutils__WEBPACK_IMPORTED_MODULE_2__.fromBase64(json.y, true));\n        if (yConvertBuffer.byteLength < coordinateLength) {\n            this.y = new ArrayBuffer(coordinateLength);\n            const view = new Uint8Array(this.y);\n            const convertBufferView = new Uint8Array(yConvertBuffer);\n            view.set(convertBufferView, 1);\n        }\n        else {\n            this.y = yConvertBuffer.slice(0, coordinateLength);\n        }\n    }\n}\nECPublicKey.CLASS_NAME = \"ECPublicKey\";\n\nconst MODULUS$1 = \"modulus\";\nconst PUBLIC_EXPONENT$1 = \"publicExponent\";\nconst CLEAR_PROPS$1b = [MODULUS$1, PUBLIC_EXPONENT$1];\nclass RSAPublicKey extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.modulus = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MODULUS$1, RSAPublicKey.defaultValues(MODULUS$1));\n        this.publicExponent = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PUBLIC_EXPONENT$1, RSAPublicKey.defaultValues(PUBLIC_EXPONENT$1));\n        if (parameters.json) {\n            this.fromJSON(parameters.json);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case MODULUS$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case PUBLIC_EXPONENT$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.modulus || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.publicExponent || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1b);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RSAPublicKey.schema({\n            names: {\n                modulus: MODULUS$1,\n                publicExponent: PUBLIC_EXPONENT$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.modulus = asn1.result.modulus.convertFromDER(256);\n        this.publicExponent = asn1.result.publicExponent;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.modulus.convertToDER(),\n                this.publicExponent\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            n: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.modulus.valueBlock.valueHexView),\n            e: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.publicExponent.valueBlock.valueHexView),\n        };\n    }\n    fromJSON(json) {\n        ParameterError.assert(\"json\", json, \"n\", \"e\");\n        const array = pvutils__WEBPACK_IMPORTED_MODULE_2__.stringToArrayBuffer(pvutils__WEBPACK_IMPORTED_MODULE_2__.fromBase64(json.n, true));\n        this.modulus = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: array.slice(0, Math.pow(2, pvutils__WEBPACK_IMPORTED_MODULE_2__.nearestPowerOf2(array.byteLength))) });\n        this.publicExponent = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvutils__WEBPACK_IMPORTED_MODULE_2__.stringToArrayBuffer(pvutils__WEBPACK_IMPORTED_MODULE_2__.fromBase64(json.e, true)).slice(0, 3) });\n    }\n}\nRSAPublicKey.CLASS_NAME = \"RSAPublicKey\";\n\nconst ALGORITHM$1 = \"algorithm\";\nconst SUBJECT_PUBLIC_KEY = \"subjectPublicKey\";\nconst CLEAR_PROPS$1a = [ALGORITHM$1, SUBJECT_PUBLIC_KEY];\nclass PublicKeyInfo extends PkiObject {\n    get parsedKey() {\n        if (this._parsedKey === undefined) {\n            switch (this.algorithm.algorithmId) {\n                case \"1.2.840.10045.2.1\":\n                    if (\"algorithmParams\" in this.algorithm) {\n                        if (this.algorithm.algorithmParams.constructor.blockName() === asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier.blockName()) {\n                            try {\n                                this._parsedKey = new ECPublicKey({\n                                    namedCurve: this.algorithm.algorithmParams.valueBlock.toString(),\n                                    schema: this.subjectPublicKey.valueBlock.valueHexView\n                                });\n                            }\n                            catch (ex) {\n                            }\n                        }\n                    }\n                    break;\n                case \"1.2.840.113549.1.1.1\":\n                    {\n                        const publicKeyASN1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.subjectPublicKey.valueBlock.valueHexView);\n                        if (publicKeyASN1.offset !== -1) {\n                            try {\n                                this._parsedKey = new RSAPublicKey({ schema: publicKeyASN1.result });\n                            }\n                            catch (ex) {\n                            }\n                        }\n                    }\n                    break;\n            }\n            this._parsedKey || (this._parsedKey = null);\n        }\n        return this._parsedKey || undefined;\n    }\n    set parsedKey(value) {\n        this._parsedKey = value;\n    }\n    constructor(parameters = {}) {\n        super();\n        this.algorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ALGORITHM$1, PublicKeyInfo.defaultValues(ALGORITHM$1));\n        this.subjectPublicKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUBJECT_PUBLIC_KEY, PublicKeyInfo.defaultValues(SUBJECT_PUBLIC_KEY));\n        const parsedKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"parsedKey\", null);\n        if (parsedKey) {\n            this.parsedKey = parsedKey;\n        }\n        if (parameters.json) {\n            this.fromJSON(parameters.json);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ALGORITHM$1:\n                return new AlgorithmIdentifier();\n            case SUBJECT_PUBLIC_KEY:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.algorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.subjectPublicKey || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1a);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PublicKeyInfo.schema({\n            names: {\n                algorithm: {\n                    names: {\n                        blockName: ALGORITHM$1\n                    }\n                },\n                subjectPublicKey: SUBJECT_PUBLIC_KEY\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.algorithm = new AlgorithmIdentifier({ schema: asn1.result.algorithm });\n        this.subjectPublicKey = asn1.result.subjectPublicKey;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.algorithm.toSchema(),\n                this.subjectPublicKey\n            ]\n        }));\n    }\n    toJSON() {\n        if (!this.parsedKey) {\n            return {\n                algorithm: this.algorithm.toJSON(),\n                subjectPublicKey: this.subjectPublicKey.toJSON(),\n            };\n        }\n        const jwk = {};\n        switch (this.algorithm.algorithmId) {\n            case \"1.2.840.10045.2.1\":\n                jwk.kty = \"EC\";\n                break;\n            case \"1.2.840.113549.1.1.1\":\n                jwk.kty = \"RSA\";\n                break;\n        }\n        const publicKeyJWK = this.parsedKey.toJSON();\n        Object.assign(jwk, publicKeyJWK);\n        return jwk;\n    }\n    fromJSON(json) {\n        if (\"kty\" in json) {\n            switch (json.kty.toUpperCase()) {\n                case \"EC\":\n                    this.parsedKey = new ECPublicKey({ json });\n                    this.algorithm = new AlgorithmIdentifier({\n                        algorithmId: \"1.2.840.10045.2.1\",\n                        algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.parsedKey.namedCurve })\n                    });\n                    break;\n                case \"RSA\":\n                    this.parsedKey = new RSAPublicKey({ json });\n                    this.algorithm = new AlgorithmIdentifier({\n                        algorithmId: \"1.2.840.113549.1.1.1\",\n                        algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                    });\n                    break;\n                default:\n                    throw new Error(`Invalid value for \"kty\" parameter: ${json.kty}`);\n            }\n            this.subjectPublicKey = new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ valueHex: this.parsedKey.toSchema().toBER(false) });\n        }\n    }\n    async importKey(publicKey, crypto = getCrypto(true)) {\n        try {\n            if (!publicKey) {\n                throw new Error(\"Need to provide publicKey input parameter\");\n            }\n            const exportedKey = await crypto.exportKey(\"spki\", publicKey);\n            const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(exportedKey);\n            try {\n                this.fromSchema(asn1.result);\n            }\n            catch (exception) {\n                throw new Error(\"Error during initializing object from schema\");\n            }\n        }\n        catch (e) {\n            const message = e instanceof Error ? e.message : `${e}`;\n            throw new Error(`Error during exporting public key: ${message}`);\n        }\n    }\n}\nPublicKeyInfo.CLASS_NAME = \"PublicKeyInfo\";\n\nconst VERSION$l = \"version\";\nconst PRIVATE_KEY$1 = \"privateKey\";\nconst NAMED_CURVE = \"namedCurve\";\nconst PUBLIC_KEY$1 = \"publicKey\";\nconst CLEAR_PROPS$19 = [\n    VERSION$l,\n    PRIVATE_KEY$1,\n    NAMED_CURVE,\n    PUBLIC_KEY$1\n];\nclass ECPrivateKey extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$l, ECPrivateKey.defaultValues(VERSION$l));\n        this.privateKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRIVATE_KEY$1, ECPrivateKey.defaultValues(PRIVATE_KEY$1));\n        if (NAMED_CURVE in parameters) {\n            this.namedCurve = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NAMED_CURVE, ECPrivateKey.defaultValues(NAMED_CURVE));\n        }\n        if (PUBLIC_KEY$1 in parameters) {\n            this.publicKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PUBLIC_KEY$1, ECPrivateKey.defaultValues(PUBLIC_KEY$1));\n        }\n        if (parameters.json) {\n            this.fromJSON(parameters.json);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$l:\n                return 1;\n            case PRIVATE_KEY$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case NAMED_CURVE:\n                return EMPTY_STRING;\n            case PUBLIC_KEY$1:\n                return new ECPublicKey();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$l:\n                return (memberValue === ECPrivateKey.defaultValues(memberName));\n            case PRIVATE_KEY$1:\n                return (memberValue.isEqual(ECPrivateKey.defaultValues(memberName)));\n            case NAMED_CURVE:\n                return (memberValue === EMPTY_STRING);\n            case PUBLIC_KEY$1:\n                return ((ECPublicKey.compareWithDefault(NAMED_CURVE, memberValue.namedCurve)) &&\n                    (ECPublicKey.compareWithDefault(\"x\", memberValue.x)) &&\n                    (ECPublicKey.compareWithDefault(\"y\", memberValue.y)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.privateKey || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.namedCurve || EMPTY_STRING) })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.publicKey || EMPTY_STRING) })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$19);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, ECPrivateKey.schema({\n            names: {\n                version: VERSION$l,\n                privateKey: PRIVATE_KEY$1,\n                namedCurve: NAMED_CURVE,\n                publicKey: PUBLIC_KEY$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        this.privateKey = asn1.result.privateKey;\n        if (NAMED_CURVE in asn1.result) {\n            this.namedCurve = asn1.result.namedCurve.valueBlock.toString();\n        }\n        if (PUBLIC_KEY$1 in asn1.result) {\n            const publicKeyData = { schema: asn1.result.publicKey.valueBlock.valueHex };\n            if (NAMED_CURVE in this) {\n                publicKeyData.namedCurve = this.namedCurve;\n            }\n            this.publicKey = new ECPublicKey(publicKeyData);\n        }\n    }\n    toSchema() {\n        const outputArray = [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }),\n            this.privateKey\n        ];\n        if (this.namedCurve) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.namedCurve })\n                ]\n            }));\n        }\n        if (this.publicKey) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ valueHex: this.publicKey.toSchema().toBER(false) })\n                ]\n            }));\n        }\n        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        });\n    }\n    toJSON() {\n        if (!this.namedCurve || ECPrivateKey.compareWithDefault(NAMED_CURVE, this.namedCurve)) {\n            throw new Error(\"Not enough information for making JSON: absent \\\"namedCurve\\\" value\");\n        }\n        const curve = ECNamedCurves.find(this.namedCurve);\n        const privateKeyJSON = {\n            crv: curve ? curve.name : this.namedCurve,\n            d: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.privateKey.valueBlock.valueHexView),\n        };\n        if (this.publicKey) {\n            const publicKeyJSON = this.publicKey.toJSON();\n            privateKeyJSON.x = publicKeyJSON.x;\n            privateKeyJSON.y = publicKeyJSON.y;\n        }\n        return privateKeyJSON;\n    }\n    fromJSON(json) {\n        ParameterError.assert(\"json\", json, \"crv\", \"d\");\n        let coordinateLength = 0;\n        const curve = ECNamedCurves.find(json.crv);\n        if (curve) {\n            this.namedCurve = curve.id;\n            coordinateLength = curve.size;\n        }\n        const convertBuffer = pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.d);\n        if (convertBuffer.byteLength < coordinateLength) {\n            const buffer = new ArrayBuffer(coordinateLength);\n            const view = new Uint8Array(buffer);\n            const convertBufferView = new Uint8Array(convertBuffer);\n            view.set(convertBufferView, 1);\n            this.privateKey = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: buffer });\n        }\n        else {\n            this.privateKey = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: convertBuffer.slice(0, coordinateLength) });\n        }\n        if (json.x && json.y) {\n            this.publicKey = new ECPublicKey({ json });\n        }\n    }\n}\nECPrivateKey.CLASS_NAME = \"ECPrivateKey\";\n\nconst PRIME = \"prime\";\nconst EXPONENT = \"exponent\";\nconst COEFFICIENT$1 = \"coefficient\";\nconst CLEAR_PROPS$18 = [\n    PRIME,\n    EXPONENT,\n    COEFFICIENT$1,\n];\nclass OtherPrimeInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.prime = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRIME, OtherPrimeInfo.defaultValues(PRIME));\n        this.exponent = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXPONENT, OtherPrimeInfo.defaultValues(EXPONENT));\n        this.coefficient = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, COEFFICIENT$1, OtherPrimeInfo.defaultValues(COEFFICIENT$1));\n        if (parameters.json) {\n            this.fromJSON(parameters.json);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case PRIME:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case EXPONENT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case COEFFICIENT$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.prime || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.exponent || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.coefficient || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$18);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OtherPrimeInfo.schema({\n            names: {\n                prime: PRIME,\n                exponent: EXPONENT,\n                coefficient: COEFFICIENT$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.prime = asn1.result.prime.convertFromDER();\n        this.exponent = asn1.result.exponent.convertFromDER();\n        this.coefficient = asn1.result.coefficient.convertFromDER();\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.prime.convertToDER(),\n                this.exponent.convertToDER(),\n                this.coefficient.convertToDER()\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            r: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.prime.valueBlock.valueHexView),\n            d: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.exponent.valueBlock.valueHexView),\n            t: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.coefficient.valueBlock.valueHexView),\n        };\n    }\n    fromJSON(json) {\n        ParameterError.assert(\"json\", json, \"r\", \"d\", \"r\");\n        this.prime = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.r) });\n        this.exponent = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.d) });\n        this.coefficient = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.t) });\n    }\n}\nOtherPrimeInfo.CLASS_NAME = \"OtherPrimeInfo\";\n\nconst VERSION$k = \"version\";\nconst MODULUS = \"modulus\";\nconst PUBLIC_EXPONENT = \"publicExponent\";\nconst PRIVATE_EXPONENT = \"privateExponent\";\nconst PRIME1 = \"prime1\";\nconst PRIME2 = \"prime2\";\nconst EXPONENT1 = \"exponent1\";\nconst EXPONENT2 = \"exponent2\";\nconst COEFFICIENT = \"coefficient\";\nconst OTHER_PRIME_INFOS = \"otherPrimeInfos\";\nconst CLEAR_PROPS$17 = [\n    VERSION$k,\n    MODULUS,\n    PUBLIC_EXPONENT,\n    PRIVATE_EXPONENT,\n    PRIME1,\n    PRIME2,\n    EXPONENT1,\n    EXPONENT2,\n    COEFFICIENT,\n    OTHER_PRIME_INFOS\n];\nclass RSAPrivateKey extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$k, RSAPrivateKey.defaultValues(VERSION$k));\n        this.modulus = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MODULUS, RSAPrivateKey.defaultValues(MODULUS));\n        this.publicExponent = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PUBLIC_EXPONENT, RSAPrivateKey.defaultValues(PUBLIC_EXPONENT));\n        this.privateExponent = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRIVATE_EXPONENT, RSAPrivateKey.defaultValues(PRIVATE_EXPONENT));\n        this.prime1 = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRIME1, RSAPrivateKey.defaultValues(PRIME1));\n        this.prime2 = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRIME2, RSAPrivateKey.defaultValues(PRIME2));\n        this.exponent1 = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXPONENT1, RSAPrivateKey.defaultValues(EXPONENT1));\n        this.exponent2 = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXPONENT2, RSAPrivateKey.defaultValues(EXPONENT2));\n        this.coefficient = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, COEFFICIENT, RSAPrivateKey.defaultValues(COEFFICIENT));\n        if (OTHER_PRIME_INFOS in parameters) {\n            this.otherPrimeInfos = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER_PRIME_INFOS, RSAPrivateKey.defaultValues(OTHER_PRIME_INFOS));\n        }\n        if (parameters.json) {\n            this.fromJSON(parameters.json);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$k:\n                return 0;\n            case MODULUS:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case PUBLIC_EXPONENT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case PRIVATE_EXPONENT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case PRIME1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case PRIME2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case EXPONENT1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case EXPONENT2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case COEFFICIENT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case OTHER_PRIME_INFOS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.modulus || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.publicExponent || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.privateExponent || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.prime1 || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.prime2 || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.exponent1 || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.exponent2 || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.coefficient || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    optional: true,\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.otherPrimeInfosName || EMPTY_STRING),\n                            value: OtherPrimeInfo.schema(names.otherPrimeInfo || {})\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$17);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RSAPrivateKey.schema({\n            names: {\n                version: VERSION$k,\n                modulus: MODULUS,\n                publicExponent: PUBLIC_EXPONENT,\n                privateExponent: PRIVATE_EXPONENT,\n                prime1: PRIME1,\n                prime2: PRIME2,\n                exponent1: EXPONENT1,\n                exponent2: EXPONENT2,\n                coefficient: COEFFICIENT,\n                otherPrimeInfo: {\n                    names: {\n                        blockName: OTHER_PRIME_INFOS\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        this.modulus = asn1.result.modulus.convertFromDER(256);\n        this.publicExponent = asn1.result.publicExponent;\n        this.privateExponent = asn1.result.privateExponent.convertFromDER(256);\n        this.prime1 = asn1.result.prime1.convertFromDER(128);\n        this.prime2 = asn1.result.prime2.convertFromDER(128);\n        this.exponent1 = asn1.result.exponent1.convertFromDER(128);\n        this.exponent2 = asn1.result.exponent2.convertFromDER(128);\n        this.coefficient = asn1.result.coefficient.convertFromDER(128);\n        if (OTHER_PRIME_INFOS in asn1.result)\n            this.otherPrimeInfos = Array.from(asn1.result.otherPrimeInfos, element => new OtherPrimeInfo({ schema: element }));\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        outputArray.push(this.modulus.convertToDER());\n        outputArray.push(this.publicExponent);\n        outputArray.push(this.privateExponent.convertToDER());\n        outputArray.push(this.prime1.convertToDER());\n        outputArray.push(this.prime2.convertToDER());\n        outputArray.push(this.exponent1.convertToDER());\n        outputArray.push(this.exponent2.convertToDER());\n        outputArray.push(this.coefficient.convertToDER());\n        if (this.otherPrimeInfos) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: Array.from(this.otherPrimeInfos, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const jwk = {\n            n: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.modulus.valueBlock.valueHexView),\n            e: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.publicExponent.valueBlock.valueHexView),\n            d: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.privateExponent.valueBlock.valueHexView),\n            p: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.prime1.valueBlock.valueHexView),\n            q: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.prime2.valueBlock.valueHexView),\n            dp: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.exponent1.valueBlock.valueHexView),\n            dq: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.exponent2.valueBlock.valueHexView),\n            qi: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToBase64Url(this.coefficient.valueBlock.valueHexView),\n        };\n        if (this.otherPrimeInfos) {\n            jwk.oth = Array.from(this.otherPrimeInfos, o => o.toJSON());\n        }\n        return jwk;\n    }\n    fromJSON(json) {\n        ParameterError.assert(\"json\", json, \"n\", \"e\", \"d\", \"p\", \"q\", \"dp\", \"dq\", \"qi\");\n        this.modulus = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.n) });\n        this.publicExponent = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.e) });\n        this.privateExponent = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.d) });\n        this.prime1 = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.p) });\n        this.prime2 = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.q) });\n        this.exponent1 = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.dp) });\n        this.exponent2 = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.dq) });\n        this.coefficient = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.FromBase64Url(json.qi) });\n        if (json.oth) {\n            this.otherPrimeInfos = Array.from(json.oth, (element) => new OtherPrimeInfo({ json: element }));\n        }\n    }\n}\nRSAPrivateKey.CLASS_NAME = \"RSAPrivateKey\";\n\nconst VERSION$j = \"version\";\nconst PRIVATE_KEY_ALGORITHM = \"privateKeyAlgorithm\";\nconst PRIVATE_KEY = \"privateKey\";\nconst ATTRIBUTES$5 = \"attributes\";\nconst PARSED_KEY = \"parsedKey\";\nconst CLEAR_PROPS$16 = [\n    VERSION$j,\n    PRIVATE_KEY_ALGORITHM,\n    PRIVATE_KEY,\n    ATTRIBUTES$5\n];\nclass PrivateKeyInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$j, PrivateKeyInfo.defaultValues(VERSION$j));\n        this.privateKeyAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRIVATE_KEY_ALGORITHM, PrivateKeyInfo.defaultValues(PRIVATE_KEY_ALGORITHM));\n        this.privateKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRIVATE_KEY, PrivateKeyInfo.defaultValues(PRIVATE_KEY));\n        if (ATTRIBUTES$5 in parameters) {\n            this.attributes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ATTRIBUTES$5, PrivateKeyInfo.defaultValues(ATTRIBUTES$5));\n        }\n        if (PARSED_KEY in parameters) {\n            this.parsedKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PARSED_KEY, PrivateKeyInfo.defaultValues(PARSED_KEY));\n        }\n        if (parameters.json) {\n            this.fromJSON(parameters.json);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$j:\n                return 0;\n            case PRIVATE_KEY_ALGORITHM:\n                return new AlgorithmIdentifier();\n            case PRIVATE_KEY:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case ATTRIBUTES$5:\n                return [];\n            case PARSED_KEY:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                AlgorithmIdentifier.schema(names.privateKeyAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.privateKey || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.attributes || EMPTY_STRING),\n                            value: Attribute.schema()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$16);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PrivateKeyInfo.schema({\n            names: {\n                version: VERSION$j,\n                privateKeyAlgorithm: {\n                    names: {\n                        blockName: PRIVATE_KEY_ALGORITHM\n                    }\n                },\n                privateKey: PRIVATE_KEY,\n                attributes: ATTRIBUTES$5\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        this.privateKeyAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.privateKeyAlgorithm });\n        this.privateKey = asn1.result.privateKey;\n        if (ATTRIBUTES$5 in asn1.result)\n            this.attributes = Array.from(asn1.result.attributes, element => new Attribute({ schema: element }));\n        switch (this.privateKeyAlgorithm.algorithmId) {\n            case \"1.2.840.113549.1.1.1\":\n                {\n                    const privateKeyASN1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.privateKey.valueBlock.valueHexView);\n                    if (privateKeyASN1.offset !== -1)\n                        this.parsedKey = new RSAPrivateKey({ schema: privateKeyASN1.result });\n                }\n                break;\n            case \"1.2.840.10045.2.1\":\n                if (\"algorithmParams\" in this.privateKeyAlgorithm) {\n                    if (this.privateKeyAlgorithm.algorithmParams instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier) {\n                        const privateKeyASN1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.privateKey.valueBlock.valueHexView);\n                        if (privateKeyASN1.offset !== -1) {\n                            this.parsedKey = new ECPrivateKey({\n                                namedCurve: this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),\n                                schema: privateKeyASN1.result\n                            });\n                        }\n                    }\n                }\n                break;\n        }\n    }\n    toSchema() {\n        const outputArray = [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }),\n            this.privateKeyAlgorithm.toSchema(),\n            this.privateKey\n        ];\n        if (this.attributes) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: Array.from(this.attributes, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        if (!this.parsedKey) {\n            const object = {\n                version: this.version,\n                privateKeyAlgorithm: this.privateKeyAlgorithm.toJSON(),\n                privateKey: this.privateKey.toJSON(),\n            };\n            if (this.attributes) {\n                object.attributes = Array.from(this.attributes, o => o.toJSON());\n            }\n            return object;\n        }\n        const jwk = {};\n        switch (this.privateKeyAlgorithm.algorithmId) {\n            case \"1.2.840.10045.2.1\":\n                jwk.kty = \"EC\";\n                break;\n            case \"1.2.840.113549.1.1.1\":\n                jwk.kty = \"RSA\";\n                break;\n        }\n        const publicKeyJWK = this.parsedKey.toJSON();\n        Object.assign(jwk, publicKeyJWK);\n        return jwk;\n    }\n    fromJSON(json) {\n        if (\"kty\" in json) {\n            switch (json.kty.toUpperCase()) {\n                case \"EC\":\n                    this.parsedKey = new ECPrivateKey({ json });\n                    this.privateKeyAlgorithm = new AlgorithmIdentifier({\n                        algorithmId: \"1.2.840.10045.2.1\",\n                        algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.parsedKey.namedCurve })\n                    });\n                    break;\n                case \"RSA\":\n                    this.parsedKey = new RSAPrivateKey({ json });\n                    this.privateKeyAlgorithm = new AlgorithmIdentifier({\n                        algorithmId: \"1.2.840.113549.1.1.1\",\n                        algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                    });\n                    break;\n                default:\n                    throw new Error(`Invalid value for \"kty\" parameter: ${json.kty}`);\n            }\n            this.privateKey = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: this.parsedKey.toSchema().toBER(false) });\n        }\n    }\n}\nPrivateKeyInfo.CLASS_NAME = \"PrivateKeyInfo\";\n\nconst CONTENT_TYPE$1 = \"contentType\";\nconst CONTENT_ENCRYPTION_ALGORITHM = \"contentEncryptionAlgorithm\";\nconst ENCRYPTED_CONTENT = \"encryptedContent\";\nconst CLEAR_PROPS$15 = [\n    CONTENT_TYPE$1,\n    CONTENT_ENCRYPTION_ALGORITHM,\n    ENCRYPTED_CONTENT,\n];\nconst PIECE_SIZE = 1024;\nclass EncryptedContentInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.contentType = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CONTENT_TYPE$1, EncryptedContentInfo.defaultValues(CONTENT_TYPE$1));\n        this.contentEncryptionAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CONTENT_ENCRYPTION_ALGORITHM, EncryptedContentInfo.defaultValues(CONTENT_ENCRYPTION_ALGORITHM));\n        if (ENCRYPTED_CONTENT in parameters && parameters.encryptedContent) {\n            this.encryptedContent = parameters.encryptedContent;\n            if ((this.encryptedContent.idBlock.tagClass === 1) &&\n                (this.encryptedContent.idBlock.tagNumber === 4)) {\n                if (this.encryptedContent.idBlock.isConstructed === false && !parameters.disableSplit) {\n                    const constrString = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({\n                        idBlock: { isConstructed: true },\n                        isConstructed: true\n                    });\n                    let offset = 0;\n                    const valueHex = this.encryptedContent.valueBlock.valueHexView.slice().buffer;\n                    let length = valueHex.byteLength;\n                    while (length > 0) {\n                        const pieceView = new Uint8Array(valueHex, offset, ((offset + PIECE_SIZE) > valueHex.byteLength) ? (valueHex.byteLength - offset) : PIECE_SIZE);\n                        const _array = new ArrayBuffer(pieceView.length);\n                        const _view = new Uint8Array(_array);\n                        for (let i = 0; i < _view.length; i++)\n                            _view[i] = pieceView[i];\n                        constrString.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: _array }));\n                        length -= pieceView.length;\n                        offset += pieceView.length;\n                    }\n                    this.encryptedContent = constrString;\n                }\n            }\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CONTENT_TYPE$1:\n                return EMPTY_STRING;\n            case CONTENT_ENCRYPTION_ALGORITHM:\n                return new AlgorithmIdentifier();\n            case ENCRYPTED_CONTENT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case CONTENT_TYPE$1:\n                return (memberValue === EMPTY_STRING);\n            case CONTENT_ENCRYPTION_ALGORITHM:\n                return ((memberValue.algorithmId === EMPTY_STRING) && ((\"algorithmParams\" in memberValue) === false));\n            case ENCRYPTED_CONTENT:\n                return (memberValue.isEqual(EncryptedContentInfo.defaultValues(ENCRYPTED_CONTENT)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.contentType || EMPTY_STRING) }),\n                AlgorithmIdentifier.schema(names.contentEncryptionAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            name: (names.encryptedContent || EMPTY_STRING),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 0\n                            },\n                            value: [\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                                    value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString()\n                                })\n                            ]\n                        }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                            name: (names.encryptedContent || EMPTY_STRING),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 0\n                            }\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$15);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, EncryptedContentInfo.schema({\n            names: {\n                contentType: CONTENT_TYPE$1,\n                contentEncryptionAlgorithm: {\n                    names: {\n                        blockName: CONTENT_ENCRYPTION_ALGORITHM\n                    }\n                },\n                encryptedContent: ENCRYPTED_CONTENT\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.contentType = asn1.result.contentType.valueBlock.toString();\n        this.contentEncryptionAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.contentEncryptionAlgorithm });\n        if (ENCRYPTED_CONTENT in asn1.result) {\n            this.encryptedContent = asn1.result.encryptedContent;\n            this.encryptedContent.idBlock.tagClass = 1;\n            this.encryptedContent.idBlock.tagNumber = 4;\n        }\n    }\n    toSchema() {\n        const sequenceLengthBlock = {\n            isIndefiniteForm: false\n        };\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.contentType }));\n        outputArray.push(this.contentEncryptionAlgorithm.toSchema());\n        if (this.encryptedContent) {\n            sequenceLengthBlock.isIndefiniteForm = this.encryptedContent.idBlock.isConstructed;\n            const encryptedValue = this.encryptedContent;\n            encryptedValue.idBlock.tagClass = 3;\n            encryptedValue.idBlock.tagNumber = 0;\n            encryptedValue.lenBlock.isIndefiniteForm = this.encryptedContent.idBlock.isConstructed;\n            outputArray.push(encryptedValue);\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            lenBlock: sequenceLengthBlock,\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            contentType: this.contentType,\n            contentEncryptionAlgorithm: this.contentEncryptionAlgorithm.toJSON()\n        };\n        if (this.encryptedContent) {\n            res.encryptedContent = this.encryptedContent.toJSON();\n        }\n        return res;\n    }\n    getEncryptedContent() {\n        if (!this.encryptedContent) {\n            throw new Error(\"Parameter 'encryptedContent' is undefined\");\n        }\n        return asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString.prototype.getValue.call(this.encryptedContent);\n    }\n}\nEncryptedContentInfo.CLASS_NAME = \"EncryptedContentInfo\";\n\nconst HASH_ALGORITHM$4 = \"hashAlgorithm\";\nconst MASK_GEN_ALGORITHM$1 = \"maskGenAlgorithm\";\nconst SALT_LENGTH = \"saltLength\";\nconst TRAILER_FIELD = \"trailerField\";\nconst CLEAR_PROPS$14 = [\n    HASH_ALGORITHM$4,\n    MASK_GEN_ALGORITHM$1,\n    SALT_LENGTH,\n    TRAILER_FIELD\n];\nclass RSASSAPSSParams extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.hashAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, HASH_ALGORITHM$4, RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4));\n        this.maskGenAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MASK_GEN_ALGORITHM$1, RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1));\n        this.saltLength = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SALT_LENGTH, RSASSAPSSParams.defaultValues(SALT_LENGTH));\n        this.trailerField = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TRAILER_FIELD, RSASSAPSSParams.defaultValues(TRAILER_FIELD));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case HASH_ALGORITHM$4:\n                return new AlgorithmIdentifier({\n                    algorithmId: \"1.3.14.3.2.26\",\n                    algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                });\n            case MASK_GEN_ALGORITHM$1:\n                return new AlgorithmIdentifier({\n                    algorithmId: \"1.2.840.113549.1.1.8\",\n                    algorithmParams: (new AlgorithmIdentifier({\n                        algorithmId: \"1.3.14.3.2.26\",\n                        algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                    })).toSchema()\n                });\n            case SALT_LENGTH:\n                return 20;\n            case TRAILER_FIELD:\n                return 1;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    optional: true,\n                    value: [AlgorithmIdentifier.schema(names.hashAlgorithm || {})]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    optional: true,\n                    value: [AlgorithmIdentifier.schema(names.maskGenAlgorithm || {})]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    optional: true,\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.saltLength || EMPTY_STRING) })]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 3\n                    },\n                    optional: true,\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.trailerField || EMPTY_STRING) })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$14);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RSASSAPSSParams.schema({\n            names: {\n                hashAlgorithm: {\n                    names: {\n                        blockName: HASH_ALGORITHM$4\n                    }\n                },\n                maskGenAlgorithm: {\n                    names: {\n                        blockName: MASK_GEN_ALGORITHM$1\n                    }\n                },\n                saltLength: SALT_LENGTH,\n                trailerField: TRAILER_FIELD\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (HASH_ALGORITHM$4 in asn1.result)\n            this.hashAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.hashAlgorithm });\n        if (MASK_GEN_ALGORITHM$1 in asn1.result)\n            this.maskGenAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.maskGenAlgorithm });\n        if (SALT_LENGTH in asn1.result)\n            this.saltLength = asn1.result.saltLength.valueBlock.valueDec;\n        if (TRAILER_FIELD in asn1.result)\n            this.trailerField = asn1.result.trailerField.valueBlock.valueDec;\n    }\n    toSchema() {\n        const outputArray = [];\n        if (!this.hashAlgorithm.isEqual(RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4))) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [this.hashAlgorithm.toSchema()]\n            }));\n        }\n        if (!this.maskGenAlgorithm.isEqual(RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1))) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: [this.maskGenAlgorithm.toSchema()]\n            }));\n        }\n        if (this.saltLength !== RSASSAPSSParams.defaultValues(SALT_LENGTH)) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                },\n                value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.saltLength })]\n            }));\n        }\n        if (this.trailerField !== RSASSAPSSParams.defaultValues(TRAILER_FIELD)) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 3\n                },\n                value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.trailerField })]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {};\n        if (!this.hashAlgorithm.isEqual(RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4))) {\n            res.hashAlgorithm = this.hashAlgorithm.toJSON();\n        }\n        if (!this.maskGenAlgorithm.isEqual(RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1))) {\n            res.maskGenAlgorithm = this.maskGenAlgorithm.toJSON();\n        }\n        if (this.saltLength !== RSASSAPSSParams.defaultValues(SALT_LENGTH)) {\n            res.saltLength = this.saltLength;\n        }\n        if (this.trailerField !== RSASSAPSSParams.defaultValues(TRAILER_FIELD)) {\n            res.trailerField = this.trailerField;\n        }\n        return res;\n    }\n}\nRSASSAPSSParams.CLASS_NAME = \"RSASSAPSSParams\";\n\nconst SALT = \"salt\";\nconst ITERATION_COUNT = \"iterationCount\";\nconst KEY_LENGTH = \"keyLength\";\nconst PRF = \"prf\";\nconst CLEAR_PROPS$13 = [\n    SALT,\n    ITERATION_COUNT,\n    KEY_LENGTH,\n    PRF\n];\nclass PBKDF2Params extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.salt = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SALT, PBKDF2Params.defaultValues(SALT));\n        this.iterationCount = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ITERATION_COUNT, PBKDF2Params.defaultValues(ITERATION_COUNT));\n        if (KEY_LENGTH in parameters) {\n            this.keyLength = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_LENGTH, PBKDF2Params.defaultValues(KEY_LENGTH));\n        }\n        if (PRF in parameters) {\n            this.prf = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRF, PBKDF2Params.defaultValues(PRF));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case SALT:\n                return {};\n            case ITERATION_COUNT:\n                return (-1);\n            case KEY_LENGTH:\n                return 0;\n            case PRF:\n                return new AlgorithmIdentifier({\n                    algorithmId: \"1.3.14.3.2.26\",\n                    algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                });\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.saltPrimitive || EMPTY_STRING) }),\n                        AlgorithmIdentifier.schema(names.saltConstructed || {})\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.iterationCount || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                    name: (names.keyLength || EMPTY_STRING),\n                    optional: true\n                }),\n                AlgorithmIdentifier.schema(names.prf || {\n                    names: {\n                        optional: true\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$13);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PBKDF2Params.schema({\n            names: {\n                saltPrimitive: SALT,\n                saltConstructed: {\n                    names: {\n                        blockName: SALT\n                    }\n                },\n                iterationCount: ITERATION_COUNT,\n                keyLength: KEY_LENGTH,\n                prf: {\n                    names: {\n                        blockName: PRF,\n                        optional: true\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.salt = asn1.result.salt;\n        this.iterationCount = asn1.result.iterationCount.valueBlock.valueDec;\n        if (KEY_LENGTH in asn1.result)\n            this.keyLength = asn1.result.keyLength.valueBlock.valueDec;\n        if (PRF in asn1.result)\n            this.prf = new AlgorithmIdentifier({ schema: asn1.result.prf });\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.salt);\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.iterationCount }));\n        if (KEY_LENGTH in this) {\n            if (PBKDF2Params.defaultValues(KEY_LENGTH) !== this.keyLength)\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.keyLength }));\n        }\n        if (this.prf) {\n            if (PBKDF2Params.defaultValues(PRF).isEqual(this.prf) === false)\n                outputArray.push(this.prf.toSchema());\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            salt: this.salt.toJSON(),\n            iterationCount: this.iterationCount\n        };\n        if (KEY_LENGTH in this) {\n            if (PBKDF2Params.defaultValues(KEY_LENGTH) !== this.keyLength)\n                res.keyLength = this.keyLength;\n        }\n        if (this.prf) {\n            if (PBKDF2Params.defaultValues(PRF).isEqual(this.prf) === false)\n                res.prf = this.prf.toJSON();\n        }\n        return res;\n    }\n}\nPBKDF2Params.CLASS_NAME = \"PBKDF2Params\";\n\nconst KEY_DERIVATION_FUNC = \"keyDerivationFunc\";\nconst ENCRYPTION_SCHEME = \"encryptionScheme\";\nconst CLEAR_PROPS$12 = [\n    KEY_DERIVATION_FUNC,\n    ENCRYPTION_SCHEME\n];\nclass PBES2Params extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.keyDerivationFunc = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_DERIVATION_FUNC, PBES2Params.defaultValues(KEY_DERIVATION_FUNC));\n        this.encryptionScheme = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTION_SCHEME, PBES2Params.defaultValues(ENCRYPTION_SCHEME));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case KEY_DERIVATION_FUNC:\n                return new AlgorithmIdentifier();\n            case ENCRYPTION_SCHEME:\n                return new AlgorithmIdentifier();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.keyDerivationFunc || {}),\n                AlgorithmIdentifier.schema(names.encryptionScheme || {})\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$12);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PBES2Params.schema({\n            names: {\n                keyDerivationFunc: {\n                    names: {\n                        blockName: KEY_DERIVATION_FUNC\n                    }\n                },\n                encryptionScheme: {\n                    names: {\n                        blockName: ENCRYPTION_SCHEME\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.keyDerivationFunc = new AlgorithmIdentifier({ schema: asn1.result.keyDerivationFunc });\n        this.encryptionScheme = new AlgorithmIdentifier({ schema: asn1.result.encryptionScheme });\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.keyDerivationFunc.toSchema(),\n                this.encryptionScheme.toSchema()\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            keyDerivationFunc: this.keyDerivationFunc.toJSON(),\n            encryptionScheme: this.encryptionScheme.toJSON()\n        };\n    }\n}\nPBES2Params.CLASS_NAME = \"PBES2Params\";\n\nclass AbstractCryptoEngine {\n    constructor(parameters) {\n        this.crypto = parameters.crypto;\n        this.subtle = \"webkitSubtle\" in parameters.crypto\n            ? parameters.crypto.webkitSubtle\n            : parameters.crypto.subtle;\n        this.name = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"name\", EMPTY_STRING);\n    }\n    async encrypt(...args) {\n        return this.subtle.encrypt(...args);\n    }\n    async decrypt(...args) {\n        return this.subtle.decrypt(...args);\n    }\n    sign(...args) {\n        return this.subtle.sign(...args);\n    }\n    async verify(...args) {\n        return this.subtle.verify(...args);\n    }\n    async digest(...args) {\n        return this.subtle.digest(...args);\n    }\n    async generateKey(...args) {\n        return this.subtle.generateKey(...args);\n    }\n    async deriveKey(...args) {\n        return this.subtle.deriveKey(...args);\n    }\n    async deriveBits(...args) {\n        return this.subtle.deriveBits(...args);\n    }\n    async wrapKey(...args) {\n        return this.subtle.wrapKey(...args);\n    }\n    async unwrapKey(...args) {\n        return this.subtle.unwrapKey(...args);\n    }\n    exportKey(...args) {\n        return this.subtle.exportKey(...args);\n    }\n    importKey(...args) {\n        return this.subtle.importKey(...args);\n    }\n    getRandomValues(array) {\n        return this.crypto.getRandomValues(array);\n    }\n}\n\nasync function makePKCS12B2Key(hashAlgorithm, keyLength, password, salt, iterationCount) {\n    let u;\n    let v;\n    let md;\n    switch (hashAlgorithm.toUpperCase()) {\n        case \"SHA-1\":\n            u = 20;\n            v = 64;\n            md = _noble_hashes_sha1__WEBPACK_IMPORTED_MODULE_4__.sha1;\n            break;\n        case \"SHA-256\":\n            u = 32;\n            v = 64;\n            md = _noble_hashes_sha256__WEBPACK_IMPORTED_MODULE_5__.sha256;\n            break;\n        case \"SHA-384\":\n            u = 48;\n            v = 128;\n            md = _noble_hashes_sha512__WEBPACK_IMPORTED_MODULE_6__.sha384;\n            break;\n        case \"SHA-512\":\n            u = 64;\n            v = 128;\n            md = _noble_hashes_sha512__WEBPACK_IMPORTED_MODULE_6__.sha512;\n            break;\n        default:\n            throw new Error(\"Unsupported hashing algorithm\");\n    }\n    const originalPassword = new Uint8Array(password);\n    let decodedPassword = new TextDecoder().decode(password);\n    const encodedPassword = new TextEncoder().encode(decodedPassword);\n    if (encodedPassword.some((byte, i) => byte !== originalPassword[i])) {\n        decodedPassword = String.fromCharCode(...originalPassword);\n    }\n    const passwordTransformed = new Uint8Array(decodedPassword.length * 2 + 2);\n    const passwordView = new DataView(passwordTransformed.buffer);\n    for (let i = 0; i < decodedPassword.length; i++) {\n        passwordView.setUint16(i * 2, decodedPassword.charCodeAt(i), false);\n    }\n    passwordView.setUint16(decodedPassword.length * 2, 0, false);\n    const D = new Uint8Array(v).fill(3);\n    const saltView = new Uint8Array(salt);\n    const S = new Uint8Array(v * Math.ceil(saltView.length / v)).map((_, i) => saltView[i % saltView.length]);\n    const P = new Uint8Array(v * Math.ceil(passwordTransformed.length / v)).map((_, i) => passwordTransformed[i % passwordTransformed.length]);\n    let I = new Uint8Array(S.length + P.length);\n    I.set(S);\n    I.set(P, S.length);\n    const c = Math.ceil((keyLength >> 3) / u);\n    const result = [];\n    for (let i = 0; i < c; i++) {\n        let A = new Uint8Array(D.length + I.length);\n        A.set(D);\n        A.set(I, D.length);\n        for (let j = 0; j < iterationCount; j++) {\n            A = md(A);\n        }\n        const B = new Uint8Array(v).map((_, i) => A[i % A.length]);\n        const k = Math.ceil(saltView.length / v) + Math.ceil(passwordTransformed.length / v);\n        const iRound = [];\n        for (let j = 0; j < k; j++) {\n            const chunk = Array.from(I.slice(j * v, (j + 1) * v));\n            let x = 0x1ff;\n            for (let l = B.length - 1; l >= 0; l--) {\n                x >>= 8;\n                x += B[l] + (chunk[l] || 0);\n                chunk[l] = x & 0xff;\n            }\n            iRound.push(...chunk);\n        }\n        I = new Uint8Array(iRound);\n        result.push(...A);\n    }\n    return new Uint8Array(result.slice(0, keyLength >> 3)).buffer;\n}\nfunction prepareAlgorithm(data) {\n    const res = typeof data === \"string\"\n        ? { name: data }\n        : data;\n    if (\"hash\" in res) {\n        return {\n            ...res,\n            hash: prepareAlgorithm(res.hash)\n        };\n    }\n    return res;\n}\nclass CryptoEngine extends AbstractCryptoEngine {\n    async importKey(format, keyData, algorithm, extractable, keyUsages) {\n        var _a, _b, _c, _d, _e, _f;\n        let jwk = {};\n        const alg = prepareAlgorithm(algorithm);\n        switch (format.toLowerCase()) {\n            case \"raw\":\n                return this.subtle.importKey(\"raw\", keyData, algorithm, extractable, keyUsages);\n            case \"spki\":\n                {\n                    const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(keyData));\n                    AsnError.assert(asn1, \"keyData\");\n                    const publicKeyInfo = new PublicKeyInfo();\n                    try {\n                        publicKeyInfo.fromSchema(asn1.result);\n                    }\n                    catch {\n                        throw new ArgumentError(\"Incorrect keyData\");\n                    }\n                    switch (alg.name.toUpperCase()) {\n                        case \"RSA-PSS\":\n                            {\n                                if (!alg.hash) {\n                                    throw new ParameterError(\"hash\", \"algorithm.hash\", \"Incorrect hash algorithm: Hash algorithm is missed\");\n                                }\n                                switch (alg.hash.name.toUpperCase()) {\n                                    case \"SHA-1\":\n                                        jwk.alg = \"PS1\";\n                                        break;\n                                    case \"SHA-256\":\n                                        jwk.alg = \"PS256\";\n                                        break;\n                                    case \"SHA-384\":\n                                        jwk.alg = \"PS384\";\n                                        break;\n                                    case \"SHA-512\":\n                                        jwk.alg = \"PS512\";\n                                        break;\n                                    default:\n                                        throw new Error(`Incorrect hash algorithm: ${alg.hash.name.toUpperCase()}`);\n                                }\n                            }\n                        case \"RSASSA-PKCS1-V1_5\":\n                            {\n                                keyUsages = [\"verify\"];\n                                jwk.kty = \"RSA\";\n                                jwk.ext = extractable;\n                                jwk.key_ops = keyUsages;\n                                if (publicKeyInfo.algorithm.algorithmId !== \"1.2.840.113549.1.1.1\")\n                                    throw new Error(`Incorrect public key algorithm: ${publicKeyInfo.algorithm.algorithmId}`);\n                                if (!jwk.alg) {\n                                    if (!alg.hash) {\n                                        throw new ParameterError(\"hash\", \"algorithm.hash\", \"Incorrect hash algorithm: Hash algorithm is missed\");\n                                    }\n                                    switch (alg.hash.name.toUpperCase()) {\n                                        case \"SHA-1\":\n                                            jwk.alg = \"RS1\";\n                                            break;\n                                        case \"SHA-256\":\n                                            jwk.alg = \"RS256\";\n                                            break;\n                                        case \"SHA-384\":\n                                            jwk.alg = \"RS384\";\n                                            break;\n                                        case \"SHA-512\":\n                                            jwk.alg = \"RS512\";\n                                            break;\n                                        default:\n                                            throw new Error(`Incorrect hash algorithm: ${alg.hash.name.toUpperCase()}`);\n                                    }\n                                }\n                                const publicKeyJSON = publicKeyInfo.toJSON();\n                                Object.assign(jwk, publicKeyJSON);\n                            }\n                            break;\n                        case \"ECDSA\":\n                            keyUsages = [\"verify\"];\n                        case \"ECDH\":\n                            {\n                                jwk = {\n                                    kty: \"EC\",\n                                    ext: extractable,\n                                    key_ops: keyUsages\n                                };\n                                if (publicKeyInfo.algorithm.algorithmId !== \"1.2.840.10045.2.1\") {\n                                    throw new Error(`Incorrect public key algorithm: ${publicKeyInfo.algorithm.algorithmId}`);\n                                }\n                                const publicKeyJSON = publicKeyInfo.toJSON();\n                                Object.assign(jwk, publicKeyJSON);\n                            }\n                            break;\n                        case \"RSA-OAEP\":\n                            {\n                                jwk.kty = \"RSA\";\n                                jwk.ext = extractable;\n                                jwk.key_ops = keyUsages;\n                                if (this.name.toLowerCase() === \"safari\")\n                                    jwk.alg = \"RSA-OAEP\";\n                                else {\n                                    if (!alg.hash) {\n                                        throw new ParameterError(\"hash\", \"algorithm.hash\", \"Incorrect hash algorithm: Hash algorithm is missed\");\n                                    }\n                                    switch (alg.hash.name.toUpperCase()) {\n                                        case \"SHA-1\":\n                                            jwk.alg = \"RSA-OAEP\";\n                                            break;\n                                        case \"SHA-256\":\n                                            jwk.alg = \"RSA-OAEP-256\";\n                                            break;\n                                        case \"SHA-384\":\n                                            jwk.alg = \"RSA-OAEP-384\";\n                                            break;\n                                        case \"SHA-512\":\n                                            jwk.alg = \"RSA-OAEP-512\";\n                                            break;\n                                        default:\n                                            throw new Error(`Incorrect hash algorithm: ${alg.hash.name.toUpperCase()}`);\n                                    }\n                                }\n                                const publicKeyJSON = publicKeyInfo.toJSON();\n                                Object.assign(jwk, publicKeyJSON);\n                            }\n                            break;\n                        case \"RSAES-PKCS1-V1_5\":\n                            {\n                                jwk.kty = \"RSA\";\n                                jwk.ext = extractable;\n                                jwk.key_ops = keyUsages;\n                                jwk.alg = \"PS1\";\n                                const publicKeyJSON = publicKeyInfo.toJSON();\n                                Object.assign(jwk, publicKeyJSON);\n                            }\n                            break;\n                        default:\n                            throw new Error(`Incorrect algorithm name: ${alg.name.toUpperCase()}`);\n                    }\n                }\n                break;\n            case \"pkcs8\":\n                {\n                    const privateKeyInfo = new PrivateKeyInfo();\n                    const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(keyData));\n                    AsnError.assert(asn1, \"keyData\");\n                    try {\n                        privateKeyInfo.fromSchema(asn1.result);\n                    }\n                    catch (ex) {\n                        throw new Error(\"Incorrect keyData\");\n                    }\n                    if (!privateKeyInfo.parsedKey)\n                        throw new Error(\"Incorrect keyData\");\n                    switch (alg.name.toUpperCase()) {\n                        case \"RSA-PSS\":\n                            {\n                                switch ((_a = alg.hash) === null || _a === void 0 ? void 0 : _a.name.toUpperCase()) {\n                                    case \"SHA-1\":\n                                        jwk.alg = \"PS1\";\n                                        break;\n                                    case \"SHA-256\":\n                                        jwk.alg = \"PS256\";\n                                        break;\n                                    case \"SHA-384\":\n                                        jwk.alg = \"PS384\";\n                                        break;\n                                    case \"SHA-512\":\n                                        jwk.alg = \"PS512\";\n                                        break;\n                                    default:\n                                        throw new Error(`Incorrect hash algorithm: ${(_b = alg.hash) === null || _b === void 0 ? void 0 : _b.name.toUpperCase()}`);\n                                }\n                            }\n                        case \"RSASSA-PKCS1-V1_5\":\n                            {\n                                keyUsages = [\"sign\"];\n                                jwk.kty = \"RSA\";\n                                jwk.ext = extractable;\n                                jwk.key_ops = keyUsages;\n                                if (privateKeyInfo.privateKeyAlgorithm.algorithmId !== \"1.2.840.113549.1.1.1\")\n                                    throw new Error(`Incorrect private key algorithm: ${privateKeyInfo.privateKeyAlgorithm.algorithmId}`);\n                                if ((\"alg\" in jwk) === false) {\n                                    switch ((_c = alg.hash) === null || _c === void 0 ? void 0 : _c.name.toUpperCase()) {\n                                        case \"SHA-1\":\n                                            jwk.alg = \"RS1\";\n                                            break;\n                                        case \"SHA-256\":\n                                            jwk.alg = \"RS256\";\n                                            break;\n                                        case \"SHA-384\":\n                                            jwk.alg = \"RS384\";\n                                            break;\n                                        case \"SHA-512\":\n                                            jwk.alg = \"RS512\";\n                                            break;\n                                        default:\n                                            throw new Error(`Incorrect hash algorithm: ${(_d = alg.hash) === null || _d === void 0 ? void 0 : _d.name.toUpperCase()}`);\n                                    }\n                                }\n                                const privateKeyJSON = privateKeyInfo.toJSON();\n                                Object.assign(jwk, privateKeyJSON);\n                            }\n                            break;\n                        case \"ECDSA\":\n                            keyUsages = [\"sign\"];\n                        case \"ECDH\":\n                            {\n                                jwk = {\n                                    kty: \"EC\",\n                                    ext: extractable,\n                                    key_ops: keyUsages\n                                };\n                                if (privateKeyInfo.privateKeyAlgorithm.algorithmId !== \"1.2.840.10045.2.1\")\n                                    throw new Error(`Incorrect algorithm: ${privateKeyInfo.privateKeyAlgorithm.algorithmId}`);\n                                const privateKeyJSON = privateKeyInfo.toJSON();\n                                Object.assign(jwk, privateKeyJSON);\n                            }\n                            break;\n                        case \"RSA-OAEP\":\n                            {\n                                jwk.kty = \"RSA\";\n                                jwk.ext = extractable;\n                                jwk.key_ops = keyUsages;\n                                if (this.name.toLowerCase() === \"safari\")\n                                    jwk.alg = \"RSA-OAEP\";\n                                else {\n                                    switch ((_e = alg.hash) === null || _e === void 0 ? void 0 : _e.name.toUpperCase()) {\n                                        case \"SHA-1\":\n                                            jwk.alg = \"RSA-OAEP\";\n                                            break;\n                                        case \"SHA-256\":\n                                            jwk.alg = \"RSA-OAEP-256\";\n                                            break;\n                                        case \"SHA-384\":\n                                            jwk.alg = \"RSA-OAEP-384\";\n                                            break;\n                                        case \"SHA-512\":\n                                            jwk.alg = \"RSA-OAEP-512\";\n                                            break;\n                                        default:\n                                            throw new Error(`Incorrect hash algorithm: ${(_f = alg.hash) === null || _f === void 0 ? void 0 : _f.name.toUpperCase()}`);\n                                    }\n                                }\n                                const privateKeyJSON = privateKeyInfo.toJSON();\n                                Object.assign(jwk, privateKeyJSON);\n                            }\n                            break;\n                        case \"RSAES-PKCS1-V1_5\":\n                            {\n                                keyUsages = [\"decrypt\"];\n                                jwk.kty = \"RSA\";\n                                jwk.ext = extractable;\n                                jwk.key_ops = keyUsages;\n                                jwk.alg = \"PS1\";\n                                const privateKeyJSON = privateKeyInfo.toJSON();\n                                Object.assign(jwk, privateKeyJSON);\n                            }\n                            break;\n                        default:\n                            throw new Error(`Incorrect algorithm name: ${alg.name.toUpperCase()}`);\n                    }\n                }\n                break;\n            case \"jwk\":\n                jwk = keyData;\n                break;\n            default:\n                throw new Error(`Incorrect format: ${format}`);\n        }\n        if (this.name.toLowerCase() === \"safari\") {\n            try {\n                return this.subtle.importKey(\"jwk\", pvutils__WEBPACK_IMPORTED_MODULE_2__.stringToArrayBuffer(JSON.stringify(jwk)), algorithm, extractable, keyUsages);\n            }\n            catch {\n                return this.subtle.importKey(\"jwk\", jwk, algorithm, extractable, keyUsages);\n            }\n        }\n        return this.subtle.importKey(\"jwk\", jwk, algorithm, extractable, keyUsages);\n    }\n    async exportKey(format, key) {\n        let jwk = await this.subtle.exportKey(\"jwk\", key);\n        if (this.name.toLowerCase() === \"safari\") {\n            if (jwk instanceof ArrayBuffer) {\n                jwk = JSON.parse(pvutils__WEBPACK_IMPORTED_MODULE_2__.arrayBufferToString(jwk));\n            }\n        }\n        switch (format.toLowerCase()) {\n            case \"raw\":\n                return this.subtle.exportKey(\"raw\", key);\n            case \"spki\": {\n                const publicKeyInfo = new PublicKeyInfo();\n                try {\n                    publicKeyInfo.fromJSON(jwk);\n                }\n                catch (ex) {\n                    throw new Error(\"Incorrect key data\");\n                }\n                return publicKeyInfo.toSchema().toBER(false);\n            }\n            case \"pkcs8\": {\n                const privateKeyInfo = new PrivateKeyInfo();\n                try {\n                    privateKeyInfo.fromJSON(jwk);\n                }\n                catch (ex) {\n                    throw new Error(\"Incorrect key data\");\n                }\n                return privateKeyInfo.toSchema().toBER(false);\n            }\n            case \"jwk\":\n                return jwk;\n            default:\n                throw new Error(`Incorrect format: ${format}`);\n        }\n    }\n    async convert(inputFormat, outputFormat, keyData, algorithm, extractable, keyUsages) {\n        if (inputFormat.toLowerCase() === outputFormat.toLowerCase()) {\n            return keyData;\n        }\n        const key = await this.importKey(inputFormat, keyData, algorithm, extractable, keyUsages);\n        return this.exportKey(outputFormat, key);\n    }\n    getAlgorithmByOID(oid, safety = false, target) {\n        switch (oid) {\n            case \"1.2.840.113549.1.1.1\":\n                return {\n                    name: \"RSAES-PKCS1-v1_5\"\n                };\n            case \"1.2.840.113549.1.1.5\":\n                return {\n                    name: \"RSASSA-PKCS1-v1_5\",\n                    hash: {\n                        name: \"SHA-1\"\n                    }\n                };\n            case \"1.2.840.113549.1.1.11\":\n                return {\n                    name: \"RSASSA-PKCS1-v1_5\",\n                    hash: {\n                        name: \"SHA-256\"\n                    }\n                };\n            case \"1.2.840.113549.1.1.12\":\n                return {\n                    name: \"RSASSA-PKCS1-v1_5\",\n                    hash: {\n                        name: \"SHA-384\"\n                    }\n                };\n            case \"1.2.840.113549.1.1.13\":\n                return {\n                    name: \"RSASSA-PKCS1-v1_5\",\n                    hash: {\n                        name: \"SHA-512\"\n                    }\n                };\n            case \"1.2.840.113549.1.1.10\":\n                return {\n                    name: \"RSA-PSS\"\n                };\n            case \"1.2.840.113549.1.1.7\":\n                return {\n                    name: \"RSA-OAEP\"\n                };\n            case \"1.2.840.10045.2.1\":\n            case \"1.2.840.10045.4.1\":\n                return {\n                    name: \"ECDSA\",\n                    hash: {\n                        name: \"SHA-1\"\n                    }\n                };\n            case \"1.2.840.10045.4.3.2\":\n                return {\n                    name: \"ECDSA\",\n                    hash: {\n                        name: \"SHA-256\"\n                    }\n                };\n            case \"1.2.840.10045.4.3.3\":\n                return {\n                    name: \"ECDSA\",\n                    hash: {\n                        name: \"SHA-384\"\n                    }\n                };\n            case \"1.2.840.10045.4.3.4\":\n                return {\n                    name: \"ECDSA\",\n                    hash: {\n                        name: \"SHA-512\"\n                    }\n                };\n            case \"1.3.133.16.840.63.0.2\":\n                return {\n                    name: \"ECDH\",\n                    kdf: \"SHA-1\"\n                };\n            case \"1.3.132.1.11.1\":\n                return {\n                    name: \"ECDH\",\n                    kdf: \"SHA-256\"\n                };\n            case \"1.3.132.1.11.2\":\n                return {\n                    name: \"ECDH\",\n                    kdf: \"SHA-384\"\n                };\n            case \"1.3.132.1.11.3\":\n                return {\n                    name: \"ECDH\",\n                    kdf: \"SHA-512\"\n                };\n            case \"2.16.840.1.101.3.4.1.2\":\n                return {\n                    name: \"AES-CBC\",\n                    length: 128\n                };\n            case \"2.16.840.1.101.3.4.1.22\":\n                return {\n                    name: \"AES-CBC\",\n                    length: 192\n                };\n            case \"2.16.840.1.101.3.4.1.42\":\n                return {\n                    name: \"AES-CBC\",\n                    length: 256\n                };\n            case \"2.16.840.1.101.3.4.1.6\":\n                return {\n                    name: \"AES-GCM\",\n                    length: 128\n                };\n            case \"2.16.840.1.101.3.4.1.26\":\n                return {\n                    name: \"AES-GCM\",\n                    length: 192\n                };\n            case \"2.16.840.1.101.3.4.1.46\":\n                return {\n                    name: \"AES-GCM\",\n                    length: 256\n                };\n            case \"2.16.840.1.101.3.4.1.4\":\n                return {\n                    name: \"AES-CFB\",\n                    length: 128\n                };\n            case \"2.16.840.1.101.3.4.1.24\":\n                return {\n                    name: \"AES-CFB\",\n                    length: 192\n                };\n            case \"2.16.840.1.101.3.4.1.44\":\n                return {\n                    name: \"AES-CFB\",\n                    length: 256\n                };\n            case \"2.16.840.1.101.3.4.1.5\":\n                return {\n                    name: \"AES-KW\",\n                    length: 128\n                };\n            case \"2.16.840.1.101.3.4.1.25\":\n                return {\n                    name: \"AES-KW\",\n                    length: 192\n                };\n            case \"2.16.840.1.101.3.4.1.45\":\n                return {\n                    name: \"AES-KW\",\n                    length: 256\n                };\n            case \"1.2.840.113549.2.7\":\n                return {\n                    name: \"HMAC\",\n                    hash: {\n                        name: \"SHA-1\"\n                    }\n                };\n            case \"1.2.840.113549.2.9\":\n                return {\n                    name: \"HMAC\",\n                    hash: {\n                        name: \"SHA-256\"\n                    }\n                };\n            case \"1.2.840.113549.2.10\":\n                return {\n                    name: \"HMAC\",\n                    hash: {\n                        name: \"SHA-384\"\n                    }\n                };\n            case \"1.2.840.113549.2.11\":\n                return {\n                    name: \"HMAC\",\n                    hash: {\n                        name: \"SHA-512\"\n                    }\n                };\n            case \"1.2.840.113549.1.9.16.3.5\":\n                return {\n                    name: \"DH\"\n                };\n            case \"1.3.14.3.2.26\":\n                return {\n                    name: \"SHA-1\"\n                };\n            case \"2.16.840.1.101.3.4.2.1\":\n                return {\n                    name: \"SHA-256\"\n                };\n            case \"2.16.840.1.101.3.4.2.2\":\n                return {\n                    name: \"SHA-384\"\n                };\n            case \"2.16.840.1.101.3.4.2.3\":\n                return {\n                    name: \"SHA-512\"\n                };\n            case \"1.2.840.113549.1.5.12\":\n                return {\n                    name: \"PBKDF2\"\n                };\n            case \"1.2.840.10045.3.1.7\":\n                return {\n                    name: \"P-256\"\n                };\n            case \"1.3.132.0.34\":\n                return {\n                    name: \"P-384\"\n                };\n            case \"1.3.132.0.35\":\n                return {\n                    name: \"P-521\"\n                };\n        }\n        if (safety) {\n            throw new Error(`Unsupported algorithm identifier ${target ? `for ${target} ` : EMPTY_STRING}: ${oid}`);\n        }\n        return {};\n    }\n    getOIDByAlgorithm(algorithm, safety = false, target) {\n        let result = EMPTY_STRING;\n        switch (algorithm.name.toUpperCase()) {\n            case \"RSAES-PKCS1-V1_5\":\n                result = \"1.2.840.113549.1.1.1\";\n                break;\n            case \"RSASSA-PKCS1-V1_5\":\n                switch (algorithm.hash.name.toUpperCase()) {\n                    case \"SHA-1\":\n                        result = \"1.2.840.113549.1.1.5\";\n                        break;\n                    case \"SHA-256\":\n                        result = \"1.2.840.113549.1.1.11\";\n                        break;\n                    case \"SHA-384\":\n                        result = \"1.2.840.113549.1.1.12\";\n                        break;\n                    case \"SHA-512\":\n                        result = \"1.2.840.113549.1.1.13\";\n                        break;\n                }\n                break;\n            case \"RSA-PSS\":\n                result = \"1.2.840.113549.1.1.10\";\n                break;\n            case \"RSA-OAEP\":\n                result = \"1.2.840.113549.1.1.7\";\n                break;\n            case \"ECDSA\":\n                switch (algorithm.hash.name.toUpperCase()) {\n                    case \"SHA-1\":\n                        result = \"1.2.840.10045.4.1\";\n                        break;\n                    case \"SHA-256\":\n                        result = \"1.2.840.10045.4.3.2\";\n                        break;\n                    case \"SHA-384\":\n                        result = \"1.2.840.10045.4.3.3\";\n                        break;\n                    case \"SHA-512\":\n                        result = \"1.2.840.10045.4.3.4\";\n                        break;\n                }\n                break;\n            case \"ECDH\":\n                switch (algorithm.kdf.toUpperCase()) {\n                    case \"SHA-1\":\n                        result = \"1.3.133.16.840.63.0.2\";\n                        break;\n                    case \"SHA-256\":\n                        result = \"1.3.132.1.11.1\";\n                        break;\n                    case \"SHA-384\":\n                        result = \"1.3.132.1.11.2\";\n                        break;\n                    case \"SHA-512\":\n                        result = \"1.3.132.1.11.3\";\n                        break;\n                }\n                break;\n            case \"AES-CTR\":\n                break;\n            case \"AES-CBC\":\n                switch (algorithm.length) {\n                    case 128:\n                        result = \"2.16.840.1.101.3.4.1.2\";\n                        break;\n                    case 192:\n                        result = \"2.16.840.1.101.3.4.1.22\";\n                        break;\n                    case 256:\n                        result = \"2.16.840.1.101.3.4.1.42\";\n                        break;\n                }\n                break;\n            case \"AES-CMAC\":\n                break;\n            case \"AES-GCM\":\n                switch (algorithm.length) {\n                    case 128:\n                        result = \"2.16.840.1.101.3.4.1.6\";\n                        break;\n                    case 192:\n                        result = \"2.16.840.1.101.3.4.1.26\";\n                        break;\n                    case 256:\n                        result = \"2.16.840.1.101.3.4.1.46\";\n                        break;\n                }\n                break;\n            case \"AES-CFB\":\n                switch (algorithm.length) {\n                    case 128:\n                        result = \"2.16.840.1.101.3.4.1.4\";\n                        break;\n                    case 192:\n                        result = \"2.16.840.1.101.3.4.1.24\";\n                        break;\n                    case 256:\n                        result = \"2.16.840.1.101.3.4.1.44\";\n                        break;\n                }\n                break;\n            case \"AES-KW\":\n                switch (algorithm.length) {\n                    case 128:\n                        result = \"2.16.840.1.101.3.4.1.5\";\n                        break;\n                    case 192:\n                        result = \"2.16.840.1.101.3.4.1.25\";\n                        break;\n                    case 256:\n                        result = \"2.16.840.1.101.3.4.1.45\";\n                        break;\n                }\n                break;\n            case \"HMAC\":\n                switch (algorithm.hash.name.toUpperCase()) {\n                    case \"SHA-1\":\n                        result = \"1.2.840.113549.2.7\";\n                        break;\n                    case \"SHA-256\":\n                        result = \"1.2.840.113549.2.9\";\n                        break;\n                    case \"SHA-384\":\n                        result = \"1.2.840.113549.2.10\";\n                        break;\n                    case \"SHA-512\":\n                        result = \"1.2.840.113549.2.11\";\n                        break;\n                }\n                break;\n            case \"DH\":\n                result = \"1.2.840.113549.1.9.16.3.5\";\n                break;\n            case \"SHA-1\":\n                result = \"1.3.14.3.2.26\";\n                break;\n            case \"SHA-256\":\n                result = \"2.16.840.1.101.3.4.2.1\";\n                break;\n            case \"SHA-384\":\n                result = \"2.16.840.1.101.3.4.2.2\";\n                break;\n            case \"SHA-512\":\n                result = \"2.16.840.1.101.3.4.2.3\";\n                break;\n            case \"CONCAT\":\n                break;\n            case \"HKDF\":\n                break;\n            case \"PBKDF2\":\n                result = \"1.2.840.113549.1.5.12\";\n                break;\n            case \"P-256\":\n                result = \"1.2.840.10045.3.1.7\";\n                break;\n            case \"P-384\":\n                result = \"1.3.132.0.34\";\n                break;\n            case \"P-521\":\n                result = \"1.3.132.0.35\";\n                break;\n        }\n        if (!result && safety) {\n            throw new Error(`Unsupported algorithm ${target ? `for ${target} ` : EMPTY_STRING}: ${algorithm.name}`);\n        }\n        return result;\n    }\n    getAlgorithmParameters(algorithmName, operation) {\n        let result = {\n            algorithm: {},\n            usages: []\n        };\n        switch (algorithmName.toUpperCase()) {\n            case \"RSAES-PKCS1-V1_5\":\n            case \"RSASSA-PKCS1-V1_5\":\n                switch (operation.toLowerCase()) {\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"RSASSA-PKCS1-v1_5\",\n                                modulusLength: 2048,\n                                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                                hash: {\n                                    name: \"SHA-256\"\n                                }\n                            },\n                            usages: [\"sign\", \"verify\"]\n                        };\n                        break;\n                    case \"verify\":\n                    case \"sign\":\n                    case \"importkey\":\n                        result = {\n                            algorithm: {\n                                name: \"RSASSA-PKCS1-v1_5\",\n                                hash: {\n                                    name: \"SHA-256\"\n                                }\n                            },\n                            usages: [\"verify\"]\n                        };\n                        break;\n                    case \"exportkey\":\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"RSASSA-PKCS1-v1_5\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"RSA-PSS\":\n                switch (operation.toLowerCase()) {\n                    case \"sign\":\n                    case \"verify\":\n                        result = {\n                            algorithm: {\n                                name: \"RSA-PSS\",\n                                hash: {\n                                    name: \"SHA-1\"\n                                },\n                                saltLength: 20\n                            },\n                            usages: [\"sign\", \"verify\"]\n                        };\n                        break;\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"RSA-PSS\",\n                                modulusLength: 2048,\n                                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                                hash: {\n                                    name: \"SHA-1\"\n                                }\n                            },\n                            usages: [\"sign\", \"verify\"]\n                        };\n                        break;\n                    case \"importkey\":\n                        result = {\n                            algorithm: {\n                                name: \"RSA-PSS\",\n                                hash: {\n                                    name: \"SHA-1\"\n                                }\n                            },\n                            usages: [\"verify\"]\n                        };\n                        break;\n                    case \"exportkey\":\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"RSA-PSS\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"RSA-OAEP\":\n                switch (operation.toLowerCase()) {\n                    case \"encrypt\":\n                    case \"decrypt\":\n                        result = {\n                            algorithm: {\n                                name: \"RSA-OAEP\"\n                            },\n                            usages: [\"encrypt\", \"decrypt\"]\n                        };\n                        break;\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"RSA-OAEP\",\n                                modulusLength: 2048,\n                                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                                hash: {\n                                    name: \"SHA-256\"\n                                }\n                            },\n                            usages: [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"]\n                        };\n                        break;\n                    case \"importkey\":\n                        result = {\n                            algorithm: {\n                                name: \"RSA-OAEP\",\n                                hash: {\n                                    name: \"SHA-256\"\n                                }\n                            },\n                            usages: [\"encrypt\"]\n                        };\n                        break;\n                    case \"exportkey\":\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"RSA-OAEP\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"ECDSA\":\n                switch (operation.toLowerCase()) {\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"ECDSA\",\n                                namedCurve: \"P-256\"\n                            },\n                            usages: [\"sign\", \"verify\"]\n                        };\n                        break;\n                    case \"importkey\":\n                        result = {\n                            algorithm: {\n                                name: \"ECDSA\",\n                                namedCurve: \"P-256\"\n                            },\n                            usages: [\"verify\"]\n                        };\n                        break;\n                    case \"verify\":\n                    case \"sign\":\n                        result = {\n                            algorithm: {\n                                name: \"ECDSA\",\n                                hash: {\n                                    name: \"SHA-256\"\n                                }\n                            },\n                            usages: [\"sign\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"ECDSA\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"ECDH\":\n                switch (operation.toLowerCase()) {\n                    case \"exportkey\":\n                    case \"importkey\":\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"ECDH\",\n                                namedCurve: \"P-256\"\n                            },\n                            usages: [\"deriveKey\", \"deriveBits\"]\n                        };\n                        break;\n                    case \"derivekey\":\n                    case \"derivebits\":\n                        result = {\n                            algorithm: {\n                                name: \"ECDH\",\n                                namedCurve: \"P-256\",\n                                public: []\n                            },\n                            usages: [\"encrypt\", \"decrypt\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"ECDH\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"AES-CTR\":\n                switch (operation.toLowerCase()) {\n                    case \"importkey\":\n                    case \"exportkey\":\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"AES-CTR\",\n                                length: 256\n                            },\n                            usages: [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"]\n                        };\n                        break;\n                    case \"decrypt\":\n                    case \"encrypt\":\n                        result = {\n                            algorithm: {\n                                name: \"AES-CTR\",\n                                counter: new Uint8Array(16),\n                                length: 10\n                            },\n                            usages: [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"AES-CTR\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"AES-CBC\":\n                switch (operation.toLowerCase()) {\n                    case \"importkey\":\n                    case \"exportkey\":\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"AES-CBC\",\n                                length: 256\n                            },\n                            usages: [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"]\n                        };\n                        break;\n                    case \"decrypt\":\n                    case \"encrypt\":\n                        result = {\n                            algorithm: {\n                                name: \"AES-CBC\",\n                                iv: this.getRandomValues(new Uint8Array(16))\n                            },\n                            usages: [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"AES-CBC\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"AES-GCM\":\n                switch (operation.toLowerCase()) {\n                    case \"importkey\":\n                    case \"exportkey\":\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"AES-GCM\",\n                                length: 256\n                            },\n                            usages: [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"]\n                        };\n                        break;\n                    case \"decrypt\":\n                    case \"encrypt\":\n                        result = {\n                            algorithm: {\n                                name: \"AES-GCM\",\n                                iv: this.getRandomValues(new Uint8Array(16))\n                            },\n                            usages: [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"AES-GCM\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"AES-KW\":\n                switch (operation.toLowerCase()) {\n                    case \"importkey\":\n                    case \"exportkey\":\n                    case \"generatekey\":\n                    case \"wrapkey\":\n                    case \"unwrapkey\":\n                        result = {\n                            algorithm: {\n                                name: \"AES-KW\",\n                                length: 256\n                            },\n                            usages: [\"wrapKey\", \"unwrapKey\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"AES-KW\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"HMAC\":\n                switch (operation.toLowerCase()) {\n                    case \"sign\":\n                    case \"verify\":\n                        result = {\n                            algorithm: {\n                                name: \"HMAC\"\n                            },\n                            usages: [\"sign\", \"verify\"]\n                        };\n                        break;\n                    case \"importkey\":\n                    case \"exportkey\":\n                    case \"generatekey\":\n                        result = {\n                            algorithm: {\n                                name: \"HMAC\",\n                                length: 32,\n                                hash: {\n                                    name: \"SHA-256\"\n                                }\n                            },\n                            usages: [\"sign\", \"verify\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"HMAC\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"HKDF\":\n                switch (operation.toLowerCase()) {\n                    case \"derivekey\":\n                        result = {\n                            algorithm: {\n                                name: \"HKDF\",\n                                hash: \"SHA-256\",\n                                salt: new Uint8Array([]),\n                                info: new Uint8Array([])\n                            },\n                            usages: [\"encrypt\", \"decrypt\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"HKDF\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n            case \"PBKDF2\":\n                switch (operation.toLowerCase()) {\n                    case \"derivekey\":\n                        result = {\n                            algorithm: {\n                                name: \"PBKDF2\",\n                                hash: { name: \"SHA-256\" },\n                                salt: new Uint8Array([]),\n                                iterations: 10000\n                            },\n                            usages: [\"encrypt\", \"decrypt\"]\n                        };\n                        break;\n                    default:\n                        return {\n                            algorithm: {\n                                name: \"PBKDF2\"\n                            },\n                            usages: []\n                        };\n                }\n                break;\n        }\n        return result;\n    }\n    getHashAlgorithm(signatureAlgorithm) {\n        let result = EMPTY_STRING;\n        switch (signatureAlgorithm.algorithmId) {\n            case \"1.2.840.10045.4.1\":\n            case \"1.2.840.113549.1.1.5\":\n                result = \"SHA-1\";\n                break;\n            case \"1.2.840.10045.4.3.2\":\n            case \"1.2.840.113549.1.1.11\":\n                result = \"SHA-256\";\n                break;\n            case \"1.2.840.10045.4.3.3\":\n            case \"1.2.840.113549.1.1.12\":\n                result = \"SHA-384\";\n                break;\n            case \"1.2.840.10045.4.3.4\":\n            case \"1.2.840.113549.1.1.13\":\n                result = \"SHA-512\";\n                break;\n            case \"1.2.840.113549.1.1.10\":\n                {\n                    try {\n                        const params = new RSASSAPSSParams({ schema: signatureAlgorithm.algorithmParams });\n                        if (params.hashAlgorithm) {\n                            const algorithm = this.getAlgorithmByOID(params.hashAlgorithm.algorithmId);\n                            if (\"name\" in algorithm) {\n                                result = algorithm.name;\n                            }\n                            else {\n                                return EMPTY_STRING;\n                            }\n                        }\n                        else\n                            result = \"SHA-1\";\n                    }\n                    catch {\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    async encryptEncryptedContentInfo(parameters) {\n        ParameterError.assert(parameters, \"password\", \"contentEncryptionAlgorithm\", \"hmacHashAlgorithm\", \"iterationCount\", \"contentToEncrypt\", \"contentToEncrypt\", \"contentType\");\n        const contentEncryptionOID = this.getOIDByAlgorithm(parameters.contentEncryptionAlgorithm, true, \"contentEncryptionAlgorithm\");\n        const pbkdf2OID = this.getOIDByAlgorithm({\n            name: \"PBKDF2\"\n        }, true, \"PBKDF2\");\n        const hmacOID = this.getOIDByAlgorithm({\n            name: \"HMAC\",\n            hash: {\n                name: parameters.hmacHashAlgorithm\n            }\n        }, true, \"hmacHashAlgorithm\");\n        const ivBuffer = new ArrayBuffer(16);\n        const ivView = new Uint8Array(ivBuffer);\n        this.getRandomValues(ivView);\n        const saltBuffer = new ArrayBuffer(64);\n        const saltView = new Uint8Array(saltBuffer);\n        this.getRandomValues(saltView);\n        const contentView = new Uint8Array(parameters.contentToEncrypt);\n        const pbkdf2Params = new PBKDF2Params({\n            salt: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: saltBuffer }),\n            iterationCount: parameters.iterationCount,\n            prf: new AlgorithmIdentifier({\n                algorithmId: hmacOID,\n                algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n            })\n        });\n        const passwordView = new Uint8Array(parameters.password);\n        const pbkdfKey = await this.importKey(\"raw\", passwordView, \"PBKDF2\", false, [\"deriveKey\"]);\n        const derivedKey = await this.deriveKey({\n            name: \"PBKDF2\",\n            hash: {\n                name: parameters.hmacHashAlgorithm\n            },\n            salt: saltView,\n            iterations: parameters.iterationCount\n        }, pbkdfKey, parameters.contentEncryptionAlgorithm, false, [\"encrypt\"]);\n        const encryptedData = await this.encrypt({\n            name: parameters.contentEncryptionAlgorithm.name,\n            iv: ivView\n        }, derivedKey, contentView);\n        const pbes2Parameters = new PBES2Params({\n            keyDerivationFunc: new AlgorithmIdentifier({\n                algorithmId: pbkdf2OID,\n                algorithmParams: pbkdf2Params.toSchema()\n            }),\n            encryptionScheme: new AlgorithmIdentifier({\n                algorithmId: contentEncryptionOID,\n                algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: ivBuffer })\n            })\n        });\n        return new EncryptedContentInfo({\n            contentType: parameters.contentType,\n            contentEncryptionAlgorithm: new AlgorithmIdentifier({\n                algorithmId: \"1.2.840.113549.1.5.13\",\n                algorithmParams: pbes2Parameters.toSchema()\n            }),\n            encryptedContent: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: encryptedData })\n        });\n    }\n    async decryptEncryptedContentInfo(parameters) {\n        ParameterError.assert(parameters, \"password\", \"encryptedContentInfo\");\n        if (parameters.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId !== \"1.2.840.113549.1.5.13\")\n            throw new Error(`Unknown \"contentEncryptionAlgorithm\": ${parameters.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);\n        let pbes2Parameters;\n        try {\n            pbes2Parameters = new PBES2Params({ schema: parameters.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams });\n        }\n        catch (ex) {\n            throw new Error(\"Incorrectly encoded \\\"pbes2Parameters\\\"\");\n        }\n        let pbkdf2Params;\n        try {\n            pbkdf2Params = new PBKDF2Params({ schema: pbes2Parameters.keyDerivationFunc.algorithmParams });\n        }\n        catch (ex) {\n            throw new Error(\"Incorrectly encoded \\\"pbkdf2Params\\\"\");\n        }\n        const contentEncryptionAlgorithm = this.getAlgorithmByOID(pbes2Parameters.encryptionScheme.algorithmId, true);\n        const ivBuffer = pbes2Parameters.encryptionScheme.algorithmParams.valueBlock.valueHex;\n        const ivView = new Uint8Array(ivBuffer);\n        const saltBuffer = pbkdf2Params.salt.valueBlock.valueHex;\n        const saltView = new Uint8Array(saltBuffer);\n        const iterationCount = pbkdf2Params.iterationCount;\n        let hmacHashAlgorithm = \"SHA-1\";\n        if (pbkdf2Params.prf) {\n            const algorithm = this.getAlgorithmByOID(pbkdf2Params.prf.algorithmId, true);\n            hmacHashAlgorithm = algorithm.hash.name;\n        }\n        const pbkdfKey = await this.importKey(\"raw\", parameters.password, \"PBKDF2\", false, [\"deriveKey\"]);\n        const result = await this.deriveKey({\n            name: \"PBKDF2\",\n            hash: {\n                name: hmacHashAlgorithm\n            },\n            salt: saltView,\n            iterations: iterationCount\n        }, pbkdfKey, contentEncryptionAlgorithm, false, [\"decrypt\"]);\n        const dataBuffer = parameters.encryptedContentInfo.getEncryptedContent();\n        return this.decrypt({\n            name: contentEncryptionAlgorithm.name,\n            iv: ivView\n        }, result, dataBuffer);\n    }\n    async stampDataWithPassword(parameters) {\n        if ((parameters instanceof Object) === false)\n            throw new Error(\"Parameters must have type \\\"Object\\\"\");\n        ParameterError.assert(parameters, \"password\", \"hashAlgorithm\", \"iterationCount\", \"salt\", \"contentToStamp\");\n        let length;\n        switch (parameters.hashAlgorithm.toLowerCase()) {\n            case \"sha-1\":\n                length = 160;\n                break;\n            case \"sha-256\":\n                length = 256;\n                break;\n            case \"sha-384\":\n                length = 384;\n                break;\n            case \"sha-512\":\n                length = 512;\n                break;\n            default:\n                throw new Error(`Incorrect \"parameters.hashAlgorithm\" parameter: ${parameters.hashAlgorithm}`);\n        }\n        const hmacAlgorithm = {\n            name: \"HMAC\",\n            length,\n            hash: {\n                name: parameters.hashAlgorithm\n            }\n        };\n        const pkcsKey = await makePKCS12B2Key(parameters.hashAlgorithm, length, parameters.password, parameters.salt, parameters.iterationCount);\n        const hmacKey = await this.importKey(\"raw\", new Uint8Array(pkcsKey), hmacAlgorithm, false, [\"sign\"]);\n        return this.sign(hmacAlgorithm, hmacKey, new Uint8Array(parameters.contentToStamp));\n    }\n    async verifyDataStampedWithPassword(parameters) {\n        ParameterError.assert(parameters, \"password\", \"hashAlgorithm\", \"salt\", \"iterationCount\", \"contentToVerify\", \"signatureToVerify\");\n        let length = 0;\n        switch (parameters.hashAlgorithm.toLowerCase()) {\n            case \"sha-1\":\n                length = 160;\n                break;\n            case \"sha-256\":\n                length = 256;\n                break;\n            case \"sha-384\":\n                length = 384;\n                break;\n            case \"sha-512\":\n                length = 512;\n                break;\n            default:\n                throw new Error(`Incorrect \"parameters.hashAlgorithm\" parameter: ${parameters.hashAlgorithm}`);\n        }\n        const hmacAlgorithm = {\n            name: \"HMAC\",\n            length,\n            hash: {\n                name: parameters.hashAlgorithm\n            }\n        };\n        const pkcsKey = await makePKCS12B2Key(parameters.hashAlgorithm, length, parameters.password, parameters.salt, parameters.iterationCount);\n        const hmacKey = await this.importKey(\"raw\", new Uint8Array(pkcsKey), hmacAlgorithm, false, [\"verify\"]);\n        return this.verify(hmacAlgorithm, hmacKey, new Uint8Array(parameters.signatureToVerify), new Uint8Array(parameters.contentToVerify));\n    }\n    async getSignatureParameters(privateKey, hashAlgorithm = \"SHA-1\") {\n        this.getOIDByAlgorithm({ name: hashAlgorithm }, true, \"hashAlgorithm\");\n        const signatureAlgorithm = new AlgorithmIdentifier();\n        const parameters = this.getAlgorithmParameters(privateKey.algorithm.name, \"sign\");\n        if (!Object.keys(parameters.algorithm).length) {\n            throw new Error(\"Parameter 'algorithm' is empty\");\n        }\n        const algorithm = parameters.algorithm;\n        if (\"hash\" in privateKey.algorithm && privateKey.algorithm.hash && privateKey.algorithm.hash.name) {\n            algorithm.hash.name = privateKey.algorithm.hash.name;\n        }\n        else {\n            algorithm.hash.name = hashAlgorithm;\n        }\n        switch (privateKey.algorithm.name.toUpperCase()) {\n            case \"RSASSA-PKCS1-V1_5\":\n            case \"ECDSA\":\n                signatureAlgorithm.algorithmId = this.getOIDByAlgorithm(algorithm, true);\n                break;\n            case \"RSA-PSS\":\n                {\n                    switch (algorithm.hash.name.toUpperCase()) {\n                        case \"SHA-256\":\n                            algorithm.saltLength = 32;\n                            break;\n                        case \"SHA-384\":\n                            algorithm.saltLength = 48;\n                            break;\n                        case \"SHA-512\":\n                            algorithm.saltLength = 64;\n                            break;\n                    }\n                    const paramsObject = {};\n                    if (algorithm.hash.name.toUpperCase() !== \"SHA-1\") {\n                        const hashAlgorithmOID = this.getOIDByAlgorithm({ name: algorithm.hash.name }, true, \"hashAlgorithm\");\n                        paramsObject.hashAlgorithm = new AlgorithmIdentifier({\n                            algorithmId: hashAlgorithmOID,\n                            algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                        });\n                        paramsObject.maskGenAlgorithm = new AlgorithmIdentifier({\n                            algorithmId: \"1.2.840.113549.1.1.8\",\n                            algorithmParams: paramsObject.hashAlgorithm.toSchema()\n                        });\n                    }\n                    if (algorithm.saltLength !== 20)\n                        paramsObject.saltLength = algorithm.saltLength;\n                    const pssParameters = new RSASSAPSSParams(paramsObject);\n                    signatureAlgorithm.algorithmId = \"1.2.840.113549.1.1.10\";\n                    signatureAlgorithm.algorithmParams = pssParameters.toSchema();\n                }\n                break;\n            default:\n                throw new Error(`Unsupported signature algorithm: ${privateKey.algorithm.name}`);\n        }\n        return {\n            signatureAlgorithm,\n            parameters\n        };\n    }\n    async signWithPrivateKey(data, privateKey, parameters) {\n        const signature = await this.sign(parameters.algorithm, privateKey, data);\n        if (parameters.algorithm.name === \"ECDSA\") {\n            return createCMSECDSASignature(signature);\n        }\n        return signature;\n    }\n    fillPublicKeyParameters(publicKeyInfo, signatureAlgorithm) {\n        const parameters = {};\n        const shaAlgorithm = this.getHashAlgorithm(signatureAlgorithm);\n        if (shaAlgorithm === EMPTY_STRING)\n            throw new Error(`Unsupported signature algorithm: ${signatureAlgorithm.algorithmId}`);\n        let algorithmId;\n        if (signatureAlgorithm.algorithmId === \"1.2.840.113549.1.1.10\")\n            algorithmId = signatureAlgorithm.algorithmId;\n        else\n            algorithmId = publicKeyInfo.algorithm.algorithmId;\n        const algorithmObject = this.getAlgorithmByOID(algorithmId, true);\n        parameters.algorithm = this.getAlgorithmParameters(algorithmObject.name, \"importKey\");\n        if (\"hash\" in parameters.algorithm.algorithm)\n            parameters.algorithm.algorithm.hash.name = shaAlgorithm;\n        if (algorithmObject.name === \"ECDSA\") {\n            const publicKeyAlgorithm = publicKeyInfo.algorithm;\n            if (!publicKeyAlgorithm.algorithmParams) {\n                throw new Error(\"Algorithm parameters for ECDSA public key are missed\");\n            }\n            const publicKeyAlgorithmParams = publicKeyAlgorithm.algorithmParams;\n            if (\"idBlock\" in publicKeyAlgorithm.algorithmParams) {\n                if (!((publicKeyAlgorithmParams.idBlock.tagClass === 1) && (publicKeyAlgorithmParams.idBlock.tagNumber === 6))) {\n                    throw new Error(\"Incorrect type for ECDSA public key parameters\");\n                }\n            }\n            const curveObject = this.getAlgorithmByOID(publicKeyAlgorithmParams.valueBlock.toString(), true);\n            parameters.algorithm.algorithm.namedCurve = curveObject.name;\n        }\n        return parameters;\n    }\n    async getPublicKey(publicKeyInfo, signatureAlgorithm, parameters) {\n        if (!parameters) {\n            parameters = this.fillPublicKeyParameters(publicKeyInfo, signatureAlgorithm);\n        }\n        const publicKeyInfoBuffer = publicKeyInfo.toSchema().toBER(false);\n        return this.importKey(\"spki\", publicKeyInfoBuffer, parameters.algorithm.algorithm, true, parameters.algorithm.usages);\n    }\n    async verifyWithPublicKey(data, signature, publicKeyInfo, signatureAlgorithm, shaAlgorithm) {\n        let publicKey;\n        if (!shaAlgorithm) {\n            shaAlgorithm = this.getHashAlgorithm(signatureAlgorithm);\n            if (!shaAlgorithm)\n                throw new Error(`Unsupported signature algorithm: ${signatureAlgorithm.algorithmId}`);\n            publicKey = await this.getPublicKey(publicKeyInfo, signatureAlgorithm);\n        }\n        else {\n            const parameters = {};\n            let algorithmId;\n            if (signatureAlgorithm.algorithmId === \"1.2.840.113549.1.1.10\")\n                algorithmId = signatureAlgorithm.algorithmId;\n            else\n                algorithmId = publicKeyInfo.algorithm.algorithmId;\n            const algorithmObject = this.getAlgorithmByOID(algorithmId, true);\n            parameters.algorithm = this.getAlgorithmParameters(algorithmObject.name, \"importKey\");\n            if (\"hash\" in parameters.algorithm.algorithm)\n                parameters.algorithm.algorithm.hash.name = shaAlgorithm;\n            if (algorithmObject.name === \"ECDSA\") {\n                let algorithmParamsChecked = false;\n                if ((\"algorithmParams\" in publicKeyInfo.algorithm) === true) {\n                    if (\"idBlock\" in publicKeyInfo.algorithm.algorithmParams) {\n                        if ((publicKeyInfo.algorithm.algorithmParams.idBlock.tagClass === 1) && (publicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber === 6))\n                            algorithmParamsChecked = true;\n                    }\n                }\n                if (algorithmParamsChecked === false) {\n                    throw new Error(\"Incorrect type for ECDSA public key parameters\");\n                }\n                const curveObject = this.getAlgorithmByOID(publicKeyInfo.algorithm.algorithmParams.valueBlock.toString(), true);\n                parameters.algorithm.algorithm.namedCurve = curveObject.name;\n            }\n            publicKey = await this.getPublicKey(publicKeyInfo, null, parameters);\n        }\n        const algorithm = this.getAlgorithmParameters(publicKey.algorithm.name, \"verify\");\n        if (\"hash\" in algorithm.algorithm)\n            algorithm.algorithm.hash.name = shaAlgorithm;\n        let signatureValue = signature.valueBlock.valueHexView;\n        if (publicKey.algorithm.name === \"ECDSA\") {\n            const namedCurve = ECNamedCurves.find(publicKey.algorithm.namedCurve);\n            if (!namedCurve) {\n                throw new Error(\"Unsupported named curve in use\");\n            }\n            const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(signatureValue);\n            AsnError.assert(asn1, \"Signature value\");\n            signatureValue = createECDSASignatureFromCMS(asn1.result, namedCurve.size);\n        }\n        if (publicKey.algorithm.name === \"RSA-PSS\") {\n            const pssParameters = new RSASSAPSSParams({ schema: signatureAlgorithm.algorithmParams });\n            if (\"saltLength\" in pssParameters)\n                algorithm.algorithm.saltLength = pssParameters.saltLength;\n            else\n                algorithm.algorithm.saltLength = 20;\n            let hashAlgo = \"SHA-1\";\n            if (\"hashAlgorithm\" in pssParameters) {\n                const hashAlgorithm = this.getAlgorithmByOID(pssParameters.hashAlgorithm.algorithmId, true);\n                hashAlgo = hashAlgorithm.name;\n            }\n            algorithm.algorithm.hash.name = hashAlgo;\n        }\n        return this.verify(algorithm.algorithm, publicKey, signatureValue, data);\n    }\n}\n\nlet engine = {\n    name: \"none\",\n    crypto: null,\n};\nfunction isCryptoEngine(engine) {\n    return engine\n        && typeof engine === \"object\"\n        && \"crypto\" in engine\n        ? true\n        : false;\n}\nfunction setEngine(name, ...args) {\n    let crypto = null;\n    if (args.length < 2) {\n        if (args.length) {\n            crypto = args[0];\n        }\n        else {\n            crypto = typeof self !== \"undefined\" && self.crypto ? new CryptoEngine({ name: \"browser\", crypto: self.crypto }) : null;\n        }\n    }\n    else {\n        const cryptoArg = args[0];\n        const subtleArg = args[1];\n        if (isCryptoEngine(subtleArg)) {\n            crypto = subtleArg;\n        }\n        else if (isCryptoEngine(cryptoArg)) {\n            crypto = cryptoArg;\n        }\n        else if (\"subtle\" in cryptoArg && \"getRandomValues\" in cryptoArg) {\n            crypto = new CryptoEngine({\n                crypto: cryptoArg,\n            });\n        }\n    }\n    if ((typeof process !== \"undefined\") && (\"pid\" in process) && (typeof __webpack_require__.g !== \"undefined\") && (typeof window === \"undefined\")) {\n        if (typeof __webpack_require__.g[process.pid] === \"undefined\") {\n            __webpack_require__.g[process.pid] = {};\n        }\n        else {\n            if (typeof __webpack_require__.g[process.pid] !== \"object\") {\n                throw new Error(`Name global.${process.pid} already exists and it is not an object`);\n            }\n        }\n        if (typeof __webpack_require__.g[process.pid].pkijs === \"undefined\") {\n            __webpack_require__.g[process.pid].pkijs = {};\n        }\n        else {\n            if (typeof __webpack_require__.g[process.pid].pkijs !== \"object\") {\n                throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);\n            }\n        }\n        __webpack_require__.g[process.pid].pkijs.engine = {\n            name: name,\n            crypto,\n        };\n    }\n    else {\n        engine = {\n            name: name,\n            crypto,\n        };\n    }\n}\nfunction getEngine() {\n    if ((typeof process !== \"undefined\") && (\"pid\" in process) && (typeof __webpack_require__.g !== \"undefined\") && (typeof window === \"undefined\")) {\n        let _engine;\n        try {\n            _engine = __webpack_require__.g[process.pid].pkijs.engine;\n        }\n        catch (ex) {\n            throw new Error(\"Please call 'setEngine' before call to 'getEngine'\");\n        }\n        return _engine;\n    }\n    return engine;\n}\nfunction getCrypto(safety = false) {\n    const _engine = getEngine();\n    if (!_engine.crypto && safety) {\n        throw new Error(\"Unable to create WebCrypto object\");\n    }\n    return _engine.crypto;\n}\nfunction getRandomValues(view) {\n    return getCrypto(true).getRandomValues(view);\n}\nfunction getOIDByAlgorithm(algorithm, safety, target) {\n    return getCrypto(true).getOIDByAlgorithm(algorithm, safety, target);\n}\nfunction getAlgorithmParameters(algorithmName, operation) {\n    return getCrypto(true).getAlgorithmParameters(algorithmName, operation);\n}\nfunction createCMSECDSASignature(signatureBuffer) {\n    if ((signatureBuffer.byteLength % 2) !== 0)\n        return EMPTY_BUFFER;\n    const length = signatureBuffer.byteLength / 2;\n    const rBuffer = new ArrayBuffer(length);\n    const rView = new Uint8Array(rBuffer);\n    rView.set(new Uint8Array(signatureBuffer, 0, length));\n    const rInteger = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: rBuffer });\n    const sBuffer = new ArrayBuffer(length);\n    const sView = new Uint8Array(sBuffer);\n    sView.set(new Uint8Array(signatureBuffer, length, length));\n    const sInteger = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ valueHex: sBuffer });\n    return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n        value: [\n            rInteger.convertToDER(),\n            sInteger.convertToDER()\n        ]\n    })).toBER(false);\n}\nfunction createECDSASignatureFromCMS(cmsSignature, pointSize) {\n    if (!(cmsSignature instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence\n        && cmsSignature.valueBlock.value.length === 2\n        && cmsSignature.valueBlock.value[0] instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer\n        && cmsSignature.valueBlock.value[1] instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer))\n        return EMPTY_BUFFER;\n    const rValueView = cmsSignature.valueBlock.value[0].convertFromDER().valueBlock.valueHexView;\n    const sValueView = cmsSignature.valueBlock.value[1].convertFromDER().valueBlock.valueHexView;\n    const res = new Uint8Array(pointSize * 2);\n    res.set(rValueView, pointSize - rValueView.byteLength);\n    res.set(sValueView, (2 * pointSize) - sValueView.byteLength);\n    return res.buffer;\n}\nfunction getAlgorithmByOID(oid, safety = false, target) {\n    return getCrypto(true).getAlgorithmByOID(oid, safety, target);\n}\nfunction getHashAlgorithm(signatureAlgorithm) {\n    return getCrypto(true).getHashAlgorithm(signatureAlgorithm);\n}\nasync function kdfWithCounter(hashFunction, zBuffer, Counter, SharedInfo, crypto) {\n    switch (hashFunction.toUpperCase()) {\n        case \"SHA-1\":\n        case \"SHA-256\":\n        case \"SHA-384\":\n        case \"SHA-512\":\n            break;\n        default:\n            throw new ArgumentError(`Unknown hash function: ${hashFunction}`);\n    }\n    ArgumentError.assert(zBuffer, \"zBuffer\", \"ArrayBuffer\");\n    if (zBuffer.byteLength === 0)\n        throw new ArgumentError(\"'zBuffer' has zero length, error\");\n    ArgumentError.assert(SharedInfo, \"SharedInfo\", \"ArrayBuffer\");\n    if (Counter > 255)\n        throw new ArgumentError(\"Please set 'Counter' argument to value less or equal to 255\");\n    const counterBuffer = new ArrayBuffer(4);\n    const counterView = new Uint8Array(counterBuffer);\n    counterView[0] = 0x00;\n    counterView[1] = 0x00;\n    counterView[2] = 0x00;\n    counterView[3] = Counter;\n    let combinedBuffer = EMPTY_BUFFER;\n    combinedBuffer = pvutils__WEBPACK_IMPORTED_MODULE_2__.utilConcatBuf(combinedBuffer, zBuffer);\n    combinedBuffer = pvutils__WEBPACK_IMPORTED_MODULE_2__.utilConcatBuf(combinedBuffer, counterBuffer);\n    combinedBuffer = pvutils__WEBPACK_IMPORTED_MODULE_2__.utilConcatBuf(combinedBuffer, SharedInfo);\n    const result = await crypto.digest({ name: hashFunction }, combinedBuffer);\n    return {\n        counter: Counter,\n        result\n    };\n}\nasync function kdf(hashFunction, Zbuffer, keydatalen, SharedInfo, crypto = getCrypto(true)) {\n    let hashLength = 0;\n    let maxCounter = 1;\n    switch (hashFunction.toUpperCase()) {\n        case \"SHA-1\":\n            hashLength = 160;\n            break;\n        case \"SHA-256\":\n            hashLength = 256;\n            break;\n        case \"SHA-384\":\n            hashLength = 384;\n            break;\n        case \"SHA-512\":\n            hashLength = 512;\n            break;\n        default:\n            throw new ArgumentError(`Unknown hash function: ${hashFunction}`);\n    }\n    ArgumentError.assert(Zbuffer, \"Zbuffer\", \"ArrayBuffer\");\n    if (Zbuffer.byteLength === 0)\n        throw new ArgumentError(\"'Zbuffer' has zero length, error\");\n    ArgumentError.assert(SharedInfo, \"SharedInfo\", \"ArrayBuffer\");\n    const quotient = keydatalen / hashLength;\n    if (Math.floor(quotient) > 0) {\n        maxCounter = Math.floor(quotient);\n        if ((quotient - maxCounter) > 0)\n            maxCounter++;\n    }\n    const incomingResult = [];\n    for (let i = 1; i <= maxCounter; i++)\n        incomingResult.push(await kdfWithCounter(hashFunction, Zbuffer, i, SharedInfo, crypto));\n    let combinedBuffer = EMPTY_BUFFER;\n    let currentCounter = 1;\n    let found = true;\n    while (found) {\n        found = false;\n        for (const result of incomingResult) {\n            if (result.counter === currentCounter) {\n                combinedBuffer = pvutils__WEBPACK_IMPORTED_MODULE_2__.utilConcatBuf(combinedBuffer, result.result);\n                found = true;\n                break;\n            }\n        }\n        currentCounter++;\n    }\n    keydatalen >>= 3;\n    if (combinedBuffer.byteLength > keydatalen) {\n        const newBuffer = new ArrayBuffer(keydatalen);\n        const newView = new Uint8Array(newBuffer);\n        const combinedView = new Uint8Array(combinedBuffer);\n        for (let i = 0; i < keydatalen; i++)\n            newView[i] = combinedView[i];\n        return newBuffer;\n    }\n    return combinedBuffer;\n}\n\nconst VERSION$i = \"version\";\nconst LOG_ID = \"logID\";\nconst EXTENSIONS$6 = \"extensions\";\nconst TIMESTAMP = \"timestamp\";\nconst HASH_ALGORITHM$3 = \"hashAlgorithm\";\nconst SIGNATURE_ALGORITHM$8 = \"signatureAlgorithm\";\nconst SIGNATURE$7 = \"signature\";\nconst NONE = \"none\";\nconst MD5 = \"md5\";\nconst SHA1 = \"sha1\";\nconst SHA224 = \"sha224\";\nconst SHA256 = \"sha256\";\nconst SHA384 = \"sha384\";\nconst SHA512 = \"sha512\";\nconst ANONYMOUS = \"anonymous\";\nconst RSA = \"rsa\";\nconst DSA = \"dsa\";\nconst ECDSA = \"ecdsa\";\nclass SignedCertificateTimestamp extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$i, SignedCertificateTimestamp.defaultValues(VERSION$i));\n        this.logID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, LOG_ID, SignedCertificateTimestamp.defaultValues(LOG_ID));\n        this.timestamp = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TIMESTAMP, SignedCertificateTimestamp.defaultValues(TIMESTAMP));\n        this.extensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXTENSIONS$6, SignedCertificateTimestamp.defaultValues(EXTENSIONS$6));\n        this.hashAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, HASH_ALGORITHM$3, SignedCertificateTimestamp.defaultValues(HASH_ALGORITHM$3));\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM$8, SignedCertificateTimestamp.defaultValues(SIGNATURE_ALGORITHM$8));\n        this.signature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE$7, SignedCertificateTimestamp.defaultValues(SIGNATURE$7));\n        if (\"stream\" in parameters && parameters.stream) {\n            this.fromStream(parameters.stream);\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$i:\n                return 0;\n            case LOG_ID:\n            case EXTENSIONS$6:\n                return EMPTY_BUFFER;\n            case TIMESTAMP:\n                return new Date(0);\n            case HASH_ALGORITHM$3:\n            case SIGNATURE_ALGORITHM$8:\n                return EMPTY_STRING;\n            case SIGNATURE$7:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    fromSchema(schema) {\n        if ((schema instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.RawData) === false)\n            throw new Error(\"Object's schema was not verified against input data for SignedCertificateTimestamp\");\n        const seqStream = new bytestreamjs__WEBPACK_IMPORTED_MODULE_3__.SeqStream({\n            stream: new bytestreamjs__WEBPACK_IMPORTED_MODULE_3__.ByteStream({\n                buffer: schema.data\n            })\n        });\n        this.fromStream(seqStream);\n    }\n    fromStream(stream) {\n        const blockLength = stream.getUint16();\n        this.version = (stream.getBlock(1))[0];\n        if (this.version === 0) {\n            this.logID = (new Uint8Array(stream.getBlock(32))).buffer.slice(0);\n            this.timestamp = new Date(pvutils__WEBPACK_IMPORTED_MODULE_2__.utilFromBase(new Uint8Array(stream.getBlock(8)), 8));\n            const extensionsLength = stream.getUint16();\n            this.extensions = (new Uint8Array(stream.getBlock(extensionsLength))).buffer.slice(0);\n            switch ((stream.getBlock(1))[0]) {\n                case 0:\n                    this.hashAlgorithm = NONE;\n                    break;\n                case 1:\n                    this.hashAlgorithm = MD5;\n                    break;\n                case 2:\n                    this.hashAlgorithm = SHA1;\n                    break;\n                case 3:\n                    this.hashAlgorithm = SHA224;\n                    break;\n                case 4:\n                    this.hashAlgorithm = SHA256;\n                    break;\n                case 5:\n                    this.hashAlgorithm = SHA384;\n                    break;\n                case 6:\n                    this.hashAlgorithm = SHA512;\n                    break;\n                default:\n                    throw new Error(\"Object's stream was not correct for SignedCertificateTimestamp\");\n            }\n            switch ((stream.getBlock(1))[0]) {\n                case 0:\n                    this.signatureAlgorithm = ANONYMOUS;\n                    break;\n                case 1:\n                    this.signatureAlgorithm = RSA;\n                    break;\n                case 2:\n                    this.signatureAlgorithm = DSA;\n                    break;\n                case 3:\n                    this.signatureAlgorithm = ECDSA;\n                    break;\n                default:\n                    throw new Error(\"Object's stream was not correct for SignedCertificateTimestamp\");\n            }\n            const signatureLength = stream.getUint16();\n            const signatureData = new Uint8Array(stream.getBlock(signatureLength)).buffer.slice(0);\n            const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(signatureData);\n            AsnError.assert(asn1, \"SignedCertificateTimestamp\");\n            this.signature = asn1.result;\n            if (blockLength !== (47 + extensionsLength + signatureLength)) {\n                throw new Error(\"Object's stream was not correct for SignedCertificateTimestamp\");\n            }\n        }\n    }\n    toSchema() {\n        const stream = this.toStream();\n        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.RawData({ data: stream.stream.buffer });\n    }\n    toStream() {\n        const stream = new bytestreamjs__WEBPACK_IMPORTED_MODULE_3__.SeqStream();\n        stream.appendUint16(47 + this.extensions.byteLength + this.signature.valueBeforeDecodeView.byteLength);\n        stream.appendChar(this.version);\n        stream.appendView(new Uint8Array(this.logID));\n        const timeBuffer = new ArrayBuffer(8);\n        const timeView = new Uint8Array(timeBuffer);\n        const baseArray = pvutils__WEBPACK_IMPORTED_MODULE_2__.utilToBase(this.timestamp.valueOf(), 8);\n        timeView.set(new Uint8Array(baseArray), 8 - baseArray.byteLength);\n        stream.appendView(timeView);\n        stream.appendUint16(this.extensions.byteLength);\n        if (this.extensions.byteLength)\n            stream.appendView(new Uint8Array(this.extensions));\n        let _hashAlgorithm;\n        switch (this.hashAlgorithm.toLowerCase()) {\n            case NONE:\n                _hashAlgorithm = 0;\n                break;\n            case MD5:\n                _hashAlgorithm = 1;\n                break;\n            case SHA1:\n                _hashAlgorithm = 2;\n                break;\n            case SHA224:\n                _hashAlgorithm = 3;\n                break;\n            case SHA256:\n                _hashAlgorithm = 4;\n                break;\n            case SHA384:\n                _hashAlgorithm = 5;\n                break;\n            case SHA512:\n                _hashAlgorithm = 6;\n                break;\n            default:\n                throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`);\n        }\n        stream.appendChar(_hashAlgorithm);\n        let _signatureAlgorithm;\n        switch (this.signatureAlgorithm.toLowerCase()) {\n            case ANONYMOUS:\n                _signatureAlgorithm = 0;\n                break;\n            case RSA:\n                _signatureAlgorithm = 1;\n                break;\n            case DSA:\n                _signatureAlgorithm = 2;\n                break;\n            case ECDSA:\n                _signatureAlgorithm = 3;\n                break;\n            default:\n                throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`);\n        }\n        stream.appendChar(_signatureAlgorithm);\n        const _signature = this.signature.toBER(false);\n        stream.appendUint16(_signature.byteLength);\n        stream.appendView(new Uint8Array(_signature));\n        return stream;\n    }\n    toJSON() {\n        return {\n            version: this.version,\n            logID: pvutils__WEBPACK_IMPORTED_MODULE_2__.bufferToHexCodes(this.logID),\n            timestamp: this.timestamp,\n            extensions: pvutils__WEBPACK_IMPORTED_MODULE_2__.bufferToHexCodes(this.extensions),\n            hashAlgorithm: this.hashAlgorithm,\n            signatureAlgorithm: this.signatureAlgorithm,\n            signature: this.signature.toJSON()\n        };\n    }\n    async verify(logs, data, dataType = 0, crypto = getCrypto(true)) {\n        const logId = pvutils__WEBPACK_IMPORTED_MODULE_2__.toBase64(pvutils__WEBPACK_IMPORTED_MODULE_2__.arrayBufferToString(this.logID));\n        let publicKeyBase64 = null;\n        const stream = new bytestreamjs__WEBPACK_IMPORTED_MODULE_3__.SeqStream();\n        for (const log of logs) {\n            if (log.log_id === logId) {\n                publicKeyBase64 = log.key;\n                break;\n            }\n        }\n        if (!publicKeyBase64) {\n            throw new Error(`Public key not found for CT with logId: ${logId}`);\n        }\n        const pki = pvutils__WEBPACK_IMPORTED_MODULE_2__.stringToArrayBuffer(pvutils__WEBPACK_IMPORTED_MODULE_2__.fromBase64(publicKeyBase64));\n        const publicKeyInfo = PublicKeyInfo.fromBER(pki);\n        stream.appendChar(0x00);\n        stream.appendChar(0x00);\n        const timeBuffer = new ArrayBuffer(8);\n        const timeView = new Uint8Array(timeBuffer);\n        const baseArray = pvutils__WEBPACK_IMPORTED_MODULE_2__.utilToBase(this.timestamp.valueOf(), 8);\n        timeView.set(new Uint8Array(baseArray), 8 - baseArray.byteLength);\n        stream.appendView(timeView);\n        stream.appendUint16(dataType);\n        if (dataType === 0)\n            stream.appendUint24(data.byteLength);\n        stream.appendView(new Uint8Array(data));\n        stream.appendUint16(this.extensions.byteLength);\n        if (this.extensions.byteLength !== 0)\n            stream.appendView(new Uint8Array(this.extensions));\n        return crypto.verifyWithPublicKey(stream.buffer.slice(0, stream.length), new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: this.signature.toBER(false) }), publicKeyInfo, { algorithmId: EMPTY_STRING }, \"SHA-256\");\n    }\n}\nSignedCertificateTimestamp.CLASS_NAME = \"SignedCertificateTimestamp\";\nasync function verifySCTsForCertificate(certificate, issuerCertificate, logs, index = (-1), crypto = getCrypto(true)) {\n    let parsedValue = null;\n    const stream = new bytestreamjs__WEBPACK_IMPORTED_MODULE_3__.SeqStream();\n    if (certificate.extensions) {\n        for (let i = certificate.extensions.length - 1; i >= 0; i--) {\n            switch (certificate.extensions[i].extnID) {\n                case id_SignedCertificateTimestampList:\n                    {\n                        parsedValue = certificate.extensions[i].parsedValue;\n                        if (!parsedValue || parsedValue.timestamps.length === 0)\n                            throw new Error(\"Nothing to verify in the certificate\");\n                        certificate.extensions.splice(i, 1);\n                    }\n                    break;\n            }\n        }\n    }\n    if (parsedValue === null)\n        throw new Error(\"No SignedCertificateTimestampList extension in the specified certificate\");\n    const tbs = certificate.encodeTBS().toBER();\n    const issuerId = await crypto.digest({ name: \"SHA-256\" }, new Uint8Array(issuerCertificate.subjectPublicKeyInfo.toSchema().toBER(false)));\n    stream.appendView(new Uint8Array(issuerId));\n    stream.appendUint24(tbs.byteLength);\n    stream.appendView(new Uint8Array(tbs));\n    const preCert = stream.stream.slice(0, stream.length);\n    if (index === (-1)) {\n        const verifyArray = [];\n        for (const timestamp of parsedValue.timestamps) {\n            const verifyResult = await timestamp.verify(logs, preCert.buffer, 1, crypto);\n            verifyArray.push(verifyResult);\n        }\n        return verifyArray;\n    }\n    if (index >= parsedValue.timestamps.length)\n        index = (parsedValue.timestamps.length - 1);\n    return [await parsedValue.timestamps[index].verify(logs, preCert.buffer, 1, crypto)];\n}\n\nconst TIMESTAMPS = \"timestamps\";\nclass SignedCertificateTimestampList extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.timestamps = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TIMESTAMPS, SignedCertificateTimestampList.defaultValues(TIMESTAMPS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TIMESTAMPS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case TIMESTAMPS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        var _a;\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        (_a = names.optional) !== null && _a !== void 0 ? _a : (names.optional = false);\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({\n            name: (names.blockName || \"SignedCertificateTimestampList\"),\n            optional: names.optional\n        }));\n    }\n    fromSchema(schema) {\n        if ((schema instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString) === false) {\n            throw new Error(\"Object's schema was not verified against input data for SignedCertificateTimestampList\");\n        }\n        const seqStream = new bytestreamjs__WEBPACK_IMPORTED_MODULE_3__.SeqStream({\n            stream: new bytestreamjs__WEBPACK_IMPORTED_MODULE_3__.ByteStream({\n                buffer: schema.valueBlock.valueHex\n            })\n        });\n        const dataLength = seqStream.getUint16();\n        if (dataLength !== seqStream.length) {\n            throw new Error(\"Object's schema was not verified against input data for SignedCertificateTimestampList\");\n        }\n        while (seqStream.length) {\n            this.timestamps.push(new SignedCertificateTimestamp({ stream: seqStream }));\n        }\n    }\n    toSchema() {\n        const stream = new bytestreamjs__WEBPACK_IMPORTED_MODULE_3__.SeqStream();\n        let overallLength = 0;\n        const timestampsData = [];\n        for (const timestamp of this.timestamps) {\n            const timestampStream = timestamp.toStream();\n            timestampsData.push(timestampStream);\n            overallLength += timestampStream.stream.buffer.byteLength;\n        }\n        stream.appendUint16(overallLength);\n        for (const timestamp of timestampsData) {\n            stream.appendView(timestamp.stream.view);\n        }\n        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: stream.stream.buffer.slice(0) });\n    }\n    toJSON() {\n        return {\n            timestamps: Array.from(this.timestamps, o => o.toJSON())\n        };\n    }\n}\nSignedCertificateTimestampList.CLASS_NAME = \"SignedCertificateTimestampList\";\n\nconst ATTRIBUTES$4 = \"attributes\";\nconst CLEAR_PROPS$11 = [\n    ATTRIBUTES$4\n];\nclass SubjectDirectoryAttributes extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.attributes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ATTRIBUTES$4, SubjectDirectoryAttributes.defaultValues(ATTRIBUTES$4));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ATTRIBUTES$4:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.attributes || EMPTY_STRING),\n                    value: Attribute.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$11);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, SubjectDirectoryAttributes.schema({\n            names: {\n                attributes: ATTRIBUTES$4\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.attributes = Array.from(asn1.result.attributes, element => new Attribute({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.attributes, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            attributes: Array.from(this.attributes, o => o.toJSON())\n        };\n    }\n}\nSubjectDirectoryAttributes.CLASS_NAME = \"SubjectDirectoryAttributes\";\n\nclass ExtensionValueFactory {\n    static getItems() {\n        if (!this.types) {\n            this.types = {};\n            ExtensionValueFactory.register(id_SubjectAltName, \"SubjectAltName\", AltName);\n            ExtensionValueFactory.register(id_IssuerAltName, \"IssuerAltName\", AltName);\n            ExtensionValueFactory.register(id_AuthorityKeyIdentifier, \"AuthorityKeyIdentifier\", AuthorityKeyIdentifier);\n            ExtensionValueFactory.register(id_BasicConstraints, \"BasicConstraints\", BasicConstraints);\n            ExtensionValueFactory.register(id_MicrosoftCaVersion, \"MicrosoftCaVersion\", CAVersion);\n            ExtensionValueFactory.register(id_CertificatePolicies, \"CertificatePolicies\", CertificatePolicies);\n            ExtensionValueFactory.register(id_MicrosoftAppPolicies, \"CertificatePoliciesMicrosoft\", CertificatePolicies);\n            ExtensionValueFactory.register(id_MicrosoftCertTemplateV2, \"MicrosoftCertTemplateV2\", CertificateTemplate);\n            ExtensionValueFactory.register(id_CRLDistributionPoints, \"CRLDistributionPoints\", CRLDistributionPoints);\n            ExtensionValueFactory.register(id_FreshestCRL, \"FreshestCRL\", CRLDistributionPoints);\n            ExtensionValueFactory.register(id_ExtKeyUsage, \"ExtKeyUsage\", ExtKeyUsage);\n            ExtensionValueFactory.register(id_CertificateIssuer, \"CertificateIssuer\", GeneralNames);\n            ExtensionValueFactory.register(id_AuthorityInfoAccess, \"AuthorityInfoAccess\", InfoAccess);\n            ExtensionValueFactory.register(id_SubjectInfoAccess, \"SubjectInfoAccess\", InfoAccess);\n            ExtensionValueFactory.register(id_IssuingDistributionPoint, \"IssuingDistributionPoint\", IssuingDistributionPoint);\n            ExtensionValueFactory.register(id_NameConstraints, \"NameConstraints\", NameConstraints);\n            ExtensionValueFactory.register(id_PolicyConstraints, \"PolicyConstraints\", PolicyConstraints);\n            ExtensionValueFactory.register(id_PolicyMappings, \"PolicyMappings\", PolicyMappings);\n            ExtensionValueFactory.register(id_PrivateKeyUsagePeriod, \"PrivateKeyUsagePeriod\", PrivateKeyUsagePeriod);\n            ExtensionValueFactory.register(id_QCStatements, \"QCStatements\", QCStatements);\n            ExtensionValueFactory.register(id_SignedCertificateTimestampList, \"SignedCertificateTimestampList\", SignedCertificateTimestampList);\n            ExtensionValueFactory.register(id_SubjectDirectoryAttributes, \"SubjectDirectoryAttributes\", SubjectDirectoryAttributes);\n        }\n        return this.types;\n    }\n    static fromBER(id, raw) {\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(raw);\n        if (asn1.offset === -1) {\n            return null;\n        }\n        const item = this.find(id);\n        if (item) {\n            try {\n                return new item.type({ schema: asn1.result });\n            }\n            catch (ex) {\n                const res = new item.type();\n                res.parsingError = `Incorrectly formatted value of extension ${item.name} (${id})`;\n                return res;\n            }\n        }\n        return asn1.result;\n    }\n    static find(id) {\n        const types = this.getItems();\n        return types[id] || null;\n    }\n    static register(id, name, type) {\n        this.getItems()[id] = { name, type };\n    }\n}\n\nconst EXTN_ID = \"extnID\";\nconst CRITICAL = \"critical\";\nconst EXTN_VALUE = \"extnValue\";\nconst PARSED_VALUE$5 = \"parsedValue\";\nconst CLEAR_PROPS$10 = [\n    EXTN_ID,\n    CRITICAL,\n    EXTN_VALUE\n];\nclass Extension extends PkiObject {\n    get parsedValue() {\n        if (this._parsedValue === undefined) {\n            const parsedValue = ExtensionValueFactory.fromBER(this.extnID, this.extnValue.valueBlock.valueHexView);\n            this._parsedValue = parsedValue;\n        }\n        return this._parsedValue || undefined;\n    }\n    set parsedValue(value) {\n        this._parsedValue = value;\n    }\n    constructor(parameters = {}) {\n        super();\n        this.extnID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXTN_ID, Extension.defaultValues(EXTN_ID));\n        this.critical = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRITICAL, Extension.defaultValues(CRITICAL));\n        if (EXTN_VALUE in parameters) {\n            this.extnValue = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: parameters.extnValue });\n        }\n        else {\n            this.extnValue = Extension.defaultValues(EXTN_VALUE);\n        }\n        if (PARSED_VALUE$5 in parameters) {\n            this.parsedValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PARSED_VALUE$5, Extension.defaultValues(PARSED_VALUE$5));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case EXTN_ID:\n                return EMPTY_STRING;\n            case CRITICAL:\n                return false;\n            case EXTN_VALUE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case PARSED_VALUE$5:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.extnID || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Boolean({\n                    name: (names.critical || EMPTY_STRING),\n                    optional: true\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.extnValue || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$10);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Extension.schema({\n            names: {\n                extnID: EXTN_ID,\n                critical: CRITICAL,\n                extnValue: EXTN_VALUE\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.extnID = asn1.result.extnID.valueBlock.toString();\n        if (CRITICAL in asn1.result) {\n            this.critical = asn1.result.critical.valueBlock.value;\n        }\n        this.extnValue = asn1.result.extnValue;\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.extnID }));\n        if (this.critical !== Extension.defaultValues(CRITICAL)) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Boolean({ value: this.critical }));\n        }\n        outputArray.push(this.extnValue);\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const object = {\n            extnID: this.extnID,\n            extnValue: this.extnValue.toJSON(),\n        };\n        if (this.critical !== Extension.defaultValues(CRITICAL)) {\n            object.critical = this.critical;\n        }\n        if (this.parsedValue && this.parsedValue.toJSON) {\n            object.parsedValue = this.parsedValue.toJSON();\n        }\n        return object;\n    }\n}\nExtension.CLASS_NAME = \"Extension\";\n\nconst EXTENSIONS$5 = \"extensions\";\nconst CLEAR_PROPS$$ = [\n    EXTENSIONS$5,\n];\nclass Extensions extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.extensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXTENSIONS$5, Extensions.defaultValues(EXTENSIONS$5));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case EXTENSIONS$5:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}, optional = false) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            optional,\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.extensions || EMPTY_STRING),\n                    value: Extension.schema(names.extension || {})\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$$);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Extensions.schema({\n            names: {\n                extensions: EXTENSIONS$5\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.extensions = Array.from(asn1.result.extensions, element => new Extension({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.extensions, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            extensions: this.extensions.map(o => o.toJSON())\n        };\n    }\n}\nExtensions.CLASS_NAME = \"Extensions\";\n\nconst ISSUER$5 = \"issuer\";\nconst SERIAL_NUMBER$6 = \"serialNumber\";\nconst ISSUER_UID = \"issuerUID\";\nconst CLEAR_PROPS$_ = [\n    ISSUER$5,\n    SERIAL_NUMBER$6,\n    ISSUER_UID,\n];\nclass IssuerSerial extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.issuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER$5, IssuerSerial.defaultValues(ISSUER$5));\n        this.serialNumber = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SERIAL_NUMBER$6, IssuerSerial.defaultValues(SERIAL_NUMBER$6));\n        if (ISSUER_UID in parameters) {\n            this.issuerUID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER_UID, IssuerSerial.defaultValues(ISSUER_UID));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ISSUER$5:\n                return new GeneralNames();\n            case SERIAL_NUMBER$6:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case ISSUER_UID:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                GeneralNames.schema(names.issuer || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.serialNumber || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({\n                    optional: true,\n                    name: (names.issuerUID || EMPTY_STRING)\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$_);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, IssuerSerial.schema({\n            names: {\n                issuer: {\n                    names: {\n                        blockName: ISSUER$5\n                    }\n                },\n                serialNumber: SERIAL_NUMBER$6,\n                issuerUID: ISSUER_UID\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.issuer = new GeneralNames({ schema: asn1.result.issuer });\n        this.serialNumber = asn1.result.serialNumber;\n        if (ISSUER_UID in asn1.result)\n            this.issuerUID = asn1.result.issuerUID;\n    }\n    toSchema() {\n        const result = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.issuer.toSchema(),\n                this.serialNumber\n            ]\n        });\n        if (this.issuerUID) {\n            result.valueBlock.value.push(this.issuerUID);\n        }\n        return result;\n    }\n    toJSON() {\n        const result = {\n            issuer: this.issuer.toJSON(),\n            serialNumber: this.serialNumber.toJSON()\n        };\n        if (this.issuerUID) {\n            result.issuerUID = this.issuerUID.toJSON();\n        }\n        return result;\n    }\n}\nIssuerSerial.CLASS_NAME = \"IssuerSerial\";\n\nconst VERSION$h = \"version\";\nconst BASE_CERTIFICATE_ID$2 = \"baseCertificateID\";\nconst SUBJECT_NAME = \"subjectName\";\nconst ISSUER$4 = \"issuer\";\nconst SIGNATURE$6 = \"signature\";\nconst SERIAL_NUMBER$5 = \"serialNumber\";\nconst ATTR_CERT_VALIDITY_PERIOD$1 = \"attrCertValidityPeriod\";\nconst ATTRIBUTES$3 = \"attributes\";\nconst ISSUER_UNIQUE_ID$2 = \"issuerUniqueID\";\nconst EXTENSIONS$4 = \"extensions\";\nconst CLEAR_PROPS$Z = [\n    VERSION$h,\n    BASE_CERTIFICATE_ID$2,\n    SUBJECT_NAME,\n    ISSUER$4,\n    SIGNATURE$6,\n    SERIAL_NUMBER$5,\n    ATTR_CERT_VALIDITY_PERIOD$1,\n    ATTRIBUTES$3,\n    ISSUER_UNIQUE_ID$2,\n    EXTENSIONS$4,\n];\nclass AttributeCertificateInfoV1 extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$h, AttributeCertificateInfoV1.defaultValues(VERSION$h));\n        if (BASE_CERTIFICATE_ID$2 in parameters) {\n            this.baseCertificateID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, BASE_CERTIFICATE_ID$2, AttributeCertificateInfoV1.defaultValues(BASE_CERTIFICATE_ID$2));\n        }\n        if (SUBJECT_NAME in parameters) {\n            this.subjectName = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUBJECT_NAME, AttributeCertificateInfoV1.defaultValues(SUBJECT_NAME));\n        }\n        this.issuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER$4, AttributeCertificateInfoV1.defaultValues(ISSUER$4));\n        this.signature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE$6, AttributeCertificateInfoV1.defaultValues(SIGNATURE$6));\n        this.serialNumber = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SERIAL_NUMBER$5, AttributeCertificateInfoV1.defaultValues(SERIAL_NUMBER$5));\n        this.attrCertValidityPeriod = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ATTR_CERT_VALIDITY_PERIOD$1, AttributeCertificateInfoV1.defaultValues(ATTR_CERT_VALIDITY_PERIOD$1));\n        this.attributes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ATTRIBUTES$3, AttributeCertificateInfoV1.defaultValues(ATTRIBUTES$3));\n        if (ISSUER_UNIQUE_ID$2 in parameters)\n            this.issuerUniqueID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER_UNIQUE_ID$2, AttributeCertificateInfoV1.defaultValues(ISSUER_UNIQUE_ID$2));\n        if (EXTENSIONS$4 in parameters) {\n            this.extensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXTENSIONS$4, AttributeCertificateInfoV1.defaultValues(EXTENSIONS$4));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$h:\n                return 0;\n            case BASE_CERTIFICATE_ID$2:\n                return new IssuerSerial();\n            case SUBJECT_NAME:\n                return new GeneralNames();\n            case ISSUER$4:\n                return new GeneralNames();\n            case SIGNATURE$6:\n                return new AlgorithmIdentifier();\n            case SERIAL_NUMBER$5:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case ATTR_CERT_VALIDITY_PERIOD$1:\n                return new AttCertValidityPeriod();\n            case ATTRIBUTES$3:\n                return [];\n            case ISSUER_UNIQUE_ID$2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            case EXTENSIONS$4:\n                return new Extensions();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            name: (names.baseCertificateID || EMPTY_STRING),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 0\n                            },\n                            value: IssuerSerial.schema().valueBlock.value\n                        }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            name: (names.subjectName || EMPTY_STRING),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 1\n                            },\n                            value: GeneralNames.schema().valueBlock.value\n                        }),\n                    ]\n                }),\n                GeneralNames.schema({\n                    names: {\n                        blockName: (names.issuer || EMPTY_STRING)\n                    }\n                }),\n                AlgorithmIdentifier.schema(names.signature || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.serialNumber || EMPTY_STRING) }),\n                AttCertValidityPeriod.schema(names.attrCertValidityPeriod || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    name: (names.attributes || EMPTY_STRING),\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            value: Attribute.schema()\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({\n                    optional: true,\n                    name: (names.issuerUniqueID || EMPTY_STRING)\n                }),\n                Extensions.schema(names.extensions || {}, true)\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$Z);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AttributeCertificateInfoV1.schema({\n            names: {\n                version: VERSION$h,\n                baseCertificateID: BASE_CERTIFICATE_ID$2,\n                subjectName: SUBJECT_NAME,\n                issuer: ISSUER$4,\n                signature: {\n                    names: {\n                        blockName: SIGNATURE$6\n                    }\n                },\n                serialNumber: SERIAL_NUMBER$5,\n                attrCertValidityPeriod: {\n                    names: {\n                        blockName: ATTR_CERT_VALIDITY_PERIOD$1\n                    }\n                },\n                attributes: ATTRIBUTES$3,\n                issuerUniqueID: ISSUER_UNIQUE_ID$2,\n                extensions: {\n                    names: {\n                        blockName: EXTENSIONS$4\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        if (BASE_CERTIFICATE_ID$2 in asn1.result) {\n            this.baseCertificateID = new IssuerSerial({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.baseCertificateID.valueBlock.value\n                })\n            });\n        }\n        if (SUBJECT_NAME in asn1.result) {\n            this.subjectName = new GeneralNames({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.subjectName.valueBlock.value\n                })\n            });\n        }\n        this.issuer = asn1.result.issuer;\n        this.signature = new AlgorithmIdentifier({ schema: asn1.result.signature });\n        this.serialNumber = asn1.result.serialNumber;\n        this.attrCertValidityPeriod = new AttCertValidityPeriod({ schema: asn1.result.attrCertValidityPeriod });\n        this.attributes = Array.from(asn1.result.attributes.valueBlock.value, element => new Attribute({ schema: element }));\n        if (ISSUER_UNIQUE_ID$2 in asn1.result) {\n            this.issuerUniqueID = asn1.result.issuerUniqueID;\n        }\n        if (EXTENSIONS$4 in asn1.result) {\n            this.extensions = new Extensions({ schema: asn1.result.extensions });\n        }\n    }\n    toSchema() {\n        const result = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version })]\n        });\n        if (this.baseCertificateID) {\n            result.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: this.baseCertificateID.toSchema().valueBlock.value\n            }));\n        }\n        if (this.subjectName) {\n            result.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: this.subjectName.toSchema().valueBlock.value\n            }));\n        }\n        result.valueBlock.value.push(this.issuer.toSchema());\n        result.valueBlock.value.push(this.signature.toSchema());\n        result.valueBlock.value.push(this.serialNumber);\n        result.valueBlock.value.push(this.attrCertValidityPeriod.toSchema());\n        result.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.attributes, o => o.toSchema())\n        }));\n        if (this.issuerUniqueID) {\n            result.valueBlock.value.push(this.issuerUniqueID);\n        }\n        if (this.extensions) {\n            result.valueBlock.value.push(this.extensions.toSchema());\n        }\n        return result;\n    }\n    toJSON() {\n        const result = {\n            version: this.version\n        };\n        if (this.baseCertificateID) {\n            result.baseCertificateID = this.baseCertificateID.toJSON();\n        }\n        if (this.subjectName) {\n            result.subjectName = this.subjectName.toJSON();\n        }\n        result.issuer = this.issuer.toJSON();\n        result.signature = this.signature.toJSON();\n        result.serialNumber = this.serialNumber.toJSON();\n        result.attrCertValidityPeriod = this.attrCertValidityPeriod.toJSON();\n        result.attributes = Array.from(this.attributes, o => o.toJSON());\n        if (this.issuerUniqueID) {\n            result.issuerUniqueID = this.issuerUniqueID.toJSON();\n        }\n        if (this.extensions) {\n            result.extensions = this.extensions.toJSON();\n        }\n        return result;\n    }\n}\nAttributeCertificateInfoV1.CLASS_NAME = \"AttributeCertificateInfoV1\";\n\nconst ACINFO$1 = \"acinfo\";\nconst SIGNATURE_ALGORITHM$7 = \"signatureAlgorithm\";\nconst SIGNATURE_VALUE$4 = \"signatureValue\";\nconst CLEAR_PROPS$Y = [\n    ACINFO$1,\n    SIGNATURE_VALUE$4,\n    SIGNATURE_ALGORITHM$7\n];\nclass AttributeCertificateV1 extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.acinfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ACINFO$1, AttributeCertificateV1.defaultValues(ACINFO$1));\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM$7, AttributeCertificateV1.defaultValues(SIGNATURE_ALGORITHM$7));\n        this.signatureValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_VALUE$4, AttributeCertificateV1.defaultValues(SIGNATURE_VALUE$4));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ACINFO$1:\n                return new AttributeCertificateInfoV1();\n            case SIGNATURE_ALGORITHM$7:\n                return new AlgorithmIdentifier();\n            case SIGNATURE_VALUE$4:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AttributeCertificateInfoV1.schema(names.acinfo || {}),\n                AlgorithmIdentifier.schema(names.signatureAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.signatureValue || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$Y);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AttributeCertificateV1.schema({\n            names: {\n                acinfo: {\n                    names: {\n                        blockName: ACINFO$1\n                    }\n                },\n                signatureAlgorithm: {\n                    names: {\n                        blockName: SIGNATURE_ALGORITHM$7\n                    }\n                },\n                signatureValue: SIGNATURE_VALUE$4\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.acinfo = new AttributeCertificateInfoV1({ schema: asn1.result.acinfo });\n        this.signatureAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.signatureAlgorithm });\n        this.signatureValue = asn1.result.signatureValue;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.acinfo.toSchema(),\n                this.signatureAlgorithm.toSchema(),\n                this.signatureValue\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            acinfo: this.acinfo.toJSON(),\n            signatureAlgorithm: this.signatureAlgorithm.toJSON(),\n            signatureValue: this.signatureValue.toJSON(),\n        };\n    }\n}\nAttributeCertificateV1.CLASS_NAME = \"AttributeCertificateV1\";\n\nconst DIGESTED_OBJECT_TYPE = \"digestedObjectType\";\nconst OTHER_OBJECT_TYPE_ID = \"otherObjectTypeID\";\nconst DIGEST_ALGORITHM$2 = \"digestAlgorithm\";\nconst OBJECT_DIGEST = \"objectDigest\";\nconst CLEAR_PROPS$X = [\n    DIGESTED_OBJECT_TYPE,\n    OTHER_OBJECT_TYPE_ID,\n    DIGEST_ALGORITHM$2,\n    OBJECT_DIGEST,\n];\nclass ObjectDigestInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.digestedObjectType = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DIGESTED_OBJECT_TYPE, ObjectDigestInfo.defaultValues(DIGESTED_OBJECT_TYPE));\n        if (OTHER_OBJECT_TYPE_ID in parameters) {\n            this.otherObjectTypeID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER_OBJECT_TYPE_ID, ObjectDigestInfo.defaultValues(OTHER_OBJECT_TYPE_ID));\n        }\n        this.digestAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DIGEST_ALGORITHM$2, ObjectDigestInfo.defaultValues(DIGEST_ALGORITHM$2));\n        this.objectDigest = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OBJECT_DIGEST, ObjectDigestInfo.defaultValues(OBJECT_DIGEST));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case DIGESTED_OBJECT_TYPE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Enumerated();\n            case OTHER_OBJECT_TYPE_ID:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier();\n            case DIGEST_ALGORITHM$2:\n                return new AlgorithmIdentifier();\n            case OBJECT_DIGEST:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Enumerated({ name: (names.digestedObjectType || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({\n                    optional: true,\n                    name: (names.otherObjectTypeID || EMPTY_STRING)\n                }),\n                AlgorithmIdentifier.schema(names.digestAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.objectDigest || EMPTY_STRING) }),\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$X);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, ObjectDigestInfo.schema({\n            names: {\n                digestedObjectType: DIGESTED_OBJECT_TYPE,\n                otherObjectTypeID: OTHER_OBJECT_TYPE_ID,\n                digestAlgorithm: {\n                    names: {\n                        blockName: DIGEST_ALGORITHM$2\n                    }\n                },\n                objectDigest: OBJECT_DIGEST\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.digestedObjectType = asn1.result.digestedObjectType;\n        if (OTHER_OBJECT_TYPE_ID in asn1.result) {\n            this.otherObjectTypeID = asn1.result.otherObjectTypeID;\n        }\n        this.digestAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.digestAlgorithm });\n        this.objectDigest = asn1.result.objectDigest;\n    }\n    toSchema() {\n        const result = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [this.digestedObjectType]\n        });\n        if (this.otherObjectTypeID) {\n            result.valueBlock.value.push(this.otherObjectTypeID);\n        }\n        result.valueBlock.value.push(this.digestAlgorithm.toSchema());\n        result.valueBlock.value.push(this.objectDigest);\n        return result;\n    }\n    toJSON() {\n        const result = {\n            digestedObjectType: this.digestedObjectType.toJSON(),\n            digestAlgorithm: this.digestAlgorithm.toJSON(),\n            objectDigest: this.objectDigest.toJSON(),\n        };\n        if (this.otherObjectTypeID) {\n            result.otherObjectTypeID = this.otherObjectTypeID.toJSON();\n        }\n        return result;\n    }\n}\nObjectDigestInfo.CLASS_NAME = \"ObjectDigestInfo\";\n\nconst ISSUER_NAME = \"issuerName\";\nconst BASE_CERTIFICATE_ID$1 = \"baseCertificateID\";\nconst OBJECT_DIGEST_INFO$1 = \"objectDigestInfo\";\nconst CLEAR_PROPS$W = [\n    ISSUER_NAME,\n    BASE_CERTIFICATE_ID$1,\n    OBJECT_DIGEST_INFO$1\n];\nclass V2Form extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (ISSUER_NAME in parameters) {\n            this.issuerName = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER_NAME, V2Form.defaultValues(ISSUER_NAME));\n        }\n        if (BASE_CERTIFICATE_ID$1 in parameters) {\n            this.baseCertificateID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, BASE_CERTIFICATE_ID$1, V2Form.defaultValues(BASE_CERTIFICATE_ID$1));\n        }\n        if (OBJECT_DIGEST_INFO$1 in parameters) {\n            this.objectDigestInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OBJECT_DIGEST_INFO$1, V2Form.defaultValues(OBJECT_DIGEST_INFO$1));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ISSUER_NAME:\n                return new GeneralNames();\n            case BASE_CERTIFICATE_ID$1:\n                return new IssuerSerial();\n            case OBJECT_DIGEST_INFO$1:\n                return new ObjectDigestInfo();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                GeneralNames.schema({\n                    names: {\n                        blockName: names.issuerName\n                    }\n                }, true),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    name: (names.baseCertificateID || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: IssuerSerial.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    name: (names.objectDigestInfo || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: ObjectDigestInfo.schema().valueBlock.value\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$W);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, V2Form.schema({\n            names: {\n                issuerName: ISSUER_NAME,\n                baseCertificateID: BASE_CERTIFICATE_ID$1,\n                objectDigestInfo: OBJECT_DIGEST_INFO$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (ISSUER_NAME in asn1.result)\n            this.issuerName = new GeneralNames({ schema: asn1.result.issuerName });\n        if (BASE_CERTIFICATE_ID$1 in asn1.result) {\n            this.baseCertificateID = new IssuerSerial({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.baseCertificateID.valueBlock.value\n                })\n            });\n        }\n        if (OBJECT_DIGEST_INFO$1 in asn1.result) {\n            this.objectDigestInfo = new ObjectDigestInfo({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.objectDigestInfo.valueBlock.value\n                })\n            });\n        }\n    }\n    toSchema() {\n        const result = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence();\n        if (this.issuerName)\n            result.valueBlock.value.push(this.issuerName.toSchema());\n        if (this.baseCertificateID) {\n            result.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: this.baseCertificateID.toSchema().valueBlock.value\n            }));\n        }\n        if (this.objectDigestInfo) {\n            result.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: this.objectDigestInfo.toSchema().valueBlock.value\n            }));\n        }\n        return result;\n    }\n    toJSON() {\n        const result = {};\n        if (this.issuerName) {\n            result.issuerName = this.issuerName.toJSON();\n        }\n        if (this.baseCertificateID) {\n            result.baseCertificateID = this.baseCertificateID.toJSON();\n        }\n        if (this.objectDigestInfo) {\n            result.objectDigestInfo = this.objectDigestInfo.toJSON();\n        }\n        return result;\n    }\n}\nV2Form.CLASS_NAME = \"V2Form\";\n\nconst BASE_CERTIFICATE_ID = \"baseCertificateID\";\nconst ENTITY_NAME = \"entityName\";\nconst OBJECT_DIGEST_INFO = \"objectDigestInfo\";\nconst CLEAR_PROPS$V = [\n    BASE_CERTIFICATE_ID,\n    ENTITY_NAME,\n    OBJECT_DIGEST_INFO\n];\nclass Holder extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        if (BASE_CERTIFICATE_ID in parameters) {\n            this.baseCertificateID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, BASE_CERTIFICATE_ID, Holder.defaultValues(BASE_CERTIFICATE_ID));\n        }\n        if (ENTITY_NAME in parameters) {\n            this.entityName = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENTITY_NAME, Holder.defaultValues(ENTITY_NAME));\n        }\n        if (OBJECT_DIGEST_INFO in parameters) {\n            this.objectDigestInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OBJECT_DIGEST_INFO, Holder.defaultValues(OBJECT_DIGEST_INFO));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case BASE_CERTIFICATE_ID:\n                return new IssuerSerial();\n            case ENTITY_NAME:\n                return new GeneralNames();\n            case OBJECT_DIGEST_INFO:\n                return new ObjectDigestInfo();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    name: (names.baseCertificateID || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: IssuerSerial.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    name: (names.entityName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: GeneralNames.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    name: (names.objectDigestInfo || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    value: ObjectDigestInfo.schema().valueBlock.value\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$V);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Holder.schema({\n            names: {\n                baseCertificateID: BASE_CERTIFICATE_ID,\n                entityName: ENTITY_NAME,\n                objectDigestInfo: OBJECT_DIGEST_INFO\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (BASE_CERTIFICATE_ID in asn1.result) {\n            this.baseCertificateID = new IssuerSerial({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.baseCertificateID.valueBlock.value\n                })\n            });\n        }\n        if (ENTITY_NAME in asn1.result) {\n            this.entityName = new GeneralNames({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.entityName.valueBlock.value\n                })\n            });\n        }\n        if (OBJECT_DIGEST_INFO in asn1.result) {\n            this.objectDigestInfo = new ObjectDigestInfo({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.objectDigestInfo.valueBlock.value\n                })\n            });\n        }\n    }\n    toSchema() {\n        const result = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence();\n        if (this.baseCertificateID) {\n            result.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: this.baseCertificateID.toSchema().valueBlock.value\n            }));\n        }\n        if (this.entityName) {\n            result.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: this.entityName.toSchema().valueBlock.value\n            }));\n        }\n        if (this.objectDigestInfo) {\n            result.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                },\n                value: this.objectDigestInfo.toSchema().valueBlock.value\n            }));\n        }\n        return result;\n    }\n    toJSON() {\n        const result = {};\n        if (this.baseCertificateID) {\n            result.baseCertificateID = this.baseCertificateID.toJSON();\n        }\n        if (this.entityName) {\n            result.entityName = this.entityName.toJSON();\n        }\n        if (this.objectDigestInfo) {\n            result.objectDigestInfo = this.objectDigestInfo.toJSON();\n        }\n        return result;\n    }\n}\nHolder.CLASS_NAME = \"Holder\";\n\nconst VERSION$g = \"version\";\nconst HOLDER = \"holder\";\nconst ISSUER$3 = \"issuer\";\nconst SIGNATURE$5 = \"signature\";\nconst SERIAL_NUMBER$4 = \"serialNumber\";\nconst ATTR_CERT_VALIDITY_PERIOD = \"attrCertValidityPeriod\";\nconst ATTRIBUTES$2 = \"attributes\";\nconst ISSUER_UNIQUE_ID$1 = \"issuerUniqueID\";\nconst EXTENSIONS$3 = \"extensions\";\nconst CLEAR_PROPS$U = [\n    VERSION$g,\n    HOLDER,\n    ISSUER$3,\n    SIGNATURE$5,\n    SERIAL_NUMBER$4,\n    ATTR_CERT_VALIDITY_PERIOD,\n    ATTRIBUTES$2,\n    ISSUER_UNIQUE_ID$1,\n    EXTENSIONS$3\n];\nclass AttributeCertificateInfoV2 extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$g, AttributeCertificateInfoV2.defaultValues(VERSION$g));\n        this.holder = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, HOLDER, AttributeCertificateInfoV2.defaultValues(HOLDER));\n        this.issuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER$3, AttributeCertificateInfoV2.defaultValues(ISSUER$3));\n        this.signature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE$5, AttributeCertificateInfoV2.defaultValues(SIGNATURE$5));\n        this.serialNumber = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SERIAL_NUMBER$4, AttributeCertificateInfoV2.defaultValues(SERIAL_NUMBER$4));\n        this.attrCertValidityPeriod = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ATTR_CERT_VALIDITY_PERIOD, AttributeCertificateInfoV2.defaultValues(ATTR_CERT_VALIDITY_PERIOD));\n        this.attributes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ATTRIBUTES$2, AttributeCertificateInfoV2.defaultValues(ATTRIBUTES$2));\n        if (ISSUER_UNIQUE_ID$1 in parameters) {\n            this.issuerUniqueID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER_UNIQUE_ID$1, AttributeCertificateInfoV2.defaultValues(ISSUER_UNIQUE_ID$1));\n        }\n        if (EXTENSIONS$3 in parameters) {\n            this.extensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXTENSIONS$3, AttributeCertificateInfoV2.defaultValues(EXTENSIONS$3));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$g:\n                return 1;\n            case HOLDER:\n                return new Holder();\n            case ISSUER$3:\n                return {};\n            case SIGNATURE$5:\n                return new AlgorithmIdentifier();\n            case SERIAL_NUMBER$4:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case ATTR_CERT_VALIDITY_PERIOD:\n                return new AttCertValidityPeriod();\n            case ATTRIBUTES$2:\n                return [];\n            case ISSUER_UNIQUE_ID$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            case EXTENSIONS$3:\n                return new Extensions();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                Holder.schema(names.holder || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                    value: [\n                        GeneralNames.schema({\n                            names: {\n                                blockName: (names.issuer || EMPTY_STRING)\n                            }\n                        }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            name: (names.issuer || EMPTY_STRING),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 0\n                            },\n                            value: V2Form.schema().valueBlock.value\n                        })\n                    ]\n                }),\n                AlgorithmIdentifier.schema(names.signature || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.serialNumber || EMPTY_STRING) }),\n                AttCertValidityPeriod.schema(names.attrCertValidityPeriod || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    name: (names.attributes || EMPTY_STRING),\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            value: Attribute.schema()\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({\n                    optional: true,\n                    name: (names.issuerUniqueID || EMPTY_STRING)\n                }),\n                Extensions.schema(names.extensions || {}, true)\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$U);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AttributeCertificateInfoV2.schema({\n            names: {\n                version: VERSION$g,\n                holder: {\n                    names: {\n                        blockName: HOLDER\n                    }\n                },\n                issuer: ISSUER$3,\n                signature: {\n                    names: {\n                        blockName: SIGNATURE$5\n                    }\n                },\n                serialNumber: SERIAL_NUMBER$4,\n                attrCertValidityPeriod: {\n                    names: {\n                        blockName: ATTR_CERT_VALIDITY_PERIOD\n                    }\n                },\n                attributes: ATTRIBUTES$2,\n                issuerUniqueID: ISSUER_UNIQUE_ID$1,\n                extensions: {\n                    names: {\n                        blockName: EXTENSIONS$3\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        this.holder = new Holder({ schema: asn1.result.holder });\n        switch (asn1.result.issuer.idBlock.tagClass) {\n            case 3:\n                this.issuer = new V2Form({\n                    schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                        value: asn1.result.issuer.valueBlock.value\n                    })\n                });\n                break;\n            case 1:\n            default:\n                throw new Error(\"Incorrect value for 'issuer' in AttributeCertificateInfoV2\");\n        }\n        this.signature = new AlgorithmIdentifier({ schema: asn1.result.signature });\n        this.serialNumber = asn1.result.serialNumber;\n        this.attrCertValidityPeriod = new AttCertValidityPeriod({ schema: asn1.result.attrCertValidityPeriod });\n        this.attributes = Array.from(asn1.result.attributes.valueBlock.value, element => new Attribute({ schema: element }));\n        if (ISSUER_UNIQUE_ID$1 in asn1.result) {\n            this.issuerUniqueID = asn1.result.issuerUniqueID;\n        }\n        if (EXTENSIONS$3 in asn1.result) {\n            this.extensions = new Extensions({ schema: asn1.result.extensions });\n        }\n    }\n    toSchema() {\n        const result = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }),\n                this.holder.toSchema(),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: this.issuer.toSchema().valueBlock.value\n                }),\n                this.signature.toSchema(),\n                this.serialNumber,\n                this.attrCertValidityPeriod.toSchema(),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: Array.from(this.attributes, o => o.toSchema())\n                })\n            ]\n        });\n        if (this.issuerUniqueID) {\n            result.valueBlock.value.push(this.issuerUniqueID);\n        }\n        if (this.extensions) {\n            result.valueBlock.value.push(this.extensions.toSchema());\n        }\n        return result;\n    }\n    toJSON() {\n        const result = {\n            version: this.version,\n            holder: this.holder.toJSON(),\n            issuer: this.issuer.toJSON(),\n            signature: this.signature.toJSON(),\n            serialNumber: this.serialNumber.toJSON(),\n            attrCertValidityPeriod: this.attrCertValidityPeriod.toJSON(),\n            attributes: Array.from(this.attributes, o => o.toJSON())\n        };\n        if (this.issuerUniqueID) {\n            result.issuerUniqueID = this.issuerUniqueID.toJSON();\n        }\n        if (this.extensions) {\n            result.extensions = this.extensions.toJSON();\n        }\n        return result;\n    }\n}\nAttributeCertificateInfoV2.CLASS_NAME = \"AttributeCertificateInfoV2\";\n\nconst ACINFO = \"acinfo\";\nconst SIGNATURE_ALGORITHM$6 = \"signatureAlgorithm\";\nconst SIGNATURE_VALUE$3 = \"signatureValue\";\nconst CLEAR_PROPS$T = [\n    ACINFO,\n    SIGNATURE_ALGORITHM$6,\n    SIGNATURE_VALUE$3,\n];\nclass AttributeCertificateV2 extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.acinfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ACINFO, AttributeCertificateV2.defaultValues(ACINFO));\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM$6, AttributeCertificateV2.defaultValues(SIGNATURE_ALGORITHM$6));\n        this.signatureValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_VALUE$3, AttributeCertificateV2.defaultValues(SIGNATURE_VALUE$3));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ACINFO:\n                return new AttributeCertificateInfoV2();\n            case SIGNATURE_ALGORITHM$6:\n                return new AlgorithmIdentifier();\n            case SIGNATURE_VALUE$3:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AttributeCertificateInfoV2.schema(names.acinfo || {}),\n                AlgorithmIdentifier.schema(names.signatureAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.signatureValue || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$T);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AttributeCertificateV2.schema({\n            names: {\n                acinfo: {\n                    names: {\n                        blockName: ACINFO\n                    }\n                },\n                signatureAlgorithm: {\n                    names: {\n                        blockName: SIGNATURE_ALGORITHM$6\n                    }\n                },\n                signatureValue: SIGNATURE_VALUE$3\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.acinfo = new AttributeCertificateInfoV2({ schema: asn1.result.acinfo });\n        this.signatureAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.signatureAlgorithm });\n        this.signatureValue = asn1.result.signatureValue;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.acinfo.toSchema(),\n                this.signatureAlgorithm.toSchema(),\n                this.signatureValue\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            acinfo: this.acinfo.toJSON(),\n            signatureAlgorithm: this.signatureAlgorithm.toJSON(),\n            signatureValue: this.signatureValue.toJSON(),\n        };\n    }\n}\nAttributeCertificateV2.CLASS_NAME = \"AttributeCertificateV2\";\n\nconst CONTENT_TYPE = \"contentType\";\nconst CONTENT = \"content\";\nconst CLEAR_PROPS$S = [CONTENT_TYPE, CONTENT];\nclass ContentInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.contentType = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CONTENT_TYPE, ContentInfo.defaultValues(CONTENT_TYPE));\n        this.content = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CONTENT, ContentInfo.defaultValues(CONTENT));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CONTENT_TYPE:\n                return EMPTY_STRING;\n            case CONTENT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case CONTENT_TYPE:\n                return (typeof memberValue === \"string\" &&\n                    memberValue === this.defaultValues(CONTENT_TYPE));\n            case CONTENT:\n                return (memberValue instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        if ((\"optional\" in names) === false) {\n            names.optional = false;\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || \"ContentInfo\"),\n            optional: names.optional,\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.contentType || CONTENT_TYPE) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.content || CONTENT) })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$S);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, ContentInfo.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.contentType = asn1.result.contentType.valueBlock.toString();\n        this.content = asn1.result.content;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.contentType }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [this.content]\n                })\n            ]\n        }));\n    }\n    toJSON() {\n        const object = {\n            contentType: this.contentType\n        };\n        if (!(this.content instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any)) {\n            object.content = this.content.toJSON();\n        }\n        return object;\n    }\n}\nContentInfo.CLASS_NAME = \"ContentInfo\";\nContentInfo.DATA = id_ContentType_Data;\nContentInfo.SIGNED_DATA = id_ContentType_SignedData;\nContentInfo.ENVELOPED_DATA = id_ContentType_EnvelopedData;\nContentInfo.ENCRYPTED_DATA = id_ContentType_EncryptedData;\n\nconst TYPE$1 = \"type\";\nconst VALUE$4 = \"value\";\nconst UTC_TIME_NAME = \"utcTimeName\";\nconst GENERAL_TIME_NAME = \"generalTimeName\";\nconst CLEAR_PROPS$R = [UTC_TIME_NAME, GENERAL_TIME_NAME];\nvar TimeType;\n(function (TimeType) {\n    TimeType[TimeType[\"UTCTime\"] = 0] = \"UTCTime\";\n    TimeType[TimeType[\"GeneralizedTime\"] = 1] = \"GeneralizedTime\";\n    TimeType[TimeType[\"empty\"] = 2] = \"empty\";\n})(TimeType || (TimeType = {}));\nclass Time extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.type = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TYPE$1, Time.defaultValues(TYPE$1));\n        this.value = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUE$4, Time.defaultValues(VALUE$4));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TYPE$1:\n                return 0;\n            case VALUE$4:\n                return new Date(0, 0, 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}, optional = false) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n            optional,\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.UTCTime({ name: (names.utcTimeName || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ name: (names.generalTimeName || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$R);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Time.schema({\n            names: {\n                utcTimeName: UTC_TIME_NAME,\n                generalTimeName: GENERAL_TIME_NAME\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (UTC_TIME_NAME in asn1.result) {\n            this.type = 0;\n            this.value = asn1.result.utcTimeName.toDate();\n        }\n        if (GENERAL_TIME_NAME in asn1.result) {\n            this.type = 1;\n            this.value = asn1.result.generalTimeName.toDate();\n        }\n    }\n    toSchema() {\n        if (this.type === 0) {\n            return new asn1js__WEBPACK_IMPORTED_MODULE_0__.UTCTime({ valueDate: this.value });\n        }\n        else if (this.type === 1) {\n            return new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.value });\n        }\n        return {};\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            value: this.value\n        };\n    }\n}\nTime.CLASS_NAME = \"Time\";\n\nconst TBS$4 = \"tbs\";\nconst VERSION$f = \"version\";\nconst SERIAL_NUMBER$3 = \"serialNumber\";\nconst SIGNATURE$4 = \"signature\";\nconst ISSUER$2 = \"issuer\";\nconst NOT_BEFORE = \"notBefore\";\nconst NOT_AFTER = \"notAfter\";\nconst SUBJECT$1 = \"subject\";\nconst SUBJECT_PUBLIC_KEY_INFO = \"subjectPublicKeyInfo\";\nconst ISSUER_UNIQUE_ID = \"issuerUniqueID\";\nconst SUBJECT_UNIQUE_ID = \"subjectUniqueID\";\nconst EXTENSIONS$2 = \"extensions\";\nconst SIGNATURE_ALGORITHM$5 = \"signatureAlgorithm\";\nconst SIGNATURE_VALUE$2 = \"signatureValue\";\nconst TBS_CERTIFICATE = \"tbsCertificate\";\nconst TBS_CERTIFICATE_VERSION = `${TBS_CERTIFICATE}.${VERSION$f}`;\nconst TBS_CERTIFICATE_SERIAL_NUMBER = `${TBS_CERTIFICATE}.${SERIAL_NUMBER$3}`;\nconst TBS_CERTIFICATE_SIGNATURE = `${TBS_CERTIFICATE}.${SIGNATURE$4}`;\nconst TBS_CERTIFICATE_ISSUER = `${TBS_CERTIFICATE}.${ISSUER$2}`;\nconst TBS_CERTIFICATE_NOT_BEFORE = `${TBS_CERTIFICATE}.${NOT_BEFORE}`;\nconst TBS_CERTIFICATE_NOT_AFTER = `${TBS_CERTIFICATE}.${NOT_AFTER}`;\nconst TBS_CERTIFICATE_SUBJECT = `${TBS_CERTIFICATE}.${SUBJECT$1}`;\nconst TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY = `${TBS_CERTIFICATE}.${SUBJECT_PUBLIC_KEY_INFO}`;\nconst TBS_CERTIFICATE_ISSUER_UNIQUE_ID = `${TBS_CERTIFICATE}.${ISSUER_UNIQUE_ID}`;\nconst TBS_CERTIFICATE_SUBJECT_UNIQUE_ID = `${TBS_CERTIFICATE}.${SUBJECT_UNIQUE_ID}`;\nconst TBS_CERTIFICATE_EXTENSIONS = `${TBS_CERTIFICATE}.${EXTENSIONS$2}`;\nconst CLEAR_PROPS$Q = [\n    TBS_CERTIFICATE,\n    TBS_CERTIFICATE_VERSION,\n    TBS_CERTIFICATE_SERIAL_NUMBER,\n    TBS_CERTIFICATE_SIGNATURE,\n    TBS_CERTIFICATE_ISSUER,\n    TBS_CERTIFICATE_NOT_BEFORE,\n    TBS_CERTIFICATE_NOT_AFTER,\n    TBS_CERTIFICATE_SUBJECT,\n    TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY,\n    TBS_CERTIFICATE_ISSUER_UNIQUE_ID,\n    TBS_CERTIFICATE_SUBJECT_UNIQUE_ID,\n    TBS_CERTIFICATE_EXTENSIONS,\n    SIGNATURE_ALGORITHM$5,\n    SIGNATURE_VALUE$2\n];\nfunction tbsCertificate(parameters = {}) {\n    const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n    return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n        name: (names.blockName || TBS_CERTIFICATE),\n        value: [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.tbsCertificateVersion || TBS_CERTIFICATE_VERSION) })\n                ]\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.tbsCertificateSerialNumber || TBS_CERTIFICATE_SERIAL_NUMBER) }),\n            AlgorithmIdentifier.schema(names.signature || {\n                names: {\n                    blockName: TBS_CERTIFICATE_SIGNATURE\n                }\n            }),\n            RelativeDistinguishedNames.schema(names.issuer || {\n                names: {\n                    blockName: TBS_CERTIFICATE_ISSUER\n                }\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                name: (names.tbsCertificateValidity || \"tbsCertificate.validity\"),\n                value: [\n                    Time.schema(names.notBefore || {\n                        names: {\n                            utcTimeName: TBS_CERTIFICATE_NOT_BEFORE,\n                            generalTimeName: TBS_CERTIFICATE_NOT_BEFORE\n                        }\n                    }),\n                    Time.schema(names.notAfter || {\n                        names: {\n                            utcTimeName: TBS_CERTIFICATE_NOT_AFTER,\n                            generalTimeName: TBS_CERTIFICATE_NOT_AFTER\n                        }\n                    })\n                ]\n            }),\n            RelativeDistinguishedNames.schema(names.subject || {\n                names: {\n                    blockName: TBS_CERTIFICATE_SUBJECT\n                }\n            }),\n            PublicKeyInfo.schema(names.subjectPublicKeyInfo || {\n                names: {\n                    blockName: TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY\n                }\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                name: (names.tbsCertificateIssuerUniqueID || TBS_CERTIFICATE_ISSUER_UNIQUE_ID),\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                }\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                name: (names.tbsCertificateSubjectUniqueID || TBS_CERTIFICATE_SUBJECT_UNIQUE_ID),\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                }\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 3\n                },\n                value: [Extensions.schema(names.extensions || {\n                        names: {\n                            blockName: TBS_CERTIFICATE_EXTENSIONS\n                        }\n                    })]\n            })\n        ]\n    }));\n}\nclass Certificate extends PkiObject {\n    get tbs() {\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(this.tbsView);\n    }\n    set tbs(value) {\n        this.tbsView = new Uint8Array(value);\n    }\n    constructor(parameters = {}) {\n        super();\n        this.tbsView = new Uint8Array(pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TBS$4, Certificate.defaultValues(TBS$4)));\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$f, Certificate.defaultValues(VERSION$f));\n        this.serialNumber = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SERIAL_NUMBER$3, Certificate.defaultValues(SERIAL_NUMBER$3));\n        this.signature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE$4, Certificate.defaultValues(SIGNATURE$4));\n        this.issuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER$2, Certificate.defaultValues(ISSUER$2));\n        this.notBefore = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NOT_BEFORE, Certificate.defaultValues(NOT_BEFORE));\n        this.notAfter = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NOT_AFTER, Certificate.defaultValues(NOT_AFTER));\n        this.subject = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUBJECT$1, Certificate.defaultValues(SUBJECT$1));\n        this.subjectPublicKeyInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUBJECT_PUBLIC_KEY_INFO, Certificate.defaultValues(SUBJECT_PUBLIC_KEY_INFO));\n        if (ISSUER_UNIQUE_ID in parameters) {\n            this.issuerUniqueID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER_UNIQUE_ID, Certificate.defaultValues(ISSUER_UNIQUE_ID));\n        }\n        if (SUBJECT_UNIQUE_ID in parameters) {\n            this.subjectUniqueID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUBJECT_UNIQUE_ID, Certificate.defaultValues(SUBJECT_UNIQUE_ID));\n        }\n        if (EXTENSIONS$2 in parameters) {\n            this.extensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXTENSIONS$2, Certificate.defaultValues(EXTENSIONS$2));\n        }\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM$5, Certificate.defaultValues(SIGNATURE_ALGORITHM$5));\n        this.signatureValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_VALUE$2, Certificate.defaultValues(SIGNATURE_VALUE$2));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TBS$4:\n                return EMPTY_BUFFER;\n            case VERSION$f:\n                return 0;\n            case SERIAL_NUMBER$3:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case SIGNATURE$4:\n                return new AlgorithmIdentifier();\n            case ISSUER$2:\n                return new RelativeDistinguishedNames();\n            case NOT_BEFORE:\n                return new Time();\n            case NOT_AFTER:\n                return new Time();\n            case SUBJECT$1:\n                return new RelativeDistinguishedNames();\n            case SUBJECT_PUBLIC_KEY_INFO:\n                return new PublicKeyInfo();\n            case ISSUER_UNIQUE_ID:\n                return EMPTY_BUFFER;\n            case SUBJECT_UNIQUE_ID:\n                return EMPTY_BUFFER;\n            case EXTENSIONS$2:\n                return [];\n            case SIGNATURE_ALGORITHM$5:\n                return new AlgorithmIdentifier();\n            case SIGNATURE_VALUE$2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                tbsCertificate(names.tbsCertificate),\n                AlgorithmIdentifier.schema(names.signatureAlgorithm || {\n                    names: {\n                        blockName: SIGNATURE_ALGORITHM$5\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.signatureValue || SIGNATURE_VALUE$2) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$Q);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Certificate.schema({\n            names: {\n                tbsCertificate: {\n                    names: {\n                        extensions: {\n                            names: {\n                                extensions: TBS_CERTIFICATE_EXTENSIONS\n                            }\n                        }\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.tbsView = asn1.result.tbsCertificate.valueBeforeDecodeView;\n        if (TBS_CERTIFICATE_VERSION in asn1.result)\n            this.version = asn1.result[TBS_CERTIFICATE_VERSION].valueBlock.valueDec;\n        this.serialNumber = asn1.result[TBS_CERTIFICATE_SERIAL_NUMBER];\n        this.signature = new AlgorithmIdentifier({ schema: asn1.result[TBS_CERTIFICATE_SIGNATURE] });\n        this.issuer = new RelativeDistinguishedNames({ schema: asn1.result[TBS_CERTIFICATE_ISSUER] });\n        this.notBefore = new Time({ schema: asn1.result[TBS_CERTIFICATE_NOT_BEFORE] });\n        this.notAfter = new Time({ schema: asn1.result[TBS_CERTIFICATE_NOT_AFTER] });\n        this.subject = new RelativeDistinguishedNames({ schema: asn1.result[TBS_CERTIFICATE_SUBJECT] });\n        this.subjectPublicKeyInfo = new PublicKeyInfo({ schema: asn1.result[TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY] });\n        if (TBS_CERTIFICATE_ISSUER_UNIQUE_ID in asn1.result)\n            this.issuerUniqueID = asn1.result[TBS_CERTIFICATE_ISSUER_UNIQUE_ID].valueBlock.valueHex;\n        if (TBS_CERTIFICATE_SUBJECT_UNIQUE_ID in asn1.result)\n            this.subjectUniqueID = asn1.result[TBS_CERTIFICATE_SUBJECT_UNIQUE_ID].valueBlock.valueHex;\n        if (TBS_CERTIFICATE_EXTENSIONS in asn1.result)\n            this.extensions = Array.from(asn1.result[TBS_CERTIFICATE_EXTENSIONS], element => new Extension({ schema: element }));\n        this.signatureAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.signatureAlgorithm });\n        this.signatureValue = asn1.result.signatureValue;\n    }\n    encodeTBS() {\n        const outputArray = [];\n        if ((VERSION$f in this) && (this.version !== Certificate.defaultValues(VERSION$f))) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version })\n                ]\n            }));\n        }\n        outputArray.push(this.serialNumber);\n        outputArray.push(this.signature.toSchema());\n        outputArray.push(this.issuer.toSchema());\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.notBefore.toSchema(),\n                this.notAfter.toSchema()\n            ]\n        }));\n        outputArray.push(this.subject.toSchema());\n        outputArray.push(this.subjectPublicKeyInfo.toSchema());\n        if (this.issuerUniqueID) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                valueHex: this.issuerUniqueID\n            }));\n        }\n        if (this.subjectUniqueID) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                },\n                valueHex: this.subjectUniqueID\n            }));\n        }\n        if (this.extensions) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 3\n                },\n                value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                        value: Array.from(this.extensions, o => o.toSchema())\n                    })]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toSchema(encodeFlag = false) {\n        let tbsSchema;\n        if (encodeFlag === false) {\n            if (!this.tbsView.byteLength) {\n                return Certificate.schema().value[0];\n            }\n            const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.tbsView);\n            AsnError.assert(asn1, \"TBS Certificate\");\n            tbsSchema = asn1.result;\n        }\n        else {\n            tbsSchema = this.encodeTBS();\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                tbsSchema,\n                this.signatureAlgorithm.toSchema(),\n                this.signatureValue\n            ]\n        }));\n    }\n    toJSON() {\n        const res = {\n            tbs: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToHex(this.tbsView),\n            version: this.version,\n            serialNumber: this.serialNumber.toJSON(),\n            signature: this.signature.toJSON(),\n            issuer: this.issuer.toJSON(),\n            notBefore: this.notBefore.toJSON(),\n            notAfter: this.notAfter.toJSON(),\n            subject: this.subject.toJSON(),\n            subjectPublicKeyInfo: this.subjectPublicKeyInfo.toJSON(),\n            signatureAlgorithm: this.signatureAlgorithm.toJSON(),\n            signatureValue: this.signatureValue.toJSON(),\n        };\n        if ((VERSION$f in this) && (this.version !== Certificate.defaultValues(VERSION$f))) {\n            res.version = this.version;\n        }\n        if (this.issuerUniqueID) {\n            res.issuerUniqueID = pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToHex(this.issuerUniqueID);\n        }\n        if (this.subjectUniqueID) {\n            res.subjectUniqueID = pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToHex(this.subjectUniqueID);\n        }\n        if (this.extensions) {\n            res.extensions = Array.from(this.extensions, o => o.toJSON());\n        }\n        return res;\n    }\n    async getPublicKey(parameters, crypto = getCrypto(true)) {\n        return crypto.getPublicKey(this.subjectPublicKeyInfo, this.signatureAlgorithm, parameters);\n    }\n    async getKeyHash(hashAlgorithm = \"SHA-1\", crypto = getCrypto(true)) {\n        return crypto.digest({ name: hashAlgorithm }, this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);\n    }\n    async sign(privateKey, hashAlgorithm = \"SHA-1\", crypto = getCrypto(true)) {\n        if (!privateKey) {\n            throw new Error(\"Need to provide a private key for signing\");\n        }\n        const signatureParameters = await crypto.getSignatureParameters(privateKey, hashAlgorithm);\n        const parameters = signatureParameters.parameters;\n        this.signature = signatureParameters.signatureAlgorithm;\n        this.signatureAlgorithm = signatureParameters.signatureAlgorithm;\n        this.tbsView = new Uint8Array(this.encodeTBS().toBER());\n        const signature = await crypto.signWithPrivateKey(this.tbsView, privateKey, parameters);\n        this.signatureValue = new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ valueHex: signature });\n    }\n    async verify(issuerCertificate, crypto = getCrypto(true)) {\n        let subjectPublicKeyInfo;\n        if (issuerCertificate) {\n            subjectPublicKeyInfo = issuerCertificate.subjectPublicKeyInfo;\n        }\n        else if (this.issuer.isEqual(this.subject)) {\n            subjectPublicKeyInfo = this.subjectPublicKeyInfo;\n        }\n        if (!(subjectPublicKeyInfo instanceof PublicKeyInfo)) {\n            throw new Error(\"Please provide issuer certificate as a parameter\");\n        }\n        return crypto.verifyWithPublicKey(this.tbsView, this.signatureValue, subjectPublicKeyInfo, this.signatureAlgorithm);\n    }\n}\nCertificate.CLASS_NAME = \"Certificate\";\nfunction checkCA(cert, signerCert = null) {\n    if (signerCert && cert.issuer.isEqual(signerCert.issuer) && cert.serialNumber.isEqual(signerCert.serialNumber)) {\n        return null;\n    }\n    let isCA = false;\n    if (cert.extensions) {\n        for (const extension of cert.extensions) {\n            if (extension.extnID === id_BasicConstraints && extension.parsedValue instanceof BasicConstraints) {\n                if (extension.parsedValue.cA) {\n                    isCA = true;\n                    break;\n                }\n            }\n        }\n    }\n    if (isCA) {\n        return cert;\n    }\n    return null;\n}\n\nconst CERT_ID$1 = \"certId\";\nconst CERT_VALUE = \"certValue\";\nconst PARSED_VALUE$4 = \"parsedValue\";\nconst CLEAR_PROPS$P = [\n    CERT_ID$1,\n    CERT_VALUE\n];\nclass CertBag extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.certId = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERT_ID$1, CertBag.defaultValues(CERT_ID$1));\n        this.certValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERT_VALUE, CertBag.defaultValues(CERT_VALUE));\n        if (PARSED_VALUE$4 in parameters) {\n            this.parsedValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PARSED_VALUE$4, CertBag.defaultValues(PARSED_VALUE$4));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CERT_ID$1:\n                return EMPTY_STRING;\n            case CERT_VALUE:\n                return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any());\n            case PARSED_VALUE$4:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case CERT_ID$1:\n                return (memberValue === EMPTY_STRING);\n            case CERT_VALUE:\n                return (memberValue instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any);\n            case PARSED_VALUE$4:\n                return ((memberValue instanceof Object) && (Object.keys(memberValue).length === 0));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.id || \"id\") }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.value || \"value\") })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$P);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CertBag.schema({\n            names: {\n                id: CERT_ID$1,\n                value: CERT_VALUE\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.certId = asn1.result.certId.valueBlock.toString();\n        this.certValue = asn1.result.certValue;\n        const certValueHex = this.certValue.valueBlock.valueHexView;\n        switch (this.certId) {\n            case id_CertBag_X509Certificate:\n                {\n                    try {\n                        this.parsedValue = Certificate.fromBER(certValueHex);\n                    }\n                    catch (ex) {\n                        AttributeCertificateV2.fromBER(certValueHex);\n                    }\n                }\n                break;\n            case id_CertBag_AttributeCertificate:\n                {\n                    this.parsedValue = AttributeCertificateV2.fromBER(certValueHex);\n                }\n                break;\n            case id_CertBag_SDSICertificate:\n            default:\n                throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`);\n        }\n    }\n    toSchema() {\n        if (PARSED_VALUE$4 in this) {\n            if (\"acinfo\" in this.parsedValue) {\n                this.certId = id_CertBag_AttributeCertificate;\n            }\n            else {\n                this.certId = id_CertBag_X509Certificate;\n            }\n            this.certValue = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: this.parsedValue.toSchema().toBER(false) });\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.certId }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [((\"toSchema\" in this.certValue) ? this.certValue.toSchema() : this.certValue)]\n                })\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            certId: this.certId,\n            certValue: this.certValue.toJSON()\n        };\n    }\n}\nCertBag.CLASS_NAME = \"CertBag\";\n\nconst USER_CERTIFICATE = \"userCertificate\";\nconst REVOCATION_DATE = \"revocationDate\";\nconst CRL_ENTRY_EXTENSIONS = \"crlEntryExtensions\";\nconst CLEAR_PROPS$O = [\n    USER_CERTIFICATE,\n    REVOCATION_DATE,\n    CRL_ENTRY_EXTENSIONS\n];\nclass RevokedCertificate extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.userCertificate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, USER_CERTIFICATE, RevokedCertificate.defaultValues(USER_CERTIFICATE));\n        this.revocationDate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REVOCATION_DATE, RevokedCertificate.defaultValues(REVOCATION_DATE));\n        if (CRL_ENTRY_EXTENSIONS in parameters) {\n            this.crlEntryExtensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRL_ENTRY_EXTENSIONS, RevokedCertificate.defaultValues(CRL_ENTRY_EXTENSIONS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case USER_CERTIFICATE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case REVOCATION_DATE:\n                return new Time();\n            case CRL_ENTRY_EXTENSIONS:\n                return new Extensions();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.userCertificate || USER_CERTIFICATE) }),\n                Time.schema({\n                    names: {\n                        utcTimeName: (names.revocationDate || REVOCATION_DATE),\n                        generalTimeName: (names.revocationDate || REVOCATION_DATE)\n                    }\n                }),\n                Extensions.schema({\n                    names: {\n                        blockName: (names.crlEntryExtensions || CRL_ENTRY_EXTENSIONS)\n                    }\n                }, true)\n            ]\n        });\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$O);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RevokedCertificate.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.userCertificate = asn1.result.userCertificate;\n        this.revocationDate = new Time({ schema: asn1.result.revocationDate });\n        if (CRL_ENTRY_EXTENSIONS in asn1.result) {\n            this.crlEntryExtensions = new Extensions({ schema: asn1.result.crlEntryExtensions });\n        }\n    }\n    toSchema() {\n        const outputArray = [\n            this.userCertificate,\n            this.revocationDate.toSchema()\n        ];\n        if (this.crlEntryExtensions) {\n            outputArray.push(this.crlEntryExtensions.toSchema());\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            userCertificate: this.userCertificate.toJSON(),\n            revocationDate: this.revocationDate.toJSON(),\n        };\n        if (this.crlEntryExtensions) {\n            res.crlEntryExtensions = this.crlEntryExtensions.toJSON();\n        }\n        return res;\n    }\n}\nRevokedCertificate.CLASS_NAME = \"RevokedCertificate\";\n\nconst TBS$3 = \"tbs\";\nconst VERSION$e = \"version\";\nconst SIGNATURE$3 = \"signature\";\nconst ISSUER$1 = \"issuer\";\nconst THIS_UPDATE$1 = \"thisUpdate\";\nconst NEXT_UPDATE$1 = \"nextUpdate\";\nconst REVOKED_CERTIFICATES = \"revokedCertificates\";\nconst CRL_EXTENSIONS = \"crlExtensions\";\nconst SIGNATURE_ALGORITHM$4 = \"signatureAlgorithm\";\nconst SIGNATURE_VALUE$1 = \"signatureValue\";\nconst TBS_CERT_LIST = \"tbsCertList\";\nconst TBS_CERT_LIST_VERSION = `${TBS_CERT_LIST}.version`;\nconst TBS_CERT_LIST_SIGNATURE = `${TBS_CERT_LIST}.signature`;\nconst TBS_CERT_LIST_ISSUER = `${TBS_CERT_LIST}.issuer`;\nconst TBS_CERT_LIST_THIS_UPDATE = `${TBS_CERT_LIST}.thisUpdate`;\nconst TBS_CERT_LIST_NEXT_UPDATE = `${TBS_CERT_LIST}.nextUpdate`;\nconst TBS_CERT_LIST_REVOKED_CERTIFICATES = `${TBS_CERT_LIST}.revokedCertificates`;\nconst TBS_CERT_LIST_EXTENSIONS = `${TBS_CERT_LIST}.extensions`;\nconst CLEAR_PROPS$N = [\n    TBS_CERT_LIST,\n    TBS_CERT_LIST_VERSION,\n    TBS_CERT_LIST_SIGNATURE,\n    TBS_CERT_LIST_ISSUER,\n    TBS_CERT_LIST_THIS_UPDATE,\n    TBS_CERT_LIST_NEXT_UPDATE,\n    TBS_CERT_LIST_REVOKED_CERTIFICATES,\n    TBS_CERT_LIST_EXTENSIONS,\n    SIGNATURE_ALGORITHM$4,\n    SIGNATURE_VALUE$1\n];\nfunction tbsCertList(parameters = {}) {\n    const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n    return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n        name: (names.blockName || TBS_CERT_LIST),\n        value: [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                optional: true,\n                name: (names.tbsCertListVersion || TBS_CERT_LIST_VERSION),\n                value: 2\n            }),\n            AlgorithmIdentifier.schema(names.signature || {\n                names: {\n                    blockName: TBS_CERT_LIST_SIGNATURE\n                }\n            }),\n            RelativeDistinguishedNames.schema(names.issuer || {\n                names: {\n                    blockName: TBS_CERT_LIST_ISSUER\n                }\n            }),\n            Time.schema(names.tbsCertListThisUpdate || {\n                names: {\n                    utcTimeName: TBS_CERT_LIST_THIS_UPDATE,\n                    generalTimeName: TBS_CERT_LIST_THIS_UPDATE\n                }\n            }),\n            Time.schema(names.tbsCertListNextUpdate || {\n                names: {\n                    utcTimeName: TBS_CERT_LIST_NEXT_UPDATE,\n                    generalTimeName: TBS_CERT_LIST_NEXT_UPDATE\n                }\n            }, true),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                optional: true,\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                        name: (names.tbsCertListRevokedCertificates || TBS_CERT_LIST_REVOKED_CERTIFICATES),\n                        value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                            value: [\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer(),\n                                Time.schema(),\n                                Extensions.schema({}, true)\n                            ]\n                        })\n                    })\n                ]\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [Extensions.schema(names.crlExtensions || {\n                        names: {\n                            blockName: TBS_CERT_LIST_EXTENSIONS\n                        }\n                    })]\n            })\n        ]\n    }));\n}\nconst WELL_KNOWN_EXTENSIONS = [\n    id_AuthorityKeyIdentifier,\n    id_IssuerAltName,\n    id_CRLNumber,\n    id_BaseCRLNumber,\n    id_IssuingDistributionPoint,\n    id_FreshestCRL,\n    id_AuthorityInfoAccess,\n    id_CRLReason,\n    id_InvalidityDate,\n    id_CertificateIssuer,\n];\nclass CertificateRevocationList extends PkiObject {\n    get tbs() {\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(this.tbsView);\n    }\n    set tbs(value) {\n        this.tbsView = new Uint8Array(value);\n    }\n    constructor(parameters = {}) {\n        super();\n        this.tbsView = new Uint8Array(pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TBS$3, CertificateRevocationList.defaultValues(TBS$3)));\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$e, CertificateRevocationList.defaultValues(VERSION$e));\n        this.signature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE$3, CertificateRevocationList.defaultValues(SIGNATURE$3));\n        this.issuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER$1, CertificateRevocationList.defaultValues(ISSUER$1));\n        this.thisUpdate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, THIS_UPDATE$1, CertificateRevocationList.defaultValues(THIS_UPDATE$1));\n        if (NEXT_UPDATE$1 in parameters) {\n            this.nextUpdate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NEXT_UPDATE$1, CertificateRevocationList.defaultValues(NEXT_UPDATE$1));\n        }\n        if (REVOKED_CERTIFICATES in parameters) {\n            this.revokedCertificates = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REVOKED_CERTIFICATES, CertificateRevocationList.defaultValues(REVOKED_CERTIFICATES));\n        }\n        if (CRL_EXTENSIONS in parameters) {\n            this.crlExtensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRL_EXTENSIONS, CertificateRevocationList.defaultValues(CRL_EXTENSIONS));\n        }\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM$4, CertificateRevocationList.defaultValues(SIGNATURE_ALGORITHM$4));\n        this.signatureValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_VALUE$1, CertificateRevocationList.defaultValues(SIGNATURE_VALUE$1));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TBS$3:\n                return EMPTY_BUFFER;\n            case VERSION$e:\n                return 0;\n            case SIGNATURE$3:\n                return new AlgorithmIdentifier();\n            case ISSUER$1:\n                return new RelativeDistinguishedNames();\n            case THIS_UPDATE$1:\n                return new Time();\n            case NEXT_UPDATE$1:\n                return new Time();\n            case REVOKED_CERTIFICATES:\n                return [];\n            case CRL_EXTENSIONS:\n                return new Extensions();\n            case SIGNATURE_ALGORITHM$4:\n                return new AlgorithmIdentifier();\n            case SIGNATURE_VALUE$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || \"CertificateList\"),\n            value: [\n                tbsCertList(parameters),\n                AlgorithmIdentifier.schema(names.signatureAlgorithm || {\n                    names: {\n                        blockName: SIGNATURE_ALGORITHM$4\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.signatureValue || SIGNATURE_VALUE$1) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$N);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CertificateRevocationList.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.tbsView = asn1.result.tbsCertList.valueBeforeDecodeView;\n        if (TBS_CERT_LIST_VERSION in asn1.result) {\n            this.version = asn1.result[TBS_CERT_LIST_VERSION].valueBlock.valueDec;\n        }\n        this.signature = new AlgorithmIdentifier({ schema: asn1.result[TBS_CERT_LIST_SIGNATURE] });\n        this.issuer = new RelativeDistinguishedNames({ schema: asn1.result[TBS_CERT_LIST_ISSUER] });\n        this.thisUpdate = new Time({ schema: asn1.result[TBS_CERT_LIST_THIS_UPDATE] });\n        if (TBS_CERT_LIST_NEXT_UPDATE in asn1.result) {\n            this.nextUpdate = new Time({ schema: asn1.result[TBS_CERT_LIST_NEXT_UPDATE] });\n        }\n        if (TBS_CERT_LIST_REVOKED_CERTIFICATES in asn1.result) {\n            this.revokedCertificates = Array.from(asn1.result[TBS_CERT_LIST_REVOKED_CERTIFICATES], element => new RevokedCertificate({ schema: element }));\n        }\n        if (TBS_CERT_LIST_EXTENSIONS in asn1.result) {\n            this.crlExtensions = new Extensions({ schema: asn1.result[TBS_CERT_LIST_EXTENSIONS] });\n        }\n        this.signatureAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.signatureAlgorithm });\n        this.signatureValue = asn1.result.signatureValue;\n    }\n    encodeTBS() {\n        const outputArray = [];\n        if (this.version !== CertificateRevocationList.defaultValues(VERSION$e)) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        }\n        outputArray.push(this.signature.toSchema());\n        outputArray.push(this.issuer.toSchema());\n        outputArray.push(this.thisUpdate.toSchema());\n        if (this.nextUpdate) {\n            outputArray.push(this.nextUpdate.toSchema());\n        }\n        if (this.revokedCertificates) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: Array.from(this.revokedCertificates, o => o.toSchema())\n            }));\n        }\n        if (this.crlExtensions) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    this.crlExtensions.toSchema()\n                ]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toSchema(encodeFlag = false) {\n        let tbsSchema;\n        if (!encodeFlag) {\n            if (!this.tbsView.byteLength) {\n                return CertificateRevocationList.schema();\n            }\n            const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.tbsView);\n            AsnError.assert(asn1, \"TBS Certificate Revocation List\");\n            tbsSchema = asn1.result;\n        }\n        else {\n            tbsSchema = this.encodeTBS();\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                tbsSchema,\n                this.signatureAlgorithm.toSchema(),\n                this.signatureValue\n            ]\n        }));\n    }\n    toJSON() {\n        const res = {\n            tbs: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToHex(this.tbsView),\n            version: this.version,\n            signature: this.signature.toJSON(),\n            issuer: this.issuer.toJSON(),\n            thisUpdate: this.thisUpdate.toJSON(),\n            signatureAlgorithm: this.signatureAlgorithm.toJSON(),\n            signatureValue: this.signatureValue.toJSON()\n        };\n        if (this.version !== CertificateRevocationList.defaultValues(VERSION$e))\n            res.version = this.version;\n        if (this.nextUpdate) {\n            res.nextUpdate = this.nextUpdate.toJSON();\n        }\n        if (this.revokedCertificates) {\n            res.revokedCertificates = Array.from(this.revokedCertificates, o => o.toJSON());\n        }\n        if (this.crlExtensions) {\n            res.crlExtensions = this.crlExtensions.toJSON();\n        }\n        return res;\n    }\n    isCertificateRevoked(certificate) {\n        if (!this.issuer.isEqual(certificate.issuer)) {\n            return false;\n        }\n        if (!this.revokedCertificates) {\n            return false;\n        }\n        for (const revokedCertificate of this.revokedCertificates) {\n            if (revokedCertificate.userCertificate.isEqual(certificate.serialNumber)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    async sign(privateKey, hashAlgorithm = \"SHA-1\", crypto = getCrypto(true)) {\n        if (!privateKey) {\n            throw new Error(\"Need to provide a private key for signing\");\n        }\n        const signatureParameters = await crypto.getSignatureParameters(privateKey, hashAlgorithm);\n        const { parameters } = signatureParameters;\n        this.signature = signatureParameters.signatureAlgorithm;\n        this.signatureAlgorithm = signatureParameters.signatureAlgorithm;\n        this.tbsView = new Uint8Array(this.encodeTBS().toBER());\n        const signature = await crypto.signWithPrivateKey(this.tbsView, privateKey, parameters);\n        this.signatureValue = new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ valueHex: signature });\n    }\n    async verify(parameters = {}, crypto = getCrypto(true)) {\n        let subjectPublicKeyInfo;\n        if (parameters.issuerCertificate) {\n            subjectPublicKeyInfo = parameters.issuerCertificate.subjectPublicKeyInfo;\n            if (!this.issuer.isEqual(parameters.issuerCertificate.subject)) {\n                return false;\n            }\n        }\n        if (parameters.publicKeyInfo) {\n            subjectPublicKeyInfo = parameters.publicKeyInfo;\n        }\n        if (!subjectPublicKeyInfo) {\n            throw new Error(\"Issuer's certificate must be provided as an input parameter\");\n        }\n        if (this.crlExtensions) {\n            for (const extension of this.crlExtensions.extensions) {\n                if (extension.critical) {\n                    if (!WELL_KNOWN_EXTENSIONS.includes(extension.extnID))\n                        return false;\n                }\n            }\n        }\n        return crypto.verifyWithPublicKey(this.tbsView, this.signatureValue, subjectPublicKeyInfo, this.signatureAlgorithm);\n    }\n}\nCertificateRevocationList.CLASS_NAME = \"CertificateRevocationList\";\n\nconst CRL_ID = \"crlId\";\nconst CRL_VALUE = \"crlValue\";\nconst PARSED_VALUE$3 = \"parsedValue\";\nconst CLEAR_PROPS$M = [\n    CRL_ID,\n    CRL_VALUE,\n];\nclass CRLBag extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.crlId = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRL_ID, CRLBag.defaultValues(CRL_ID));\n        this.crlValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRL_VALUE, CRLBag.defaultValues(CRL_VALUE));\n        if (PARSED_VALUE$3 in parameters) {\n            this.parsedValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PARSED_VALUE$3, CRLBag.defaultValues(PARSED_VALUE$3));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CRL_ID:\n                return EMPTY_STRING;\n            case CRL_VALUE:\n                return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any());\n            case PARSED_VALUE$3:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case CRL_ID:\n                return (memberValue === EMPTY_STRING);\n            case CRL_VALUE:\n                return (memberValue instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any);\n            case PARSED_VALUE$3:\n                return ((memberValue instanceof Object) && (Object.keys(memberValue).length === 0));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.id || \"id\") }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.value || \"value\") })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$M);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CRLBag.schema({\n            names: {\n                id: CRL_ID,\n                value: CRL_VALUE\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.crlId = asn1.result.crlId.valueBlock.toString();\n        this.crlValue = asn1.result.crlValue;\n        switch (this.crlId) {\n            case id_CRLBag_X509CRL:\n                {\n                    this.parsedValue = CertificateRevocationList.fromBER(this.certValue.valueBlock.valueHex);\n                }\n                break;\n            default:\n                throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`);\n        }\n    }\n    toSchema() {\n        if (this.parsedValue) {\n            this.crlId = id_CRLBag_X509CRL;\n            this.crlValue = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: this.parsedValue.toSchema().toBER(false) });\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.crlId }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [this.crlValue.toSchema()]\n                })\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            crlId: this.crlId,\n            crlValue: this.crlValue.toJSON()\n        };\n    }\n}\nCRLBag.CLASS_NAME = \"CRLBag\";\n\nconst VERSION$d = \"version\";\nconst ENCRYPTED_CONTENT_INFO$1 = \"encryptedContentInfo\";\nconst UNPROTECTED_ATTRS$1 = \"unprotectedAttrs\";\nconst CLEAR_PROPS$L = [\n    VERSION$d,\n    ENCRYPTED_CONTENT_INFO$1,\n    UNPROTECTED_ATTRS$1,\n];\nclass EncryptedData extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$d, EncryptedData.defaultValues(VERSION$d));\n        this.encryptedContentInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTED_CONTENT_INFO$1, EncryptedData.defaultValues(ENCRYPTED_CONTENT_INFO$1));\n        if (UNPROTECTED_ATTRS$1 in parameters) {\n            this.unprotectedAttrs = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, UNPROTECTED_ATTRS$1, EncryptedData.defaultValues(UNPROTECTED_ATTRS$1));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$d:\n                return 0;\n            case ENCRYPTED_CONTENT_INFO$1:\n                return new EncryptedContentInfo();\n            case UNPROTECTED_ATTRS$1:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$d:\n                return (memberValue === 0);\n            case ENCRYPTED_CONTENT_INFO$1:\n                return ((EncryptedContentInfo.compareWithDefault(\"contentType\", memberValue.contentType)) &&\n                    (EncryptedContentInfo.compareWithDefault(\"contentEncryptionAlgorithm\", memberValue.contentEncryptionAlgorithm)) &&\n                    (EncryptedContentInfo.compareWithDefault(\"encryptedContent\", memberValue.encryptedContent)));\n            case UNPROTECTED_ATTRS$1:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                EncryptedContentInfo.schema(names.encryptedContentInfo || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.unprotectedAttrs || EMPTY_STRING),\n                            value: Attribute.schema()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$L);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, EncryptedData.schema({\n            names: {\n                version: VERSION$d,\n                encryptedContentInfo: {\n                    names: {\n                        blockName: ENCRYPTED_CONTENT_INFO$1\n                    }\n                },\n                unprotectedAttrs: UNPROTECTED_ATTRS$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        this.encryptedContentInfo = new EncryptedContentInfo({ schema: asn1.result.encryptedContentInfo });\n        if (UNPROTECTED_ATTRS$1 in asn1.result)\n            this.unprotectedAttrs = Array.from(asn1.result.unprotectedAttrs, element => new Attribute({ schema: element }));\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        outputArray.push(this.encryptedContentInfo.toSchema());\n        if (this.unprotectedAttrs) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: Array.from(this.unprotectedAttrs, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            version: this.version,\n            encryptedContentInfo: this.encryptedContentInfo.toJSON()\n        };\n        if (this.unprotectedAttrs)\n            res.unprotectedAttrs = Array.from(this.unprotectedAttrs, o => o.toJSON());\n        return res;\n    }\n    async encrypt(parameters, crypto = getCrypto(true)) {\n        ArgumentError.assert(parameters, \"parameters\", \"object\");\n        const encryptParams = {\n            ...parameters,\n            contentType: \"1.2.840.113549.1.7.1\",\n        };\n        this.encryptedContentInfo = await crypto.encryptEncryptedContentInfo(encryptParams);\n    }\n    async decrypt(parameters, crypto = getCrypto(true)) {\n        ArgumentError.assert(parameters, \"parameters\", \"object\");\n        const decryptParams = {\n            ...parameters,\n            encryptedContentInfo: this.encryptedContentInfo,\n        };\n        return crypto.decryptEncryptedContentInfo(decryptParams);\n    }\n}\nEncryptedData.CLASS_NAME = \"EncryptedData\";\n\nconst ENCRYPTION_ALGORITHM = \"encryptionAlgorithm\";\nconst ENCRYPTED_DATA = \"encryptedData\";\nconst PARSED_VALUE$2 = \"parsedValue\";\nconst CLEAR_PROPS$K = [\n    ENCRYPTION_ALGORITHM,\n    ENCRYPTED_DATA,\n];\nclass PKCS8ShroudedKeyBag extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.encryptionAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTION_ALGORITHM, PKCS8ShroudedKeyBag.defaultValues(ENCRYPTION_ALGORITHM));\n        this.encryptedData = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTED_DATA, PKCS8ShroudedKeyBag.defaultValues(ENCRYPTED_DATA));\n        if (PARSED_VALUE$2 in parameters) {\n            this.parsedValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PARSED_VALUE$2, PKCS8ShroudedKeyBag.defaultValues(PARSED_VALUE$2));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ENCRYPTION_ALGORITHM:\n                return (new AlgorithmIdentifier());\n            case ENCRYPTED_DATA:\n                return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString());\n            case PARSED_VALUE$2:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case ENCRYPTION_ALGORITHM:\n                return ((AlgorithmIdentifier.compareWithDefault(\"algorithmId\", memberValue.algorithmId)) &&\n                    ((\"algorithmParams\" in memberValue) === false));\n            case ENCRYPTED_DATA:\n                return (memberValue.isEqual(PKCS8ShroudedKeyBag.defaultValues(memberName)));\n            case PARSED_VALUE$2:\n                return ((memberValue instanceof Object) && (Object.keys(memberValue).length === 0));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.encryptionAlgorithm || {\n                    names: {\n                        blockName: ENCRYPTION_ALGORITHM\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.encryptedData || ENCRYPTED_DATA) }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({\n                            idBlock: {\n                                isConstructed: true\n                            },\n                            name: (names.encryptedData || ENCRYPTED_DATA)\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$K);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PKCS8ShroudedKeyBag.schema({\n            names: {\n                encryptionAlgorithm: {\n                    names: {\n                        blockName: ENCRYPTION_ALGORITHM\n                    }\n                },\n                encryptedData: ENCRYPTED_DATA\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.encryptionAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.encryptionAlgorithm });\n        this.encryptedData = asn1.result.encryptedData;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.encryptionAlgorithm.toSchema(),\n                this.encryptedData\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            encryptionAlgorithm: this.encryptionAlgorithm.toJSON(),\n            encryptedData: this.encryptedData.toJSON(),\n        };\n    }\n    async parseInternalValues(parameters, crypto = getCrypto(true)) {\n        const cmsEncrypted = new EncryptedData({\n            encryptedContentInfo: new EncryptedContentInfo({\n                contentEncryptionAlgorithm: this.encryptionAlgorithm,\n                encryptedContent: this.encryptedData\n            })\n        });\n        const decryptedData = await cmsEncrypted.decrypt(parameters, crypto);\n        this.parsedValue = PrivateKeyInfo.fromBER(decryptedData);\n    }\n    async makeInternalValues(parameters, crypto = getCrypto(true)) {\n        if (!this.parsedValue) {\n            throw new Error(\"Please initialize \\\"parsedValue\\\" first\");\n        }\n        const cmsEncrypted = new EncryptedData();\n        const encryptParams = {\n            ...parameters,\n            contentToEncrypt: this.parsedValue.toSchema().toBER(false),\n        };\n        await cmsEncrypted.encrypt(encryptParams, crypto);\n        if (!cmsEncrypted.encryptedContentInfo.encryptedContent) {\n            throw new Error(\"The filed `encryptedContent` in EncryptedContentInfo is empty\");\n        }\n        this.encryptionAlgorithm = cmsEncrypted.encryptedContentInfo.contentEncryptionAlgorithm;\n        this.encryptedData = cmsEncrypted.encryptedContentInfo.encryptedContent;\n    }\n}\nPKCS8ShroudedKeyBag.CLASS_NAME = \"PKCS8ShroudedKeyBag\";\n\nconst SECRET_TYPE_ID = \"secretTypeId\";\nconst SECRET_VALUE = \"secretValue\";\nconst CLEAR_PROPS$J = [\n    SECRET_TYPE_ID,\n    SECRET_VALUE,\n];\nclass SecretBag extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.secretTypeId = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SECRET_TYPE_ID, SecretBag.defaultValues(SECRET_TYPE_ID));\n        this.secretValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SECRET_VALUE, SecretBag.defaultValues(SECRET_VALUE));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case SECRET_TYPE_ID:\n                return EMPTY_STRING;\n            case SECRET_VALUE:\n                return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any());\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case SECRET_TYPE_ID:\n                return (memberValue === EMPTY_STRING);\n            case SECRET_VALUE:\n                return (memberValue instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.id || \"id\") }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.value || \"value\") })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$J);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, SecretBag.schema({\n            names: {\n                id: SECRET_TYPE_ID,\n                value: SECRET_VALUE\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.secretTypeId = asn1.result.secretTypeId.valueBlock.toString();\n        this.secretValue = asn1.result.secretValue;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.secretTypeId }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [this.secretValue.toSchema()]\n                })\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            secretTypeId: this.secretTypeId,\n            secretValue: this.secretValue.toJSON()\n        };\n    }\n}\nSecretBag.CLASS_NAME = \"SecretBag\";\n\nclass SafeBagValueFactory {\n    static getItems() {\n        if (!this.items) {\n            this.items = {};\n            SafeBagValueFactory.register(\"1.2.840.113549.1.12.10.1.1\", PrivateKeyInfo);\n            SafeBagValueFactory.register(\"1.2.840.113549.1.12.10.1.2\", PKCS8ShroudedKeyBag);\n            SafeBagValueFactory.register(\"1.2.840.113549.1.12.10.1.3\", CertBag);\n            SafeBagValueFactory.register(\"1.2.840.113549.1.12.10.1.4\", CRLBag);\n            SafeBagValueFactory.register(\"1.2.840.113549.1.12.10.1.5\", SecretBag);\n            SafeBagValueFactory.register(\"1.2.840.113549.1.12.10.1.6\", SafeContents);\n        }\n        return this.items;\n    }\n    static register(id, type) {\n        this.getItems()[id] = type;\n    }\n    static find(id) {\n        return this.getItems()[id] || null;\n    }\n}\n\nconst BAG_ID = \"bagId\";\nconst BAG_VALUE = \"bagValue\";\nconst BAG_ATTRIBUTES = \"bagAttributes\";\nconst CLEAR_PROPS$I = [\n    BAG_ID,\n    BAG_VALUE,\n    BAG_ATTRIBUTES\n];\nclass SafeBag extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.bagId = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, BAG_ID, SafeBag.defaultValues(BAG_ID));\n        this.bagValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, BAG_VALUE, SafeBag.defaultValues(BAG_VALUE));\n        if (BAG_ATTRIBUTES in parameters) {\n            this.bagAttributes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, BAG_ATTRIBUTES, SafeBag.defaultValues(BAG_ATTRIBUTES));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case BAG_ID:\n                return EMPTY_STRING;\n            case BAG_VALUE:\n                return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any());\n            case BAG_ATTRIBUTES:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case BAG_ID:\n                return (memberValue === EMPTY_STRING);\n            case BAG_VALUE:\n                return (memberValue instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any);\n            case BAG_ATTRIBUTES:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.bagId || BAG_ID) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.bagValue || BAG_VALUE) })]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    optional: true,\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.bagAttributes || BAG_ATTRIBUTES),\n                            value: Attribute.schema()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$I);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, SafeBag.schema({\n            names: {\n                bagId: BAG_ID,\n                bagValue: BAG_VALUE,\n                bagAttributes: BAG_ATTRIBUTES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.bagId = asn1.result.bagId.valueBlock.toString();\n        const bagType = SafeBagValueFactory.find(this.bagId);\n        if (!bagType) {\n            throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);\n        }\n        this.bagValue = new bagType({ schema: asn1.result.bagValue });\n        if (BAG_ATTRIBUTES in asn1.result) {\n            this.bagAttributes = Array.from(asn1.result.bagAttributes, element => new Attribute({ schema: element }));\n        }\n    }\n    toSchema() {\n        const outputArray = [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.bagId }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [this.bagValue.toSchema()]\n            })\n        ];\n        if (this.bagAttributes) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                value: Array.from(this.bagAttributes, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const output = {\n            bagId: this.bagId,\n            bagValue: this.bagValue.toJSON()\n        };\n        if (this.bagAttributes) {\n            output.bagAttributes = Array.from(this.bagAttributes, o => o.toJSON());\n        }\n        return output;\n    }\n}\nSafeBag.CLASS_NAME = \"SafeBag\";\n\nconst SAFE_BUGS = \"safeBags\";\nclass SafeContents extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.safeBags = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SAFE_BUGS, SafeContents.defaultValues(SAFE_BUGS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case SAFE_BUGS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case SAFE_BUGS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.safeBags || EMPTY_STRING),\n                    value: SafeBag.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            SAFE_BUGS\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, SafeContents.schema({\n            names: {\n                safeBags: SAFE_BUGS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.safeBags = Array.from(asn1.result.safeBags, element => new SafeBag({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.safeBags, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            safeBags: Array.from(this.safeBags, o => o.toJSON())\n        };\n    }\n}\nSafeContents.CLASS_NAME = \"SafeContents\";\n\nconst OTHER_CERT_FORMAT = \"otherCertFormat\";\nconst OTHER_CERT = \"otherCert\";\nconst CLEAR_PROPS$H = [\n    OTHER_CERT_FORMAT,\n    OTHER_CERT\n];\nclass OtherCertificateFormat extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.otherCertFormat = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER_CERT_FORMAT, OtherCertificateFormat.defaultValues(OTHER_CERT_FORMAT));\n        this.otherCert = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER_CERT, OtherCertificateFormat.defaultValues(OTHER_CERT));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case OTHER_CERT_FORMAT:\n                return EMPTY_STRING;\n            case OTHER_CERT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.otherCertFormat || OTHER_CERT_FORMAT) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.otherCert || OTHER_CERT) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$H);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OtherCertificateFormat.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.otherCertFormat = asn1.result.otherCertFormat.valueBlock.toString();\n        this.otherCert = asn1.result.otherCert;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.otherCertFormat }),\n                this.otherCert\n            ]\n        }));\n    }\n    toJSON() {\n        const res = {\n            otherCertFormat: this.otherCertFormat\n        };\n        if (!(this.otherCert instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any)) {\n            res.otherCert = this.otherCert.toJSON();\n        }\n        return res;\n    }\n}\n\nconst CERTIFICATES$1 = \"certificates\";\nconst CLEAR_PROPS$G = [\n    CERTIFICATES$1,\n];\nclass CertificateSet extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.certificates = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERTIFICATES$1, CertificateSet.defaultValues(CERTIFICATES$1));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CERTIFICATES$1:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.certificates || CERTIFICATES$1),\n                    value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                        value: [\n                            Certificate.schema(),\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: 0\n                                },\n                                value: [\n                                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any()\n                                ]\n                            }),\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: 1\n                                },\n                                value: [\n                                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence\n                                ]\n                            }),\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: 2\n                                },\n                                value: AttributeCertificateV2.schema().valueBlock.value\n                            }),\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: 3\n                                },\n                                value: OtherCertificateFormat.schema().valueBlock.value\n                            })\n                        ]\n                    })\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$G);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CertificateSet.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.certificates = Array.from(asn1.result.certificates || [], (element) => {\n            const initialTagNumber = element.idBlock.tagNumber;\n            if (element.idBlock.tagClass === 1)\n                return new Certificate({ schema: element });\n            const elementSequence = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: element.valueBlock.value\n            });\n            switch (initialTagNumber) {\n                case 1:\n                    if (elementSequence.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec === 1) {\n                        return new AttributeCertificateV2({ schema: elementSequence });\n                    }\n                    else {\n                        return new AttributeCertificateV1({ schema: elementSequence });\n                    }\n                case 2:\n                    return new AttributeCertificateV2({ schema: elementSequence });\n                case 3:\n                    return new OtherCertificateFormat({ schema: elementSequence });\n            }\n            return element;\n        });\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n            value: Array.from(this.certificates, element => {\n                switch (true) {\n                    case (element instanceof Certificate):\n                        return element.toSchema();\n                    case (element instanceof AttributeCertificateV1):\n                        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 1\n                            },\n                            value: element.toSchema().valueBlock.value\n                        });\n                    case (element instanceof AttributeCertificateV2):\n                        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 2\n                            },\n                            value: element.toSchema().valueBlock.value\n                        });\n                    case (element instanceof OtherCertificateFormat):\n                        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 3\n                            },\n                            value: element.toSchema().valueBlock.value\n                        });\n                }\n                return element.toSchema();\n            })\n        }));\n    }\n    toJSON() {\n        return {\n            certificates: Array.from(this.certificates, o => o.toJSON())\n        };\n    }\n}\nCertificateSet.CLASS_NAME = \"CertificateSet\";\n\nconst OTHER_REV_INFO_FORMAT = \"otherRevInfoFormat\";\nconst OTHER_REV_INFO = \"otherRevInfo\";\nconst CLEAR_PROPS$F = [\n    OTHER_REV_INFO_FORMAT,\n    OTHER_REV_INFO\n];\nclass OtherRevocationInfoFormat extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.otherRevInfoFormat = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER_REV_INFO_FORMAT, OtherRevocationInfoFormat.defaultValues(OTHER_REV_INFO_FORMAT));\n        this.otherRevInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER_REV_INFO, OtherRevocationInfoFormat.defaultValues(OTHER_REV_INFO));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case OTHER_REV_INFO_FORMAT:\n                return EMPTY_STRING;\n            case OTHER_REV_INFO:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.otherRevInfoFormat || OTHER_REV_INFO_FORMAT) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.otherRevInfo || OTHER_REV_INFO) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$F);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OtherRevocationInfoFormat.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.otherRevInfoFormat = asn1.result.otherRevInfoFormat.valueBlock.toString();\n        this.otherRevInfo = asn1.result.otherRevInfo;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.otherRevInfoFormat }),\n                this.otherRevInfo\n            ]\n        }));\n    }\n    toJSON() {\n        const res = {\n            otherRevInfoFormat: this.otherRevInfoFormat\n        };\n        if (!(this.otherRevInfo instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any)) {\n            res.otherRevInfo = this.otherRevInfo.toJSON();\n        }\n        return res;\n    }\n}\nOtherRevocationInfoFormat.CLASS_NAME = \"OtherRevocationInfoFormat\";\n\nconst CRLS$3 = \"crls\";\nconst OTHER_REVOCATION_INFOS = \"otherRevocationInfos\";\nconst CLEAR_PROPS$E = [\n    CRLS$3\n];\nclass RevocationInfoChoices extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.crls = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRLS$3, RevocationInfoChoices.defaultValues(CRLS$3));\n        this.otherRevocationInfos = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER_REVOCATION_INFOS, RevocationInfoChoices.defaultValues(OTHER_REVOCATION_INFOS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CRLS$3:\n                return [];\n            case OTHER_REVOCATION_INFOS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.crls || EMPTY_STRING),\n                    value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                        value: [\n                            CertificateRevocationList.schema(),\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: 1\n                                },\n                                value: [\n                                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier(),\n                                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any()\n                                ]\n                            })\n                        ]\n                    })\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$E);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RevocationInfoChoices.schema({\n            names: {\n                crls: CRLS$3\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (asn1.result.crls) {\n            for (const element of asn1.result.crls) {\n                if (element.idBlock.tagClass === 1)\n                    this.crls.push(new CertificateRevocationList({ schema: element }));\n                else\n                    this.otherRevocationInfos.push(new OtherRevocationInfoFormat({ schema: element }));\n            }\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(...Array.from(this.crls, o => o.toSchema()));\n        outputArray.push(...Array.from(this.otherRevocationInfos, element => {\n            const schema = element.toSchema();\n            schema.idBlock.tagClass = 3;\n            schema.idBlock.tagNumber = 1;\n            return schema;\n        }));\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        return {\n            crls: Array.from(this.crls, o => o.toJSON()),\n            otherRevocationInfos: Array.from(this.otherRevocationInfos, o => o.toJSON())\n        };\n    }\n}\nRevocationInfoChoices.CLASS_NAME = \"RevocationInfoChoices\";\n\nconst CERTS$3 = \"certs\";\nconst CRLS$2 = \"crls\";\nconst CLEAR_PROPS$D = [\n    CERTS$3,\n    CRLS$2,\n];\nclass OriginatorInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.crls = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRLS$2, OriginatorInfo.defaultValues(CRLS$2));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CERTS$3:\n                return new CertificateSet();\n            case CRLS$2:\n                return new RevocationInfoChoices();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case CERTS$3:\n                return (memberValue.certificates.length === 0);\n            case CRLS$2:\n                return ((memberValue.crls.length === 0) && (memberValue.otherRevocationInfos.length === 0));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.certs || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: CertificateSet.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.crls || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: RevocationInfoChoices.schema().valueBlock.value\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$D);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OriginatorInfo.schema({\n            names: {\n                certs: CERTS$3,\n                crls: CRLS$2\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (CERTS$3 in asn1.result) {\n            this.certs = new CertificateSet({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    value: asn1.result.certs.valueBlock.value\n                })\n            });\n        }\n        if (CRLS$2 in asn1.result) {\n            this.crls = new RevocationInfoChoices({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    value: asn1.result.crls.valueBlock.value\n                })\n            });\n        }\n    }\n    toSchema() {\n        const sequenceValue = [];\n        if (this.certs) {\n            sequenceValue.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: this.certs.toSchema().valueBlock.value\n            }));\n        }\n        if (this.crls) {\n            sequenceValue.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: this.crls.toSchema().valueBlock.value\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: sequenceValue\n        }));\n    }\n    toJSON() {\n        const res = {};\n        if (this.certs) {\n            res.certs = this.certs.toJSON();\n        }\n        if (this.crls) {\n            res.crls = this.crls.toJSON();\n        }\n        return res;\n    }\n}\nOriginatorInfo.CLASS_NAME = \"OriginatorInfo\";\n\nconst ISSUER = \"issuer\";\nconst SERIAL_NUMBER$2 = \"serialNumber\";\nconst CLEAR_PROPS$C = [\n    ISSUER,\n    SERIAL_NUMBER$2,\n];\nclass IssuerAndSerialNumber extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.issuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER, IssuerAndSerialNumber.defaultValues(ISSUER));\n        this.serialNumber = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SERIAL_NUMBER$2, IssuerAndSerialNumber.defaultValues(SERIAL_NUMBER$2));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ISSUER:\n                return new RelativeDistinguishedNames();\n            case SERIAL_NUMBER$2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                RelativeDistinguishedNames.schema(names.issuer || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.serialNumber || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$C);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, IssuerAndSerialNumber.schema({\n            names: {\n                issuer: {\n                    names: {\n                        blockName: ISSUER\n                    }\n                },\n                serialNumber: SERIAL_NUMBER$2\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.issuer = new RelativeDistinguishedNames({ schema: asn1.result.issuer });\n        this.serialNumber = asn1.result.serialNumber;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.issuer.toSchema(),\n                this.serialNumber\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            issuer: this.issuer.toJSON(),\n            serialNumber: this.serialNumber.toJSON(),\n        };\n    }\n}\nIssuerAndSerialNumber.CLASS_NAME = \"IssuerAndSerialNumber\";\n\nconst VARIANT$3 = \"variant\";\nconst VALUE$3 = \"value\";\nconst CLEAR_PROPS$B = [\n    \"blockName\"\n];\nclass RecipientIdentifier extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.variant = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VARIANT$3, RecipientIdentifier.defaultValues(VARIANT$3));\n        if (VALUE$3 in parameters) {\n            this.value = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUE$3, RecipientIdentifier.defaultValues(VALUE$3));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VARIANT$3:\n                return (-1);\n            case VALUE$3:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VARIANT$3:\n                return (memberValue === (-1));\n            case VALUE$3:\n                return (Object.keys(memberValue).length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n            value: [\n                IssuerAndSerialNumber.schema({\n                    names: {\n                        blockName: (names.blockName || EMPTY_STRING)\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$B);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RecipientIdentifier.schema({\n            names: {\n                blockName: \"blockName\"\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (asn1.result.blockName.idBlock.tagClass === 1) {\n            this.variant = 1;\n            this.value = new IssuerAndSerialNumber({ schema: asn1.result.blockName });\n        }\n        else {\n            this.variant = 2;\n            this.value = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: asn1.result.blockName.valueBlock.valueHex });\n        }\n    }\n    toSchema() {\n        switch (this.variant) {\n            case 1:\n                if (!(this.value instanceof IssuerAndSerialNumber)) {\n                    throw new Error(\"Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.\");\n                }\n                return this.value.toSchema();\n            case 2:\n                if (!(this.value instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString)) {\n                    throw new Error(\"Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.\");\n                }\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    valueHex: this.value.valueBlock.valueHexView\n                });\n            default:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n        }\n    }\n    toJSON() {\n        const res = {\n            variant: this.variant\n        };\n        if ((this.variant === 1 || this.variant === 2) && this.value) {\n            res.value = this.value.toJSON();\n        }\n        return res;\n    }\n}\nRecipientIdentifier.CLASS_NAME = \"RecipientIdentifier\";\n\nconst VERSION$c = \"version\";\nconst RID$1 = \"rid\";\nconst KEY_ENCRYPTION_ALGORITHM$3 = \"keyEncryptionAlgorithm\";\nconst ENCRYPTED_KEY$3 = \"encryptedKey\";\nconst RECIPIENT_CERTIFICATE$1 = \"recipientCertificate\";\nconst CLEAR_PROPS$A = [\n    VERSION$c,\n    RID$1,\n    KEY_ENCRYPTION_ALGORITHM$3,\n    ENCRYPTED_KEY$3,\n];\nclass KeyTransRecipientInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$c, KeyTransRecipientInfo.defaultValues(VERSION$c));\n        this.rid = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RID$1, KeyTransRecipientInfo.defaultValues(RID$1));\n        this.keyEncryptionAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_ENCRYPTION_ALGORITHM$3, KeyTransRecipientInfo.defaultValues(KEY_ENCRYPTION_ALGORITHM$3));\n        this.encryptedKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTED_KEY$3, KeyTransRecipientInfo.defaultValues(ENCRYPTED_KEY$3));\n        this.recipientCertificate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RECIPIENT_CERTIFICATE$1, KeyTransRecipientInfo.defaultValues(RECIPIENT_CERTIFICATE$1));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$c:\n                return (-1);\n            case RID$1:\n                return {};\n            case KEY_ENCRYPTION_ALGORITHM$3:\n                return new AlgorithmIdentifier();\n            case ENCRYPTED_KEY$3:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case RECIPIENT_CERTIFICATE$1:\n                return new Certificate();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$c:\n                return (memberValue === KeyTransRecipientInfo.defaultValues(VERSION$c));\n            case RID$1:\n                return (Object.keys(memberValue).length === 0);\n            case KEY_ENCRYPTION_ALGORITHM$3:\n            case ENCRYPTED_KEY$3:\n                return memberValue.isEqual(KeyTransRecipientInfo.defaultValues(memberName));\n            case RECIPIENT_CERTIFICATE$1:\n                return false;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                RecipientIdentifier.schema(names.rid || {}),\n                AlgorithmIdentifier.schema(names.keyEncryptionAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.encryptedKey || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$A);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, KeyTransRecipientInfo.schema({\n            names: {\n                version: VERSION$c,\n                rid: {\n                    names: {\n                        blockName: RID$1\n                    }\n                },\n                keyEncryptionAlgorithm: {\n                    names: {\n                        blockName: KEY_ENCRYPTION_ALGORITHM$3\n                    }\n                },\n                encryptedKey: ENCRYPTED_KEY$3\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        if (asn1.result.rid.idBlock.tagClass === 3) {\n            this.rid = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: asn1.result.rid.valueBlock.valueHex });\n        }\n        else {\n            this.rid = new IssuerAndSerialNumber({ schema: asn1.result.rid });\n        }\n        this.keyEncryptionAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.keyEncryptionAlgorithm });\n        this.encryptedKey = asn1.result.encryptedKey;\n    }\n    toSchema() {\n        const outputArray = [];\n        if (this.rid instanceof IssuerAndSerialNumber) {\n            this.version = 0;\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n            outputArray.push(this.rid.toSchema());\n        }\n        else {\n            this.version = 2;\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                valueHex: this.rid.valueBlock.valueHexView\n            }));\n        }\n        outputArray.push(this.keyEncryptionAlgorithm.toSchema());\n        outputArray.push(this.encryptedKey);\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        return {\n            version: this.version,\n            rid: this.rid.toJSON(),\n            keyEncryptionAlgorithm: this.keyEncryptionAlgorithm.toJSON(),\n            encryptedKey: this.encryptedKey.toJSON(),\n        };\n    }\n}\nKeyTransRecipientInfo.CLASS_NAME = \"KeyTransRecipientInfo\";\n\nconst ALGORITHM = \"algorithm\";\nconst PUBLIC_KEY = \"publicKey\";\nconst CLEAR_PROPS$z = [\n    ALGORITHM,\n    PUBLIC_KEY\n];\nclass OriginatorPublicKey extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.algorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ALGORITHM, OriginatorPublicKey.defaultValues(ALGORITHM));\n        this.publicKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PUBLIC_KEY, OriginatorPublicKey.defaultValues(PUBLIC_KEY));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ALGORITHM:\n                return new AlgorithmIdentifier();\n            case PUBLIC_KEY:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case ALGORITHM:\n            case PUBLIC_KEY:\n                return (memberValue.isEqual(OriginatorPublicKey.defaultValues(memberName)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.algorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.publicKey || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$z);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OriginatorPublicKey.schema({\n            names: {\n                algorithm: {\n                    names: {\n                        blockName: ALGORITHM\n                    }\n                },\n                publicKey: PUBLIC_KEY\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.algorithm = new AlgorithmIdentifier({ schema: asn1.result.algorithm });\n        this.publicKey = asn1.result.publicKey;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.algorithm.toSchema(),\n                this.publicKey\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            algorithm: this.algorithm.toJSON(),\n            publicKey: this.publicKey.toJSON(),\n        };\n    }\n}\nOriginatorPublicKey.CLASS_NAME = \"OriginatorPublicKey\";\n\nconst VARIANT$2 = \"variant\";\nconst VALUE$2 = \"value\";\nconst CLEAR_PROPS$y = [\n    \"blockName\",\n];\nclass OriginatorIdentifierOrKey extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.variant = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VARIANT$2, OriginatorIdentifierOrKey.defaultValues(VARIANT$2));\n        if (VALUE$2 in parameters) {\n            this.value = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUE$2, OriginatorIdentifierOrKey.defaultValues(VALUE$2));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VARIANT$2:\n                return (-1);\n            case VALUE$2:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VARIANT$2:\n                return (memberValue === (-1));\n            case VALUE$2:\n                return (Object.keys(memberValue).length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n            value: [\n                IssuerAndSerialNumber.schema({\n                    names: {\n                        blockName: (names.blockName || EMPTY_STRING)\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    name: (names.blockName || EMPTY_STRING)\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    name: (names.blockName || EMPTY_STRING),\n                    value: OriginatorPublicKey.schema().valueBlock.value\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$y);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OriginatorIdentifierOrKey.schema({\n            names: {\n                blockName: \"blockName\"\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (asn1.result.blockName.idBlock.tagClass === 1) {\n            this.variant = 1;\n            this.value = new IssuerAndSerialNumber({ schema: asn1.result.blockName });\n        }\n        else {\n            if (asn1.result.blockName.idBlock.tagNumber === 0) {\n                asn1.result.blockName.idBlock.tagClass = 1;\n                asn1.result.blockName.idBlock.tagNumber = 4;\n                this.variant = 2;\n                this.value = asn1.result.blockName;\n            }\n            else {\n                this.variant = 3;\n                this.value = new OriginatorPublicKey({\n                    schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                        value: asn1.result.blockName.valueBlock.value\n                    })\n                });\n            }\n        }\n    }\n    toSchema() {\n        switch (this.variant) {\n            case 1:\n                return this.value.toSchema();\n            case 2:\n                this.value.idBlock.tagClass = 3;\n                this.value.idBlock.tagNumber = 0;\n                return this.value;\n            case 3:\n                {\n                    const _schema = this.value.toSchema();\n                    _schema.idBlock.tagClass = 3;\n                    _schema.idBlock.tagNumber = 1;\n                    return _schema;\n                }\n            default:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n        }\n    }\n    toJSON() {\n        const res = {\n            variant: this.variant\n        };\n        if ((this.variant === 1) || (this.variant === 2) || (this.variant === 3)) {\n            res.value = this.value.toJSON();\n        }\n        return res;\n    }\n}\nOriginatorIdentifierOrKey.CLASS_NAME = \"OriginatorIdentifierOrKey\";\n\nconst KEY_ATTR_ID = \"keyAttrId\";\nconst KEY_ATTR = \"keyAttr\";\nconst CLEAR_PROPS$x = [\n    KEY_ATTR_ID,\n    KEY_ATTR,\n];\nclass OtherKeyAttribute extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.keyAttrId = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_ATTR_ID, OtherKeyAttribute.defaultValues(KEY_ATTR_ID));\n        if (KEY_ATTR in parameters) {\n            this.keyAttr = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_ATTR, OtherKeyAttribute.defaultValues(KEY_ATTR));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case KEY_ATTR_ID:\n                return EMPTY_STRING;\n            case KEY_ATTR:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case KEY_ATTR_ID:\n                return (typeof memberValue === \"string\" && memberValue === EMPTY_STRING);\n            case KEY_ATTR:\n                return (Object.keys(memberValue).length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            optional: (names.optional || true),\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.keyAttrId || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({\n                    optional: true,\n                    name: (names.keyAttr || EMPTY_STRING)\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$x);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OtherKeyAttribute.schema({\n            names: {\n                keyAttrId: KEY_ATTR_ID,\n                keyAttr: KEY_ATTR\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.keyAttrId = asn1.result.keyAttrId.valueBlock.toString();\n        if (KEY_ATTR in asn1.result) {\n            this.keyAttr = asn1.result.keyAttr;\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.keyAttrId }));\n        if (KEY_ATTR in this) {\n            outputArray.push(this.keyAttr);\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray,\n        }));\n    }\n    toJSON() {\n        const res = {\n            keyAttrId: this.keyAttrId\n        };\n        if (KEY_ATTR in this) {\n            res.keyAttr = this.keyAttr.toJSON();\n        }\n        return res;\n    }\n}\nOtherKeyAttribute.CLASS_NAME = \"OtherKeyAttribute\";\n\nconst SUBJECT_KEY_IDENTIFIER = \"subjectKeyIdentifier\";\nconst DATE$1 = \"date\";\nconst OTHER$1 = \"other\";\nconst CLEAR_PROPS$w = [\n    SUBJECT_KEY_IDENTIFIER,\n    DATE$1,\n    OTHER$1,\n];\nclass RecipientKeyIdentifier extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.subjectKeyIdentifier = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUBJECT_KEY_IDENTIFIER, RecipientKeyIdentifier.defaultValues(SUBJECT_KEY_IDENTIFIER));\n        if (DATE$1 in parameters) {\n            this.date = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DATE$1, RecipientKeyIdentifier.defaultValues(DATE$1));\n        }\n        if (OTHER$1 in parameters) {\n            this.other = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER$1, RecipientKeyIdentifier.defaultValues(OTHER$1));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case SUBJECT_KEY_IDENTIFIER:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case DATE$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime();\n            case OTHER$1:\n                return new OtherKeyAttribute();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case SUBJECT_KEY_IDENTIFIER:\n                return (memberValue.isEqual(RecipientKeyIdentifier.defaultValues(SUBJECT_KEY_IDENTIFIER)));\n            case DATE$1:\n                return ((memberValue.year === 0) &&\n                    (memberValue.month === 0) &&\n                    (memberValue.day === 0) &&\n                    (memberValue.hour === 0) &&\n                    (memberValue.minute === 0) &&\n                    (memberValue.second === 0) &&\n                    (memberValue.millisecond === 0));\n            case OTHER$1:\n                return ((memberValue.keyAttrId === EMPTY_STRING) && ((\"keyAttr\" in memberValue) === false));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.subjectKeyIdentifier || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({\n                    optional: true,\n                    name: (names.date || EMPTY_STRING)\n                }),\n                OtherKeyAttribute.schema(names.other || {})\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$w);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RecipientKeyIdentifier.schema({\n            names: {\n                subjectKeyIdentifier: SUBJECT_KEY_IDENTIFIER,\n                date: DATE$1,\n                other: {\n                    names: {\n                        blockName: OTHER$1\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.subjectKeyIdentifier = asn1.result.subjectKeyIdentifier;\n        if (DATE$1 in asn1.result)\n            this.date = asn1.result.date;\n        if (OTHER$1 in asn1.result)\n            this.other = new OtherKeyAttribute({ schema: asn1.result.other });\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.subjectKeyIdentifier);\n        if (this.date) {\n            outputArray.push(this.date);\n        }\n        if (this.other) {\n            outputArray.push(this.other.toSchema());\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            subjectKeyIdentifier: this.subjectKeyIdentifier.toJSON()\n        };\n        if (this.date) {\n            res.date = this.date.toJSON();\n        }\n        if (this.other) {\n            res.other = this.other.toJSON();\n        }\n        return res;\n    }\n}\nRecipientKeyIdentifier.CLASS_NAME = \"RecipientKeyIdentifier\";\n\nconst VARIANT$1 = \"variant\";\nconst VALUE$1 = \"value\";\nconst CLEAR_PROPS$v = [\n    \"blockName\",\n];\nclass KeyAgreeRecipientIdentifier extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.variant = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VARIANT$1, KeyAgreeRecipientIdentifier.defaultValues(VARIANT$1));\n        this.value = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUE$1, KeyAgreeRecipientIdentifier.defaultValues(VALUE$1));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VARIANT$1:\n                return (-1);\n            case VALUE$1:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VARIANT$1:\n                return (memberValue === (-1));\n            case VALUE$1:\n                return (Object.keys(memberValue).length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n            value: [\n                IssuerAndSerialNumber.schema(names.issuerAndSerialNumber || {\n                    names: {\n                        blockName: (names.blockName || EMPTY_STRING)\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: RecipientKeyIdentifier.schema(names.rKeyId || {\n                        names: {\n                            blockName: (names.blockName || EMPTY_STRING)\n                        }\n                    }).valueBlock.value\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$v);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, KeyAgreeRecipientIdentifier.schema({\n            names: {\n                blockName: \"blockName\"\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (asn1.result.blockName.idBlock.tagClass === 1) {\n            this.variant = 1;\n            this.value = new IssuerAndSerialNumber({ schema: asn1.result.blockName });\n        }\n        else {\n            this.variant = 2;\n            this.value = new RecipientKeyIdentifier({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.blockName.valueBlock.value\n                })\n            });\n        }\n    }\n    toSchema() {\n        switch (this.variant) {\n            case 1:\n                return this.value.toSchema();\n            case 2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: this.value.toSchema().valueBlock.value\n                });\n            default:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n        }\n    }\n    toJSON() {\n        const res = {\n            variant: this.variant,\n        };\n        if ((this.variant === 1) || (this.variant === 2)) {\n            res.value = this.value.toJSON();\n        }\n        return res;\n    }\n}\nKeyAgreeRecipientIdentifier.CLASS_NAME = \"KeyAgreeRecipientIdentifier\";\n\nconst RID = \"rid\";\nconst ENCRYPTED_KEY$2 = \"encryptedKey\";\nconst CLEAR_PROPS$u = [\n    RID,\n    ENCRYPTED_KEY$2,\n];\nclass RecipientEncryptedKey extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.rid = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RID, RecipientEncryptedKey.defaultValues(RID));\n        this.encryptedKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTED_KEY$2, RecipientEncryptedKey.defaultValues(ENCRYPTED_KEY$2));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case RID:\n                return new KeyAgreeRecipientIdentifier();\n            case ENCRYPTED_KEY$2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case RID:\n                return ((memberValue.variant === (-1)) && ((\"value\" in memberValue) === false));\n            case ENCRYPTED_KEY$2:\n                return (memberValue.isEqual(RecipientEncryptedKey.defaultValues(ENCRYPTED_KEY$2)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                KeyAgreeRecipientIdentifier.schema(names.rid || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.encryptedKey || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$u);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RecipientEncryptedKey.schema({\n            names: {\n                rid: {\n                    names: {\n                        blockName: RID\n                    }\n                },\n                encryptedKey: ENCRYPTED_KEY$2\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.rid = new KeyAgreeRecipientIdentifier({ schema: asn1.result.rid });\n        this.encryptedKey = asn1.result.encryptedKey;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.rid.toSchema(),\n                this.encryptedKey\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            rid: this.rid.toJSON(),\n            encryptedKey: this.encryptedKey.toJSON(),\n        };\n    }\n}\nRecipientEncryptedKey.CLASS_NAME = \"RecipientEncryptedKey\";\n\nconst ENCRYPTED_KEYS = \"encryptedKeys\";\nconst RECIPIENT_ENCRYPTED_KEYS = \"RecipientEncryptedKeys\";\nconst CLEAR_PROPS$t = [\n    RECIPIENT_ENCRYPTED_KEYS,\n];\nclass RecipientEncryptedKeys extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.encryptedKeys = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTED_KEYS, RecipientEncryptedKeys.defaultValues(ENCRYPTED_KEYS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ENCRYPTED_KEYS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case ENCRYPTED_KEYS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.RecipientEncryptedKeys || EMPTY_STRING),\n                    value: RecipientEncryptedKey.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$t);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RecipientEncryptedKeys.schema({\n            names: {\n                RecipientEncryptedKeys: RECIPIENT_ENCRYPTED_KEYS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.encryptedKeys = Array.from(asn1.result.RecipientEncryptedKeys, element => new RecipientEncryptedKey({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.encryptedKeys, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            encryptedKeys: Array.from(this.encryptedKeys, o => o.toJSON())\n        };\n    }\n}\nRecipientEncryptedKeys.CLASS_NAME = \"RecipientEncryptedKeys\";\n\nconst VERSION$b = \"version\";\nconst ORIGINATOR = \"originator\";\nconst UKM = \"ukm\";\nconst KEY_ENCRYPTION_ALGORITHM$2 = \"keyEncryptionAlgorithm\";\nconst RECIPIENT_ENCRYPTED_KEY = \"recipientEncryptedKeys\";\nconst RECIPIENT_CERTIFICATE = \"recipientCertificate\";\nconst RECIPIENT_PUBLIC_KEY = \"recipientPublicKey\";\nconst CLEAR_PROPS$s = [\n    VERSION$b,\n    ORIGINATOR,\n    UKM,\n    KEY_ENCRYPTION_ALGORITHM$2,\n    RECIPIENT_ENCRYPTED_KEY,\n];\nclass KeyAgreeRecipientInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$b, KeyAgreeRecipientInfo.defaultValues(VERSION$b));\n        this.originator = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ORIGINATOR, KeyAgreeRecipientInfo.defaultValues(ORIGINATOR));\n        if (UKM in parameters) {\n            this.ukm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, UKM, KeyAgreeRecipientInfo.defaultValues(UKM));\n        }\n        this.keyEncryptionAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_ENCRYPTION_ALGORITHM$2, KeyAgreeRecipientInfo.defaultValues(KEY_ENCRYPTION_ALGORITHM$2));\n        this.recipientEncryptedKeys = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RECIPIENT_ENCRYPTED_KEY, KeyAgreeRecipientInfo.defaultValues(RECIPIENT_ENCRYPTED_KEY));\n        this.recipientCertificate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RECIPIENT_CERTIFICATE, KeyAgreeRecipientInfo.defaultValues(RECIPIENT_CERTIFICATE));\n        this.recipientPublicKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RECIPIENT_PUBLIC_KEY, KeyAgreeRecipientInfo.defaultValues(RECIPIENT_PUBLIC_KEY));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$b:\n                return 0;\n            case ORIGINATOR:\n                return new OriginatorIdentifierOrKey();\n            case UKM:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case KEY_ENCRYPTION_ALGORITHM$2:\n                return new AlgorithmIdentifier();\n            case RECIPIENT_ENCRYPTED_KEY:\n                return new RecipientEncryptedKeys();\n            case RECIPIENT_CERTIFICATE:\n                return new Certificate();\n            case RECIPIENT_PUBLIC_KEY:\n                return null;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$b:\n                return (memberValue === 0);\n            case ORIGINATOR:\n                return ((memberValue.variant === (-1)) && ((\"value\" in memberValue) === false));\n            case UKM:\n                return (memberValue.isEqual(KeyAgreeRecipientInfo.defaultValues(UKM)));\n            case KEY_ENCRYPTION_ALGORITHM$2:\n                return ((memberValue.algorithmId === EMPTY_STRING) && ((\"algorithmParams\" in memberValue) === false));\n            case RECIPIENT_ENCRYPTED_KEY:\n                return (memberValue.encryptedKeys.length === 0);\n            case RECIPIENT_CERTIFICATE:\n                return false;\n            case RECIPIENT_PUBLIC_KEY:\n                return false;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: names.blockName || EMPTY_STRING,\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: names.version || EMPTY_STRING }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        OriginatorIdentifierOrKey.schema(names.originator || {})\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: names.ukm || EMPTY_STRING })]\n                }),\n                AlgorithmIdentifier.schema(names.keyEncryptionAlgorithm || {}),\n                RecipientEncryptedKeys.schema(names.recipientEncryptedKeys || {})\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$s);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, KeyAgreeRecipientInfo.schema({\n            names: {\n                version: VERSION$b,\n                originator: {\n                    names: {\n                        blockName: ORIGINATOR\n                    }\n                },\n                ukm: UKM,\n                keyEncryptionAlgorithm: {\n                    names: {\n                        blockName: KEY_ENCRYPTION_ALGORITHM$2\n                    }\n                },\n                recipientEncryptedKeys: {\n                    names: {\n                        blockName: RECIPIENT_ENCRYPTED_KEY\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        this.originator = new OriginatorIdentifierOrKey({ schema: asn1.result.originator });\n        if (UKM in asn1.result)\n            this.ukm = asn1.result.ukm;\n        this.keyEncryptionAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.keyEncryptionAlgorithm });\n        this.recipientEncryptedKeys = new RecipientEncryptedKeys({ schema: asn1.result.recipientEncryptedKeys });\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n            idBlock: {\n                tagClass: 3,\n                tagNumber: 0\n            },\n            value: [this.originator.toSchema()]\n        }));\n        if (this.ukm) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: [this.ukm]\n            }));\n        }\n        outputArray.push(this.keyEncryptionAlgorithm.toSchema());\n        outputArray.push(this.recipientEncryptedKeys.toSchema());\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            version: this.version,\n            originator: this.originator.toJSON(),\n            keyEncryptionAlgorithm: this.keyEncryptionAlgorithm.toJSON(),\n            recipientEncryptedKeys: this.recipientEncryptedKeys.toJSON(),\n        };\n        if (this.ukm) {\n            res.ukm = this.ukm.toJSON();\n        }\n        return res;\n    }\n}\nKeyAgreeRecipientInfo.CLASS_NAME = \"KeyAgreeRecipientInfo\";\n\nconst KEY_IDENTIFIER = \"keyIdentifier\";\nconst DATE = \"date\";\nconst OTHER = \"other\";\nconst CLEAR_PROPS$r = [\n    KEY_IDENTIFIER,\n    DATE,\n    OTHER,\n];\nclass KEKIdentifier extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.keyIdentifier = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_IDENTIFIER, KEKIdentifier.defaultValues(KEY_IDENTIFIER));\n        if (DATE in parameters) {\n            this.date = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DATE, KEKIdentifier.defaultValues(DATE));\n        }\n        if (OTHER in parameters) {\n            this.other = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OTHER, KEKIdentifier.defaultValues(OTHER));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case KEY_IDENTIFIER:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case DATE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime();\n            case OTHER:\n                return new OtherKeyAttribute();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case KEY_IDENTIFIER:\n                return (memberValue.isEqual(KEKIdentifier.defaultValues(KEY_IDENTIFIER)));\n            case DATE:\n                return ((memberValue.year === 0) &&\n                    (memberValue.month === 0) &&\n                    (memberValue.day === 0) &&\n                    (memberValue.hour === 0) &&\n                    (memberValue.minute === 0) &&\n                    (memberValue.second === 0) &&\n                    (memberValue.millisecond === 0));\n            case OTHER:\n                return ((memberValue.compareWithDefault(\"keyAttrId\", memberValue.keyAttrId)) &&\n                    ((\"keyAttr\" in memberValue) === false));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.keyIdentifier || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({\n                    optional: true,\n                    name: (names.date || EMPTY_STRING)\n                }),\n                OtherKeyAttribute.schema(names.other || {})\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$r);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, KEKIdentifier.schema({\n            names: {\n                keyIdentifier: KEY_IDENTIFIER,\n                date: DATE,\n                other: {\n                    names: {\n                        blockName: OTHER\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.keyIdentifier = asn1.result.keyIdentifier;\n        if (DATE in asn1.result)\n            this.date = asn1.result.date;\n        if (OTHER in asn1.result)\n            this.other = new OtherKeyAttribute({ schema: asn1.result.other });\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.keyIdentifier);\n        if (this.date) {\n            outputArray.push(this.date);\n        }\n        if (this.other) {\n            outputArray.push(this.other.toSchema());\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            keyIdentifier: this.keyIdentifier.toJSON()\n        };\n        if (this.date) {\n            res.date = this.date;\n        }\n        if (this.other) {\n            res.other = this.other.toJSON();\n        }\n        return res;\n    }\n}\nKEKIdentifier.CLASS_NAME = \"KEKIdentifier\";\n\nconst VERSION$a = \"version\";\nconst KEK_ID = \"kekid\";\nconst KEY_ENCRYPTION_ALGORITHM$1 = \"keyEncryptionAlgorithm\";\nconst ENCRYPTED_KEY$1 = \"encryptedKey\";\nconst PER_DEFINED_KEK = \"preDefinedKEK\";\nconst CLEAR_PROPS$q = [\n    VERSION$a,\n    KEK_ID,\n    KEY_ENCRYPTION_ALGORITHM$1,\n    ENCRYPTED_KEY$1,\n];\nclass KEKRecipientInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$a, KEKRecipientInfo.defaultValues(VERSION$a));\n        this.kekid = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEK_ID, KEKRecipientInfo.defaultValues(KEK_ID));\n        this.keyEncryptionAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_ENCRYPTION_ALGORITHM$1, KEKRecipientInfo.defaultValues(KEY_ENCRYPTION_ALGORITHM$1));\n        this.encryptedKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTED_KEY$1, KEKRecipientInfo.defaultValues(ENCRYPTED_KEY$1));\n        this.preDefinedKEK = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PER_DEFINED_KEK, KEKRecipientInfo.defaultValues(PER_DEFINED_KEK));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$a:\n                return 0;\n            case KEK_ID:\n                return new KEKIdentifier();\n            case KEY_ENCRYPTION_ALGORITHM$1:\n                return new AlgorithmIdentifier();\n            case ENCRYPTED_KEY$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case PER_DEFINED_KEK:\n                return EMPTY_BUFFER;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case \"KEKRecipientInfo\":\n                return (memberValue === KEKRecipientInfo.defaultValues(VERSION$a));\n            case KEK_ID:\n                return ((memberValue.compareWithDefault(\"keyIdentifier\", memberValue.keyIdentifier)) &&\n                    ((\"date\" in memberValue) === false) &&\n                    ((\"other\" in memberValue) === false));\n            case KEY_ENCRYPTION_ALGORITHM$1:\n                return ((memberValue.algorithmId === EMPTY_STRING) && ((\"algorithmParams\" in memberValue) === false));\n            case ENCRYPTED_KEY$1:\n                return (memberValue.isEqual(KEKRecipientInfo.defaultValues(ENCRYPTED_KEY$1)));\n            case PER_DEFINED_KEK:\n                return (memberValue.byteLength === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                KEKIdentifier.schema(names.kekid || {}),\n                AlgorithmIdentifier.schema(names.keyEncryptionAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.encryptedKey || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$q);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, KEKRecipientInfo.schema({\n            names: {\n                version: VERSION$a,\n                kekid: {\n                    names: {\n                        blockName: KEK_ID\n                    }\n                },\n                keyEncryptionAlgorithm: {\n                    names: {\n                        blockName: KEY_ENCRYPTION_ALGORITHM$1\n                    }\n                },\n                encryptedKey: ENCRYPTED_KEY$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        this.kekid = new KEKIdentifier({ schema: asn1.result.kekid });\n        this.keyEncryptionAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.keyEncryptionAlgorithm });\n        this.encryptedKey = asn1.result.encryptedKey;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }),\n                this.kekid.toSchema(),\n                this.keyEncryptionAlgorithm.toSchema(),\n                this.encryptedKey\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            version: this.version,\n            kekid: this.kekid.toJSON(),\n            keyEncryptionAlgorithm: this.keyEncryptionAlgorithm.toJSON(),\n            encryptedKey: this.encryptedKey.toJSON(),\n        };\n    }\n}\nKEKRecipientInfo.CLASS_NAME = \"KEKRecipientInfo\";\n\nconst VERSION$9 = \"version\";\nconst KEY_DERIVATION_ALGORITHM = \"keyDerivationAlgorithm\";\nconst KEY_ENCRYPTION_ALGORITHM = \"keyEncryptionAlgorithm\";\nconst ENCRYPTED_KEY = \"encryptedKey\";\nconst PASSWORD = \"password\";\nconst CLEAR_PROPS$p = [\n    VERSION$9,\n    KEY_DERIVATION_ALGORITHM,\n    KEY_ENCRYPTION_ALGORITHM,\n    ENCRYPTED_KEY\n];\nclass PasswordRecipientinfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$9, PasswordRecipientinfo.defaultValues(VERSION$9));\n        if (KEY_DERIVATION_ALGORITHM in parameters) {\n            this.keyDerivationAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_DERIVATION_ALGORITHM, PasswordRecipientinfo.defaultValues(KEY_DERIVATION_ALGORITHM));\n        }\n        this.keyEncryptionAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_ENCRYPTION_ALGORITHM, PasswordRecipientinfo.defaultValues(KEY_ENCRYPTION_ALGORITHM));\n        this.encryptedKey = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTED_KEY, PasswordRecipientinfo.defaultValues(ENCRYPTED_KEY));\n        this.password = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PASSWORD, PasswordRecipientinfo.defaultValues(PASSWORD));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$9:\n                return (-1);\n            case KEY_DERIVATION_ALGORITHM:\n                return new AlgorithmIdentifier();\n            case KEY_ENCRYPTION_ALGORITHM:\n                return new AlgorithmIdentifier();\n            case ENCRYPTED_KEY:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case PASSWORD:\n                return EMPTY_BUFFER;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$9:\n                return (memberValue === (-1));\n            case KEY_DERIVATION_ALGORITHM:\n            case KEY_ENCRYPTION_ALGORITHM:\n                return ((memberValue.algorithmId === EMPTY_STRING) && ((\"algorithmParams\" in memberValue) === false));\n            case ENCRYPTED_KEY:\n                return (memberValue.isEqual(PasswordRecipientinfo.defaultValues(ENCRYPTED_KEY)));\n            case PASSWORD:\n                return (memberValue.byteLength === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.keyDerivationAlgorithm || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: AlgorithmIdentifier.schema().valueBlock.value\n                }),\n                AlgorithmIdentifier.schema(names.keyEncryptionAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.encryptedKey || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$p);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PasswordRecipientinfo.schema({\n            names: {\n                version: VERSION$9,\n                keyDerivationAlgorithm: KEY_DERIVATION_ALGORITHM,\n                keyEncryptionAlgorithm: {\n                    names: {\n                        blockName: KEY_ENCRYPTION_ALGORITHM\n                    }\n                },\n                encryptedKey: ENCRYPTED_KEY\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        if (KEY_DERIVATION_ALGORITHM in asn1.result) {\n            this.keyDerivationAlgorithm = new AlgorithmIdentifier({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.keyDerivationAlgorithm.valueBlock.value\n                })\n            });\n        }\n        this.keyEncryptionAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.keyEncryptionAlgorithm });\n        this.encryptedKey = asn1.result.encryptedKey;\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        if (this.keyDerivationAlgorithm) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: this.keyDerivationAlgorithm.toSchema().valueBlock.value\n            }));\n        }\n        outputArray.push(this.keyEncryptionAlgorithm.toSchema());\n        outputArray.push(this.encryptedKey);\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            version: this.version,\n            keyEncryptionAlgorithm: this.keyEncryptionAlgorithm.toJSON(),\n            encryptedKey: this.encryptedKey.toJSON(),\n        };\n        if (this.keyDerivationAlgorithm) {\n            res.keyDerivationAlgorithm = this.keyDerivationAlgorithm.toJSON();\n        }\n        return res;\n    }\n}\nPasswordRecipientinfo.CLASS_NAME = \"PasswordRecipientInfo\";\n\nconst ORI_TYPE = \"oriType\";\nconst ORI_VALUE = \"oriValue\";\nconst CLEAR_PROPS$o = [\n    ORI_TYPE,\n    ORI_VALUE\n];\nclass OtherRecipientInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.oriType = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ORI_TYPE, OtherRecipientInfo.defaultValues(ORI_TYPE));\n        this.oriValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ORI_VALUE, OtherRecipientInfo.defaultValues(ORI_VALUE));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case ORI_TYPE:\n                return EMPTY_STRING;\n            case ORI_VALUE:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case ORI_TYPE:\n                return (memberValue === EMPTY_STRING);\n            case ORI_VALUE:\n                return (Object.keys(memberValue).length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.oriType || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.oriValue || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$o);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OtherRecipientInfo.schema({\n            names: {\n                oriType: ORI_TYPE,\n                oriValue: ORI_VALUE\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.oriType = asn1.result.oriType.valueBlock.toString();\n        this.oriValue = asn1.result.oriValue;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.oriType }),\n                this.oriValue\n            ]\n        }));\n    }\n    toJSON() {\n        const res = {\n            oriType: this.oriType\n        };\n        if (!OtherRecipientInfo.compareWithDefault(ORI_VALUE, this.oriValue)) {\n            res.oriValue = this.oriValue.toJSON();\n        }\n        return res;\n    }\n}\nOtherRecipientInfo.CLASS_NAME = \"OtherRecipientInfo\";\n\nconst VARIANT = \"variant\";\nconst VALUE = \"value\";\nconst CLEAR_PROPS$n = [\n    \"blockName\"\n];\nclass RecipientInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.variant = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VARIANT, RecipientInfo.defaultValues(VARIANT));\n        if (VALUE in parameters) {\n            this.value = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VALUE, RecipientInfo.defaultValues(VALUE));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VARIANT:\n                return (-1);\n            case VALUE:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VARIANT:\n                return (memberValue === RecipientInfo.defaultValues(memberName));\n            case VALUE:\n                return (Object.keys(memberValue).length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n            value: [\n                KeyTransRecipientInfo.schema({\n                    names: {\n                        blockName: (names.blockName || EMPTY_STRING)\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: KeyAgreeRecipientInfo.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    value: KEKRecipientInfo.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 3\n                    },\n                    value: PasswordRecipientinfo.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.blockName || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 4\n                    },\n                    value: OtherRecipientInfo.schema().valueBlock.value\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$n);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RecipientInfo.schema({\n            names: {\n                blockName: \"blockName\"\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (asn1.result.blockName.idBlock.tagClass === 1) {\n            this.variant = 1;\n            this.value = new KeyTransRecipientInfo({ schema: asn1.result.blockName });\n        }\n        else {\n            const blockSequence = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: asn1.result.blockName.valueBlock.value\n            });\n            switch (asn1.result.blockName.idBlock.tagNumber) {\n                case 1:\n                    this.variant = 2;\n                    this.value = new KeyAgreeRecipientInfo({ schema: blockSequence });\n                    break;\n                case 2:\n                    this.variant = 3;\n                    this.value = new KEKRecipientInfo({ schema: blockSequence });\n                    break;\n                case 3:\n                    this.variant = 4;\n                    this.value = new PasswordRecipientinfo({ schema: blockSequence });\n                    break;\n                case 4:\n                    this.variant = 5;\n                    this.value = new OtherRecipientInfo({ schema: blockSequence });\n                    break;\n                default:\n                    throw new Error(\"Incorrect structure of RecipientInfo block\");\n            }\n        }\n    }\n    toSchema() {\n        ParameterError.assertEmpty(this.value, \"value\", \"RecipientInfo\");\n        const _schema = this.value.toSchema();\n        switch (this.variant) {\n            case 1:\n                return _schema;\n            case 2:\n            case 3:\n            case 4:\n                _schema.idBlock.tagClass = 3;\n                _schema.idBlock.tagNumber = (this.variant - 1);\n                return _schema;\n            default:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n        }\n    }\n    toJSON() {\n        const res = {\n            variant: this.variant\n        };\n        if (this.value && (this.variant >= 1) && (this.variant <= 4)) {\n            res.value = this.value.toJSON();\n        }\n        return res;\n    }\n}\nRecipientInfo.CLASS_NAME = \"RecipientInfo\";\n\nconst HASH_ALGORITHM$2 = \"hashAlgorithm\";\nconst MASK_GEN_ALGORITHM = \"maskGenAlgorithm\";\nconst P_SOURCE_ALGORITHM = \"pSourceAlgorithm\";\nconst CLEAR_PROPS$m = [\n    HASH_ALGORITHM$2,\n    MASK_GEN_ALGORITHM,\n    P_SOURCE_ALGORITHM\n];\nclass RSAESOAEPParams extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.hashAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, HASH_ALGORITHM$2, RSAESOAEPParams.defaultValues(HASH_ALGORITHM$2));\n        this.maskGenAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MASK_GEN_ALGORITHM, RSAESOAEPParams.defaultValues(MASK_GEN_ALGORITHM));\n        this.pSourceAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, P_SOURCE_ALGORITHM, RSAESOAEPParams.defaultValues(P_SOURCE_ALGORITHM));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case HASH_ALGORITHM$2:\n                return new AlgorithmIdentifier({\n                    algorithmId: \"1.3.14.3.2.26\",\n                    algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                });\n            case MASK_GEN_ALGORITHM:\n                return new AlgorithmIdentifier({\n                    algorithmId: \"1.2.840.113549.1.1.8\",\n                    algorithmParams: (new AlgorithmIdentifier({\n                        algorithmId: \"1.3.14.3.2.26\",\n                        algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                    })).toSchema()\n                });\n            case P_SOURCE_ALGORITHM:\n                return new AlgorithmIdentifier({\n                    algorithmId: \"1.2.840.113549.1.1.9\",\n                    algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: (new Uint8Array([0xda, 0x39, 0xa3, 0xee, 0x5e, 0x6b, 0x4b, 0x0d, 0x32, 0x55, 0xbf, 0xef, 0x95, 0x60, 0x18, 0x90, 0xaf, 0xd8, 0x07, 0x09])).buffer })\n                });\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    optional: true,\n                    value: [AlgorithmIdentifier.schema(names.hashAlgorithm || {})]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    optional: true,\n                    value: [AlgorithmIdentifier.schema(names.maskGenAlgorithm || {})]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    optional: true,\n                    value: [AlgorithmIdentifier.schema(names.pSourceAlgorithm || {})]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$m);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, RSAESOAEPParams.schema({\n            names: {\n                hashAlgorithm: {\n                    names: {\n                        blockName: HASH_ALGORITHM$2\n                    }\n                },\n                maskGenAlgorithm: {\n                    names: {\n                        blockName: MASK_GEN_ALGORITHM\n                    }\n                },\n                pSourceAlgorithm: {\n                    names: {\n                        blockName: P_SOURCE_ALGORITHM\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        if (HASH_ALGORITHM$2 in asn1.result)\n            this.hashAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.hashAlgorithm });\n        if (MASK_GEN_ALGORITHM in asn1.result)\n            this.maskGenAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.maskGenAlgorithm });\n        if (P_SOURCE_ALGORITHM in asn1.result)\n            this.pSourceAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.pSourceAlgorithm });\n    }\n    toSchema() {\n        const outputArray = [];\n        if (!this.hashAlgorithm.isEqual(RSAESOAEPParams.defaultValues(HASH_ALGORITHM$2))) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [this.hashAlgorithm.toSchema()]\n            }));\n        }\n        if (!this.maskGenAlgorithm.isEqual(RSAESOAEPParams.defaultValues(MASK_GEN_ALGORITHM))) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: [this.maskGenAlgorithm.toSchema()]\n            }));\n        }\n        if (!this.pSourceAlgorithm.isEqual(RSAESOAEPParams.defaultValues(P_SOURCE_ALGORITHM))) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 2\n                },\n                value: [this.pSourceAlgorithm.toSchema()]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {};\n        if (!this.hashAlgorithm.isEqual(RSAESOAEPParams.defaultValues(HASH_ALGORITHM$2))) {\n            res.hashAlgorithm = this.hashAlgorithm.toJSON();\n        }\n        if (!this.maskGenAlgorithm.isEqual(RSAESOAEPParams.defaultValues(MASK_GEN_ALGORITHM))) {\n            res.maskGenAlgorithm = this.maskGenAlgorithm.toJSON();\n        }\n        if (!this.pSourceAlgorithm.isEqual(RSAESOAEPParams.defaultValues(P_SOURCE_ALGORITHM))) {\n            res.pSourceAlgorithm = this.pSourceAlgorithm.toJSON();\n        }\n        return res;\n    }\n}\nRSAESOAEPParams.CLASS_NAME = \"RSAESOAEPParams\";\n\nconst KEY_INFO = \"keyInfo\";\nconst ENTITY_U_INFO = \"entityUInfo\";\nconst SUPP_PUB_INFO = \"suppPubInfo\";\nconst CLEAR_PROPS$l = [\n    KEY_INFO,\n    ENTITY_U_INFO,\n    SUPP_PUB_INFO\n];\nclass ECCCMSSharedInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.keyInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, KEY_INFO, ECCCMSSharedInfo.defaultValues(KEY_INFO));\n        if (ENTITY_U_INFO in parameters) {\n            this.entityUInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENTITY_U_INFO, ECCCMSSharedInfo.defaultValues(ENTITY_U_INFO));\n        }\n        this.suppPubInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUPP_PUB_INFO, ECCCMSSharedInfo.defaultValues(SUPP_PUB_INFO));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case KEY_INFO:\n                return new AlgorithmIdentifier();\n            case ENTITY_U_INFO:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case SUPP_PUB_INFO:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case KEY_INFO:\n            case ENTITY_U_INFO:\n            case SUPP_PUB_INFO:\n                return (memberValue.isEqual(ECCCMSSharedInfo.defaultValues(memberName)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.keyInfo || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.entityUInfo || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    optional: true,\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString()]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.suppPubInfo || EMPTY_STRING),\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString()]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$l);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, ECCCMSSharedInfo.schema({\n            names: {\n                keyInfo: {\n                    names: {\n                        blockName: KEY_INFO\n                    }\n                },\n                entityUInfo: ENTITY_U_INFO,\n                suppPubInfo: SUPP_PUB_INFO\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.keyInfo = new AlgorithmIdentifier({ schema: asn1.result.keyInfo });\n        if (ENTITY_U_INFO in asn1.result)\n            this.entityUInfo = asn1.result.entityUInfo.valueBlock.value[0];\n        this.suppPubInfo = asn1.result.suppPubInfo.valueBlock.value[0];\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.keyInfo.toSchema());\n        if (this.entityUInfo) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [this.entityUInfo]\n            }));\n        }\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n            idBlock: {\n                tagClass: 3,\n                tagNumber: 2\n            },\n            value: [this.suppPubInfo]\n        }));\n        return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        });\n    }\n    toJSON() {\n        const res = {\n            keyInfo: this.keyInfo.toJSON(),\n            suppPubInfo: this.suppPubInfo.toJSON(),\n        };\n        if (this.entityUInfo) {\n            res.entityUInfo = this.entityUInfo.toJSON();\n        }\n        return res;\n    }\n}\nECCCMSSharedInfo.CLASS_NAME = \"ECCCMSSharedInfo\";\n\nconst VERSION$8 = \"version\";\nconst ORIGINATOR_INFO = \"originatorInfo\";\nconst RECIPIENT_INFOS = \"recipientInfos\";\nconst ENCRYPTED_CONTENT_INFO = \"encryptedContentInfo\";\nconst UNPROTECTED_ATTRS = \"unprotectedAttrs\";\nconst CLEAR_PROPS$k = [\n    VERSION$8,\n    ORIGINATOR_INFO,\n    RECIPIENT_INFOS,\n    ENCRYPTED_CONTENT_INFO,\n    UNPROTECTED_ATTRS\n];\nconst defaultEncryptionParams = {\n    kdfAlgorithm: \"SHA-512\",\n    kekEncryptionLength: 256\n};\nconst curveLengthByName = {\n    \"P-256\": 256,\n    \"P-384\": 384,\n    \"P-521\": 528\n};\nclass EnvelopedData extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$8, EnvelopedData.defaultValues(VERSION$8));\n        if (ORIGINATOR_INFO in parameters) {\n            this.originatorInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ORIGINATOR_INFO, EnvelopedData.defaultValues(ORIGINATOR_INFO));\n        }\n        this.recipientInfos = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RECIPIENT_INFOS, EnvelopedData.defaultValues(RECIPIENT_INFOS));\n        this.encryptedContentInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCRYPTED_CONTENT_INFO, EnvelopedData.defaultValues(ENCRYPTED_CONTENT_INFO));\n        if (UNPROTECTED_ATTRS in parameters) {\n            this.unprotectedAttrs = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, UNPROTECTED_ATTRS, EnvelopedData.defaultValues(UNPROTECTED_ATTRS));\n        }\n        this.policy = {\n            disableSplit: !!parameters.disableSplit,\n        };\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$8:\n                return 0;\n            case ORIGINATOR_INFO:\n                return new OriginatorInfo();\n            case RECIPIENT_INFOS:\n                return [];\n            case ENCRYPTED_CONTENT_INFO:\n                return new EncryptedContentInfo();\n            case UNPROTECTED_ATTRS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$8:\n                return (memberValue === EnvelopedData.defaultValues(memberName));\n            case ORIGINATOR_INFO:\n                return ((memberValue.certs.certificates.length === 0) && (memberValue.crls.crls.length === 0));\n            case RECIPIENT_INFOS:\n            case UNPROTECTED_ATTRS:\n                return (memberValue.length === 0);\n            case ENCRYPTED_CONTENT_INFO:\n                return ((EncryptedContentInfo.compareWithDefault(\"contentType\", memberValue.contentType)) &&\n                    (EncryptedContentInfo.compareWithDefault(\"contentEncryptionAlgorithm\", memberValue.contentEncryptionAlgorithm) &&\n                        (EncryptedContentInfo.compareWithDefault(\"encryptedContent\", memberValue.encryptedContent))));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.originatorInfo || EMPTY_STRING),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: OriginatorInfo.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.recipientInfos || EMPTY_STRING),\n                            value: RecipientInfo.schema()\n                        })\n                    ]\n                }),\n                EncryptedContentInfo.schema(names.encryptedContentInfo || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.unprotectedAttrs || EMPTY_STRING),\n                            value: Attribute.schema()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$k);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, EnvelopedData.schema({\n            names: {\n                version: VERSION$8,\n                originatorInfo: ORIGINATOR_INFO,\n                recipientInfos: RECIPIENT_INFOS,\n                encryptedContentInfo: {\n                    names: {\n                        blockName: ENCRYPTED_CONTENT_INFO\n                    }\n                },\n                unprotectedAttrs: UNPROTECTED_ATTRS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        if (ORIGINATOR_INFO in asn1.result) {\n            this.originatorInfo = new OriginatorInfo({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: asn1.result.originatorInfo.valueBlock.value\n                })\n            });\n        }\n        this.recipientInfos = Array.from(asn1.result.recipientInfos, o => new RecipientInfo({ schema: o }));\n        this.encryptedContentInfo = new EncryptedContentInfo({ schema: asn1.result.encryptedContentInfo });\n        if (UNPROTECTED_ATTRS in asn1.result)\n            this.unprotectedAttrs = Array.from(asn1.result.unprotectedAttrs, o => new Attribute({ schema: o }));\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        if (this.originatorInfo) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: this.originatorInfo.toSchema().valueBlock.value\n            }));\n        }\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n            value: Array.from(this.recipientInfos, o => o.toSchema())\n        }));\n        outputArray.push(this.encryptedContentInfo.toSchema());\n        if (this.unprotectedAttrs) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: Array.from(this.unprotectedAttrs, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            version: this.version,\n            recipientInfos: Array.from(this.recipientInfos, o => o.toJSON()),\n            encryptedContentInfo: this.encryptedContentInfo.toJSON(),\n        };\n        if (this.originatorInfo)\n            res.originatorInfo = this.originatorInfo.toJSON();\n        if (this.unprotectedAttrs)\n            res.unprotectedAttrs = Array.from(this.unprotectedAttrs, o => o.toJSON());\n        return res;\n    }\n    addRecipientByCertificate(certificate, parameters, variant, crypto = getCrypto(true)) {\n        const encryptionParameters = Object.assign({ useOAEP: true, oaepHashAlgorithm: \"SHA-512\" }, defaultEncryptionParams, parameters || {});\n        if (certificate.subjectPublicKeyInfo.algorithm.algorithmId.indexOf(\"1.2.840.113549\") !== (-1))\n            variant = 1;\n        else {\n            if (certificate.subjectPublicKeyInfo.algorithm.algorithmId.indexOf(\"1.2.840.10045\") !== (-1))\n                variant = 2;\n            else\n                throw new Error(`Unknown type of certificate's public key: ${certificate.subjectPublicKeyInfo.algorithm.algorithmId}`);\n        }\n        switch (variant) {\n            case 1:\n                {\n                    let algorithmId;\n                    let algorithmParams;\n                    if (encryptionParameters.useOAEP === true) {\n                        algorithmId = crypto.getOIDByAlgorithm({\n                            name: \"RSA-OAEP\"\n                        }, true, \"keyEncryptionAlgorithm\");\n                        const hashOID = crypto.getOIDByAlgorithm({\n                            name: encryptionParameters.oaepHashAlgorithm\n                        }, true, \"RSAES-OAEP-params\");\n                        const hashAlgorithm = new AlgorithmIdentifier({\n                            algorithmId: hashOID,\n                            algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                        });\n                        const rsaOAEPParams = new RSAESOAEPParams({\n                            hashAlgorithm,\n                            maskGenAlgorithm: new AlgorithmIdentifier({\n                                algorithmId: \"1.2.840.113549.1.1.8\",\n                                algorithmParams: hashAlgorithm.toSchema()\n                            })\n                        });\n                        algorithmParams = rsaOAEPParams.toSchema();\n                    }\n                    else {\n                        algorithmId = crypto.getOIDByAlgorithm({\n                            name: \"RSAES-PKCS1-v1_5\"\n                        });\n                        if (algorithmId === EMPTY_STRING)\n                            throw new Error(\"Can not find OID for RSAES-PKCS1-v1_5\");\n                        algorithmParams = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null();\n                    }\n                    const keyInfo = new KeyTransRecipientInfo({\n                        version: 0,\n                        rid: new IssuerAndSerialNumber({\n                            issuer: certificate.issuer,\n                            serialNumber: certificate.serialNumber\n                        }),\n                        keyEncryptionAlgorithm: new AlgorithmIdentifier({\n                            algorithmId,\n                            algorithmParams\n                        }),\n                        recipientCertificate: certificate,\n                    });\n                    this.recipientInfos.push(new RecipientInfo({\n                        variant: 1,\n                        value: keyInfo\n                    }));\n                }\n                break;\n            case 2:\n                {\n                    const recipientIdentifier = new KeyAgreeRecipientIdentifier({\n                        variant: 1,\n                        value: new IssuerAndSerialNumber({\n                            issuer: certificate.issuer,\n                            serialNumber: certificate.serialNumber\n                        })\n                    });\n                    this._addKeyAgreeRecipientInfo(recipientIdentifier, encryptionParameters, { recipientCertificate: certificate }, crypto);\n                }\n                break;\n            default:\n                throw new Error(`Unknown \"variant\" value: ${variant}`);\n        }\n        return true;\n    }\n    addRecipientByPreDefinedData(preDefinedData, parameters = {}, variant, crypto = getCrypto(true)) {\n        ArgumentError.assert(preDefinedData, \"preDefinedData\", \"ArrayBuffer\");\n        if (!preDefinedData.byteLength) {\n            throw new Error(\"Pre-defined data could have zero length\");\n        }\n        if (!parameters.keyIdentifier) {\n            const keyIdentifierBuffer = new ArrayBuffer(16);\n            const keyIdentifierView = new Uint8Array(keyIdentifierBuffer);\n            crypto.getRandomValues(keyIdentifierView);\n            parameters.keyIdentifier = keyIdentifierBuffer;\n        }\n        if (!parameters.hmacHashAlgorithm)\n            parameters.hmacHashAlgorithm = \"SHA-512\";\n        if (parameters.iterationCount === undefined) {\n            parameters.iterationCount = 2048;\n        }\n        if (!parameters.keyEncryptionAlgorithm) {\n            parameters.keyEncryptionAlgorithm = {\n                name: \"AES-KW\",\n                length: 256\n            };\n        }\n        if (!parameters.keyEncryptionAlgorithmParams)\n            parameters.keyEncryptionAlgorithmParams = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null();\n        switch (variant) {\n            case 1:\n                {\n                    const kekOID = crypto.getOIDByAlgorithm(parameters.keyEncryptionAlgorithm, true, \"keyEncryptionAlgorithm\");\n                    const keyInfo = new KEKRecipientInfo({\n                        version: 4,\n                        kekid: new KEKIdentifier({\n                            keyIdentifier: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: parameters.keyIdentifier })\n                        }),\n                        keyEncryptionAlgorithm: new AlgorithmIdentifier({\n                            algorithmId: kekOID,\n                            algorithmParams: parameters.keyEncryptionAlgorithmParams\n                        }),\n                        preDefinedKEK: preDefinedData\n                    });\n                    this.recipientInfos.push(new RecipientInfo({\n                        variant: 3,\n                        value: keyInfo\n                    }));\n                }\n                break;\n            case 2:\n                {\n                    const pbkdf2OID = crypto.getOIDByAlgorithm({ name: \"PBKDF2\" }, true, \"keyDerivationAlgorithm\");\n                    const saltBuffer = new ArrayBuffer(64);\n                    const saltView = new Uint8Array(saltBuffer);\n                    crypto.getRandomValues(saltView);\n                    const hmacOID = crypto.getOIDByAlgorithm({\n                        name: \"HMAC\",\n                        hash: {\n                            name: parameters.hmacHashAlgorithm\n                        }\n                    }, true, \"hmacHashAlgorithm\");\n                    const pbkdf2Params = new PBKDF2Params({\n                        salt: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: saltBuffer }),\n                        iterationCount: parameters.iterationCount,\n                        prf: new AlgorithmIdentifier({\n                            algorithmId: hmacOID,\n                            algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n                        })\n                    });\n                    const kekOID = crypto.getOIDByAlgorithm(parameters.keyEncryptionAlgorithm, true, \"keyEncryptionAlgorithm\");\n                    const keyInfo = new PasswordRecipientinfo({\n                        version: 0,\n                        keyDerivationAlgorithm: new AlgorithmIdentifier({\n                            algorithmId: pbkdf2OID,\n                            algorithmParams: pbkdf2Params.toSchema()\n                        }),\n                        keyEncryptionAlgorithm: new AlgorithmIdentifier({\n                            algorithmId: kekOID,\n                            algorithmParams: parameters.keyEncryptionAlgorithmParams\n                        }),\n                        password: preDefinedData\n                    });\n                    this.recipientInfos.push(new RecipientInfo({\n                        variant: 4,\n                        value: keyInfo\n                    }));\n                }\n                break;\n            default:\n                throw new Error(`Unknown value for \"variant\": ${variant}`);\n        }\n    }\n    addRecipientByKeyIdentifier(key, keyId, parameters, crypto = getCrypto(true)) {\n        const encryptionParameters = Object.assign({}, defaultEncryptionParams, parameters || {});\n        const recipientIdentifier = new KeyAgreeRecipientIdentifier({\n            variant: 2,\n            value: new RecipientKeyIdentifier({\n                subjectKeyIdentifier: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: keyId }),\n            })\n        });\n        this._addKeyAgreeRecipientInfo(recipientIdentifier, encryptionParameters, { recipientPublicKey: key }, crypto);\n    }\n    _addKeyAgreeRecipientInfo(recipientIdentifier, encryptionParameters, extraRecipientInfoParams, crypto = getCrypto(true)) {\n        const encryptedKey = new RecipientEncryptedKey({\n            rid: recipientIdentifier\n        });\n        const aesKWoid = crypto.getOIDByAlgorithm({\n            name: \"AES-KW\",\n            length: encryptionParameters.kekEncryptionLength\n        }, true, \"keyEncryptionAlgorithm\");\n        const aesKW = new AlgorithmIdentifier({\n            algorithmId: aesKWoid,\n        });\n        const ecdhOID = crypto.getOIDByAlgorithm({\n            name: \"ECDH\",\n            kdf: encryptionParameters.kdfAlgorithm\n        }, true, \"KeyAgreeRecipientInfo\");\n        const ukmBuffer = new ArrayBuffer(64);\n        const ukmView = new Uint8Array(ukmBuffer);\n        crypto.getRandomValues(ukmView);\n        const recipientInfoParams = {\n            version: 3,\n            ukm: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: ukmBuffer }),\n            keyEncryptionAlgorithm: new AlgorithmIdentifier({\n                algorithmId: ecdhOID,\n                algorithmParams: aesKW.toSchema()\n            }),\n            recipientEncryptedKeys: new RecipientEncryptedKeys({\n                encryptedKeys: [encryptedKey]\n            })\n        };\n        const keyInfo = new KeyAgreeRecipientInfo(Object.assign(recipientInfoParams, extraRecipientInfoParams));\n        this.recipientInfos.push(new RecipientInfo({\n            variant: 2,\n            value: keyInfo\n        }));\n    }\n    async encrypt(contentEncryptionAlgorithm, contentToEncrypt, crypto = getCrypto(true)) {\n        const ivBuffer = new ArrayBuffer(16);\n        const ivView = new Uint8Array(ivBuffer);\n        crypto.getRandomValues(ivView);\n        const contentView = new Uint8Array(contentToEncrypt);\n        const contentEncryptionOID = crypto.getOIDByAlgorithm(contentEncryptionAlgorithm, true, \"contentEncryptionAlgorithm\");\n        const sessionKey = await crypto.generateKey(contentEncryptionAlgorithm, true, [\"encrypt\"]);\n        const encryptedContent = await crypto.encrypt({\n            name: contentEncryptionAlgorithm.name,\n            iv: ivView\n        }, sessionKey, contentView);\n        const exportedSessionKey = await crypto.exportKey(\"raw\", sessionKey);\n        this.version = 2;\n        this.encryptedContentInfo = new EncryptedContentInfo({\n            disableSplit: this.policy.disableSplit,\n            contentType: \"1.2.840.113549.1.7.1\",\n            contentEncryptionAlgorithm: new AlgorithmIdentifier({\n                algorithmId: contentEncryptionOID,\n                algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: ivBuffer })\n            }),\n            encryptedContent: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: encryptedContent })\n        });\n        const SubKeyAgreeRecipientInfo = async (index) => {\n            const recipientInfo = this.recipientInfos[index].value;\n            let recipientCurve;\n            let recipientPublicKey;\n            if (recipientInfo.recipientPublicKey) {\n                recipientCurve = recipientInfo.recipientPublicKey.algorithm.namedCurve;\n                recipientPublicKey = recipientInfo.recipientPublicKey;\n            }\n            else if (recipientInfo.recipientCertificate) {\n                const curveObject = recipientInfo.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;\n                if (curveObject.constructor.blockName() !== asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier.blockName())\n                    throw new Error(`Incorrect \"recipientCertificate\" for index ${index}`);\n                const curveOID = curveObject.valueBlock.toString();\n                switch (curveOID) {\n                    case \"1.2.840.10045.3.1.7\":\n                        recipientCurve = \"P-256\";\n                        break;\n                    case \"1.3.132.0.34\":\n                        recipientCurve = \"P-384\";\n                        break;\n                    case \"1.3.132.0.35\":\n                        recipientCurve = \"P-521\";\n                        break;\n                    default:\n                        throw new Error(`Incorrect curve OID for index ${index}`);\n                }\n                recipientPublicKey = await recipientInfo.recipientCertificate.getPublicKey({\n                    algorithm: {\n                        algorithm: {\n                            name: \"ECDH\",\n                            namedCurve: recipientCurve\n                        },\n                        usages: []\n                    }\n                }, crypto);\n            }\n            else {\n                throw new Error(\"Unsupported RecipientInfo\");\n            }\n            const recipientCurveLength = curveLengthByName[recipientCurve];\n            const ecdhKeys = await crypto.generateKey({ name: \"ECDH\", namedCurve: recipientCurve }, true, [\"deriveBits\"]);\n            const exportedECDHPublicKey = await crypto.exportKey(\"spki\", ecdhKeys.publicKey);\n            const derivedBits = await crypto.deriveBits({\n                name: \"ECDH\",\n                public: recipientPublicKey\n            }, ecdhKeys.privateKey, recipientCurveLength);\n            const aesKWAlgorithm = new AlgorithmIdentifier({ schema: recipientInfo.keyEncryptionAlgorithm.algorithmParams });\n            const kwAlgorithm = crypto.getAlgorithmByOID(aesKWAlgorithm.algorithmId, true, \"aesKWAlgorithm\");\n            let kwLength = kwAlgorithm.length;\n            const kwLengthBuffer = new ArrayBuffer(4);\n            const kwLengthView = new Uint8Array(kwLengthBuffer);\n            for (let j = 3; j >= 0; j--) {\n                kwLengthView[j] = kwLength;\n                kwLength >>= 8;\n            }\n            const eccInfo = new ECCCMSSharedInfo({\n                keyInfo: new AlgorithmIdentifier({\n                    algorithmId: aesKWAlgorithm.algorithmId\n                }),\n                entityUInfo: recipientInfo.ukm,\n                suppPubInfo: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: kwLengthBuffer })\n            });\n            const encodedInfo = eccInfo.toSchema().toBER(false);\n            const ecdhAlgorithm = crypto.getAlgorithmByOID(recipientInfo.keyEncryptionAlgorithm.algorithmId, true, \"ecdhAlgorithm\");\n            const derivedKeyRaw = await kdf(ecdhAlgorithm.kdf, derivedBits, kwAlgorithm.length, encodedInfo, crypto);\n            const awsKW = await crypto.importKey(\"raw\", derivedKeyRaw, { name: \"AES-KW\" }, true, [\"wrapKey\"]);\n            const wrappedKey = await crypto.wrapKey(\"raw\", sessionKey, awsKW, { name: \"AES-KW\" });\n            const originator = new OriginatorIdentifierOrKey();\n            originator.variant = 3;\n            originator.value = OriginatorPublicKey.fromBER(exportedECDHPublicKey);\n            recipientInfo.originator = originator;\n            recipientInfo.recipientEncryptedKeys.encryptedKeys[0].encryptedKey = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: wrappedKey });\n            return { ecdhPrivateKey: ecdhKeys.privateKey };\n        };\n        const SubKeyTransRecipientInfo = async (index) => {\n            const recipientInfo = this.recipientInfos[index].value;\n            const algorithmParameters = crypto.getAlgorithmByOID(recipientInfo.keyEncryptionAlgorithm.algorithmId, true, \"keyEncryptionAlgorithm\");\n            if (algorithmParameters.name === \"RSA-OAEP\") {\n                const schema = recipientInfo.keyEncryptionAlgorithm.algorithmParams;\n                const rsaOAEPParams = new RSAESOAEPParams({ schema });\n                algorithmParameters.hash = crypto.getAlgorithmByOID(rsaOAEPParams.hashAlgorithm.algorithmId);\n                if ((\"name\" in algorithmParameters.hash) === false)\n                    throw new Error(`Incorrect OID for hash algorithm: ${rsaOAEPParams.hashAlgorithm.algorithmId}`);\n            }\n            try {\n                const publicKey = await recipientInfo.recipientCertificate.getPublicKey({\n                    algorithm: {\n                        algorithm: algorithmParameters,\n                        usages: [\"encrypt\", \"wrapKey\"]\n                    }\n                }, crypto);\n                const encryptedKey = await crypto.encrypt(publicKey.algorithm, publicKey, exportedSessionKey);\n                recipientInfo.encryptedKey = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: encryptedKey });\n            }\n            catch {\n            }\n        };\n        const SubKEKRecipientInfo = async (index) => {\n            const recipientInfo = this.recipientInfos[index].value;\n            const kekAlgorithm = crypto.getAlgorithmByOID(recipientInfo.keyEncryptionAlgorithm.algorithmId, true, \"kekAlgorithm\");\n            const kekKey = await crypto.importKey(\"raw\", new Uint8Array(recipientInfo.preDefinedKEK), kekAlgorithm, true, [\"wrapKey\"]);\n            const wrappedKey = await crypto.wrapKey(\"raw\", sessionKey, kekKey, kekAlgorithm);\n            recipientInfo.encryptedKey = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: wrappedKey });\n        };\n        const SubPasswordRecipientinfo = async (index) => {\n            const recipientInfo = this.recipientInfos[index].value;\n            let pbkdf2Params;\n            if (!recipientInfo.keyDerivationAlgorithm)\n                throw new Error(\"Please append encoded \\\"keyDerivationAlgorithm\\\"\");\n            if (!recipientInfo.keyDerivationAlgorithm.algorithmParams)\n                throw new Error(\"Incorrectly encoded \\\"keyDerivationAlgorithm\\\"\");\n            try {\n                pbkdf2Params = new PBKDF2Params({ schema: recipientInfo.keyDerivationAlgorithm.algorithmParams });\n            }\n            catch (ex) {\n                throw new Error(\"Incorrectly encoded \\\"keyDerivationAlgorithm\\\"\");\n            }\n            const passwordView = new Uint8Array(recipientInfo.password);\n            const derivationKey = await crypto.importKey(\"raw\", passwordView, \"PBKDF2\", false, [\"deriveKey\"]);\n            const kekAlgorithm = crypto.getAlgorithmByOID(recipientInfo.keyEncryptionAlgorithm.algorithmId, true, \"kekAlgorithm\");\n            let hmacHashAlgorithm = \"SHA-1\";\n            if (pbkdf2Params.prf) {\n                const prfAlgorithm = crypto.getAlgorithmByOID(pbkdf2Params.prf.algorithmId, true, \"prfAlgorithm\");\n                hmacHashAlgorithm = prfAlgorithm.hash.name;\n            }\n            const saltView = new Uint8Array(pbkdf2Params.salt.valueBlock.valueHex);\n            const iterations = pbkdf2Params.iterationCount;\n            const derivedKey = await crypto.deriveKey({\n                name: \"PBKDF2\",\n                hash: {\n                    name: hmacHashAlgorithm\n                },\n                salt: saltView,\n                iterations\n            }, derivationKey, kekAlgorithm, true, [\"wrapKey\"]);\n            const wrappedKey = await crypto.wrapKey(\"raw\", sessionKey, derivedKey, kekAlgorithm);\n            recipientInfo.encryptedKey = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: wrappedKey });\n        };\n        const res = [];\n        for (let i = 0; i < this.recipientInfos.length; i++) {\n            switch (this.recipientInfos[i].variant) {\n                case 1:\n                    res.push(await SubKeyTransRecipientInfo(i));\n                    break;\n                case 2:\n                    res.push(await SubKeyAgreeRecipientInfo(i));\n                    break;\n                case 3:\n                    res.push(await SubKEKRecipientInfo(i));\n                    break;\n                case 4:\n                    res.push(await SubPasswordRecipientinfo(i));\n                    break;\n                default:\n                    throw new Error(`Unknown recipient type in array with index ${i}`);\n            }\n        }\n        return res;\n    }\n    async decrypt(recipientIndex, parameters, crypto = getCrypto(true)) {\n        const decryptionParameters = parameters || {};\n        if ((recipientIndex + 1) > this.recipientInfos.length) {\n            throw new Error(`Maximum value for \"index\" is: ${this.recipientInfos.length - 1}`);\n        }\n        const SubKeyAgreeRecipientInfo = async (index) => {\n            const recipientInfo = this.recipientInfos[index].value;\n            let curveOID;\n            let recipientCurve;\n            let recipientCurveLength;\n            const originator = recipientInfo.originator;\n            if (decryptionParameters.recipientCertificate) {\n                const curveObject = decryptionParameters.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;\n                if (curveObject.constructor.blockName() !== asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier.blockName()) {\n                    throw new Error(`Incorrect \"recipientCertificate\" for index ${index}`);\n                }\n                curveOID = curveObject.valueBlock.toString();\n            }\n            else if (originator.value.algorithm.algorithmParams) {\n                const curveObject = originator.value.algorithm.algorithmParams;\n                if (curveObject.constructor.blockName() !== asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier.blockName()) {\n                    throw new Error(`Incorrect originator for index ${index}`);\n                }\n                curveOID = curveObject.valueBlock.toString();\n            }\n            else {\n                throw new Error(\"Parameter \\\"recipientCertificate\\\" is mandatory for \\\"KeyAgreeRecipientInfo\\\" if algorithm params are missing from originator\");\n            }\n            if (!decryptionParameters.recipientPrivateKey)\n                throw new Error(\"Parameter \\\"recipientPrivateKey\\\" is mandatory for \\\"KeyAgreeRecipientInfo\\\"\");\n            switch (curveOID) {\n                case \"1.2.840.10045.3.1.7\":\n                    recipientCurve = \"P-256\";\n                    recipientCurveLength = 256;\n                    break;\n                case \"1.3.132.0.34\":\n                    recipientCurve = \"P-384\";\n                    recipientCurveLength = 384;\n                    break;\n                case \"1.3.132.0.35\":\n                    recipientCurve = \"P-521\";\n                    recipientCurveLength = 528;\n                    break;\n                default:\n                    throw new Error(`Incorrect curve OID for index ${index}`);\n            }\n            let ecdhPrivateKey;\n            let keyCrypto = crypto;\n            if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isBufferSource(decryptionParameters.recipientPrivateKey)) {\n                ecdhPrivateKey = await crypto.importKey(\"pkcs8\", decryptionParameters.recipientPrivateKey, {\n                    name: \"ECDH\",\n                    namedCurve: recipientCurve\n                }, true, [\"deriveBits\"]);\n            }\n            else {\n                ecdhPrivateKey = decryptionParameters.recipientPrivateKey;\n                if (\"crypto\" in decryptionParameters && decryptionParameters.crypto) {\n                    keyCrypto = decryptionParameters.crypto.subtle;\n                }\n            }\n            if ((\"algorithmParams\" in originator.value.algorithm) === false)\n                originator.value.algorithm.algorithmParams = new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: curveOID });\n            const buffer = originator.value.toSchema().toBER(false);\n            const ecdhPublicKey = await crypto.importKey(\"spki\", buffer, {\n                name: \"ECDH\",\n                namedCurve: recipientCurve\n            }, true, []);\n            const sharedSecret = await keyCrypto.deriveBits({\n                name: \"ECDH\",\n                public: ecdhPublicKey\n            }, ecdhPrivateKey, recipientCurveLength);\n            async function applyKDF(includeAlgorithmParams) {\n                includeAlgorithmParams = includeAlgorithmParams || false;\n                const aesKWAlgorithm = new AlgorithmIdentifier({ schema: recipientInfo.keyEncryptionAlgorithm.algorithmParams });\n                const kwAlgorithm = crypto.getAlgorithmByOID(aesKWAlgorithm.algorithmId, true, \"kwAlgorithm\");\n                let kwLength = kwAlgorithm.length;\n                const kwLengthBuffer = new ArrayBuffer(4);\n                const kwLengthView = new Uint8Array(kwLengthBuffer);\n                for (let j = 3; j >= 0; j--) {\n                    kwLengthView[j] = kwLength;\n                    kwLength >>= 8;\n                }\n                const keyInfoAlgorithm = {\n                    algorithmId: aesKWAlgorithm.algorithmId\n                };\n                if (includeAlgorithmParams) {\n                    keyInfoAlgorithm.algorithmParams = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null();\n                }\n                const eccInfo = new ECCCMSSharedInfo({\n                    keyInfo: new AlgorithmIdentifier(keyInfoAlgorithm),\n                    entityUInfo: recipientInfo.ukm,\n                    suppPubInfo: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: kwLengthBuffer })\n                });\n                const encodedInfo = eccInfo.toSchema().toBER(false);\n                const ecdhAlgorithm = crypto.getAlgorithmByOID(recipientInfo.keyEncryptionAlgorithm.algorithmId, true, \"ecdhAlgorithm\");\n                if (!ecdhAlgorithm.name) {\n                    throw new Error(`Incorrect OID for key encryption algorithm: ${recipientInfo.keyEncryptionAlgorithm.algorithmId}`);\n                }\n                return kdf(ecdhAlgorithm.kdf, sharedSecret, kwAlgorithm.length, encodedInfo, crypto);\n            }\n            const kdfResult = await applyKDF();\n            const importAesKwKey = async (kdfResult) => {\n                return crypto.importKey(\"raw\", kdfResult, { name: \"AES-KW\" }, true, [\"unwrapKey\"]);\n            };\n            const aesKwKey = await importAesKwKey(kdfResult);\n            const unwrapSessionKey = async (aesKwKey) => {\n                const algorithmId = this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;\n                const contentEncryptionAlgorithm = crypto.getAlgorithmByOID(algorithmId, true, \"contentEncryptionAlgorithm\");\n                return crypto.unwrapKey(\"raw\", recipientInfo.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView, aesKwKey, { name: \"AES-KW\" }, contentEncryptionAlgorithm, true, [\"decrypt\"]);\n            };\n            try {\n                return await unwrapSessionKey(aesKwKey);\n            }\n            catch {\n                const kdfResult = await applyKDF(true);\n                const aesKwKey = await importAesKwKey(kdfResult);\n                return unwrapSessionKey(aesKwKey);\n            }\n        };\n        const SubKeyTransRecipientInfo = async (index) => {\n            const recipientInfo = this.recipientInfos[index].value;\n            if (!decryptionParameters.recipientPrivateKey) {\n                throw new Error(\"Parameter \\\"recipientPrivateKey\\\" is mandatory for \\\"KeyTransRecipientInfo\\\"\");\n            }\n            const algorithmParameters = crypto.getAlgorithmByOID(recipientInfo.keyEncryptionAlgorithm.algorithmId, true, \"keyEncryptionAlgorithm\");\n            if (algorithmParameters.name === \"RSA-OAEP\") {\n                const schema = recipientInfo.keyEncryptionAlgorithm.algorithmParams;\n                const rsaOAEPParams = new RSAESOAEPParams({ schema });\n                algorithmParameters.hash = crypto.getAlgorithmByOID(rsaOAEPParams.hashAlgorithm.algorithmId);\n                if ((\"name\" in algorithmParameters.hash) === false)\n                    throw new Error(`Incorrect OID for hash algorithm: ${rsaOAEPParams.hashAlgorithm.algorithmId}`);\n            }\n            let privateKey;\n            let keyCrypto = crypto;\n            if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isBufferSource(decryptionParameters.recipientPrivateKey)) {\n                privateKey = await crypto.importKey(\"pkcs8\", decryptionParameters.recipientPrivateKey, algorithmParameters, true, [\"decrypt\"]);\n            }\n            else {\n                privateKey = decryptionParameters.recipientPrivateKey;\n                if (\"crypto\" in decryptionParameters && decryptionParameters.crypto) {\n                    keyCrypto = decryptionParameters.crypto.subtle;\n                }\n            }\n            const sessionKey = await keyCrypto.decrypt(privateKey.algorithm, privateKey, recipientInfo.encryptedKey.valueBlock.valueHexView);\n            const algorithmId = this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;\n            const contentEncryptionAlgorithm = crypto.getAlgorithmByOID(algorithmId, true, \"contentEncryptionAlgorithm\");\n            if ((\"name\" in contentEncryptionAlgorithm) === false)\n                throw new Error(`Incorrect \"contentEncryptionAlgorithm\": ${algorithmId}`);\n            return crypto.importKey(\"raw\", sessionKey, contentEncryptionAlgorithm, true, [\"decrypt\"]);\n        };\n        const SubKEKRecipientInfo = async (index) => {\n            const recipientInfo = this.recipientInfos[index].value;\n            if (!decryptionParameters.preDefinedData)\n                throw new Error(\"Parameter \\\"preDefinedData\\\" is mandatory for \\\"KEKRecipientInfo\\\"\");\n            const kekAlgorithm = crypto.getAlgorithmByOID(recipientInfo.keyEncryptionAlgorithm.algorithmId, true, \"kekAlgorithm\");\n            const importedKey = await crypto.importKey(\"raw\", decryptionParameters.preDefinedData, kekAlgorithm, true, [\"unwrapKey\"]);\n            const algorithmId = this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;\n            const contentEncryptionAlgorithm = crypto.getAlgorithmByOID(algorithmId, true, \"contentEncryptionAlgorithm\");\n            if (!contentEncryptionAlgorithm.name) {\n                throw new Error(`Incorrect \"contentEncryptionAlgorithm\": ${algorithmId}`);\n            }\n            return crypto.unwrapKey(\"raw\", recipientInfo.encryptedKey.valueBlock.valueHexView, importedKey, kekAlgorithm, contentEncryptionAlgorithm, true, [\"decrypt\"]);\n        };\n        const SubPasswordRecipientinfo = async (index) => {\n            const recipientInfo = this.recipientInfos[index].value;\n            let pbkdf2Params;\n            if (!decryptionParameters.preDefinedData) {\n                throw new Error(\"Parameter \\\"preDefinedData\\\" is mandatory for \\\"KEKRecipientInfo\\\"\");\n            }\n            if (!recipientInfo.keyDerivationAlgorithm) {\n                throw new Error(\"Please append encoded \\\"keyDerivationAlgorithm\\\"\");\n            }\n            if (!recipientInfo.keyDerivationAlgorithm.algorithmParams) {\n                throw new Error(\"Incorrectly encoded \\\"keyDerivationAlgorithm\\\"\");\n            }\n            try {\n                pbkdf2Params = new PBKDF2Params({ schema: recipientInfo.keyDerivationAlgorithm.algorithmParams });\n            }\n            catch (ex) {\n                throw new Error(\"Incorrectly encoded \\\"keyDerivationAlgorithm\\\"\");\n            }\n            const pbkdf2Key = await crypto.importKey(\"raw\", decryptionParameters.preDefinedData, \"PBKDF2\", false, [\"deriveKey\"]);\n            const kekAlgorithm = crypto.getAlgorithmByOID(recipientInfo.keyEncryptionAlgorithm.algorithmId, true, \"keyEncryptionAlgorithm\");\n            const hmacHashAlgorithm = pbkdf2Params.prf\n                ? crypto.getAlgorithmByOID(pbkdf2Params.prf.algorithmId, true, \"prfAlgorithm\").hash.name\n                : \"SHA-1\";\n            const saltView = new Uint8Array(pbkdf2Params.salt.valueBlock.valueHex);\n            const iterations = pbkdf2Params.iterationCount;\n            const kekKey = await crypto.deriveKey({\n                name: \"PBKDF2\",\n                hash: {\n                    name: hmacHashAlgorithm\n                },\n                salt: saltView,\n                iterations\n            }, pbkdf2Key, kekAlgorithm, true, [\"unwrapKey\"]);\n            const algorithmId = this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;\n            const contentEncryptionAlgorithm = crypto.getAlgorithmByOID(algorithmId, true, \"contentEncryptionAlgorithm\");\n            return crypto.unwrapKey(\"raw\", recipientInfo.encryptedKey.valueBlock.valueHexView, kekKey, kekAlgorithm, contentEncryptionAlgorithm, true, [\"decrypt\"]);\n        };\n        let unwrappedKey;\n        switch (this.recipientInfos[recipientIndex].variant) {\n            case 1:\n                unwrappedKey = await SubKeyTransRecipientInfo(recipientIndex);\n                break;\n            case 2:\n                unwrappedKey = await SubKeyAgreeRecipientInfo(recipientIndex);\n                break;\n            case 3:\n                unwrappedKey = await SubKEKRecipientInfo(recipientIndex);\n                break;\n            case 4:\n                unwrappedKey = await SubPasswordRecipientinfo(recipientIndex);\n                break;\n            default:\n                throw new Error(`Unknown recipient type in array with index ${recipientIndex}`);\n        }\n        const algorithmId = this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;\n        const contentEncryptionAlgorithm = crypto.getAlgorithmByOID(algorithmId, true, \"contentEncryptionAlgorithm\");\n        const ivBuffer = this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex;\n        const ivView = new Uint8Array(ivBuffer);\n        if (!this.encryptedContentInfo.encryptedContent) {\n            throw new Error(\"Required property `encryptedContent` is empty\");\n        }\n        const dataBuffer = this.encryptedContentInfo.getEncryptedContent();\n        return crypto.decrypt({\n            name: contentEncryptionAlgorithm.name,\n            iv: ivView\n        }, unwrappedKey, dataBuffer);\n    }\n}\nEnvelopedData.CLASS_NAME = \"EnvelopedData\";\n\nconst SAFE_CONTENTS = \"safeContents\";\nconst PARSED_VALUE$1 = \"parsedValue\";\nconst CONTENT_INFOS = \"contentInfos\";\nclass AuthenticatedSafe extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.safeContents = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SAFE_CONTENTS, AuthenticatedSafe.defaultValues(SAFE_CONTENTS));\n        if (PARSED_VALUE$1 in parameters) {\n            this.parsedValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PARSED_VALUE$1, AuthenticatedSafe.defaultValues(PARSED_VALUE$1));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case SAFE_CONTENTS:\n                return [];\n            case PARSED_VALUE$1:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case SAFE_CONTENTS:\n                return (memberValue.length === 0);\n            case PARSED_VALUE$1:\n                return ((memberValue instanceof Object) && (Object.keys(memberValue).length === 0));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.contentInfos || EMPTY_STRING),\n                    value: ContentInfo.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            CONTENT_INFOS\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, AuthenticatedSafe.schema({\n            names: {\n                contentInfos: CONTENT_INFOS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.safeContents = Array.from(asn1.result.contentInfos, element => new ContentInfo({ schema: element }));\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: Array.from(this.safeContents, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        return {\n            safeContents: Array.from(this.safeContents, o => o.toJSON())\n        };\n    }\n    async parseInternalValues(parameters, crypto = getCrypto(true)) {\n        ParameterError.assert(parameters, SAFE_CONTENTS);\n        ArgumentError.assert(parameters.safeContents, SAFE_CONTENTS, \"Array\");\n        if (parameters.safeContents.length !== this.safeContents.length) {\n            throw new ArgumentError(\"Length of \\\"parameters.safeContents\\\" must be equal to \\\"this.safeContents.length\\\"\");\n        }\n        this.parsedValue = {\n            safeContents: [],\n        };\n        for (const [index, content] of this.safeContents.entries()) {\n            const safeContent = parameters.safeContents[index];\n            const errorTarget = `parameters.safeContents[${index}]`;\n            switch (content.contentType) {\n                case id_ContentType_Data:\n                    {\n                        ArgumentError.assert(content.content, \"this.safeContents[j].content\", asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString);\n                        const authSafeContent = content.content.getValue();\n                        this.parsedValue.safeContents.push({\n                            privacyMode: 0,\n                            value: SafeContents.fromBER(authSafeContent)\n                        });\n                    }\n                    break;\n                case id_ContentType_EnvelopedData:\n                    {\n                        const cmsEnveloped = new EnvelopedData({ schema: content.content });\n                        ParameterError.assert(errorTarget, safeContent, \"recipientCertificate\", \"recipientKey\");\n                        const envelopedData = safeContent;\n                        const recipientCertificate = envelopedData.recipientCertificate;\n                        const recipientKey = envelopedData.recipientKey;\n                        const decrypted = await cmsEnveloped.decrypt(0, {\n                            recipientCertificate,\n                            recipientPrivateKey: recipientKey\n                        }, crypto);\n                        this.parsedValue.safeContents.push({\n                            privacyMode: 2,\n                            value: SafeContents.fromBER(decrypted),\n                        });\n                    }\n                    break;\n                case id_ContentType_EncryptedData:\n                    {\n                        const cmsEncrypted = new EncryptedData({ schema: content.content });\n                        ParameterError.assert(errorTarget, safeContent, \"password\");\n                        const password = safeContent.password;\n                        const decrypted = await cmsEncrypted.decrypt({\n                            password\n                        }, crypto);\n                        this.parsedValue.safeContents.push({\n                            privacyMode: 1,\n                            value: SafeContents.fromBER(decrypted),\n                        });\n                    }\n                    break;\n                default:\n                    throw new Error(`Unknown \"contentType\" for AuthenticatedSafe: \" ${content.contentType}`);\n            }\n        }\n    }\n    async makeInternalValues(parameters, crypto = getCrypto(true)) {\n        if (!(this.parsedValue)) {\n            throw new Error(\"Please run \\\"parseValues\\\" first or add \\\"parsedValue\\\" manually\");\n        }\n        ArgumentError.assert(this.parsedValue, \"this.parsedValue\", \"object\");\n        ArgumentError.assert(this.parsedValue.safeContents, \"this.parsedValue.safeContents\", \"Array\");\n        ArgumentError.assert(parameters, \"parameters\", \"object\");\n        ParameterError.assert(parameters, \"safeContents\");\n        ArgumentError.assert(parameters.safeContents, \"parameters.safeContents\", \"Array\");\n        if (parameters.safeContents.length !== this.parsedValue.safeContents.length) {\n            throw new ArgumentError(\"Length of \\\"parameters.safeContents\\\" must be equal to \\\"this.parsedValue.safeContents\\\"\");\n        }\n        this.safeContents = [];\n        for (const [index, content] of this.parsedValue.safeContents.entries()) {\n            ParameterError.assert(\"content\", content, \"privacyMode\", \"value\");\n            ArgumentError.assert(content.value, \"content.value\", SafeContents);\n            switch (content.privacyMode) {\n                case 0:\n                    {\n                        const contentBuffer = content.value.toSchema().toBER(false);\n                        this.safeContents.push(new ContentInfo({\n                            contentType: \"1.2.840.113549.1.7.1\",\n                            content: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: contentBuffer })\n                        }));\n                    }\n                    break;\n                case 1:\n                    {\n                        const cmsEncrypted = new EncryptedData();\n                        const currentParameters = parameters.safeContents[index];\n                        currentParameters.contentToEncrypt = content.value.toSchema().toBER(false);\n                        await cmsEncrypted.encrypt(currentParameters, crypto);\n                        this.safeContents.push(new ContentInfo({\n                            contentType: \"1.2.840.113549.1.7.6\",\n                            content: cmsEncrypted.toSchema()\n                        }));\n                    }\n                    break;\n                case 2:\n                    {\n                        const cmsEnveloped = new EnvelopedData();\n                        const contentToEncrypt = content.value.toSchema().toBER(false);\n                        const safeContent = parameters.safeContents[index];\n                        ParameterError.assert(`parameters.safeContents[${index}]`, safeContent, \"encryptingCertificate\", \"encryptionAlgorithm\");\n                        switch (true) {\n                            case (safeContent.encryptionAlgorithm.name.toLowerCase() === \"aes-cbc\"):\n                            case (safeContent.encryptionAlgorithm.name.toLowerCase() === \"aes-gcm\"):\n                                break;\n                            default:\n                                throw new Error(`Incorrect parameter \"encryptionAlgorithm\" in \"parameters.safeContents[i]\": ${safeContent.encryptionAlgorithm}`);\n                        }\n                        switch (true) {\n                            case (safeContent.encryptionAlgorithm.length === 128):\n                            case (safeContent.encryptionAlgorithm.length === 192):\n                            case (safeContent.encryptionAlgorithm.length === 256):\n                                break;\n                            default:\n                                throw new Error(`Incorrect parameter \"encryptionAlgorithm.length\" in \"parameters.safeContents[i]\": ${safeContent.encryptionAlgorithm.length}`);\n                        }\n                        const encryptionAlgorithm = safeContent.encryptionAlgorithm;\n                        cmsEnveloped.addRecipientByCertificate(safeContent.encryptingCertificate, {}, undefined, crypto);\n                        await cmsEnveloped.encrypt(encryptionAlgorithm, contentToEncrypt, crypto);\n                        this.safeContents.push(new ContentInfo({\n                            contentType: \"1.2.840.113549.1.7.3\",\n                            content: cmsEnveloped.toSchema()\n                        }));\n                    }\n                    break;\n                default:\n                    throw new Error(`Incorrect value for \"content.privacyMode\": ${content.privacyMode}`);\n            }\n        }\n        return this;\n    }\n}\nAuthenticatedSafe.CLASS_NAME = \"AuthenticatedSafe\";\n\nconst HASH_ALGORITHM$1 = \"hashAlgorithm\";\nconst ISSUER_NAME_HASH = \"issuerNameHash\";\nconst ISSUER_KEY_HASH = \"issuerKeyHash\";\nconst SERIAL_NUMBER$1 = \"serialNumber\";\nconst CLEAR_PROPS$j = [\n    HASH_ALGORITHM$1,\n    ISSUER_NAME_HASH,\n    ISSUER_KEY_HASH,\n    SERIAL_NUMBER$1,\n];\nclass CertID extends PkiObject {\n    static async create(certificate, parameters, crypto = getCrypto(true)) {\n        const certID = new CertID();\n        await certID.createForCertificate(certificate, parameters, crypto);\n        return certID;\n    }\n    constructor(parameters = {}) {\n        super();\n        this.hashAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, HASH_ALGORITHM$1, CertID.defaultValues(HASH_ALGORITHM$1));\n        this.issuerNameHash = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER_NAME_HASH, CertID.defaultValues(ISSUER_NAME_HASH));\n        this.issuerKeyHash = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ISSUER_KEY_HASH, CertID.defaultValues(ISSUER_KEY_HASH));\n        this.serialNumber = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SERIAL_NUMBER$1, CertID.defaultValues(SERIAL_NUMBER$1));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case HASH_ALGORITHM$1:\n                return new AlgorithmIdentifier();\n            case ISSUER_NAME_HASH:\n            case ISSUER_KEY_HASH:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case SERIAL_NUMBER$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case HASH_ALGORITHM$1:\n                return ((memberValue.algorithmId === EMPTY_STRING) && ((\"algorithmParams\" in memberValue) === false));\n            case ISSUER_NAME_HASH:\n            case ISSUER_KEY_HASH:\n            case SERIAL_NUMBER$1:\n                return (memberValue.isEqual(CertID.defaultValues(SERIAL_NUMBER$1)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.hashAlgorithmObject || {\n                    names: {\n                        blockName: (names.hashAlgorithm || EMPTY_STRING)\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.issuerNameHash || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.issuerKeyHash || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.serialNumber || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$j);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CertID.schema({\n            names: {\n                hashAlgorithm: HASH_ALGORITHM$1,\n                issuerNameHash: ISSUER_NAME_HASH,\n                issuerKeyHash: ISSUER_KEY_HASH,\n                serialNumber: SERIAL_NUMBER$1\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.hashAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.hashAlgorithm });\n        this.issuerNameHash = asn1.result.issuerNameHash;\n        this.issuerKeyHash = asn1.result.issuerKeyHash;\n        this.serialNumber = asn1.result.serialNumber;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.hashAlgorithm.toSchema(),\n                this.issuerNameHash,\n                this.issuerKeyHash,\n                this.serialNumber\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            hashAlgorithm: this.hashAlgorithm.toJSON(),\n            issuerNameHash: this.issuerNameHash.toJSON(),\n            issuerKeyHash: this.issuerKeyHash.toJSON(),\n            serialNumber: this.serialNumber.toJSON(),\n        };\n    }\n    isEqual(certificateID) {\n        if (this.hashAlgorithm.algorithmId !== certificateID.hashAlgorithm.algorithmId) {\n            return false;\n        }\n        if (!pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(this.issuerNameHash.valueBlock.valueHexView, certificateID.issuerNameHash.valueBlock.valueHexView)) {\n            return false;\n        }\n        if (!pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(this.issuerKeyHash.valueBlock.valueHexView, certificateID.issuerKeyHash.valueBlock.valueHexView)) {\n            return false;\n        }\n        if (!this.serialNumber.isEqual(certificateID.serialNumber)) {\n            return false;\n        }\n        return true;\n    }\n    async createForCertificate(certificate, parameters, crypto = getCrypto(true)) {\n        ParameterError.assert(parameters, HASH_ALGORITHM$1, \"issuerCertificate\");\n        const hashOID = crypto.getOIDByAlgorithm({ name: parameters.hashAlgorithm }, true, \"hashAlgorithm\");\n        this.hashAlgorithm = new AlgorithmIdentifier({\n            algorithmId: hashOID,\n            algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n        });\n        const issuerCertificate = parameters.issuerCertificate;\n        this.serialNumber = certificate.serialNumber;\n        const hashIssuerName = await crypto.digest({ name: parameters.hashAlgorithm }, issuerCertificate.subject.toSchema().toBER(false));\n        this.issuerNameHash = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: hashIssuerName });\n        const issuerKeyBuffer = issuerCertificate.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView;\n        const hashIssuerKey = await crypto.digest({ name: parameters.hashAlgorithm }, issuerKeyBuffer);\n        this.issuerKeyHash = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: hashIssuerKey });\n    }\n}\nCertID.CLASS_NAME = \"CertID\";\n\nconst CERT_ID = \"certID\";\nconst CERT_STATUS = \"certStatus\";\nconst THIS_UPDATE = \"thisUpdate\";\nconst NEXT_UPDATE = \"nextUpdate\";\nconst SINGLE_EXTENSIONS = \"singleExtensions\";\nconst CLEAR_PROPS$i = [\n    CERT_ID,\n    CERT_STATUS,\n    THIS_UPDATE,\n    NEXT_UPDATE,\n    SINGLE_EXTENSIONS,\n];\nclass SingleResponse extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.certID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERT_ID, SingleResponse.defaultValues(CERT_ID));\n        this.certStatus = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERT_STATUS, SingleResponse.defaultValues(CERT_STATUS));\n        this.thisUpdate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, THIS_UPDATE, SingleResponse.defaultValues(THIS_UPDATE));\n        if (NEXT_UPDATE in parameters) {\n            this.nextUpdate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NEXT_UPDATE, SingleResponse.defaultValues(NEXT_UPDATE));\n        }\n        if (SINGLE_EXTENSIONS in parameters) {\n            this.singleExtensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SINGLE_EXTENSIONS, SingleResponse.defaultValues(SINGLE_EXTENSIONS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case CERT_ID:\n                return new CertID();\n            case CERT_STATUS:\n                return {};\n            case THIS_UPDATE:\n            case NEXT_UPDATE:\n                return new Date(0, 0, 0);\n            case SINGLE_EXTENSIONS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case CERT_ID:\n                return ((CertID.compareWithDefault(\"hashAlgorithm\", memberValue.hashAlgorithm)) &&\n                    (CertID.compareWithDefault(\"issuerNameHash\", memberValue.issuerNameHash)) &&\n                    (CertID.compareWithDefault(\"issuerKeyHash\", memberValue.issuerKeyHash)) &&\n                    (CertID.compareWithDefault(\"serialNumber\", memberValue.serialNumber)));\n            case CERT_STATUS:\n                return (Object.keys(memberValue).length === 0);\n            case THIS_UPDATE:\n            case NEXT_UPDATE:\n                return (memberValue === SingleResponse.defaultValues(memberName));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                CertID.schema(names.certID || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                            name: (names.certStatus || EMPTY_STRING),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 0\n                            },\n                        }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            name: (names.certStatus || EMPTY_STRING),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 1\n                            },\n                            value: [\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime(),\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                    optional: true,\n                                    idBlock: {\n                                        tagClass: 3,\n                                        tagNumber: 0\n                                    },\n                                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Enumerated()]\n                                })\n                            ]\n                        }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                            name: (names.certStatus || EMPTY_STRING),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 2\n                            },\n                            lenBlock: { length: 1 }\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ name: (names.thisUpdate || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ name: (names.nextUpdate || EMPTY_STRING) })]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [Extensions.schema(names.singleExtensions || {})]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$i);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, SingleResponse.schema({\n            names: {\n                certID: {\n                    names: {\n                        blockName: CERT_ID\n                    }\n                },\n                certStatus: CERT_STATUS,\n                thisUpdate: THIS_UPDATE,\n                nextUpdate: NEXT_UPDATE,\n                singleExtensions: {\n                    names: {\n                        blockName: SINGLE_EXTENSIONS\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.certID = new CertID({ schema: asn1.result.certID });\n        this.certStatus = asn1.result.certStatus;\n        this.thisUpdate = asn1.result.thisUpdate.toDate();\n        if (NEXT_UPDATE in asn1.result)\n            this.nextUpdate = asn1.result.nextUpdate.toDate();\n        if (SINGLE_EXTENSIONS in asn1.result)\n            this.singleExtensions = Array.from(asn1.result.singleExtensions.valueBlock.value, element => new Extension({ schema: element }));\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.certID.toSchema());\n        outputArray.push(this.certStatus);\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.thisUpdate }));\n        if (this.nextUpdate) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.nextUpdate })]\n            }));\n        }\n        if (this.singleExtensions) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: Array.from(this.singleExtensions, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            certID: this.certID.toJSON(),\n            certStatus: this.certStatus.toJSON(),\n            thisUpdate: this.thisUpdate\n        };\n        if (this.nextUpdate) {\n            res.nextUpdate = this.nextUpdate;\n        }\n        if (this.singleExtensions) {\n            res.singleExtensions = Array.from(this.singleExtensions, o => o.toJSON());\n        }\n        return res;\n    }\n}\nSingleResponse.CLASS_NAME = \"SingleResponse\";\n\nconst TBS$2 = \"tbs\";\nconst VERSION$7 = \"version\";\nconst RESPONDER_ID = \"responderID\";\nconst PRODUCED_AT = \"producedAt\";\nconst RESPONSES = \"responses\";\nconst RESPONSE_EXTENSIONS = \"responseExtensions\";\nconst RESPONSE_DATA = \"ResponseData\";\nconst RESPONSE_DATA_VERSION = `${RESPONSE_DATA}.${VERSION$7}`;\nconst RESPONSE_DATA_RESPONDER_ID = `${RESPONSE_DATA}.${RESPONDER_ID}`;\nconst RESPONSE_DATA_PRODUCED_AT = `${RESPONSE_DATA}.${PRODUCED_AT}`;\nconst RESPONSE_DATA_RESPONSES = `${RESPONSE_DATA}.${RESPONSES}`;\nconst RESPONSE_DATA_RESPONSE_EXTENSIONS = `${RESPONSE_DATA}.${RESPONSE_EXTENSIONS}`;\nconst CLEAR_PROPS$h = [\n    RESPONSE_DATA,\n    RESPONSE_DATA_VERSION,\n    RESPONSE_DATA_RESPONDER_ID,\n    RESPONSE_DATA_PRODUCED_AT,\n    RESPONSE_DATA_RESPONSES,\n    RESPONSE_DATA_RESPONSE_EXTENSIONS\n];\nclass ResponseData extends PkiObject {\n    get tbs() {\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(this.tbsView);\n    }\n    set tbs(value) {\n        this.tbsView = new Uint8Array(value);\n    }\n    constructor(parameters = {}) {\n        super();\n        this.tbsView = new Uint8Array(pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TBS$2, ResponseData.defaultValues(TBS$2)));\n        if (VERSION$7 in parameters) {\n            this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$7, ResponseData.defaultValues(VERSION$7));\n        }\n        this.responderID = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RESPONDER_ID, ResponseData.defaultValues(RESPONDER_ID));\n        this.producedAt = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PRODUCED_AT, ResponseData.defaultValues(PRODUCED_AT));\n        this.responses = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RESPONSES, ResponseData.defaultValues(RESPONSES));\n        if (RESPONSE_EXTENSIONS in parameters) {\n            this.responseExtensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RESPONSE_EXTENSIONS, ResponseData.defaultValues(RESPONSE_EXTENSIONS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$7:\n                return 0;\n            case TBS$2:\n                return EMPTY_BUFFER;\n            case RESPONDER_ID:\n                return {};\n            case PRODUCED_AT:\n                return new Date(0, 0, 0);\n            case RESPONSES:\n            case RESPONSE_EXTENSIONS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case TBS$2:\n                return (memberValue.byteLength === 0);\n            case RESPONDER_ID:\n                return (Object.keys(memberValue).length === 0);\n            case PRODUCED_AT:\n                return (memberValue === ResponseData.defaultValues(memberName));\n            case RESPONSES:\n            case RESPONSE_EXTENSIONS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || RESPONSE_DATA),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || RESPONSE_DATA_VERSION) })]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            name: (names.responderID || RESPONSE_DATA_RESPONDER_ID),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 1\n                            },\n                            value: [RelativeDistinguishedNames.schema(names.ResponseDataByName || {\n                                    names: {\n                                        blockName: \"ResponseData.byName\"\n                                    }\n                                })]\n                        }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                            name: (names.responderID || RESPONSE_DATA_RESPONDER_ID),\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: 2\n                            },\n                            value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.ResponseDataByKey || \"ResponseData.byKey\") })]\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ name: (names.producedAt || RESPONSE_DATA_PRODUCED_AT) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: RESPONSE_DATA_RESPONSES,\n                            value: SingleResponse.schema(names.response || {})\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [Extensions.schema(names.extensions || {\n                            names: {\n                                blockName: RESPONSE_DATA_RESPONSE_EXTENSIONS\n                            }\n                        })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$h);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, ResponseData.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.tbsView = asn1.result.ResponseData.valueBeforeDecodeView;\n        if (RESPONSE_DATA_VERSION in asn1.result)\n            this.version = asn1.result[RESPONSE_DATA_VERSION].valueBlock.valueDec;\n        if (asn1.result[RESPONSE_DATA_RESPONDER_ID].idBlock.tagNumber === 1)\n            this.responderID = new RelativeDistinguishedNames({ schema: asn1.result[RESPONSE_DATA_RESPONDER_ID].valueBlock.value[0] });\n        else\n            this.responderID = asn1.result[RESPONSE_DATA_RESPONDER_ID].valueBlock.value[0];\n        this.producedAt = asn1.result[RESPONSE_DATA_PRODUCED_AT].toDate();\n        this.responses = Array.from(asn1.result[RESPONSE_DATA_RESPONSES], element => new SingleResponse({ schema: element }));\n        if (RESPONSE_DATA_RESPONSE_EXTENSIONS in asn1.result)\n            this.responseExtensions = Array.from(asn1.result[RESPONSE_DATA_RESPONSE_EXTENSIONS].valueBlock.value, element => new Extension({ schema: element }));\n    }\n    toSchema(encodeFlag = false) {\n        let tbsSchema;\n        if (encodeFlag === false) {\n            if (!this.tbsView.byteLength) {\n                return ResponseData.schema();\n            }\n            const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.tbsView);\n            AsnError.assert(asn1, \"TBS Response Data\");\n            tbsSchema = asn1.result;\n        }\n        else {\n            const outputArray = [];\n            if (VERSION$7 in this) {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version })]\n                }));\n            }\n            if (this.responderID instanceof RelativeDistinguishedNames) {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [this.responderID.toSchema()]\n                }));\n            }\n            else {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    value: [this.responderID]\n                }));\n            }\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.producedAt }));\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: Array.from(this.responses, o => o.toSchema())\n            }));\n            if (this.responseExtensions) {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                            value: Array.from(this.responseExtensions, o => o.toSchema())\n                        })]\n                }));\n            }\n            tbsSchema = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: outputArray\n            });\n        }\n        return tbsSchema;\n    }\n    toJSON() {\n        const res = {};\n        if (VERSION$7 in this) {\n            res.version = this.version;\n        }\n        if (this.responderID) {\n            res.responderID = this.responderID;\n        }\n        if (this.producedAt) {\n            res.producedAt = this.producedAt;\n        }\n        if (this.responses) {\n            res.responses = Array.from(this.responses, o => o.toJSON());\n        }\n        if (this.responseExtensions) {\n            res.responseExtensions = Array.from(this.responseExtensions, o => o.toJSON());\n        }\n        return res;\n    }\n}\nResponseData.CLASS_NAME = \"ResponseData\";\n\nconst TRUSTED_CERTS = \"trustedCerts\";\nconst CERTS$2 = \"certs\";\nconst CRLS$1 = \"crls\";\nconst OCSPS$1 = \"ocsps\";\nconst CHECK_DATE = \"checkDate\";\nconst FIND_ORIGIN = \"findOrigin\";\nconst FIND_ISSUER = \"findIssuer\";\nvar ChainValidationCode;\n(function (ChainValidationCode) {\n    ChainValidationCode[ChainValidationCode[\"unknown\"] = -1] = \"unknown\";\n    ChainValidationCode[ChainValidationCode[\"success\"] = 0] = \"success\";\n    ChainValidationCode[ChainValidationCode[\"noRevocation\"] = 11] = \"noRevocation\";\n    ChainValidationCode[ChainValidationCode[\"noPath\"] = 60] = \"noPath\";\n    ChainValidationCode[ChainValidationCode[\"noValidPath\"] = 97] = \"noValidPath\";\n})(ChainValidationCode || (ChainValidationCode = {}));\nclass ChainValidationError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.name = ChainValidationError.NAME;\n        this.code = code;\n        this.message = message;\n    }\n}\nChainValidationError.NAME = \"ChainValidationError\";\nfunction isTrusted(cert, trustedList) {\n    for (let i = 0; i < trustedList.length; i++) {\n        if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(cert.tbsView, trustedList[i].tbsView)) {\n            return true;\n        }\n    }\n    return false;\n}\nclass CertificateChainValidationEngine {\n    constructor(parameters = {}) {\n        this.trustedCerts = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TRUSTED_CERTS, this.defaultValues(TRUSTED_CERTS));\n        this.certs = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERTS$2, this.defaultValues(CERTS$2));\n        this.crls = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRLS$1, this.defaultValues(CRLS$1));\n        this.ocsps = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OCSPS$1, this.defaultValues(OCSPS$1));\n        this.checkDate = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CHECK_DATE, this.defaultValues(CHECK_DATE));\n        this.findOrigin = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, FIND_ORIGIN, this.defaultValues(FIND_ORIGIN));\n        this.findIssuer = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, FIND_ISSUER, this.defaultValues(FIND_ISSUER));\n    }\n    static defaultFindOrigin(certificate, validationEngine) {\n        if (certificate.tbsView.byteLength === 0) {\n            certificate.tbsView = new Uint8Array(certificate.encodeTBS().toBER());\n        }\n        for (const localCert of validationEngine.certs) {\n            if (localCert.tbsView.byteLength === 0) {\n                localCert.tbsView = new Uint8Array(localCert.encodeTBS().toBER());\n            }\n            if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(certificate.tbsView, localCert.tbsView))\n                return \"Intermediate Certificates\";\n        }\n        for (const trustedCert of validationEngine.trustedCerts) {\n            if (trustedCert.tbsView.byteLength === 0)\n                trustedCert.tbsView = new Uint8Array(trustedCert.encodeTBS().toBER());\n            if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(certificate.tbsView, trustedCert.tbsView))\n                return \"Trusted Certificates\";\n        }\n        return \"Unknown\";\n    }\n    async defaultFindIssuer(certificate, validationEngine, crypto = getCrypto(true)) {\n        const result = [];\n        let keyIdentifier = null;\n        let authorityCertIssuer = null;\n        let authorityCertSerialNumber = null;\n        if (certificate.subject.isEqual(certificate.issuer)) {\n            try {\n                const verificationResult = await certificate.verify(undefined, crypto);\n                if (verificationResult) {\n                    return [certificate];\n                }\n            }\n            catch (ex) {\n            }\n        }\n        if (certificate.extensions) {\n            for (const extension of certificate.extensions) {\n                if (extension.extnID === id_AuthorityKeyIdentifier && extension.parsedValue instanceof AuthorityKeyIdentifier) {\n                    if (extension.parsedValue.keyIdentifier) {\n                        keyIdentifier = extension.parsedValue.keyIdentifier;\n                    }\n                    else {\n                        if (extension.parsedValue.authorityCertIssuer) {\n                            authorityCertIssuer = extension.parsedValue.authorityCertIssuer;\n                        }\n                        if (extension.parsedValue.authorityCertSerialNumber) {\n                            authorityCertSerialNumber = extension.parsedValue.authorityCertSerialNumber;\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n        function checkCertificate(possibleIssuer) {\n            if (keyIdentifier !== null) {\n                if (possibleIssuer.extensions) {\n                    let extensionFound = false;\n                    for (const extension of possibleIssuer.extensions) {\n                        if (extension.extnID === id_SubjectKeyIdentifier && extension.parsedValue) {\n                            extensionFound = true;\n                            if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(extension.parsedValue.valueBlock.valueHex, keyIdentifier.valueBlock.valueHexView)) {\n                                result.push(possibleIssuer);\n                            }\n                            break;\n                        }\n                    }\n                    if (extensionFound) {\n                        return;\n                    }\n                }\n            }\n            let authorityCertSerialNumberEqual = false;\n            if (authorityCertSerialNumber !== null)\n                authorityCertSerialNumberEqual = possibleIssuer.serialNumber.isEqual(authorityCertSerialNumber);\n            if (authorityCertIssuer !== null) {\n                if (possibleIssuer.subject.isEqual(authorityCertIssuer)) {\n                    if (authorityCertSerialNumberEqual)\n                        result.push(possibleIssuer);\n                }\n            }\n            else {\n                if (certificate.issuer.isEqual(possibleIssuer.subject))\n                    result.push(possibleIssuer);\n            }\n        }\n        for (const trustedCert of validationEngine.trustedCerts) {\n            checkCertificate(trustedCert);\n        }\n        for (const intermediateCert of validationEngine.certs) {\n            checkCertificate(intermediateCert);\n        }\n        for (let i = result.length - 1; i >= 0; i--) {\n            try {\n                const verificationResult = await certificate.verify(result[i], crypto);\n                if (verificationResult === false)\n                    result.splice(i, 1);\n            }\n            catch (ex) {\n                result.splice(i, 1);\n            }\n        }\n        return result;\n    }\n    defaultValues(memberName) {\n        switch (memberName) {\n            case TRUSTED_CERTS:\n                return [];\n            case CERTS$2:\n                return [];\n            case CRLS$1:\n                return [];\n            case OCSPS$1:\n                return [];\n            case CHECK_DATE:\n                return new Date();\n            case FIND_ORIGIN:\n                return CertificateChainValidationEngine.defaultFindOrigin;\n            case FIND_ISSUER:\n                return this.defaultFindIssuer;\n            default:\n                throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${memberName}`);\n        }\n    }\n    async sort(passedWhenNotRevValues = false, crypto = getCrypto(true)) {\n        const localCerts = [];\n        const buildPath = async (certificate, crypto) => {\n            const result = [];\n            function checkUnique(array) {\n                let unique = true;\n                for (let i = 0; i < array.length; i++) {\n                    for (let j = 0; j < array.length; j++) {\n                        if (j === i)\n                            continue;\n                        if (array[i] === array[j]) {\n                            unique = false;\n                            break;\n                        }\n                    }\n                    if (!unique)\n                        break;\n                }\n                return unique;\n            }\n            if (isTrusted(certificate, this.trustedCerts)) {\n                return [[certificate]];\n            }\n            const findIssuerResult = await this.findIssuer(certificate, this, crypto);\n            if (findIssuerResult.length === 0) {\n                throw new Error(\"No valid certificate paths found\");\n            }\n            for (let i = 0; i < findIssuerResult.length; i++) {\n                if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(findIssuerResult[i].tbsView, certificate.tbsView)) {\n                    result.push([findIssuerResult[i]]);\n                    continue;\n                }\n                const buildPathResult = await buildPath(findIssuerResult[i], crypto);\n                for (let j = 0; j < buildPathResult.length; j++) {\n                    const copy = buildPathResult[j].slice();\n                    copy.splice(0, 0, findIssuerResult[i]);\n                    if (checkUnique(copy))\n                        result.push(copy);\n                    else\n                        result.push(buildPathResult[j]);\n                }\n            }\n            return result;\n        };\n        const findCRL = async (certificate) => {\n            const issuerCertificates = [];\n            const crls = [];\n            const crlsAndCertificates = [];\n            issuerCertificates.push(...localCerts.filter(element => certificate.issuer.isEqual(element.subject)));\n            if (issuerCertificates.length === 0) {\n                return {\n                    status: 1,\n                    statusMessage: \"No certificate's issuers\"\n                };\n            }\n            crls.push(...this.crls.filter(o => o.issuer.isEqual(certificate.issuer)));\n            if (crls.length === 0) {\n                return {\n                    status: 2,\n                    statusMessage: \"No CRLs for specific certificate issuer\"\n                };\n            }\n            for (let i = 0; i < crls.length; i++) {\n                const crl = crls[i];\n                if (crl.nextUpdate && crl.nextUpdate.value < this.checkDate) {\n                    continue;\n                }\n                for (let j = 0; j < issuerCertificates.length; j++) {\n                    try {\n                        const result = await crls[i].verify({ issuerCertificate: issuerCertificates[j] }, crypto);\n                        if (result) {\n                            crlsAndCertificates.push({\n                                crl: crls[i],\n                                certificate: issuerCertificates[j]\n                            });\n                            break;\n                        }\n                    }\n                    catch (ex) {\n                    }\n                }\n            }\n            if (crlsAndCertificates.length) {\n                return {\n                    status: 0,\n                    statusMessage: EMPTY_STRING,\n                    result: crlsAndCertificates\n                };\n            }\n            return {\n                status: 3,\n                statusMessage: \"No valid CRLs found\"\n            };\n        };\n        const findOCSP = async (certificate, issuerCertificate) => {\n            const hashAlgorithm = crypto.getAlgorithmByOID(certificate.signatureAlgorithm.algorithmId);\n            if (!hashAlgorithm.name) {\n                return 1;\n            }\n            if (!hashAlgorithm.hash) {\n                return 1;\n            }\n            for (let i = 0; i < this.ocsps.length; i++) {\n                const ocsp = this.ocsps[i];\n                const result = await ocsp.getCertificateStatus(certificate, issuerCertificate, crypto);\n                if (result.isForCertificate) {\n                    if (result.status === 0)\n                        return 0;\n                    return 1;\n                }\n            }\n            return 2;\n        };\n        async function checkForCA(certificate, needToCheckCRL = false) {\n            let isCA = false;\n            let mustBeCA = false;\n            let keyUsagePresent = false;\n            let cRLSign = false;\n            if (certificate.extensions) {\n                for (let j = 0; j < certificate.extensions.length; j++) {\n                    const extension = certificate.extensions[j];\n                    if (extension.critical && !extension.parsedValue) {\n                        return {\n                            result: false,\n                            resultCode: 6,\n                            resultMessage: `Unable to parse critical certificate extension: ${extension.extnID}`\n                        };\n                    }\n                    if (extension.extnID === id_KeyUsage) {\n                        keyUsagePresent = true;\n                        const view = new Uint8Array(extension.parsedValue.valueBlock.valueHex);\n                        if ((view[0] & 0x04) === 0x04)\n                            mustBeCA = true;\n                        if ((view[0] & 0x02) === 0x02)\n                            cRLSign = true;\n                    }\n                    if (extension.extnID === id_BasicConstraints) {\n                        if (\"cA\" in extension.parsedValue) {\n                            if (extension.parsedValue.cA === true)\n                                isCA = true;\n                        }\n                    }\n                }\n                if ((mustBeCA === true) && (isCA === false)) {\n                    return {\n                        result: false,\n                        resultCode: 3,\n                        resultMessage: \"Unable to build certificate chain - using \\\"keyCertSign\\\" flag set without BasicConstraints\"\n                    };\n                }\n                if ((keyUsagePresent === true) && (isCA === true) && (mustBeCA === false)) {\n                    return {\n                        result: false,\n                        resultCode: 4,\n                        resultMessage: \"Unable to build certificate chain - \\\"keyCertSign\\\" flag was not set\"\n                    };\n                }\n                if ((isCA === true) && (keyUsagePresent === true) && ((needToCheckCRL) && (cRLSign === false))) {\n                    return {\n                        result: false,\n                        resultCode: 5,\n                        resultMessage: \"Unable to build certificate chain - intermediate certificate must have \\\"cRLSign\\\" key usage flag\"\n                    };\n                }\n            }\n            if (isCA === false) {\n                return {\n                    result: false,\n                    resultCode: 7,\n                    resultMessage: \"Unable to build certificate chain - more than one possible end-user certificate\"\n                };\n            }\n            return {\n                result: true,\n                resultCode: 0,\n                resultMessage: EMPTY_STRING\n            };\n        }\n        const basicCheck = async (path, checkDate) => {\n            for (let i = 0; i < path.length; i++) {\n                if ((path[i].notBefore.value > checkDate) ||\n                    (path[i].notAfter.value < checkDate)) {\n                    return {\n                        result: false,\n                        resultCode: 8,\n                        resultMessage: \"The certificate is either not yet valid or expired\"\n                    };\n                }\n            }\n            if (path.length < 2) {\n                return {\n                    result: false,\n                    resultCode: 9,\n                    resultMessage: \"Too short certificate path\"\n                };\n            }\n            for (let i = (path.length - 2); i >= 0; i--) {\n                if (path[i].issuer.isEqual(path[i].subject) === false) {\n                    if (path[i].issuer.isEqual(path[i + 1].subject) === false) {\n                        return {\n                            result: false,\n                            resultCode: 10,\n                            resultMessage: \"Incorrect name chaining\"\n                        };\n                    }\n                }\n            }\n            if ((this.crls.length !== 0) || (this.ocsps.length !== 0)) {\n                for (let i = 0; i < (path.length - 1); i++) {\n                    let ocspResult = 2;\n                    let crlResult = {\n                        status: 0,\n                        statusMessage: EMPTY_STRING\n                    };\n                    if (this.ocsps.length !== 0) {\n                        ocspResult = await findOCSP(path[i], path[i + 1]);\n                        switch (ocspResult) {\n                            case 0:\n                                continue;\n                            case 1:\n                                return {\n                                    result: false,\n                                    resultCode: 12,\n                                    resultMessage: \"One of certificates was revoked via OCSP response\"\n                                };\n                        }\n                    }\n                    if (this.crls.length !== 0) {\n                        crlResult = await findCRL(path[i]);\n                        if (crlResult.status === 0 && crlResult.result) {\n                            for (let j = 0; j < crlResult.result.length; j++) {\n                                const isCertificateRevoked = crlResult.result[j].crl.isCertificateRevoked(path[i]);\n                                if (isCertificateRevoked) {\n                                    return {\n                                        result: false,\n                                        resultCode: 12,\n                                        resultMessage: \"One of certificates had been revoked\"\n                                    };\n                                }\n                                const isCertificateCA = await checkForCA(crlResult.result[j].certificate, true);\n                                if (isCertificateCA.result === false) {\n                                    return {\n                                        result: false,\n                                        resultCode: 13,\n                                        resultMessage: \"CRL issuer certificate is not a CA certificate or does not have crlSign flag\"\n                                    };\n                                }\n                            }\n                        }\n                        else {\n                            if (passedWhenNotRevValues === false) {\n                                throw new ChainValidationError(ChainValidationCode.noRevocation, `No revocation values found for one of certificates: ${crlResult.statusMessage}`);\n                            }\n                        }\n                    }\n                    else {\n                        if (ocspResult === 2) {\n                            return {\n                                result: false,\n                                resultCode: 11,\n                                resultMessage: \"No revocation values found for one of certificates\"\n                            };\n                        }\n                    }\n                    if ((ocspResult === 2) && (crlResult.status === 2) && passedWhenNotRevValues) {\n                        const issuerCertificate = path[i + 1];\n                        let extensionFound = false;\n                        if (issuerCertificate.extensions) {\n                            for (const extension of issuerCertificate.extensions) {\n                                switch (extension.extnID) {\n                                    case id_CRLDistributionPoints:\n                                    case id_FreshestCRL:\n                                    case id_AuthorityInfoAccess:\n                                        extensionFound = true;\n                                        break;\n                                }\n                            }\n                        }\n                        if (extensionFound) {\n                            throw new ChainValidationError(ChainValidationCode.noRevocation, `No revocation values found for one of certificates: ${crlResult.statusMessage}`);\n                        }\n                    }\n                }\n            }\n            for (const [i, cert] of path.entries()) {\n                if (!i) {\n                    continue;\n                }\n                const result = await checkForCA(cert);\n                if (!result.result) {\n                    return {\n                        result: false,\n                        resultCode: 14,\n                        resultMessage: \"One of intermediate certificates is not a CA certificate\"\n                    };\n                }\n            }\n            return {\n                result: true\n            };\n        };\n        localCerts.push(...this.trustedCerts);\n        localCerts.push(...this.certs);\n        for (let i = 0; i < localCerts.length; i++) {\n            for (let j = 0; j < localCerts.length; j++) {\n                if (i === j)\n                    continue;\n                if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(localCerts[i].tbsView, localCerts[j].tbsView)) {\n                    localCerts.splice(j, 1);\n                    i = 0;\n                    break;\n                }\n            }\n        }\n        const leafCert = localCerts[localCerts.length - 1];\n        let result;\n        const certificatePath = [leafCert];\n        result = await buildPath(leafCert, crypto);\n        if (result.length === 0) {\n            throw new ChainValidationError(ChainValidationCode.noPath, \"Unable to find certificate path\");\n        }\n        for (let i = result.length - 1; i >= 0; i--) {\n            let found = false;\n            for (let j = 0; j < (result[i]).length; j++) {\n                const certificate = (result[i])[j];\n                for (let k = 0; k < this.trustedCerts.length; k++) {\n                    if (pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(certificate.tbsView, this.trustedCerts[k].tbsView)) {\n                        found = true;\n                        break;\n                    }\n                }\n                if (found)\n                    break;\n            }\n            if (!found) {\n                result.splice(i, 1);\n            }\n        }\n        if (result.length === 0) {\n            throw new ChainValidationError(ChainValidationCode.noValidPath, \"No valid certificate paths found\");\n        }\n        let shortestLength = result[0].length;\n        let shortestIndex = 0;\n        for (let i = 0; i < result.length; i++) {\n            if (result[i].length < shortestLength) {\n                shortestLength = result[i].length;\n                shortestIndex = i;\n            }\n        }\n        for (let i = 0; i < result[shortestIndex].length; i++)\n            certificatePath.push((result[shortestIndex])[i]);\n        result = await basicCheck(certificatePath, this.checkDate);\n        if (result.result === false)\n            throw result;\n        return certificatePath;\n    }\n    async verify(parameters = {}, crypto = getCrypto(true)) {\n        function compareDNSName(name, constraint) {\n            const namePrepared = stringPrep(name);\n            const constraintPrepared = stringPrep(constraint);\n            const nameSplitted = namePrepared.split(\".\");\n            const constraintSplitted = constraintPrepared.split(\".\");\n            const nameLen = nameSplitted.length;\n            const constrLen = constraintSplitted.length;\n            if ((nameLen === 0) || (constrLen === 0) || (nameLen < constrLen)) {\n                return false;\n            }\n            for (let i = 0; i < nameLen; i++) {\n                if (nameSplitted[i].length === 0) {\n                    return false;\n                }\n            }\n            for (let i = 0; i < constrLen; i++) {\n                if (constraintSplitted[i].length === 0) {\n                    if (i === 0) {\n                        if (constrLen === 1) {\n                            return false;\n                        }\n                        continue;\n                    }\n                    return false;\n                }\n            }\n            for (let i = 0; i < constrLen; i++) {\n                if (constraintSplitted[constrLen - 1 - i].length === 0) {\n                    continue;\n                }\n                if (nameSplitted[nameLen - 1 - i].localeCompare(constraintSplitted[constrLen - 1 - i]) !== 0) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        function compareRFC822Name(name, constraint) {\n            const namePrepared = stringPrep(name);\n            const constraintPrepared = stringPrep(constraint);\n            const nameSplitted = namePrepared.split(\"@\");\n            const constraintSplitted = constraintPrepared.split(\"@\");\n            if ((nameSplitted.length === 0) || (constraintSplitted.length === 0) || (nameSplitted.length < constraintSplitted.length))\n                return false;\n            if (constraintSplitted.length === 1) {\n                const result = compareDNSName(nameSplitted[1], constraintSplitted[0]);\n                if (result) {\n                    const ns = nameSplitted[1].split(\".\");\n                    const cs = constraintSplitted[0].split(\".\");\n                    if (cs[0].length === 0)\n                        return true;\n                    return ns.length === cs.length;\n                }\n                return false;\n            }\n            return (namePrepared.localeCompare(constraintPrepared) === 0);\n        }\n        function compareUniformResourceIdentifier(name, constraint) {\n            let namePrepared = stringPrep(name);\n            const constraintPrepared = stringPrep(constraint);\n            const ns = namePrepared.split(\"/\");\n            const cs = constraintPrepared.split(\"/\");\n            if (cs.length > 1)\n                return false;\n            if (ns.length > 1) {\n                for (let i = 0; i < ns.length; i++) {\n                    if ((ns[i].length > 0) && (ns[i].charAt(ns[i].length - 1) !== \":\")) {\n                        const nsPort = ns[i].split(\":\");\n                        namePrepared = nsPort[0];\n                        break;\n                    }\n                }\n            }\n            const result = compareDNSName(namePrepared, constraintPrepared);\n            if (result) {\n                const nameSplitted = namePrepared.split(\".\");\n                const constraintSplitted = constraintPrepared.split(\".\");\n                if (constraintSplitted[0].length === 0)\n                    return true;\n                return nameSplitted.length === constraintSplitted.length;\n            }\n            return false;\n        }\n        function compareIPAddress(name, constraint) {\n            const nameView = name.valueBlock.valueHexView;\n            const constraintView = constraint.valueBlock.valueHexView;\n            if ((nameView.length === 4) && (constraintView.length === 8)) {\n                for (let i = 0; i < 4; i++) {\n                    if ((nameView[i] ^ constraintView[i]) & constraintView[i + 4])\n                        return false;\n                }\n                return true;\n            }\n            if ((nameView.length === 16) && (constraintView.length === 32)) {\n                for (let i = 0; i < 16; i++) {\n                    if ((nameView[i] ^ constraintView[i]) & constraintView[i + 16])\n                        return false;\n                }\n                return true;\n            }\n            return false;\n        }\n        function compareDirectoryName(name, constraint) {\n            if ((name.typesAndValues.length === 0) || (constraint.typesAndValues.length === 0))\n                return true;\n            if (name.typesAndValues.length < constraint.typesAndValues.length)\n                return false;\n            let result = true;\n            let nameStart = 0;\n            for (let i = 0; i < constraint.typesAndValues.length; i++) {\n                let localResult = false;\n                for (let j = nameStart; j < name.typesAndValues.length; j++) {\n                    localResult = name.typesAndValues[j].isEqual(constraint.typesAndValues[i]);\n                    if (name.typesAndValues[j].type === constraint.typesAndValues[i].type)\n                        result = result && localResult;\n                    if (localResult === true) {\n                        if ((nameStart === 0) || (nameStart === j)) {\n                            nameStart = j + 1;\n                            break;\n                        }\n                        else\n                            return false;\n                    }\n                }\n                if (localResult === false)\n                    return false;\n            }\n            return (nameStart === 0) ? false : result;\n        }\n        try {\n            if (this.certs.length === 0)\n                throw new Error(\"Empty certificate array\");\n            const passedWhenNotRevValues = parameters.passedWhenNotRevValues || false;\n            const initialPolicySet = parameters.initialPolicySet || [id_AnyPolicy];\n            const initialExplicitPolicy = parameters.initialExplicitPolicy || false;\n            const initialPolicyMappingInhibit = parameters.initialPolicyMappingInhibit || false;\n            const initialInhibitPolicy = parameters.initialInhibitPolicy || false;\n            const initialPermittedSubtreesSet = parameters.initialPermittedSubtreesSet || [];\n            const initialExcludedSubtreesSet = parameters.initialExcludedSubtreesSet || [];\n            const initialRequiredNameForms = parameters.initialRequiredNameForms || [];\n            let explicitPolicyIndicator = initialExplicitPolicy;\n            let policyMappingInhibitIndicator = initialPolicyMappingInhibit;\n            let inhibitAnyPolicyIndicator = initialInhibitPolicy;\n            const pendingConstraints = [\n                false,\n                false,\n                false,\n            ];\n            let explicitPolicyPending = 0;\n            let policyMappingInhibitPending = 0;\n            let inhibitAnyPolicyPending = 0;\n            let permittedSubtrees = initialPermittedSubtreesSet;\n            let excludedSubtrees = initialExcludedSubtreesSet;\n            const requiredNameForms = initialRequiredNameForms;\n            let pathDepth = 1;\n            this.certs = await this.sort(passedWhenNotRevValues, crypto);\n            const allPolicies = [];\n            allPolicies.push(id_AnyPolicy);\n            const policiesAndCerts = [];\n            const anyPolicyArray = new Array(this.certs.length - 1);\n            for (let ii = 0; ii < (this.certs.length - 1); ii++)\n                anyPolicyArray[ii] = true;\n            policiesAndCerts.push(anyPolicyArray);\n            const policyMappings = new Array(this.certs.length - 1);\n            const certPolicies = new Array(this.certs.length - 1);\n            let explicitPolicyStart = (explicitPolicyIndicator) ? (this.certs.length - 1) : (-1);\n            for (let i = (this.certs.length - 2); i >= 0; i--, pathDepth++) {\n                const cert = this.certs[i];\n                if (cert.extensions) {\n                    for (let j = 0; j < cert.extensions.length; j++) {\n                        const extension = cert.extensions[j];\n                        if (extension.extnID === id_CertificatePolicies) {\n                            certPolicies[i] = extension.parsedValue;\n                            for (let s = 0; s < allPolicies.length; s++) {\n                                if (allPolicies[s] === id_AnyPolicy) {\n                                    delete (policiesAndCerts[s])[i];\n                                    break;\n                                }\n                            }\n                            for (let k = 0; k < extension.parsedValue.certificatePolicies.length; k++) {\n                                let policyIndex = (-1);\n                                const policyId = extension.parsedValue.certificatePolicies[k].policyIdentifier;\n                                for (let s = 0; s < allPolicies.length; s++) {\n                                    if (policyId === allPolicies[s]) {\n                                        policyIndex = s;\n                                        break;\n                                    }\n                                }\n                                if (policyIndex === (-1)) {\n                                    allPolicies.push(policyId);\n                                    const certArray = new Array(this.certs.length - 1);\n                                    certArray[i] = true;\n                                    policiesAndCerts.push(certArray);\n                                }\n                                else\n                                    (policiesAndCerts[policyIndex])[i] = true;\n                            }\n                        }\n                        if (extension.extnID === id_PolicyMappings) {\n                            if (policyMappingInhibitIndicator) {\n                                return {\n                                    result: false,\n                                    resultCode: 98,\n                                    resultMessage: \"Policy mapping prohibited\"\n                                };\n                            }\n                            policyMappings[i] = extension.parsedValue;\n                        }\n                        if (extension.extnID === id_PolicyConstraints) {\n                            if (explicitPolicyIndicator === false) {\n                                if (extension.parsedValue.requireExplicitPolicy === 0) {\n                                    explicitPolicyIndicator = true;\n                                    explicitPolicyStart = i;\n                                }\n                                else {\n                                    if (pendingConstraints[0] === false) {\n                                        pendingConstraints[0] = true;\n                                        explicitPolicyPending = extension.parsedValue.requireExplicitPolicy;\n                                    }\n                                    else\n                                        explicitPolicyPending = (explicitPolicyPending > extension.parsedValue.requireExplicitPolicy) ? extension.parsedValue.requireExplicitPolicy : explicitPolicyPending;\n                                }\n                                if (extension.parsedValue.inhibitPolicyMapping === 0)\n                                    policyMappingInhibitIndicator = true;\n                                else {\n                                    if (pendingConstraints[1] === false) {\n                                        pendingConstraints[1] = true;\n                                        policyMappingInhibitPending = extension.parsedValue.inhibitPolicyMapping + 1;\n                                    }\n                                    else\n                                        policyMappingInhibitPending = (policyMappingInhibitPending > (extension.parsedValue.inhibitPolicyMapping + 1)) ? (extension.parsedValue.inhibitPolicyMapping + 1) : policyMappingInhibitPending;\n                                }\n                            }\n                        }\n                        if (extension.extnID === id_InhibitAnyPolicy) {\n                            if (inhibitAnyPolicyIndicator === false) {\n                                if (extension.parsedValue.valueBlock.valueDec === 0)\n                                    inhibitAnyPolicyIndicator = true;\n                                else {\n                                    if (pendingConstraints[2] === false) {\n                                        pendingConstraints[2] = true;\n                                        inhibitAnyPolicyPending = extension.parsedValue.valueBlock.valueDec;\n                                    }\n                                    else\n                                        inhibitAnyPolicyPending = (inhibitAnyPolicyPending > extension.parsedValue.valueBlock.valueDec) ? extension.parsedValue.valueBlock.valueDec : inhibitAnyPolicyPending;\n                                }\n                            }\n                        }\n                    }\n                    if (inhibitAnyPolicyIndicator === true) {\n                        let policyIndex = (-1);\n                        for (let searchAnyPolicy = 0; searchAnyPolicy < allPolicies.length; searchAnyPolicy++) {\n                            if (allPolicies[searchAnyPolicy] === id_AnyPolicy) {\n                                policyIndex = searchAnyPolicy;\n                                break;\n                            }\n                        }\n                        if (policyIndex !== (-1))\n                            delete (policiesAndCerts[0])[i];\n                    }\n                    if (explicitPolicyIndicator === false) {\n                        if (pendingConstraints[0] === true) {\n                            explicitPolicyPending--;\n                            if (explicitPolicyPending === 0) {\n                                explicitPolicyIndicator = true;\n                                explicitPolicyStart = i;\n                                pendingConstraints[0] = false;\n                            }\n                        }\n                    }\n                    if (policyMappingInhibitIndicator === false) {\n                        if (pendingConstraints[1] === true) {\n                            policyMappingInhibitPending--;\n                            if (policyMappingInhibitPending === 0) {\n                                policyMappingInhibitIndicator = true;\n                                pendingConstraints[1] = false;\n                            }\n                        }\n                    }\n                    if (inhibitAnyPolicyIndicator === false) {\n                        if (pendingConstraints[2] === true) {\n                            inhibitAnyPolicyPending--;\n                            if (inhibitAnyPolicyPending === 0) {\n                                inhibitAnyPolicyIndicator = true;\n                                pendingConstraints[2] = false;\n                            }\n                        }\n                    }\n                }\n            }\n            for (let i = 0; i < (this.certs.length - 1); i++) {\n                if ((i < (this.certs.length - 2)) && (typeof policyMappings[i + 1] !== \"undefined\")) {\n                    for (let k = 0; k < policyMappings[i + 1].mappings.length; k++) {\n                        if ((policyMappings[i + 1].mappings[k].issuerDomainPolicy === id_AnyPolicy) || (policyMappings[i + 1].mappings[k].subjectDomainPolicy === id_AnyPolicy)) {\n                            return {\n                                result: false,\n                                resultCode: 99,\n                                resultMessage: \"The \\\"anyPolicy\\\" should not be a part of policy mapping scheme\"\n                            };\n                        }\n                        let issuerDomainPolicyIndex = (-1);\n                        let subjectDomainPolicyIndex = (-1);\n                        for (let n = 0; n < allPolicies.length; n++) {\n                            if (allPolicies[n] === policyMappings[i + 1].mappings[k].issuerDomainPolicy)\n                                issuerDomainPolicyIndex = n;\n                            if (allPolicies[n] === policyMappings[i + 1].mappings[k].subjectDomainPolicy)\n                                subjectDomainPolicyIndex = n;\n                        }\n                        if (typeof (policiesAndCerts[issuerDomainPolicyIndex])[i] !== \"undefined\")\n                            delete (policiesAndCerts[issuerDomainPolicyIndex])[i];\n                        for (let j = 0; j < certPolicies[i].certificatePolicies.length; j++) {\n                            if (policyMappings[i + 1].mappings[k].subjectDomainPolicy === certPolicies[i].certificatePolicies[j].policyIdentifier) {\n                                if ((issuerDomainPolicyIndex !== (-1)) && (subjectDomainPolicyIndex !== (-1))) {\n                                    for (let m = 0; m <= i; m++) {\n                                        if (typeof (policiesAndCerts[subjectDomainPolicyIndex])[m] !== \"undefined\") {\n                                            (policiesAndCerts[issuerDomainPolicyIndex])[m] = true;\n                                            delete (policiesAndCerts[subjectDomainPolicyIndex])[m];\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            for (let i = 0; i < allPolicies.length; i++) {\n                if (allPolicies[i] === id_AnyPolicy) {\n                    for (let j = 0; j < explicitPolicyStart; j++)\n                        delete (policiesAndCerts[i])[j];\n                }\n            }\n            const authConstrPolicies = [];\n            for (let i = 0; i < policiesAndCerts.length; i++) {\n                let found = true;\n                for (let j = 0; j < (this.certs.length - 1); j++) {\n                    let anyPolicyFound = false;\n                    if ((j < explicitPolicyStart) && (allPolicies[i] === id_AnyPolicy) && (allPolicies.length > 1)) {\n                        found = false;\n                        break;\n                    }\n                    if (typeof (policiesAndCerts[i])[j] === \"undefined\") {\n                        if (j >= explicitPolicyStart) {\n                            for (let k = 0; k < allPolicies.length; k++) {\n                                if (allPolicies[k] === id_AnyPolicy) {\n                                    if ((policiesAndCerts[k])[j] === true)\n                                        anyPolicyFound = true;\n                                    break;\n                                }\n                            }\n                        }\n                        if (!anyPolicyFound) {\n                            found = false;\n                            break;\n                        }\n                    }\n                }\n                if (found === true)\n                    authConstrPolicies.push(allPolicies[i]);\n            }\n            let userConstrPolicies = [];\n            if ((initialPolicySet.length === 1) && (initialPolicySet[0] === id_AnyPolicy) && (explicitPolicyIndicator === false))\n                userConstrPolicies = initialPolicySet;\n            else {\n                if ((authConstrPolicies.length === 1) && (authConstrPolicies[0] === id_AnyPolicy))\n                    userConstrPolicies = initialPolicySet;\n                else {\n                    for (let i = 0; i < authConstrPolicies.length; i++) {\n                        for (let j = 0; j < initialPolicySet.length; j++) {\n                            if ((initialPolicySet[j] === authConstrPolicies[i]) || (initialPolicySet[j] === id_AnyPolicy)) {\n                                userConstrPolicies.push(authConstrPolicies[i]);\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n            const policyResult = {\n                result: (userConstrPolicies.length > 0),\n                resultCode: 0,\n                resultMessage: (userConstrPolicies.length > 0) ? EMPTY_STRING : \"Zero \\\"userConstrPolicies\\\" array, no intersections with \\\"authConstrPolicies\\\"\",\n                authConstrPolicies,\n                userConstrPolicies,\n                explicitPolicyIndicator,\n                policyMappings,\n                certificatePath: this.certs\n            };\n            if (userConstrPolicies.length === 0)\n                return policyResult;\n            if (policyResult.result === false)\n                return policyResult;\n            pathDepth = 1;\n            for (let i = (this.certs.length - 2); i >= 0; i--, pathDepth++) {\n                const cert = this.certs[i];\n                let subjectAltNames = [];\n                let certPermittedSubtrees = [];\n                let certExcludedSubtrees = [];\n                if (cert.extensions) {\n                    for (let j = 0; j < cert.extensions.length; j++) {\n                        const extension = cert.extensions[j];\n                        if (extension.extnID === id_NameConstraints) {\n                            if (\"permittedSubtrees\" in extension.parsedValue)\n                                certPermittedSubtrees = certPermittedSubtrees.concat(extension.parsedValue.permittedSubtrees);\n                            if (\"excludedSubtrees\" in extension.parsedValue)\n                                certExcludedSubtrees = certExcludedSubtrees.concat(extension.parsedValue.excludedSubtrees);\n                        }\n                        if (extension.extnID === id_SubjectAltName)\n                            subjectAltNames = subjectAltNames.concat(extension.parsedValue.altNames);\n                    }\n                }\n                let formFound = (requiredNameForms.length <= 0);\n                for (let j = 0; j < requiredNameForms.length; j++) {\n                    switch (requiredNameForms[j].base.type) {\n                        case 4:\n                            {\n                                if (requiredNameForms[j].base.value.typesAndValues.length !== cert.subject.typesAndValues.length)\n                                    continue;\n                                formFound = true;\n                                for (let k = 0; k < cert.subject.typesAndValues.length; k++) {\n                                    if (cert.subject.typesAndValues[k].type !== requiredNameForms[j].base.value.typesAndValues[k].type) {\n                                        formFound = false;\n                                        break;\n                                    }\n                                }\n                                if (formFound === true)\n                                    break;\n                            }\n                            break;\n                        default:\n                    }\n                }\n                if (formFound === false) {\n                    policyResult.result = false;\n                    policyResult.resultCode = 21;\n                    policyResult.resultMessage = \"No necessary name form found\";\n                    throw policyResult;\n                }\n                const constrGroups = [\n                    [],\n                    [],\n                    [],\n                    [],\n                    [],\n                ];\n                for (let j = 0; j < permittedSubtrees.length; j++) {\n                    switch (permittedSubtrees[j].base.type) {\n                        case 1:\n                            constrGroups[0].push(permittedSubtrees[j]);\n                            break;\n                        case 2:\n                            constrGroups[1].push(permittedSubtrees[j]);\n                            break;\n                        case 4:\n                            constrGroups[2].push(permittedSubtrees[j]);\n                            break;\n                        case 6:\n                            constrGroups[3].push(permittedSubtrees[j]);\n                            break;\n                        case 7:\n                            constrGroups[4].push(permittedSubtrees[j]);\n                            break;\n                        default:\n                    }\n                }\n                for (let p = 0; p < 5; p++) {\n                    let groupPermitted = false;\n                    let valueExists = false;\n                    const group = constrGroups[p];\n                    for (let j = 0; j < group.length; j++) {\n                        switch (p) {\n                            case 0:\n                                if (subjectAltNames.length > 0) {\n                                    for (let k = 0; k < subjectAltNames.length; k++) {\n                                        if (subjectAltNames[k].type === 1) {\n                                            valueExists = true;\n                                            groupPermitted = groupPermitted || compareRFC822Name(subjectAltNames[k].value, group[j].base.value);\n                                        }\n                                    }\n                                }\n                                else {\n                                    for (let k = 0; k < cert.subject.typesAndValues.length; k++) {\n                                        if ((cert.subject.typesAndValues[k].type === \"1.2.840.113549.1.9.1\") ||\n                                            (cert.subject.typesAndValues[k].type === \"0.9.2342.19200300.100.1.3\")) {\n                                            valueExists = true;\n                                            groupPermitted = groupPermitted || compareRFC822Name(cert.subject.typesAndValues[k].value.valueBlock.value, group[j].base.value);\n                                        }\n                                    }\n                                }\n                                break;\n                            case 1:\n                                if (subjectAltNames.length > 0) {\n                                    for (let k = 0; k < subjectAltNames.length; k++) {\n                                        if (subjectAltNames[k].type === 2) {\n                                            valueExists = true;\n                                            groupPermitted = groupPermitted || compareDNSName(subjectAltNames[k].value, group[j].base.value);\n                                        }\n                                    }\n                                }\n                                break;\n                            case 2:\n                                valueExists = true;\n                                groupPermitted = compareDirectoryName(cert.subject, group[j].base.value);\n                                break;\n                            case 3:\n                                if (subjectAltNames.length > 0) {\n                                    for (let k = 0; k < subjectAltNames.length; k++) {\n                                        if (subjectAltNames[k].type === 6) {\n                                            valueExists = true;\n                                            groupPermitted = groupPermitted || compareUniformResourceIdentifier(subjectAltNames[k].value, group[j].base.value);\n                                        }\n                                    }\n                                }\n                                break;\n                            case 4:\n                                if (subjectAltNames.length > 0) {\n                                    for (let k = 0; k < subjectAltNames.length; k++) {\n                                        if (subjectAltNames[k].type === 7) {\n                                            valueExists = true;\n                                            groupPermitted = groupPermitted || compareIPAddress(subjectAltNames[k].value, group[j].base.value);\n                                        }\n                                    }\n                                }\n                                break;\n                            default:\n                        }\n                        if (groupPermitted)\n                            break;\n                    }\n                    if ((groupPermitted === false) && (group.length > 0) && valueExists) {\n                        policyResult.result = false;\n                        policyResult.resultCode = 41;\n                        policyResult.resultMessage = \"Failed to meet \\\"permitted sub-trees\\\" name constraint\";\n                        throw policyResult;\n                    }\n                }\n                let excluded = false;\n                for (let j = 0; j < excludedSubtrees.length; j++) {\n                    switch (excludedSubtrees[j].base.type) {\n                        case 1:\n                            if (subjectAltNames.length >= 0) {\n                                for (let k = 0; k < subjectAltNames.length; k++) {\n                                    if (subjectAltNames[k].type === 1)\n                                        excluded = excluded || compareRFC822Name(subjectAltNames[k].value, excludedSubtrees[j].base.value);\n                                }\n                            }\n                            else {\n                                for (let k = 0; k < cert.subject.typesAndValues.length; k++) {\n                                    if ((cert.subject.typesAndValues[k].type === \"1.2.840.113549.1.9.1\") ||\n                                        (cert.subject.typesAndValues[k].type === \"0.9.2342.19200300.100.1.3\"))\n                                        excluded = excluded || compareRFC822Name(cert.subject.typesAndValues[k].value.valueBlock.value, excludedSubtrees[j].base.value);\n                                }\n                            }\n                            break;\n                        case 2:\n                            if (subjectAltNames.length > 0) {\n                                for (let k = 0; k < subjectAltNames.length; k++) {\n                                    if (subjectAltNames[k].type === 2)\n                                        excluded = excluded || compareDNSName(subjectAltNames[k].value, excludedSubtrees[j].base.value);\n                                }\n                            }\n                            break;\n                        case 4:\n                            excluded = excluded || compareDirectoryName(cert.subject, excludedSubtrees[j].base.value);\n                            break;\n                        case 6:\n                            if (subjectAltNames.length > 0) {\n                                for (let k = 0; k < subjectAltNames.length; k++) {\n                                    if (subjectAltNames[k].type === 6)\n                                        excluded = excluded || compareUniformResourceIdentifier(subjectAltNames[k].value, excludedSubtrees[j].base.value);\n                                }\n                            }\n                            break;\n                        case 7:\n                            if (subjectAltNames.length > 0) {\n                                for (let k = 0; k < subjectAltNames.length; k++) {\n                                    if (subjectAltNames[k].type === 7)\n                                        excluded = excluded || compareIPAddress(subjectAltNames[k].value, excludedSubtrees[j].base.value);\n                                }\n                            }\n                            break;\n                        default:\n                    }\n                    if (excluded)\n                        break;\n                }\n                if (excluded === true) {\n                    policyResult.result = false;\n                    policyResult.resultCode = 42;\n                    policyResult.resultMessage = \"Failed to meet \\\"excluded sub-trees\\\" name constraint\";\n                    throw policyResult;\n                }\n                permittedSubtrees = permittedSubtrees.concat(certPermittedSubtrees);\n                excludedSubtrees = excludedSubtrees.concat(certExcludedSubtrees);\n            }\n            return policyResult;\n        }\n        catch (error) {\n            if (error instanceof Error) {\n                if (error instanceof ChainValidationError) {\n                    return {\n                        result: false,\n                        resultCode: error.code,\n                        resultMessage: error.message,\n                        error: error,\n                    };\n                }\n                return {\n                    result: false,\n                    resultCode: ChainValidationCode.unknown,\n                    resultMessage: error.message,\n                    error: error,\n                };\n            }\n            if (error && typeof error === \"object\" && \"resultMessage\" in error) {\n                return error;\n            }\n            return {\n                result: false,\n                resultCode: -1,\n                resultMessage: `${error}`,\n            };\n        }\n    }\n}\n\nconst TBS_RESPONSE_DATA = \"tbsResponseData\";\nconst SIGNATURE_ALGORITHM$3 = \"signatureAlgorithm\";\nconst SIGNATURE$2 = \"signature\";\nconst CERTS$1 = \"certs\";\nconst BASIC_OCSP_RESPONSE = \"BasicOCSPResponse\";\nconst BASIC_OCSP_RESPONSE_TBS_RESPONSE_DATA = `${BASIC_OCSP_RESPONSE}.${TBS_RESPONSE_DATA}`;\nconst BASIC_OCSP_RESPONSE_SIGNATURE_ALGORITHM = `${BASIC_OCSP_RESPONSE}.${SIGNATURE_ALGORITHM$3}`;\nconst BASIC_OCSP_RESPONSE_SIGNATURE = `${BASIC_OCSP_RESPONSE}.${SIGNATURE$2}`;\nconst BASIC_OCSP_RESPONSE_CERTS = `${BASIC_OCSP_RESPONSE}.${CERTS$1}`;\nconst CLEAR_PROPS$g = [\n    BASIC_OCSP_RESPONSE_TBS_RESPONSE_DATA,\n    BASIC_OCSP_RESPONSE_SIGNATURE_ALGORITHM,\n    BASIC_OCSP_RESPONSE_SIGNATURE,\n    BASIC_OCSP_RESPONSE_CERTS\n];\nclass BasicOCSPResponse extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.tbsResponseData = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TBS_RESPONSE_DATA, BasicOCSPResponse.defaultValues(TBS_RESPONSE_DATA));\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM$3, BasicOCSPResponse.defaultValues(SIGNATURE_ALGORITHM$3));\n        this.signature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE$2, BasicOCSPResponse.defaultValues(SIGNATURE$2));\n        if (CERTS$1 in parameters) {\n            this.certs = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERTS$1, BasicOCSPResponse.defaultValues(CERTS$1));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TBS_RESPONSE_DATA:\n                return new ResponseData();\n            case SIGNATURE_ALGORITHM$3:\n                return new AlgorithmIdentifier();\n            case SIGNATURE$2:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            case CERTS$1:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case \"type\":\n                {\n                    let comparisonResult = ((ResponseData.compareWithDefault(\"tbs\", memberValue.tbs)) &&\n                        (ResponseData.compareWithDefault(\"responderID\", memberValue.responderID)) &&\n                        (ResponseData.compareWithDefault(\"producedAt\", memberValue.producedAt)) &&\n                        (ResponseData.compareWithDefault(\"responses\", memberValue.responses)));\n                    if (\"responseExtensions\" in memberValue)\n                        comparisonResult = comparisonResult && (ResponseData.compareWithDefault(\"responseExtensions\", memberValue.responseExtensions));\n                    return comparisonResult;\n                }\n            case SIGNATURE_ALGORITHM$3:\n                return ((memberValue.algorithmId === EMPTY_STRING) && ((\"algorithmParams\" in memberValue) === false));\n            case SIGNATURE$2:\n                return (memberValue.isEqual(BasicOCSPResponse.defaultValues(memberName)));\n            case CERTS$1:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || BASIC_OCSP_RESPONSE),\n            value: [\n                ResponseData.schema(names.tbsResponseData || {\n                    names: {\n                        blockName: BASIC_OCSP_RESPONSE_TBS_RESPONSE_DATA\n                    }\n                }),\n                AlgorithmIdentifier.schema(names.signatureAlgorithm || {\n                    names: {\n                        blockName: BASIC_OCSP_RESPONSE_SIGNATURE_ALGORITHM\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.signature || BASIC_OCSP_RESPONSE_SIGNATURE) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                            value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                                    name: BASIC_OCSP_RESPONSE_CERTS,\n                                    value: Certificate.schema(names.certs || {})\n                                })]\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$g);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, BasicOCSPResponse.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.tbsResponseData = new ResponseData({ schema: asn1.result[BASIC_OCSP_RESPONSE_TBS_RESPONSE_DATA] });\n        this.signatureAlgorithm = new AlgorithmIdentifier({ schema: asn1.result[BASIC_OCSP_RESPONSE_SIGNATURE_ALGORITHM] });\n        this.signature = asn1.result[BASIC_OCSP_RESPONSE_SIGNATURE];\n        if (BASIC_OCSP_RESPONSE_CERTS in asn1.result) {\n            this.certs = Array.from(asn1.result[BASIC_OCSP_RESPONSE_CERTS], element => new Certificate({ schema: element }));\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.tbsResponseData.toSchema());\n        outputArray.push(this.signatureAlgorithm.toSchema());\n        outputArray.push(this.signature);\n        if (this.certs) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                        value: Array.from(this.certs, o => o.toSchema())\n                    })\n                ]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            tbsResponseData: this.tbsResponseData.toJSON(),\n            signatureAlgorithm: this.signatureAlgorithm.toJSON(),\n            signature: this.signature.toJSON(),\n        };\n        if (this.certs) {\n            res.certs = Array.from(this.certs, o => o.toJSON());\n        }\n        return res;\n    }\n    async getCertificateStatus(certificate, issuerCertificate, crypto = getCrypto(true)) {\n        const result = {\n            isForCertificate: false,\n            status: 2\n        };\n        const hashesObject = {};\n        const certIDs = [];\n        for (const response of this.tbsResponseData.responses) {\n            const hashAlgorithm = crypto.getAlgorithmByOID(response.certID.hashAlgorithm.algorithmId, true, \"CertID.hashAlgorithm\");\n            if (!hashesObject[hashAlgorithm.name]) {\n                hashesObject[hashAlgorithm.name] = 1;\n                const certID = new CertID();\n                certIDs.push(certID);\n                await certID.createForCertificate(certificate, {\n                    hashAlgorithm: hashAlgorithm.name,\n                    issuerCertificate\n                }, crypto);\n            }\n        }\n        for (const response of this.tbsResponseData.responses) {\n            for (const id of certIDs) {\n                if (response.certID.isEqual(id)) {\n                    result.isForCertificate = true;\n                    try {\n                        switch (response.certStatus.idBlock.isConstructed) {\n                            case true:\n                                if (response.certStatus.idBlock.tagNumber === 1)\n                                    result.status = 1;\n                                break;\n                            case false:\n                                switch (response.certStatus.idBlock.tagNumber) {\n                                    case 0:\n                                        result.status = 0;\n                                        break;\n                                    case 2:\n                                        result.status = 2;\n                                        break;\n                                    default:\n                                }\n                                break;\n                            default:\n                        }\n                    }\n                    catch (ex) {\n                    }\n                    return result;\n                }\n            }\n        }\n        return result;\n    }\n    async sign(privateKey, hashAlgorithm = \"SHA-1\", crypto = getCrypto(true)) {\n        if (!privateKey) {\n            throw new Error(\"Need to provide a private key for signing\");\n        }\n        const signatureParams = await crypto.getSignatureParameters(privateKey, hashAlgorithm);\n        const algorithm = signatureParams.parameters.algorithm;\n        if (!(\"name\" in algorithm)) {\n            throw new Error(\"Empty algorithm\");\n        }\n        this.signatureAlgorithm = signatureParams.signatureAlgorithm;\n        this.tbsResponseData.tbsView = new Uint8Array(this.tbsResponseData.toSchema(true).toBER());\n        const signature = await crypto.signWithPrivateKey(this.tbsResponseData.tbsView, privateKey, { algorithm });\n        this.signature = new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ valueHex: signature });\n    }\n    async verify(params = {}, crypto = getCrypto(true)) {\n        let signerCert = null;\n        let certIndex = -1;\n        const trustedCerts = params.trustedCerts || [];\n        if (!this.certs) {\n            throw new Error(\"No certificates attached to the BasicOCSPResponse\");\n        }\n        switch (true) {\n            case (this.tbsResponseData.responderID instanceof RelativeDistinguishedNames):\n                for (const [index, certificate] of this.certs.entries()) {\n                    if (certificate.subject.isEqual(this.tbsResponseData.responderID)) {\n                        certIndex = index;\n                        break;\n                    }\n                }\n                break;\n            case (this.tbsResponseData.responderID instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString):\n                for (const [index, cert] of this.certs.entries()) {\n                    const hash = await crypto.digest({ name: \"sha-1\" }, cert.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);\n                    if (pvutils__WEBPACK_IMPORTED_MODULE_2__.isEqualBuffer(hash, this.tbsResponseData.responderID.valueBlock.valueHex)) {\n                        certIndex = index;\n                        break;\n                    }\n                }\n                break;\n            default:\n                throw new Error(\"Wrong value for responderID\");\n        }\n        if (certIndex === (-1))\n            throw new Error(\"Correct certificate was not found in OCSP response\");\n        signerCert = this.certs[certIndex];\n        const additionalCerts = [signerCert];\n        for (const cert of this.certs) {\n            const caCert = await checkCA(cert, signerCert);\n            if (caCert) {\n                additionalCerts.push(caCert);\n            }\n        }\n        const certChain = new CertificateChainValidationEngine({\n            certs: additionalCerts,\n            trustedCerts,\n        });\n        const verificationResult = await certChain.verify({}, crypto);\n        if (!verificationResult.result) {\n            throw new Error(\"Validation of signer's certificate failed\");\n        }\n        return crypto.verifyWithPublicKey(this.tbsResponseData.tbsView, this.signature, this.certs[certIndex].subjectPublicKeyInfo, this.signatureAlgorithm);\n    }\n}\nBasicOCSPResponse.CLASS_NAME = \"BasicOCSPResponse\";\n\nconst TBS$1 = \"tbs\";\nconst VERSION$6 = \"version\";\nconst SUBJECT = \"subject\";\nconst SPKI = \"subjectPublicKeyInfo\";\nconst ATTRIBUTES$1 = \"attributes\";\nconst SIGNATURE_ALGORITHM$2 = \"signatureAlgorithm\";\nconst SIGNATURE_VALUE = \"signatureValue\";\nconst CSR_INFO = \"CertificationRequestInfo\";\nconst CSR_INFO_VERSION = `${CSR_INFO}.version`;\nconst CSR_INFO_SUBJECT = `${CSR_INFO}.subject`;\nconst CSR_INFO_SPKI = `${CSR_INFO}.subjectPublicKeyInfo`;\nconst CSR_INFO_ATTRS = `${CSR_INFO}.attributes`;\nconst CLEAR_PROPS$f = [\n    CSR_INFO,\n    CSR_INFO_VERSION,\n    CSR_INFO_SUBJECT,\n    CSR_INFO_SPKI,\n    CSR_INFO_ATTRS,\n    SIGNATURE_ALGORITHM$2,\n    SIGNATURE_VALUE\n];\nfunction CertificationRequestInfo(parameters = {}) {\n    const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n    return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n        name: (names.CertificationRequestInfo || CSR_INFO),\n        value: [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.CertificationRequestInfoVersion || CSR_INFO_VERSION) }),\n            RelativeDistinguishedNames.schema(names.subject || {\n                names: {\n                    blockName: CSR_INFO_SUBJECT\n                }\n            }),\n            PublicKeyInfo.schema({\n                names: {\n                    blockName: CSR_INFO_SPKI\n                }\n            }),\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                        optional: true,\n                        name: (names.CertificationRequestInfoAttributes || CSR_INFO_ATTRS),\n                        value: Attribute.schema(names.attributes || {})\n                    })\n                ]\n            })\n        ]\n    }));\n}\nclass CertificationRequest extends PkiObject {\n    get tbs() {\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(this.tbsView);\n    }\n    set tbs(value) {\n        this.tbsView = new Uint8Array(value);\n    }\n    constructor(parameters = {}) {\n        super();\n        this.tbsView = new Uint8Array(pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TBS$1, CertificationRequest.defaultValues(TBS$1)));\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$6, CertificationRequest.defaultValues(VERSION$6));\n        this.subject = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SUBJECT, CertificationRequest.defaultValues(SUBJECT));\n        this.subjectPublicKeyInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SPKI, CertificationRequest.defaultValues(SPKI));\n        if (ATTRIBUTES$1 in parameters) {\n            this.attributes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ATTRIBUTES$1, CertificationRequest.defaultValues(ATTRIBUTES$1));\n        }\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM$2, CertificationRequest.defaultValues(SIGNATURE_ALGORITHM$2));\n        this.signatureValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_VALUE, CertificationRequest.defaultValues(SIGNATURE_VALUE));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TBS$1:\n                return EMPTY_BUFFER;\n            case VERSION$6:\n                return 0;\n            case SUBJECT:\n                return new RelativeDistinguishedNames();\n            case SPKI:\n                return new PublicKeyInfo();\n            case ATTRIBUTES$1:\n                return [];\n            case SIGNATURE_ALGORITHM$2:\n                return new AlgorithmIdentifier();\n            case SIGNATURE_VALUE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                CertificationRequestInfo(names.certificationRequestInfo || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    name: (names.signatureAlgorithm || SIGNATURE_ALGORITHM$2),\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier(),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ optional: true })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.signatureValue || SIGNATURE_VALUE) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$f);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, CertificationRequest.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.tbsView = asn1.result.CertificationRequestInfo.valueBeforeDecodeView;\n        this.version = asn1.result[CSR_INFO_VERSION].valueBlock.valueDec;\n        this.subject = new RelativeDistinguishedNames({ schema: asn1.result[CSR_INFO_SUBJECT] });\n        this.subjectPublicKeyInfo = new PublicKeyInfo({ schema: asn1.result[CSR_INFO_SPKI] });\n        if (CSR_INFO_ATTRS in asn1.result) {\n            this.attributes = Array.from(asn1.result[CSR_INFO_ATTRS], element => new Attribute({ schema: element }));\n        }\n        this.signatureAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.signatureAlgorithm });\n        this.signatureValue = asn1.result.signatureValue;\n    }\n    encodeTBS() {\n        const outputArray = [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }),\n            this.subject.toSchema(),\n            this.subjectPublicKeyInfo.toSchema()\n        ];\n        if (ATTRIBUTES$1 in this) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: Array.from(this.attributes || [], o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toSchema(encodeFlag = false) {\n        let tbsSchema;\n        if (encodeFlag === false) {\n            if (this.tbsView.byteLength === 0) {\n                return CertificationRequest.schema();\n            }\n            const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.tbsView);\n            AsnError.assert(asn1, \"PKCS#10 Certificate Request\");\n            tbsSchema = asn1.result;\n        }\n        else {\n            tbsSchema = this.encodeTBS();\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                tbsSchema,\n                this.signatureAlgorithm.toSchema(),\n                this.signatureValue\n            ]\n        }));\n    }\n    toJSON() {\n        const object = {\n            tbs: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.Convert.ToHex(this.tbsView),\n            version: this.version,\n            subject: this.subject.toJSON(),\n            subjectPublicKeyInfo: this.subjectPublicKeyInfo.toJSON(),\n            signatureAlgorithm: this.signatureAlgorithm.toJSON(),\n            signatureValue: this.signatureValue.toJSON(),\n        };\n        if (ATTRIBUTES$1 in this) {\n            object.attributes = Array.from(this.attributes || [], o => o.toJSON());\n        }\n        return object;\n    }\n    async sign(privateKey, hashAlgorithm = \"SHA-1\", crypto = getCrypto(true)) {\n        if (!privateKey) {\n            throw new Error(\"Need to provide a private key for signing\");\n        }\n        const signatureParams = await crypto.getSignatureParameters(privateKey, hashAlgorithm);\n        const parameters = signatureParams.parameters;\n        this.signatureAlgorithm = signatureParams.signatureAlgorithm;\n        this.tbsView = new Uint8Array(this.encodeTBS().toBER());\n        const signature = await crypto.signWithPrivateKey(this.tbsView, privateKey, parameters);\n        this.signatureValue = new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ valueHex: signature });\n    }\n    async verify(crypto = getCrypto(true)) {\n        return crypto.verifyWithPublicKey(this.tbsView, this.signatureValue, this.subjectPublicKeyInfo, this.signatureAlgorithm);\n    }\n    async getPublicKey(parameters, crypto = getCrypto(true)) {\n        return crypto.getPublicKey(this.subjectPublicKeyInfo, this.signatureAlgorithm, parameters);\n    }\n}\nCertificationRequest.CLASS_NAME = \"CertificationRequest\";\n\nconst DIGEST_ALGORITHM$1 = \"digestAlgorithm\";\nconst DIGEST = \"digest\";\nconst CLEAR_PROPS$e = [\n    DIGEST_ALGORITHM$1,\n    DIGEST\n];\nclass DigestInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.digestAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DIGEST_ALGORITHM$1, DigestInfo.defaultValues(DIGEST_ALGORITHM$1));\n        this.digest = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DIGEST, DigestInfo.defaultValues(DIGEST));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case DIGEST_ALGORITHM$1:\n                return new AlgorithmIdentifier();\n            case DIGEST:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case DIGEST_ALGORITHM$1:\n                return ((AlgorithmIdentifier.compareWithDefault(\"algorithmId\", memberValue.algorithmId)) &&\n                    ((\"algorithmParams\" in memberValue) === false));\n            case DIGEST:\n                return (memberValue.isEqual(DigestInfo.defaultValues(memberName)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.digestAlgorithm || {\n                    names: {\n                        blockName: DIGEST_ALGORITHM$1\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.digest || DIGEST) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$e);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, DigestInfo.schema({\n            names: {\n                digestAlgorithm: {\n                    names: {\n                        blockName: DIGEST_ALGORITHM$1\n                    }\n                },\n                digest: DIGEST\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.digestAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.digestAlgorithm });\n        this.digest = asn1.result.digest;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.digestAlgorithm.toSchema(),\n                this.digest\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            digestAlgorithm: this.digestAlgorithm.toJSON(),\n            digest: this.digest.toJSON(),\n        };\n    }\n}\nDigestInfo.CLASS_NAME = \"DigestInfo\";\n\nconst E_CONTENT_TYPE = \"eContentType\";\nconst E_CONTENT = \"eContent\";\nconst CLEAR_PROPS$d = [\n    E_CONTENT_TYPE,\n    E_CONTENT,\n];\nclass EncapsulatedContentInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.eContentType = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, E_CONTENT_TYPE, EncapsulatedContentInfo.defaultValues(E_CONTENT_TYPE));\n        if (E_CONTENT in parameters) {\n            this.eContent = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, E_CONTENT, EncapsulatedContentInfo.defaultValues(E_CONTENT));\n            if ((this.eContent.idBlock.tagClass === 1) &&\n                (this.eContent.idBlock.tagNumber === 4)) {\n                if (this.eContent.idBlock.isConstructed === false) {\n                    const constrString = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({\n                        idBlock: { isConstructed: true },\n                        isConstructed: true\n                    });\n                    let offset = 0;\n                    const viewHex = this.eContent.valueBlock.valueHexView.slice().buffer;\n                    let length = viewHex.byteLength;\n                    while (length > 0) {\n                        const pieceView = new Uint8Array(viewHex, offset, ((offset + 65536) > viewHex.byteLength) ? (viewHex.byteLength - offset) : 65536);\n                        const _array = new ArrayBuffer(pieceView.length);\n                        const _view = new Uint8Array(_array);\n                        for (let i = 0; i < _view.length; i++) {\n                            _view[i] = pieceView[i];\n                        }\n                        constrString.valueBlock.value.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: _array }));\n                        length -= pieceView.length;\n                        offset += pieceView.length;\n                    }\n                    this.eContent = constrString;\n                }\n            }\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case E_CONTENT_TYPE:\n                return EMPTY_STRING;\n            case E_CONTENT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case E_CONTENT_TYPE:\n                return (memberValue === EMPTY_STRING);\n            case E_CONTENT:\n                {\n                    if ((memberValue.idBlock.tagClass === 1) && (memberValue.idBlock.tagNumber === 4))\n                        return (memberValue.isEqual(EncapsulatedContentInfo.defaultValues(E_CONTENT)));\n                    return false;\n                }\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.eContentType || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any({ name: (names.eContent || EMPTY_STRING) })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$d);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, EncapsulatedContentInfo.schema({\n            names: {\n                eContentType: E_CONTENT_TYPE,\n                eContent: E_CONTENT\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.eContentType = asn1.result.eContentType.valueBlock.toString();\n        if (E_CONTENT in asn1.result)\n            this.eContent = asn1.result.eContent;\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.eContentType }));\n        if (this.eContent) {\n            if (EncapsulatedContentInfo.compareWithDefault(E_CONTENT, this.eContent) === false) {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [this.eContent]\n                }));\n            }\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            eContentType: this.eContentType\n        };\n        if (this.eContent && EncapsulatedContentInfo.compareWithDefault(E_CONTENT, this.eContent) === false) {\n            res.eContent = this.eContent.toJSON();\n        }\n        return res;\n    }\n}\nEncapsulatedContentInfo.CLASS_NAME = \"EncapsulatedContentInfo\";\n\nclass KeyBag extends PrivateKeyInfo {\n    constructor(parameters = {}) {\n        super(parameters);\n    }\n}\n\nconst MAC = \"mac\";\nconst MAC_SALT = \"macSalt\";\nconst ITERATIONS = \"iterations\";\nconst CLEAR_PROPS$c = [\n    MAC,\n    MAC_SALT,\n    ITERATIONS\n];\nclass MacData extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.mac = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MAC, MacData.defaultValues(MAC));\n        this.macSalt = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MAC_SALT, MacData.defaultValues(MAC_SALT));\n        if (ITERATIONS in parameters) {\n            this.iterations = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ITERATIONS, MacData.defaultValues(ITERATIONS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case MAC:\n                return new DigestInfo();\n            case MAC_SALT:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case ITERATIONS:\n                return 1;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case MAC:\n                return ((DigestInfo.compareWithDefault(\"digestAlgorithm\", memberValue.digestAlgorithm)) &&\n                    (DigestInfo.compareWithDefault(\"digest\", memberValue.digest)));\n            case MAC_SALT:\n                return (memberValue.isEqual(MacData.defaultValues(memberName)));\n            case ITERATIONS:\n                return (memberValue === MacData.defaultValues(memberName));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            optional: (names.optional || true),\n            value: [\n                DigestInfo.schema(names.mac || {\n                    names: {\n                        blockName: MAC\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.macSalt || MAC_SALT) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                    optional: true,\n                    name: (names.iterations || ITERATIONS)\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$c);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, MacData.schema({\n            names: {\n                mac: {\n                    names: {\n                        blockName: MAC\n                    }\n                },\n                macSalt: MAC_SALT,\n                iterations: ITERATIONS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.mac = new DigestInfo({ schema: asn1.result.mac });\n        this.macSalt = asn1.result.macSalt;\n        if (ITERATIONS in asn1.result)\n            this.iterations = asn1.result.iterations.valueBlock.valueDec;\n    }\n    toSchema() {\n        const outputArray = [\n            this.mac.toSchema(),\n            this.macSalt\n        ];\n        if (this.iterations !== undefined) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.iterations }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            mac: this.mac.toJSON(),\n            macSalt: this.macSalt.toJSON(),\n        };\n        if (this.iterations !== undefined) {\n            res.iterations = this.iterations;\n        }\n        return res;\n    }\n}\nMacData.CLASS_NAME = \"MacData\";\n\nconst HASH_ALGORITHM = \"hashAlgorithm\";\nconst HASHED_MESSAGE = \"hashedMessage\";\nconst CLEAR_PROPS$b = [\n    HASH_ALGORITHM,\n    HASHED_MESSAGE,\n];\nclass MessageImprint extends PkiObject {\n    static async create(hashAlgorithm, message, crypto = getCrypto(true)) {\n        const hashAlgorithmOID = crypto.getOIDByAlgorithm({ name: hashAlgorithm }, true, \"hashAlgorithm\");\n        const hashedMessage = await crypto.digest(hashAlgorithm, message);\n        const res = new MessageImprint({\n            hashAlgorithm: new AlgorithmIdentifier({\n                algorithmId: hashAlgorithmOID,\n                algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null(),\n            }),\n            hashedMessage: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: hashedMessage })\n        });\n        return res;\n    }\n    constructor(parameters = {}) {\n        super();\n        this.hashAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, HASH_ALGORITHM, MessageImprint.defaultValues(HASH_ALGORITHM));\n        this.hashedMessage = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, HASHED_MESSAGE, MessageImprint.defaultValues(HASHED_MESSAGE));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case HASH_ALGORITHM:\n                return new AlgorithmIdentifier();\n            case HASHED_MESSAGE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case HASH_ALGORITHM:\n                return ((memberValue.algorithmId === EMPTY_STRING) && ((\"algorithmParams\" in memberValue) === false));\n            case HASHED_MESSAGE:\n                return (memberValue.isEqual(MessageImprint.defaultValues(memberName)) === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.hashAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.hashedMessage || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$b);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, MessageImprint.schema({\n            names: {\n                hashAlgorithm: {\n                    names: {\n                        blockName: HASH_ALGORITHM\n                    }\n                },\n                hashedMessage: HASHED_MESSAGE\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.hashAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.hashAlgorithm });\n        this.hashedMessage = asn1.result.hashedMessage;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                this.hashAlgorithm.toSchema(),\n                this.hashedMessage\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            hashAlgorithm: this.hashAlgorithm.toJSON(),\n            hashedMessage: this.hashedMessage.toJSON(),\n        };\n    }\n}\nMessageImprint.CLASS_NAME = \"MessageImprint\";\n\nconst REQ_CERT = \"reqCert\";\nconst SINGLE_REQUEST_EXTENSIONS = \"singleRequestExtensions\";\nconst CLEAR_PROPS$a = [\n    REQ_CERT,\n    SINGLE_REQUEST_EXTENSIONS,\n];\nclass Request extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.reqCert = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REQ_CERT, Request.defaultValues(REQ_CERT));\n        if (SINGLE_REQUEST_EXTENSIONS in parameters) {\n            this.singleRequestExtensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SINGLE_REQUEST_EXTENSIONS, Request.defaultValues(SINGLE_REQUEST_EXTENSIONS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case REQ_CERT:\n                return new CertID();\n            case SINGLE_REQUEST_EXTENSIONS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case REQ_CERT:\n                return (memberValue.isEqual(Request.defaultValues(memberName)));\n            case SINGLE_REQUEST_EXTENSIONS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                CertID.schema(names.reqCert || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [Extension.schema(names.extensions || {\n                            names: {\n                                blockName: (names.singleRequestExtensions || EMPTY_STRING)\n                            }\n                        })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$a);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Request.schema({\n            names: {\n                reqCert: {\n                    names: {\n                        blockName: REQ_CERT\n                    }\n                },\n                extensions: {\n                    names: {\n                        blockName: SINGLE_REQUEST_EXTENSIONS\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.reqCert = new CertID({ schema: asn1.result.reqCert });\n        if (SINGLE_REQUEST_EXTENSIONS in asn1.result) {\n            this.singleRequestExtensions = Array.from(asn1.result.singleRequestExtensions.valueBlock.value, element => new Extension({ schema: element }));\n        }\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.reqCert.toSchema());\n        if (this.singleRequestExtensions) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                        value: Array.from(this.singleRequestExtensions, o => o.toSchema())\n                    })\n                ]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            reqCert: this.reqCert.toJSON()\n        };\n        if (this.singleRequestExtensions) {\n            res.singleRequestExtensions = Array.from(this.singleRequestExtensions, o => o.toJSON());\n        }\n        return res;\n    }\n}\nRequest.CLASS_NAME = \"Request\";\n\nconst TBS = \"tbs\";\nconst VERSION$5 = \"version\";\nconst REQUESTOR_NAME = \"requestorName\";\nconst REQUEST_LIST = \"requestList\";\nconst REQUEST_EXTENSIONS = \"requestExtensions\";\nconst TBS_REQUEST$1 = \"TBSRequest\";\nconst TBS_REQUEST_VERSION = `${TBS_REQUEST$1}.${VERSION$5}`;\nconst TBS_REQUEST_REQUESTOR_NAME = `${TBS_REQUEST$1}.${REQUESTOR_NAME}`;\nconst TBS_REQUEST_REQUESTS = `${TBS_REQUEST$1}.requests`;\nconst TBS_REQUEST_REQUEST_EXTENSIONS = `${TBS_REQUEST$1}.${REQUEST_EXTENSIONS}`;\nconst CLEAR_PROPS$9 = [\n    TBS_REQUEST$1,\n    TBS_REQUEST_VERSION,\n    TBS_REQUEST_REQUESTOR_NAME,\n    TBS_REQUEST_REQUESTS,\n    TBS_REQUEST_REQUEST_EXTENSIONS\n];\nclass TBSRequest extends PkiObject {\n    get tbs() {\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(this.tbsView);\n    }\n    set tbs(value) {\n        this.tbsView = new Uint8Array(value);\n    }\n    constructor(parameters = {}) {\n        super();\n        this.tbsView = new Uint8Array(pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TBS, TBSRequest.defaultValues(TBS)));\n        if (VERSION$5 in parameters) {\n            this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$5, TBSRequest.defaultValues(VERSION$5));\n        }\n        if (REQUESTOR_NAME in parameters) {\n            this.requestorName = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REQUESTOR_NAME, TBSRequest.defaultValues(REQUESTOR_NAME));\n        }\n        this.requestList = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REQUEST_LIST, TBSRequest.defaultValues(REQUEST_LIST));\n        if (REQUEST_EXTENSIONS in parameters) {\n            this.requestExtensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REQUEST_EXTENSIONS, TBSRequest.defaultValues(REQUEST_EXTENSIONS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TBS:\n                return EMPTY_BUFFER;\n            case VERSION$5:\n                return 0;\n            case REQUESTOR_NAME:\n                return new GeneralName();\n            case REQUEST_LIST:\n            case REQUEST_EXTENSIONS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case TBS:\n                return (memberValue.byteLength === 0);\n            case VERSION$5:\n                return (memberValue === TBSRequest.defaultValues(memberName));\n            case REQUESTOR_NAME:\n                return ((memberValue.type === GeneralName.defaultValues(\"type\")) && (Object.keys(memberValue.value).length === 0));\n            case REQUEST_LIST:\n            case REQUEST_EXTENSIONS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || TBS_REQUEST$1),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.TBSRequestVersion || TBS_REQUEST_VERSION) })]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [GeneralName.schema(names.requestorName || {\n                            names: {\n                                blockName: TBS_REQUEST_REQUESTOR_NAME\n                            }\n                        })]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    name: (names.requestList || \"TBSRequest.requestList\"),\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.requests || TBS_REQUEST_REQUESTS),\n                            value: Request.schema(names.requestNames || {})\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    value: [Extensions.schema(names.extensions || {\n                            names: {\n                                blockName: (names.requestExtensions || TBS_REQUEST_REQUEST_EXTENSIONS)\n                            }\n                        })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$9);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, TBSRequest.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.tbsView = asn1.result.TBSRequest.valueBeforeDecodeView;\n        if (TBS_REQUEST_VERSION in asn1.result)\n            this.version = asn1.result[TBS_REQUEST_VERSION].valueBlock.valueDec;\n        if (TBS_REQUEST_REQUESTOR_NAME in asn1.result)\n            this.requestorName = new GeneralName({ schema: asn1.result[TBS_REQUEST_REQUESTOR_NAME] });\n        this.requestList = Array.from(asn1.result[TBS_REQUEST_REQUESTS], element => new Request({ schema: element }));\n        if (TBS_REQUEST_REQUEST_EXTENSIONS in asn1.result)\n            this.requestExtensions = Array.from(asn1.result[TBS_REQUEST_REQUEST_EXTENSIONS].valueBlock.value, element => new Extension({ schema: element }));\n    }\n    toSchema(encodeFlag = false) {\n        let tbsSchema;\n        if (encodeFlag === false) {\n            if (this.tbsView.byteLength === 0)\n                return TBSRequest.schema();\n            const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.tbsView);\n            AsnError.assert(asn1, \"TBS Request\");\n            if (!(asn1.result instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence)) {\n                throw new Error(\"ASN.1 result should be SEQUENCE\");\n            }\n            tbsSchema = asn1.result;\n        }\n        else {\n            const outputArray = [];\n            if (this.version !== undefined) {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version })]\n                }));\n            }\n            if (this.requestorName) {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [this.requestorName.toSchema()]\n                }));\n            }\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: Array.from(this.requestList, o => o.toSchema())\n            }));\n            if (this.requestExtensions) {\n                outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 2\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                            value: Array.from(this.requestExtensions, o => o.toSchema())\n                        })\n                    ]\n                }));\n            }\n            tbsSchema = new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                value: outputArray\n            });\n        }\n        return tbsSchema;\n    }\n    toJSON() {\n        const res = {};\n        if (this.version != undefined)\n            res.version = this.version;\n        if (this.requestorName) {\n            res.requestorName = this.requestorName.toJSON();\n        }\n        res.requestList = Array.from(this.requestList, o => o.toJSON());\n        if (this.requestExtensions) {\n            res.requestExtensions = Array.from(this.requestExtensions, o => o.toJSON());\n        }\n        return res;\n    }\n}\nTBSRequest.CLASS_NAME = \"TBSRequest\";\n\nconst SIGNATURE_ALGORITHM$1 = \"signatureAlgorithm\";\nconst SIGNATURE$1 = \"signature\";\nconst CERTS = \"certs\";\nclass Signature extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM$1, Signature.defaultValues(SIGNATURE_ALGORITHM$1));\n        this.signature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE$1, Signature.defaultValues(SIGNATURE$1));\n        if (CERTS in parameters) {\n            this.certs = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERTS, Signature.defaultValues(CERTS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case SIGNATURE_ALGORITHM$1:\n                return new AlgorithmIdentifier();\n            case SIGNATURE$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            case CERTS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case SIGNATURE_ALGORITHM$1:\n                return ((memberValue.algorithmId === EMPTY_STRING) && ((\"algorithmParams\" in memberValue) === false));\n            case SIGNATURE$1:\n                return (memberValue.isEqual(Signature.defaultValues(memberName)));\n            case CERTS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                AlgorithmIdentifier.schema(names.signatureAlgorithm || {}),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ name: (names.signature || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                            value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                                    name: (names.certs || EMPTY_STRING),\n                                    value: Certificate.schema({})\n                                })]\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            SIGNATURE_ALGORITHM$1,\n            SIGNATURE$1,\n            CERTS\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, Signature.schema({\n            names: {\n                signatureAlgorithm: {\n                    names: {\n                        blockName: SIGNATURE_ALGORITHM$1\n                    }\n                },\n                signature: SIGNATURE$1,\n                certs: CERTS\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.signatureAlgorithm = new AlgorithmIdentifier({ schema: asn1.result.signatureAlgorithm });\n        this.signature = asn1.result.signature;\n        if (CERTS in asn1.result)\n            this.certs = Array.from(asn1.result.certs, element => new Certificate({ schema: element }));\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.signatureAlgorithm.toSchema());\n        outputArray.push(this.signature);\n        if (this.certs) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                        value: Array.from(this.certs, o => o.toSchema())\n                    })\n                ]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            signatureAlgorithm: this.signatureAlgorithm.toJSON(),\n            signature: this.signature.toJSON(),\n        };\n        if (this.certs) {\n            res.certs = Array.from(this.certs, o => o.toJSON());\n        }\n        return res;\n    }\n}\nSignature.CLASS_NAME = \"Signature\";\n\nconst TBS_REQUEST = \"tbsRequest\";\nconst OPTIONAL_SIGNATURE = \"optionalSignature\";\nconst CLEAR_PROPS$8 = [\n    TBS_REQUEST,\n    OPTIONAL_SIGNATURE\n];\nclass OCSPRequest extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.tbsRequest = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TBS_REQUEST, OCSPRequest.defaultValues(TBS_REQUEST));\n        if (OPTIONAL_SIGNATURE in parameters) {\n            this.optionalSignature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OPTIONAL_SIGNATURE, OCSPRequest.defaultValues(OPTIONAL_SIGNATURE));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TBS_REQUEST:\n                return new TBSRequest();\n            case OPTIONAL_SIGNATURE:\n                return new Signature();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case TBS_REQUEST:\n                return ((TBSRequest.compareWithDefault(\"tbs\", memberValue.tbs)) &&\n                    (TBSRequest.compareWithDefault(\"version\", memberValue.version)) &&\n                    (TBSRequest.compareWithDefault(\"requestorName\", memberValue.requestorName)) &&\n                    (TBSRequest.compareWithDefault(\"requestList\", memberValue.requestList)) &&\n                    (TBSRequest.compareWithDefault(\"requestExtensions\", memberValue.requestExtensions)));\n            case OPTIONAL_SIGNATURE:\n                return ((Signature.compareWithDefault(\"signatureAlgorithm\", memberValue.signatureAlgorithm)) &&\n                    (Signature.compareWithDefault(\"signature\", memberValue.signature)) &&\n                    (Signature.compareWithDefault(\"certs\", memberValue.certs)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: names.blockName || \"OCSPRequest\",\n            value: [\n                TBSRequest.schema(names.tbsRequest || {\n                    names: {\n                        blockName: TBS_REQUEST\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        Signature.schema(names.optionalSignature || {\n                            names: {\n                                blockName: OPTIONAL_SIGNATURE\n                            }\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$8);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OCSPRequest.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.tbsRequest = new TBSRequest({ schema: asn1.result.tbsRequest });\n        if (OPTIONAL_SIGNATURE in asn1.result)\n            this.optionalSignature = new Signature({ schema: asn1.result.optionalSignature });\n    }\n    toSchema(encodeFlag = false) {\n        const outputArray = [];\n        outputArray.push(this.tbsRequest.toSchema(encodeFlag));\n        if (this.optionalSignature)\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [\n                    this.optionalSignature.toSchema()\n                ]\n            }));\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            tbsRequest: this.tbsRequest.toJSON()\n        };\n        if (this.optionalSignature) {\n            res.optionalSignature = this.optionalSignature.toJSON();\n        }\n        return res;\n    }\n    async createForCertificate(certificate, parameters, crypto = getCrypto(true)) {\n        const certID = new CertID();\n        await certID.createForCertificate(certificate, parameters, crypto);\n        this.tbsRequest.requestList.push(new Request({\n            reqCert: certID,\n        }));\n    }\n    async sign(privateKey, hashAlgorithm = \"SHA-1\", crypto = getCrypto(true)) {\n        ParameterError.assertEmpty(privateKey, \"privateKey\", \"OCSPRequest.sign method\");\n        if (!this.optionalSignature) {\n            throw new Error(\"Need to create \\\"optionalSignature\\\" field before signing\");\n        }\n        const signatureParams = await crypto.getSignatureParameters(privateKey, hashAlgorithm);\n        const parameters = signatureParams.parameters;\n        this.optionalSignature.signatureAlgorithm = signatureParams.signatureAlgorithm;\n        const tbs = this.tbsRequest.toSchema(true).toBER(false);\n        const signature = await crypto.signWithPrivateKey(tbs, privateKey, parameters);\n        this.optionalSignature.signature = new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({ valueHex: signature });\n    }\n    verify() {\n    }\n}\nOCSPRequest.CLASS_NAME = \"OCSPRequest\";\n\nconst RESPONSE_TYPE = \"responseType\";\nconst RESPONSE = \"response\";\nconst CLEAR_PROPS$7 = [\n    RESPONSE_TYPE,\n    RESPONSE\n];\nclass ResponseBytes extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.responseType = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RESPONSE_TYPE, ResponseBytes.defaultValues(RESPONSE_TYPE));\n        this.response = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RESPONSE, ResponseBytes.defaultValues(RESPONSE));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case RESPONSE_TYPE:\n                return EMPTY_STRING;\n            case RESPONSE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case RESPONSE_TYPE:\n                return (memberValue === EMPTY_STRING);\n            case RESPONSE:\n                return (memberValue.isEqual(ResponseBytes.defaultValues(memberName)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.responseType || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.response || EMPTY_STRING) })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$7);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, ResponseBytes.schema({\n            names: {\n                responseType: RESPONSE_TYPE,\n                response: RESPONSE\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.responseType = asn1.result.responseType.valueBlock.toString();\n        this.response = asn1.result.response;\n    }\n    toSchema() {\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.responseType }),\n                this.response\n            ]\n        }));\n    }\n    toJSON() {\n        return {\n            responseType: this.responseType,\n            response: this.response.toJSON(),\n        };\n    }\n}\nResponseBytes.CLASS_NAME = \"ResponseBytes\";\n\nconst RESPONSE_STATUS = \"responseStatus\";\nconst RESPONSE_BYTES = \"responseBytes\";\nclass OCSPResponse extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.responseStatus = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RESPONSE_STATUS, OCSPResponse.defaultValues(RESPONSE_STATUS));\n        if (RESPONSE_BYTES in parameters) {\n            this.responseBytes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, RESPONSE_BYTES, OCSPResponse.defaultValues(RESPONSE_BYTES));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case RESPONSE_STATUS:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Enumerated();\n            case RESPONSE_BYTES:\n                return new ResponseBytes();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case RESPONSE_STATUS:\n                return (memberValue.isEqual(OCSPResponse.defaultValues(memberName)));\n            case RESPONSE_BYTES:\n                return ((ResponseBytes.compareWithDefault(\"responseType\", memberValue.responseType)) &&\n                    (ResponseBytes.compareWithDefault(\"response\", memberValue.response)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || \"OCSPResponse\"),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Enumerated({ name: (names.responseStatus || RESPONSE_STATUS) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [\n                        ResponseBytes.schema(names.responseBytes || {\n                            names: {\n                                blockName: RESPONSE_BYTES\n                            }\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, [\n            RESPONSE_STATUS,\n            RESPONSE_BYTES\n        ]);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, OCSPResponse.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.responseStatus = asn1.result.responseStatus;\n        if (RESPONSE_BYTES in asn1.result)\n            this.responseBytes = new ResponseBytes({ schema: asn1.result.responseBytes });\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.responseStatus);\n        if (this.responseBytes) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [this.responseBytes.toSchema()]\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            responseStatus: this.responseStatus.toJSON()\n        };\n        if (this.responseBytes) {\n            res.responseBytes = this.responseBytes.toJSON();\n        }\n        return res;\n    }\n    async getCertificateStatus(certificate, issuerCertificate, crypto = getCrypto(true)) {\n        let basicResponse;\n        const result = {\n            isForCertificate: false,\n            status: 2\n        };\n        if (!this.responseBytes)\n            return result;\n        if (this.responseBytes.responseType !== id_PKIX_OCSP_Basic)\n            return result;\n        try {\n            const asn1Basic = asn1js__WEBPACK_IMPORTED_MODULE_0__.fromBER(this.responseBytes.response.valueBlock.valueHexView);\n            AsnError.assert(asn1Basic, \"Basic OCSP response\");\n            basicResponse = new BasicOCSPResponse({ schema: asn1Basic.result });\n        }\n        catch (ex) {\n            return result;\n        }\n        return basicResponse.getCertificateStatus(certificate, issuerCertificate, crypto);\n    }\n    async sign(privateKey, hashAlgorithm, crypto = getCrypto(true)) {\n        var _a;\n        if (this.responseBytes && this.responseBytes.responseType === id_PKIX_OCSP_Basic) {\n            const basicResponse = BasicOCSPResponse.fromBER(this.responseBytes.response.valueBlock.valueHexView);\n            return basicResponse.sign(privateKey, hashAlgorithm, crypto);\n        }\n        throw new Error(`Unknown ResponseBytes type: ${((_a = this.responseBytes) === null || _a === void 0 ? void 0 : _a.responseType) || \"Unknown\"}`);\n    }\n    async verify(issuerCertificate = null, crypto = getCrypto(true)) {\n        var _a;\n        if ((RESPONSE_BYTES in this) === false)\n            throw new Error(\"Empty ResponseBytes field\");\n        if (this.responseBytes && this.responseBytes.responseType === id_PKIX_OCSP_Basic) {\n            const basicResponse = BasicOCSPResponse.fromBER(this.responseBytes.response.valueBlock.valueHexView);\n            if (issuerCertificate !== null) {\n                if (!basicResponse.certs) {\n                    basicResponse.certs = [];\n                }\n                basicResponse.certs.push(issuerCertificate);\n            }\n            return basicResponse.verify({}, crypto);\n        }\n        throw new Error(`Unknown ResponseBytes type: ${((_a = this.responseBytes) === null || _a === void 0 ? void 0 : _a.responseType) || \"Unknown\"}`);\n    }\n}\nOCSPResponse.CLASS_NAME = \"OCSPResponse\";\n\nconst TYPE = \"type\";\nconst ATTRIBUTES = \"attributes\";\nconst ENCODED_VALUE = \"encodedValue\";\nconst CLEAR_PROPS$6 = [\n    ATTRIBUTES\n];\nclass SignedAndUnsignedAttributes extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.type = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TYPE, SignedAndUnsignedAttributes.defaultValues(TYPE));\n        this.attributes = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ATTRIBUTES, SignedAndUnsignedAttributes.defaultValues(ATTRIBUTES));\n        this.encodedValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCODED_VALUE, SignedAndUnsignedAttributes.defaultValues(ENCODED_VALUE));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case TYPE:\n                return (-1);\n            case ATTRIBUTES:\n                return [];\n            case ENCODED_VALUE:\n                return EMPTY_BUFFER;\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case TYPE:\n                return (memberValue === SignedAndUnsignedAttributes.defaultValues(TYPE));\n            case ATTRIBUTES:\n                return (memberValue.length === 0);\n            case ENCODED_VALUE:\n                return (memberValue.byteLength === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n            name: (names.blockName || EMPTY_STRING),\n            optional: true,\n            idBlock: {\n                tagClass: 3,\n                tagNumber: names.tagNumber || 0\n            },\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                    name: (names.attributes || EMPTY_STRING),\n                    value: Attribute.schema()\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$6);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, SignedAndUnsignedAttributes.schema({\n            names: {\n                tagNumber: this.type,\n                attributes: ATTRIBUTES\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.type = asn1.result.idBlock.tagNumber;\n        this.encodedValue = pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(asn1.result.valueBeforeDecodeView);\n        const encodedView = new Uint8Array(this.encodedValue);\n        encodedView[0] = 0x31;\n        if ((ATTRIBUTES in asn1.result) === false) {\n            if (this.type === 0)\n                throw new Error(\"Wrong structure of SignedUnsignedAttributes\");\n            else\n                return;\n        }\n        this.attributes = Array.from(asn1.result.attributes, element => new Attribute({ schema: element }));\n    }\n    toSchema() {\n        if (SignedAndUnsignedAttributes.compareWithDefault(TYPE, this.type) || SignedAndUnsignedAttributes.compareWithDefault(ATTRIBUTES, this.attributes))\n            throw new Error(\"Incorrectly initialized \\\"SignedAndUnsignedAttributes\\\" class\");\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n            optional: true,\n            idBlock: {\n                tagClass: 3,\n                tagNumber: this.type\n            },\n            value: Array.from(this.attributes, o => o.toSchema())\n        }));\n    }\n    toJSON() {\n        if (SignedAndUnsignedAttributes.compareWithDefault(TYPE, this.type) || SignedAndUnsignedAttributes.compareWithDefault(ATTRIBUTES, this.attributes))\n            throw new Error(\"Incorrectly initialized \\\"SignedAndUnsignedAttributes\\\" class\");\n        return {\n            type: this.type,\n            attributes: Array.from(this.attributes, o => o.toJSON())\n        };\n    }\n}\nSignedAndUnsignedAttributes.CLASS_NAME = \"SignedAndUnsignedAttributes\";\n\nconst VERSION$4 = \"version\";\nconst SID = \"sid\";\nconst DIGEST_ALGORITHM = \"digestAlgorithm\";\nconst SIGNED_ATTRS = \"signedAttrs\";\nconst SIGNATURE_ALGORITHM = \"signatureAlgorithm\";\nconst SIGNATURE = \"signature\";\nconst UNSIGNED_ATTRS = \"unsignedAttrs\";\nconst SIGNER_INFO = \"SignerInfo\";\nconst SIGNER_INFO_VERSION = `${SIGNER_INFO}.${VERSION$4}`;\nconst SIGNER_INFO_SID = `${SIGNER_INFO}.${SID}`;\nconst SIGNER_INFO_DIGEST_ALGORITHM = `${SIGNER_INFO}.${DIGEST_ALGORITHM}`;\nconst SIGNER_INFO_SIGNED_ATTRS = `${SIGNER_INFO}.${SIGNED_ATTRS}`;\nconst SIGNER_INFO_SIGNATURE_ALGORITHM = `${SIGNER_INFO}.${SIGNATURE_ALGORITHM}`;\nconst SIGNER_INFO_SIGNATURE = `${SIGNER_INFO}.${SIGNATURE}`;\nconst SIGNER_INFO_UNSIGNED_ATTRS = `${SIGNER_INFO}.${UNSIGNED_ATTRS}`;\nconst CLEAR_PROPS$5 = [\n    SIGNER_INFO_VERSION,\n    SIGNER_INFO_SID,\n    SIGNER_INFO_DIGEST_ALGORITHM,\n    SIGNER_INFO_SIGNED_ATTRS,\n    SIGNER_INFO_SIGNATURE_ALGORITHM,\n    SIGNER_INFO_SIGNATURE,\n    SIGNER_INFO_UNSIGNED_ATTRS\n];\nclass SignerInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$4, SignerInfo.defaultValues(VERSION$4));\n        this.sid = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SID, SignerInfo.defaultValues(SID));\n        this.digestAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DIGEST_ALGORITHM, SignerInfo.defaultValues(DIGEST_ALGORITHM));\n        if (SIGNED_ATTRS in parameters) {\n            this.signedAttrs = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNED_ATTRS, SignerInfo.defaultValues(SIGNED_ATTRS));\n        }\n        this.signatureAlgorithm = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE_ALGORITHM, SignerInfo.defaultValues(SIGNATURE_ALGORITHM));\n        this.signature = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNATURE, SignerInfo.defaultValues(SIGNATURE));\n        if (UNSIGNED_ATTRS in parameters) {\n            this.unsignedAttrs = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, UNSIGNED_ATTRS, SignerInfo.defaultValues(UNSIGNED_ATTRS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$4:\n                return 0;\n            case SID:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Any();\n            case DIGEST_ALGORITHM:\n                return new AlgorithmIdentifier();\n            case SIGNED_ATTRS:\n                return new SignedAndUnsignedAttributes({ type: 0 });\n            case SIGNATURE_ALGORITHM:\n                return new AlgorithmIdentifier();\n            case SIGNATURE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString();\n            case UNSIGNED_ATTRS:\n                return new SignedAndUnsignedAttributes({ type: 1 });\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$4:\n                return (SignerInfo.defaultValues(VERSION$4) === memberValue);\n            case SID:\n                return (memberValue instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any);\n            case DIGEST_ALGORITHM:\n                if ((memberValue instanceof AlgorithmIdentifier) === false)\n                    return false;\n                return memberValue.isEqual(SignerInfo.defaultValues(DIGEST_ALGORITHM));\n            case SIGNED_ATTRS:\n                return ((SignedAndUnsignedAttributes.compareWithDefault(\"type\", memberValue.type))\n                    && (SignedAndUnsignedAttributes.compareWithDefault(\"attributes\", memberValue.attributes))\n                    && (SignedAndUnsignedAttributes.compareWithDefault(\"encodedValue\", memberValue.encodedValue)));\n            case SIGNATURE_ALGORITHM:\n                if ((memberValue instanceof AlgorithmIdentifier) === false)\n                    return false;\n                return memberValue.isEqual(SignerInfo.defaultValues(SIGNATURE_ALGORITHM));\n            case SIGNATURE:\n            case UNSIGNED_ATTRS:\n                return ((SignedAndUnsignedAttributes.compareWithDefault(\"type\", memberValue.type))\n                    && (SignedAndUnsignedAttributes.compareWithDefault(\"attributes\", memberValue.attributes))\n                    && (SignedAndUnsignedAttributes.compareWithDefault(\"encodedValue\", memberValue.encodedValue)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: SIGNER_INFO,\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || SIGNER_INFO_VERSION) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                    value: [\n                        IssuerAndSerialNumber.schema(names.sidSchema || {\n                            names: {\n                                blockName: SIGNER_INFO_SID\n                            }\n                        }),\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Choice({\n                            value: [\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                                    optional: true,\n                                    name: (names.sid || SIGNER_INFO_SID),\n                                    idBlock: {\n                                        tagClass: 3,\n                                        tagNumber: 0\n                                    },\n                                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString()]\n                                }),\n                                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Primitive({\n                                    optional: true,\n                                    name: (names.sid || SIGNER_INFO_SID),\n                                    idBlock: {\n                                        tagClass: 3,\n                                        tagNumber: 0\n                                    }\n                                }),\n                            ]\n                        }),\n                    ]\n                }),\n                AlgorithmIdentifier.schema(names.digestAlgorithm || {\n                    names: {\n                        blockName: SIGNER_INFO_DIGEST_ALGORITHM\n                    }\n                }),\n                SignedAndUnsignedAttributes.schema(names.signedAttrs || {\n                    names: {\n                        blockName: SIGNER_INFO_SIGNED_ATTRS,\n                        tagNumber: 0\n                    }\n                }),\n                AlgorithmIdentifier.schema(names.signatureAlgorithm || {\n                    names: {\n                        blockName: SIGNER_INFO_SIGNATURE_ALGORITHM\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ name: (names.signature || SIGNER_INFO_SIGNATURE) }),\n                SignedAndUnsignedAttributes.schema(names.unsignedAttrs || {\n                    names: {\n                        blockName: SIGNER_INFO_UNSIGNED_ATTRS,\n                        tagNumber: 1\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$5);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, SignerInfo.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result[SIGNER_INFO_VERSION].valueBlock.valueDec;\n        const currentSid = asn1.result[SIGNER_INFO_SID];\n        if (currentSid.idBlock.tagClass === 1)\n            this.sid = new IssuerAndSerialNumber({ schema: currentSid });\n        else\n            this.sid = currentSid;\n        this.digestAlgorithm = new AlgorithmIdentifier({ schema: asn1.result[SIGNER_INFO_DIGEST_ALGORITHM] });\n        if (SIGNER_INFO_SIGNED_ATTRS in asn1.result)\n            this.signedAttrs = new SignedAndUnsignedAttributes({ type: 0, schema: asn1.result[SIGNER_INFO_SIGNED_ATTRS] });\n        this.signatureAlgorithm = new AlgorithmIdentifier({ schema: asn1.result[SIGNER_INFO_SIGNATURE_ALGORITHM] });\n        this.signature = asn1.result[SIGNER_INFO_SIGNATURE];\n        if (SIGNER_INFO_UNSIGNED_ATTRS in asn1.result)\n            this.unsignedAttrs = new SignedAndUnsignedAttributes({ type: 1, schema: asn1.result[SIGNER_INFO_UNSIGNED_ATTRS] });\n    }\n    toSchema() {\n        if (SignerInfo.compareWithDefault(SID, this.sid))\n            throw new Error(\"Incorrectly initialized \\\"SignerInfo\\\" class\");\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        if (this.sid instanceof IssuerAndSerialNumber)\n            outputArray.push(this.sid.toSchema());\n        else\n            outputArray.push(this.sid);\n        outputArray.push(this.digestAlgorithm.toSchema());\n        if (this.signedAttrs) {\n            if (SignerInfo.compareWithDefault(SIGNED_ATTRS, this.signedAttrs) === false)\n                outputArray.push(this.signedAttrs.toSchema());\n        }\n        outputArray.push(this.signatureAlgorithm.toSchema());\n        outputArray.push(this.signature);\n        if (this.unsignedAttrs) {\n            if (SignerInfo.compareWithDefault(UNSIGNED_ATTRS, this.unsignedAttrs) === false)\n                outputArray.push(this.unsignedAttrs.toSchema());\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        if (SignerInfo.compareWithDefault(SID, this.sid)) {\n            throw new Error(\"Incorrectly initialized \\\"SignerInfo\\\" class\");\n        }\n        const res = {\n            version: this.version,\n            digestAlgorithm: this.digestAlgorithm.toJSON(),\n            signatureAlgorithm: this.signatureAlgorithm.toJSON(),\n            signature: this.signature.toJSON(),\n        };\n        if (!(this.sid instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any))\n            res.sid = this.sid.toJSON();\n        if (this.signedAttrs && SignerInfo.compareWithDefault(SIGNED_ATTRS, this.signedAttrs) === false) {\n            res.signedAttrs = this.signedAttrs.toJSON();\n        }\n        if (this.unsignedAttrs && SignerInfo.compareWithDefault(UNSIGNED_ATTRS, this.unsignedAttrs) === false) {\n            res.unsignedAttrs = this.unsignedAttrs.toJSON();\n        }\n        return res;\n    }\n}\nSignerInfo.CLASS_NAME = \"SignerInfo\";\n\nconst VERSION$3 = \"version\";\nconst POLICY = \"policy\";\nconst MESSAGE_IMPRINT$1 = \"messageImprint\";\nconst SERIAL_NUMBER = \"serialNumber\";\nconst GEN_TIME = \"genTime\";\nconst ORDERING = \"ordering\";\nconst NONCE$1 = \"nonce\";\nconst ACCURACY = \"accuracy\";\nconst TSA = \"tsa\";\nconst EXTENSIONS$1 = \"extensions\";\nconst TST_INFO = \"TSTInfo\";\nconst TST_INFO_VERSION = `${TST_INFO}.${VERSION$3}`;\nconst TST_INFO_POLICY = `${TST_INFO}.${POLICY}`;\nconst TST_INFO_MESSAGE_IMPRINT = `${TST_INFO}.${MESSAGE_IMPRINT$1}`;\nconst TST_INFO_SERIAL_NUMBER = `${TST_INFO}.${SERIAL_NUMBER}`;\nconst TST_INFO_GEN_TIME = `${TST_INFO}.${GEN_TIME}`;\nconst TST_INFO_ACCURACY = `${TST_INFO}.${ACCURACY}`;\nconst TST_INFO_ORDERING = `${TST_INFO}.${ORDERING}`;\nconst TST_INFO_NONCE = `${TST_INFO}.${NONCE$1}`;\nconst TST_INFO_TSA = `${TST_INFO}.${TSA}`;\nconst TST_INFO_EXTENSIONS = `${TST_INFO}.${EXTENSIONS$1}`;\nconst CLEAR_PROPS$4 = [\n    TST_INFO_VERSION,\n    TST_INFO_POLICY,\n    TST_INFO_MESSAGE_IMPRINT,\n    TST_INFO_SERIAL_NUMBER,\n    TST_INFO_GEN_TIME,\n    TST_INFO_ACCURACY,\n    TST_INFO_ORDERING,\n    TST_INFO_NONCE,\n    TST_INFO_TSA,\n    TST_INFO_EXTENSIONS\n];\nclass TSTInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$3, TSTInfo.defaultValues(VERSION$3));\n        this.policy = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, POLICY, TSTInfo.defaultValues(POLICY));\n        this.messageImprint = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MESSAGE_IMPRINT$1, TSTInfo.defaultValues(MESSAGE_IMPRINT$1));\n        this.serialNumber = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SERIAL_NUMBER, TSTInfo.defaultValues(SERIAL_NUMBER));\n        this.genTime = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, GEN_TIME, TSTInfo.defaultValues(GEN_TIME));\n        if (ACCURACY in parameters) {\n            this.accuracy = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ACCURACY, TSTInfo.defaultValues(ACCURACY));\n        }\n        if (ORDERING in parameters) {\n            this.ordering = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ORDERING, TSTInfo.defaultValues(ORDERING));\n        }\n        if (NONCE$1 in parameters) {\n            this.nonce = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NONCE$1, TSTInfo.defaultValues(NONCE$1));\n        }\n        if (TSA in parameters) {\n            this.tsa = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TSA, TSTInfo.defaultValues(TSA));\n        }\n        if (EXTENSIONS$1 in parameters) {\n            this.extensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXTENSIONS$1, TSTInfo.defaultValues(EXTENSIONS$1));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$3:\n                return 0;\n            case POLICY:\n                return EMPTY_STRING;\n            case MESSAGE_IMPRINT$1:\n                return new MessageImprint();\n            case SERIAL_NUMBER:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case GEN_TIME:\n                return new Date(0, 0, 0);\n            case ACCURACY:\n                return new Accuracy();\n            case ORDERING:\n                return false;\n            case NONCE$1:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case TSA:\n                return new GeneralName();\n            case EXTENSIONS$1:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$3:\n            case POLICY:\n            case GEN_TIME:\n            case ORDERING:\n                return (memberValue === TSTInfo.defaultValues(ORDERING));\n            case MESSAGE_IMPRINT$1:\n                return ((MessageImprint.compareWithDefault(HASH_ALGORITHM, memberValue.hashAlgorithm)) &&\n                    (MessageImprint.compareWithDefault(HASHED_MESSAGE, memberValue.hashedMessage)));\n            case SERIAL_NUMBER:\n            case NONCE$1:\n                return (memberValue.isEqual(TSTInfo.defaultValues(NONCE$1)));\n            case ACCURACY:\n                return ((Accuracy.compareWithDefault(SECONDS, memberValue.seconds)) &&\n                    (Accuracy.compareWithDefault(MILLIS, memberValue.millis)) &&\n                    (Accuracy.compareWithDefault(MICROS, memberValue.micros)));\n            case TSA:\n                return ((GeneralName.compareWithDefault(TYPE$4, memberValue.type)) &&\n                    (GeneralName.compareWithDefault(VALUE$5, memberValue.value)));\n            case EXTENSIONS$1:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || TST_INFO),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || TST_INFO_VERSION) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ name: (names.policy || TST_INFO_POLICY) }),\n                MessageImprint.schema(names.messageImprint || {\n                    names: {\n                        blockName: TST_INFO_MESSAGE_IMPRINT\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.serialNumber || TST_INFO_SERIAL_NUMBER) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ name: (names.genTime || TST_INFO_GEN_TIME) }),\n                Accuracy.schema(names.accuracy || {\n                    names: {\n                        blockName: TST_INFO_ACCURACY\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Boolean({\n                    name: (names.ordering || TST_INFO_ORDERING),\n                    optional: true\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                    name: (names.nonce || TST_INFO_NONCE),\n                    optional: true\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [GeneralName.schema(names.tsa || {\n                            names: {\n                                blockName: TST_INFO_TSA\n                            }\n                        })]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.extensions || TST_INFO_EXTENSIONS),\n                            value: Extension.schema(names.extension || {})\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$4);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, TSTInfo.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result[TST_INFO_VERSION].valueBlock.valueDec;\n        this.policy = asn1.result[TST_INFO_POLICY].valueBlock.toString();\n        this.messageImprint = new MessageImprint({ schema: asn1.result[TST_INFO_MESSAGE_IMPRINT] });\n        this.serialNumber = asn1.result[TST_INFO_SERIAL_NUMBER];\n        this.genTime = asn1.result[TST_INFO_GEN_TIME].toDate();\n        if (TST_INFO_ACCURACY in asn1.result)\n            this.accuracy = new Accuracy({ schema: asn1.result[TST_INFO_ACCURACY] });\n        if (TST_INFO_ORDERING in asn1.result)\n            this.ordering = asn1.result[TST_INFO_ORDERING].valueBlock.value;\n        if (TST_INFO_NONCE in asn1.result)\n            this.nonce = asn1.result[TST_INFO_NONCE];\n        if (TST_INFO_TSA in asn1.result)\n            this.tsa = new GeneralName({ schema: asn1.result[TST_INFO_TSA] });\n        if (TST_INFO_EXTENSIONS in asn1.result)\n            this.extensions = Array.from(asn1.result[TST_INFO_EXTENSIONS], element => new Extension({ schema: element }));\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.policy }));\n        outputArray.push(this.messageImprint.toSchema());\n        outputArray.push(this.serialNumber);\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.GeneralizedTime({ valueDate: this.genTime }));\n        if (this.accuracy)\n            outputArray.push(this.accuracy.toSchema());\n        if (this.ordering !== undefined)\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Boolean({ value: this.ordering }));\n        if (this.nonce)\n            outputArray.push(this.nonce);\n        if (this.tsa) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: [this.tsa.toSchema()]\n            }));\n        }\n        if (this.extensions) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                optional: true,\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: Array.from(this.extensions, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            version: this.version,\n            policy: this.policy,\n            messageImprint: this.messageImprint.toJSON(),\n            serialNumber: this.serialNumber.toJSON(),\n            genTime: this.genTime\n        };\n        if (this.accuracy)\n            res.accuracy = this.accuracy.toJSON();\n        if (this.ordering !== undefined)\n            res.ordering = this.ordering;\n        if (this.nonce)\n            res.nonce = this.nonce.toJSON();\n        if (this.tsa)\n            res.tsa = this.tsa.toJSON();\n        if (this.extensions)\n            res.extensions = Array.from(this.extensions, o => o.toJSON());\n        return res;\n    }\n    async verify(params, crypto = getCrypto(true)) {\n        if (!params.data) {\n            throw new Error(\"\\\"data\\\" is a mandatory attribute for TST_INFO verification\");\n        }\n        const data = params.data;\n        if (params.notBefore) {\n            if (this.genTime < params.notBefore)\n                throw new Error(\"Generation time for TSTInfo object is less than notBefore value\");\n        }\n        if (params.notAfter) {\n            if (this.genTime > params.notAfter)\n                throw new Error(\"Generation time for TSTInfo object is more than notAfter value\");\n        }\n        const shaAlgorithm = crypto.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId, true, \"MessageImprint.hashAlgorithm\");\n        const hash = await crypto.digest(shaAlgorithm.name, new Uint8Array(data));\n        return pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.isEqual(hash, this.messageImprint.hashedMessage.valueBlock.valueHexView);\n    }\n}\nTSTInfo.CLASS_NAME = \"TSTInfo\";\n\nconst VERSION$2 = \"version\";\nconst DIGEST_ALGORITHMS = \"digestAlgorithms\";\nconst ENCAP_CONTENT_INFO = \"encapContentInfo\";\nconst CERTIFICATES = \"certificates\";\nconst CRLS = \"crls\";\nconst SIGNER_INFOS = \"signerInfos\";\nconst OCSPS = \"ocsps\";\nconst SIGNED_DATA = \"SignedData\";\nconst SIGNED_DATA_VERSION = `${SIGNED_DATA}.${VERSION$2}`;\nconst SIGNED_DATA_DIGEST_ALGORITHMS = `${SIGNED_DATA}.${DIGEST_ALGORITHMS}`;\nconst SIGNED_DATA_ENCAP_CONTENT_INFO = `${SIGNED_DATA}.${ENCAP_CONTENT_INFO}`;\nconst SIGNED_DATA_CERTIFICATES = `${SIGNED_DATA}.${CERTIFICATES}`;\nconst SIGNED_DATA_CRLS = `${SIGNED_DATA}.${CRLS}`;\nconst SIGNED_DATA_SIGNER_INFOS = `${SIGNED_DATA}.${SIGNER_INFOS}`;\nconst CLEAR_PROPS$3 = [\n    SIGNED_DATA_VERSION,\n    SIGNED_DATA_DIGEST_ALGORITHMS,\n    SIGNED_DATA_ENCAP_CONTENT_INFO,\n    SIGNED_DATA_CERTIFICATES,\n    SIGNED_DATA_CRLS,\n    SIGNED_DATA_SIGNER_INFOS\n];\nclass SignedDataVerifyError extends Error {\n    constructor({ message, code = 0, date = new Date(), signatureVerified = null, signerCertificate = null, signerCertificateVerified = null, timestampSerial = null, certificatePath = [], }) {\n        super(message);\n        this.name = \"SignedDataVerifyError\";\n        this.date = date;\n        this.code = code;\n        this.timestampSerial = timestampSerial;\n        this.signatureVerified = signatureVerified;\n        this.signerCertificate = signerCertificate;\n        this.signerCertificateVerified = signerCertificateVerified;\n        this.certificatePath = certificatePath;\n    }\n}\nclass SignedData extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$2, SignedData.defaultValues(VERSION$2));\n        this.digestAlgorithms = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, DIGEST_ALGORITHMS, SignedData.defaultValues(DIGEST_ALGORITHMS));\n        this.encapContentInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, ENCAP_CONTENT_INFO, SignedData.defaultValues(ENCAP_CONTENT_INFO));\n        if (CERTIFICATES in parameters) {\n            this.certificates = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERTIFICATES, SignedData.defaultValues(CERTIFICATES));\n        }\n        if (CRLS in parameters) {\n            this.crls = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CRLS, SignedData.defaultValues(CRLS));\n        }\n        if (OCSPS in parameters) {\n            this.ocsps = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, OCSPS, SignedData.defaultValues(OCSPS));\n        }\n        this.signerInfos = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, SIGNER_INFOS, SignedData.defaultValues(SIGNER_INFOS));\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$2:\n                return 0;\n            case DIGEST_ALGORITHMS:\n                return [];\n            case ENCAP_CONTENT_INFO:\n                return new EncapsulatedContentInfo();\n            case CERTIFICATES:\n                return [];\n            case CRLS:\n                return [];\n            case OCSPS:\n                return [];\n            case SIGNER_INFOS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$2:\n                return (memberValue === SignedData.defaultValues(VERSION$2));\n            case ENCAP_CONTENT_INFO:\n                return EncapsulatedContentInfo.compareWithDefault(\"eContentType\", memberValue.eContentType) &&\n                    EncapsulatedContentInfo.compareWithDefault(\"eContent\", memberValue.eContent);\n            case DIGEST_ALGORITHMS:\n            case CERTIFICATES:\n            case CRLS:\n            case OCSPS:\n            case SIGNER_INFOS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        if (names.optional === undefined) {\n            names.optional = false;\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || SIGNED_DATA),\n            optional: names.optional,\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || SIGNED_DATA_VERSION) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.digestAlgorithms || SIGNED_DATA_DIGEST_ALGORITHMS),\n                            value: AlgorithmIdentifier.schema()\n                        })\n                    ]\n                }),\n                EncapsulatedContentInfo.schema(names.encapContentInfo || {\n                    names: {\n                        blockName: SIGNED_DATA_ENCAP_CONTENT_INFO\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    name: (names.certificates || SIGNED_DATA_CERTIFICATES),\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: CertificateSet.schema().valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 1\n                    },\n                    value: RevocationInfoChoices.schema(names.crls || {\n                        names: {\n                            crls: SIGNED_DATA_CRLS\n                        }\n                    }).valueBlock.value\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.signerInfos || SIGNED_DATA_SIGNER_INFOS),\n                            value: SignerInfo.schema()\n                        })\n                    ]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$3);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, SignedData.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result[SIGNED_DATA_VERSION].valueBlock.valueDec;\n        if (SIGNED_DATA_DIGEST_ALGORITHMS in asn1.result)\n            this.digestAlgorithms = Array.from(asn1.result[SIGNED_DATA_DIGEST_ALGORITHMS], algorithm => new AlgorithmIdentifier({ schema: algorithm }));\n        this.encapContentInfo = new EncapsulatedContentInfo({ schema: asn1.result[SIGNED_DATA_ENCAP_CONTENT_INFO] });\n        if (SIGNED_DATA_CERTIFICATES in asn1.result) {\n            const certificateSet = new CertificateSet({\n                schema: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n                    value: asn1.result[SIGNED_DATA_CERTIFICATES].valueBlock.value\n                })\n            });\n            this.certificates = certificateSet.certificates.slice(0);\n        }\n        if (SIGNED_DATA_CRLS in asn1.result) {\n            this.crls = Array.from(asn1.result[SIGNED_DATA_CRLS], (crl) => {\n                if (crl.idBlock.tagClass === 1)\n                    return new CertificateRevocationList({ schema: crl });\n                crl.idBlock.tagClass = 1;\n                crl.idBlock.tagNumber = 16;\n                return new OtherRevocationInfoFormat({ schema: crl });\n            });\n        }\n        if (SIGNED_DATA_SIGNER_INFOS in asn1.result)\n            this.signerInfos = Array.from(asn1.result[SIGNED_DATA_SIGNER_INFOS], signerInfoSchema => new SignerInfo({ schema: signerInfoSchema }));\n    }\n    toSchema(encodeFlag = false) {\n        const outputArray = [];\n        if ((this.certificates && this.certificates.length && this.certificates.some(o => o instanceof OtherCertificateFormat))\n            || (this.crls && this.crls.length && this.crls.some(o => o instanceof OtherRevocationInfoFormat))) {\n            this.version = 5;\n        }\n        else if (this.certificates && this.certificates.length && this.certificates.some(o => o instanceof AttributeCertificateV2)) {\n            this.version = 4;\n        }\n        else if ((this.certificates && this.certificates.length && this.certificates.some(o => o instanceof AttributeCertificateV1))\n            || this.signerInfos.some(o => o.version === 3)\n            || this.encapContentInfo.eContentType !== SignedData.ID_DATA) {\n            this.version = 3;\n        }\n        else {\n            this.version = 1;\n        }\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n            value: Array.from(this.digestAlgorithms, algorithm => algorithm.toSchema())\n        }));\n        outputArray.push(this.encapContentInfo.toSchema());\n        if (this.certificates) {\n            const certificateSet = new CertificateSet({ certificates: this.certificates });\n            const certificateSetSchema = certificateSet.toSchema();\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: certificateSetSchema.valueBlock.value\n            }));\n        }\n        if (this.crls) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 1\n                },\n                value: Array.from(this.crls, crl => {\n                    if (crl instanceof OtherRevocationInfoFormat) {\n                        const crlSchema = crl.toSchema();\n                        crlSchema.idBlock.tagClass = 3;\n                        crlSchema.idBlock.tagNumber = 1;\n                        return crlSchema;\n                    }\n                    return crl.toSchema(encodeFlag);\n                })\n            }));\n        }\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Set({\n            value: Array.from(this.signerInfos, signerInfo => signerInfo.toSchema())\n        }));\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            version: this.version,\n            digestAlgorithms: Array.from(this.digestAlgorithms, algorithm => algorithm.toJSON()),\n            encapContentInfo: this.encapContentInfo.toJSON(),\n            signerInfos: Array.from(this.signerInfos, signerInfo => signerInfo.toJSON()),\n        };\n        if (this.certificates) {\n            res.certificates = Array.from(this.certificates, certificate => certificate.toJSON());\n        }\n        if (this.crls) {\n            res.crls = Array.from(this.crls, crl => crl.toJSON());\n        }\n        return res;\n    }\n    async verify({ signer = (-1), data = (EMPTY_BUFFER), trustedCerts = [], checkDate = (new Date()), checkChain = false, passedWhenNotRevValues = false, extendedMode = false, findOrigin = null, findIssuer = null } = {}, crypto = getCrypto(true)) {\n        let signerCert = null;\n        let timestampSerial = null;\n        try {\n            let messageDigestValue = EMPTY_BUFFER;\n            let shaAlgorithm = EMPTY_STRING;\n            let certificatePath = [];\n            const signerInfo = this.signerInfos[signer];\n            if (!signerInfo) {\n                throw new SignedDataVerifyError({\n                    date: checkDate,\n                    code: 1,\n                    message: \"Unable to get signer by supplied index\",\n                });\n            }\n            if (!this.certificates) {\n                throw new SignedDataVerifyError({\n                    date: checkDate,\n                    code: 2,\n                    message: \"No certificates attached to this signed data\",\n                });\n            }\n            if (signerInfo.sid instanceof IssuerAndSerialNumber) {\n                for (const certificate of this.certificates) {\n                    if (!(certificate instanceof Certificate))\n                        continue;\n                    if ((certificate.issuer.isEqual(signerInfo.sid.issuer)) &&\n                        (certificate.serialNumber.isEqual(signerInfo.sid.serialNumber))) {\n                        signerCert = certificate;\n                        break;\n                    }\n                }\n            }\n            else {\n                const sid = signerInfo.sid;\n                const keyId = sid.idBlock.isConstructed\n                    ? sid.valueBlock.value[0].valueBlock.valueHex\n                    : sid.valueBlock.valueHex;\n                for (const certificate of this.certificates) {\n                    if (!(certificate instanceof Certificate)) {\n                        continue;\n                    }\n                    const digest = await crypto.digest({ name: \"sha-1\" }, certificate.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);\n                    if (pvutils__WEBPACK_IMPORTED_MODULE_2__.isEqualBuffer(digest, keyId)) {\n                        signerCert = certificate;\n                        break;\n                    }\n                }\n            }\n            if (!signerCert) {\n                throw new SignedDataVerifyError({\n                    date: checkDate,\n                    code: 3,\n                    message: \"Unable to find signer certificate\",\n                });\n            }\n            if (this.encapContentInfo.eContentType === id_eContentType_TSTInfo) {\n                if (!this.encapContentInfo.eContent) {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 15,\n                        message: \"Error during verification: TSTInfo eContent is empty\",\n                        signatureVerified: null,\n                        signerCertificate: signerCert,\n                        timestampSerial,\n                        signerCertificateVerified: true\n                    });\n                }\n                let tstInfo;\n                try {\n                    tstInfo = TSTInfo.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView);\n                }\n                catch (ex) {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 15,\n                        message: \"Error during verification: TSTInfo wrong ASN.1 schema \",\n                        signatureVerified: null,\n                        signerCertificate: signerCert,\n                        timestampSerial,\n                        signerCertificateVerified: true\n                    });\n                }\n                checkDate = tstInfo.genTime;\n                timestampSerial = tstInfo.serialNumber.valueBlock.valueHexView.slice();\n                if (data.byteLength === 0) {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 4,\n                        message: \"Missed detached data input array\",\n                    });\n                }\n                if (!(await tstInfo.verify({ data }, crypto))) {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 15,\n                        message: \"Error during verification: TSTInfo verification is failed\",\n                        signatureVerified: false,\n                        signerCertificate: signerCert,\n                        timestampSerial,\n                        signerCertificateVerified: true\n                    });\n                }\n            }\n            if (checkChain) {\n                const certs = this.certificates.filter(certificate => (certificate instanceof Certificate && !!checkCA(certificate, signerCert)));\n                const chainParams = {\n                    checkDate,\n                    certs,\n                    trustedCerts,\n                };\n                if (findIssuer) {\n                    chainParams.findIssuer = findIssuer;\n                }\n                if (findOrigin) {\n                    chainParams.findOrigin = findOrigin;\n                }\n                const chainEngine = new CertificateChainValidationEngine(chainParams);\n                chainEngine.certs.push(signerCert);\n                if (this.crls) {\n                    for (const crl of this.crls) {\n                        if (\"thisUpdate\" in crl)\n                            chainEngine.crls.push(crl);\n                        else {\n                            if (crl.otherRevInfoFormat === id_PKIX_OCSP_Basic)\n                                chainEngine.ocsps.push(new BasicOCSPResponse({ schema: crl.otherRevInfo }));\n                        }\n                    }\n                }\n                if (this.ocsps) {\n                    chainEngine.ocsps.push(...(this.ocsps));\n                }\n                const verificationResult = await chainEngine.verify({ passedWhenNotRevValues }, crypto)\n                    .catch(e => {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 5,\n                        message: `Validation of signer's certificate failed with error: ${((e instanceof Object) ? e.resultMessage : e)}`,\n                        signerCertificate: signerCert,\n                        signerCertificateVerified: false\n                    });\n                });\n                if (verificationResult.certificatePath) {\n                    certificatePath = verificationResult.certificatePath;\n                }\n                if (!verificationResult.result)\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 5,\n                        message: `Validation of signer's certificate failed: ${verificationResult.resultMessage}`,\n                        signerCertificate: signerCert,\n                        signerCertificateVerified: false\n                    });\n            }\n            const signerInfoHashAlgorithm = crypto.getAlgorithmByOID(signerInfo.digestAlgorithm.algorithmId);\n            if (!(\"name\" in signerInfoHashAlgorithm)) {\n                throw new SignedDataVerifyError({\n                    date: checkDate,\n                    code: 7,\n                    message: `Unsupported signature algorithm: ${signerInfo.digestAlgorithm.algorithmId}`,\n                    signerCertificate: signerCert,\n                    signerCertificateVerified: true\n                });\n            }\n            shaAlgorithm = signerInfoHashAlgorithm.name;\n            const eContent = this.encapContentInfo.eContent;\n            if (eContent) {\n                if ((eContent.idBlock.tagClass === 1) &&\n                    (eContent.idBlock.tagNumber === 4)) {\n                    data = eContent.getValue();\n                }\n                else\n                    data = eContent.valueBlock.valueBeforeDecodeView;\n            }\n            else {\n                if (data.byteLength === 0) {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 8,\n                        message: \"Missed detached data input array\",\n                        signerCertificate: signerCert,\n                        signerCertificateVerified: true\n                    });\n                }\n            }\n            if (signerInfo.signedAttrs) {\n                let foundContentType = false;\n                let foundMessageDigest = false;\n                for (const attribute of signerInfo.signedAttrs.attributes) {\n                    if (attribute.type === \"1.2.840.113549.1.9.3\")\n                        foundContentType = true;\n                    if (attribute.type === \"1.2.840.113549.1.9.4\") {\n                        foundMessageDigest = true;\n                        messageDigestValue = attribute.values[0].valueBlock.valueHex;\n                    }\n                    if (foundContentType && foundMessageDigest)\n                        break;\n                }\n                if (foundContentType === false) {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 9,\n                        message: \"Attribute \\\"content-type\\\" is a mandatory attribute for \\\"signed attributes\\\"\",\n                        signerCertificate: signerCert,\n                        signerCertificateVerified: true\n                    });\n                }\n                if (foundMessageDigest === false) {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 10,\n                        message: \"Attribute \\\"message-digest\\\" is a mandatory attribute for \\\"signed attributes\\\"\",\n                        signatureVerified: null,\n                        signerCertificate: signerCert,\n                        signerCertificateVerified: true\n                    });\n                }\n            }\n            if (signerInfo.signedAttrs) {\n                const messageDigest = await crypto.digest(shaAlgorithm, new Uint8Array(data));\n                if (!pvutils__WEBPACK_IMPORTED_MODULE_2__.isEqualBuffer(messageDigest, messageDigestValue)) {\n                    throw new SignedDataVerifyError({\n                        date: checkDate,\n                        code: 15,\n                        message: \"Error during verification: Message digest doesn't match\",\n                        signatureVerified: null,\n                        signerCertificate: signerCert,\n                        timestampSerial,\n                        signerCertificateVerified: true\n                    });\n                }\n                data = signerInfo.signedAttrs.encodedValue;\n            }\n            const verifyResult = signerInfo.signatureAlgorithm.algorithmId === \"1.2.840.113549.1.1.1\"\n                ? await crypto.verifyWithPublicKey(data, signerInfo.signature, signerCert.subjectPublicKeyInfo, signerInfo.signatureAlgorithm, shaAlgorithm)\n                : await crypto.verifyWithPublicKey(data, signerInfo.signature, signerCert.subjectPublicKeyInfo, signerInfo.signatureAlgorithm);\n            if (extendedMode) {\n                return {\n                    date: checkDate,\n                    code: 14,\n                    message: EMPTY_STRING,\n                    signatureVerified: verifyResult,\n                    signerCertificate: signerCert,\n                    timestampSerial,\n                    signerCertificateVerified: true,\n                    certificatePath\n                };\n            }\n            else {\n                return verifyResult;\n            }\n        }\n        catch (e) {\n            if (e instanceof SignedDataVerifyError) {\n                throw e;\n            }\n            throw new SignedDataVerifyError({\n                date: checkDate,\n                code: 15,\n                message: `Error during verification: ${e instanceof Error ? e.message : e}`,\n                signatureVerified: null,\n                signerCertificate: signerCert,\n                timestampSerial,\n                signerCertificateVerified: true\n            });\n        }\n    }\n    async sign(privateKey, signerIndex, hashAlgorithm = \"SHA-1\", data = (EMPTY_BUFFER), crypto = getCrypto(true)) {\n        var _a;\n        if (!privateKey)\n            throw new Error(\"Need to provide a private key for signing\");\n        const signerInfo = this.signerInfos[signerIndex];\n        if (!signerInfo) {\n            throw new RangeError(\"SignerInfo index is out of range\");\n        }\n        if (!((_a = signerInfo.signedAttrs) === null || _a === void 0 ? void 0 : _a.attributes.length) && \"hash\" in privateKey.algorithm && \"hash\" in privateKey.algorithm && privateKey.algorithm.hash) {\n            hashAlgorithm = privateKey.algorithm.hash.name;\n        }\n        const hashAlgorithmOID = crypto.getOIDByAlgorithm({ name: hashAlgorithm }, true, \"hashAlgorithm\");\n        if ((this.digestAlgorithms.filter(algorithm => algorithm.algorithmId === hashAlgorithmOID)).length === 0) {\n            this.digestAlgorithms.push(new AlgorithmIdentifier({\n                algorithmId: hashAlgorithmOID,\n                algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n            }));\n        }\n        signerInfo.digestAlgorithm = new AlgorithmIdentifier({\n            algorithmId: hashAlgorithmOID,\n            algorithmParams: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Null()\n        });\n        const signatureParams = await crypto.getSignatureParameters(privateKey, hashAlgorithm);\n        const parameters = signatureParams.parameters;\n        signerInfo.signatureAlgorithm = signatureParams.signatureAlgorithm;\n        if (signerInfo.signedAttrs) {\n            if (signerInfo.signedAttrs.encodedValue.byteLength !== 0)\n                data = signerInfo.signedAttrs.encodedValue;\n            else {\n                data = signerInfo.signedAttrs.toSchema().toBER();\n                const view = pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toUint8Array(data);\n                view[0] = 0x31;\n            }\n        }\n        else {\n            const eContent = this.encapContentInfo.eContent;\n            if (eContent) {\n                if ((eContent.idBlock.tagClass === 1) &&\n                    (eContent.idBlock.tagNumber === 4)) {\n                    data = eContent.getValue();\n                }\n                else\n                    data = eContent.valueBlock.valueBeforeDecodeView;\n            }\n            else {\n                if (data.byteLength === 0)\n                    throw new Error(\"Missed detached data input array\");\n            }\n        }\n        const signature = await crypto.signWithPrivateKey(data, privateKey, parameters);\n        signerInfo.signature = new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: signature });\n    }\n}\nSignedData.CLASS_NAME = \"SignedData\";\nSignedData.ID_DATA = id_ContentType_Data;\n\nconst VERSION$1 = \"version\";\nconst AUTH_SAFE = \"authSafe\";\nconst MAC_DATA = \"macData\";\nconst PARSED_VALUE = \"parsedValue\";\nconst CLERA_PROPS = [\n    VERSION$1,\n    AUTH_SAFE,\n    MAC_DATA\n];\nclass PFX extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION$1, PFX.defaultValues(VERSION$1));\n        this.authSafe = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, AUTH_SAFE, PFX.defaultValues(AUTH_SAFE));\n        if (MAC_DATA in parameters) {\n            this.macData = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MAC_DATA, PFX.defaultValues(MAC_DATA));\n        }\n        if (PARSED_VALUE in parameters) {\n            this.parsedValue = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, PARSED_VALUE, PFX.defaultValues(PARSED_VALUE));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION$1:\n                return 3;\n            case AUTH_SAFE:\n                return (new ContentInfo());\n            case MAC_DATA:\n                return (new MacData());\n            case PARSED_VALUE:\n                return {};\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION$1:\n                return (memberValue === PFX.defaultValues(memberName));\n            case AUTH_SAFE:\n                return ((ContentInfo.compareWithDefault(\"contentType\", memberValue.contentType)) &&\n                    (ContentInfo.compareWithDefault(\"content\", memberValue.content)));\n            case MAC_DATA:\n                return ((MacData.compareWithDefault(\"mac\", memberValue.mac)) &&\n                    (MacData.compareWithDefault(\"macSalt\", memberValue.macSalt)) &&\n                    (MacData.compareWithDefault(\"iterations\", memberValue.iterations)));\n            case PARSED_VALUE:\n                return ((memberValue instanceof Object) && (Object.keys(memberValue).length === 0));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || VERSION$1) }),\n                ContentInfo.schema(names.authSafe || {\n                    names: {\n                        blockName: AUTH_SAFE\n                    }\n                }),\n                MacData.schema(names.macData || {\n                    names: {\n                        blockName: MAC_DATA,\n                        optional: true\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLERA_PROPS);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PFX.schema({\n            names: {\n                version: VERSION$1,\n                authSafe: {\n                    names: {\n                        blockName: AUTH_SAFE\n                    }\n                },\n                macData: {\n                    names: {\n                        blockName: MAC_DATA\n                    }\n                }\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result.version.valueBlock.valueDec;\n        this.authSafe = new ContentInfo({ schema: asn1.result.authSafe });\n        if (MAC_DATA in asn1.result)\n            this.macData = new MacData({ schema: asn1.result.macData });\n    }\n    toSchema() {\n        const outputArray = [\n            new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }),\n            this.authSafe.toSchema()\n        ];\n        if (this.macData) {\n            outputArray.push(this.macData.toSchema());\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const output = {\n            version: this.version,\n            authSafe: this.authSafe.toJSON()\n        };\n        if (this.macData) {\n            output.macData = this.macData.toJSON();\n        }\n        return output;\n    }\n    async makeInternalValues(parameters = {}, crypto = getCrypto(true)) {\n        ArgumentError.assert(parameters, \"parameters\", \"object\");\n        if (!this.parsedValue) {\n            throw new Error(\"Please call \\\"parseValues\\\" function first in order to make \\\"parsedValue\\\" data\");\n        }\n        ParameterError.assertEmpty(this.parsedValue.integrityMode, \"integrityMode\", \"parsedValue\");\n        ParameterError.assertEmpty(this.parsedValue.authenticatedSafe, \"authenticatedSafe\", \"parsedValue\");\n        switch (this.parsedValue.integrityMode) {\n            case 0:\n                {\n                    if (!(\"iterations\" in parameters))\n                        throw new ParameterError(\"iterations\");\n                    ParameterError.assertEmpty(parameters.pbkdf2HashAlgorithm, \"pbkdf2HashAlgorithm\");\n                    ParameterError.assertEmpty(parameters.hmacHashAlgorithm, \"hmacHashAlgorithm\");\n                    ParameterError.assertEmpty(parameters.password, \"password\");\n                    const saltBuffer = new ArrayBuffer(64);\n                    const saltView = new Uint8Array(saltBuffer);\n                    crypto.getRandomValues(saltView);\n                    const data = this.parsedValue.authenticatedSafe.toSchema().toBER(false);\n                    this.authSafe = new ContentInfo({\n                        contentType: ContentInfo.DATA,\n                        content: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: data })\n                    });\n                    const result = await crypto.stampDataWithPassword({\n                        password: parameters.password,\n                        hashAlgorithm: parameters.hmacHashAlgorithm,\n                        salt: saltBuffer,\n                        iterationCount: parameters.iterations,\n                        contentToStamp: data\n                    });\n                    this.macData = new MacData({\n                        mac: new DigestInfo({\n                            digestAlgorithm: new AlgorithmIdentifier({\n                                algorithmId: crypto.getOIDByAlgorithm({ name: parameters.hmacHashAlgorithm }, true, \"hmacHashAlgorithm\"),\n                            }),\n                            digest: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: result })\n                        }),\n                        macSalt: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: saltBuffer }),\n                        iterations: parameters.iterations\n                    });\n                }\n                break;\n            case 1:\n                {\n                    if (!(\"signingCertificate\" in parameters)) {\n                        throw new ParameterError(\"signingCertificate\");\n                    }\n                    ParameterError.assertEmpty(parameters.privateKey, \"privateKey\");\n                    ParameterError.assertEmpty(parameters.hashAlgorithm, \"hashAlgorithm\");\n                    const toBeSigned = this.parsedValue.authenticatedSafe.toSchema().toBER(false);\n                    const cmsSigned = new SignedData({\n                        version: 1,\n                        encapContentInfo: new EncapsulatedContentInfo({\n                            eContentType: \"1.2.840.113549.1.7.1\",\n                            eContent: new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: toBeSigned })\n                        }),\n                        certificates: [parameters.signingCertificate]\n                    });\n                    const result = await crypto.digest({ name: parameters.hashAlgorithm }, new Uint8Array(toBeSigned));\n                    const signedAttr = [];\n                    signedAttr.push(new Attribute({\n                        type: \"1.2.840.113549.1.9.3\",\n                        values: [\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: \"1.2.840.113549.1.7.1\" })\n                        ]\n                    }));\n                    signedAttr.push(new Attribute({\n                        type: \"1.2.840.113549.1.9.5\",\n                        values: [\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.UTCTime({ valueDate: new Date() })\n                        ]\n                    }));\n                    signedAttr.push(new Attribute({\n                        type: \"1.2.840.113549.1.9.4\",\n                        values: [\n                            new asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString({ valueHex: result })\n                        ]\n                    }));\n                    cmsSigned.signerInfos.push(new SignerInfo({\n                        version: 1,\n                        sid: new IssuerAndSerialNumber({\n                            issuer: parameters.signingCertificate.issuer,\n                            serialNumber: parameters.signingCertificate.serialNumber\n                        }),\n                        signedAttrs: new SignedAndUnsignedAttributes({\n                            type: 0,\n                            attributes: signedAttr\n                        })\n                    }));\n                    await cmsSigned.sign(parameters.privateKey, 0, parameters.hashAlgorithm, undefined, crypto);\n                    this.authSafe = new ContentInfo({\n                        contentType: \"1.2.840.113549.1.7.2\",\n                        content: cmsSigned.toSchema(true)\n                    });\n                }\n                break;\n            default:\n                throw new Error(`Parameter \"integrityMode\" has unknown value: ${this.parsedValue.integrityMode}`);\n        }\n    }\n    async parseInternalValues(parameters, crypto = getCrypto(true)) {\n        ArgumentError.assert(parameters, \"parameters\", \"object\");\n        if (parameters.checkIntegrity === undefined) {\n            parameters.checkIntegrity = true;\n        }\n        this.parsedValue = {};\n        switch (this.authSafe.contentType) {\n            case ContentInfo.DATA:\n                {\n                    ParameterError.assertEmpty(parameters.password, \"password\");\n                    this.parsedValue.integrityMode = 0;\n                    ArgumentError.assert(this.authSafe.content, \"authSafe.content\", asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString);\n                    const authSafeContent = this.authSafe.content.getValue();\n                    this.parsedValue.authenticatedSafe = AuthenticatedSafe.fromBER(authSafeContent);\n                    if (parameters.checkIntegrity) {\n                        if (!this.macData) {\n                            throw new Error(\"Absent \\\"macData\\\" value, can not check PKCS#12 data integrity\");\n                        }\n                        const hashAlgorithm = crypto.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId, true, \"digestAlgorithm\");\n                        const result = await crypto.verifyDataStampedWithPassword({\n                            password: parameters.password,\n                            hashAlgorithm: hashAlgorithm.name,\n                            salt: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),\n                            iterationCount: this.macData.iterations || 1,\n                            contentToVerify: authSafeContent,\n                            signatureToVerify: pvtsutils__WEBPACK_IMPORTED_MODULE_1__.BufferSourceConverter.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView),\n                        });\n                        if (!result) {\n                            throw new Error(\"Integrity for the PKCS#12 data is broken!\");\n                        }\n                    }\n                }\n                break;\n            case ContentInfo.SIGNED_DATA:\n                {\n                    this.parsedValue.integrityMode = 1;\n                    const cmsSigned = new SignedData({ schema: this.authSafe.content });\n                    const eContent = cmsSigned.encapContentInfo.eContent;\n                    ParameterError.assert(eContent, \"eContent\", \"cmsSigned.encapContentInfo\");\n                    ArgumentError.assert(eContent, \"eContent\", asn1js__WEBPACK_IMPORTED_MODULE_0__.OctetString);\n                    const data = eContent.getValue();\n                    this.parsedValue.authenticatedSafe = AuthenticatedSafe.fromBER(data);\n                    const ok = await cmsSigned.verify({ signer: 0, checkChain: false }, crypto);\n                    if (!ok) {\n                        throw new Error(\"Integrity for the PKCS#12 data is broken!\");\n                    }\n                }\n                break;\n            default:\n                throw new Error(`Incorrect value for \"this.authSafe.contentType\": ${this.authSafe.contentType}`);\n        }\n    }\n}\nPFX.CLASS_NAME = \"PFX\";\n\nconst STATUS$1 = \"status\";\nconst STATUS_STRINGS = \"statusStrings\";\nconst FAIL_INFO = \"failInfo\";\nconst CLEAR_PROPS$2 = [\n    STATUS$1,\n    STATUS_STRINGS,\n    FAIL_INFO\n];\nvar PKIStatus;\n(function (PKIStatus) {\n    PKIStatus[PKIStatus[\"granted\"] = 0] = \"granted\";\n    PKIStatus[PKIStatus[\"grantedWithMods\"] = 1] = \"grantedWithMods\";\n    PKIStatus[PKIStatus[\"rejection\"] = 2] = \"rejection\";\n    PKIStatus[PKIStatus[\"waiting\"] = 3] = \"waiting\";\n    PKIStatus[PKIStatus[\"revocationWarning\"] = 4] = \"revocationWarning\";\n    PKIStatus[PKIStatus[\"revocationNotification\"] = 5] = \"revocationNotification\";\n})(PKIStatus || (PKIStatus = {}));\nclass PKIStatusInfo extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.status = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, STATUS$1, PKIStatusInfo.defaultValues(STATUS$1));\n        if (STATUS_STRINGS in parameters) {\n            this.statusStrings = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, STATUS_STRINGS, PKIStatusInfo.defaultValues(STATUS_STRINGS));\n        }\n        if (FAIL_INFO in parameters) {\n            this.failInfo = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, FAIL_INFO, PKIStatusInfo.defaultValues(FAIL_INFO));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case STATUS$1:\n                return 2;\n            case STATUS_STRINGS:\n                return [];\n            case FAIL_INFO:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case STATUS$1:\n                return (memberValue === PKIStatusInfo.defaultValues(memberName));\n            case STATUS_STRINGS:\n                return (memberValue.length === 0);\n            case FAIL_INFO:\n                return (memberValue.isEqual(PKIStatusInfo.defaultValues(memberName)));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || EMPTY_STRING),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.status || EMPTY_STRING) }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                    optional: true,\n                    value: [\n                        new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.statusStrings || EMPTY_STRING),\n                            value: new asn1js__WEBPACK_IMPORTED_MODULE_0__.Utf8String()\n                        })\n                    ]\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.BitString({\n                    name: (names.failInfo || EMPTY_STRING),\n                    optional: true\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$2);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, PKIStatusInfo.schema({\n            names: {\n                status: STATUS$1,\n                statusStrings: STATUS_STRINGS,\n                failInfo: FAIL_INFO\n            }\n        }));\n        AsnError.assertSchema(asn1, this.className);\n        const _status = asn1.result.status;\n        if ((_status.valueBlock.isHexOnly === true) ||\n            (_status.valueBlock.valueDec < 0) ||\n            (_status.valueBlock.valueDec > 5))\n            throw new Error(\"PKIStatusInfo \\\"status\\\" has invalid value\");\n        this.status = _status.valueBlock.valueDec;\n        if (STATUS_STRINGS in asn1.result)\n            this.statusStrings = asn1.result.statusStrings;\n        if (FAIL_INFO in asn1.result)\n            this.failInfo = asn1.result.failInfo;\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.status }));\n        if (this.statusStrings) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n                optional: true,\n                value: this.statusStrings\n            }));\n        }\n        if (this.failInfo) {\n            outputArray.push(this.failInfo);\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            status: this.status\n        };\n        if (this.statusStrings) {\n            res.statusStrings = Array.from(this.statusStrings, o => o.toJSON());\n        }\n        if (this.failInfo) {\n            res.failInfo = this.failInfo.toJSON();\n        }\n        return res;\n    }\n}\nPKIStatusInfo.CLASS_NAME = \"PKIStatusInfo\";\n\nconst VERSION = \"version\";\nconst MESSAGE_IMPRINT = \"messageImprint\";\nconst REQ_POLICY = \"reqPolicy\";\nconst NONCE = \"nonce\";\nconst CERT_REQ = \"certReq\";\nconst EXTENSIONS = \"extensions\";\nconst TIME_STAMP_REQ = \"TimeStampReq\";\nconst TIME_STAMP_REQ_VERSION = `${TIME_STAMP_REQ}.${VERSION}`;\nconst TIME_STAMP_REQ_MESSAGE_IMPRINT = `${TIME_STAMP_REQ}.${MESSAGE_IMPRINT}`;\nconst TIME_STAMP_REQ_POLICY = `${TIME_STAMP_REQ}.${REQ_POLICY}`;\nconst TIME_STAMP_REQ_NONCE = `${TIME_STAMP_REQ}.${NONCE}`;\nconst TIME_STAMP_REQ_CERT_REQ = `${TIME_STAMP_REQ}.${CERT_REQ}`;\nconst TIME_STAMP_REQ_EXTENSIONS = `${TIME_STAMP_REQ}.${EXTENSIONS}`;\nconst CLEAR_PROPS$1 = [\n    TIME_STAMP_REQ_VERSION,\n    TIME_STAMP_REQ_MESSAGE_IMPRINT,\n    TIME_STAMP_REQ_POLICY,\n    TIME_STAMP_REQ_NONCE,\n    TIME_STAMP_REQ_CERT_REQ,\n    TIME_STAMP_REQ_EXTENSIONS,\n];\nclass TimeStampReq extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.version = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, VERSION, TimeStampReq.defaultValues(VERSION));\n        this.messageImprint = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, MESSAGE_IMPRINT, TimeStampReq.defaultValues(MESSAGE_IMPRINT));\n        if (REQ_POLICY in parameters) {\n            this.reqPolicy = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, REQ_POLICY, TimeStampReq.defaultValues(REQ_POLICY));\n        }\n        if (NONCE in parameters) {\n            this.nonce = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, NONCE, TimeStampReq.defaultValues(NONCE));\n        }\n        if (CERT_REQ in parameters) {\n            this.certReq = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, CERT_REQ, TimeStampReq.defaultValues(CERT_REQ));\n        }\n        if (EXTENSIONS in parameters) {\n            this.extensions = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, EXTENSIONS, TimeStampReq.defaultValues(EXTENSIONS));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case VERSION:\n                return 0;\n            case MESSAGE_IMPRINT:\n                return new MessageImprint();\n            case REQ_POLICY:\n                return EMPTY_STRING;\n            case NONCE:\n                return new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer();\n            case CERT_REQ:\n                return false;\n            case EXTENSIONS:\n                return [];\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case VERSION:\n            case REQ_POLICY:\n            case CERT_REQ:\n                return (memberValue === TimeStampReq.defaultValues(memberName));\n            case MESSAGE_IMPRINT:\n                return ((MessageImprint.compareWithDefault(\"hashAlgorithm\", memberValue.hashAlgorithm)) &&\n                    (MessageImprint.compareWithDefault(\"hashedMessage\", memberValue.hashedMessage)));\n            case NONCE:\n                return (memberValue.isEqual(TimeStampReq.defaultValues(memberName)));\n            case EXTENSIONS:\n                return (memberValue.length === 0);\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || TIME_STAMP_REQ),\n            value: [\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ name: (names.version || TIME_STAMP_REQ_VERSION) }),\n                MessageImprint.schema(names.messageImprint || {\n                    names: {\n                        blockName: TIME_STAMP_REQ_MESSAGE_IMPRINT\n                    }\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({\n                    name: (names.reqPolicy || TIME_STAMP_REQ_POLICY),\n                    optional: true\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({\n                    name: (names.nonce || TIME_STAMP_REQ_NONCE),\n                    optional: true\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Boolean({\n                    name: (names.certReq || TIME_STAMP_REQ_CERT_REQ),\n                    optional: true\n                }),\n                new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                    optional: true,\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: 0\n                    },\n                    value: [new asn1js__WEBPACK_IMPORTED_MODULE_0__.Repeated({\n                            name: (names.extensions || TIME_STAMP_REQ_EXTENSIONS),\n                            value: Extension.schema()\n                        })]\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS$1);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, TimeStampReq.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.version = asn1.result[TIME_STAMP_REQ_VERSION].valueBlock.valueDec;\n        this.messageImprint = new MessageImprint({ schema: asn1.result[TIME_STAMP_REQ_MESSAGE_IMPRINT] });\n        if (TIME_STAMP_REQ_POLICY in asn1.result)\n            this.reqPolicy = asn1.result[TIME_STAMP_REQ_POLICY].valueBlock.toString();\n        if (TIME_STAMP_REQ_NONCE in asn1.result)\n            this.nonce = asn1.result[TIME_STAMP_REQ_NONCE];\n        if (TIME_STAMP_REQ_CERT_REQ in asn1.result)\n            this.certReq = asn1.result[TIME_STAMP_REQ_CERT_REQ].valueBlock.value;\n        if (TIME_STAMP_REQ_EXTENSIONS in asn1.result)\n            this.extensions = Array.from(asn1.result[TIME_STAMP_REQ_EXTENSIONS], element => new Extension({ schema: element }));\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Integer({ value: this.version }));\n        outputArray.push(this.messageImprint.toSchema());\n        if (this.reqPolicy)\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.ObjectIdentifier({ value: this.reqPolicy }));\n        if (this.nonce)\n            outputArray.push(this.nonce);\n        if ((CERT_REQ in this) && (TimeStampReq.compareWithDefault(CERT_REQ, this.certReq) === false))\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Boolean({ value: this.certReq }));\n        if (this.extensions) {\n            outputArray.push(new asn1js__WEBPACK_IMPORTED_MODULE_0__.Constructed({\n                idBlock: {\n                    tagClass: 3,\n                    tagNumber: 0\n                },\n                value: Array.from(this.extensions, o => o.toSchema())\n            }));\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            version: this.version,\n            messageImprint: this.messageImprint.toJSON()\n        };\n        if (this.reqPolicy !== undefined)\n            res.reqPolicy = this.reqPolicy;\n        if (this.nonce !== undefined)\n            res.nonce = this.nonce.toJSON();\n        if ((this.certReq !== undefined) && (TimeStampReq.compareWithDefault(CERT_REQ, this.certReq) === false))\n            res.certReq = this.certReq;\n        if (this.extensions) {\n            res.extensions = Array.from(this.extensions, o => o.toJSON());\n        }\n        return res;\n    }\n}\nTimeStampReq.CLASS_NAME = \"TimeStampReq\";\n\nconst STATUS = \"status\";\nconst TIME_STAMP_TOKEN = \"timeStampToken\";\nconst TIME_STAMP_RESP = \"TimeStampResp\";\nconst TIME_STAMP_RESP_STATUS = `${TIME_STAMP_RESP}.${STATUS}`;\nconst TIME_STAMP_RESP_TOKEN = `${TIME_STAMP_RESP}.${TIME_STAMP_TOKEN}`;\nconst CLEAR_PROPS = [\n    TIME_STAMP_RESP_STATUS,\n    TIME_STAMP_RESP_TOKEN\n];\nclass TimeStampResp extends PkiObject {\n    constructor(parameters = {}) {\n        super();\n        this.status = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, STATUS, TimeStampResp.defaultValues(STATUS));\n        if (TIME_STAMP_TOKEN in parameters) {\n            this.timeStampToken = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, TIME_STAMP_TOKEN, TimeStampResp.defaultValues(TIME_STAMP_TOKEN));\n        }\n        if (parameters.schema) {\n            this.fromSchema(parameters.schema);\n        }\n    }\n    static defaultValues(memberName) {\n        switch (memberName) {\n            case STATUS:\n                return new PKIStatusInfo();\n            case TIME_STAMP_TOKEN:\n                return new ContentInfo();\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static compareWithDefault(memberName, memberValue) {\n        switch (memberName) {\n            case STATUS:\n                return ((PKIStatusInfo.compareWithDefault(STATUS, memberValue.status)) &&\n                    ((\"statusStrings\" in memberValue) === false) &&\n                    ((\"failInfo\" in memberValue) === false));\n            case TIME_STAMP_TOKEN:\n                return ((memberValue.contentType === EMPTY_STRING) &&\n                    (memberValue.content instanceof asn1js__WEBPACK_IMPORTED_MODULE_0__.Any));\n            default:\n                return super.defaultValues(memberName);\n        }\n    }\n    static schema(parameters = {}) {\n        const names = pvutils__WEBPACK_IMPORTED_MODULE_2__.getParametersValue(parameters, \"names\", {});\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            name: (names.blockName || TIME_STAMP_RESP),\n            value: [\n                PKIStatusInfo.schema(names.status || {\n                    names: {\n                        blockName: TIME_STAMP_RESP_STATUS\n                    }\n                }),\n                ContentInfo.schema(names.timeStampToken || {\n                    names: {\n                        blockName: TIME_STAMP_RESP_TOKEN,\n                        optional: true\n                    }\n                })\n            ]\n        }));\n    }\n    fromSchema(schema) {\n        pvutils__WEBPACK_IMPORTED_MODULE_2__.clearProps(schema, CLEAR_PROPS);\n        const asn1 = asn1js__WEBPACK_IMPORTED_MODULE_0__.compareSchema(schema, schema, TimeStampResp.schema());\n        AsnError.assertSchema(asn1, this.className);\n        this.status = new PKIStatusInfo({ schema: asn1.result[TIME_STAMP_RESP_STATUS] });\n        if (TIME_STAMP_RESP_TOKEN in asn1.result)\n            this.timeStampToken = new ContentInfo({ schema: asn1.result[TIME_STAMP_RESP_TOKEN] });\n    }\n    toSchema() {\n        const outputArray = [];\n        outputArray.push(this.status.toSchema());\n        if (this.timeStampToken) {\n            outputArray.push(this.timeStampToken.toSchema());\n        }\n        return (new asn1js__WEBPACK_IMPORTED_MODULE_0__.Sequence({\n            value: outputArray\n        }));\n    }\n    toJSON() {\n        const res = {\n            status: this.status.toJSON()\n        };\n        if (this.timeStampToken) {\n            res.timeStampToken = this.timeStampToken.toJSON();\n        }\n        return res;\n    }\n    async sign(privateKey, hashAlgorithm, crypto = getCrypto(true)) {\n        this.assertContentType();\n        const signed = new SignedData({ schema: this.timeStampToken.content });\n        return signed.sign(privateKey, 0, hashAlgorithm, undefined, crypto);\n    }\n    async verify(verificationParameters = { signer: 0, trustedCerts: [], data: EMPTY_BUFFER }, crypto = getCrypto(true)) {\n        this.assertContentType();\n        const signed = new SignedData({ schema: this.timeStampToken.content });\n        return signed.verify(verificationParameters, crypto);\n    }\n    assertContentType() {\n        if (!this.timeStampToken) {\n            throw new Error(\"timeStampToken is absent in TSP response\");\n        }\n        if (this.timeStampToken.contentType !== id_ContentType_SignedData) {\n            throw new Error(`Wrong format of timeStampToken: ${this.timeStampToken.contentType}`);\n        }\n    }\n}\nTimeStampResp.CLASS_NAME = \"TimeStampResp\";\n\nfunction initCryptoEngine() {\n    if (typeof self !== \"undefined\") {\n        if (\"crypto\" in self) {\n            let engineName = \"webcrypto\";\n            if (\"webkitSubtle\" in self.crypto) {\n                engineName = \"safari\";\n            }\n            setEngine(engineName, new CryptoEngine({ name: engineName, crypto: crypto }));\n        }\n    }\n    else if (typeof crypto !== \"undefined\" && \"webcrypto\" in crypto) {\n        const name = \"NodeJS ^15\";\n        const nodeCrypto = crypto.webcrypto;\n        setEngine(name, new CryptoEngine({ name, crypto: nodeCrypto }));\n    }\n}\n\ninitCryptoEngine();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9wa2lqcy9idWlsZC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsY0FBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFaUM7QUFDTTtBQUNXO0FBQ2Y7QUFDQTtBQUNPO0FBQ0k7QUFDUTs7QUFFdEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRGQUE0RixFQUFFO0FBQzlGLDhDQUE4QyxLQUFLLG1CQUFtQiwyQkFBMkIsdUJBQXVCLGtCQUFrQjtBQUMxSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsZ0JBQWdCLFFBQVEsaUJBQWlCLElBQUksSUFBSTtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsZ0JBQWdCLFFBQVEsaUJBQWlCLElBQUksZUFBZTtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsaUJBQWlCO0FBQ3pEO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCw0Q0FBNEM7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFT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QTRDLGlEQUFpRDtBQUM3RjtBQUNBLHdDQUF3QyxxQ0FBcUM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsZ0NBQWdDO0FBQy9GO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELGtDQUFrQztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDBCQUEwQjtBQUNyRTtBQUNBOztBQUVBOztBQUVxcEgiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvcGtpanMvYnVpbGQvaW5kZXguZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEdsb2JhbFNpZ25cbiAqIENvcHlyaWdodCAoYykgMjAxNS0yMDE5LCBQZWN1bGlhciBWZW50dXJlc1xuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFxuICogQXV0aG9yIDIwMTQtMjAxOSwgWXVyeSBTdHJvemhldnNreVxuICogXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuICogYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogXG4gKiAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICogICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqIFxuICogKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAqICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yXG4gKiAgIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKiBcbiAqICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUge29yZ2FuaXphdGlvbn0gbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAqICAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAqICAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqIFxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG4gKiBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuICogV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuICogRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbiAqIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuICogKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuICogTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG4gKiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuICogKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcbiAqIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICogXG4gKi9cblxuaW1wb3J0ICogYXMgYXNuMWpzIGZyb20gJ2FzbjFqcyc7XG5pbXBvcnQgKiBhcyBwdnRzdXRpbHMgZnJvbSAncHZ0c3V0aWxzJztcbmltcG9ydCB7IEJ1ZmZlclNvdXJjZUNvbnZlcnRlciB9IGZyb20gJ3B2dHN1dGlscyc7XG5pbXBvcnQgKiBhcyBwdnV0aWxzIGZyb20gJ3B2dXRpbHMnO1xuaW1wb3J0ICogYXMgYnMgZnJvbSAnYnl0ZXN0cmVhbWpzJztcbmltcG9ydCB7IHNoYTEgfSBmcm9tICdAbm9ibGUvaGFzaGVzL3NoYTEnO1xuaW1wb3J0IHsgc2hhMjU2IH0gZnJvbSAnQG5vYmxlL2hhc2hlcy9zaGEyNTYnO1xuaW1wb3J0IHsgc2hhNTEyLCBzaGEzODQgfSBmcm9tICdAbm9ibGUvaGFzaGVzL3NoYTUxMic7XG5cbmNvbnN0IEVNUFRZX0JVRkZFUiA9IG5ldyBBcnJheUJ1ZmZlcigwKTtcbmNvbnN0IEVNUFRZX1NUUklORyA9IFwiXCI7XG5cbmNsYXNzIEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBUeXBlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm5hbWUgPSBBcmd1bWVudEVycm9yLk5BTUU7XG4gICAgfVxuICAgIHN0YXRpYyBpc1R5cGUodmFsdWUsIHR5cGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJBcnJheVwiICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcIkFycmF5QnVmZmVyXCIgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJBcnJheUJ1ZmZlclZpZXdcIiAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IHR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3RhdGljIGFzc2VydCh2YWx1ZSwgbmFtZSwgLi4udHlwZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCB0eXBlIG9mIHR5cGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1R5cGUodmFsdWUsIHR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHR5cGVOYW1lcyA9IHR5cGVzLm1hcChvID0+IG8gaW5zdGFuY2VvZiBGdW5jdGlvbiAmJiBcIm5hbWVcIiBpbiBvID8gby5uYW1lIDogYCR7b31gKTtcbiAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXJyb3IoYFBhcmFtZXRlciAnJHtuYW1lfScgaXMgbm90IG9mIHR5cGUgJHt0eXBlTmFtZXMubGVuZ3RoID4gMSA/IGAoJHt0eXBlTmFtZXMuam9pbihcIiBvciBcIil9KWAgOiB0eXBlTmFtZXNbMF19YCk7XG4gICAgfVxufVxuQXJndW1lbnRFcnJvci5OQU1FID0gXCJBcmd1bWVudEVycm9yXCI7XG5cbmNsYXNzIFBhcmFtZXRlckVycm9yIGV4dGVuZHMgVHlwZUVycm9yIHtcbiAgICBzdGF0aWMgYXNzZXJ0KC4uLmFyZ3MpIHtcbiAgICAgICAgbGV0IHRhcmdldCA9IG51bGw7XG4gICAgICAgIGxldCBwYXJhbXM7XG4gICAgICAgIGxldCBmaWVsZHM7XG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGFyZ2V0ID0gYXJnc1swXTtcbiAgICAgICAgICAgIHBhcmFtcyA9IGFyZ3NbMV07XG4gICAgICAgICAgICBmaWVsZHMgPSBhcmdzLnNsaWNlKDIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zID0gYXJnc1swXTtcbiAgICAgICAgICAgIGZpZWxkcyA9IGFyZ3Muc2xpY2UoMSk7XG4gICAgICAgIH1cbiAgICAgICAgQXJndW1lbnRFcnJvci5hc3NlcnQocGFyYW1zLCBcInBhcmFtZXRlcnNcIiwgXCJvYmplY3RcIik7XG4gICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtc1tmaWVsZF07XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXJhbWV0ZXJFcnJvcihmaWVsZCwgdGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0RW1wdHkodmFsdWUsIG5hbWUsIHRhcmdldCkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBhcmFtZXRlckVycm9yKG5hbWUsIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGQsIHRhcmdldCA9IG51bGwsIG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gUGFyYW1ldGVyRXJyb3IuTkFNRTtcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGBBYnNlbnQgbWFuZGF0b3J5IHBhcmFtZXRlciAnJHtmaWVsZH0nICR7dGFyZ2V0ID8gYCBpbiAnJHt0YXJnZXR9J2AgOiBFTVBUWV9TVFJJTkd9YDtcbiAgICAgICAgfVxuICAgIH1cbn1cblBhcmFtZXRlckVycm9yLk5BTUUgPSBcIlBhcmFtZXRlckVycm9yXCI7XG5cbmNsYXNzIEFzbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHN0YXRpYyBhc3NlcnRTY2hlbWEoYXNuMSwgdGFyZ2V0KSB7XG4gICAgICAgIGlmICghYXNuMS52ZXJpZmllZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPYmplY3QncyBzY2hlbWEgd2FzIG5vdCB2ZXJpZmllZCBhZ2FpbnN0IGlucHV0IGRhdGEgZm9yICR7dGFyZ2V0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQoYXNuLCB0YXJnZXQpIHtcbiAgICAgICAgaWYgKGFzbi5vZmZzZXQgPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXNuRXJyb3IoYEVycm9yIGR1cmluZyBwYXJzaW5nIG9mIEFTTi4xIGRhdGEuIERhdGEgaXMgbm90IGNvcnJlY3QgZm9yICcke3RhcmdldH0nLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiQXNuRXJyb3JcIjtcbiAgICB9XG59XG5cbmNsYXNzIFBraU9iamVjdCB7XG4gICAgc3RhdGljIGJsb2NrTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ0xBU1NfTkFNRTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21CRVIocmF3KSB7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuZnJvbUJFUihyYXcpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnQoYXNuMSwgdGhpcy5uYW1lKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcyh7IHNjaGVtYTogYXNuMS5yZXN1bHQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBc25FcnJvcihgQ2Fubm90IGNyZWF0ZSAnJHt0aGlzLkNMQVNTX05BTUV9JyBmcm9tIEFTTi4xIG9iamVjdGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1lbWJlciBuYW1lIGZvciAke3RoaXMuQ0xBU1NfTkFNRX0gY2xhc3M6ICR7bWVtYmVyTmFtZX1gKTtcbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNZXRob2QgJyR7dGhpcy5DTEFTU19OQU1FfS5zY2hlbWEnIHNob3VsZCBiZSBvdmVycmlkZGVuYCk7XG4gICAgfVxuICAgIGdldCBjbGFzc05hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLkNMQVNTX05BTUU7XG4gICAgfVxuICAgIHRvU3RyaW5nKGVuY29kaW5nID0gXCJoZXhcIikge1xuICAgICAgICBsZXQgc2NoZW1hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2NoZW1hID0gdGhpcy50b1NjaGVtYSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHNjaGVtYSA9IHRoaXMudG9TY2hlbWEodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHB2dHN1dGlscy5Db252ZXJ0LlRvU3RyaW5nKHNjaGVtYS50b0JFUigpLCBlbmNvZGluZyk7XG4gICAgfVxufVxuUGtpT2JqZWN0LkNMQVNTX05BTUUgPSBcIlBraU9iamVjdFwiO1xuXG5mdW5jdGlvbiBzdHJpbmdQcmVwKGlucHV0U3RyaW5nKSB7XG4gICAgbGV0IGlzU3BhY2UgPSBmYWxzZTtcbiAgICBsZXQgY3V0UmVzdWx0ID0gRU1QVFlfU1RSSU5HO1xuICAgIGNvbnN0IHJlc3VsdCA9IGlucHV0U3RyaW5nLnRyaW0oKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocmVzdWx0LmNoYXJDb2RlQXQoaSkgPT09IDMyKSB7XG4gICAgICAgICAgICBpZiAoaXNTcGFjZSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgaXNTcGFjZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaXNTcGFjZSkge1xuICAgICAgICAgICAgICAgIGN1dFJlc3VsdCArPSBcIiBcIjtcbiAgICAgICAgICAgICAgICBpc1NwYWNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXRSZXN1bHQgKz0gcmVzdWx0W2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjdXRSZXN1bHQudG9Mb3dlckNhc2UoKTtcbn1cblxuY29uc3QgVFlQRSQ1ID0gXCJ0eXBlXCI7XG5jb25zdCBWQUxVRSQ2ID0gXCJ2YWx1ZVwiO1xuY2xhc3MgQXR0cmlidXRlVHlwZUFuZFZhbHVlIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50eXBlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVFlQRSQ1LCBBdHRyaWJ1dGVUeXBlQW5kVmFsdWUuZGVmYXVsdFZhbHVlcyhUWVBFJDUpKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZBTFVFJDYsIEF0dHJpYnV0ZVR5cGVBbmRWYWx1ZS5kZWZhdWx0VmFsdWVzKFZBTFVFJDYpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRZUEUkNTpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBWQUxVRSQ2OlxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLnR5cGUgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkFueSh7IG5hbWU6IChuYW1lcy52YWx1ZSB8fCBFTVBUWV9TVFJJTkcpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgW1xuICAgICAgICAgICAgVFlQRSQ1LFxuICAgICAgICAgICAgXCJ0eXBlVmFsdWVcIlxuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBBdHRyaWJ1dGVUeXBlQW5kVmFsdWUuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogVFlQRSQ1LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcInR5cGVWYWx1ZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy50eXBlID0gYXNuMS5yZXN1bHQudHlwZS52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMudmFsdWUgPSBhc24xLnJlc3VsdC50eXBlVmFsdWU7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy50eXBlIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IF9vYmplY3QgPSB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMudmFsdWUpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgX29iamVjdC52YWx1ZSA9ICh0aGlzLnZhbHVlKS50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF9vYmplY3QudmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfb2JqZWN0O1xuICAgIH1cbiAgICBpc0VxdWFsKGNvbXBhcmVUbykge1xuICAgICAgICBjb25zdCBzdHJpbmdCbG9ja05hbWVzID0gW1xuICAgICAgICAgICAgYXNuMWpzLlV0ZjhTdHJpbmcuYmxvY2tOYW1lKCksXG4gICAgICAgICAgICBhc24xanMuQm1wU3RyaW5nLmJsb2NrTmFtZSgpLFxuICAgICAgICAgICAgYXNuMWpzLlVuaXZlcnNhbFN0cmluZy5ibG9ja05hbWUoKSxcbiAgICAgICAgICAgIGFzbjFqcy5OdW1lcmljU3RyaW5nLmJsb2NrTmFtZSgpLFxuICAgICAgICAgICAgYXNuMWpzLlByaW50YWJsZVN0cmluZy5ibG9ja05hbWUoKSxcbiAgICAgICAgICAgIGFzbjFqcy5UZWxldGV4U3RyaW5nLmJsb2NrTmFtZSgpLFxuICAgICAgICAgICAgYXNuMWpzLlZpZGVvdGV4U3RyaW5nLmJsb2NrTmFtZSgpLFxuICAgICAgICAgICAgYXNuMWpzLklBNVN0cmluZy5ibG9ja05hbWUoKSxcbiAgICAgICAgICAgIGFzbjFqcy5HcmFwaGljU3RyaW5nLmJsb2NrTmFtZSgpLFxuICAgICAgICAgICAgYXNuMWpzLlZpc2libGVTdHJpbmcuYmxvY2tOYW1lKCksXG4gICAgICAgICAgICBhc24xanMuR2VuZXJhbFN0cmluZy5ibG9ja05hbWUoKSxcbiAgICAgICAgICAgIGFzbjFqcy5DaGFyYWN0ZXJTdHJpbmcuYmxvY2tOYW1lKClcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKGNvbXBhcmVUbyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKHRoaXMudmFsdWUudmFsdWVCZWZvcmVEZWNvZGVWaWV3LCBjb21wYXJlVG8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wYXJlVG8uY29uc3RydWN0b3IuYmxvY2tOYW1lKCkgPT09IEF0dHJpYnV0ZVR5cGVBbmRWYWx1ZS5ibG9ja05hbWUoKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gY29tcGFyZVRvLnR5cGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgaXNTdHJpbmdQYWlyID0gW2ZhbHNlLCBmYWxzZV07XG4gICAgICAgICAgICBjb25zdCB0aGlzTmFtZSA9IHRoaXMudmFsdWUuY29uc3RydWN0b3IuYmxvY2tOYW1lKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgb2Ygc3RyaW5nQmxvY2tOYW1lcykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzTmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpc1N0cmluZ1BhaXJbMF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZVRvLnZhbHVlLmNvbnN0cnVjdG9yLmJsb2NrTmFtZSgpID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzU3RyaW5nUGFpclsxXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU3RyaW5nUGFpclswXSAhPT0gaXNTdHJpbmdQYWlyWzFdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNTdHJpbmcgPSAoaXNTdHJpbmdQYWlyWzBdICYmIGlzU3RyaW5nUGFpclsxXSk7XG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZTEgPSBzdHJpbmdQcmVwKHRoaXMudmFsdWUudmFsdWVCbG9jay52YWx1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUyID0gc3RyaW5nUHJlcChjb21wYXJlVG8udmFsdWUudmFsdWVCbG9jay52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlMS5sb2NhbGVDb21wYXJlKHZhbHVlMikgIT09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKHRoaXMudmFsdWUudmFsdWVCZWZvcmVEZWNvZGVWaWV3LCBjb21wYXJlVG8udmFsdWUudmFsdWVCZWZvcmVEZWNvZGVWaWV3KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbkF0dHJpYnV0ZVR5cGVBbmRWYWx1ZS5DTEFTU19OQU1FID0gXCJBdHRyaWJ1dGVUeXBlQW5kVmFsdWVcIjtcblxuY29uc3QgVFlQRV9BTkRfVkFMVUVTID0gXCJ0eXBlc0FuZFZhbHVlc1wiO1xuY29uc3QgVkFMVUVfQkVGT1JFX0RFQ09ERSA9IFwidmFsdWVCZWZvcmVEZWNvZGVcIjtcbmNvbnN0IFJETiA9IFwiUkROXCI7XG5jbGFzcyBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudHlwZXNBbmRWYWx1ZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBUWVBFX0FORF9WQUxVRVMsIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzLmRlZmF1bHRWYWx1ZXMoVFlQRV9BTkRfVkFMVUVTKSk7XG4gICAgICAgIHRoaXMudmFsdWVCZWZvcmVEZWNvZGUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWQUxVRV9CRUZPUkVfREVDT0RFLCBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcy5kZWZhdWx0VmFsdWVzKFZBTFVFX0JFRk9SRV9ERUNPREUpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRZUEVfQU5EX1ZBTFVFUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjYXNlIFZBTFVFX0JFRk9SRV9ERUNPREU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVFlQRV9BTkRfVkFMVUVTOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGNhc2UgVkFMVUVfQkVGT1JFX0RFQ09ERTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmJ5dGVMZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLnJlcGVhdGVkU2VxdWVuY2UgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBhc24xanMuU2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5yZXBlYXRlZFNldCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogQXR0cmlidXRlVHlwZUFuZFZhbHVlLnNjaGVtYShuYW1lcy50eXBlQW5kVmFsdWUgfHwge30pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIFtcbiAgICAgICAgICAgIFJETixcbiAgICAgICAgICAgIFRZUEVfQU5EX1ZBTFVFU1xuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBibG9ja05hbWU6IFJETixcbiAgICAgICAgICAgICAgICByZXBlYXRlZFNldDogVFlQRV9BTkRfVkFMVUVTXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKFRZUEVfQU5EX1ZBTFVFUyBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy50eXBlc0FuZFZhbHVlcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQudHlwZXNBbmRWYWx1ZXMsIGVsZW1lbnQgPT4gbmV3IEF0dHJpYnV0ZVR5cGVBbmRWYWx1ZSh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUJlZm9yZURlY29kZSA9IGFzbjEucmVzdWx0LlJETi52YWx1ZUJlZm9yZURlY29kZVZpZXcuc2xpY2UoKS5idWZmZXI7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZUJlZm9yZURlY29kZS5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5TZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy50eXBlc0FuZFZhbHVlcywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuZnJvbUJFUih0aGlzLnZhbHVlQmVmb3JlRGVjb2RlKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0KGFzbjEsIFwiUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXNcIik7XG4gICAgICAgIGlmICghKGFzbjEucmVzdWx0IGluc3RhbmNlb2YgYXNuMWpzLlNlcXVlbmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVNOLjEgcmVzdWx0IHNob3VsZCBiZSBTRVFVRU5DRVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNuMS5yZXN1bHQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGVzQW5kVmFsdWVzOiBBcnJheS5mcm9tKHRoaXMudHlwZXNBbmRWYWx1ZXMsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaXNFcXVhbChjb21wYXJlVG8pIHtcbiAgICAgICAgaWYgKGNvbXBhcmVUbyBpbnN0YW5jZW9mIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50eXBlc0FuZFZhbHVlcy5sZW5ndGggIT09IGNvbXBhcmVUby50eXBlc0FuZFZhbHVlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIHR5cGVBbmRWYWx1ZV0gb2YgdGhpcy50eXBlc0FuZFZhbHVlcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZUFuZFZhbHVlLmlzRXF1YWwoY29tcGFyZVRvLnR5cGVzQW5kVmFsdWVzW2luZGV4XSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcGFyZVRvIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBwdnV0aWxzLmlzRXF1YWxCdWZmZXIodGhpcy52YWx1ZUJlZm9yZURlY29kZSwgY29tcGFyZVRvKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMuQ0xBU1NfTkFNRSA9IFwiUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXNcIjtcblxuY29uc3QgVFlQRSQ0ID0gXCJ0eXBlXCI7XG5jb25zdCBWQUxVRSQ1ID0gXCJ2YWx1ZVwiO1xuZnVuY3Rpb24gYnVpbHRJblN0YW5kYXJkQXR0cmlidXRlcyhwYXJhbWV0ZXJzID0ge30sIG9wdGlvbmFsID0gZmFsc2UpIHtcbiAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgIG9wdGlvbmFsLFxuICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMixcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuY291bnRyeV9uYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5DaG9pY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk51bWVyaWNTdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW50YWJsZVN0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAyLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5hZG1pbmlzdHJhdGlvbl9kb21haW5fbmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5OdW1lcmljU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmludGFibGVTdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLm5ldHdvcmtfYWRkcmVzcyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgIGlzSGV4T25seTogdHJ1ZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMudGVybWluYWxfaWRlbnRpZmllciB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgIGlzSGV4T25seTogdHJ1ZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5wcml2YXRlX2RvbWFpbl9uYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5DaG9pY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk51bWVyaWNTdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW50YWJsZVN0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAzXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMub3JnYW5pemF0aW9uX25hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICBpc0hleE9ubHk6IHRydWVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5udW1lcmljX3VzZXJfaWRlbnRpZmllciB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogNFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNIZXhPbmx5OiB0cnVlXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5wZXJzb25hbF9uYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiA1XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNIZXhPbmx5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0hleE9ubHk6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzSGV4T25seTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAzXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNIZXhPbmx5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMub3JnYW5pemF0aW9uYWxfdW5pdF9uYW1lcyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogNlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IGFzbjFqcy5QcmludGFibGVTdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICB9KSk7XG59XG5mdW5jdGlvbiBidWlsdEluRG9tYWluRGVmaW5lZEF0dHJpYnV0ZXMob3B0aW9uYWwgPSBmYWxzZSkge1xuICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgIG9wdGlvbmFsLFxuICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmludGFibGVTdHJpbmcoKSxcbiAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbnRhYmxlU3RyaW5nKClcbiAgICAgICAgXVxuICAgIH0pKTtcbn1cbmZ1bmN0aW9uIGV4dGVuc2lvbkF0dHJpYnV0ZXMob3B0aW9uYWwgPSBmYWxzZSkge1xuICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXQoe1xuICAgICAgICBvcHRpb25hbCxcbiAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzSGV4T25seTogdHJ1ZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5BbnkoKV1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICB9KSk7XG59XG5jbGFzcyBHZW5lcmFsTmFtZSBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudHlwZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRZUEUkNCwgR2VuZXJhbE5hbWUuZGVmYXVsdFZhbHVlcyhUWVBFJDQpKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZBTFVFJDUsIEdlbmVyYWxOYW1lLmRlZmF1bHRWYWx1ZXMoVkFMVUUkNSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVFlQRSQ0OlxuICAgICAgICAgICAgICAgIHJldHVybiA5O1xuICAgICAgICAgICAgY2FzZSBWQUxVRSQ1OlxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVFlQRSQ0OlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IEdlbmVyYWxOYW1lLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpO1xuICAgICAgICAgICAgY2FzZSBWQUxVRSQ1OlxuICAgICAgICAgICAgICAgIHJldHVybiAoT2JqZWN0LmtleXMobWVtYmVyVmFsdWUpLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5DaG9pY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5BbnkoKV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAzXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWx0SW5TdGFuZGFyZEF0dHJpYnV0ZXMoKG5hbWVzLmJ1aWx0SW5TdGFuZGFyZEF0dHJpYnV0ZXMgfHwge30pLCBmYWxzZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsdEluRG9tYWluRGVmaW5lZEF0dHJpYnV0ZXModHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25BdHRyaWJ1dGVzKHRydWUpXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDRcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1JlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzLnNjaGVtYShuYW1lcy5kaXJlY3RvcnlOYW1lIHx8IHt9KV1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNob2ljZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuVGVsZXRleFN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbnRhYmxlU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Vbml2ZXJzYWxTdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlV0ZjhTdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkJtcFN0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5UZWxldGV4U3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmludGFibGVTdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlVuaXZlcnNhbFN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuVXRmOFN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQm1wU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiA2XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogOFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBbXG4gICAgICAgICAgICBcImJsb2NrTmFtZVwiLFxuICAgICAgICAgICAgXCJvdGhlck5hbWVcIixcbiAgICAgICAgICAgIFwicmZjODIyTmFtZVwiLFxuICAgICAgICAgICAgXCJkTlNOYW1lXCIsXG4gICAgICAgICAgICBcIng0MDBBZGRyZXNzXCIsXG4gICAgICAgICAgICBcImRpcmVjdG9yeU5hbWVcIixcbiAgICAgICAgICAgIFwiZWRpUGFydHlOYW1lXCIsXG4gICAgICAgICAgICBcInVuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJcIixcbiAgICAgICAgICAgIFwiaVBBZGRyZXNzXCIsXG4gICAgICAgICAgICBcInJlZ2lzdGVyZWRJRFwiXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEdlbmVyYWxOYW1lLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogXCJibG9ja05hbWVcIixcbiAgICAgICAgICAgICAgICBvdGhlck5hbWU6IFwib3RoZXJOYW1lXCIsXG4gICAgICAgICAgICAgICAgcmZjODIyTmFtZTogXCJyZmM4MjJOYW1lXCIsXG4gICAgICAgICAgICAgICAgZE5TTmFtZTogXCJkTlNOYW1lXCIsXG4gICAgICAgICAgICAgICAgeDQwMEFkZHJlc3M6IFwieDQwMEFkZHJlc3NcIixcbiAgICAgICAgICAgICAgICBkaXJlY3RvcnlOYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFwiZGlyZWN0b3J5TmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVkaVBhcnR5TmFtZTogXCJlZGlQYXJ0eU5hbWVcIixcbiAgICAgICAgICAgICAgICB1bmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyOiBcInVuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJcIixcbiAgICAgICAgICAgICAgICBpUEFkZHJlc3M6IFwiaVBBZGRyZXNzXCIsXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJlZElEOiBcInJlZ2lzdGVyZWRJRFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy50eXBlID0gYXNuMS5yZXN1bHQuYmxvY2tOYW1lLmlkQmxvY2sudGFnTnVtYmVyO1xuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBhc24xLnJlc3VsdC5ibG9ja05hbWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGFzbjEucmVzdWx0LmJsb2NrTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuaWRCbG9jay50YWdDbGFzcyA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmlkQmxvY2sudGFnTnVtYmVyID0gMjI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlQkVSID0gdmFsdWUudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhc25WYWx1ZSA9IGFzbjFqcy5mcm9tQkVSKHZhbHVlQkVSKTtcbiAgICAgICAgICAgICAgICAgICAgQXNuRXJyb3IuYXNzZXJ0KGFzblZhbHVlLCBcIkdlbmVyYWxOYW1lIHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gYXNuVmFsdWUucmVzdWx0LnZhbHVlQmxvY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBhc24xLnJlc3VsdC5ibG9ja05hbWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ldyBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcyh7IHNjaGVtYTogYXNuMS5yZXN1bHQuZGlyZWN0b3J5TmFtZSB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gYXNuMS5yZXN1bHQuZWRpUGFydHlOYW1lO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IGFzbjEucmVzdWx0LmJsb2NrTmFtZS52YWx1ZUJsb2NrLnZhbHVlSGV4IH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhc24xLnJlc3VsdC5ibG9ja05hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5pZEJsb2NrLnRhZ051bWJlciA9IDY7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlQkVSID0gdmFsdWUudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhc25WYWx1ZSA9IGFzbjFqcy5mcm9tQkVSKHZhbHVlQkVSKTtcbiAgICAgICAgICAgICAgICAgICAgQXNuRXJyb3IuYXNzZXJ0KGFzblZhbHVlLCBcIkdlbmVyYWxOYW1lIHJlZ2lzdGVyZWRJRFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGFzblZhbHVlLnJlc3VsdC52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IHRoaXMudHlwZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG5ldyBhc24xanMuSUE1U3RyaW5nKHsgdmFsdWU6IHRoaXMudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmlkQmxvY2sudGFnQ2xhc3MgPSAzO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5pZEJsb2NrLnRhZ051bWJlciA9IHRoaXMudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiA0XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbdGhpcy52YWx1ZS50b1NjaGVtYSgpXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5pZEJsb2NrLnRhZ0NsYXNzID0gMztcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuaWRCbG9jay50YWdOdW1iZXIgPSB0aGlzLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiB0aGlzLnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5pZEJsb2NrLnRhZ0NsYXNzID0gMztcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuaWRCbG9jay50YWdOdW1iZXIgPSB0aGlzLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBHZW5lcmFsTmFtZS5zY2hlbWEoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IF9vYmplY3QgPSB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICB2YWx1ZTogRU1QVFlfU1RSSU5HXG4gICAgICAgIH07XG4gICAgICAgIGlmICgodHlwZW9mIHRoaXMudmFsdWUpID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgX29iamVjdC52YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBfb2JqZWN0LnZhbHVlID0gdGhpcy52YWx1ZS50b0pTT04oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfb2JqZWN0O1xuICAgIH1cbn1cbkdlbmVyYWxOYW1lLkNMQVNTX05BTUUgPSBcIkdlbmVyYWxOYW1lXCI7XG5cbmNvbnN0IEFDQ0VTU19NRVRIT0QgPSBcImFjY2Vzc01ldGhvZFwiO1xuY29uc3QgQUNDRVNTX0xPQ0FUSU9OID0gXCJhY2Nlc3NMb2NhdGlvblwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMXYgPSBbXG4gICAgQUNDRVNTX01FVEhPRCxcbiAgICBBQ0NFU1NfTE9DQVRJT04sXG5dO1xuY2xhc3MgQWNjZXNzRGVzY3JpcHRpb24gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmFjY2Vzc01ldGhvZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEFDQ0VTU19NRVRIT0QsIEFjY2Vzc0Rlc2NyaXB0aW9uLmRlZmF1bHRWYWx1ZXMoQUNDRVNTX01FVEhPRCkpO1xuICAgICAgICB0aGlzLmFjY2Vzc0xvY2F0aW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQUNDRVNTX0xPQ0FUSU9OLCBBY2Nlc3NEZXNjcmlwdGlvbi5kZWZhdWx0VmFsdWVzKEFDQ0VTU19MT0NBVElPTikpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgQUNDRVNTX01FVEhPRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBBQ0NFU1NfTE9DQVRJT046XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmFsTmFtZSgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyBuYW1lOiAobmFtZXMuYWNjZXNzTWV0aG9kIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgR2VuZXJhbE5hbWUuc2NoZW1hKG5hbWVzLmFjY2Vzc0xvY2F0aW9uIHx8IHt9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDF2KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBBY2Nlc3NEZXNjcmlwdGlvbi5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NNZXRob2Q6IEFDQ0VTU19NRVRIT0QsXG4gICAgICAgICAgICAgICAgYWNjZXNzTG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogQUNDRVNTX0xPQ0FUSU9OXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5hY2Nlc3NNZXRob2QgPSBhc24xLnJlc3VsdC5hY2Nlc3NNZXRob2QudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICB0aGlzLmFjY2Vzc0xvY2F0aW9uID0gbmV3IEdlbmVyYWxOYW1lKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5hY2Nlc3NMb2NhdGlvbiB9KTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiB0aGlzLmFjY2Vzc01ldGhvZCB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLmFjY2Vzc0xvY2F0aW9uLnRvU2NoZW1hKClcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NNZXRob2Q6IHRoaXMuYWNjZXNzTWV0aG9kLFxuICAgICAgICAgICAgYWNjZXNzTG9jYXRpb246IHRoaXMuYWNjZXNzTG9jYXRpb24udG9KU09OKClcbiAgICAgICAgfTtcbiAgICB9XG59XG5BY2Nlc3NEZXNjcmlwdGlvbi5DTEFTU19OQU1FID0gXCJBY2Nlc3NEZXNjcmlwdGlvblwiO1xuXG5jb25zdCBTRUNPTkRTID0gXCJzZWNvbmRzXCI7XG5jb25zdCBNSUxMSVMgPSBcIm1pbGxpc1wiO1xuY29uc3QgTUlDUk9TID0gXCJtaWNyb3NcIjtcbmNsYXNzIEFjY3VyYWN5IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKFNFQ09ORFMgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5zZWNvbmRzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0VDT05EUywgQWNjdXJhY3kuZGVmYXVsdFZhbHVlcyhTRUNPTkRTKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE1JTExJUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm1pbGxpcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE1JTExJUywgQWNjdXJhY3kuZGVmYXVsdFZhbHVlcyhNSUxMSVMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTUlDUk9TIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMubWljcm9zID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTUlDUk9TLCBBY2N1cmFjeS5kZWZhdWx0VmFsdWVzKE1JQ1JPUykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBTRUNPTkRTOlxuICAgICAgICAgICAgY2FzZSBNSUxMSVM6XG4gICAgICAgICAgICBjYXNlIE1JQ1JPUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgU0VDT05EUzpcbiAgICAgICAgICAgIGNhc2UgTUlMTElTOlxuICAgICAgICAgICAgY2FzZSBNSUNST1M6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gQWNjdXJhY3kuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5zZWNvbmRzIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5taWxsaXMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5taWNyb3MgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIFtcbiAgICAgICAgICAgIFNFQ09ORFMsXG4gICAgICAgICAgICBNSUxMSVMsXG4gICAgICAgICAgICBNSUNST1MsXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEFjY3VyYWN5LnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHNlY29uZHM6IFNFQ09ORFMsXG4gICAgICAgICAgICAgICAgbWlsbGlzOiBNSUxMSVMsXG4gICAgICAgICAgICAgICAgbWljcm9zOiBNSUNST1MsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKFwic2Vjb25kc1wiIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnNlY29uZHMgPSBhc24xLnJlc3VsdC5zZWNvbmRzLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwibWlsbGlzXCIgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGludE1pbGxpcyA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlSGV4OiBhc24xLnJlc3VsdC5taWxsaXMudmFsdWVCbG9jay52YWx1ZUhleCB9KTtcbiAgICAgICAgICAgIHRoaXMubWlsbGlzID0gaW50TWlsbGlzLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwibWljcm9zXCIgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGludE1pY3JvcyA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlSGV4OiBhc24xLnJlc3VsdC5taWNyb3MudmFsdWVCbG9jay52YWx1ZUhleCB9KTtcbiAgICAgICAgICAgIHRoaXMubWljcm9zID0gaW50TWljcm9zLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMuc2Vjb25kcyB9KSk7XG4gICAgICAgIGlmICh0aGlzLm1pbGxpcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRNaWxsaXMgPSBuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy5taWxsaXMgfSk7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlSGV4OiBpbnRNaWxsaXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5taWNyb3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgaW50TWljcm9zID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMubWljcm9zIH0pO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZUhleDogaW50TWljcm9zLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgX29iamVjdCA9IHt9O1xuICAgICAgICBpZiAodGhpcy5zZWNvbmRzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBfb2JqZWN0LnNlY29uZHMgPSB0aGlzLnNlY29uZHM7XG4gICAgICAgIGlmICh0aGlzLm1pbGxpcyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgX29iamVjdC5taWxsaXMgPSB0aGlzLm1pbGxpcztcbiAgICAgICAgaWYgKHRoaXMubWljcm9zICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBfb2JqZWN0Lm1pY3JvcyA9IHRoaXMubWljcm9zO1xuICAgICAgICByZXR1cm4gX29iamVjdDtcbiAgICB9XG59XG5BY2N1cmFjeS5DTEFTU19OQU1FID0gXCJBY2N1cmFjeVwiO1xuXG5jb25zdCBBTEdPUklUSE1fSUQgPSBcImFsZ29yaXRobUlkXCI7XG5jb25zdCBBTEdPUklUSE1fUEFSQU1TID0gXCJhbGdvcml0aG1QYXJhbXNcIjtcbmNvbnN0IEFMR09SSVRITSQyID0gXCJhbGdvcml0aG1cIjtcbmNvbnN0IFBBUkFNUyA9IFwicGFyYW1zXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxdSA9IFtcbiAgICBBTEdPUklUSE0kMixcbiAgICBQQVJBTVNcbl07XG5jbGFzcyBBbGdvcml0aG1JZGVudGlmaWVyIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5hbGdvcml0aG1JZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEFMR09SSVRITV9JRCwgQWxnb3JpdGhtSWRlbnRpZmllci5kZWZhdWx0VmFsdWVzKEFMR09SSVRITV9JRCkpO1xuICAgICAgICBpZiAoQUxHT1JJVEhNX1BBUkFNUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmFsZ29yaXRobVBhcmFtcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEFMR09SSVRITV9QQVJBTVMsIEFsZ29yaXRobUlkZW50aWZpZXIuZGVmYXVsdFZhbHVlcyhBTEdPUklUSE1fUEFSQU1TKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEFMR09SSVRITV9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBBTEdPUklUSE1fUEFSQU1TOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkFueSgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBBTEdPUklUSE1fSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgICAgIGNhc2UgQUxHT1JJVEhNX1BBUkFNUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlIGluc3RhbmNlb2YgYXNuMWpzLkFueSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICBvcHRpb25hbDogKG5hbWVzLm9wdGlvbmFsIHx8IGZhbHNlKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLmFsZ29yaXRobUlkZW50aWZpZXIgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkFueSh7IG5hbWU6IChuYW1lcy5hbGdvcml0aG1QYXJhbXMgfHwgRU1QVFlfU1RSSU5HKSwgb3B0aW9uYWw6IHRydWUgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxdSk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBhbGdvcml0aG1JZGVudGlmaWVyOiBBTEdPUklUSE0kMixcbiAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IFBBUkFNU1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuYWxnb3JpdGhtSWQgPSBhc24xLnJlc3VsdC5hbGdvcml0aG0udmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICBpZiAoUEFSQU1TIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmFsZ29yaXRobVBhcmFtcyA9IGFzbjEucmVzdWx0LnBhcmFtcztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5hbGdvcml0aG1JZCB9KSk7XG4gICAgICAgIGlmICh0aGlzLmFsZ29yaXRobVBhcmFtcyAmJiAhKHRoaXMuYWxnb3JpdGhtUGFyYW1zIGluc3RhbmNlb2YgYXNuMWpzLkFueSkpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5hbGdvcml0aG1QYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IG9iamVjdCA9IHtcbiAgICAgICAgICAgIGFsZ29yaXRobUlkOiB0aGlzLmFsZ29yaXRobUlkXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmFsZ29yaXRobVBhcmFtcyAmJiAhKHRoaXMuYWxnb3JpdGhtUGFyYW1zIGluc3RhbmNlb2YgYXNuMWpzLkFueSkpIHtcbiAgICAgICAgICAgIG9iamVjdC5hbGdvcml0aG1QYXJhbXMgPSB0aGlzLmFsZ29yaXRobVBhcmFtcy50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cbiAgICBpc0VxdWFsKGFsZ29yaXRobUlkZW50aWZpZXIpIHtcbiAgICAgICAgaWYgKCEoYWxnb3JpdGhtSWRlbnRpZmllciBpbnN0YW5jZW9mIEFsZ29yaXRobUlkZW50aWZpZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWxnb3JpdGhtSWQgIT09IGFsZ29yaXRobUlkZW50aWZpZXIuYWxnb3JpdGhtSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hbGdvcml0aG1QYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChhbGdvcml0aG1JZGVudGlmaWVyLmFsZ29yaXRobVBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmFsZ29yaXRobVBhcmFtcykgPT09IEpTT04uc3RyaW5naWZ5KGFsZ29yaXRobUlkZW50aWZpZXIuYWxnb3JpdGhtUGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWxnb3JpdGhtSWRlbnRpZmllci5hbGdvcml0aG1QYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5BbGdvcml0aG1JZGVudGlmaWVyLkNMQVNTX05BTUUgPSBcIkFsZ29yaXRobUlkZW50aWZpZXJcIjtcblxuY29uc3QgQUxUX05BTUVTID0gXCJhbHROYW1lc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMXQgPSBbXG4gICAgQUxUX05BTUVTXG5dO1xuY2xhc3MgQWx0TmFtZSBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuYWx0TmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBTFRfTkFNRVMsIEFsdE5hbWUuZGVmYXVsdFZhbHVlcyhBTFRfTkFNRVMpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEFMVF9OQU1FUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYWx0TmFtZXMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEdlbmVyYWxOYW1lLnNjaGVtYSgpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxdCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgQWx0TmFtZS5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBhbHROYW1lczogQUxUX05BTUVTXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKEFMVF9OQU1FUyBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5hbHROYW1lcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQuYWx0TmFtZXMsIGVsZW1lbnQgPT4gbmV3IEdlbmVyYWxOYW1lKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuYWx0TmFtZXMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFsdE5hbWVzOiBBcnJheS5mcm9tKHRoaXMuYWx0TmFtZXMsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5BbHROYW1lLkNMQVNTX05BTUUgPSBcIkFsdE5hbWVcIjtcblxuY29uc3QgVFlQRSQzID0gXCJ0eXBlXCI7XG5jb25zdCBWQUxVRVMkMSA9IFwidmFsdWVzXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxcyA9IFtcbiAgICBUWVBFJDMsXG4gICAgVkFMVUVTJDFcbl07XG5jbGFzcyBBdHRyaWJ1dGUgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnR5cGUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBUWVBFJDMsIEF0dHJpYnV0ZS5kZWZhdWx0VmFsdWVzKFRZUEUkMykpO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZBTFVFUyQxLCBBdHRyaWJ1dGUuZGVmYXVsdFZhbHVlcyhWQUxVRVMkMSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVFlQRSQzOlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjYXNlIFZBTFVFUyQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVFlQRSQzOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IEVNUFRZX1NUUklORyk7XG4gICAgICAgICAgICBjYXNlIFZBTFVFUyQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLnR5cGUgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlNldCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5zZXROYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMudmFsdWVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBhc24xanMuQW55KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDFzKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBBdHRyaWJ1dGUuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogVFlQRSQzLFxuICAgICAgICAgICAgICAgIHZhbHVlczogVkFMVUVTJDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnR5cGUgPSBhc24xLnJlc3VsdC50eXBlLnZhbHVlQmxvY2sudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBhc24xLnJlc3VsdC52YWx1ZXM7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy50eXBlIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuU2V0KHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWVzXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICB2YWx1ZXM6IEFycmF5LmZyb20odGhpcy52YWx1ZXMsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5BdHRyaWJ1dGUuQ0xBU1NfTkFNRSA9IFwiQXR0cmlidXRlXCI7XG5cbmNvbnN0IE5PVF9CRUZPUkVfVElNRSA9IFwibm90QmVmb3JlVGltZVwiO1xuY29uc3QgTk9UX0FGVEVSX1RJTUUgPSBcIm5vdEFmdGVyVGltZVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMXIgPSBbXG4gICAgTk9UX0JFRk9SRV9USU1FLFxuICAgIE5PVF9BRlRFUl9USU1FLFxuXTtcbmNsYXNzIEF0dENlcnRWYWxpZGl0eVBlcmlvZCBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubm90QmVmb3JlVGltZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE5PVF9CRUZPUkVfVElNRSwgQXR0Q2VydFZhbGlkaXR5UGVyaW9kLmRlZmF1bHRWYWx1ZXMoTk9UX0JFRk9SRV9USU1FKSk7XG4gICAgICAgIHRoaXMubm90QWZ0ZXJUaW1lID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTk9UX0FGVEVSX1RJTUUsIEF0dENlcnRWYWxpZGl0eVBlcmlvZC5kZWZhdWx0VmFsdWVzKE5PVF9BRlRFUl9USU1FKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBOT1RfQkVGT1JFX1RJTUU6XG4gICAgICAgICAgICBjYXNlIE5PVF9BRlRFUl9USU1FOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgwLCAwLCAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyBuYW1lOiAobmFtZXMubm90QmVmb3JlVGltZSB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuR2VuZXJhbGl6ZWRUaW1lKHsgbmFtZTogKG5hbWVzLm5vdEFmdGVyVGltZSB8fCBFTVBUWV9TVFJJTkcpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMXIpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEF0dENlcnRWYWxpZGl0eVBlcmlvZC5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBub3RCZWZvcmVUaW1lOiBOT1RfQkVGT1JFX1RJTUUsXG4gICAgICAgICAgICAgICAgbm90QWZ0ZXJUaW1lOiBOT1RfQUZURVJfVElNRVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMubm90QmVmb3JlVGltZSA9IGFzbjEucmVzdWx0Lm5vdEJlZm9yZVRpbWUudG9EYXRlKCk7XG4gICAgICAgIHRoaXMubm90QWZ0ZXJUaW1lID0gYXNuMS5yZXN1bHQubm90QWZ0ZXJUaW1lLnRvRGF0ZSgpO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyB2YWx1ZURhdGU6IHRoaXMubm90QmVmb3JlVGltZSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkdlbmVyYWxpemVkVGltZSh7IHZhbHVlRGF0ZTogdGhpcy5ub3RBZnRlclRpbWUgfSksXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm90QmVmb3JlVGltZTogdGhpcy5ub3RCZWZvcmVUaW1lLFxuICAgICAgICAgICAgbm90QWZ0ZXJUaW1lOiB0aGlzLm5vdEFmdGVyVGltZVxuICAgICAgICB9O1xuICAgIH1cbn1cbkF0dENlcnRWYWxpZGl0eVBlcmlvZC5DTEFTU19OQU1FID0gXCJBdHRDZXJ0VmFsaWRpdHlQZXJpb2RcIjtcblxuY29uc3QgTkFNRVMgPSBcIm5hbWVzXCI7XG5jb25zdCBHRU5FUkFMX05BTUVTID0gXCJnZW5lcmFsTmFtZXNcIjtcbmNsYXNzIEdlbmVyYWxOYW1lcyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBOQU1FUywgR2VuZXJhbE5hbWVzLmRlZmF1bHRWYWx1ZXMoTkFNRVMpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwibmFtZXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9LCBvcHRpb25hbCA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTkFNRVMsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG9wdGlvbmFsLFxuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmdlbmVyYWxOYW1lcyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogR2VuZXJhbE5hbWUuc2NoZW1hKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIFtcbiAgICAgICAgICAgIE5BTUVTLFxuICAgICAgICAgICAgR0VORVJBTF9OQU1FU1xuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBHZW5lcmFsTmFtZXMuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBOQU1FUyxcbiAgICAgICAgICAgICAgICBnZW5lcmFsTmFtZXM6IEdFTkVSQUxfTkFNRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLm5hbWVzID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5nZW5lcmFsTmFtZXMsIGVsZW1lbnQgPT4gbmV3IEdlbmVyYWxOYW1lKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLm5hbWVzLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lczogQXJyYXkuZnJvbSh0aGlzLm5hbWVzLCBvID0+IG8udG9KU09OKCkpXG4gICAgICAgIH07XG4gICAgfVxufVxuR2VuZXJhbE5hbWVzLkNMQVNTX05BTUUgPSBcIkdlbmVyYWxOYW1lc1wiO1xuXG5jb25zdCBpZF9TdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcyA9IFwiMi41LjI5LjlcIjtcbmNvbnN0IGlkX1N1YmplY3RLZXlJZGVudGlmaWVyID0gXCIyLjUuMjkuMTRcIjtcbmNvbnN0IGlkX0tleVVzYWdlID0gXCIyLjUuMjkuMTVcIjtcbmNvbnN0IGlkX1ByaXZhdGVLZXlVc2FnZVBlcmlvZCA9IFwiMi41LjI5LjE2XCI7XG5jb25zdCBpZF9TdWJqZWN0QWx0TmFtZSA9IFwiMi41LjI5LjE3XCI7XG5jb25zdCBpZF9Jc3N1ZXJBbHROYW1lID0gXCIyLjUuMjkuMThcIjtcbmNvbnN0IGlkX0Jhc2ljQ29uc3RyYWludHMgPSBcIjIuNS4yOS4xOVwiO1xuY29uc3QgaWRfQ1JMTnVtYmVyID0gXCIyLjUuMjkuMjBcIjtcbmNvbnN0IGlkX0Jhc2VDUkxOdW1iZXIgPSBcIjIuNS4yOS4yN1wiO1xuY29uc3QgaWRfQ1JMUmVhc29uID0gXCIyLjUuMjkuMjFcIjtcbmNvbnN0IGlkX0ludmFsaWRpdHlEYXRlID0gXCIyLjUuMjkuMjRcIjtcbmNvbnN0IGlkX0lzc3VpbmdEaXN0cmlidXRpb25Qb2ludCA9IFwiMi41LjI5LjI4XCI7XG5jb25zdCBpZF9DZXJ0aWZpY2F0ZUlzc3VlciA9IFwiMi41LjI5LjI5XCI7XG5jb25zdCBpZF9OYW1lQ29uc3RyYWludHMgPSBcIjIuNS4yOS4zMFwiO1xuY29uc3QgaWRfQ1JMRGlzdHJpYnV0aW9uUG9pbnRzID0gXCIyLjUuMjkuMzFcIjtcbmNvbnN0IGlkX0ZyZXNoZXN0Q1JMID0gXCIyLjUuMjkuNDZcIjtcbmNvbnN0IGlkX0NlcnRpZmljYXRlUG9saWNpZXMgPSBcIjIuNS4yOS4zMlwiO1xuY29uc3QgaWRfQW55UG9saWN5ID0gXCIyLjUuMjkuMzIuMFwiO1xuY29uc3QgaWRfTWljcm9zb2Z0QXBwUG9saWNpZXMgPSBcIjEuMy42LjEuNC4xLjMxMS4yMS4xMFwiO1xuY29uc3QgaWRfUG9saWN5TWFwcGluZ3MgPSBcIjIuNS4yOS4zM1wiO1xuY29uc3QgaWRfQXV0aG9yaXR5S2V5SWRlbnRpZmllciA9IFwiMi41LjI5LjM1XCI7XG5jb25zdCBpZF9Qb2xpY3lDb25zdHJhaW50cyA9IFwiMi41LjI5LjM2XCI7XG5jb25zdCBpZF9FeHRLZXlVc2FnZSA9IFwiMi41LjI5LjM3XCI7XG5jb25zdCBpZF9JbmhpYml0QW55UG9saWN5ID0gXCIyLjUuMjkuNTRcIjtcbmNvbnN0IGlkX0F1dGhvcml0eUluZm9BY2Nlc3MgPSBcIjEuMy42LjEuNS41LjcuMS4xXCI7XG5jb25zdCBpZF9TdWJqZWN0SW5mb0FjY2VzcyA9IFwiMS4zLjYuMS41LjUuNy4xLjExXCI7XG5jb25zdCBpZF9TaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcExpc3QgPSBcIjEuMy42LjEuNC4xLjExMTI5LjIuNC4yXCI7XG5jb25zdCBpZF9NaWNyb3NvZnRDZXJ0VGVtcGxhdGVWMSA9IFwiMS4zLjYuMS40LjEuMzExLjIwLjJcIjtcbmNvbnN0IGlkX01pY3Jvc29mdFByZXZDYUNlcnRIYXNoID0gXCIxLjMuNi4xLjQuMS4zMTEuMjEuMlwiO1xuY29uc3QgaWRfTWljcm9zb2Z0Q2VydFRlbXBsYXRlVjIgPSBcIjEuMy42LjEuNC4xLjMxMS4yMS43XCI7XG5jb25zdCBpZF9NaWNyb3NvZnRDYVZlcnNpb24gPSBcIjEuMy42LjEuNC4xLjMxMS4yMS4xXCI7XG5jb25zdCBpZF9RQ1N0YXRlbWVudHMgPSBcIjEuMy42LjEuNS41LjcuMS4zXCI7XG5jb25zdCBpZF9Db250ZW50VHlwZV9EYXRhID0gXCIxLjIuODQwLjExMzU0OS4xLjcuMVwiO1xuY29uc3QgaWRfQ29udGVudFR5cGVfU2lnbmVkRGF0YSA9IFwiMS4yLjg0MC4xMTM1NDkuMS43LjJcIjtcbmNvbnN0IGlkX0NvbnRlbnRUeXBlX0VudmVsb3BlZERhdGEgPSBcIjEuMi44NDAuMTEzNTQ5LjEuNy4zXCI7XG5jb25zdCBpZF9Db250ZW50VHlwZV9FbmNyeXB0ZWREYXRhID0gXCIxLjIuODQwLjExMzU0OS4xLjcuNlwiO1xuY29uc3QgaWRfZUNvbnRlbnRUeXBlX1RTVEluZm8gPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4xLjRcIjtcbmNvbnN0IGlkX0NlcnRCYWdfWDUwOUNlcnRpZmljYXRlID0gXCIxLjIuODQwLjExMzU0OS4xLjkuMjIuMVwiO1xuY29uc3QgaWRfQ2VydEJhZ19TRFNJQ2VydGlmaWNhdGUgPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS4yMi4yXCI7XG5jb25zdCBpZF9DZXJ0QmFnX0F0dHJpYnV0ZUNlcnRpZmljYXRlID0gXCIxLjIuODQwLjExMzU0OS4xLjkuMjIuM1wiO1xuY29uc3QgaWRfQ1JMQmFnX1g1MDlDUkwgPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS4yMy4xXCI7XG5jb25zdCBpZF9wa2l4ID0gXCIxLjMuNi4xLjUuNS43XCI7XG5jb25zdCBpZF9hZCA9IGAke2lkX3BraXh9LjQ4YDtcbmNvbnN0IGlkX1BLSVhfT0NTUF9CYXNpYyA9IGAke2lkX2FkfS4xLjFgO1xuY29uc3QgaWRfYWRfY2FJc3N1ZXJzID0gYCR7aWRfYWR9LjJgO1xuY29uc3QgaWRfYWRfb2NzcCA9IGAke2lkX2FkfS4xYDtcbmNvbnN0IGlkX3NoYTEgPSBcIjEuMy4xNC4zLjIuMjZcIjtcbmNvbnN0IGlkX3NoYTI1NiA9IFwiMi4xNi44NDAuMS4xMDEuMy40LjIuMVwiO1xuY29uc3QgaWRfc2hhMzg0ID0gXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMi4yXCI7XG5jb25zdCBpZF9zaGE1MTIgPSBcIjIuMTYuODQwLjEuMTAxLjMuNC4yLjNcIjtcblxuY29uc3QgS0VZX0lERU5USUZJRVIkMSA9IFwia2V5SWRlbnRpZmllclwiO1xuY29uc3QgQVVUSE9SSVRZX0NFUlRfSVNTVUVSID0gXCJhdXRob3JpdHlDZXJ0SXNzdWVyXCI7XG5jb25zdCBBVVRIT1JJVFlfQ0VSVF9TRVJJQUxfTlVNQkVSID0gXCJhdXRob3JpdHlDZXJ0U2VyaWFsTnVtYmVyXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxcSA9IFtcbiAgICBLRVlfSURFTlRJRklFUiQxLFxuICAgIEFVVEhPUklUWV9DRVJUX0lTU1VFUixcbiAgICBBVVRIT1JJVFlfQ0VSVF9TRVJJQUxfTlVNQkVSLFxuXTtcbmNsYXNzIEF1dGhvcml0eUtleUlkZW50aWZpZXIgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoS0VZX0lERU5USUZJRVIkMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmtleUlkZW50aWZpZXIgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBLRVlfSURFTlRJRklFUiQxLCBBdXRob3JpdHlLZXlJZGVudGlmaWVyLmRlZmF1bHRWYWx1ZXMoS0VZX0lERU5USUZJRVIkMSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBVVRIT1JJVFlfQ0VSVF9JU1NVRVIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlDZXJ0SXNzdWVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQVVUSE9SSVRZX0NFUlRfSVNTVUVSLCBBdXRob3JpdHlLZXlJZGVudGlmaWVyLmRlZmF1bHRWYWx1ZXMoQVVUSE9SSVRZX0NFUlRfSVNTVUVSKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFVVEhPUklUWV9DRVJUX1NFUklBTF9OVU1CRVIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5hdXRob3JpdHlDZXJ0U2VyaWFsTnVtYmVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQVVUSE9SSVRZX0NFUlRfU0VSSUFMX05VTUJFUiwgQXV0aG9yaXR5S2V5SWRlbnRpZmllci5kZWZhdWx0VmFsdWVzKEFVVEhPUklUWV9DRVJUX1NFUklBTF9OVU1CRVIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgS0VZX0lERU5USUZJRVIkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgY2FzZSBBVVRIT1JJVFlfQ0VSVF9JU1NVRVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY2FzZSBBVVRIT1JJVFlfQ0VSVF9TRVJJQUxfTlVNQkVSOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMua2V5SWRlbnRpZmllciB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5hdXRob3JpdHlDZXJ0SXNzdWVyIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEdlbmVyYWxOYW1lLnNjaGVtYSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlciB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMXEpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEF1dGhvcml0eUtleUlkZW50aWZpZXIuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAga2V5SWRlbnRpZmllcjogS0VZX0lERU5USUZJRVIkMSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHlDZXJ0SXNzdWVyOiBBVVRIT1JJVFlfQ0VSVF9JU1NVRVIsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlcjogQVVUSE9SSVRZX0NFUlRfU0VSSUFMX05VTUJFUlxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIGlmIChLRVlfSURFTlRJRklFUiQxIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5rZXlJZGVudGlmaWVyID0gbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBhc24xLnJlc3VsdC5rZXlJZGVudGlmaWVyLnZhbHVlQmxvY2sudmFsdWVIZXggfSk7XG4gICAgICAgIGlmIChBVVRIT1JJVFlfQ0VSVF9JU1NVRVIgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eUNlcnRJc3N1ZXIgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LmF1dGhvcml0eUNlcnRJc3N1ZXIsIG8gPT4gbmV3IEdlbmVyYWxOYW1lKHsgc2NoZW1hOiBvIH0pKTtcbiAgICAgICAgaWYgKEFVVEhPUklUWV9DRVJUX1NFUklBTF9OVU1CRVIgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eUNlcnRTZXJpYWxOdW1iZXIgPSBuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZUhleDogYXNuMS5yZXN1bHQuYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlci52YWx1ZUJsb2NrLnZhbHVlSGV4IH0pO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMua2V5SWRlbnRpZmllcikge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZUhleDogdGhpcy5rZXlJZGVudGlmaWVyLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXV0aG9yaXR5Q2VydElzc3Vlcikge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuYXV0aG9yaXR5Q2VydElzc3VlciwgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlcikge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAyXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZUhleDogdGhpcy5hdXRob3JpdHlDZXJ0U2VyaWFsTnVtYmVyLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgb2JqZWN0ID0ge307XG4gICAgICAgIGlmICh0aGlzLmtleUlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIG9iamVjdC5rZXlJZGVudGlmaWVyID0gdGhpcy5rZXlJZGVudGlmaWVyLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF1dGhvcml0eUNlcnRJc3N1ZXIpIHtcbiAgICAgICAgICAgIG9iamVjdC5hdXRob3JpdHlDZXJ0SXNzdWVyID0gQXJyYXkuZnJvbSh0aGlzLmF1dGhvcml0eUNlcnRJc3N1ZXIsIG8gPT4gby50b0pTT04oKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlcikge1xuICAgICAgICAgICAgb2JqZWN0LmF1dGhvcml0eUNlcnRTZXJpYWxOdW1iZXIgPSB0aGlzLmF1dGhvcml0eUNlcnRTZXJpYWxOdW1iZXIudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG59XG5BdXRob3JpdHlLZXlJZGVudGlmaWVyLkNMQVNTX05BTUUgPSBcIkF1dGhvcml0eUtleUlkZW50aWZpZXJcIjtcblxuY29uc3QgUEFUSF9MRU5HVEhfQ09OU1RSQUlOVCA9IFwicGF0aExlbkNvbnN0cmFpbnRcIjtcbmNvbnN0IENBID0gXCJjQVwiO1xuY2xhc3MgQmFzaWNDb25zdHJhaW50cyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY0EgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDQSwgZmFsc2UpO1xuICAgICAgICBpZiAoUEFUSF9MRU5HVEhfQ09OU1RSQUlOVCBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnBhdGhMZW5Db25zdHJhaW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUEFUSF9MRU5HVEhfQ09OU1RSQUlOVCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIENBOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Cb29sZWFuKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5jQSB8fCBFTVBUWV9TVFJJTkcpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5wYXRoTGVuQ29uc3RyYWludCB8fCBFTVBUWV9TVFJJTkcpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBbXG4gICAgICAgICAgICBDQSxcbiAgICAgICAgICAgIFBBVEhfTEVOR1RIX0NPTlNUUkFJTlRcbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgQmFzaWNDb25zdHJhaW50cy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBjQTogQ0EsXG4gICAgICAgICAgICAgICAgcGF0aExlbkNvbnN0cmFpbnQ6IFBBVEhfTEVOR1RIX0NPTlNUUkFJTlRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICBpZiAoQ0EgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuY0EgPSBhc24xLnJlc3VsdC5jQS52YWx1ZUJsb2NrLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChQQVRIX0xFTkdUSF9DT05TVFJBSU5UIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoYXNuMS5yZXN1bHQucGF0aExlbkNvbnN0cmFpbnQudmFsdWVCbG9jay5pc0hleE9ubHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGhMZW5Db25zdHJhaW50ID0gYXNuMS5yZXN1bHQucGF0aExlbkNvbnN0cmFpbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGhMZW5Db25zdHJhaW50ID0gYXNuMS5yZXN1bHQucGF0aExlbkNvbnN0cmFpbnQudmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMuY0EgIT09IEJhc2ljQ29uc3RyYWludHMuZGVmYXVsdFZhbHVlcyhDQSkpXG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQm9vbGVhbih7IHZhbHVlOiB0aGlzLmNBIH0pKTtcbiAgICAgICAgaWYgKFBBVEhfTEVOR1RIX0NPTlNUUkFJTlQgaW4gdGhpcykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGF0aExlbkNvbnN0cmFpbnQgaW5zdGFuY2VvZiBhc24xanMuSW50ZWdlcikge1xuICAgICAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5wYXRoTGVuQ29uc3RyYWludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLnBhdGhMZW5Db25zdHJhaW50IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvYmplY3QgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuY0EgIT09IEJhc2ljQ29uc3RyYWludHMuZGVmYXVsdFZhbHVlcyhDQSkpIHtcbiAgICAgICAgICAgIG9iamVjdC5jQSA9IHRoaXMuY0E7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBBVEhfTEVOR1RIX0NPTlNUUkFJTlQgaW4gdGhpcykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGF0aExlbkNvbnN0cmFpbnQgaW5zdGFuY2VvZiBhc24xanMuSW50ZWdlcikge1xuICAgICAgICAgICAgICAgIG9iamVjdC5wYXRoTGVuQ29uc3RyYWludCA9IHRoaXMucGF0aExlbkNvbnN0cmFpbnQudG9KU09OKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYmplY3QucGF0aExlbkNvbnN0cmFpbnQgPSB0aGlzLnBhdGhMZW5Db25zdHJhaW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxufVxuQmFzaWNDb25zdHJhaW50cy5DTEFTU19OQU1FID0gXCJCYXNpY0NvbnN0cmFpbnRzXCI7XG5cbmNvbnN0IENFUlRJRklDQVRFX0lOREVYID0gXCJjZXJ0aWZpY2F0ZUluZGV4XCI7XG5jb25zdCBLRVlfSU5ERVggPSBcImtleUluZGV4XCI7XG5jbGFzcyBDQVZlcnNpb24gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNlcnRpZmljYXRlSW5kZXggPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDRVJUSUZJQ0FURV9JTkRFWCwgQ0FWZXJzaW9uLmRlZmF1bHRWYWx1ZXMoQ0VSVElGSUNBVEVfSU5ERVgpKTtcbiAgICAgICAgdGhpcy5rZXlJbmRleCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEtFWV9JTkRFWCwgQ0FWZXJzaW9uLmRlZmF1bHRWYWx1ZXMoS0VZX0lOREVYKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBDRVJUSUZJQ0FURV9JTkRFWDpcbiAgICAgICAgICAgIGNhc2UgS0VZX0lOREVYOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuSW50ZWdlcigpKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgaWYgKHNjaGVtYS5jb25zdHJ1Y3Rvci5ibG9ja05hbWUoKSAhPT0gYXNuMWpzLkludGVnZXIuYmxvY2tOYW1lKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9iamVjdCdzIHNjaGVtYSB3YXMgbm90IHZlcmlmaWVkIGFnYWluc3QgaW5wdXQgZGF0YSBmb3IgQ0FWZXJzaW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB2YWx1ZSA9IHNjaGVtYS52YWx1ZUJsb2NrLnZhbHVlSGV4LnNsaWNlKDApO1xuICAgICAgICBjb25zdCB2YWx1ZVZpZXcgPSBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgICAgICAgY2FzZSAodmFsdWUuYnl0ZUxlbmd0aCA8IDQpOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcFZhbHVlID0gbmV3IEFycmF5QnVmZmVyKDQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wVmFsdWVWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGVtcFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFZhbHVlVmlldy5zZXQodmFsdWVWaWV3LCA0IC0gdmFsdWUuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGVtcFZhbHVlLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgKHZhbHVlLmJ5dGVMZW5ndGggPiA0KTpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBWYWx1ZSA9IG5ldyBBcnJheUJ1ZmZlcig0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcFZhbHVlVmlldyA9IG5ldyBVaW50OEFycmF5KHRlbXBWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBWYWx1ZVZpZXcuc2V0KHZhbHVlVmlldy5zbGljZSgwLCA0KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGVtcFZhbHVlLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlJbmRleEJ1ZmZlciA9IHZhbHVlLnNsaWNlKDAsIDIpO1xuICAgICAgICBjb25zdCBrZXlJbmRleFZpZXc4ID0gbmV3IFVpbnQ4QXJyYXkoa2V5SW5kZXhCdWZmZXIpO1xuICAgICAgICBsZXQgdGVtcCA9IGtleUluZGV4VmlldzhbMF07XG4gICAgICAgIGtleUluZGV4VmlldzhbMF0gPSBrZXlJbmRleFZpZXc4WzFdO1xuICAgICAgICBrZXlJbmRleFZpZXc4WzFdID0gdGVtcDtcbiAgICAgICAgY29uc3Qga2V5SW5kZXhWaWV3MTYgPSBuZXcgVWludDE2QXJyYXkoa2V5SW5kZXhCdWZmZXIpO1xuICAgICAgICB0aGlzLmtleUluZGV4ID0ga2V5SW5kZXhWaWV3MTZbMF07XG4gICAgICAgIGNvbnN0IGNlcnRpZmljYXRlSW5kZXhCdWZmZXIgPSB2YWx1ZS5zbGljZSgyKTtcbiAgICAgICAgY29uc3QgY2VydGlmaWNhdGVJbmRleFZpZXc4ID0gbmV3IFVpbnQ4QXJyYXkoY2VydGlmaWNhdGVJbmRleEJ1ZmZlcik7XG4gICAgICAgIHRlbXAgPSBjZXJ0aWZpY2F0ZUluZGV4VmlldzhbMF07XG4gICAgICAgIGNlcnRpZmljYXRlSW5kZXhWaWV3OFswXSA9IGNlcnRpZmljYXRlSW5kZXhWaWV3OFsxXTtcbiAgICAgICAgY2VydGlmaWNhdGVJbmRleFZpZXc4WzFdID0gdGVtcDtcbiAgICAgICAgY29uc3QgY2VydGlmaWNhdGVJbmRleFZpZXcxNiA9IG5ldyBVaW50MTZBcnJheShjZXJ0aWZpY2F0ZUluZGV4QnVmZmVyKTtcbiAgICAgICAgdGhpcy5jZXJ0aWZpY2F0ZUluZGV4ID0gY2VydGlmaWNhdGVJbmRleFZpZXcxNlswXTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IGNlcnRpZmljYXRlSW5kZXhCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMik7XG4gICAgICAgIGNvbnN0IGNlcnRpZmljYXRlSW5kZXhWaWV3ID0gbmV3IFVpbnQxNkFycmF5KGNlcnRpZmljYXRlSW5kZXhCdWZmZXIpO1xuICAgICAgICBjZXJ0aWZpY2F0ZUluZGV4Vmlld1swXSA9IHRoaXMuY2VydGlmaWNhdGVJbmRleDtcbiAgICAgICAgY29uc3QgY2VydGlmaWNhdGVJbmRleFZpZXc4ID0gbmV3IFVpbnQ4QXJyYXkoY2VydGlmaWNhdGVJbmRleEJ1ZmZlcik7XG4gICAgICAgIGxldCB0ZW1wID0gY2VydGlmaWNhdGVJbmRleFZpZXc4WzBdO1xuICAgICAgICBjZXJ0aWZpY2F0ZUluZGV4VmlldzhbMF0gPSBjZXJ0aWZpY2F0ZUluZGV4VmlldzhbMV07XG4gICAgICAgIGNlcnRpZmljYXRlSW5kZXhWaWV3OFsxXSA9IHRlbXA7XG4gICAgICAgIGNvbnN0IGtleUluZGV4QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDIpO1xuICAgICAgICBjb25zdCBrZXlJbmRleFZpZXcgPSBuZXcgVWludDE2QXJyYXkoa2V5SW5kZXhCdWZmZXIpO1xuICAgICAgICBrZXlJbmRleFZpZXdbMF0gPSB0aGlzLmtleUluZGV4O1xuICAgICAgICBjb25zdCBrZXlJbmRleFZpZXc4ID0gbmV3IFVpbnQ4QXJyYXkoa2V5SW5kZXhCdWZmZXIpO1xuICAgICAgICB0ZW1wID0ga2V5SW5kZXhWaWV3OFswXTtcbiAgICAgICAga2V5SW5kZXhWaWV3OFswXSA9IGtleUluZGV4VmlldzhbMV07XG4gICAgICAgIGtleUluZGV4VmlldzhbMV0gPSB0ZW1wO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuSW50ZWdlcih7XG4gICAgICAgICAgICB2YWx1ZUhleDogcHZ1dGlscy51dGlsQ29uY2F0QnVmKGtleUluZGV4QnVmZmVyLCBjZXJ0aWZpY2F0ZUluZGV4QnVmZmVyKVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNlcnRpZmljYXRlSW5kZXg6IHRoaXMuY2VydGlmaWNhdGVJbmRleCxcbiAgICAgICAgICAgIGtleUluZGV4OiB0aGlzLmtleUluZGV4XG4gICAgICAgIH07XG4gICAgfVxufVxuQ0FWZXJzaW9uLkNMQVNTX05BTUUgPSBcIkNBVmVyc2lvblwiO1xuXG5jb25zdCBQT0xJQ1lfUVVBTElGSUVSX0lEID0gXCJwb2xpY3lRdWFsaWZpZXJJZFwiO1xuY29uc3QgUVVBTElGSUVSID0gXCJxdWFsaWZpZXJcIjtcbmNvbnN0IENMRUFSX1BST1BTJDFwID0gW1xuICAgIFBPTElDWV9RVUFMSUZJRVJfSUQsXG4gICAgUVVBTElGSUVSXG5dO1xuY2xhc3MgUG9saWN5UXVhbGlmaWVySW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucG9saWN5UXVhbGlmaWVySWQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQT0xJQ1lfUVVBTElGSUVSX0lELCBQb2xpY3lRdWFsaWZpZXJJbmZvLmRlZmF1bHRWYWx1ZXMoUE9MSUNZX1FVQUxJRklFUl9JRCkpO1xuICAgICAgICB0aGlzLnF1YWxpZmllciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFFVQUxJRklFUiwgUG9saWN5UXVhbGlmaWVySW5mby5kZWZhdWx0VmFsdWVzKFFVQUxJRklFUikpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgUE9MSUNZX1FVQUxJRklFUl9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBRVUFMSUZJRVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQW55KCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IG5hbWU6IChuYW1lcy5wb2xpY3lRdWFsaWZpZXJJZCB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQW55KHsgbmFtZTogKG5hbWVzLnF1YWxpZmllciB8fCBFTVBUWV9TVFJJTkcpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMXApO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFBvbGljeVF1YWxpZmllckluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgcG9saWN5UXVhbGlmaWVySWQ6IFBPTElDWV9RVUFMSUZJRVJfSUQsXG4gICAgICAgICAgICAgICAgcXVhbGlmaWVyOiBRVUFMSUZJRVJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnBvbGljeVF1YWxpZmllcklkID0gYXNuMS5yZXN1bHQucG9saWN5UXVhbGlmaWVySWQudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICB0aGlzLnF1YWxpZmllciA9IGFzbjEucmVzdWx0LnF1YWxpZmllcjtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiB0aGlzLnBvbGljeVF1YWxpZmllcklkIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMucXVhbGlmaWVyXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9saWN5UXVhbGlmaWVySWQ6IHRoaXMucG9saWN5UXVhbGlmaWVySWQsXG4gICAgICAgICAgICBxdWFsaWZpZXI6IHRoaXMucXVhbGlmaWVyLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgfVxufVxuUG9saWN5UXVhbGlmaWVySW5mby5DTEFTU19OQU1FID0gXCJQb2xpY3lRdWFsaWZpZXJJbmZvXCI7XG5cbmNvbnN0IFBPTElDWV9JREVOVElGSUVSID0gXCJwb2xpY3lJZGVudGlmaWVyXCI7XG5jb25zdCBQT0xJQ1lfUVVBTElGSUVSUyA9IFwicG9saWN5UXVhbGlmaWVyc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMW8gPSBbXG4gICAgUE9MSUNZX0lERU5USUZJRVIsXG4gICAgUE9MSUNZX1FVQUxJRklFUlNcbl07XG5jbGFzcyBQb2xpY3lJbmZvcm1hdGlvbiBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucG9saWN5SWRlbnRpZmllciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBPTElDWV9JREVOVElGSUVSLCBQb2xpY3lJbmZvcm1hdGlvbi5kZWZhdWx0VmFsdWVzKFBPTElDWV9JREVOVElGSUVSKSk7XG4gICAgICAgIGlmIChQT0xJQ1lfUVVBTElGSUVSUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnBvbGljeVF1YWxpZmllcnMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQT0xJQ1lfUVVBTElGSUVSUywgUG9saWN5SW5mb3JtYXRpb24uZGVmYXVsdFZhbHVlcyhQT0xJQ1lfUVVBTElGSUVSUykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBQT0xJQ1lfSURFTlRJRklFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBQT0xJQ1lfUVVBTElGSUVSUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IG5hbWU6IChuYW1lcy5wb2xpY3lJZGVudGlmaWVyIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLnBvbGljeVF1YWxpZmllcnMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogUG9saWN5UXVhbGlmaWVySW5mby5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMW8pO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFBvbGljeUluZm9ybWF0aW9uLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHBvbGljeUlkZW50aWZpZXI6IFBPTElDWV9JREVOVElGSUVSLFxuICAgICAgICAgICAgICAgIHBvbGljeVF1YWxpZmllcnM6IFBPTElDWV9RVUFMSUZJRVJTXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5wb2xpY3lJZGVudGlmaWVyID0gYXNuMS5yZXN1bHQucG9saWN5SWRlbnRpZmllci52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmIChQT0xJQ1lfUVVBTElGSUVSUyBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5wb2xpY3lRdWFsaWZpZXJzID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5wb2xpY3lRdWFsaWZpZXJzLCBlbGVtZW50ID0+IG5ldyBQb2xpY3lRdWFsaWZpZXJJbmZvKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5wb2xpY3lJZGVudGlmaWVyIH0pKTtcbiAgICAgICAgaWYgKHRoaXMucG9saWN5UXVhbGlmaWVycykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLnBvbGljeVF1YWxpZmllcnMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIHBvbGljeUlkZW50aWZpZXI6IHRoaXMucG9saWN5SWRlbnRpZmllclxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5wb2xpY3lRdWFsaWZpZXJzKVxuICAgICAgICAgICAgcmVzLnBvbGljeVF1YWxpZmllcnMgPSBBcnJheS5mcm9tKHRoaXMucG9saWN5UXVhbGlmaWVycywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG5Qb2xpY3lJbmZvcm1hdGlvbi5DTEFTU19OQU1FID0gXCJQb2xpY3lJbmZvcm1hdGlvblwiO1xuXG5jb25zdCBDRVJUSUZJQ0FURV9QT0xJQ0lFUyA9IFwiY2VydGlmaWNhdGVQb2xpY2llc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMW4gPSBbXG4gICAgQ0VSVElGSUNBVEVfUE9MSUNJRVMsXG5dO1xuY2xhc3MgQ2VydGlmaWNhdGVQb2xpY2llcyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY2VydGlmaWNhdGVQb2xpY2llcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENFUlRJRklDQVRFX1BPTElDSUVTLCBDZXJ0aWZpY2F0ZVBvbGljaWVzLmRlZmF1bHRWYWx1ZXMoQ0VSVElGSUNBVEVfUE9MSUNJRVMpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIENFUlRJRklDQVRFX1BPTElDSUVTOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5jZXJ0aWZpY2F0ZVBvbGljaWVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBQb2xpY3lJbmZvcm1hdGlvbi5zY2hlbWEoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMW4pO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIENlcnRpZmljYXRlUG9saWNpZXMuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgY2VydGlmaWNhdGVQb2xpY2llczogQ0VSVElGSUNBVEVfUE9MSUNJRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmNlcnRpZmljYXRlUG9saWNpZXMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LmNlcnRpZmljYXRlUG9saWNpZXMsIGVsZW1lbnQgPT4gbmV3IFBvbGljeUluZm9ybWF0aW9uKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmNlcnRpZmljYXRlUG9saWNpZXMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNlcnRpZmljYXRlUG9saWNpZXM6IEFycmF5LmZyb20odGhpcy5jZXJ0aWZpY2F0ZVBvbGljaWVzLCBvID0+IG8udG9KU09OKCkpXG4gICAgICAgIH07XG4gICAgfVxufVxuQ2VydGlmaWNhdGVQb2xpY2llcy5DTEFTU19OQU1FID0gXCJDZXJ0aWZpY2F0ZVBvbGljaWVzXCI7XG5cbmNvbnN0IFRFTVBMQVRFX0lEID0gXCJ0ZW1wbGF0ZUlEXCI7XG5jb25zdCBURU1QTEFURV9NQUpPUl9WRVJTSU9OID0gXCJ0ZW1wbGF0ZU1ham9yVmVyc2lvblwiO1xuY29uc3QgVEVNUExBVEVfTUlOT1JfVkVSU0lPTiA9IFwidGVtcGxhdGVNaW5vclZlcnNpb25cIjtcbmNvbnN0IENMRUFSX1BST1BTJDFtID0gW1xuICAgIFRFTVBMQVRFX0lELFxuICAgIFRFTVBMQVRFX01BSk9SX1ZFUlNJT04sXG4gICAgVEVNUExBVEVfTUlOT1JfVkVSU0lPTlxuXTtcbmNsYXNzIENlcnRpZmljYXRlVGVtcGxhdGUgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRlbXBsYXRlSUQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBURU1QTEFURV9JRCwgQ2VydGlmaWNhdGVUZW1wbGF0ZS5kZWZhdWx0VmFsdWVzKFRFTVBMQVRFX0lEKSk7XG4gICAgICAgIGlmIChURU1QTEFURV9NQUpPUl9WRVJTSU9OIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNYWpvclZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBURU1QTEFURV9NQUpPUl9WRVJTSU9OLCBDZXJ0aWZpY2F0ZVRlbXBsYXRlLmRlZmF1bHRWYWx1ZXMoVEVNUExBVEVfTUFKT1JfVkVSU0lPTikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChURU1QTEFURV9NSU5PUl9WRVJTSU9OIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNaW5vclZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBURU1QTEFURV9NSU5PUl9WRVJTSU9OLCBDZXJ0aWZpY2F0ZVRlbXBsYXRlLmRlZmF1bHRWYWx1ZXMoVEVNUExBVEVfTUlOT1JfVkVSU0lPTikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBURU1QTEFURV9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBURU1QTEFURV9NQUpPUl9WRVJTSU9OOlxuICAgICAgICAgICAgY2FzZSBURU1QTEFURV9NSU5PUl9WRVJTSU9OOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyBuYW1lOiAobmFtZXMudGVtcGxhdGVJRCB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy50ZW1wbGF0ZU1ham9yVmVyc2lvbiB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy50ZW1wbGF0ZU1pbm9yVmVyc2lvbiB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDFtKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBDZXJ0aWZpY2F0ZVRlbXBsYXRlLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlSUQ6IFRFTVBMQVRFX0lELFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTWFqb3JWZXJzaW9uOiBURU1QTEFURV9NQUpPUl9WRVJTSU9OLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTWlub3JWZXJzaW9uOiBURU1QTEFURV9NSU5PUl9WRVJTSU9OXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUlEID0gYXNuMS5yZXN1bHQudGVtcGxhdGVJRC52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmIChURU1QTEFURV9NQUpPUl9WRVJTSU9OIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlTWFqb3JWZXJzaW9uID0gYXNuMS5yZXN1bHQudGVtcGxhdGVNYWpvclZlcnNpb24udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgfVxuICAgICAgICBpZiAoVEVNUExBVEVfTUlOT1JfVkVSU0lPTiBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZU1pbm9yVmVyc2lvbiA9IGFzbjEucmVzdWx0LnRlbXBsYXRlTWlub3JWZXJzaW9uLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IHRoaXMudGVtcGxhdGVJRCB9KSk7XG4gICAgICAgIGlmIChURU1QTEFURV9NQUpPUl9WRVJTSU9OIGluIHRoaXMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudGVtcGxhdGVNYWpvclZlcnNpb24gfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChURU1QTEFURV9NSU5PUl9WRVJTSU9OIGluIHRoaXMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudGVtcGxhdGVNaW5vclZlcnNpb24gfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIHRlbXBsYXRlSUQ6IHRoaXMudGVtcGxhdGVJRFxuICAgICAgICB9O1xuICAgICAgICBpZiAoVEVNUExBVEVfTUFKT1JfVkVSU0lPTiBpbiB0aGlzKVxuICAgICAgICAgICAgcmVzLnRlbXBsYXRlTWFqb3JWZXJzaW9uID0gdGhpcy50ZW1wbGF0ZU1ham9yVmVyc2lvbjtcbiAgICAgICAgaWYgKFRFTVBMQVRFX01JTk9SX1ZFUlNJT04gaW4gdGhpcylcbiAgICAgICAgICAgIHJlcy50ZW1wbGF0ZU1pbm9yVmVyc2lvbiA9IHRoaXMudGVtcGxhdGVNaW5vclZlcnNpb247XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuXG5jb25zdCBESVNUUklCVVRJT05fUE9JTlQkMSA9IFwiZGlzdHJpYnV0aW9uUG9pbnRcIjtcbmNvbnN0IERJU1RSSUJVVElPTl9QT0lOVF9OQU1FUyQxID0gXCJkaXN0cmlidXRpb25Qb2ludE5hbWVzXCI7XG5jb25zdCBSRUFTT05TID0gXCJyZWFzb25zXCI7XG5jb25zdCBDUkxfSVNTVUVSID0gXCJjUkxJc3N1ZXJcIjtcbmNvbnN0IENSTF9JU1NVRVJfTkFNRVMgPSBcImNSTElzc3Vlck5hbWVzXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxbCA9IFtcbiAgICBESVNUUklCVVRJT05fUE9JTlQkMSxcbiAgICBESVNUUklCVVRJT05fUE9JTlRfTkFNRVMkMSxcbiAgICBSRUFTT05TLFxuICAgIENSTF9JU1NVRVIsXG4gICAgQ1JMX0lTU1VFUl9OQU1FUyxcbl07XG5jbGFzcyBEaXN0cmlidXRpb25Qb2ludCBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmIChESVNUUklCVVRJT05fUE9JTlQkMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3RyaWJ1dGlvblBvaW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRElTVFJJQlVUSU9OX1BPSU5UJDEsIERpc3RyaWJ1dGlvblBvaW50LmRlZmF1bHRWYWx1ZXMoRElTVFJJQlVUSU9OX1BPSU5UJDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoUkVBU09OUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnJlYXNvbnMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBSRUFTT05TLCBEaXN0cmlidXRpb25Qb2ludC5kZWZhdWx0VmFsdWVzKFJFQVNPTlMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQ1JMX0lTU1VFUiBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmNSTElzc3VlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENSTF9JU1NVRVIsIERpc3RyaWJ1dGlvblBvaW50LmRlZmF1bHRWYWx1ZXMoQ1JMX0lTU1VFUikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBESVNUUklCVVRJT05fUE9JTlQkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjYXNlIFJFQVNPTlM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBjYXNlIENSTF9JU1NVRVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNob2ljZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuZGlzdHJpYnV0aW9uUG9pbnQgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5kaXN0cmlidXRpb25Qb2ludE5hbWVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBHZW5lcmFsTmFtZS5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5kaXN0cmlidXRpb25Qb2ludCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzLnNjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMucmVhc29ucyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuY1JMSXNzdWVyIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmNSTElzc3Vlck5hbWVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEdlbmVyYWxOYW1lLnNjaGVtYSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxbCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgRGlzdHJpYnV0aW9uUG9pbnQuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgZGlzdHJpYnV0aW9uUG9pbnQ6IERJU1RSSUJVVElPTl9QT0lOVCQxLFxuICAgICAgICAgICAgICAgIGRpc3RyaWJ1dGlvblBvaW50TmFtZXM6IERJU1RSSUJVVElPTl9QT0lOVF9OQU1FUyQxLFxuICAgICAgICAgICAgICAgIHJlYXNvbnM6IFJFQVNPTlMsXG4gICAgICAgICAgICAgICAgY1JMSXNzdWVyOiBDUkxfSVNTVUVSLFxuICAgICAgICAgICAgICAgIGNSTElzc3Vlck5hbWVzOiBDUkxfSVNTVUVSX05BTUVTXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKERJU1RSSUJVVElPTl9QT0lOVCQxIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoYXNuMS5yZXN1bHQuZGlzdHJpYnV0aW9uUG9pbnQuaWRCbG9jay50YWdOdW1iZXIgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RyaWJ1dGlvblBvaW50ID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5kaXN0cmlidXRpb25Qb2ludE5hbWVzLCBlbGVtZW50ID0+IG5ldyBHZW5lcmFsTmFtZSh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXNuMS5yZXN1bHQuZGlzdHJpYnV0aW9uUG9pbnQuaWRCbG9jay50YWdOdW1iZXIgPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RyaWJ1dGlvblBvaW50ID0gbmV3IFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzKHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhc24xLnJlc3VsdC5kaXN0cmlidXRpb25Qb2ludC52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFJFQVNPTlMgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVhc29ucyA9IG5ldyBhc24xanMuQml0U3RyaW5nKHsgdmFsdWVIZXg6IGFzbjEucmVzdWx0LnJlYXNvbnMudmFsdWVCbG9jay52YWx1ZUhleCB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQ1JMX0lTU1VFUiBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5jUkxJc3N1ZXIgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LmNSTElzc3Vlck5hbWVzLCBlbGVtZW50ID0+IG5ldyBHZW5lcmFsTmFtZSh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIGlmICh0aGlzLmRpc3RyaWJ1dGlvblBvaW50KSB7XG4gICAgICAgICAgICBsZXQgaW50ZXJuYWxWYWx1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3RyaWJ1dGlvblBvaW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpbnRlcm5hbFZhbHVlID0gbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuZGlzdHJpYnV0aW9uUG9pbnQsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZXJuYWxWYWx1ZSA9IG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW3RoaXMuZGlzdHJpYnV0aW9uUG9pbnQudG9TY2hlbWEoKV1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW2ludGVybmFsVmFsdWVdXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVhc29ucykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZUhleDogdGhpcy5yZWFzb25zLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY1JMSXNzdWVyKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5jUkxJc3N1ZXIsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAodGhpcy5kaXN0cmlidXRpb25Qb2ludCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlzdHJpYnV0aW9uUG9pbnQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5kaXN0cmlidXRpb25Qb2ludCA9IEFycmF5LmZyb20odGhpcy5kaXN0cmlidXRpb25Qb2ludCwgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9iamVjdC5kaXN0cmlidXRpb25Qb2ludCA9IHRoaXMuZGlzdHJpYnV0aW9uUG9pbnQudG9KU09OKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVhc29ucykge1xuICAgICAgICAgICAgb2JqZWN0LnJlYXNvbnMgPSB0aGlzLnJlYXNvbnMudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY1JMSXNzdWVyKSB7XG4gICAgICAgICAgICBvYmplY3QuY1JMSXNzdWVyID0gQXJyYXkuZnJvbSh0aGlzLmNSTElzc3VlciwgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cbn1cbkRpc3RyaWJ1dGlvblBvaW50LkNMQVNTX05BTUUgPSBcIkRpc3RyaWJ1dGlvblBvaW50XCI7XG5cbmNvbnN0IERJU1RSSUJVVElPTl9QT0lOVFMgPSBcImRpc3RyaWJ1dGlvblBvaW50c1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMWsgPSBbXG4gICAgRElTVFJJQlVUSU9OX1BPSU5UU1xuXTtcbmNsYXNzIENSTERpc3RyaWJ1dGlvblBvaW50cyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZGlzdHJpYnV0aW9uUG9pbnRzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRElTVFJJQlVUSU9OX1BPSU5UUywgQ1JMRGlzdHJpYnV0aW9uUG9pbnRzLmRlZmF1bHRWYWx1ZXMoRElTVFJJQlVUSU9OX1BPSU5UUykpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgRElTVFJJQlVUSU9OX1BPSU5UUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuZGlzdHJpYnV0aW9uUG9pbnRzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBEaXN0cmlidXRpb25Qb2ludC5zY2hlbWEoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMWspO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIENSTERpc3RyaWJ1dGlvblBvaW50cy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBkaXN0cmlidXRpb25Qb2ludHM6IERJU1RSSUJVVElPTl9QT0lOVFNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmRpc3RyaWJ1dGlvblBvaW50cyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQuZGlzdHJpYnV0aW9uUG9pbnRzLCBlbGVtZW50ID0+IG5ldyBEaXN0cmlidXRpb25Qb2ludCh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5kaXN0cmlidXRpb25Qb2ludHMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvblBvaW50czogQXJyYXkuZnJvbSh0aGlzLmRpc3RyaWJ1dGlvblBvaW50cywgbyA9PiBvLnRvSlNPTigpKVxuICAgICAgICB9O1xuICAgIH1cbn1cbkNSTERpc3RyaWJ1dGlvblBvaW50cy5DTEFTU19OQU1FID0gXCJDUkxEaXN0cmlidXRpb25Qb2ludHNcIjtcblxuY29uc3QgS0VZX1BVUlBPU0VTID0gXCJrZXlQdXJwb3Nlc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMWogPSBbXG4gICAgS0VZX1BVUlBPU0VTLFxuXTtcbmNsYXNzIEV4dEtleVVzYWdlIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5rZXlQdXJwb3NlcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEtFWV9QVVJQT1NFUywgRXh0S2V5VXNhZ2UuZGVmYXVsdFZhbHVlcyhLRVlfUFVSUE9TRVMpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEtFWV9QVVJQT1NFUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMua2V5UHVycG9zZXMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcigpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxaik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgRXh0S2V5VXNhZ2Uuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAga2V5UHVycG9zZXM6IEtFWV9QVVJQT1NFU1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMua2V5UHVycG9zZXMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LmtleVB1cnBvc2VzLCAoZWxlbWVudCkgPT4gZWxlbWVudC52YWx1ZUJsb2NrLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMua2V5UHVycG9zZXMsIGVsZW1lbnQgPT4gbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IGVsZW1lbnQgfSkpXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5UHVycG9zZXM6IEFycmF5LmZyb20odGhpcy5rZXlQdXJwb3NlcylcbiAgICAgICAgfTtcbiAgICB9XG59XG5FeHRLZXlVc2FnZS5DTEFTU19OQU1FID0gXCJFeHRLZXlVc2FnZVwiO1xuXG5jb25zdCBBQ0NFU1NfREVTQ1JJUFRJT05TID0gXCJhY2Nlc3NEZXNjcmlwdGlvbnNcIjtcbmNsYXNzIEluZm9BY2Nlc3MgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmFjY2Vzc0Rlc2NyaXB0aW9ucyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEFDQ0VTU19ERVNDUklQVElPTlMsIEluZm9BY2Nlc3MuZGVmYXVsdFZhbHVlcyhBQ0NFU1NfREVTQ1JJUFRJT05TKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBBQ0NFU1NfREVTQ1JJUFRJT05TOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5hY2Nlc3NEZXNjcmlwdGlvbnMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEFjY2Vzc0Rlc2NyaXB0aW9uLnNjaGVtYSgpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBbXG4gICAgICAgICAgICBBQ0NFU1NfREVTQ1JJUFRJT05TXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEluZm9BY2Nlc3Muc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgYWNjZXNzRGVzY3JpcHRpb25zOiBBQ0NFU1NfREVTQ1JJUFRJT05TXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5hY2Nlc3NEZXNjcmlwdGlvbnMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LmFjY2Vzc0Rlc2NyaXB0aW9ucywgZWxlbWVudCA9PiBuZXcgQWNjZXNzRGVzY3JpcHRpb24oeyBzY2hlbWE6IGVsZW1lbnQgfSkpO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuYWNjZXNzRGVzY3JpcHRpb25zLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NEZXNjcmlwdGlvbnM6IEFycmF5LmZyb20odGhpcy5hY2Nlc3NEZXNjcmlwdGlvbnMsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5JbmZvQWNjZXNzLkNMQVNTX05BTUUgPSBcIkluZm9BY2Nlc3NcIjtcblxuY29uc3QgRElTVFJJQlVUSU9OX1BPSU5UID0gXCJkaXN0cmlidXRpb25Qb2ludFwiO1xuY29uc3QgRElTVFJJQlVUSU9OX1BPSU5UX05BTUVTID0gXCJkaXN0cmlidXRpb25Qb2ludE5hbWVzXCI7XG5jb25zdCBPTkxZX0NPTlRBSU5TX1VTRVJfQ0VSVFMgPSBcIm9ubHlDb250YWluc1VzZXJDZXJ0c1wiO1xuY29uc3QgT05MWV9DT05UQUlOU19DQV9DRVJUUyA9IFwib25seUNvbnRhaW5zQ0FDZXJ0c1wiO1xuY29uc3QgT05MWV9TT01FX1JFQVNPTiA9IFwib25seVNvbWVSZWFzb25zXCI7XG5jb25zdCBJTkRJUkVDVF9DUkwgPSBcImluZGlyZWN0Q1JMXCI7XG5jb25zdCBPTkxZX0NPTlRBSU5TX0FUVFJJQlVURV9DRVJUUyA9IFwib25seUNvbnRhaW5zQXR0cmlidXRlQ2VydHNcIjtcbmNvbnN0IENMRUFSX1BST1BTJDFpID0gW1xuICAgIERJU1RSSUJVVElPTl9QT0lOVCxcbiAgICBESVNUUklCVVRJT05fUE9JTlRfTkFNRVMsXG4gICAgT05MWV9DT05UQUlOU19VU0VSX0NFUlRTLFxuICAgIE9OTFlfQ09OVEFJTlNfQ0FfQ0VSVFMsXG4gICAgT05MWV9TT01FX1JFQVNPTixcbiAgICBJTkRJUkVDVF9DUkwsXG4gICAgT05MWV9DT05UQUlOU19BVFRSSUJVVEVfQ0VSVFMsXG5dO1xuY2xhc3MgSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKERJU1RSSUJVVElPTl9QT0lOVCBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3RyaWJ1dGlvblBvaW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRElTVFJJQlVUSU9OX1BPSU5ULCBJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQuZGVmYXVsdFZhbHVlcyhESVNUUklCVVRJT05fUE9JTlQpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ubHlDb250YWluc1VzZXJDZXJ0cyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9OTFlfQ09OVEFJTlNfVVNFUl9DRVJUUywgSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LmRlZmF1bHRWYWx1ZXMoT05MWV9DT05UQUlOU19VU0VSX0NFUlRTKSk7XG4gICAgICAgIHRoaXMub25seUNvbnRhaW5zQ0FDZXJ0cyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9OTFlfQ09OVEFJTlNfQ0FfQ0VSVFMsIElzc3VpbmdEaXN0cmlidXRpb25Qb2ludC5kZWZhdWx0VmFsdWVzKE9OTFlfQ09OVEFJTlNfQ0FfQ0VSVFMpKTtcbiAgICAgICAgaWYgKE9OTFlfU09NRV9SRUFTT04gaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5vbmx5U29tZVJlYXNvbnMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPTkxZX1NPTUVfUkVBU09OLCBJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQuZGVmYXVsdFZhbHVlcyhPTkxZX1NPTUVfUkVBU09OKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmRpcmVjdENSTCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElORElSRUNUX0NSTCwgSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LmRlZmF1bHRWYWx1ZXMoSU5ESVJFQ1RfQ1JMKSk7XG4gICAgICAgIHRoaXMub25seUNvbnRhaW5zQXR0cmlidXRlQ2VydHMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPTkxZX0NPTlRBSU5TX0FUVFJJQlVURV9DRVJUUywgSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LmRlZmF1bHRWYWx1ZXMoT05MWV9DT05UQUlOU19BVFRSSUJVVEVfQ0VSVFMpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIERJU1RSSUJVVElPTl9QT0lOVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjYXNlIE9OTFlfQ09OVEFJTlNfVVNFUl9DRVJUUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIE9OTFlfQ09OVEFJTlNfQ0FfQ0VSVFM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSBPTkxZX1NPTUVfUkVBU09OOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgY2FzZSBJTkRJUkVDVF9DUkw6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSBPTkxZX0NPTlRBSU5TX0FUVFJJQlVURV9DRVJUUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5kaXN0cmlidXRpb25Qb2ludCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5kaXN0cmlidXRpb25Qb2ludE5hbWVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBHZW5lcmFsTmFtZS5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5kaXN0cmlidXRpb25Qb2ludCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcy5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLm9ubHlDb250YWluc1VzZXJDZXJ0cyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLm9ubHlDb250YWluc0NBQ2VydHMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAyXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5vbmx5U29tZVJlYXNvbnMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5pbmRpcmVjdENSTCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLm9ubHlDb250YWluc0F0dHJpYnV0ZUNlcnRzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogNVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxaSk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGRpc3RyaWJ1dGlvblBvaW50OiBESVNUUklCVVRJT05fUE9JTlQsXG4gICAgICAgICAgICAgICAgZGlzdHJpYnV0aW9uUG9pbnROYW1lczogRElTVFJJQlVUSU9OX1BPSU5UX05BTUVTLFxuICAgICAgICAgICAgICAgIG9ubHlDb250YWluc1VzZXJDZXJ0czogT05MWV9DT05UQUlOU19VU0VSX0NFUlRTLFxuICAgICAgICAgICAgICAgIG9ubHlDb250YWluc0NBQ2VydHM6IE9OTFlfQ09OVEFJTlNfQ0FfQ0VSVFMsXG4gICAgICAgICAgICAgICAgb25seVNvbWVSZWFzb25zOiBPTkxZX1NPTUVfUkVBU09OLFxuICAgICAgICAgICAgICAgIGluZGlyZWN0Q1JMOiBJTkRJUkVDVF9DUkwsXG4gICAgICAgICAgICAgICAgb25seUNvbnRhaW5zQXR0cmlidXRlQ2VydHM6IE9OTFlfQ09OVEFJTlNfQVRUUklCVVRFX0NFUlRTXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKERJU1RSSUJVVElPTl9QT0lOVCBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAoYXNuMS5yZXN1bHQuZGlzdHJpYnV0aW9uUG9pbnQuaWRCbG9jay50YWdOdW1iZXIgPT09IDApOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3RyaWJ1dGlvblBvaW50ID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5kaXN0cmlidXRpb25Qb2ludE5hbWVzLCBlbGVtZW50ID0+IG5ldyBHZW5lcmFsTmFtZSh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgKGFzbjEucmVzdWx0LmRpc3RyaWJ1dGlvblBvaW50LmlkQmxvY2sudGFnTnVtYmVyID09PSAxKTpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXN0cmlidXRpb25Qb2ludCA9IG5ldyBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFzbjEucmVzdWx0LmRpc3RyaWJ1dGlvblBvaW50LnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0YWdOdW1iZXIgZm9yIGRpc3RyaWJ1dGlvblBvaW50OiB7JGFzbjEucmVzdWx0LmRpc3RyaWJ1dGlvblBvaW50LmlkQmxvY2sudGFnTnVtYmVyfVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoT05MWV9DT05UQUlOU19VU0VSX0NFUlRTIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYXNuMS5yZXN1bHQub25seUNvbnRhaW5zVXNlckNlcnRzLnZhbHVlQmxvY2sudmFsdWVIZXgpO1xuICAgICAgICAgICAgdGhpcy5vbmx5Q29udGFpbnNVc2VyQ2VydHMgPSAodmlld1swXSAhPT0gMHgwMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9OTFlfQ09OVEFJTlNfQ0FfQ0VSVFMgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShhc24xLnJlc3VsdC5vbmx5Q29udGFpbnNDQUNlcnRzLnZhbHVlQmxvY2sudmFsdWVIZXgpO1xuICAgICAgICAgICAgdGhpcy5vbmx5Q29udGFpbnNDQUNlcnRzID0gKHZpZXdbMF0gIT09IDB4MDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPTkxZX1NPTUVfUkVBU09OIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYXNuMS5yZXN1bHQub25seVNvbWVSZWFzb25zLnZhbHVlQmxvY2sudmFsdWVIZXgpO1xuICAgICAgICAgICAgdGhpcy5vbmx5U29tZVJlYXNvbnMgPSB2aWV3WzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChJTkRJUkVDVF9DUkwgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShhc24xLnJlc3VsdC5pbmRpcmVjdENSTC52YWx1ZUJsb2NrLnZhbHVlSGV4KTtcbiAgICAgICAgICAgIHRoaXMuaW5kaXJlY3RDUkwgPSAodmlld1swXSAhPT0gMHgwMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9OTFlfQ09OVEFJTlNfQVRUUklCVVRFX0NFUlRTIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYXNuMS5yZXN1bHQub25seUNvbnRhaW5zQXR0cmlidXRlQ2VydHMudmFsdWVCbG9jay52YWx1ZUhleCk7XG4gICAgICAgICAgICB0aGlzLm9ubHlDb250YWluc0F0dHJpYnV0ZUNlcnRzID0gKHZpZXdbMF0gIT09IDB4MDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBpZiAodGhpcy5kaXN0cmlidXRpb25Qb2ludCkge1xuICAgICAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlzdHJpYnV0aW9uUG9pbnQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuZGlzdHJpYnV0aW9uUG9pbnQsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmRpc3RyaWJ1dGlvblBvaW50LnRvU2NoZW1hKCk7XG4gICAgICAgICAgICAgICAgdmFsdWUuaWRCbG9jay50YWdDbGFzcyA9IDM7XG4gICAgICAgICAgICAgICAgdmFsdWUuaWRCbG9jay50YWdOdW1iZXIgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbdmFsdWVdXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25seUNvbnRhaW5zVXNlckNlcnRzICE9PSBJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQuZGVmYXVsdFZhbHVlcyhPTkxZX0NPTlRBSU5TX1VTRVJfQ0VSVFMpKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlSGV4OiAobmV3IFVpbnQ4QXJyYXkoWzB4RkZdKSkuYnVmZmVyXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25seUNvbnRhaW5zQ0FDZXJ0cyAhPT0gSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LmRlZmF1bHRWYWx1ZXMoT05MWV9DT05UQUlOU19DQV9DRVJUUykpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWVIZXg6IChuZXcgVWludDhBcnJheShbMHhGRl0pKS5idWZmZXJcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vbmx5U29tZVJlYXNvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDEpO1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgICB2aWV3WzBdID0gdGhpcy5vbmx5U29tZVJlYXNvbnM7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlSGV4OiBidWZmZXJcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmRpcmVjdENSTCAhPT0gSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LmRlZmF1bHRWYWx1ZXMoSU5ESVJFQ1RfQ1JMKSkge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiA0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZUhleDogKG5ldyBVaW50OEFycmF5KFsweEZGXSkpLmJ1ZmZlclxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9ubHlDb250YWluc0F0dHJpYnV0ZUNlcnRzICE9PSBJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQuZGVmYXVsdFZhbHVlcyhPTkxZX0NPTlRBSU5TX0FUVFJJQlVURV9DRVJUUykpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogNVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWVIZXg6IChuZXcgVWludDhBcnJheShbMHhGRl0pKS5idWZmZXJcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuZGlzdHJpYnV0aW9uUG9pbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3RyaWJ1dGlvblBvaW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBvYmouZGlzdHJpYnV0aW9uUG9pbnQgPSBBcnJheS5mcm9tKHRoaXMuZGlzdHJpYnV0aW9uUG9pbnQsIG8gPT4gby50b0pTT04oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYmouZGlzdHJpYnV0aW9uUG9pbnQgPSB0aGlzLmRpc3RyaWJ1dGlvblBvaW50LnRvSlNPTigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9ubHlDb250YWluc1VzZXJDZXJ0cyAhPT0gSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LmRlZmF1bHRWYWx1ZXMoT05MWV9DT05UQUlOU19VU0VSX0NFUlRTKSkge1xuICAgICAgICAgICAgb2JqLm9ubHlDb250YWluc1VzZXJDZXJ0cyA9IHRoaXMub25seUNvbnRhaW5zVXNlckNlcnRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9ubHlDb250YWluc0NBQ2VydHMgIT09IElzc3VpbmdEaXN0cmlidXRpb25Qb2ludC5kZWZhdWx0VmFsdWVzKE9OTFlfQ09OVEFJTlNfQ0FfQ0VSVFMpKSB7XG4gICAgICAgICAgICBvYmoub25seUNvbnRhaW5zQ0FDZXJ0cyA9IHRoaXMub25seUNvbnRhaW5zQ0FDZXJ0cztcbiAgICAgICAgfVxuICAgICAgICBpZiAoT05MWV9TT01FX1JFQVNPTiBpbiB0aGlzKSB7XG4gICAgICAgICAgICBvYmoub25seVNvbWVSZWFzb25zID0gdGhpcy5vbmx5U29tZVJlYXNvbnM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5kaXJlY3RDUkwgIT09IElzc3VpbmdEaXN0cmlidXRpb25Qb2ludC5kZWZhdWx0VmFsdWVzKElORElSRUNUX0NSTCkpIHtcbiAgICAgICAgICAgIG9iai5pbmRpcmVjdENSTCA9IHRoaXMuaW5kaXJlY3RDUkw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25seUNvbnRhaW5zQXR0cmlidXRlQ2VydHMgIT09IElzc3VpbmdEaXN0cmlidXRpb25Qb2ludC5kZWZhdWx0VmFsdWVzKE9OTFlfQ09OVEFJTlNfQVRUUklCVVRFX0NFUlRTKSkge1xuICAgICAgICAgICAgb2JqLm9ubHlDb250YWluc0F0dHJpYnV0ZUNlcnRzID0gdGhpcy5vbmx5Q29udGFpbnNBdHRyaWJ1dGVDZXJ0cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbn1cbklzc3VpbmdEaXN0cmlidXRpb25Qb2ludC5DTEFTU19OQU1FID0gXCJJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnRcIjtcblxuY29uc3QgQkFTRSA9IFwiYmFzZVwiO1xuY29uc3QgTUlOSU1VTSA9IFwibWluaW11bVwiO1xuY29uc3QgTUFYSU1VTSA9IFwibWF4aW11bVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMWggPSBbXG4gICAgQkFTRSxcbiAgICBNSU5JTVVNLFxuICAgIE1BWElNVU1cbl07XG5jbGFzcyBHZW5lcmFsU3VidHJlZSBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuYmFzZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEJBU0UsIEdlbmVyYWxTdWJ0cmVlLmRlZmF1bHRWYWx1ZXMoQkFTRSkpO1xuICAgICAgICB0aGlzLm1pbmltdW0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBNSU5JTVVNLCBHZW5lcmFsU3VidHJlZS5kZWZhdWx0VmFsdWVzKE1JTklNVU0pKTtcbiAgICAgICAgaWYgKE1BWElNVU0gaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5tYXhpbXVtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTUFYSU1VTSwgR2VuZXJhbFN1YnRyZWUuZGVmYXVsdFZhbHVlcyhNQVhJTVVNKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEJBU0U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmFsTmFtZSgpO1xuICAgICAgICAgICAgY2FzZSBNSU5JTVVNOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgY2FzZSBNQVhJTVVNOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBHZW5lcmFsTmFtZS5zY2hlbWEobmFtZXMuYmFzZSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy5taW5pbXVtIHx8IEVNUFRZX1NUUklORykgfSldXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy5tYXhpbXVtIHx8IEVNUFRZX1NUUklORykgfSldXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxaCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgR2VuZXJhbFN1YnRyZWUuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgYmFzZToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBCQVNFXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1pbmltdW06IE1JTklNVU0sXG4gICAgICAgICAgICAgICAgbWF4aW11bTogTUFYSU1VTVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuYmFzZSA9IG5ldyBHZW5lcmFsTmFtZSh7IHNjaGVtYTogYXNuMS5yZXN1bHQuYmFzZSB9KTtcbiAgICAgICAgaWYgKE1JTklNVU0gaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChhc24xLnJlc3VsdC5taW5pbXVtLnZhbHVlQmxvY2suaXNIZXhPbmx5KVxuICAgICAgICAgICAgICAgIHRoaXMubWluaW11bSA9IGFzbjEucmVzdWx0Lm1pbmltdW07XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5taW5pbXVtID0gYXNuMS5yZXN1bHQubWluaW11bS52YWx1ZUJsb2NrLnZhbHVlRGVjO1xuICAgICAgICB9XG4gICAgICAgIGlmIChNQVhJTVVNIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoYXNuMS5yZXN1bHQubWF4aW11bS52YWx1ZUJsb2NrLmlzSGV4T25seSlcbiAgICAgICAgICAgICAgICB0aGlzLm1heGltdW0gPSBhc24xLnJlc3VsdC5tYXhpbXVtO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMubWF4aW11bSA9IGFzbjEucmVzdWx0Lm1heGltdW0udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLmJhc2UudG9TY2hlbWEoKSk7XG4gICAgICAgIGlmICh0aGlzLm1pbmltdW0gIT09IDApIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZU1pbmltdW0gPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMubWluaW11bSBpbnN0YW5jZW9mIGFzbjFqcy5JbnRlZ2VyKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVNaW5pbXVtID0gdGhpcy5taW5pbXVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsdWVNaW5pbXVtID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMubWluaW11bSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW3ZhbHVlTWluaW11bV1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTUFYSU1VTSBpbiB0aGlzKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWVNYXhpbXVtID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLm1heGltdW0gaW5zdGFuY2VvZiBhc24xanMuSW50ZWdlcikge1xuICAgICAgICAgICAgICAgIHZhbHVlTWF4aW11bSA9IHRoaXMubWF4aW11bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlTWF4aW11bSA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLm1heGltdW0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFt2YWx1ZU1heGltdW1dXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgYmFzZTogdGhpcy5iYXNlLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm1pbmltdW0gIT09IDApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5taW5pbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgcmVzLm1pbmltdW0gPSB0aGlzLm1pbmltdW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMubWluaW11bSA9IHRoaXMubWluaW11bS50b0pTT04oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhpbXVtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5tYXhpbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgcmVzLm1heGltdW0gPSB0aGlzLm1heGltdW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMubWF4aW11bSA9IHRoaXMubWF4aW11bS50b0pTT04oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cbkdlbmVyYWxTdWJ0cmVlLkNMQVNTX05BTUUgPSBcIkdlbmVyYWxTdWJ0cmVlXCI7XG5cbmNvbnN0IFBFUk1JVFRFRF9TVUJUUkVFUyA9IFwicGVybWl0dGVkU3VidHJlZXNcIjtcbmNvbnN0IEVYQ0xVREVEX1NVQlRSRUVTID0gXCJleGNsdWRlZFN1YnRyZWVzXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxZyA9IFtcbiAgICBQRVJNSVRURURfU1VCVFJFRVMsXG4gICAgRVhDTFVERURfU1VCVFJFRVNcbl07XG5jbGFzcyBOYW1lQ29uc3RyYWludHMgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoUEVSTUlUVEVEX1NVQlRSRUVTIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMucGVybWl0dGVkU3VidHJlZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQRVJNSVRURURfU1VCVFJFRVMsIE5hbWVDb25zdHJhaW50cy5kZWZhdWx0VmFsdWVzKFBFUk1JVFRFRF9TVUJUUkVFUykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChFWENMVURFRF9TVUJUUkVFUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmV4Y2x1ZGVkU3VidHJlZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFWENMVURFRF9TVUJUUkVFUywgTmFtZUNvbnN0cmFpbnRzLmRlZmF1bHRWYWx1ZXMoRVhDTFVERURfU1VCVFJFRVMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgUEVSTUlUVEVEX1NVQlRSRUVTOlxuICAgICAgICAgICAgY2FzZSBFWENMVURFRF9TVUJUUkVFUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5wZXJtaXR0ZWRTdWJ0cmVlcyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBHZW5lcmFsU3VidHJlZS5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5leGNsdWRlZFN1YnRyZWVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEdlbmVyYWxTdWJ0cmVlLnNjaGVtYSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxZyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgTmFtZUNvbnN0cmFpbnRzLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHBlcm1pdHRlZFN1YnRyZWVzOiBQRVJNSVRURURfU1VCVFJFRVMsXG4gICAgICAgICAgICAgICAgZXhjbHVkZWRTdWJ0cmVlczogRVhDTFVERURfU1VCVFJFRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICBpZiAoUEVSTUlUVEVEX1NVQlRSRUVTIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5wZXJtaXR0ZWRTdWJ0cmVlcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQucGVybWl0dGVkU3VidHJlZXMsIGVsZW1lbnQgPT4gbmV3IEdlbmVyYWxTdWJ0cmVlKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICAgICAgaWYgKEVYQ0xVREVEX1NVQlRSRUVTIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5leGNsdWRlZFN1YnRyZWVzID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5leGNsdWRlZFN1YnRyZWVzLCBlbGVtZW50ID0+IG5ldyBHZW5lcmFsU3VidHJlZSh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBpZiAodGhpcy5wZXJtaXR0ZWRTdWJ0cmVlcykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMucGVybWl0dGVkU3VidHJlZXMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVkU3VidHJlZXMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmV4Y2x1ZGVkU3VidHJlZXMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IG9iamVjdCA9IHt9O1xuICAgICAgICBpZiAodGhpcy5wZXJtaXR0ZWRTdWJ0cmVlcykge1xuICAgICAgICAgICAgb2JqZWN0LnBlcm1pdHRlZFN1YnRyZWVzID0gQXJyYXkuZnJvbSh0aGlzLnBlcm1pdHRlZFN1YnRyZWVzLCBvID0+IG8udG9KU09OKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVkU3VidHJlZXMpIHtcbiAgICAgICAgICAgIG9iamVjdC5leGNsdWRlZFN1YnRyZWVzID0gQXJyYXkuZnJvbSh0aGlzLmV4Y2x1ZGVkU3VidHJlZXMsIG8gPT4gby50b0pTT04oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG59XG5OYW1lQ29uc3RyYWludHMuQ0xBU1NfTkFNRSA9IFwiTmFtZUNvbnN0cmFpbnRzXCI7XG5cbmNvbnN0IFJFUVVJUkVfRVhQTElDSVRfUE9MSUNZID0gXCJyZXF1aXJlRXhwbGljaXRQb2xpY3lcIjtcbmNvbnN0IElOSElCSVRfUE9MSUNZX01BUFBJTkcgPSBcImluaGliaXRQb2xpY3lNYXBwaW5nXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxZiA9IFtcbiAgICBSRVFVSVJFX0VYUExJQ0lUX1BPTElDWSxcbiAgICBJTkhJQklUX1BPTElDWV9NQVBQSU5HLFxuXTtcbmNsYXNzIFBvbGljeUNvbnN0cmFpbnRzIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKFJFUVVJUkVfRVhQTElDSVRfUE9MSUNZIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZUV4cGxpY2l0UG9saWN5ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVRVUlSRV9FWFBMSUNJVF9QT0xJQ1ksIFBvbGljeUNvbnN0cmFpbnRzLmRlZmF1bHRWYWx1ZXMoUkVRVUlSRV9FWFBMSUNJVF9QT0xJQ1kpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSU5ISUJJVF9QT0xJQ1lfTUFQUElORyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmluaGliaXRQb2xpY3lNYXBwaW5nID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgSU5ISUJJVF9QT0xJQ1lfTUFQUElORywgUG9saWN5Q29uc3RyYWludHMuZGVmYXVsdFZhbHVlcyhJTkhJQklUX1BPTElDWV9NQVBQSU5HKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFJFUVVJUkVfRVhQTElDSVRfUE9MSUNZOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgY2FzZSBJTkhJQklUX1BPTElDWV9NQVBQSU5HOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5yZXF1aXJlRXhwbGljaXRQb2xpY3kgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5pbmhpYml0UG9saWN5TWFwcGluZyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMWYpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFBvbGljeUNvbnN0cmFpbnRzLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVFeHBsaWNpdFBvbGljeTogUkVRVUlSRV9FWFBMSUNJVF9QT0xJQ1ksXG4gICAgICAgICAgICAgICAgaW5oaWJpdFBvbGljeU1hcHBpbmc6IElOSElCSVRfUE9MSUNZX01BUFBJTkdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICBpZiAoUkVRVUlSRV9FWFBMSUNJVF9QT0xJQ1kgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkMSA9IGFzbjEucmVzdWx0LnJlcXVpcmVFeHBsaWNpdFBvbGljeTtcbiAgICAgICAgICAgIGZpZWxkMS5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgICAgIGZpZWxkMS5pZEJsb2NrLnRhZ051bWJlciA9IDI7XG4gICAgICAgICAgICBjb25zdCBiZXIxID0gZmllbGQxLnRvQkVSKGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGludDEgPSBhc24xanMuZnJvbUJFUihiZXIxKTtcbiAgICAgICAgICAgIEFzbkVycm9yLmFzc2VydChpbnQxLCBcIkludGVnZXJcIik7XG4gICAgICAgICAgICB0aGlzLnJlcXVpcmVFeHBsaWNpdFBvbGljeSA9IGludDEucmVzdWx0LnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKElOSElCSVRfUE9MSUNZX01BUFBJTkcgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkMiA9IGFzbjEucmVzdWx0LmluaGliaXRQb2xpY3lNYXBwaW5nO1xuICAgICAgICAgICAgZmllbGQyLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICAgICAgZmllbGQyLmlkQmxvY2sudGFnTnVtYmVyID0gMjtcbiAgICAgICAgICAgIGNvbnN0IGJlcjIgPSBmaWVsZDIudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgY29uc3QgaW50MiA9IGFzbjFqcy5mcm9tQkVSKGJlcjIpO1xuICAgICAgICAgICAgQXNuRXJyb3IuYXNzZXJ0KGludDIsIFwiSW50ZWdlclwiKTtcbiAgICAgICAgICAgIHRoaXMuaW5oaWJpdFBvbGljeU1hcHBpbmcgPSBpbnQyLnJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlRGVjO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBpZiAoUkVRVUlSRV9FWFBMSUNJVF9QT0xJQ1kgaW4gdGhpcykge1xuICAgICAgICAgICAgY29uc3QgaW50MSA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLnJlcXVpcmVFeHBsaWNpdFBvbGljeSB9KTtcbiAgICAgICAgICAgIGludDEuaWRCbG9jay50YWdDbGFzcyA9IDM7XG4gICAgICAgICAgICBpbnQxLmlkQmxvY2sudGFnTnVtYmVyID0gMDtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2goaW50MSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKElOSElCSVRfUE9MSUNZX01BUFBJTkcgaW4gdGhpcykge1xuICAgICAgICAgICAgY29uc3QgaW50MiA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLmluaGliaXRQb2xpY3lNYXBwaW5nIH0pO1xuICAgICAgICAgICAgaW50Mi5pZEJsb2NrLnRhZ0NsYXNzID0gMztcbiAgICAgICAgICAgIGludDIuaWRCbG9jay50YWdOdW1iZXIgPSAxO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChpbnQyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7fTtcbiAgICAgICAgaWYgKFJFUVVJUkVfRVhQTElDSVRfUE9MSUNZIGluIHRoaXMpIHtcbiAgICAgICAgICAgIHJlcy5yZXF1aXJlRXhwbGljaXRQb2xpY3kgPSB0aGlzLnJlcXVpcmVFeHBsaWNpdFBvbGljeTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSU5ISUJJVF9QT0xJQ1lfTUFQUElORyBpbiB0aGlzKSB7XG4gICAgICAgICAgICByZXMuaW5oaWJpdFBvbGljeU1hcHBpbmcgPSB0aGlzLmluaGliaXRQb2xpY3lNYXBwaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuUG9saWN5Q29uc3RyYWludHMuQ0xBU1NfTkFNRSA9IFwiUG9saWN5Q29uc3RyYWludHNcIjtcblxuY29uc3QgSVNTVUVSX0RPTUFJTl9QT0xJQ1kgPSBcImlzc3VlckRvbWFpblBvbGljeVwiO1xuY29uc3QgU1VCSkVDVF9ET01BSU5fUE9MSUNZID0gXCJzdWJqZWN0RG9tYWluUG9saWN5XCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxZSA9IFtcbiAgICBJU1NVRVJfRE9NQUlOX1BPTElDWSxcbiAgICBTVUJKRUNUX0RPTUFJTl9QT0xJQ1lcbl07XG5jbGFzcyBQb2xpY3lNYXBwaW5nIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXJEb21haW5Qb2xpY3kgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBJU1NVRVJfRE9NQUlOX1BPTElDWSwgUG9saWN5TWFwcGluZy5kZWZhdWx0VmFsdWVzKElTU1VFUl9ET01BSU5fUE9MSUNZKSk7XG4gICAgICAgIHRoaXMuc3ViamVjdERvbWFpblBvbGljeSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNVQkpFQ1RfRE9NQUlOX1BPTElDWSwgUG9saWN5TWFwcGluZy5kZWZhdWx0VmFsdWVzKFNVQkpFQ1RfRE9NQUlOX1BPTElDWSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgSVNTVUVSX0RPTUFJTl9QT0xJQ1k6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgU1VCSkVDVF9ET01BSU5fUE9MSUNZOlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IG5hbWU6IChuYW1lcy5pc3N1ZXJEb21haW5Qb2xpY3kgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyBuYW1lOiAobmFtZXMuc3ViamVjdERvbWFpblBvbGljeSB8fCBFTVBUWV9TVFJJTkcpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMWUpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFBvbGljeU1hcHBpbmcuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVyRG9tYWluUG9saWN5OiBJU1NVRVJfRE9NQUlOX1BPTElDWSxcbiAgICAgICAgICAgICAgICBzdWJqZWN0RG9tYWluUG9saWN5OiBTVUJKRUNUX0RPTUFJTl9QT0xJQ1lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmlzc3VlckRvbWFpblBvbGljeSA9IGFzbjEucmVzdWx0Lmlzc3VlckRvbWFpblBvbGljeS52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuc3ViamVjdERvbWFpblBvbGljeSA9IGFzbjEucmVzdWx0LnN1YmplY3REb21haW5Qb2xpY3kudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IHRoaXMuaXNzdWVyRG9tYWluUG9saWN5IH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiB0aGlzLnN1YmplY3REb21haW5Qb2xpY3kgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc3N1ZXJEb21haW5Qb2xpY3k6IHRoaXMuaXNzdWVyRG9tYWluUG9saWN5LFxuICAgICAgICAgICAgc3ViamVjdERvbWFpblBvbGljeTogdGhpcy5zdWJqZWN0RG9tYWluUG9saWN5XG4gICAgICAgIH07XG4gICAgfVxufVxuUG9saWN5TWFwcGluZy5DTEFTU19OQU1FID0gXCJQb2xpY3lNYXBwaW5nXCI7XG5cbmNvbnN0IE1BUFBJTkdTID0gXCJtYXBwaW5nc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMWQgPSBbXG4gICAgTUFQUElOR1MsXG5dO1xuY2xhc3MgUG9saWN5TWFwcGluZ3MgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm1hcHBpbmdzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTUFQUElOR1MsIFBvbGljeU1hcHBpbmdzLmRlZmF1bHRWYWx1ZXMoTUFQUElOR1MpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIE1BUFBJTkdTOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5tYXBwaW5ncyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogUG9saWN5TWFwcGluZy5zY2hlbWEoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMWQpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFBvbGljeU1hcHBpbmdzLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIG1hcHBpbmdzOiBNQVBQSU5HU1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMubWFwcGluZ3MgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0Lm1hcHBpbmdzLCBlbGVtZW50ID0+IG5ldyBQb2xpY3lNYXBwaW5nKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLm1hcHBpbmdzLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYXBwaW5nczogQXJyYXkuZnJvbSh0aGlzLm1hcHBpbmdzLCBvID0+IG8udG9KU09OKCkpXG4gICAgICAgIH07XG4gICAgfVxufVxuUG9saWN5TWFwcGluZ3MuQ0xBU1NfTkFNRSA9IFwiUG9saWN5TWFwcGluZ3NcIjtcblxuY29uc3QgTk9UX0JFRk9SRSQxID0gXCJub3RCZWZvcmVcIjtcbmNvbnN0IE5PVF9BRlRFUiQxID0gXCJub3RBZnRlclwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMWMgPSBbXG4gICAgTk9UX0JFRk9SRSQxLFxuICAgIE5PVF9BRlRFUiQxXG5dO1xuY2xhc3MgUHJpdmF0ZUtleVVzYWdlUGVyaW9kIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKE5PVF9CRUZPUkUkMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm5vdEJlZm9yZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE5PVF9CRUZPUkUkMSwgUHJpdmF0ZUtleVVzYWdlUGVyaW9kLmRlZmF1bHRWYWx1ZXMoTk9UX0JFRk9SRSQxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE5PVF9BRlRFUiQxIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMubm90QWZ0ZXIgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBOT1RfQUZURVIkMSwgUHJpdmF0ZUtleVVzYWdlUGVyaW9kLmRlZmF1bHRWYWx1ZXMoTk9UX0FGVEVSJDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgTk9UX0JFRk9SRSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgY2FzZSBOT1RfQUZURVIkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMubm90QmVmb3JlIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMubm90QWZ0ZXIgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDFjKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBQcml2YXRlS2V5VXNhZ2VQZXJpb2Quc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgbm90QmVmb3JlOiBOT1RfQkVGT1JFJDEsXG4gICAgICAgICAgICAgICAgbm90QWZ0ZXI6IE5PVF9BRlRFUiQxXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKE5PVF9CRUZPUkUkMSBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxOb3RCZWZvcmUgPSBuZXcgYXNuMWpzLkdlbmVyYWxpemVkVGltZSgpO1xuICAgICAgICAgICAgbG9jYWxOb3RCZWZvcmUuZnJvbUJ1ZmZlcihhc24xLnJlc3VsdC5ub3RCZWZvcmUudmFsdWVCbG9jay52YWx1ZUhleCk7XG4gICAgICAgICAgICB0aGlzLm5vdEJlZm9yZSA9IGxvY2FsTm90QmVmb3JlLnRvRGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOT1RfQUZURVIkMSBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxOb3RBZnRlciA9IG5ldyBhc24xanMuR2VuZXJhbGl6ZWRUaW1lKHsgdmFsdWVIZXg6IGFzbjEucmVzdWx0Lm5vdEFmdGVyLnZhbHVlQmxvY2sudmFsdWVIZXggfSk7XG4gICAgICAgICAgICBsb2NhbE5vdEFmdGVyLmZyb21CdWZmZXIoYXNuMS5yZXN1bHQubm90QWZ0ZXIudmFsdWVCbG9jay52YWx1ZUhleCk7XG4gICAgICAgICAgICB0aGlzLm5vdEFmdGVyID0gbG9jYWxOb3RBZnRlci50b0RhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgaWYgKE5PVF9CRUZPUkUkMSBpbiB0aGlzKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlSGV4OiAobmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyB2YWx1ZURhdGU6IHRoaXMubm90QmVmb3JlIH0pKS52YWx1ZUJsb2NrLnZhbHVlSGV4Vmlld1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOT1RfQUZURVIkMSBpbiB0aGlzKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlSGV4OiAobmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyB2YWx1ZURhdGU6IHRoaXMubm90QWZ0ZXIgfSkpLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge307XG4gICAgICAgIGlmICh0aGlzLm5vdEJlZm9yZSkge1xuICAgICAgICAgICAgcmVzLm5vdEJlZm9yZSA9IHRoaXMubm90QmVmb3JlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vdEFmdGVyKSB7XG4gICAgICAgICAgICByZXMubm90QWZ0ZXIgPSB0aGlzLm5vdEFmdGVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuUHJpdmF0ZUtleVVzYWdlUGVyaW9kLkNMQVNTX05BTUUgPSBcIlByaXZhdGVLZXlVc2FnZVBlcmlvZFwiO1xuXG5jb25zdCBJRCA9IFwiaWRcIjtcbmNvbnN0IFRZUEUkMiA9IFwidHlwZVwiO1xuY29uc3QgVkFMVUVTID0gXCJ2YWx1ZXNcIjtcbmNvbnN0IFFDX1NUQVRFTUVOVF9DTEVBUl9QUk9QUyA9IFtcbiAgICBJRCxcbiAgICBUWVBFJDJcbl07XG5jb25zdCBRQ19TVEFURU1FTlRTX0NMRUFSX1BST1BTID0gW1xuICAgIFZBTFVFU1xuXTtcbmNsYXNzIFFDU3RhdGVtZW50IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElELCBRQ1N0YXRlbWVudC5kZWZhdWx0VmFsdWVzKElEKSk7XG4gICAgICAgIGlmIChUWVBFJDIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy50eXBlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVFlQRSQyLCBRQ1N0YXRlbWVudC5kZWZhdWx0VmFsdWVzKFRZUEUkMikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBJRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBUWVBFJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuTnVsbCgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBJRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSBFTVBUWV9TVFJJTkcpO1xuICAgICAgICAgICAgY2FzZSBUWVBFJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSBpbnN0YW5jZW9mIGFzbjFqcy5OdWxsKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLmlkIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Bbnkoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMudHlwZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgUUNfU1RBVEVNRU5UX0NMRUFSX1BST1BTKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBRQ1N0YXRlbWVudC5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBpZDogSUQsXG4gICAgICAgICAgICAgICAgdHlwZTogVFlQRSQyXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5pZCA9IGFzbjEucmVzdWx0LmlkLnZhbHVlQmxvY2sudG9TdHJpbmcoKTtcbiAgICAgICAgaWYgKFRZUEUkMiBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGFzbjEucmVzdWx0LnR5cGU7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IFtcbiAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiB0aGlzLmlkIH0pXG4gICAgICAgIF07XG4gICAgICAgIGlmIChUWVBFJDIgaW4gdGhpcylcbiAgICAgICAgICAgIHZhbHVlLnB1c2godGhpcy50eXBlKTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgb2JqZWN0ID0ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuaWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMudHlwZSkge1xuICAgICAgICAgICAgb2JqZWN0LnR5cGUgPSB0aGlzLnR5cGUudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG59XG5RQ1N0YXRlbWVudC5DTEFTU19OQU1FID0gXCJRQ1N0YXRlbWVudFwiO1xuY2xhc3MgUUNTdGF0ZW1lbnRzIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWQUxVRVMsIFFDU3RhdGVtZW50cy5kZWZhdWx0VmFsdWVzKFZBTFVFUykpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkFMVUVTOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkFMVUVTOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy52YWx1ZXMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFFDU3RhdGVtZW50LnNjaGVtYShuYW1lcy52YWx1ZSB8fCB7fSlcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBRQ19TVEFURU1FTlRTX0NMRUFSX1BST1BTKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBRQ1N0YXRlbWVudHMuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBWQUxVRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQudmFsdWVzLCBlbGVtZW50ID0+IG5ldyBRQ1N0YXRlbWVudCh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy52YWx1ZXMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlczogQXJyYXkuZnJvbSh0aGlzLnZhbHVlcywgbyA9PiBvLnRvSlNPTigpKVxuICAgICAgICB9O1xuICAgIH1cbn1cblFDU3RhdGVtZW50cy5DTEFTU19OQU1FID0gXCJRQ1N0YXRlbWVudHNcIjtcblxudmFyIF9hO1xuY2xhc3MgRUNOYW1lZEN1cnZlcyB7XG4gICAgc3RhdGljIHJlZ2lzdGVyKG5hbWUsIGlkLCBzaXplKSB7XG4gICAgICAgIHRoaXMubmFtZWRDdXJ2ZXNbbmFtZS50b0xvd2VyQ2FzZSgpXSA9IHRoaXMubmFtZWRDdXJ2ZXNbaWRdID0geyBuYW1lLCBpZCwgc2l6ZSB9O1xuICAgIH1cbiAgICBzdGF0aWMgZmluZChuYW1lT3JJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lZEN1cnZlc1tuYW1lT3JJZC50b0xvd2VyQ2FzZSgpXSB8fCBudWxsO1xuICAgIH1cbn1cbl9hID0gRUNOYW1lZEN1cnZlcztcbkVDTmFtZWRDdXJ2ZXMubmFtZWRDdXJ2ZXMgPSB7fTtcbigoKSA9PiB7XG4gICAgX2EucmVnaXN0ZXIoXCJQLTI1NlwiLCBcIjEuMi44NDAuMTAwNDUuMy4xLjdcIiwgMzIpO1xuICAgIF9hLnJlZ2lzdGVyKFwiUC0zODRcIiwgXCIxLjMuMTMyLjAuMzRcIiwgNDgpO1xuICAgIF9hLnJlZ2lzdGVyKFwiUC01MjFcIiwgXCIxLjMuMTMyLjAuMzVcIiwgNjYpO1xuICAgIF9hLnJlZ2lzdGVyKFwiYnJhaW5wb29sUDI1NnIxXCIsIFwiMS4zLjM2LjMuMy4yLjguMS4xLjdcIiwgMzIpO1xuICAgIF9hLnJlZ2lzdGVyKFwiYnJhaW5wb29sUDM4NHIxXCIsIFwiMS4zLjM2LjMuMy4yLjguMS4xLjExXCIsIDQ4KTtcbiAgICBfYS5yZWdpc3RlcihcImJyYWlucG9vbFA1MTJyMVwiLCBcIjEuMy4zNi4zLjMuMi44LjEuMS4xM1wiLCA2NCk7XG59KSgpO1xuXG5jb25zdCBYID0gXCJ4XCI7XG5jb25zdCBZID0gXCJ5XCI7XG5jb25zdCBOQU1FRF9DVVJWRSQxID0gXCJuYW1lZEN1cnZlXCI7XG5jbGFzcyBFQ1B1YmxpY0tleSBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMueCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFgsIEVDUHVibGljS2V5LmRlZmF1bHRWYWx1ZXMoWCkpO1xuICAgICAgICB0aGlzLnkgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBZLCBFQ1B1YmxpY0tleS5kZWZhdWx0VmFsdWVzKFkpKTtcbiAgICAgICAgdGhpcy5uYW1lZEN1cnZlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTkFNRURfQ1VSVkUkMSwgRUNQdWJsaWNLZXkuZGVmYXVsdFZhbHVlcyhOQU1FRF9DVVJWRSQxKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLmpzb24pIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbUpTT04ocGFyYW1ldGVycy5qc29uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgWDpcbiAgICAgICAgICAgIGNhc2UgWTpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICAgICAgY2FzZSBOQU1FRF9DVVJWRSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFg6XG4gICAgICAgICAgICBjYXNlIFk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lbWJlclZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgKHB2dXRpbHMuaXNFcXVhbEJ1ZmZlcihtZW1iZXJWYWx1ZSwgRUNQdWJsaWNLZXkuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSkpO1xuICAgICAgICAgICAgY2FzZSBOQU1FRF9DVVJWRSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgbWVtYmVyVmFsdWUgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyVmFsdWUgPT09IEVDUHVibGljS2V5LmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiBuZXcgYXNuMWpzLlJhd0RhdGEoKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWExKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBCdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9VaW50OEFycmF5KHNjaGVtYTEpO1xuICAgICAgICBpZiAodmlld1swXSAhPT0gMHgwNCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT2JqZWN0J3Mgc2NoZW1hIHdhcyBub3QgdmVyaWZpZWQgYWdhaW5zdCBpbnB1dCBkYXRhIGZvciBFQ1B1YmxpY0tleVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYW1lZEN1cnZlID0gRUNOYW1lZEN1cnZlcy5maW5kKHRoaXMubmFtZWRDdXJ2ZSk7XG4gICAgICAgIGlmICghbmFtZWRDdXJ2ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgY3VydmUgT0lEOiAke3RoaXMubmFtZWRDdXJ2ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb29yZGluYXRlTGVuZ3RoID0gbmFtZWRDdXJ2ZS5zaXplO1xuICAgICAgICBpZiAodmlldy5ieXRlTGVuZ3RoICE9PSAoY29vcmRpbmF0ZUxlbmd0aCAqIDIgKyAxKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT2JqZWN0J3Mgc2NoZW1hIHdhcyBub3QgdmVyaWZpZWQgYWdhaW5zdCBpbnB1dCBkYXRhIGZvciBFQ1B1YmxpY0tleVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWVkQ3VydmUgPSBuYW1lZEN1cnZlLm5hbWU7XG4gICAgICAgIHRoaXMueCA9IHZpZXcuc2xpY2UoMSwgY29vcmRpbmF0ZUxlbmd0aCArIDEpLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy55ID0gdmlldy5zbGljZSgxICsgY29vcmRpbmF0ZUxlbmd0aCwgY29vcmRpbmF0ZUxlbmd0aCAqIDIgKyAxKS5idWZmZXI7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5SYXdEYXRhKHtcbiAgICAgICAgICAgIGRhdGE6IHB2dXRpbHMudXRpbENvbmNhdEJ1ZigobmV3IFVpbnQ4QXJyYXkoWzB4MDRdKSkuYnVmZmVyLCB0aGlzLngsIHRoaXMueSlcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgbmFtZWRDdXJ2ZSA9IEVDTmFtZWRDdXJ2ZXMuZmluZCh0aGlzLm5hbWVkQ3VydmUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3J2OiBuYW1lZEN1cnZlID8gbmFtZWRDdXJ2ZS5uYW1lIDogdGhpcy5uYW1lZEN1cnZlLFxuICAgICAgICAgICAgeDogcHZ1dGlscy50b0Jhc2U2NChwdnV0aWxzLmFycmF5QnVmZmVyVG9TdHJpbmcodGhpcy54KSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UpLFxuICAgICAgICAgICAgeTogcHZ1dGlscy50b0Jhc2U2NChwdnV0aWxzLmFycmF5QnVmZmVyVG9TdHJpbmcodGhpcy55KSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0KFwianNvblwiLCBqc29uLCBcImNydlwiLCBcInhcIiwgXCJ5XCIpO1xuICAgICAgICBsZXQgY29vcmRpbmF0ZUxlbmd0aCA9IDA7XG4gICAgICAgIGNvbnN0IG5hbWVkQ3VydmUgPSBFQ05hbWVkQ3VydmVzLmZpbmQoanNvbi5jcnYpO1xuICAgICAgICBpZiAobmFtZWRDdXJ2ZSkge1xuICAgICAgICAgICAgdGhpcy5uYW1lZEN1cnZlID0gbmFtZWRDdXJ2ZS5pZDtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVMZW5ndGggPSBuYW1lZEN1cnZlLnNpemU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeENvbnZlcnRCdWZmZXIgPSBwdnV0aWxzLnN0cmluZ1RvQXJyYXlCdWZmZXIocHZ1dGlscy5mcm9tQmFzZTY0KGpzb24ueCwgdHJ1ZSkpO1xuICAgICAgICBpZiAoeENvbnZlcnRCdWZmZXIuYnl0ZUxlbmd0aCA8IGNvb3JkaW5hdGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMueCA9IG5ldyBBcnJheUJ1ZmZlcihjb29yZGluYXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLngpO1xuICAgICAgICAgICAgY29uc3QgY29udmVydEJ1ZmZlclZpZXcgPSBuZXcgVWludDhBcnJheSh4Q29udmVydEJ1ZmZlcik7XG4gICAgICAgICAgICB2aWV3LnNldChjb252ZXJ0QnVmZmVyVmlldywgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnggPSB4Q29udmVydEJ1ZmZlci5zbGljZSgwLCBjb29yZGluYXRlTGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB5Q29udmVydEJ1ZmZlciA9IHB2dXRpbHMuc3RyaW5nVG9BcnJheUJ1ZmZlcihwdnV0aWxzLmZyb21CYXNlNjQoanNvbi55LCB0cnVlKSk7XG4gICAgICAgIGlmICh5Q29udmVydEJ1ZmZlci5ieXRlTGVuZ3RoIDwgY29vcmRpbmF0ZUxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy55ID0gbmV3IEFycmF5QnVmZmVyKGNvb3JkaW5hdGVMZW5ndGgpO1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMueSk7XG4gICAgICAgICAgICBjb25zdCBjb252ZXJ0QnVmZmVyVmlldyA9IG5ldyBVaW50OEFycmF5KHlDb252ZXJ0QnVmZmVyKTtcbiAgICAgICAgICAgIHZpZXcuc2V0KGNvbnZlcnRCdWZmZXJWaWV3LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMueSA9IHlDb252ZXJ0QnVmZmVyLnNsaWNlKDAsIGNvb3JkaW5hdGVMZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxufVxuRUNQdWJsaWNLZXkuQ0xBU1NfTkFNRSA9IFwiRUNQdWJsaWNLZXlcIjtcblxuY29uc3QgTU9EVUxVUyQxID0gXCJtb2R1bHVzXCI7XG5jb25zdCBQVUJMSUNfRVhQT05FTlQkMSA9IFwicHVibGljRXhwb25lbnRcIjtcbmNvbnN0IENMRUFSX1BST1BTJDFiID0gW01PRFVMVVMkMSwgUFVCTElDX0VYUE9ORU5UJDFdO1xuY2xhc3MgUlNBUHVibGljS2V5IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tb2R1bHVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTU9EVUxVUyQxLCBSU0FQdWJsaWNLZXkuZGVmYXVsdFZhbHVlcyhNT0RVTFVTJDEpKTtcbiAgICAgICAgdGhpcy5wdWJsaWNFeHBvbmVudCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBVQkxJQ19FWFBPTkVOVCQxLCBSU0FQdWJsaWNLZXkuZGVmYXVsdFZhbHVlcyhQVUJMSUNfRVhQT05FTlQkMSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5qc29uKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21KU09OKHBhcmFtZXRlcnMuanNvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIE1PRFVMVVMkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5JbnRlZ2VyKCk7XG4gICAgICAgICAgICBjYXNlIFBVQkxJQ19FWFBPTkVOVCQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLm1vZHVsdXMgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMucHVibGljRXhwb25lbnQgfHwgRU1QVFlfU1RSSU5HKSB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDFiKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBSU0FQdWJsaWNLZXkuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgbW9kdWx1czogTU9EVUxVUyQxLFxuICAgICAgICAgICAgICAgIHB1YmxpY0V4cG9uZW50OiBQVUJMSUNfRVhQT05FTlQkMVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMubW9kdWx1cyA9IGFzbjEucmVzdWx0Lm1vZHVsdXMuY29udmVydEZyb21ERVIoMjU2KTtcbiAgICAgICAgdGhpcy5wdWJsaWNFeHBvbmVudCA9IGFzbjEucmVzdWx0LnB1YmxpY0V4cG9uZW50O1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5tb2R1bHVzLmNvbnZlcnRUb0RFUigpLFxuICAgICAgICAgICAgICAgIHRoaXMucHVibGljRXhwb25lbnRcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuOiBwdnRzdXRpbHMuQ29udmVydC5Ub0Jhc2U2NFVybCh0aGlzLm1vZHVsdXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpLFxuICAgICAgICAgICAgZTogcHZ0c3V0aWxzLkNvbnZlcnQuVG9CYXNlNjRVcmwodGhpcy5wdWJsaWNFeHBvbmVudC52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldyksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0KFwianNvblwiLCBqc29uLCBcIm5cIiwgXCJlXCIpO1xuICAgICAgICBjb25zdCBhcnJheSA9IHB2dXRpbHMuc3RyaW5nVG9BcnJheUJ1ZmZlcihwdnV0aWxzLmZyb21CYXNlNjQoanNvbi5uLCB0cnVlKSk7XG4gICAgICAgIHRoaXMubW9kdWx1cyA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlSGV4OiBhcnJheS5zbGljZSgwLCBNYXRoLnBvdygyLCBwdnV0aWxzLm5lYXJlc3RQb3dlck9mMihhcnJheS5ieXRlTGVuZ3RoKSkpIH0pO1xuICAgICAgICB0aGlzLnB1YmxpY0V4cG9uZW50ID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWVIZXg6IHB2dXRpbHMuc3RyaW5nVG9BcnJheUJ1ZmZlcihwdnV0aWxzLmZyb21CYXNlNjQoanNvbi5lLCB0cnVlKSkuc2xpY2UoMCwgMykgfSk7XG4gICAgfVxufVxuUlNBUHVibGljS2V5LkNMQVNTX05BTUUgPSBcIlJTQVB1YmxpY0tleVwiO1xuXG5jb25zdCBBTEdPUklUSE0kMSA9IFwiYWxnb3JpdGhtXCI7XG5jb25zdCBTVUJKRUNUX1BVQkxJQ19LRVkgPSBcInN1YmplY3RQdWJsaWNLZXlcIjtcbmNvbnN0IENMRUFSX1BST1BTJDFhID0gW0FMR09SSVRITSQxLCBTVUJKRUNUX1BVQkxJQ19LRVldO1xuY2xhc3MgUHVibGljS2V5SW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgZ2V0IHBhcnNlZEtleSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BhcnNlZEtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuYWxnb3JpdGhtLmFsZ29yaXRobUlkKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTAwNDUuMi4xXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChcImFsZ29yaXRobVBhcmFtc1wiIGluIHRoaXMuYWxnb3JpdGhtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGdvcml0aG0uYWxnb3JpdGhtUGFyYW1zLmNvbnN0cnVjdG9yLmJsb2NrTmFtZSgpID09PSBhc24xanMuT2JqZWN0SWRlbnRpZmllci5ibG9ja05hbWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlZEtleSA9IG5ldyBFQ1B1YmxpY0tleSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZEN1cnZlOiB0aGlzLmFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMudmFsdWVCbG9jay50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiB0aGlzLnN1YmplY3RQdWJsaWNLZXkudmFsdWVCbG9jay52YWx1ZUhleFZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMTM1NDkuMS4xLjFcIjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHVibGljS2V5QVNOMSA9IGFzbjFqcy5mcm9tQkVSKHRoaXMuc3ViamVjdFB1YmxpY0tleS52YWx1ZUJsb2NrLnZhbHVlSGV4Vmlldyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHVibGljS2V5QVNOMS5vZmZzZXQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VkS2V5ID0gbmV3IFJTQVB1YmxpY0tleSh7IHNjaGVtYTogcHVibGljS2V5QVNOMS5yZXN1bHQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3BhcnNlZEtleSB8fCAodGhpcy5fcGFyc2VkS2V5ID0gbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlZEtleSB8fCB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHNldCBwYXJzZWRLZXkodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcGFyc2VkS2V5ID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEFMR09SSVRITSQxLCBQdWJsaWNLZXlJbmZvLmRlZmF1bHRWYWx1ZXMoQUxHT1JJVEhNJDEpKTtcbiAgICAgICAgdGhpcy5zdWJqZWN0UHVibGljS2V5ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU1VCSkVDVF9QVUJMSUNfS0VZLCBQdWJsaWNLZXlJbmZvLmRlZmF1bHRWYWx1ZXMoU1VCSkVDVF9QVUJMSUNfS0VZKSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZEtleSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwicGFyc2VkS2V5XCIsIG51bGwpO1xuICAgICAgICBpZiAocGFyc2VkS2V5KSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlZEtleSA9IHBhcnNlZEtleTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5qc29uKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21KU09OKHBhcmFtZXRlcnMuanNvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEFMR09SSVRITSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcigpO1xuICAgICAgICAgICAgY2FzZSBTVUJKRUNUX1BVQkxJQ19LRVk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmFsZ29yaXRobSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc3ViamVjdFB1YmxpY0tleSB8fCBFTVBUWV9TVFJJTkcpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMWEpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFB1YmxpY0tleUluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEFMR09SSVRITSQxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1YmplY3RQdWJsaWNLZXk6IFNVQkpFQ1RfUFVCTElDX0tFWVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuYWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmFsZ29yaXRobSB9KTtcbiAgICAgICAgdGhpcy5zdWJqZWN0UHVibGljS2V5ID0gYXNuMS5yZXN1bHQuc3ViamVjdFB1YmxpY0tleTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIHRoaXMuYWxnb3JpdGhtLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0UHVibGljS2V5XG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyc2VkS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFsZ29yaXRobTogdGhpcy5hbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICAgICAgc3ViamVjdFB1YmxpY0tleTogdGhpcy5zdWJqZWN0UHVibGljS2V5LnRvSlNPTigpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBqd2sgPSB7fTtcbiAgICAgICAgc3dpdGNoICh0aGlzLmFsZ29yaXRobS5hbGdvcml0aG1JZCkge1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTAwNDUuMi4xXCI6XG4gICAgICAgICAgICAgICAgandrLmt0eSA9IFwiRUNcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjExMzU0OS4xLjEuMVwiOlxuICAgICAgICAgICAgICAgIGp3ay5rdHkgPSBcIlJTQVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHB1YmxpY0tleUpXSyA9IHRoaXMucGFyc2VkS2V5LnRvSlNPTigpO1xuICAgICAgICBPYmplY3QuYXNzaWduKGp3aywgcHVibGljS2V5SldLKTtcbiAgICAgICAgcmV0dXJuIGp3aztcbiAgICB9XG4gICAgZnJvbUpTT04oanNvbikge1xuICAgICAgICBpZiAoXCJrdHlcIiBpbiBqc29uKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGpzb24ua3R5LnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiRUNcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRLZXkgPSBuZXcgRUNQdWJsaWNLZXkoeyBqc29uIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBcIjEuMi44NDAuMTAwNDUuMi4xXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiB0aGlzLnBhcnNlZEtleS5uYW1lZEN1cnZlIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiUlNBXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkS2V5ID0gbmV3IFJTQVB1YmxpY0tleSh7IGpzb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5OdWxsKClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB2YWx1ZSBmb3IgXCJrdHlcIiBwYXJhbWV0ZXI6ICR7anNvbi5rdHl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YmplY3RQdWJsaWNLZXkgPSBuZXcgYXNuMWpzLkJpdFN0cmluZyh7IHZhbHVlSGV4OiB0aGlzLnBhcnNlZEtleS50b1NjaGVtYSgpLnRvQkVSKGZhbHNlKSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbXBvcnRLZXkocHVibGljS2V5LCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghcHVibGljS2V5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmVlZCB0byBwcm92aWRlIHB1YmxpY0tleSBpbnB1dCBwYXJhbWV0ZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleHBvcnRlZEtleSA9IGF3YWl0IGNyeXB0by5leHBvcnRLZXkoXCJzcGtpXCIsIHB1YmxpY0tleSk7XG4gICAgICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmZyb21CRVIoZXhwb3J0ZWRLZXkpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEoYXNuMS5yZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGR1cmluZyBpbml0aWFsaXppbmcgb2JqZWN0IGZyb20gc2NoZW1hXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogYCR7ZX1gO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBkdXJpbmcgZXhwb3J0aW5nIHB1YmxpYyBrZXk6ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblB1YmxpY0tleUluZm8uQ0xBU1NfTkFNRSA9IFwiUHVibGljS2V5SW5mb1wiO1xuXG5jb25zdCBWRVJTSU9OJGwgPSBcInZlcnNpb25cIjtcbmNvbnN0IFBSSVZBVEVfS0VZJDEgPSBcInByaXZhdGVLZXlcIjtcbmNvbnN0IE5BTUVEX0NVUlZFID0gXCJuYW1lZEN1cnZlXCI7XG5jb25zdCBQVUJMSUNfS0VZJDEgPSBcInB1YmxpY0tleVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMTkgPSBbXG4gICAgVkVSU0lPTiRsLFxuICAgIFBSSVZBVEVfS0VZJDEsXG4gICAgTkFNRURfQ1VSVkUsXG4gICAgUFVCTElDX0tFWSQxXG5dO1xuY2xhc3MgRUNQcml2YXRlS2V5IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiRsLCBFQ1ByaXZhdGVLZXkuZGVmYXVsdFZhbHVlcyhWRVJTSU9OJGwpKTtcbiAgICAgICAgdGhpcy5wcml2YXRlS2V5ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUFJJVkFURV9LRVkkMSwgRUNQcml2YXRlS2V5LmRlZmF1bHRWYWx1ZXMoUFJJVkFURV9LRVkkMSkpO1xuICAgICAgICBpZiAoTkFNRURfQ1VSVkUgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5uYW1lZEN1cnZlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTkFNRURfQ1VSVkUsIEVDUHJpdmF0ZUtleS5kZWZhdWx0VmFsdWVzKE5BTUVEX0NVUlZFKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBVQkxJQ19LRVkkMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnB1YmxpY0tleSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBVQkxJQ19LRVkkMSwgRUNQcml2YXRlS2V5LmRlZmF1bHRWYWx1ZXMoUFVCTElDX0tFWSQxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuanNvbikge1xuICAgICAgICAgICAgdGhpcy5mcm9tSlNPTihwYXJhbWV0ZXJzLmpzb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJGw6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICBjYXNlIFBSSVZBVEVfS0VZJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgTkFNRURfQ1VSVkU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgUFVCTElDX0tFWSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRUNQdWJsaWNLZXkoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiRsOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IEVDUHJpdmF0ZUtleS5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpKTtcbiAgICAgICAgICAgIGNhc2UgUFJJVkFURV9LRVkkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmlzRXF1YWwoRUNQcml2YXRlS2V5LmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpKTtcbiAgICAgICAgICAgIGNhc2UgTkFNRURfQ1VSVkU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgICAgIGNhc2UgUFVCTElDX0tFWSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKEVDUHVibGljS2V5LmNvbXBhcmVXaXRoRGVmYXVsdChOQU1FRF9DVVJWRSwgbWVtYmVyVmFsdWUubmFtZWRDdXJ2ZSkpICYmXG4gICAgICAgICAgICAgICAgICAgIChFQ1B1YmxpY0tleS5jb21wYXJlV2l0aERlZmF1bHQoXCJ4XCIsIG1lbWJlclZhbHVlLngpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoRUNQdWJsaWNLZXkuY29tcGFyZVdpdGhEZWZhdWx0KFwieVwiLCBtZW1iZXJWYWx1ZS55KSkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMudmVyc2lvbiB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMucHJpdmF0ZUtleSB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IG5hbWU6IChuYW1lcy5uYW1lZEN1cnZlIHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQml0U3RyaW5nKHsgbmFtZTogKG5hbWVzLnB1YmxpY0tleSB8fCBFTVBUWV9TVFJJTkcpIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDE5KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBFQ1ByaXZhdGVLZXkuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogVkVSU0lPTiRsLFxuICAgICAgICAgICAgICAgIHByaXZhdGVLZXk6IFBSSVZBVEVfS0VZJDEsXG4gICAgICAgICAgICAgICAgbmFtZWRDdXJ2ZTogTkFNRURfQ1VSVkUsXG4gICAgICAgICAgICAgICAgcHVibGljS2V5OiBQVUJMSUNfS0VZJDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBhc24xLnJlc3VsdC52ZXJzaW9uLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIHRoaXMucHJpdmF0ZUtleSA9IGFzbjEucmVzdWx0LnByaXZhdGVLZXk7XG4gICAgICAgIGlmIChOQU1FRF9DVVJWRSBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5uYW1lZEN1cnZlID0gYXNuMS5yZXN1bHQubmFtZWRDdXJ2ZS52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBVQkxJQ19LRVkkMSBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3QgcHVibGljS2V5RGF0YSA9IHsgc2NoZW1hOiBhc24xLnJlc3VsdC5wdWJsaWNLZXkudmFsdWVCbG9jay52YWx1ZUhleCB9O1xuICAgICAgICAgICAgaWYgKE5BTUVEX0NVUlZFIGluIHRoaXMpIHtcbiAgICAgICAgICAgICAgICBwdWJsaWNLZXlEYXRhLm5hbWVkQ3VydmUgPSB0aGlzLm5hbWVkQ3VydmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnB1YmxpY0tleSA9IG5ldyBFQ1B1YmxpY0tleShwdWJsaWNLZXlEYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXG4gICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy52ZXJzaW9uIH0pLFxuICAgICAgICAgICAgdGhpcy5wcml2YXRlS2V5XG4gICAgICAgIF07XG4gICAgICAgIGlmICh0aGlzLm5hbWVkQ3VydmUpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5uYW1lZEN1cnZlIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnB1YmxpY0tleSkge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQml0U3RyaW5nKHsgdmFsdWVIZXg6IHRoaXMucHVibGljS2V5LnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAoIXRoaXMubmFtZWRDdXJ2ZSB8fCBFQ1ByaXZhdGVLZXkuY29tcGFyZVdpdGhEZWZhdWx0KE5BTUVEX0NVUlZFLCB0aGlzLm5hbWVkQ3VydmUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgZW5vdWdoIGluZm9ybWF0aW9uIGZvciBtYWtpbmcgSlNPTjogYWJzZW50IFxcXCJuYW1lZEN1cnZlXFxcIiB2YWx1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJ2ZSA9IEVDTmFtZWRDdXJ2ZXMuZmluZCh0aGlzLm5hbWVkQ3VydmUpO1xuICAgICAgICBjb25zdCBwcml2YXRlS2V5SlNPTiA9IHtcbiAgICAgICAgICAgIGNydjogY3VydmUgPyBjdXJ2ZS5uYW1lIDogdGhpcy5uYW1lZEN1cnZlLFxuICAgICAgICAgICAgZDogcHZ0c3V0aWxzLkNvbnZlcnQuVG9CYXNlNjRVcmwodGhpcy5wcml2YXRlS2V5LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucHVibGljS2V5KSB7XG4gICAgICAgICAgICBjb25zdCBwdWJsaWNLZXlKU09OID0gdGhpcy5wdWJsaWNLZXkudG9KU09OKCk7XG4gICAgICAgICAgICBwcml2YXRlS2V5SlNPTi54ID0gcHVibGljS2V5SlNPTi54O1xuICAgICAgICAgICAgcHJpdmF0ZUtleUpTT04ueSA9IHB1YmxpY0tleUpTT04ueTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJpdmF0ZUtleUpTT047XG4gICAgfVxuICAgIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0KFwianNvblwiLCBqc29uLCBcImNydlwiLCBcImRcIik7XG4gICAgICAgIGxldCBjb29yZGluYXRlTGVuZ3RoID0gMDtcbiAgICAgICAgY29uc3QgY3VydmUgPSBFQ05hbWVkQ3VydmVzLmZpbmQoanNvbi5jcnYpO1xuICAgICAgICBpZiAoY3VydmUpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZWRDdXJ2ZSA9IGN1cnZlLmlkO1xuICAgICAgICAgICAgY29vcmRpbmF0ZUxlbmd0aCA9IGN1cnZlLnNpemU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udmVydEJ1ZmZlciA9IHB2dHN1dGlscy5Db252ZXJ0LkZyb21CYXNlNjRVcmwoanNvbi5kKTtcbiAgICAgICAgaWYgKGNvbnZlcnRCdWZmZXIuYnl0ZUxlbmd0aCA8IGNvb3JkaW5hdGVMZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihjb29yZGluYXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICAgICAgY29uc3QgY29udmVydEJ1ZmZlclZpZXcgPSBuZXcgVWludDhBcnJheShjb252ZXJ0QnVmZmVyKTtcbiAgICAgICAgICAgIHZpZXcuc2V0KGNvbnZlcnRCdWZmZXJWaWV3LCAxKTtcbiAgICAgICAgICAgIHRoaXMucHJpdmF0ZUtleSA9IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogYnVmZmVyIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2YXRlS2V5ID0gbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBjb252ZXJ0QnVmZmVyLnNsaWNlKDAsIGNvb3JkaW5hdGVMZW5ndGgpIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqc29uLnggJiYganNvbi55KSB7XG4gICAgICAgICAgICB0aGlzLnB1YmxpY0tleSA9IG5ldyBFQ1B1YmxpY0tleSh7IGpzb24gfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5FQ1ByaXZhdGVLZXkuQ0xBU1NfTkFNRSA9IFwiRUNQcml2YXRlS2V5XCI7XG5cbmNvbnN0IFBSSU1FID0gXCJwcmltZVwiO1xuY29uc3QgRVhQT05FTlQgPSBcImV4cG9uZW50XCI7XG5jb25zdCBDT0VGRklDSUVOVCQxID0gXCJjb2VmZmljaWVudFwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMTggPSBbXG4gICAgUFJJTUUsXG4gICAgRVhQT05FTlQsXG4gICAgQ09FRkZJQ0lFTlQkMSxcbl07XG5jbGFzcyBPdGhlclByaW1lSW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucHJpbWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQUklNRSwgT3RoZXJQcmltZUluZm8uZGVmYXVsdFZhbHVlcyhQUklNRSkpO1xuICAgICAgICB0aGlzLmV4cG9uZW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRVhQT05FTlQsIE90aGVyUHJpbWVJbmZvLmRlZmF1bHRWYWx1ZXMoRVhQT05FTlQpKTtcbiAgICAgICAgdGhpcy5jb2VmZmljaWVudCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENPRUZGSUNJRU5UJDEsIE90aGVyUHJpbWVJbmZvLmRlZmF1bHRWYWx1ZXMoQ09FRkZJQ0lFTlQkMSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5qc29uKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21KU09OKHBhcmFtZXRlcnMuanNvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFBSSU1FOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgRVhQT05FTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgY2FzZSBDT0VGRklDSUVOVCQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnByaW1lIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLmV4cG9uZW50IHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLmNvZWZmaWNpZW50IHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxOCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgT3RoZXJQcmltZUluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgcHJpbWU6IFBSSU1FLFxuICAgICAgICAgICAgICAgIGV4cG9uZW50OiBFWFBPTkVOVCxcbiAgICAgICAgICAgICAgICBjb2VmZmljaWVudDogQ09FRkZJQ0lFTlQkMVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMucHJpbWUgPSBhc24xLnJlc3VsdC5wcmltZS5jb252ZXJ0RnJvbURFUigpO1xuICAgICAgICB0aGlzLmV4cG9uZW50ID0gYXNuMS5yZXN1bHQuZXhwb25lbnQuY29udmVydEZyb21ERVIoKTtcbiAgICAgICAgdGhpcy5jb2VmZmljaWVudCA9IGFzbjEucmVzdWx0LmNvZWZmaWNpZW50LmNvbnZlcnRGcm9tREVSKCk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0aGlzLnByaW1lLmNvbnZlcnRUb0RFUigpLFxuICAgICAgICAgICAgICAgIHRoaXMuZXhwb25lbnQuY29udmVydFRvREVSKCksXG4gICAgICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudC5jb252ZXJ0VG9ERVIoKVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHI6IHB2dHN1dGlscy5Db252ZXJ0LlRvQmFzZTY0VXJsKHRoaXMucHJpbWUudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpLFxuICAgICAgICAgICAgZDogcHZ0c3V0aWxzLkNvbnZlcnQuVG9CYXNlNjRVcmwodGhpcy5leHBvbmVudC52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldyksXG4gICAgICAgICAgICB0OiBwdnRzdXRpbHMuQ29udmVydC5Ub0Jhc2U2NFVybCh0aGlzLmNvZWZmaWNpZW50LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnJvbUpTT04oanNvbikge1xuICAgICAgICBQYXJhbWV0ZXJFcnJvci5hc3NlcnQoXCJqc29uXCIsIGpzb24sIFwiclwiLCBcImRcIiwgXCJyXCIpO1xuICAgICAgICB0aGlzLnByaW1lID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWVIZXg6IHB2dHN1dGlscy5Db252ZXJ0LkZyb21CYXNlNjRVcmwoanNvbi5yKSB9KTtcbiAgICAgICAgdGhpcy5leHBvbmVudCA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlSGV4OiBwdnRzdXRpbHMuQ29udmVydC5Gcm9tQmFzZTY0VXJsKGpzb24uZCkgfSk7XG4gICAgICAgIHRoaXMuY29lZmZpY2llbnQgPSBuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZUhleDogcHZ0c3V0aWxzLkNvbnZlcnQuRnJvbUJhc2U2NFVybChqc29uLnQpIH0pO1xuICAgIH1cbn1cbk90aGVyUHJpbWVJbmZvLkNMQVNTX05BTUUgPSBcIk90aGVyUHJpbWVJbmZvXCI7XG5cbmNvbnN0IFZFUlNJT04kayA9IFwidmVyc2lvblwiO1xuY29uc3QgTU9EVUxVUyA9IFwibW9kdWx1c1wiO1xuY29uc3QgUFVCTElDX0VYUE9ORU5UID0gXCJwdWJsaWNFeHBvbmVudFwiO1xuY29uc3QgUFJJVkFURV9FWFBPTkVOVCA9IFwicHJpdmF0ZUV4cG9uZW50XCI7XG5jb25zdCBQUklNRTEgPSBcInByaW1lMVwiO1xuY29uc3QgUFJJTUUyID0gXCJwcmltZTJcIjtcbmNvbnN0IEVYUE9ORU5UMSA9IFwiZXhwb25lbnQxXCI7XG5jb25zdCBFWFBPTkVOVDIgPSBcImV4cG9uZW50MlwiO1xuY29uc3QgQ09FRkZJQ0lFTlQgPSBcImNvZWZmaWNpZW50XCI7XG5jb25zdCBPVEhFUl9QUklNRV9JTkZPUyA9IFwib3RoZXJQcmltZUluZm9zXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxNyA9IFtcbiAgICBWRVJTSU9OJGssXG4gICAgTU9EVUxVUyxcbiAgICBQVUJMSUNfRVhQT05FTlQsXG4gICAgUFJJVkFURV9FWFBPTkVOVCxcbiAgICBQUklNRTEsXG4gICAgUFJJTUUyLFxuICAgIEVYUE9ORU5UMSxcbiAgICBFWFBPTkVOVDIsXG4gICAgQ09FRkZJQ0lFTlQsXG4gICAgT1RIRVJfUFJJTUVfSU5GT1Ncbl07XG5jbGFzcyBSU0FQcml2YXRlS2V5IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiRrLCBSU0FQcml2YXRlS2V5LmRlZmF1bHRWYWx1ZXMoVkVSU0lPTiRrKSk7XG4gICAgICAgIHRoaXMubW9kdWx1cyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE1PRFVMVVMsIFJTQVByaXZhdGVLZXkuZGVmYXVsdFZhbHVlcyhNT0RVTFVTKSk7XG4gICAgICAgIHRoaXMucHVibGljRXhwb25lbnQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQVUJMSUNfRVhQT05FTlQsIFJTQVByaXZhdGVLZXkuZGVmYXVsdFZhbHVlcyhQVUJMSUNfRVhQT05FTlQpKTtcbiAgICAgICAgdGhpcy5wcml2YXRlRXhwb25lbnQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQUklWQVRFX0VYUE9ORU5ULCBSU0FQcml2YXRlS2V5LmRlZmF1bHRWYWx1ZXMoUFJJVkFURV9FWFBPTkVOVCkpO1xuICAgICAgICB0aGlzLnByaW1lMSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBSSU1FMSwgUlNBUHJpdmF0ZUtleS5kZWZhdWx0VmFsdWVzKFBSSU1FMSkpO1xuICAgICAgICB0aGlzLnByaW1lMiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBSSU1FMiwgUlNBUHJpdmF0ZUtleS5kZWZhdWx0VmFsdWVzKFBSSU1FMikpO1xuICAgICAgICB0aGlzLmV4cG9uZW50MSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEVYUE9ORU5UMSwgUlNBUHJpdmF0ZUtleS5kZWZhdWx0VmFsdWVzKEVYUE9ORU5UMSkpO1xuICAgICAgICB0aGlzLmV4cG9uZW50MiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEVYUE9ORU5UMiwgUlNBUHJpdmF0ZUtleS5kZWZhdWx0VmFsdWVzKEVYUE9ORU5UMikpO1xuICAgICAgICB0aGlzLmNvZWZmaWNpZW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ09FRkZJQ0lFTlQsIFJTQVByaXZhdGVLZXkuZGVmYXVsdFZhbHVlcyhDT0VGRklDSUVOVCkpO1xuICAgICAgICBpZiAoT1RIRVJfUFJJTUVfSU5GT1MgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5vdGhlclByaW1lSW5mb3MgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPVEhFUl9QUklNRV9JTkZPUywgUlNBUHJpdmF0ZUtleS5kZWZhdWx0VmFsdWVzKE9USEVSX1BSSU1FX0lORk9TKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuanNvbikge1xuICAgICAgICAgICAgdGhpcy5mcm9tSlNPTihwYXJhbWV0ZXJzLmpzb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJGs6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIE1PRFVMVVM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgY2FzZSBQVUJMSUNfRVhQT05FTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgY2FzZSBQUklWQVRFX0VYUE9ORU5UOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgUFJJTUUxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgUFJJTUUyOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgRVhQT05FTlQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgRVhQT05FTlQyOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgQ09FRkZJQ0lFTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgY2FzZSBPVEhFUl9QUklNRV9JTkZPUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy52ZXJzaW9uIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLm1vZHVsdXMgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMucHVibGljRXhwb25lbnQgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMucHJpdmF0ZUV4cG9uZW50IHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnByaW1lMSB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy5wcmltZTIgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMuZXhwb25lbnQxIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLmV4cG9uZW50MiB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy5jb2VmZmljaWVudCB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5vdGhlclByaW1lSW5mb3NOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE90aGVyUHJpbWVJbmZvLnNjaGVtYShuYW1lcy5vdGhlclByaW1lSW5mbyB8fCB7fSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDE3KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBSU0FQcml2YXRlS2V5LnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHZlcnNpb246IFZFUlNJT04kayxcbiAgICAgICAgICAgICAgICBtb2R1bHVzOiBNT0RVTFVTLFxuICAgICAgICAgICAgICAgIHB1YmxpY0V4cG9uZW50OiBQVUJMSUNfRVhQT05FTlQsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZUV4cG9uZW50OiBQUklWQVRFX0VYUE9ORU5ULFxuICAgICAgICAgICAgICAgIHByaW1lMTogUFJJTUUxLFxuICAgICAgICAgICAgICAgIHByaW1lMjogUFJJTUUyLFxuICAgICAgICAgICAgICAgIGV4cG9uZW50MTogRVhQT05FTlQxLFxuICAgICAgICAgICAgICAgIGV4cG9uZW50MjogRVhQT05FTlQyLFxuICAgICAgICAgICAgICAgIGNvZWZmaWNpZW50OiBDT0VGRklDSUVOVCxcbiAgICAgICAgICAgICAgICBvdGhlclByaW1lSW5mbzoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBPVEhFUl9QUklNRV9JTkZPU1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGFzbjEucmVzdWx0LnZlcnNpb24udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgdGhpcy5tb2R1bHVzID0gYXNuMS5yZXN1bHQubW9kdWx1cy5jb252ZXJ0RnJvbURFUigyNTYpO1xuICAgICAgICB0aGlzLnB1YmxpY0V4cG9uZW50ID0gYXNuMS5yZXN1bHQucHVibGljRXhwb25lbnQ7XG4gICAgICAgIHRoaXMucHJpdmF0ZUV4cG9uZW50ID0gYXNuMS5yZXN1bHQucHJpdmF0ZUV4cG9uZW50LmNvbnZlcnRGcm9tREVSKDI1Nik7XG4gICAgICAgIHRoaXMucHJpbWUxID0gYXNuMS5yZXN1bHQucHJpbWUxLmNvbnZlcnRGcm9tREVSKDEyOCk7XG4gICAgICAgIHRoaXMucHJpbWUyID0gYXNuMS5yZXN1bHQucHJpbWUyLmNvbnZlcnRGcm9tREVSKDEyOCk7XG4gICAgICAgIHRoaXMuZXhwb25lbnQxID0gYXNuMS5yZXN1bHQuZXhwb25lbnQxLmNvbnZlcnRGcm9tREVSKDEyOCk7XG4gICAgICAgIHRoaXMuZXhwb25lbnQyID0gYXNuMS5yZXN1bHQuZXhwb25lbnQyLmNvbnZlcnRGcm9tREVSKDEyOCk7XG4gICAgICAgIHRoaXMuY29lZmZpY2llbnQgPSBhc24xLnJlc3VsdC5jb2VmZmljaWVudC5jb252ZXJ0RnJvbURFUigxMjgpO1xuICAgICAgICBpZiAoT1RIRVJfUFJJTUVfSU5GT1MgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLm90aGVyUHJpbWVJbmZvcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQub3RoZXJQcmltZUluZm9zLCBlbGVtZW50ID0+IG5ldyBPdGhlclByaW1lSW5mbyh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLnZlcnNpb24gfSkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMubW9kdWx1cy5jb252ZXJ0VG9ERVIoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5wdWJsaWNFeHBvbmVudCk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5wcml2YXRlRXhwb25lbnQuY29udmVydFRvREVSKCkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMucHJpbWUxLmNvbnZlcnRUb0RFUigpKTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLnByaW1lMi5jb252ZXJ0VG9ERVIoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5leHBvbmVudDEuY29udmVydFRvREVSKCkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuZXhwb25lbnQyLmNvbnZlcnRUb0RFUigpKTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLmNvZWZmaWNpZW50LmNvbnZlcnRUb0RFUigpKTtcbiAgICAgICAgaWYgKHRoaXMub3RoZXJQcmltZUluZm9zKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMub3RoZXJQcmltZUluZm9zLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBqd2sgPSB7XG4gICAgICAgICAgICBuOiBwdnRzdXRpbHMuQ29udmVydC5Ub0Jhc2U2NFVybCh0aGlzLm1vZHVsdXMudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpLFxuICAgICAgICAgICAgZTogcHZ0c3V0aWxzLkNvbnZlcnQuVG9CYXNlNjRVcmwodGhpcy5wdWJsaWNFeHBvbmVudC52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldyksXG4gICAgICAgICAgICBkOiBwdnRzdXRpbHMuQ29udmVydC5Ub0Jhc2U2NFVybCh0aGlzLnByaXZhdGVFeHBvbmVudC52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldyksXG4gICAgICAgICAgICBwOiBwdnRzdXRpbHMuQ29udmVydC5Ub0Jhc2U2NFVybCh0aGlzLnByaW1lMS52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldyksXG4gICAgICAgICAgICBxOiBwdnRzdXRpbHMuQ29udmVydC5Ub0Jhc2U2NFVybCh0aGlzLnByaW1lMi52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldyksXG4gICAgICAgICAgICBkcDogcHZ0c3V0aWxzLkNvbnZlcnQuVG9CYXNlNjRVcmwodGhpcy5leHBvbmVudDEudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpLFxuICAgICAgICAgICAgZHE6IHB2dHN1dGlscy5Db252ZXJ0LlRvQmFzZTY0VXJsKHRoaXMuZXhwb25lbnQyLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KSxcbiAgICAgICAgICAgIHFpOiBwdnRzdXRpbHMuQ29udmVydC5Ub0Jhc2U2NFVybCh0aGlzLmNvZWZmaWNpZW50LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMub3RoZXJQcmltZUluZm9zKSB7XG4gICAgICAgICAgICBqd2sub3RoID0gQXJyYXkuZnJvbSh0aGlzLm90aGVyUHJpbWVJbmZvcywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gandrO1xuICAgIH1cbiAgICBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIFBhcmFtZXRlckVycm9yLmFzc2VydChcImpzb25cIiwganNvbiwgXCJuXCIsIFwiZVwiLCBcImRcIiwgXCJwXCIsIFwicVwiLCBcImRwXCIsIFwiZHFcIiwgXCJxaVwiKTtcbiAgICAgICAgdGhpcy5tb2R1bHVzID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWVIZXg6IHB2dHN1dGlscy5Db252ZXJ0LkZyb21CYXNlNjRVcmwoanNvbi5uKSB9KTtcbiAgICAgICAgdGhpcy5wdWJsaWNFeHBvbmVudCA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlSGV4OiBwdnRzdXRpbHMuQ29udmVydC5Gcm9tQmFzZTY0VXJsKGpzb24uZSkgfSk7XG4gICAgICAgIHRoaXMucHJpdmF0ZUV4cG9uZW50ID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWVIZXg6IHB2dHN1dGlscy5Db252ZXJ0LkZyb21CYXNlNjRVcmwoanNvbi5kKSB9KTtcbiAgICAgICAgdGhpcy5wcmltZTEgPSBuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZUhleDogcHZ0c3V0aWxzLkNvbnZlcnQuRnJvbUJhc2U2NFVybChqc29uLnApIH0pO1xuICAgICAgICB0aGlzLnByaW1lMiA9IG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlSGV4OiBwdnRzdXRpbHMuQ29udmVydC5Gcm9tQmFzZTY0VXJsKGpzb24ucSkgfSk7XG4gICAgICAgIHRoaXMuZXhwb25lbnQxID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWVIZXg6IHB2dHN1dGlscy5Db252ZXJ0LkZyb21CYXNlNjRVcmwoanNvbi5kcCkgfSk7XG4gICAgICAgIHRoaXMuZXhwb25lbnQyID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWVIZXg6IHB2dHN1dGlscy5Db252ZXJ0LkZyb21CYXNlNjRVcmwoanNvbi5kcSkgfSk7XG4gICAgICAgIHRoaXMuY29lZmZpY2llbnQgPSBuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZUhleDogcHZ0c3V0aWxzLkNvbnZlcnQuRnJvbUJhc2U2NFVybChqc29uLnFpKSB9KTtcbiAgICAgICAgaWYgKGpzb24ub3RoKSB7XG4gICAgICAgICAgICB0aGlzLm90aGVyUHJpbWVJbmZvcyA9IEFycmF5LmZyb20oanNvbi5vdGgsIChlbGVtZW50KSA9PiBuZXcgT3RoZXJQcmltZUluZm8oeyBqc29uOiBlbGVtZW50IH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblJTQVByaXZhdGVLZXkuQ0xBU1NfTkFNRSA9IFwiUlNBUHJpdmF0ZUtleVwiO1xuXG5jb25zdCBWRVJTSU9OJGogPSBcInZlcnNpb25cIjtcbmNvbnN0IFBSSVZBVEVfS0VZX0FMR09SSVRITSA9IFwicHJpdmF0ZUtleUFsZ29yaXRobVwiO1xuY29uc3QgUFJJVkFURV9LRVkgPSBcInByaXZhdGVLZXlcIjtcbmNvbnN0IEFUVFJJQlVURVMkNSA9IFwiYXR0cmlidXRlc1wiO1xuY29uc3QgUEFSU0VEX0tFWSA9IFwicGFyc2VkS2V5XCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxNiA9IFtcbiAgICBWRVJTSU9OJGosXG4gICAgUFJJVkFURV9LRVlfQUxHT1JJVEhNLFxuICAgIFBSSVZBVEVfS0VZLFxuICAgIEFUVFJJQlVURVMkNVxuXTtcbmNsYXNzIFByaXZhdGVLZXlJbmZvIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiRqLCBQcml2YXRlS2V5SW5mby5kZWZhdWx0VmFsdWVzKFZFUlNJT04kaikpO1xuICAgICAgICB0aGlzLnByaXZhdGVLZXlBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQUklWQVRFX0tFWV9BTEdPUklUSE0sIFByaXZhdGVLZXlJbmZvLmRlZmF1bHRWYWx1ZXMoUFJJVkFURV9LRVlfQUxHT1JJVEhNKSk7XG4gICAgICAgIHRoaXMucHJpdmF0ZUtleSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBSSVZBVEVfS0VZLCBQcml2YXRlS2V5SW5mby5kZWZhdWx0VmFsdWVzKFBSSVZBVEVfS0VZKSk7XG4gICAgICAgIGlmIChBVFRSSUJVVEVTJDUgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQVRUUklCVVRFUyQ1LCBQcml2YXRlS2V5SW5mby5kZWZhdWx0VmFsdWVzKEFUVFJJQlVURVMkNSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChQQVJTRURfS0VZIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2VkS2V5ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUEFSU0VEX0tFWSwgUHJpdmF0ZUtleUluZm8uZGVmYXVsdFZhbHVlcyhQQVJTRURfS0VZKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuanNvbikge1xuICAgICAgICAgICAgdGhpcy5mcm9tSlNPTihwYXJhbWV0ZXJzLmpzb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJGo6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIFBSSVZBVEVfS0VZX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgUFJJVkFURV9LRVk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgQVRUUklCVVRFUyQ1OlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNhc2UgUEFSU0VEX0tFWTpcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy52ZXJzaW9uIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEobmFtZXMucHJpdmF0ZUtleUFsZ29yaXRobSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IG5hbWU6IChuYW1lcy5wcml2YXRlS2V5IHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmF0dHJpYnV0ZXMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogQXR0cmlidXRlLnNjaGVtYSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxNik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgUHJpdmF0ZUtleUluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogVkVSU0lPTiRqLFxuICAgICAgICAgICAgICAgIHByaXZhdGVLZXlBbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogUFJJVkFURV9LRVlfQUxHT1JJVEhNXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByaXZhdGVLZXk6IFBSSVZBVEVfS0VZLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IEFUVFJJQlVURVMkNVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGFzbjEucmVzdWx0LnZlcnNpb24udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgdGhpcy5wcml2YXRlS2V5QWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LnByaXZhdGVLZXlBbGdvcml0aG0gfSk7XG4gICAgICAgIHRoaXMucHJpdmF0ZUtleSA9IGFzbjEucmVzdWx0LnByaXZhdGVLZXk7XG4gICAgICAgIGlmIChBVFRSSUJVVEVTJDUgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LmF0dHJpYnV0ZXMsIGVsZW1lbnQgPT4gbmV3IEF0dHJpYnV0ZSh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5wcml2YXRlS2V5QWxnb3JpdGhtLmFsZ29yaXRobUlkKSB7XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMTM1NDkuMS4xLjFcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaXZhdGVLZXlBU04xID0gYXNuMWpzLmZyb21CRVIodGhpcy5wcml2YXRlS2V5LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByaXZhdGVLZXlBU04xLm9mZnNldCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZEtleSA9IG5ldyBSU0FQcml2YXRlS2V5KHsgc2NoZW1hOiBwcml2YXRlS2V5QVNOMS5yZXN1bHQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTAwNDUuMi4xXCI6XG4gICAgICAgICAgICAgICAgaWYgKFwiYWxnb3JpdGhtUGFyYW1zXCIgaW4gdGhpcy5wcml2YXRlS2V5QWxnb3JpdGhtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZhdGVLZXlBbGdvcml0aG0uYWxnb3JpdGhtUGFyYW1zIGluc3RhbmNlb2YgYXNuMWpzLk9iamVjdElkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaXZhdGVLZXlBU04xID0gYXNuMWpzLmZyb21CRVIodGhpcy5wcml2YXRlS2V5LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcml2YXRlS2V5QVNOMS5vZmZzZXQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRLZXkgPSBuZXcgRUNQcml2YXRlS2V5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWRDdXJ2ZTogdGhpcy5wcml2YXRlS2V5QWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcy52YWx1ZUJsb2NrLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYTogcHJpdmF0ZUtleUFTTjEucmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW1xuICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KSxcbiAgICAgICAgICAgIHRoaXMucHJpdmF0ZUtleUFsZ29yaXRobS50b1NjaGVtYSgpLFxuICAgICAgICAgICAgdGhpcy5wcml2YXRlS2V5XG4gICAgICAgIF07XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmF0dHJpYnV0ZXMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXJzZWRLZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdCA9IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICAgICAgICAgICAgcHJpdmF0ZUtleUFsZ29yaXRobTogdGhpcy5wcml2YXRlS2V5QWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgICAgIHByaXZhdGVLZXk6IHRoaXMucHJpdmF0ZUtleS50b0pTT04oKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmF0dHJpYnV0ZXMgPSBBcnJheS5mcm9tKHRoaXMuYXR0cmlidXRlcywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgandrID0ge307XG4gICAgICAgIHN3aXRjaCAodGhpcy5wcml2YXRlS2V5QWxnb3JpdGhtLmFsZ29yaXRobUlkKSB7XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMDA0NS4yLjFcIjpcbiAgICAgICAgICAgICAgICBqd2sua3R5ID0gXCJFQ1wiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xXCI6XG4gICAgICAgICAgICAgICAgandrLmt0eSA9IFwiUlNBXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHVibGljS2V5SldLID0gdGhpcy5wYXJzZWRLZXkudG9KU09OKCk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oandrLCBwdWJsaWNLZXlKV0spO1xuICAgICAgICByZXR1cm4gandrO1xuICAgIH1cbiAgICBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIGlmIChcImt0eVwiIGluIGpzb24pIHtcbiAgICAgICAgICAgIHN3aXRjaCAoanNvbi5rdHkudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJFQ1wiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZEtleSA9IG5ldyBFQ1ByaXZhdGVLZXkoeyBqc29uIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZhdGVLZXlBbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogXCIxLjIuODQwLjEwMDQ1LjIuMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtUGFyYW1zOiBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5wYXJzZWRLZXkubmFtZWRDdXJ2ZSB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlJTQVwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZEtleSA9IG5ldyBSU0FQcml2YXRlS2V5KHsganNvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2YXRlS2V5QWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5OdWxsKClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB2YWx1ZSBmb3IgXCJrdHlcIiBwYXJhbWV0ZXI6ICR7anNvbi5rdHl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZhdGVLZXkgPSBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IHRoaXMucGFyc2VkS2V5LnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuUHJpdmF0ZUtleUluZm8uQ0xBU1NfTkFNRSA9IFwiUHJpdmF0ZUtleUluZm9cIjtcblxuY29uc3QgQ09OVEVOVF9UWVBFJDEgPSBcImNvbnRlbnRUeXBlXCI7XG5jb25zdCBDT05URU5UX0VOQ1JZUFRJT05fQUxHT1JJVEhNID0gXCJjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobVwiO1xuY29uc3QgRU5DUllQVEVEX0NPTlRFTlQgPSBcImVuY3J5cHRlZENvbnRlbnRcIjtcbmNvbnN0IENMRUFSX1BST1BTJDE1ID0gW1xuICAgIENPTlRFTlRfVFlQRSQxLFxuICAgIENPTlRFTlRfRU5DUllQVElPTl9BTEdPUklUSE0sXG4gICAgRU5DUllQVEVEX0NPTlRFTlQsXG5dO1xuY29uc3QgUElFQ0VfU0laRSA9IDEwMjQ7XG5jbGFzcyBFbmNyeXB0ZWRDb250ZW50SW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29udGVudFR5cGUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDT05URU5UX1RZUEUkMSwgRW5jcnlwdGVkQ29udGVudEluZm8uZGVmYXVsdFZhbHVlcyhDT05URU5UX1RZUEUkMSkpO1xuICAgICAgICB0aGlzLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ09OVEVOVF9FTkNSWVBUSU9OX0FMR09SSVRITSwgRW5jcnlwdGVkQ29udGVudEluZm8uZGVmYXVsdFZhbHVlcyhDT05URU5UX0VOQ1JZUFRJT05fQUxHT1JJVEhNKSk7XG4gICAgICAgIGlmIChFTkNSWVBURURfQ09OVEVOVCBpbiBwYXJhbWV0ZXJzICYmIHBhcmFtZXRlcnMuZW5jcnlwdGVkQ29udGVudCkge1xuICAgICAgICAgICAgdGhpcy5lbmNyeXB0ZWRDb250ZW50ID0gcGFyYW1ldGVycy5lbmNyeXB0ZWRDb250ZW50O1xuICAgICAgICAgICAgaWYgKCh0aGlzLmVuY3J5cHRlZENvbnRlbnQuaWRCbG9jay50YWdDbGFzcyA9PT0gMSkgJiZcbiAgICAgICAgICAgICAgICAodGhpcy5lbmNyeXB0ZWRDb250ZW50LmlkQmxvY2sudGFnTnVtYmVyID09PSA0KSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuY3J5cHRlZENvbnRlbnQuaWRCbG9jay5pc0NvbnN0cnVjdGVkID09PSBmYWxzZSAmJiAhcGFyYW1ldGVycy5kaXNhYmxlU3BsaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uc3RyU3RyaW5nID0gbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7IGlzQ29uc3RydWN0ZWQ6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29uc3RydWN0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUhleCA9IHRoaXMuZW5jcnlwdGVkQ29udGVudC52YWx1ZUJsb2NrLnZhbHVlSGV4Vmlldy5zbGljZSgpLmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IHZhbHVlSGV4LmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChsZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaWVjZVZpZXcgPSBuZXcgVWludDhBcnJheSh2YWx1ZUhleCwgb2Zmc2V0LCAoKG9mZnNldCArIFBJRUNFX1NJWkUpID4gdmFsdWVIZXguYnl0ZUxlbmd0aCkgPyAodmFsdWVIZXguYnl0ZUxlbmd0aCAtIG9mZnNldCkgOiBQSUVDRV9TSVpFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9hcnJheSA9IG5ldyBBcnJheUJ1ZmZlcihwaWVjZVZpZXcubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF92aWV3ID0gbmV3IFVpbnQ4QXJyYXkoX2FycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX3ZpZXcubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZXdbaV0gPSBwaWVjZVZpZXdbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJTdHJpbmcudmFsdWVCbG9jay52YWx1ZS5wdXNoKG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogX2FycmF5IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCAtPSBwaWVjZVZpZXcubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHBpZWNlVmlldy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmNyeXB0ZWRDb250ZW50ID0gY29uc3RyU3RyaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgQ09OVEVOVF9UWVBFJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgQ09OVEVOVF9FTkNSWVBUSU9OX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgRU5DUllQVEVEX0NPTlRFTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgQ09OVEVOVF9UWVBFJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgICAgIGNhc2UgQ09OVEVOVF9FTkNSWVBUSU9OX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChtZW1iZXJWYWx1ZS5hbGdvcml0aG1JZCA9PT0gRU1QVFlfU1RSSU5HKSAmJiAoKFwiYWxnb3JpdGhtUGFyYW1zXCIgaW4gbWVtYmVyVmFsdWUpID09PSBmYWxzZSkpO1xuICAgICAgICAgICAgY2FzZSBFTkNSWVBURURfQ09OVEVOVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmlzRXF1YWwoRW5jcnlwdGVkQ29udGVudEluZm8uZGVmYXVsdFZhbHVlcyhFTkNSWVBURURfQ09OVEVOVCkpKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLmNvbnRlbnRUeXBlIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEobmFtZXMuY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5lbmNyeXB0ZWRDb250ZW50IHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuZW5jcnlwdGVkQ29udGVudCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDE1KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBFbmNyeXB0ZWRDb250ZW50SW5mby5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogQ09OVEVOVF9UWVBFJDEsXG4gICAgICAgICAgICAgICAgY29udGVudEVuY3J5cHRpb25BbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogQ09OVEVOVF9FTkNSWVBUSU9OX0FMR09SSVRITVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRDb250ZW50OiBFTkNSWVBURURfQ09OVEVOVFxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuY29udGVudFR5cGUgPSBhc24xLnJlc3VsdC5jb250ZW50VHlwZS52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQuY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0gfSk7XG4gICAgICAgIGlmIChFTkNSWVBURURfQ09OVEVOVCBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5lbmNyeXB0ZWRDb250ZW50ID0gYXNuMS5yZXN1bHQuZW5jcnlwdGVkQ29udGVudDtcbiAgICAgICAgICAgIHRoaXMuZW5jcnlwdGVkQ29udGVudC5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgICAgIHRoaXMuZW5jcnlwdGVkQ29udGVudC5pZEJsb2NrLnRhZ051bWJlciA9IDQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IHNlcXVlbmNlTGVuZ3RoQmxvY2sgPSB7XG4gICAgICAgICAgICBpc0luZGVmaW5pdGVGb3JtOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiB0aGlzLmNvbnRlbnRUeXBlIH0pKTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLnRvU2NoZW1hKCkpO1xuICAgICAgICBpZiAodGhpcy5lbmNyeXB0ZWRDb250ZW50KSB7XG4gICAgICAgICAgICBzZXF1ZW5jZUxlbmd0aEJsb2NrLmlzSW5kZWZpbml0ZUZvcm0gPSB0aGlzLmVuY3J5cHRlZENvbnRlbnQuaWRCbG9jay5pc0NvbnN0cnVjdGVkO1xuICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkVmFsdWUgPSB0aGlzLmVuY3J5cHRlZENvbnRlbnQ7XG4gICAgICAgICAgICBlbmNyeXB0ZWRWYWx1ZS5pZEJsb2NrLnRhZ0NsYXNzID0gMztcbiAgICAgICAgICAgIGVuY3J5cHRlZFZhbHVlLmlkQmxvY2sudGFnTnVtYmVyID0gMDtcbiAgICAgICAgICAgIGVuY3J5cHRlZFZhbHVlLmxlbkJsb2NrLmlzSW5kZWZpbml0ZUZvcm0gPSB0aGlzLmVuY3J5cHRlZENvbnRlbnQuaWRCbG9jay5pc0NvbnN0cnVjdGVkO1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChlbmNyeXB0ZWRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIGxlbkJsb2NrOiBzZXF1ZW5jZUxlbmd0aEJsb2NrLFxuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICBjb250ZW50VHlwZTogdGhpcy5jb250ZW50VHlwZSxcbiAgICAgICAgICAgIGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtOiB0aGlzLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmVuY3J5cHRlZENvbnRlbnQpIHtcbiAgICAgICAgICAgIHJlcy5lbmNyeXB0ZWRDb250ZW50ID0gdGhpcy5lbmNyeXB0ZWRDb250ZW50LnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGdldEVuY3J5cHRlZENvbnRlbnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmNyeXB0ZWRDb250ZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbWV0ZXIgJ2VuY3J5cHRlZENvbnRlbnQnIGlzIHVuZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNuMWpzLk9jdGV0U3RyaW5nLnByb3RvdHlwZS5nZXRWYWx1ZS5jYWxsKHRoaXMuZW5jcnlwdGVkQ29udGVudCk7XG4gICAgfVxufVxuRW5jcnlwdGVkQ29udGVudEluZm8uQ0xBU1NfTkFNRSA9IFwiRW5jcnlwdGVkQ29udGVudEluZm9cIjtcblxuY29uc3QgSEFTSF9BTEdPUklUSE0kNCA9IFwiaGFzaEFsZ29yaXRobVwiO1xuY29uc3QgTUFTS19HRU5fQUxHT1JJVEhNJDEgPSBcIm1hc2tHZW5BbGdvcml0aG1cIjtcbmNvbnN0IFNBTFRfTEVOR1RIID0gXCJzYWx0TGVuZ3RoXCI7XG5jb25zdCBUUkFJTEVSX0ZJRUxEID0gXCJ0cmFpbGVyRmllbGRcIjtcbmNvbnN0IENMRUFSX1BST1BTJDE0ID0gW1xuICAgIEhBU0hfQUxHT1JJVEhNJDQsXG4gICAgTUFTS19HRU5fQUxHT1JJVEhNJDEsXG4gICAgU0FMVF9MRU5HVEgsXG4gICAgVFJBSUxFUl9GSUVMRFxuXTtcbmNsYXNzIFJTQVNTQVBTU1BhcmFtcyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaGFzaEFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEhBU0hfQUxHT1JJVEhNJDQsIFJTQVNTQVBTU1BhcmFtcy5kZWZhdWx0VmFsdWVzKEhBU0hfQUxHT1JJVEhNJDQpKTtcbiAgICAgICAgdGhpcy5tYXNrR2VuQWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTUFTS19HRU5fQUxHT1JJVEhNJDEsIFJTQVNTQVBTU1BhcmFtcy5kZWZhdWx0VmFsdWVzKE1BU0tfR0VOX0FMR09SSVRITSQxKSk7XG4gICAgICAgIHRoaXMuc2FsdExlbmd0aCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNBTFRfTEVOR1RILCBSU0FTU0FQU1NQYXJhbXMuZGVmYXVsdFZhbHVlcyhTQUxUX0xFTkdUSCkpO1xuICAgICAgICB0aGlzLnRyYWlsZXJGaWVsZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRSQUlMRVJfRklFTEQsIFJTQVNTQVBTU1BhcmFtcy5kZWZhdWx0VmFsdWVzKFRSQUlMRVJfRklFTEQpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEhBU0hfQUxHT1JJVEhNJDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IFwiMS4zLjE0LjMuMi4yNlwiLFxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuTnVsbCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXNlIE1BU0tfR0VOX0FMR09SSVRITSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS44XCIsXG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogKG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBcIjEuMy4xNC4zLjIuMjZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5OdWxsKClcbiAgICAgICAgICAgICAgICAgICAgfSkpLnRvU2NoZW1hKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhc2UgU0FMVF9MRU5HVEg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDIwO1xuICAgICAgICAgICAgY2FzZSBUUkFJTEVSX0ZJRUxEOlxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEobmFtZXMuaGFzaEFsZ29yaXRobSB8fCB7fSldXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW0FsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLm1hc2tHZW5BbGdvcml0aG0gfHwge30pXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMuc2FsdExlbmd0aCB8fCBFTVBUWV9TVFJJTkcpIH0pXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogM1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMudHJhaWxlckZpZWxkIHx8IEVNUFRZX1NUUklORykgfSldXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxNCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgUlNBU1NBUFNTUGFyYW1zLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGhhc2hBbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogSEFTSF9BTEdPUklUSE0kNFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtYXNrR2VuQWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IE1BU0tfR0VOX0FMR09SSVRITSQxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNhbHRMZW5ndGg6IFNBTFRfTEVOR1RILFxuICAgICAgICAgICAgICAgIHRyYWlsZXJGaWVsZDogVFJBSUxFUl9GSUVMRFxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIGlmIChIQVNIX0FMR09SSVRITSQ0IGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5oYXNoQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0Lmhhc2hBbGdvcml0aG0gfSk7XG4gICAgICAgIGlmIChNQVNLX0dFTl9BTEdPUklUSE0kMSBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMubWFza0dlbkFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5tYXNrR2VuQWxnb3JpdGhtIH0pO1xuICAgICAgICBpZiAoU0FMVF9MRU5HVEggaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLnNhbHRMZW5ndGggPSBhc24xLnJlc3VsdC5zYWx0TGVuZ3RoLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIGlmIChUUkFJTEVSX0ZJRUxEIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy50cmFpbGVyRmllbGQgPSBhc24xLnJlc3VsdC50cmFpbGVyRmllbGQudmFsdWVCbG9jay52YWx1ZURlYztcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIGlmICghdGhpcy5oYXNoQWxnb3JpdGhtLmlzRXF1YWwoUlNBU1NBUFNTUGFyYW1zLmRlZmF1bHRWYWx1ZXMoSEFTSF9BTEdPUklUSE0kNCkpKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFt0aGlzLmhhc2hBbGdvcml0aG0udG9TY2hlbWEoKV1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubWFza0dlbkFsZ29yaXRobS5pc0VxdWFsKFJTQVNTQVBTU1BhcmFtcy5kZWZhdWx0VmFsdWVzKE1BU0tfR0VOX0FMR09SSVRITSQxKSkpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW3RoaXMubWFza0dlbkFsZ29yaXRobS50b1NjaGVtYSgpXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNhbHRMZW5ndGggIT09IFJTQVNTQVBTU1BhcmFtcy5kZWZhdWx0VmFsdWVzKFNBTFRfTEVOR1RIKSkge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMuc2FsdExlbmd0aCB9KV1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50cmFpbGVyRmllbGQgIT09IFJTQVNTQVBTU1BhcmFtcy5kZWZhdWx0VmFsdWVzKFRSQUlMRVJfRklFTEQpKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogM1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy50cmFpbGVyRmllbGQgfSldXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge307XG4gICAgICAgIGlmICghdGhpcy5oYXNoQWxnb3JpdGhtLmlzRXF1YWwoUlNBU1NBUFNTUGFyYW1zLmRlZmF1bHRWYWx1ZXMoSEFTSF9BTEdPUklUSE0kNCkpKSB7XG4gICAgICAgICAgICByZXMuaGFzaEFsZ29yaXRobSA9IHRoaXMuaGFzaEFsZ29yaXRobS50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubWFza0dlbkFsZ29yaXRobS5pc0VxdWFsKFJTQVNTQVBTU1BhcmFtcy5kZWZhdWx0VmFsdWVzKE1BU0tfR0VOX0FMR09SSVRITSQxKSkpIHtcbiAgICAgICAgICAgIHJlcy5tYXNrR2VuQWxnb3JpdGhtID0gdGhpcy5tYXNrR2VuQWxnb3JpdGhtLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNhbHRMZW5ndGggIT09IFJTQVNTQVBTU1BhcmFtcy5kZWZhdWx0VmFsdWVzKFNBTFRfTEVOR1RIKSkge1xuICAgICAgICAgICAgcmVzLnNhbHRMZW5ndGggPSB0aGlzLnNhbHRMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhaWxlckZpZWxkICE9PSBSU0FTU0FQU1NQYXJhbXMuZGVmYXVsdFZhbHVlcyhUUkFJTEVSX0ZJRUxEKSkge1xuICAgICAgICAgICAgcmVzLnRyYWlsZXJGaWVsZCA9IHRoaXMudHJhaWxlckZpZWxkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuUlNBU1NBUFNTUGFyYW1zLkNMQVNTX05BTUUgPSBcIlJTQVNTQVBTU1BhcmFtc1wiO1xuXG5jb25zdCBTQUxUID0gXCJzYWx0XCI7XG5jb25zdCBJVEVSQVRJT05fQ09VTlQgPSBcIml0ZXJhdGlvbkNvdW50XCI7XG5jb25zdCBLRVlfTEVOR1RIID0gXCJrZXlMZW5ndGhcIjtcbmNvbnN0IFBSRiA9IFwicHJmXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxMyA9IFtcbiAgICBTQUxULFxuICAgIElURVJBVElPTl9DT1VOVCxcbiAgICBLRVlfTEVOR1RILFxuICAgIFBSRlxuXTtcbmNsYXNzIFBCS0RGMlBhcmFtcyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2FsdCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNBTFQsIFBCS0RGMlBhcmFtcy5kZWZhdWx0VmFsdWVzKFNBTFQpKTtcbiAgICAgICAgdGhpcy5pdGVyYXRpb25Db3VudCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElURVJBVElPTl9DT1VOVCwgUEJLREYyUGFyYW1zLmRlZmF1bHRWYWx1ZXMoSVRFUkFUSU9OX0NPVU5UKSk7XG4gICAgICAgIGlmIChLRVlfTEVOR1RIIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMua2V5TGVuZ3RoID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgS0VZX0xFTkdUSCwgUEJLREYyUGFyYW1zLmRlZmF1bHRWYWx1ZXMoS0VZX0xFTkdUSCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChQUkYgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5wcmYgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQUkYsIFBCS0RGMlBhcmFtcy5kZWZhdWx0VmFsdWVzKFBSRikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBTQUxUOlxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIGNhc2UgSVRFUkFUSU9OX0NPVU5UOlxuICAgICAgICAgICAgICAgIHJldHVybiAoLTEpO1xuICAgICAgICAgICAgY2FzZSBLRVlfTEVOR1RIOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgY2FzZSBQUkY6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IFwiMS4zLjE0LjMuMi4yNlwiLFxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuTnVsbCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc2FsdFByaW1pdGl2ZSB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEobmFtZXMuc2FsdENvbnN0cnVjdGVkIHx8IHt9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLml0ZXJhdGlvbkNvdW50IHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmtleUxlbmd0aCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnByZiB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxMyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgUEJLREYyUGFyYW1zLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHNhbHRQcmltaXRpdmU6IFNBTFQsXG4gICAgICAgICAgICAgICAgc2FsdENvbnN0cnVjdGVkOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFNBTFRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXRlcmF0aW9uQ291bnQ6IElURVJBVElPTl9DT1VOVCxcbiAgICAgICAgICAgICAgICBrZXlMZW5ndGg6IEtFWV9MRU5HVEgsXG4gICAgICAgICAgICAgICAgcHJmOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFBSRixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5zYWx0ID0gYXNuMS5yZXN1bHQuc2FsdDtcbiAgICAgICAgdGhpcy5pdGVyYXRpb25Db3VudCA9IGFzbjEucmVzdWx0Lml0ZXJhdGlvbkNvdW50LnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIGlmIChLRVlfTEVOR1RIIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5rZXlMZW5ndGggPSBhc24xLnJlc3VsdC5rZXlMZW5ndGgudmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgaWYgKFBSRiBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMucHJmID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LnByZiB9KTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zYWx0KTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy5pdGVyYXRpb25Db3VudCB9KSk7XG4gICAgICAgIGlmIChLRVlfTEVOR1RIIGluIHRoaXMpIHtcbiAgICAgICAgICAgIGlmIChQQktERjJQYXJhbXMuZGVmYXVsdFZhbHVlcyhLRVlfTEVOR1RIKSAhPT0gdGhpcy5rZXlMZW5ndGgpXG4gICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy5rZXlMZW5ndGggfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByZikge1xuICAgICAgICAgICAgaWYgKFBCS0RGMlBhcmFtcy5kZWZhdWx0VmFsdWVzKFBSRikuaXNFcXVhbCh0aGlzLnByZikgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5wcmYudG9TY2hlbWEoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgc2FsdDogdGhpcy5zYWx0LnRvSlNPTigpLFxuICAgICAgICAgICAgaXRlcmF0aW9uQ291bnQ6IHRoaXMuaXRlcmF0aW9uQ291bnRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEtFWV9MRU5HVEggaW4gdGhpcykge1xuICAgICAgICAgICAgaWYgKFBCS0RGMlBhcmFtcy5kZWZhdWx0VmFsdWVzKEtFWV9MRU5HVEgpICE9PSB0aGlzLmtleUxlbmd0aClcbiAgICAgICAgICAgICAgICByZXMua2V5TGVuZ3RoID0gdGhpcy5rZXlMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJmKSB7XG4gICAgICAgICAgICBpZiAoUEJLREYyUGFyYW1zLmRlZmF1bHRWYWx1ZXMoUFJGKS5pc0VxdWFsKHRoaXMucHJmKSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgcmVzLnByZiA9IHRoaXMucHJmLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuUEJLREYyUGFyYW1zLkNMQVNTX05BTUUgPSBcIlBCS0RGMlBhcmFtc1wiO1xuXG5jb25zdCBLRVlfREVSSVZBVElPTl9GVU5DID0gXCJrZXlEZXJpdmF0aW9uRnVuY1wiO1xuY29uc3QgRU5DUllQVElPTl9TQ0hFTUUgPSBcImVuY3J5cHRpb25TY2hlbWVcIjtcbmNvbnN0IENMRUFSX1BST1BTJDEyID0gW1xuICAgIEtFWV9ERVJJVkFUSU9OX0ZVTkMsXG4gICAgRU5DUllQVElPTl9TQ0hFTUVcbl07XG5jbGFzcyBQQkVTMlBhcmFtcyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMua2V5RGVyaXZhdGlvbkZ1bmMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBLRVlfREVSSVZBVElPTl9GVU5DLCBQQkVTMlBhcmFtcy5kZWZhdWx0VmFsdWVzKEtFWV9ERVJJVkFUSU9OX0ZVTkMpKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0aW9uU2NoZW1lID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRU5DUllQVElPTl9TQ0hFTUUsIFBCRVMyUGFyYW1zLmRlZmF1bHRWYWx1ZXMoRU5DUllQVElPTl9TQ0hFTUUpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEtFWV9ERVJJVkFUSU9OX0ZVTkM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRJT05fU0NIRU1FOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcigpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBBbGdvcml0aG1JZGVudGlmaWVyLnNjaGVtYShuYW1lcy5rZXlEZXJpdmF0aW9uRnVuYyB8fCB7fSksXG4gICAgICAgICAgICAgICAgQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEobmFtZXMuZW5jcnlwdGlvblNjaGVtZSB8fCB7fSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxMik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgUEJFUzJQYXJhbXMuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAga2V5RGVyaXZhdGlvbkZ1bmM6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogS0VZX0RFUklWQVRJT05fRlVOQ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmNyeXB0aW9uU2NoZW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEVOQ1JZUFRJT05fU0NIRU1FXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5rZXlEZXJpdmF0aW9uRnVuYyA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5rZXlEZXJpdmF0aW9uRnVuYyB9KTtcbiAgICAgICAgdGhpcy5lbmNyeXB0aW9uU2NoZW1lID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmVuY3J5cHRpb25TY2hlbWUgfSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0aGlzLmtleURlcml2YXRpb25GdW5jLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5lbmNyeXB0aW9uU2NoZW1lLnRvU2NoZW1hKClcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXlEZXJpdmF0aW9uRnVuYzogdGhpcy5rZXlEZXJpdmF0aW9uRnVuYy50b0pTT04oKSxcbiAgICAgICAgICAgIGVuY3J5cHRpb25TY2hlbWU6IHRoaXMuZW5jcnlwdGlvblNjaGVtZS50b0pTT04oKVxuICAgICAgICB9O1xuICAgIH1cbn1cblBCRVMyUGFyYW1zLkNMQVNTX05BTUUgPSBcIlBCRVMyUGFyYW1zXCI7XG5cbmNsYXNzIEFic3RyYWN0Q3J5cHRvRW5naW5lIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHRoaXMuY3J5cHRvID0gcGFyYW1ldGVycy5jcnlwdG87XG4gICAgICAgIHRoaXMuc3VidGxlID0gXCJ3ZWJraXRTdWJ0bGVcIiBpbiBwYXJhbWV0ZXJzLmNyeXB0b1xuICAgICAgICAgICAgPyBwYXJhbWV0ZXJzLmNyeXB0by53ZWJraXRTdWJ0bGVcbiAgICAgICAgICAgIDogcGFyYW1ldGVycy5jcnlwdG8uc3VidGxlO1xuICAgICAgICB0aGlzLm5hbWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVcIiwgRU1QVFlfU1RSSU5HKTtcbiAgICB9XG4gICAgYXN5bmMgZW5jcnlwdCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnRsZS5lbmNyeXB0KC4uLmFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyBkZWNyeXB0KC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VidGxlLmRlY3J5cHQoLi4uYXJncyk7XG4gICAgfVxuICAgIHNpZ24oLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0bGUuc2lnbiguLi5hcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgdmVyaWZ5KC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VidGxlLnZlcmlmeSguLi5hcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgZGlnZXN0KC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VidGxlLmRpZ2VzdCguLi5hcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgZ2VuZXJhdGVLZXkoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0bGUuZ2VuZXJhdGVLZXkoLi4uYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIGRlcml2ZUtleSguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnRsZS5kZXJpdmVLZXkoLi4uYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIGRlcml2ZUJpdHMoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0bGUuZGVyaXZlQml0cyguLi5hcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgd3JhcEtleSguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnRsZS53cmFwS2V5KC4uLmFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyB1bndyYXBLZXkoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0bGUudW53cmFwS2V5KC4uLmFyZ3MpO1xuICAgIH1cbiAgICBleHBvcnRLZXkoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0bGUuZXhwb3J0S2V5KC4uLmFyZ3MpO1xuICAgIH1cbiAgICBpbXBvcnRLZXkoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0bGUuaW1wb3J0S2V5KC4uLmFyZ3MpO1xuICAgIH1cbiAgICBnZXRSYW5kb21WYWx1ZXMoYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnJheSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBtYWtlUEtDUzEyQjJLZXkoaGFzaEFsZ29yaXRobSwga2V5TGVuZ3RoLCBwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9uQ291bnQpIHtcbiAgICBsZXQgdTtcbiAgICBsZXQgdjtcbiAgICBsZXQgbWQ7XG4gICAgc3dpdGNoIChoYXNoQWxnb3JpdGhtLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSBcIlNIQS0xXCI6XG4gICAgICAgICAgICB1ID0gMjA7XG4gICAgICAgICAgICB2ID0gNjQ7XG4gICAgICAgICAgICBtZCA9IHNoYTE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlNIQS0yNTZcIjpcbiAgICAgICAgICAgIHUgPSAzMjtcbiAgICAgICAgICAgIHYgPSA2NDtcbiAgICAgICAgICAgIG1kID0gc2hhMjU2O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJTSEEtMzg0XCI6XG4gICAgICAgICAgICB1ID0gNDg7XG4gICAgICAgICAgICB2ID0gMTI4O1xuICAgICAgICAgICAgbWQgPSBzaGEzODQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlNIQS01MTJcIjpcbiAgICAgICAgICAgIHUgPSA2NDtcbiAgICAgICAgICAgIHYgPSAxMjg7XG4gICAgICAgICAgICBtZCA9IHNoYTUxMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgaGFzaGluZyBhbGdvcml0aG1cIik7XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbmFsUGFzc3dvcmQgPSBuZXcgVWludDhBcnJheShwYXNzd29yZCk7XG4gICAgbGV0IGRlY29kZWRQYXNzd29yZCA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShwYXNzd29yZCk7XG4gICAgY29uc3QgZW5jb2RlZFBhc3N3b3JkID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRlY29kZWRQYXNzd29yZCk7XG4gICAgaWYgKGVuY29kZWRQYXNzd29yZC5zb21lKChieXRlLCBpKSA9PiBieXRlICE9PSBvcmlnaW5hbFBhc3N3b3JkW2ldKSkge1xuICAgICAgICBkZWNvZGVkUGFzc3dvcmQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm9yaWdpbmFsUGFzc3dvcmQpO1xuICAgIH1cbiAgICBjb25zdCBwYXNzd29yZFRyYW5zZm9ybWVkID0gbmV3IFVpbnQ4QXJyYXkoZGVjb2RlZFBhc3N3b3JkLmxlbmd0aCAqIDIgKyAyKTtcbiAgICBjb25zdCBwYXNzd29yZFZpZXcgPSBuZXcgRGF0YVZpZXcocGFzc3dvcmRUcmFuc2Zvcm1lZC5idWZmZXIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVjb2RlZFBhc3N3b3JkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBhc3N3b3JkVmlldy5zZXRVaW50MTYoaSAqIDIsIGRlY29kZWRQYXNzd29yZC5jaGFyQ29kZUF0KGkpLCBmYWxzZSk7XG4gICAgfVxuICAgIHBhc3N3b3JkVmlldy5zZXRVaW50MTYoZGVjb2RlZFBhc3N3b3JkLmxlbmd0aCAqIDIsIDAsIGZhbHNlKTtcbiAgICBjb25zdCBEID0gbmV3IFVpbnQ4QXJyYXkodikuZmlsbCgzKTtcbiAgICBjb25zdCBzYWx0VmlldyA9IG5ldyBVaW50OEFycmF5KHNhbHQpO1xuICAgIGNvbnN0IFMgPSBuZXcgVWludDhBcnJheSh2ICogTWF0aC5jZWlsKHNhbHRWaWV3Lmxlbmd0aCAvIHYpKS5tYXAoKF8sIGkpID0+IHNhbHRWaWV3W2kgJSBzYWx0Vmlldy5sZW5ndGhdKTtcbiAgICBjb25zdCBQID0gbmV3IFVpbnQ4QXJyYXkodiAqIE1hdGguY2VpbChwYXNzd29yZFRyYW5zZm9ybWVkLmxlbmd0aCAvIHYpKS5tYXAoKF8sIGkpID0+IHBhc3N3b3JkVHJhbnNmb3JtZWRbaSAlIHBhc3N3b3JkVHJhbnNmb3JtZWQubGVuZ3RoXSk7XG4gICAgbGV0IEkgPSBuZXcgVWludDhBcnJheShTLmxlbmd0aCArIFAubGVuZ3RoKTtcbiAgICBJLnNldChTKTtcbiAgICBJLnNldChQLCBTLmxlbmd0aCk7XG4gICAgY29uc3QgYyA9IE1hdGguY2VpbCgoa2V5TGVuZ3RoID4+IDMpIC8gdSk7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjOyBpKyspIHtcbiAgICAgICAgbGV0IEEgPSBuZXcgVWludDhBcnJheShELmxlbmd0aCArIEkubGVuZ3RoKTtcbiAgICAgICAgQS5zZXQoRCk7XG4gICAgICAgIEEuc2V0KEksIEQubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpdGVyYXRpb25Db3VudDsgaisrKSB7XG4gICAgICAgICAgICBBID0gbWQoQSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgQiA9IG5ldyBVaW50OEFycmF5KHYpLm1hcCgoXywgaSkgPT4gQVtpICUgQS5sZW5ndGhdKTtcbiAgICAgICAgY29uc3QgayA9IE1hdGguY2VpbChzYWx0Vmlldy5sZW5ndGggLyB2KSArIE1hdGguY2VpbChwYXNzd29yZFRyYW5zZm9ybWVkLmxlbmd0aCAvIHYpO1xuICAgICAgICBjb25zdCBpUm91bmQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gQXJyYXkuZnJvbShJLnNsaWNlKGogKiB2LCAoaiArIDEpICogdikpO1xuICAgICAgICAgICAgbGV0IHggPSAweDFmZjtcbiAgICAgICAgICAgIGZvciAobGV0IGwgPSBCLmxlbmd0aCAtIDE7IGwgPj0gMDsgbC0tKSB7XG4gICAgICAgICAgICAgICAgeCA+Pj0gODtcbiAgICAgICAgICAgICAgICB4ICs9IEJbbF0gKyAoY2h1bmtbbF0gfHwgMCk7XG4gICAgICAgICAgICAgICAgY2h1bmtbbF0gPSB4ICYgMHhmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlSb3VuZC5wdXNoKC4uLmNodW5rKTtcbiAgICAgICAgfVxuICAgICAgICBJID0gbmV3IFVpbnQ4QXJyYXkoaVJvdW5kKTtcbiAgICAgICAgcmVzdWx0LnB1c2goLi4uQSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVWludDhBcnJheShyZXN1bHQuc2xpY2UoMCwga2V5TGVuZ3RoID4+IDMpKS5idWZmZXI7XG59XG5mdW5jdGlvbiBwcmVwYXJlQWxnb3JpdGhtKGRhdGEpIHtcbiAgICBjb25zdCByZXMgPSB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICA/IHsgbmFtZTogZGF0YSB9XG4gICAgICAgIDogZGF0YTtcbiAgICBpZiAoXCJoYXNoXCIgaW4gcmVzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5yZXMsXG4gICAgICAgICAgICBoYXNoOiBwcmVwYXJlQWxnb3JpdGhtKHJlcy5oYXNoKVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuY2xhc3MgQ3J5cHRvRW5naW5lIGV4dGVuZHMgQWJzdHJhY3RDcnlwdG9FbmdpbmUge1xuICAgIGFzeW5jIGltcG9ydEtleShmb3JtYXQsIGtleURhdGEsIGFsZ29yaXRobSwgZXh0cmFjdGFibGUsIGtleVVzYWdlcykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgbGV0IGp3ayA9IHt9O1xuICAgICAgICBjb25zdCBhbGcgPSBwcmVwYXJlQWxnb3JpdGhtKGFsZ29yaXRobSk7XG4gICAgICAgIHN3aXRjaCAoZm9ybWF0LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJyYXdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdWJ0bGUuaW1wb3J0S2V5KFwicmF3XCIsIGtleURhdGEsIGFsZ29yaXRobSwgZXh0cmFjdGFibGUsIGtleVVzYWdlcyk7XG4gICAgICAgICAgICBjYXNlIFwic3BraVwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5mcm9tQkVSKHB2dHN1dGlscy5CdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9BcnJheUJ1ZmZlcihrZXlEYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIEFzbkVycm9yLmFzc2VydChhc24xLCBcImtleURhdGFcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleUluZm8gPSBuZXcgUHVibGljS2V5SW5mbygpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljS2V5SW5mby5mcm9tU2NoZW1hKGFzbjEucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFcnJvcihcIkluY29ycmVjdCBrZXlEYXRhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYWxnLm5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJTQS1QU1NcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxnLmhhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXJhbWV0ZXJFcnJvcihcImhhc2hcIiwgXCJhbGdvcml0aG0uaGFzaFwiLCBcIkluY29ycmVjdCBoYXNoIGFsZ29yaXRobTogSGFzaCBhbGdvcml0aG0gaXMgbWlzc2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYWxnLmhhc2gubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJQUzFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtMjU2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUFMyNTZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtMzg0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUFMzODRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtNTEyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUFM1MTJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgaGFzaCBhbGdvcml0aG06ICR7YWxnLmhhc2gubmFtZS50b1VwcGVyQ2FzZSgpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJTQVNTQS1QS0NTMS1WMV81XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlVc2FnZXMgPSBbXCJ2ZXJpZnlcIl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5rdHkgPSBcIlJTQVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suZXh0ID0gZXh0cmFjdGFibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5rZXlfb3BzID0ga2V5VXNhZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHVibGljS2V5SW5mby5hbGdvcml0aG0uYWxnb3JpdGhtSWQgIT09IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjFcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IHB1YmxpYyBrZXkgYWxnb3JpdGhtOiAke3B1YmxpY0tleUluZm8uYWxnb3JpdGhtLmFsZ29yaXRobUlkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWp3ay5hbGcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxnLmhhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGFyYW1ldGVyRXJyb3IoXCJoYXNoXCIsIFwiYWxnb3JpdGhtLmhhc2hcIiwgXCJJbmNvcnJlY3QgaGFzaCBhbGdvcml0aG06IEhhc2ggYWxnb3JpdGhtIGlzIG1pc3NlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYWxnLmhhc2gubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0xXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5hbGcgPSBcIlJTMVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTI1NlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJSUzI1NlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTM4NFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJSUzM4NFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTUxMlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJSUzUxMlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBoYXNoIGFsZ29yaXRobTogJHthbGcuaGFzaC5uYW1lLnRvVXBwZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHVibGljS2V5SlNPTiA9IHB1YmxpY0tleUluZm8udG9KU09OKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oandrLCBwdWJsaWNLZXlKU09OKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiRUNEU0FcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlVc2FnZXMgPSBbXCJ2ZXJpZnlcIl07XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiRUNESFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga3R5OiBcIkVDXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHQ6IGV4dHJhY3RhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5X29wczoga2V5VXNhZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwdWJsaWNLZXlJbmZvLmFsZ29yaXRobS5hbGdvcml0aG1JZCAhPT0gXCIxLjIuODQwLjEwMDQ1LjIuMVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBwdWJsaWMga2V5IGFsZ29yaXRobTogJHtwdWJsaWNLZXlJbmZvLmFsZ29yaXRobS5hbGdvcml0aG1JZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwdWJsaWNLZXlKU09OID0gcHVibGljS2V5SW5mby50b0pTT04oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqd2ssIHB1YmxpY0tleUpTT04pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJSU0EtT0FFUFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmt0eSA9IFwiUlNBXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5leHQgPSBleHRyYWN0YWJsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmtleV9vcHMgPSBrZXlVc2FnZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJzYWZhcmlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5hbGcgPSBcIlJTQS1PQUVQXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGcuaGFzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXJhbWV0ZXJFcnJvcihcImhhc2hcIiwgXCJhbGdvcml0aG0uaGFzaFwiLCBcIkluY29ycmVjdCBoYXNoIGFsZ29yaXRobTogSGFzaCBhbGdvcml0aG0gaXMgbWlzc2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhbGcuaGFzaC5uYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUlNBLU9BRVBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0yNTZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUlNBLU9BRVAtMjU2XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtMzg0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5hbGcgPSBcIlJTQS1PQUVQLTM4NFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTUxMlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJSU0EtT0FFUC01MTJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgaGFzaCBhbGdvcml0aG06ICR7YWxnLmhhc2gubmFtZS50b1VwcGVyQ2FzZSgpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleUpTT04gPSBwdWJsaWNLZXlJbmZvLnRvSlNPTigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGp3aywgcHVibGljS2V5SlNPTik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJTQUVTLVBLQ1MxLVYxXzVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5rdHkgPSBcIlJTQVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suZXh0ID0gZXh0cmFjdGFibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5rZXlfb3BzID0ga2V5VXNhZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJQUzFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHVibGljS2V5SlNPTiA9IHB1YmxpY0tleUluZm8udG9KU09OKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oandrLCBwdWJsaWNLZXlKU09OKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IGFsZ29yaXRobSBuYW1lOiAke2FsZy5uYW1lLnRvVXBwZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicGtjczhcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaXZhdGVLZXlJbmZvID0gbmV3IFByaXZhdGVLZXlJbmZvKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuZnJvbUJFUihwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvQXJyYXlCdWZmZXIoa2V5RGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICBBc25FcnJvci5hc3NlcnQoYXNuMSwgXCJrZXlEYXRhXCIpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZUtleUluZm8uZnJvbVNjaGVtYShhc24xLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3Qga2V5RGF0YVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXByaXZhdGVLZXlJbmZvLnBhcnNlZEtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCBrZXlEYXRhXCIpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGFsZy5uYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJSU0EtUFNTXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKChfYSA9IGFsZy5oYXNoKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJQUzFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtMjU2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUFMyNTZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtMzg0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUFMzODRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtNTEyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUFM1MTJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgaGFzaCBhbGdvcml0aG06ICR7KF9iID0gYWxnLmhhc2gpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5uYW1lLnRvVXBwZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUlNBU1NBLVBLQ1MxLVYxXzVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVVzYWdlcyA9IFtcInNpZ25cIl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5rdHkgPSBcIlJTQVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suZXh0ID0gZXh0cmFjdGFibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5rZXlfb3BzID0ga2V5VXNhZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJpdmF0ZUtleUluZm8ucHJpdmF0ZUtleUFsZ29yaXRobS5hbGdvcml0aG1JZCAhPT0gXCIxLjIuODQwLjExMzU0OS4xLjEuMVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgcHJpdmF0ZSBrZXkgYWxnb3JpdGhtOiAke3ByaXZhdGVLZXlJbmZvLnByaXZhdGVLZXlBbGdvcml0aG0uYWxnb3JpdGhtSWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoXCJhbGdcIiBpbiBqd2spID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgoX2MgPSBhbGcuaGFzaCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtMVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJSUzFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0yNTZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUlMyNTZcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0zODRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUlMzODRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS01MTJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUlM1MTJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgaGFzaCBhbGdvcml0aG06ICR7KF9kID0gYWxnLmhhc2gpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5uYW1lLnRvVXBwZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpdmF0ZUtleUpTT04gPSBwcml2YXRlS2V5SW5mby50b0pTT04oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqd2ssIHByaXZhdGVLZXlKU09OKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiRUNEU0FcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlVc2FnZXMgPSBbXCJzaWduXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkVDREhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ayA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGt0eTogXCJFQ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0OiBleHRyYWN0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleV9vcHM6IGtleVVzYWdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJpdmF0ZUtleUluZm8ucHJpdmF0ZUtleUFsZ29yaXRobS5hbGdvcml0aG1JZCAhPT0gXCIxLjIuODQwLjEwMDQ1LjIuMVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgYWxnb3JpdGhtOiAke3ByaXZhdGVLZXlJbmZvLnByaXZhdGVLZXlBbGdvcml0aG0uYWxnb3JpdGhtSWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaXZhdGVLZXlKU09OID0gcHJpdmF0ZUtleUluZm8udG9KU09OKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oandrLCBwcml2YXRlS2V5SlNPTik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJTQS1PQUVQXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2sua3R5ID0gXCJSU0FcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmV4dCA9IGV4dHJhY3RhYmxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2sua2V5X29wcyA9IGtleVVzYWdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInNhZmFyaVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUlNBLU9BRVBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKChfZSA9IGFsZy5oYXNoKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0xXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5hbGcgPSBcIlJTQS1PQUVQXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtMjU2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5hbGcgPSBcIlJTQS1PQUVQLTI1NlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTM4NFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJSU0EtT0FFUC0zODRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS01MTJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgandrLmFsZyA9IFwiUlNBLU9BRVAtNTEyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IGhhc2ggYWxnb3JpdGhtOiAkeyhfZiA9IGFsZy5oYXNoKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YubmFtZS50b1VwcGVyQ2FzZSgpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaXZhdGVLZXlKU09OID0gcHJpdmF0ZUtleUluZm8udG9KU09OKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oandrLCBwcml2YXRlS2V5SlNPTik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJTQUVTLVBLQ1MxLVYxXzVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVVzYWdlcyA9IFtcImRlY3J5cHRcIl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5rdHkgPSBcIlJTQVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suZXh0ID0gZXh0cmFjdGFibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp3ay5rZXlfb3BzID0ga2V5VXNhZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqd2suYWxnID0gXCJQUzFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpdmF0ZUtleUpTT04gPSBwcml2YXRlS2V5SW5mby50b0pTT04oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqd2ssIHByaXZhdGVLZXlKU09OKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IGFsZ29yaXRobSBuYW1lOiAke2FsZy5uYW1lLnRvVXBwZXJDYXNlKCl9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiandrXCI6XG4gICAgICAgICAgICAgICAgandrID0ga2V5RGF0YTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgZm9ybWF0OiAke2Zvcm1hdH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic2FmYXJpXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VidGxlLmltcG9ydEtleShcImp3a1wiLCBwdnV0aWxzLnN0cmluZ1RvQXJyYXlCdWZmZXIoSlNPTi5zdHJpbmdpZnkoandrKSksIGFsZ29yaXRobSwgZXh0cmFjdGFibGUsIGtleVVzYWdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VidGxlLmltcG9ydEtleShcImp3a1wiLCBqd2ssIGFsZ29yaXRobSwgZXh0cmFjdGFibGUsIGtleVVzYWdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3VidGxlLmltcG9ydEtleShcImp3a1wiLCBqd2ssIGFsZ29yaXRobSwgZXh0cmFjdGFibGUsIGtleVVzYWdlcyk7XG4gICAgfVxuICAgIGFzeW5jIGV4cG9ydEtleShmb3JtYXQsIGtleSkge1xuICAgICAgICBsZXQgandrID0gYXdhaXQgdGhpcy5zdWJ0bGUuZXhwb3J0S2V5KFwiandrXCIsIGtleSk7XG4gICAgICAgIGlmICh0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJzYWZhcmlcIikge1xuICAgICAgICAgICAgaWYgKGp3ayBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgandrID0gSlNPTi5wYXJzZShwdnV0aWxzLmFycmF5QnVmZmVyVG9TdHJpbmcoandrKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChmb3JtYXQudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcInJhd1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1YnRsZS5leHBvcnRLZXkoXCJyYXdcIiwga2V5KTtcbiAgICAgICAgICAgIGNhc2UgXCJzcGtpXCI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwdWJsaWNLZXlJbmZvID0gbmV3IFB1YmxpY0tleUluZm8oKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwdWJsaWNLZXlJbmZvLmZyb21KU09OKGp3ayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3Qga2V5IGRhdGFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwdWJsaWNLZXlJbmZvLnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInBrY3M4XCI6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcml2YXRlS2V5SW5mbyA9IG5ldyBQcml2YXRlS2V5SW5mbygpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHByaXZhdGVLZXlJbmZvLmZyb21KU09OKGp3ayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3Qga2V5IGRhdGFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwcml2YXRlS2V5SW5mby50b1NjaGVtYSgpLnRvQkVSKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJqd2tcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gandrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBmb3JtYXQ6ICR7Zm9ybWF0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbnZlcnQoaW5wdXRGb3JtYXQsIG91dHB1dEZvcm1hdCwga2V5RGF0YSwgYWxnb3JpdGhtLCBleHRyYWN0YWJsZSwga2V5VXNhZ2VzKSB7XG4gICAgICAgIGlmIChpbnB1dEZvcm1hdC50b0xvd2VyQ2FzZSgpID09PSBvdXRwdXRGb3JtYXQudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGtleURhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgdGhpcy5pbXBvcnRLZXkoaW5wdXRGb3JtYXQsIGtleURhdGEsIGFsZ29yaXRobSwgZXh0cmFjdGFibGUsIGtleVVzYWdlcyk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cG9ydEtleShvdXRwdXRGb3JtYXQsIGtleSk7XG4gICAgfVxuICAgIGdldEFsZ29yaXRobUJ5T0lEKG9pZCwgc2FmZXR5ID0gZmFsc2UsIHRhcmdldCkge1xuICAgICAgICBzd2l0Y2ggKG9pZCkge1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0FFUy1QS0NTMS12MV81XCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjEuMS41XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0FTU0EtUEtDUzEtdjFfNVwiLFxuICAgICAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS0xXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMTM1NDkuMS4xLjExXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0FTU0EtUEtDUzEtdjFfNVwiLFxuICAgICAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS0yNTZcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjExMzU0OS4xLjEuMTJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJTQVNTQS1QS0NTMS12MV81XCIsXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU0hBLTM4NFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUlNBU1NBLVBLQ1MxLXYxXzVcIixcbiAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtNTEyXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEwXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0EtUFNTXCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjEuMS43XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0EtT0FFUFwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjEwMDQ1LjIuMVwiOlxuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTAwNDUuNC4xXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJFQ0RTQVwiLFxuICAgICAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS0xXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMDA0NS40LjMuMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNEU0FcIixcbiAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMjU2XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMDA0NS40LjMuM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNEU0FcIixcbiAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMzg0XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMDA0NS40LjMuNFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNEU0FcIixcbiAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtNTEyXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMS4zLjEzMy4xNi44NDAuNjMuMC4yXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJFQ0RIXCIsXG4gICAgICAgICAgICAgICAgICAgIGtkZjogXCJTSEEtMVwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjMuMTMyLjEuMTEuMVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNESFwiLFxuICAgICAgICAgICAgICAgICAgICBrZGY6IFwiU0hBLTI1NlwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjMuMTMyLjEuMTEuMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNESFwiLFxuICAgICAgICAgICAgICAgICAgICBrZGY6IFwiU0hBLTM4NFwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjMuMTMyLjEuMTEuM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNESFwiLFxuICAgICAgICAgICAgICAgICAgICBrZGY6IFwiU0hBLTUxMlwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtQ0JDXCIsXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aDogMTI4XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQUVTLUNCQ1wiLFxuICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IDE5MlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMi4xNi44NDAuMS4xMDEuMy40LjEuNDJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1DQkNcIixcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAyNTZcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjZcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1HQ01cIixcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAxMjhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjI2XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtR0NNXCIsXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aDogMTkyXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40NlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQUVTLUdDTVwiLFxuICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IDI1NlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMi4xNi44NDAuMS4xMDEuMy40LjEuNFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQUVTLUNGQlwiLFxuICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IDEyOFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMi4xNi44NDAuMS4xMDEuMy40LjEuMjRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1DRkJcIixcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAxOTJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQ0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtQ0ZCXCIsXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aDogMjU2XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS41XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtS1dcIixcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAxMjhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjI1XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtS1dcIixcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAxOTJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQ1XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtS1dcIixcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAyNTZcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjIuN1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiSE1BQ1wiLFxuICAgICAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS0xXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMTM1NDkuMi45XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJITUFDXCIsXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU0hBLTI1NlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjIuMTBcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkhNQUNcIixcbiAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMzg0XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMTM1NDkuMi4xMVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiSE1BQ1wiLFxuICAgICAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS01MTJcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMy41XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJESFwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjMuMTQuMy4yLjI2XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMVwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMi4xXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMjU2XCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjIuMTYuODQwLjEuMTAxLjMuNC4yLjJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS0zODRcIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwiMi4xNi44NDAuMS4xMDEuMy40LjIuM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU0hBLTUxMlwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjExMzU0OS4xLjUuMTJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlBCS0RGMlwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjEwMDQ1LjMuMS43XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJQLTI1NlwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCIxLjMuMTMyLjAuMzRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlAtMzg0XCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIjEuMy4xMzIuMC4zNVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUC01MjFcIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNhZmV0eSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBhbGdvcml0aG0gaWRlbnRpZmllciAke3RhcmdldCA/IGBmb3IgJHt0YXJnZXR9IGAgOiBFTVBUWV9TVFJJTkd9OiAke29pZH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGdldE9JREJ5QWxnb3JpdGhtKGFsZ29yaXRobSwgc2FmZXR5ID0gZmFsc2UsIHRhcmdldCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gRU1QVFlfU1RSSU5HO1xuICAgICAgICBzd2l0Y2ggKGFsZ29yaXRobS5uYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJSU0FFUy1QS0NTMS1WMV81XCI6XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIxLjIuODQwLjExMzU0OS4xLjEuMVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlJTQVNTQS1QS0NTMS1WMV81XCI6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhbGdvcml0aG0uaGFzaC5uYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0xXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuMS41XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0yNTZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjExXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0zODRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS01MTJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEzXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUlNBLVBTU1wiOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEwXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUlNBLU9BRVBcIjpcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuMS43XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiRUNEU0FcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGFsZ29yaXRobS5oYXNoLm5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMDA0NS40LjFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTI1NlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIxLjIuODQwLjEwMDQ1LjQuMy4yXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0zODRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMDA0NS40LjMuM1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtNTEyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjEuMi44NDAuMTAwNDUuNC4zLjRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJFQ0RIXCI6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhbGdvcml0aG0ua2RmLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0xXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjEuMy4xMzMuMTYuODQwLjYzLjAuMlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtMjU2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjEuMy4xMzIuMS4xMS4xXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0zODRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4zLjEzMi4xLjExLjJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTUxMlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIxLjMuMTMyLjEuMTEuM1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFFUy1DVFJcIjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBRVMtQ0JDXCI6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhbGdvcml0aG0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI4OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjIyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNTY6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQUVTLUNNQUNcIjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBRVMtR0NNXCI6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhbGdvcml0aG0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI4OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS42XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjI2XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNTY6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQ2XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQUVTLUNGQlwiOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYWxnb3JpdGhtLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEyODpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMi4xNi44NDAuMS4xMDEuMy40LjEuNFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTkyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yNFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjU2OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40NFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFFUy1LV1wiOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYWxnb3JpdGhtLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEyODpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMi4xNi44NDAuMS4xMDEuMy40LjEuNVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTkyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yNVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjU2OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40NVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkhNQUNcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGFsZ29yaXRobS5oYXNoLm5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMi43XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0yNTZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMi45XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNIQS0zODRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMi4xMFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTSEEtNTEyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjEuMi44NDAuMTEzNTQ5LjIuMTFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJESFwiOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjMuNVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlNIQS0xXCI6XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIxLjMuMTQuMy4yLjI2XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiU0hBLTI1NlwiOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMi4xNi44NDAuMS4xMDEuMy40LjIuMVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlNIQS0zODRcIjpcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjIuMTYuODQwLjEuMTAxLjMuNC4yLjJcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJTSEEtNTEyXCI6XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMi4zXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ09OQ0FUXCI6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiSEtERlwiOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlBCS0RGMlwiOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4yLjg0MC4xMTM1NDkuMS41LjEyXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUC0yNTZcIjpcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjEuMi44NDAuMTAwNDUuMy4xLjdcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJQLTM4NFwiOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiMS4zLjEzMi4wLjM0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUC01MjFcIjpcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBcIjEuMy4xMzIuMC4zNVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVzdWx0ICYmIHNhZmV0eSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBhbGdvcml0aG0gJHt0YXJnZXQgPyBgZm9yICR7dGFyZ2V0fSBgIDogRU1QVFlfU1RSSU5HfTogJHthbGdvcml0aG0ubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXRBbGdvcml0aG1QYXJhbWV0ZXJzKGFsZ29yaXRobU5hbWUsIG9wZXJhdGlvbikge1xuICAgICAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICAgICAgYWxnb3JpdGhtOiB7fSxcbiAgICAgICAgICAgIHVzYWdlczogW11cbiAgICAgICAgfTtcbiAgICAgICAgc3dpdGNoIChhbGdvcml0aG1OYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJSU0FFUy1QS0NTMS1WMV81XCI6XG4gICAgICAgICAgICBjYXNlIFwiUlNBU1NBLVBLQ1MxLVYxXzVcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJnZW5lcmF0ZWtleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJTQVNTQS1QS0NTMS12MV81XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsdXNMZW5ndGg6IDIwNDgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpY0V4cG9uZW50OiBuZXcgVWludDhBcnJheShbMHgwMSwgMHgwMCwgMHgwMV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS0yNTZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcInNpZ25cIiwgXCJ2ZXJpZnlcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZlcmlmeVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2lnblwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW1wb3J0a2V5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUlNBU1NBLVBLQ1MxLXYxXzVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMjU2XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJ2ZXJpZnlcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4cG9ydGtleVwiOlxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0FTU0EtUEtDUzEtdjFfNVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJSU0EtUFNTXCI6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRpb24udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2lnblwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidmVyaWZ5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUlNBLVBTU1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FsdExlbmd0aDogMjBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW1wic2lnblwiLCBcInZlcmlmeVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2VuZXJhdGVrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0EtUFNTXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsdXNMZW5ndGg6IDIwNDgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpY0V4cG9uZW50OiBuZXcgVWludDhBcnJheShbMHgwMSwgMHgwMCwgMHgwMV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlNIQS0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJzaWduXCIsIFwidmVyaWZ5XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbXBvcnRrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0EtUFNTXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU0hBLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcInZlcmlmeVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXhwb3J0a2V5XCI6XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJTQS1QU1NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUlNBLU9BRVBcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmNyeXB0XCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkZWNyeXB0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUlNBLU9BRVBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJlbmNyeXB0XCIsIFwiZGVjcnlwdFwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2VuZXJhdGVrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSU0EtT0FFUFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bHVzTGVuZ3RoOiAyMDQ4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWNFeHBvbmVudDogbmV3IFVpbnQ4QXJyYXkoWzB4MDEsIDB4MDAsIDB4MDFdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMjU2XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJlbmNyeXB0XCIsIFwiZGVjcnlwdFwiLCBcIndyYXBLZXlcIiwgXCJ1bndyYXBLZXlcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImltcG9ydGtleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJTQS1PQUVQXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU0hBLTI1NlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW1wiZW5jcnlwdFwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXhwb3J0a2V5XCI6XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJTQS1PQUVQXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkVDRFNBXCI6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRpb24udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2VuZXJhdGVrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJFQ0RTQVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZEN1cnZlOiBcIlAtMjU2XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW1wic2lnblwiLCBcInZlcmlmeVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW1wb3J0a2V5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNEU0FcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWRDdXJ2ZTogXCJQLTI1NlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcInZlcmlmeVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidmVyaWZ5XCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzaWduXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNEU0FcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMjU2XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJzaWduXCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkVDRFNBXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkVDREhcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHBvcnRrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImltcG9ydGtleVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2VuZXJhdGVrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJFQ0RIXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVkQ3VydmU6IFwiUC0yNTZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJkZXJpdmVLZXlcIiwgXCJkZXJpdmVCaXRzXCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkZXJpdmVrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRlcml2ZWJpdHNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJFQ0RIXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVkQ3VydmU6IFwiUC0yNTZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJlbmNyeXB0XCIsIFwiZGVjcnlwdFwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJFQ0RIXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFFUy1DVFJcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbXBvcnRrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4cG9ydGtleVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2VuZXJhdGVrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtQ1RSXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogMjU2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcImVuY3J5cHRcIiwgXCJkZWNyeXB0XCIsIFwid3JhcEtleVwiLCBcInVud3JhcEtleVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGVjcnlwdFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5jcnlwdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1DVFJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcjogbmV3IFVpbnQ4QXJyYXkoMTYpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IDEwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcImVuY3J5cHRcIiwgXCJkZWNyeXB0XCIsIFwid3JhcEtleVwiLCBcInVud3JhcEtleVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtQ1RSXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFFUy1DQkNcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbXBvcnRrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4cG9ydGtleVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2VuZXJhdGVrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBRVMtQ0JDXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogMjU2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcImVuY3J5cHRcIiwgXCJkZWNyeXB0XCIsIFwid3JhcEtleVwiLCBcInVud3JhcEtleVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGVjcnlwdFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5jcnlwdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1DQkNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXY6IHRoaXMuZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDE2KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW1wiZW5jcnlwdFwiLCBcImRlY3J5cHRcIiwgXCJ3cmFwS2V5XCIsIFwidW53cmFwS2V5XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1DQkNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQUVTLUdDTVwiOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAob3BlcmF0aW9uLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImltcG9ydGtleVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXhwb3J0a2V5XCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJnZW5lcmF0ZWtleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1HQ01cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAyNTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW1wiZW5jcnlwdFwiLCBcImRlY3J5cHRcIiwgXCJ3cmFwS2V5XCIsIFwidW53cmFwS2V5XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkZWNyeXB0XCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmNyeXB0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQUVTLUdDTVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdjogdGhpcy5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTYpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJlbmNyeXB0XCIsIFwiZGVjcnlwdFwiLCBcIndyYXBLZXlcIiwgXCJ1bndyYXBLZXlcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQUVTLUdDTVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBRVMtS1dcIjpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbXBvcnRrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4cG9ydGtleVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2VuZXJhdGVrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIndyYXBrZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVud3JhcGtleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1LV1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IDI1NlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJ3cmFwS2V5XCIsIFwidW53cmFwS2V5XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFFUy1LV1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJITUFDXCI6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRpb24udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2lnblwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidmVyaWZ5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiSE1BQ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcInNpZ25cIiwgXCJ2ZXJpZnlcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImltcG9ydGtleVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXhwb3J0a2V5XCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJnZW5lcmF0ZWtleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkhNQUNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAzMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJTSEEtMjU2XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJzaWduXCIsIFwidmVyaWZ5XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkhNQUNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiSEtERlwiOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAob3BlcmF0aW9uLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRlcml2ZWtleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkhLREZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogXCJTSEEtMjU2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbHQ6IG5ldyBVaW50OEFycmF5KFtdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mbzogbmV3IFVpbnQ4QXJyYXkoW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcImVuY3J5cHRcIiwgXCJkZWNyeXB0XCJdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkhLREZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUEJLREYyXCI6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRpb24udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGVyaXZla2V5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUEJLREYyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6IHsgbmFtZTogXCJTSEEtMjU2XCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FsdDogbmV3IFVpbnQ4QXJyYXkoW10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25zOiAxMDAwMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXCJlbmNyeXB0XCIsIFwiZGVjcnlwdFwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJQQktERjJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2VzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZ2V0SGFzaEFsZ29yaXRobShzaWduYXR1cmVBbGdvcml0aG0pIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IEVNUFRZX1NUUklORztcbiAgICAgICAgc3dpdGNoIChzaWduYXR1cmVBbGdvcml0aG0uYWxnb3JpdGhtSWQpIHtcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjEwMDQ1LjQuMVwiOlxuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjEuMS41XCI6XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCJTSEEtMVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTAwNDUuNC4zLjJcIjpcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjExMzU0OS4xLjEuMTFcIjpcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBcIlNIQS0yNTZcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCIxLjIuODQwLjEwMDQ1LjQuMy4zXCI6XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEyXCI6XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCJTSEEtMzg0XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiMS4yLjg0MC4xMDA0NS40LjMuNFwiOlxuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xM1wiOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiU0hBLTUxMlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xMFwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBSU0FTU0FQU1NQYXJhbXMoeyBzY2hlbWE6IHNpZ25hdHVyZUFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmhhc2hBbGdvcml0aG0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGdvcml0aG0gPSB0aGlzLmdldEFsZ29yaXRobUJ5T0lEKHBhcmFtcy5oYXNoQWxnb3JpdGhtLmFsZ29yaXRobUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJuYW1lXCIgaW4gYWxnb3JpdGhtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGFsZ29yaXRobS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gXCJTSEEtMVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBlbmNyeXB0RW5jcnlwdGVkQ29udGVudEluZm8ocGFyYW1ldGVycykge1xuICAgICAgICBQYXJhbWV0ZXJFcnJvci5hc3NlcnQocGFyYW1ldGVycywgXCJwYXNzd29yZFwiLCBcImNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtXCIsIFwiaG1hY0hhc2hBbGdvcml0aG1cIiwgXCJpdGVyYXRpb25Db3VudFwiLCBcImNvbnRlbnRUb0VuY3J5cHRcIiwgXCJjb250ZW50VG9FbmNyeXB0XCIsIFwiY29udGVudFR5cGVcIik7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbmNyeXB0aW9uT0lEID0gdGhpcy5nZXRPSURCeUFsZ29yaXRobShwYXJhbWV0ZXJzLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLCB0cnVlLCBcImNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtXCIpO1xuICAgICAgICBjb25zdCBwYmtkZjJPSUQgPSB0aGlzLmdldE9JREJ5QWxnb3JpdGhtKHtcbiAgICAgICAgICAgIG5hbWU6IFwiUEJLREYyXCJcbiAgICAgICAgfSwgdHJ1ZSwgXCJQQktERjJcIik7XG4gICAgICAgIGNvbnN0IGhtYWNPSUQgPSB0aGlzLmdldE9JREJ5QWxnb3JpdGhtKHtcbiAgICAgICAgICAgIG5hbWU6IFwiSE1BQ1wiLFxuICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHBhcmFtZXRlcnMuaG1hY0hhc2hBbGdvcml0aG1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdHJ1ZSwgXCJobWFjSGFzaEFsZ29yaXRobVwiKTtcbiAgICAgICAgY29uc3QgaXZCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMTYpO1xuICAgICAgICBjb25zdCBpdlZpZXcgPSBuZXcgVWludDhBcnJheShpdkJ1ZmZlcik7XG4gICAgICAgIHRoaXMuZ2V0UmFuZG9tVmFsdWVzKGl2Vmlldyk7XG4gICAgICAgIGNvbnN0IHNhbHRCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNjQpO1xuICAgICAgICBjb25zdCBzYWx0VmlldyA9IG5ldyBVaW50OEFycmF5KHNhbHRCdWZmZXIpO1xuICAgICAgICB0aGlzLmdldFJhbmRvbVZhbHVlcyhzYWx0Vmlldyk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocGFyYW1ldGVycy5jb250ZW50VG9FbmNyeXB0KTtcbiAgICAgICAgY29uc3QgcGJrZGYyUGFyYW1zID0gbmV3IFBCS0RGMlBhcmFtcyh7XG4gICAgICAgICAgICBzYWx0OiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IHNhbHRCdWZmZXIgfSksXG4gICAgICAgICAgICBpdGVyYXRpb25Db3VudDogcGFyYW1ldGVycy5pdGVyYXRpb25Db3VudCxcbiAgICAgICAgICAgIHByZjogbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBobWFjT0lELFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5OdWxsKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXNzd29yZFZpZXcgPSBuZXcgVWludDhBcnJheShwYXJhbWV0ZXJzLnBhc3N3b3JkKTtcbiAgICAgICAgY29uc3QgcGJrZGZLZXkgPSBhd2FpdCB0aGlzLmltcG9ydEtleShcInJhd1wiLCBwYXNzd29yZFZpZXcsIFwiUEJLREYyXCIsIGZhbHNlLCBbXCJkZXJpdmVLZXlcIl0pO1xuICAgICAgICBjb25zdCBkZXJpdmVkS2V5ID0gYXdhaXQgdGhpcy5kZXJpdmVLZXkoe1xuICAgICAgICAgICAgbmFtZTogXCJQQktERjJcIixcbiAgICAgICAgICAgIGhhc2g6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBwYXJhbWV0ZXJzLmhtYWNIYXNoQWxnb3JpdGhtXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2FsdDogc2FsdFZpZXcsXG4gICAgICAgICAgICBpdGVyYXRpb25zOiBwYXJhbWV0ZXJzLml0ZXJhdGlvbkNvdW50XG4gICAgICAgIH0sIHBia2RmS2V5LCBwYXJhbWV0ZXJzLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLCBmYWxzZSwgW1wiZW5jcnlwdFwiXSk7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZERhdGEgPSBhd2FpdCB0aGlzLmVuY3J5cHQoe1xuICAgICAgICAgICAgbmFtZTogcGFyYW1ldGVycy5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobS5uYW1lLFxuICAgICAgICAgICAgaXY6IGl2Vmlld1xuICAgICAgICB9LCBkZXJpdmVkS2V5LCBjb250ZW50Vmlldyk7XG4gICAgICAgIGNvbnN0IHBiZXMyUGFyYW1ldGVycyA9IG5ldyBQQkVTMlBhcmFtcyh7XG4gICAgICAgICAgICBrZXlEZXJpdmF0aW9uRnVuYzogbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBwYmtkZjJPSUQsXG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtUGFyYW1zOiBwYmtkZjJQYXJhbXMudG9TY2hlbWEoKVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBlbmNyeXB0aW9uU2NoZW1lOiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IGNvbnRlbnRFbmNyeXB0aW9uT0lELFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBpdkJ1ZmZlciB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgRW5jcnlwdGVkQ29udGVudEluZm8oe1xuICAgICAgICAgICAgY29udGVudFR5cGU6IHBhcmFtZXRlcnMuY29udGVudFR5cGUsXG4gICAgICAgICAgICBjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobTogbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBcIjEuMi44NDAuMTEzNTQ5LjEuNS4xM1wiLFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogcGJlczJQYXJhbWV0ZXJzLnRvU2NoZW1hKClcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZW5jcnlwdGVkQ29udGVudDogbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBlbmNyeXB0ZWREYXRhIH0pXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBkZWNyeXB0RW5jcnlwdGVkQ29udGVudEluZm8ocGFyYW1ldGVycykge1xuICAgICAgICBQYXJhbWV0ZXJFcnJvci5hc3NlcnQocGFyYW1ldGVycywgXCJwYXNzd29yZFwiLCBcImVuY3J5cHRlZENvbnRlbnRJbmZvXCIpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5lbmNyeXB0ZWRDb250ZW50SW5mby5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1JZCAhPT0gXCIxLjIuODQwLjExMzU0OS4xLjUuMTNcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBcImNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtXCI6ICR7cGFyYW1ldGVycy5lbmNyeXB0ZWRDb250ZW50SW5mby5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1JZH1gKTtcbiAgICAgICAgbGV0IHBiZXMyUGFyYW1ldGVycztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBiZXMyUGFyYW1ldGVycyA9IG5ldyBQQkVTMlBhcmFtcyh7IHNjaGVtYTogcGFyYW1ldGVycy5lbmNyeXB0ZWRDb250ZW50SW5mby5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3RseSBlbmNvZGVkIFxcXCJwYmVzMlBhcmFtZXRlcnNcXFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYmtkZjJQYXJhbXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwYmtkZjJQYXJhbXMgPSBuZXcgUEJLREYyUGFyYW1zKHsgc2NoZW1hOiBwYmVzMlBhcmFtZXRlcnMua2V5RGVyaXZhdGlvbkZ1bmMuYWxnb3JpdGhtUGFyYW1zIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5jb3JyZWN0bHkgZW5jb2RlZCBcXFwicGJrZGYyUGFyYW1zXFxcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobSA9IHRoaXMuZ2V0QWxnb3JpdGhtQnlPSUQocGJlczJQYXJhbWV0ZXJzLmVuY3J5cHRpb25TY2hlbWUuYWxnb3JpdGhtSWQsIHRydWUpO1xuICAgICAgICBjb25zdCBpdkJ1ZmZlciA9IHBiZXMyUGFyYW1ldGVycy5lbmNyeXB0aW9uU2NoZW1lLmFsZ29yaXRobVBhcmFtcy52YWx1ZUJsb2NrLnZhbHVlSGV4O1xuICAgICAgICBjb25zdCBpdlZpZXcgPSBuZXcgVWludDhBcnJheShpdkJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IHNhbHRCdWZmZXIgPSBwYmtkZjJQYXJhbXMuc2FsdC52YWx1ZUJsb2NrLnZhbHVlSGV4O1xuICAgICAgICBjb25zdCBzYWx0VmlldyA9IG5ldyBVaW50OEFycmF5KHNhbHRCdWZmZXIpO1xuICAgICAgICBjb25zdCBpdGVyYXRpb25Db3VudCA9IHBia2RmMlBhcmFtcy5pdGVyYXRpb25Db3VudDtcbiAgICAgICAgbGV0IGhtYWNIYXNoQWxnb3JpdGhtID0gXCJTSEEtMVwiO1xuICAgICAgICBpZiAocGJrZGYyUGFyYW1zLnByZikge1xuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtID0gdGhpcy5nZXRBbGdvcml0aG1CeU9JRChwYmtkZjJQYXJhbXMucHJmLmFsZ29yaXRobUlkLCB0cnVlKTtcbiAgICAgICAgICAgIGhtYWNIYXNoQWxnb3JpdGhtID0gYWxnb3JpdGhtLmhhc2gubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYmtkZktleSA9IGF3YWl0IHRoaXMuaW1wb3J0S2V5KFwicmF3XCIsIHBhcmFtZXRlcnMucGFzc3dvcmQsIFwiUEJLREYyXCIsIGZhbHNlLCBbXCJkZXJpdmVLZXlcIl0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmRlcml2ZUtleSh7XG4gICAgICAgICAgICBuYW1lOiBcIlBCS0RGMlwiLFxuICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IGhtYWNIYXNoQWxnb3JpdGhtXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2FsdDogc2FsdFZpZXcsXG4gICAgICAgICAgICBpdGVyYXRpb25zOiBpdGVyYXRpb25Db3VudFxuICAgICAgICB9LCBwYmtkZktleSwgY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0sIGZhbHNlLCBbXCJkZWNyeXB0XCJdKTtcbiAgICAgICAgY29uc3QgZGF0YUJ1ZmZlciA9IHBhcmFtZXRlcnMuZW5jcnlwdGVkQ29udGVudEluZm8uZ2V0RW5jcnlwdGVkQ29udGVudCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNyeXB0KHtcbiAgICAgICAgICAgIG5hbWU6IGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLm5hbWUsXG4gICAgICAgICAgICBpdjogaXZWaWV3XG4gICAgICAgIH0sIHJlc3VsdCwgZGF0YUJ1ZmZlcik7XG4gICAgfVxuICAgIGFzeW5jIHN0YW1wRGF0YVdpdGhQYXNzd29yZChwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGlmICgocGFyYW1ldGVycyBpbnN0YW5jZW9mIE9iamVjdCkgPT09IGZhbHNlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyYW1ldGVycyBtdXN0IGhhdmUgdHlwZSBcXFwiT2JqZWN0XFxcIlwiKTtcbiAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0KHBhcmFtZXRlcnMsIFwicGFzc3dvcmRcIiwgXCJoYXNoQWxnb3JpdGhtXCIsIFwiaXRlcmF0aW9uQ291bnRcIiwgXCJzYWx0XCIsIFwiY29udGVudFRvU3RhbXBcIik7XG4gICAgICAgIGxldCBsZW5ndGg7XG4gICAgICAgIHN3aXRjaCAocGFyYW1ldGVycy5oYXNoQWxnb3JpdGhtLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzaGEtMVwiOlxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IDE2MDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzaGEtMjU2XCI6XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gMjU2O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNoYS0zODRcIjpcbiAgICAgICAgICAgICAgICBsZW5ndGggPSAzODQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic2hhLTUxMlwiOlxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IDUxMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgXCJwYXJhbWV0ZXJzLmhhc2hBbGdvcml0aG1cIiBwYXJhbWV0ZXI6ICR7cGFyYW1ldGVycy5oYXNoQWxnb3JpdGhtfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhtYWNBbGdvcml0aG0gPSB7XG4gICAgICAgICAgICBuYW1lOiBcIkhNQUNcIixcbiAgICAgICAgICAgIGxlbmd0aCxcbiAgICAgICAgICAgIGhhc2g6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBwYXJhbWV0ZXJzLmhhc2hBbGdvcml0aG1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcGtjc0tleSA9IGF3YWl0IG1ha2VQS0NTMTJCMktleShwYXJhbWV0ZXJzLmhhc2hBbGdvcml0aG0sIGxlbmd0aCwgcGFyYW1ldGVycy5wYXNzd29yZCwgcGFyYW1ldGVycy5zYWx0LCBwYXJhbWV0ZXJzLml0ZXJhdGlvbkNvdW50KTtcbiAgICAgICAgY29uc3QgaG1hY0tleSA9IGF3YWl0IHRoaXMuaW1wb3J0S2V5KFwicmF3XCIsIG5ldyBVaW50OEFycmF5KHBrY3NLZXkpLCBobWFjQWxnb3JpdGhtLCBmYWxzZSwgW1wic2lnblwiXSk7XG4gICAgICAgIHJldHVybiB0aGlzLnNpZ24oaG1hY0FsZ29yaXRobSwgaG1hY0tleSwgbmV3IFVpbnQ4QXJyYXkocGFyYW1ldGVycy5jb250ZW50VG9TdGFtcCkpO1xuICAgIH1cbiAgICBhc3luYyB2ZXJpZnlEYXRhU3RhbXBlZFdpdGhQYXNzd29yZChwYXJhbWV0ZXJzKSB7XG4gICAgICAgIFBhcmFtZXRlckVycm9yLmFzc2VydChwYXJhbWV0ZXJzLCBcInBhc3N3b3JkXCIsIFwiaGFzaEFsZ29yaXRobVwiLCBcInNhbHRcIiwgXCJpdGVyYXRpb25Db3VudFwiLCBcImNvbnRlbnRUb1ZlcmlmeVwiLCBcInNpZ25hdHVyZVRvVmVyaWZ5XCIpO1xuICAgICAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICAgICAgc3dpdGNoIChwYXJhbWV0ZXJzLmhhc2hBbGdvcml0aG0udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcInNoYS0xXCI6XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gMTYwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNoYS0yNTZcIjpcbiAgICAgICAgICAgICAgICBsZW5ndGggPSAyNTY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic2hhLTM4NFwiOlxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IDM4NDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzaGEtNTEyXCI6XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gNTEyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBcInBhcmFtZXRlcnMuaGFzaEFsZ29yaXRobVwiIHBhcmFtZXRlcjogJHtwYXJhbWV0ZXJzLmhhc2hBbGdvcml0aG19YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG1hY0FsZ29yaXRobSA9IHtcbiAgICAgICAgICAgIG5hbWU6IFwiSE1BQ1wiLFxuICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgICAgaGFzaDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHBhcmFtZXRlcnMuaGFzaEFsZ29yaXRobVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwa2NzS2V5ID0gYXdhaXQgbWFrZVBLQ1MxMkIyS2V5KHBhcmFtZXRlcnMuaGFzaEFsZ29yaXRobSwgbGVuZ3RoLCBwYXJhbWV0ZXJzLnBhc3N3b3JkLCBwYXJhbWV0ZXJzLnNhbHQsIHBhcmFtZXRlcnMuaXRlcmF0aW9uQ291bnQpO1xuICAgICAgICBjb25zdCBobWFjS2V5ID0gYXdhaXQgdGhpcy5pbXBvcnRLZXkoXCJyYXdcIiwgbmV3IFVpbnQ4QXJyYXkocGtjc0tleSksIGhtYWNBbGdvcml0aG0sIGZhbHNlLCBbXCJ2ZXJpZnlcIl0pO1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJpZnkoaG1hY0FsZ29yaXRobSwgaG1hY0tleSwgbmV3IFVpbnQ4QXJyYXkocGFyYW1ldGVycy5zaWduYXR1cmVUb1ZlcmlmeSksIG5ldyBVaW50OEFycmF5KHBhcmFtZXRlcnMuY29udGVudFRvVmVyaWZ5KSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFNpZ25hdHVyZVBhcmFtZXRlcnMocHJpdmF0ZUtleSwgaGFzaEFsZ29yaXRobSA9IFwiU0hBLTFcIikge1xuICAgICAgICB0aGlzLmdldE9JREJ5QWxnb3JpdGhtKHsgbmFtZTogaGFzaEFsZ29yaXRobSB9LCB0cnVlLCBcImhhc2hBbGdvcml0aG1cIik7XG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZUFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB0aGlzLmdldEFsZ29yaXRobVBhcmFtZXRlcnMocHJpdmF0ZUtleS5hbGdvcml0aG0ubmFtZSwgXCJzaWduXCIpO1xuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHBhcmFtZXRlcnMuYWxnb3JpdGhtKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcmFtZXRlciAnYWxnb3JpdGhtJyBpcyBlbXB0eVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGdvcml0aG0gPSBwYXJhbWV0ZXJzLmFsZ29yaXRobTtcbiAgICAgICAgaWYgKFwiaGFzaFwiIGluIHByaXZhdGVLZXkuYWxnb3JpdGhtICYmIHByaXZhdGVLZXkuYWxnb3JpdGhtLmhhc2ggJiYgcHJpdmF0ZUtleS5hbGdvcml0aG0uaGFzaC5uYW1lKSB7XG4gICAgICAgICAgICBhbGdvcml0aG0uaGFzaC5uYW1lID0gcHJpdmF0ZUtleS5hbGdvcml0aG0uaGFzaC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxnb3JpdGhtLmhhc2gubmFtZSA9IGhhc2hBbGdvcml0aG07XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChwcml2YXRlS2V5LmFsZ29yaXRobS5uYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJSU0FTU0EtUEtDUzEtVjFfNVwiOlxuICAgICAgICAgICAgY2FzZSBcIkVDRFNBXCI6XG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlQWxnb3JpdGhtLmFsZ29yaXRobUlkID0gdGhpcy5nZXRPSURCeUFsZ29yaXRobShhbGdvcml0aG0sIHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlJTQS1QU1NcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYWxnb3JpdGhtLmhhc2gubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTI1NlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobS5zYWx0TGVuZ3RoID0gMzI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTM4NFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobS5zYWx0TGVuZ3RoID0gNDg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0hBLTUxMlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobS5zYWx0TGVuZ3RoID0gNjQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zT2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGdvcml0aG0uaGFzaC5uYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiU0hBLTFcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaEFsZ29yaXRobU9JRCA9IHRoaXMuZ2V0T0lEQnlBbGdvcml0aG0oeyBuYW1lOiBhbGdvcml0aG0uaGFzaC5uYW1lIH0sIHRydWUsIFwiaGFzaEFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc09iamVjdC5oYXNoQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBoYXNoQWxnb3JpdGhtT0lELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5OdWxsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zT2JqZWN0Lm1hc2tHZW5BbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IHBhcmFtc09iamVjdC5oYXNoQWxnb3JpdGhtLnRvU2NoZW1hKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGdvcml0aG0uc2FsdExlbmd0aCAhPT0gMjApXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNPYmplY3Quc2FsdExlbmd0aCA9IGFsZ29yaXRobS5zYWx0TGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwc3NQYXJhbWV0ZXJzID0gbmV3IFJTQVNTQVBTU1BhcmFtcyhwYXJhbXNPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVBbGdvcml0aG0uYWxnb3JpdGhtSWQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xMFwiO1xuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVBbGdvcml0aG0uYWxnb3JpdGhtUGFyYW1zID0gcHNzUGFyYW1ldGVycy50b1NjaGVtYSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBzaWduYXR1cmUgYWxnb3JpdGhtOiAke3ByaXZhdGVLZXkuYWxnb3JpdGhtLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNpZ25hdHVyZUFsZ29yaXRobSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgc2lnbldpdGhQcml2YXRlS2V5KGRhdGEsIHByaXZhdGVLZXksIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgdGhpcy5zaWduKHBhcmFtZXRlcnMuYWxnb3JpdGhtLCBwcml2YXRlS2V5LCBkYXRhKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuYWxnb3JpdGhtLm5hbWUgPT09IFwiRUNEU0FcIikge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNNU0VDRFNBU2lnbmF0dXJlKHNpZ25hdHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpZ25hdHVyZTtcbiAgICB9XG4gICAgZmlsbFB1YmxpY0tleVBhcmFtZXRlcnMocHVibGljS2V5SW5mbywgc2lnbmF0dXJlQWxnb3JpdGhtKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgY29uc3Qgc2hhQWxnb3JpdGhtID0gdGhpcy5nZXRIYXNoQWxnb3JpdGhtKHNpZ25hdHVyZUFsZ29yaXRobSk7XG4gICAgICAgIGlmIChzaGFBbGdvcml0aG0gPT09IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgc2lnbmF0dXJlIGFsZ29yaXRobTogJHtzaWduYXR1cmVBbGdvcml0aG0uYWxnb3JpdGhtSWR9YCk7XG4gICAgICAgIGxldCBhbGdvcml0aG1JZDtcbiAgICAgICAgaWYgKHNpZ25hdHVyZUFsZ29yaXRobS5hbGdvcml0aG1JZCA9PT0gXCIxLjIuODQwLjExMzU0OS4xLjEuMTBcIilcbiAgICAgICAgICAgIGFsZ29yaXRobUlkID0gc2lnbmF0dXJlQWxnb3JpdGhtLmFsZ29yaXRobUlkO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhbGdvcml0aG1JZCA9IHB1YmxpY0tleUluZm8uYWxnb3JpdGhtLmFsZ29yaXRobUlkO1xuICAgICAgICBjb25zdCBhbGdvcml0aG1PYmplY3QgPSB0aGlzLmdldEFsZ29yaXRobUJ5T0lEKGFsZ29yaXRobUlkLCB0cnVlKTtcbiAgICAgICAgcGFyYW1ldGVycy5hbGdvcml0aG0gPSB0aGlzLmdldEFsZ29yaXRobVBhcmFtZXRlcnMoYWxnb3JpdGhtT2JqZWN0Lm5hbWUsIFwiaW1wb3J0S2V5XCIpO1xuICAgICAgICBpZiAoXCJoYXNoXCIgaW4gcGFyYW1ldGVycy5hbGdvcml0aG0uYWxnb3JpdGhtKVxuICAgICAgICAgICAgcGFyYW1ldGVycy5hbGdvcml0aG0uYWxnb3JpdGhtLmhhc2gubmFtZSA9IHNoYUFsZ29yaXRobTtcbiAgICAgICAgaWYgKGFsZ29yaXRobU9iamVjdC5uYW1lID09PSBcIkVDRFNBXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleUFsZ29yaXRobSA9IHB1YmxpY0tleUluZm8uYWxnb3JpdGhtO1xuICAgICAgICAgICAgaWYgKCFwdWJsaWNLZXlBbGdvcml0aG0uYWxnb3JpdGhtUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWxnb3JpdGhtIHBhcmFtZXRlcnMgZm9yIEVDRFNBIHB1YmxpYyBrZXkgYXJlIG1pc3NlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleUFsZ29yaXRobVBhcmFtcyA9IHB1YmxpY0tleUFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXM7XG4gICAgICAgICAgICBpZiAoXCJpZEJsb2NrXCIgaW4gcHVibGljS2V5QWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcykge1xuICAgICAgICAgICAgICAgIGlmICghKChwdWJsaWNLZXlBbGdvcml0aG1QYXJhbXMuaWRCbG9jay50YWdDbGFzcyA9PT0gMSkgJiYgKHB1YmxpY0tleUFsZ29yaXRobVBhcmFtcy5pZEJsb2NrLnRhZ051bWJlciA9PT0gNikpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCB0eXBlIGZvciBFQ0RTQSBwdWJsaWMga2V5IHBhcmFtZXRlcnNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY3VydmVPYmplY3QgPSB0aGlzLmdldEFsZ29yaXRobUJ5T0lEKHB1YmxpY0tleUFsZ29yaXRobVBhcmFtcy52YWx1ZUJsb2NrLnRvU3RyaW5nKCksIHRydWUpO1xuICAgICAgICAgICAgcGFyYW1ldGVycy5hbGdvcml0aG0uYWxnb3JpdGhtLm5hbWVkQ3VydmUgPSBjdXJ2ZU9iamVjdC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJhbWV0ZXJzO1xuICAgIH1cbiAgICBhc3luYyBnZXRQdWJsaWNLZXkocHVibGljS2V5SW5mbywgc2lnbmF0dXJlQWxnb3JpdGhtLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGlmICghcGFyYW1ldGVycykge1xuICAgICAgICAgICAgcGFyYW1ldGVycyA9IHRoaXMuZmlsbFB1YmxpY0tleVBhcmFtZXRlcnMocHVibGljS2V5SW5mbywgc2lnbmF0dXJlQWxnb3JpdGhtKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwdWJsaWNLZXlJbmZvQnVmZmVyID0gcHVibGljS2V5SW5mby50b1NjaGVtYSgpLnRvQkVSKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1wb3J0S2V5KFwic3BraVwiLCBwdWJsaWNLZXlJbmZvQnVmZmVyLCBwYXJhbWV0ZXJzLmFsZ29yaXRobS5hbGdvcml0aG0sIHRydWUsIHBhcmFtZXRlcnMuYWxnb3JpdGhtLnVzYWdlcyk7XG4gICAgfVxuICAgIGFzeW5jIHZlcmlmeVdpdGhQdWJsaWNLZXkoZGF0YSwgc2lnbmF0dXJlLCBwdWJsaWNLZXlJbmZvLCBzaWduYXR1cmVBbGdvcml0aG0sIHNoYUFsZ29yaXRobSkge1xuICAgICAgICBsZXQgcHVibGljS2V5O1xuICAgICAgICBpZiAoIXNoYUFsZ29yaXRobSkge1xuICAgICAgICAgICAgc2hhQWxnb3JpdGhtID0gdGhpcy5nZXRIYXNoQWxnb3JpdGhtKHNpZ25hdHVyZUFsZ29yaXRobSk7XG4gICAgICAgICAgICBpZiAoIXNoYUFsZ29yaXRobSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHNpZ25hdHVyZSBhbGdvcml0aG06ICR7c2lnbmF0dXJlQWxnb3JpdGhtLmFsZ29yaXRobUlkfWApO1xuICAgICAgICAgICAgcHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRQdWJsaWNLZXkocHVibGljS2V5SW5mbywgc2lnbmF0dXJlQWxnb3JpdGhtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGxldCBhbGdvcml0aG1JZDtcbiAgICAgICAgICAgIGlmIChzaWduYXR1cmVBbGdvcml0aG0uYWxnb3JpdGhtSWQgPT09IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEwXCIpXG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQgPSBzaWduYXR1cmVBbGdvcml0aG0uYWxnb3JpdGhtSWQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQgPSBwdWJsaWNLZXlJbmZvLmFsZ29yaXRobS5hbGdvcml0aG1JZDtcbiAgICAgICAgICAgIGNvbnN0IGFsZ29yaXRobU9iamVjdCA9IHRoaXMuZ2V0QWxnb3JpdGhtQnlPSUQoYWxnb3JpdGhtSWQsIHRydWUpO1xuICAgICAgICAgICAgcGFyYW1ldGVycy5hbGdvcml0aG0gPSB0aGlzLmdldEFsZ29yaXRobVBhcmFtZXRlcnMoYWxnb3JpdGhtT2JqZWN0Lm5hbWUsIFwiaW1wb3J0S2V5XCIpO1xuICAgICAgICAgICAgaWYgKFwiaGFzaFwiIGluIHBhcmFtZXRlcnMuYWxnb3JpdGhtLmFsZ29yaXRobSlcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmFsZ29yaXRobS5hbGdvcml0aG0uaGFzaC5uYW1lID0gc2hhQWxnb3JpdGhtO1xuICAgICAgICAgICAgaWYgKGFsZ29yaXRobU9iamVjdC5uYW1lID09PSBcIkVDRFNBXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgYWxnb3JpdGhtUGFyYW1zQ2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICgoXCJhbGdvcml0aG1QYXJhbXNcIiBpbiBwdWJsaWNLZXlJbmZvLmFsZ29yaXRobSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiaWRCbG9ja1wiIGluIHB1YmxpY0tleUluZm8uYWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwdWJsaWNLZXlJbmZvLmFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMuaWRCbG9jay50YWdDbGFzcyA9PT0gMSkgJiYgKHB1YmxpY0tleUluZm8uYWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcy5pZEJsb2NrLnRhZ051bWJlciA9PT0gNikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtUGFyYW1zQ2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFsZ29yaXRobVBhcmFtc0NoZWNrZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCB0eXBlIGZvciBFQ0RTQSBwdWJsaWMga2V5IHBhcmFtZXRlcnNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnZlT2JqZWN0ID0gdGhpcy5nZXRBbGdvcml0aG1CeU9JRChwdWJsaWNLZXlJbmZvLmFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMudmFsdWVCbG9jay50b1N0cmluZygpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmFsZ29yaXRobS5hbGdvcml0aG0ubmFtZWRDdXJ2ZSA9IGN1cnZlT2JqZWN0Lm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFB1YmxpY0tleShwdWJsaWNLZXlJbmZvLCBudWxsLCBwYXJhbWV0ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGdvcml0aG0gPSB0aGlzLmdldEFsZ29yaXRobVBhcmFtZXRlcnMocHVibGljS2V5LmFsZ29yaXRobS5uYW1lLCBcInZlcmlmeVwiKTtcbiAgICAgICAgaWYgKFwiaGFzaFwiIGluIGFsZ29yaXRobS5hbGdvcml0aG0pXG4gICAgICAgICAgICBhbGdvcml0aG0uYWxnb3JpdGhtLmhhc2gubmFtZSA9IHNoYUFsZ29yaXRobTtcbiAgICAgICAgbGV0IHNpZ25hdHVyZVZhbHVlID0gc2lnbmF0dXJlLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3O1xuICAgICAgICBpZiAocHVibGljS2V5LmFsZ29yaXRobS5uYW1lID09PSBcIkVDRFNBXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVkQ3VydmUgPSBFQ05hbWVkQ3VydmVzLmZpbmQocHVibGljS2V5LmFsZ29yaXRobS5uYW1lZEN1cnZlKTtcbiAgICAgICAgICAgIGlmICghbmFtZWRDdXJ2ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIG5hbWVkIGN1cnZlIGluIHVzZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuZnJvbUJFUihzaWduYXR1cmVWYWx1ZSk7XG4gICAgICAgICAgICBBc25FcnJvci5hc3NlcnQoYXNuMSwgXCJTaWduYXR1cmUgdmFsdWVcIik7XG4gICAgICAgICAgICBzaWduYXR1cmVWYWx1ZSA9IGNyZWF0ZUVDRFNBU2lnbmF0dXJlRnJvbUNNUyhhc24xLnJlc3VsdCwgbmFtZWRDdXJ2ZS5zaXplKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHVibGljS2V5LmFsZ29yaXRobS5uYW1lID09PSBcIlJTQS1QU1NcIikge1xuICAgICAgICAgICAgY29uc3QgcHNzUGFyYW1ldGVycyA9IG5ldyBSU0FTU0FQU1NQYXJhbXMoeyBzY2hlbWE6IHNpZ25hdHVyZUFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMgfSk7XG4gICAgICAgICAgICBpZiAoXCJzYWx0TGVuZ3RoXCIgaW4gcHNzUGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBhbGdvcml0aG0uYWxnb3JpdGhtLnNhbHRMZW5ndGggPSBwc3NQYXJhbWV0ZXJzLnNhbHRMZW5ndGg7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtLmFsZ29yaXRobS5zYWx0TGVuZ3RoID0gMjA7XG4gICAgICAgICAgICBsZXQgaGFzaEFsZ28gPSBcIlNIQS0xXCI7XG4gICAgICAgICAgICBpZiAoXCJoYXNoQWxnb3JpdGhtXCIgaW4gcHNzUGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc2hBbGdvcml0aG0gPSB0aGlzLmdldEFsZ29yaXRobUJ5T0lEKHBzc1BhcmFtZXRlcnMuaGFzaEFsZ29yaXRobS5hbGdvcml0aG1JZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaGFzaEFsZ28gPSBoYXNoQWxnb3JpdGhtLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbGdvcml0aG0uYWxnb3JpdGhtLmhhc2gubmFtZSA9IGhhc2hBbGdvO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnZlcmlmeShhbGdvcml0aG0uYWxnb3JpdGhtLCBwdWJsaWNLZXksIHNpZ25hdHVyZVZhbHVlLCBkYXRhKTtcbiAgICB9XG59XG5cbmxldCBlbmdpbmUgPSB7XG4gICAgbmFtZTogXCJub25lXCIsXG4gICAgY3J5cHRvOiBudWxsLFxufTtcbmZ1bmN0aW9uIGlzQ3J5cHRvRW5naW5lKGVuZ2luZSkge1xuICAgIHJldHVybiBlbmdpbmVcbiAgICAgICAgJiYgdHlwZW9mIGVuZ2luZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAmJiBcImNyeXB0b1wiIGluIGVuZ2luZVxuICAgICAgICA/IHRydWVcbiAgICAgICAgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHNldEVuZ2luZShuYW1lLCAuLi5hcmdzKSB7XG4gICAgbGV0IGNyeXB0byA9IG51bGw7XG4gICAgaWYgKGFyZ3MubGVuZ3RoIDwgMikge1xuICAgICAgICBpZiAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNyeXB0byA9IGFyZ3NbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjcnlwdG8gPSB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNyeXB0byA/IG5ldyBDcnlwdG9FbmdpbmUoeyBuYW1lOiBcImJyb3dzZXJcIiwgY3J5cHRvOiBzZWxmLmNyeXB0byB9KSA6IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGNyeXB0b0FyZyA9IGFyZ3NbMF07XG4gICAgICAgIGNvbnN0IHN1YnRsZUFyZyA9IGFyZ3NbMV07XG4gICAgICAgIGlmIChpc0NyeXB0b0VuZ2luZShzdWJ0bGVBcmcpKSB7XG4gICAgICAgICAgICBjcnlwdG8gPSBzdWJ0bGVBcmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNDcnlwdG9FbmdpbmUoY3J5cHRvQXJnKSkge1xuICAgICAgICAgICAgY3J5cHRvID0gY3J5cHRvQXJnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFwic3VidGxlXCIgaW4gY3J5cHRvQXJnICYmIFwiZ2V0UmFuZG9tVmFsdWVzXCIgaW4gY3J5cHRvQXJnKSB7XG4gICAgICAgICAgICBjcnlwdG8gPSBuZXcgQ3J5cHRvRW5naW5lKHtcbiAgICAgICAgICAgICAgICBjcnlwdG86IGNyeXB0b0FyZyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIpICYmIChcInBpZFwiIGluIHByb2Nlc3MpICYmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSAmJiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxbcHJvY2Vzcy5waWRdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBnbG9iYWxbcHJvY2Vzcy5waWRdID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbFtwcm9jZXNzLnBpZF0gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5hbWUgZ2xvYmFsLiR7cHJvY2Vzcy5waWR9IGFscmVhZHkgZXhpc3RzIGFuZCBpdCBpcyBub3QgYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxbcHJvY2Vzcy5waWRdLnBraWpzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBnbG9iYWxbcHJvY2Vzcy5waWRdLnBraWpzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbFtwcm9jZXNzLnBpZF0ucGtpanMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5hbWUgZ2xvYmFsLiR7cHJvY2Vzcy5waWR9LnBraWpzIGFscmVhZHkgZXhpc3RzIGFuZCBpdCBpcyBub3QgYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZ2xvYmFsW3Byb2Nlc3MucGlkXS5wa2lqcy5lbmdpbmUgPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgY3J5cHRvLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZW5naW5lID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGNyeXB0byxcbiAgICAgICAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRFbmdpbmUoKSB7XG4gICAgaWYgKCh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIikgJiYgKFwicGlkXCIgaW4gcHJvY2VzcykgJiYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpICYmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSkge1xuICAgICAgICBsZXQgX2VuZ2luZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIF9lbmdpbmUgPSBnbG9iYWxbcHJvY2Vzcy5waWRdLnBraWpzLmVuZ2luZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBjYWxsICdzZXRFbmdpbmUnIGJlZm9yZSBjYWxsIHRvICdnZXRFbmdpbmUnXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfZW5naW5lO1xuICAgIH1cbiAgICByZXR1cm4gZW5naW5lO1xufVxuZnVuY3Rpb24gZ2V0Q3J5cHRvKHNhZmV0eSA9IGZhbHNlKSB7XG4gICAgY29uc3QgX2VuZ2luZSA9IGdldEVuZ2luZSgpO1xuICAgIGlmICghX2VuZ2luZS5jcnlwdG8gJiYgc2FmZXR5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBjcmVhdGUgV2ViQ3J5cHRvIG9iamVjdFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIF9lbmdpbmUuY3J5cHRvO1xufVxuZnVuY3Rpb24gZ2V0UmFuZG9tVmFsdWVzKHZpZXcpIHtcbiAgICByZXR1cm4gZ2V0Q3J5cHRvKHRydWUpLmdldFJhbmRvbVZhbHVlcyh2aWV3KTtcbn1cbmZ1bmN0aW9uIGdldE9JREJ5QWxnb3JpdGhtKGFsZ29yaXRobSwgc2FmZXR5LCB0YXJnZXQpIHtcbiAgICByZXR1cm4gZ2V0Q3J5cHRvKHRydWUpLmdldE9JREJ5QWxnb3JpdGhtKGFsZ29yaXRobSwgc2FmZXR5LCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gZ2V0QWxnb3JpdGhtUGFyYW1ldGVycyhhbGdvcml0aG1OYW1lLCBvcGVyYXRpb24pIHtcbiAgICByZXR1cm4gZ2V0Q3J5cHRvKHRydWUpLmdldEFsZ29yaXRobVBhcmFtZXRlcnMoYWxnb3JpdGhtTmFtZSwgb3BlcmF0aW9uKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNNU0VDRFNBU2lnbmF0dXJlKHNpZ25hdHVyZUJ1ZmZlcikge1xuICAgIGlmICgoc2lnbmF0dXJlQnVmZmVyLmJ5dGVMZW5ndGggJSAyKSAhPT0gMClcbiAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICBjb25zdCBsZW5ndGggPSBzaWduYXR1cmVCdWZmZXIuYnl0ZUxlbmd0aCAvIDI7XG4gICAgY29uc3QgckJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihsZW5ndGgpO1xuICAgIGNvbnN0IHJWaWV3ID0gbmV3IFVpbnQ4QXJyYXkockJ1ZmZlcik7XG4gICAgclZpZXcuc2V0KG5ldyBVaW50OEFycmF5KHNpZ25hdHVyZUJ1ZmZlciwgMCwgbGVuZ3RoKSk7XG4gICAgY29uc3QgckludGVnZXIgPSBuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZUhleDogckJ1ZmZlciB9KTtcbiAgICBjb25zdCBzQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCk7XG4gICAgY29uc3Qgc1ZpZXcgPSBuZXcgVWludDhBcnJheShzQnVmZmVyKTtcbiAgICBzVmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoc2lnbmF0dXJlQnVmZmVyLCBsZW5ndGgsIGxlbmd0aCkpO1xuICAgIGNvbnN0IHNJbnRlZ2VyID0gbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWVIZXg6IHNCdWZmZXIgfSk7XG4gICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgIHJJbnRlZ2VyLmNvbnZlcnRUb0RFUigpLFxuICAgICAgICAgICAgc0ludGVnZXIuY29udmVydFRvREVSKClcbiAgICAgICAgXVxuICAgIH0pKS50b0JFUihmYWxzZSk7XG59XG5mdW5jdGlvbiBjcmVhdGVFQ0RTQVNpZ25hdHVyZUZyb21DTVMoY21zU2lnbmF0dXJlLCBwb2ludFNpemUpIHtcbiAgICBpZiAoIShjbXNTaWduYXR1cmUgaW5zdGFuY2VvZiBhc24xanMuU2VxdWVuY2VcbiAgICAgICAgJiYgY21zU2lnbmF0dXJlLnZhbHVlQmxvY2sudmFsdWUubGVuZ3RoID09PSAyXG4gICAgICAgICYmIGNtc1NpZ25hdHVyZS52YWx1ZUJsb2NrLnZhbHVlWzBdIGluc3RhbmNlb2YgYXNuMWpzLkludGVnZXJcbiAgICAgICAgJiYgY21zU2lnbmF0dXJlLnZhbHVlQmxvY2sudmFsdWVbMV0gaW5zdGFuY2VvZiBhc24xanMuSW50ZWdlcikpXG4gICAgICAgIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gICAgY29uc3QgclZhbHVlVmlldyA9IGNtc1NpZ25hdHVyZS52YWx1ZUJsb2NrLnZhbHVlWzBdLmNvbnZlcnRGcm9tREVSKCkudmFsdWVCbG9jay52YWx1ZUhleFZpZXc7XG4gICAgY29uc3Qgc1ZhbHVlVmlldyA9IGNtc1NpZ25hdHVyZS52YWx1ZUJsb2NrLnZhbHVlWzFdLmNvbnZlcnRGcm9tREVSKCkudmFsdWVCbG9jay52YWx1ZUhleFZpZXc7XG4gICAgY29uc3QgcmVzID0gbmV3IFVpbnQ4QXJyYXkocG9pbnRTaXplICogMik7XG4gICAgcmVzLnNldChyVmFsdWVWaWV3LCBwb2ludFNpemUgLSByVmFsdWVWaWV3LmJ5dGVMZW5ndGgpO1xuICAgIHJlcy5zZXQoc1ZhbHVlVmlldywgKDIgKiBwb2ludFNpemUpIC0gc1ZhbHVlVmlldy5ieXRlTGVuZ3RoKTtcbiAgICByZXR1cm4gcmVzLmJ1ZmZlcjtcbn1cbmZ1bmN0aW9uIGdldEFsZ29yaXRobUJ5T0lEKG9pZCwgc2FmZXR5ID0gZmFsc2UsIHRhcmdldCkge1xuICAgIHJldHVybiBnZXRDcnlwdG8odHJ1ZSkuZ2V0QWxnb3JpdGhtQnlPSUQob2lkLCBzYWZldHksIHRhcmdldCk7XG59XG5mdW5jdGlvbiBnZXRIYXNoQWxnb3JpdGhtKHNpZ25hdHVyZUFsZ29yaXRobSkge1xuICAgIHJldHVybiBnZXRDcnlwdG8odHJ1ZSkuZ2V0SGFzaEFsZ29yaXRobShzaWduYXR1cmVBbGdvcml0aG0pO1xufVxuYXN5bmMgZnVuY3Rpb24ga2RmV2l0aENvdW50ZXIoaGFzaEZ1bmN0aW9uLCB6QnVmZmVyLCBDb3VudGVyLCBTaGFyZWRJbmZvLCBjcnlwdG8pIHtcbiAgICBzd2l0Y2ggKGhhc2hGdW5jdGlvbi50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgXCJTSEEtMVwiOlxuICAgICAgICBjYXNlIFwiU0hBLTI1NlwiOlxuICAgICAgICBjYXNlIFwiU0hBLTM4NFwiOlxuICAgICAgICBjYXNlIFwiU0hBLTUxMlwiOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFcnJvcihgVW5rbm93biBoYXNoIGZ1bmN0aW9uOiAke2hhc2hGdW5jdGlvbn1gKTtcbiAgICB9XG4gICAgQXJndW1lbnRFcnJvci5hc3NlcnQoekJ1ZmZlciwgXCJ6QnVmZmVyXCIsIFwiQXJyYXlCdWZmZXJcIik7XG4gICAgaWYgKHpCdWZmZXIuYnl0ZUxlbmd0aCA9PT0gMClcbiAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXJyb3IoXCInekJ1ZmZlcicgaGFzIHplcm8gbGVuZ3RoLCBlcnJvclwiKTtcbiAgICBBcmd1bWVudEVycm9yLmFzc2VydChTaGFyZWRJbmZvLCBcIlNoYXJlZEluZm9cIiwgXCJBcnJheUJ1ZmZlclwiKTtcbiAgICBpZiAoQ291bnRlciA+IDI1NSlcbiAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXJyb3IoXCJQbGVhc2Ugc2V0ICdDb3VudGVyJyBhcmd1bWVudCB0byB2YWx1ZSBsZXNzIG9yIGVxdWFsIHRvIDI1NVwiKTtcbiAgICBjb25zdCBjb3VudGVyQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDQpO1xuICAgIGNvbnN0IGNvdW50ZXJWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoY291bnRlckJ1ZmZlcik7XG4gICAgY291bnRlclZpZXdbMF0gPSAweDAwO1xuICAgIGNvdW50ZXJWaWV3WzFdID0gMHgwMDtcbiAgICBjb3VudGVyVmlld1syXSA9IDB4MDA7XG4gICAgY291bnRlclZpZXdbM10gPSBDb3VudGVyO1xuICAgIGxldCBjb21iaW5lZEJ1ZmZlciA9IEVNUFRZX0JVRkZFUjtcbiAgICBjb21iaW5lZEJ1ZmZlciA9IHB2dXRpbHMudXRpbENvbmNhdEJ1Zihjb21iaW5lZEJ1ZmZlciwgekJ1ZmZlcik7XG4gICAgY29tYmluZWRCdWZmZXIgPSBwdnV0aWxzLnV0aWxDb25jYXRCdWYoY29tYmluZWRCdWZmZXIsIGNvdW50ZXJCdWZmZXIpO1xuICAgIGNvbWJpbmVkQnVmZmVyID0gcHZ1dGlscy51dGlsQ29uY2F0QnVmKGNvbWJpbmVkQnVmZmVyLCBTaGFyZWRJbmZvKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcnlwdG8uZGlnZXN0KHsgbmFtZTogaGFzaEZ1bmN0aW9uIH0sIGNvbWJpbmVkQnVmZmVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb3VudGVyOiBDb3VudGVyLFxuICAgICAgICByZXN1bHRcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24ga2RmKGhhc2hGdW5jdGlvbiwgWmJ1ZmZlciwga2V5ZGF0YWxlbiwgU2hhcmVkSW5mbywgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgbGV0IGhhc2hMZW5ndGggPSAwO1xuICAgIGxldCBtYXhDb3VudGVyID0gMTtcbiAgICBzd2l0Y2ggKGhhc2hGdW5jdGlvbi50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgXCJTSEEtMVwiOlxuICAgICAgICAgICAgaGFzaExlbmd0aCA9IDE2MDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU0hBLTI1NlwiOlxuICAgICAgICAgICAgaGFzaExlbmd0aCA9IDI1NjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU0hBLTM4NFwiOlxuICAgICAgICAgICAgaGFzaExlbmd0aCA9IDM4NDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU0hBLTUxMlwiOlxuICAgICAgICAgICAgaGFzaExlbmd0aCA9IDUxMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXJyb3IoYFVua25vd24gaGFzaCBmdW5jdGlvbjogJHtoYXNoRnVuY3Rpb259YCk7XG4gICAgfVxuICAgIEFyZ3VtZW50RXJyb3IuYXNzZXJ0KFpidWZmZXIsIFwiWmJ1ZmZlclwiLCBcIkFycmF5QnVmZmVyXCIpO1xuICAgIGlmIChaYnVmZmVyLmJ5dGVMZW5ndGggPT09IDApXG4gICAgICAgIHRocm93IG5ldyBBcmd1bWVudEVycm9yKFwiJ1pidWZmZXInIGhhcyB6ZXJvIGxlbmd0aCwgZXJyb3JcIik7XG4gICAgQXJndW1lbnRFcnJvci5hc3NlcnQoU2hhcmVkSW5mbywgXCJTaGFyZWRJbmZvXCIsIFwiQXJyYXlCdWZmZXJcIik7XG4gICAgY29uc3QgcXVvdGllbnQgPSBrZXlkYXRhbGVuIC8gaGFzaExlbmd0aDtcbiAgICBpZiAoTWF0aC5mbG9vcihxdW90aWVudCkgPiAwKSB7XG4gICAgICAgIG1heENvdW50ZXIgPSBNYXRoLmZsb29yKHF1b3RpZW50KTtcbiAgICAgICAgaWYgKChxdW90aWVudCAtIG1heENvdW50ZXIpID4gMClcbiAgICAgICAgICAgIG1heENvdW50ZXIrKztcbiAgICB9XG4gICAgY29uc3QgaW5jb21pbmdSZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBtYXhDb3VudGVyOyBpKyspXG4gICAgICAgIGluY29taW5nUmVzdWx0LnB1c2goYXdhaXQga2RmV2l0aENvdW50ZXIoaGFzaEZ1bmN0aW9uLCBaYnVmZmVyLCBpLCBTaGFyZWRJbmZvLCBjcnlwdG8pKTtcbiAgICBsZXQgY29tYmluZWRCdWZmZXIgPSBFTVBUWV9CVUZGRVI7XG4gICAgbGV0IGN1cnJlbnRDb3VudGVyID0gMTtcbiAgICBsZXQgZm91bmQgPSB0cnVlO1xuICAgIHdoaWxlIChmb3VuZCkge1xuICAgICAgICBmb3VuZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBpbmNvbWluZ1Jlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5jb3VudGVyID09PSBjdXJyZW50Q291bnRlcikge1xuICAgICAgICAgICAgICAgIGNvbWJpbmVkQnVmZmVyID0gcHZ1dGlscy51dGlsQ29uY2F0QnVmKGNvbWJpbmVkQnVmZmVyLCByZXN1bHQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudENvdW50ZXIrKztcbiAgICB9XG4gICAga2V5ZGF0YWxlbiA+Pj0gMztcbiAgICBpZiAoY29tYmluZWRCdWZmZXIuYnl0ZUxlbmd0aCA+IGtleWRhdGFsZW4pIHtcbiAgICAgICAgY29uc3QgbmV3QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGtleWRhdGFsZW4pO1xuICAgICAgICBjb25zdCBuZXdWaWV3ID0gbmV3IFVpbnQ4QXJyYXkobmV3QnVmZmVyKTtcbiAgICAgICAgY29uc3QgY29tYmluZWRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoY29tYmluZWRCdWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleWRhdGFsZW47IGkrKylcbiAgICAgICAgICAgIG5ld1ZpZXdbaV0gPSBjb21iaW5lZFZpZXdbaV07XG4gICAgICAgIHJldHVybiBuZXdCdWZmZXI7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZEJ1ZmZlcjtcbn1cblxuY29uc3QgVkVSU0lPTiRpID0gXCJ2ZXJzaW9uXCI7XG5jb25zdCBMT0dfSUQgPSBcImxvZ0lEXCI7XG5jb25zdCBFWFRFTlNJT05TJDYgPSBcImV4dGVuc2lvbnNcIjtcbmNvbnN0IFRJTUVTVEFNUCA9IFwidGltZXN0YW1wXCI7XG5jb25zdCBIQVNIX0FMR09SSVRITSQzID0gXCJoYXNoQWxnb3JpdGhtXCI7XG5jb25zdCBTSUdOQVRVUkVfQUxHT1JJVEhNJDggPSBcInNpZ25hdHVyZUFsZ29yaXRobVwiO1xuY29uc3QgU0lHTkFUVVJFJDcgPSBcInNpZ25hdHVyZVwiO1xuY29uc3QgTk9ORSA9IFwibm9uZVwiO1xuY29uc3QgTUQ1ID0gXCJtZDVcIjtcbmNvbnN0IFNIQTEgPSBcInNoYTFcIjtcbmNvbnN0IFNIQTIyNCA9IFwic2hhMjI0XCI7XG5jb25zdCBTSEEyNTYgPSBcInNoYTI1NlwiO1xuY29uc3QgU0hBMzg0ID0gXCJzaGEzODRcIjtcbmNvbnN0IFNIQTUxMiA9IFwic2hhNTEyXCI7XG5jb25zdCBBTk9OWU1PVVMgPSBcImFub255bW91c1wiO1xuY29uc3QgUlNBID0gXCJyc2FcIjtcbmNvbnN0IERTQSA9IFwiZHNhXCI7XG5jb25zdCBFQ0RTQSA9IFwiZWNkc2FcIjtcbmNsYXNzIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiRpLCBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcC5kZWZhdWx0VmFsdWVzKFZFUlNJT04kaSkpO1xuICAgICAgICB0aGlzLmxvZ0lEID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTE9HX0lELCBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcC5kZWZhdWx0VmFsdWVzKExPR19JRCkpO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRJTUVTVEFNUCwgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXAuZGVmYXVsdFZhbHVlcyhUSU1FU1RBTVApKTtcbiAgICAgICAgdGhpcy5leHRlbnNpb25zID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRVhURU5TSU9OUyQ2LCBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcC5kZWZhdWx0VmFsdWVzKEVYVEVOU0lPTlMkNikpO1xuICAgICAgICB0aGlzLmhhc2hBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBIQVNIX0FMR09SSVRITSQzLCBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcC5kZWZhdWx0VmFsdWVzKEhBU0hfQUxHT1JJVEhNJDMpKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkVfQUxHT1JJVEhNJDgsIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wLmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX0FMR09SSVRITSQ4KSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkFUVVJFJDcsIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wLmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFJDcpKTtcbiAgICAgICAgaWYgKFwic3RyZWFtXCIgaW4gcGFyYW1ldGVycyAmJiBwYXJhbWV0ZXJzLnN0cmVhbSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU3RyZWFtKHBhcmFtZXRlcnMuc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiRpOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgY2FzZSBMT0dfSUQ6XG4gICAgICAgICAgICBjYXNlIEVYVEVOU0lPTlMkNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICAgICAgY2FzZSBUSU1FU1RBTVA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKDApO1xuICAgICAgICAgICAgY2FzZSBIQVNIX0FMR09SSVRITSQzOlxuICAgICAgICAgICAgY2FzZSBTSUdOQVRVUkVfQUxHT1JJVEhNJDg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFJDc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQW55KCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIGlmICgoc2NoZW1hIGluc3RhbmNlb2YgYXNuMWpzLlJhd0RhdGEpID09PSBmYWxzZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9iamVjdCdzIHNjaGVtYSB3YXMgbm90IHZlcmlmaWVkIGFnYWluc3QgaW5wdXQgZGF0YSBmb3IgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBcIik7XG4gICAgICAgIGNvbnN0IHNlcVN0cmVhbSA9IG5ldyBicy5TZXFTdHJlYW0oe1xuICAgICAgICAgICAgc3RyZWFtOiBuZXcgYnMuQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiBzY2hlbWEuZGF0YVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZnJvbVN0cmVhbShzZXFTdHJlYW0pO1xuICAgIH1cbiAgICBmcm9tU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICBjb25zdCBibG9ja0xlbmd0aCA9IHN0cmVhbS5nZXRVaW50MTYoKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gKHN0cmVhbS5nZXRCbG9jaygxKSlbMF07XG4gICAgICAgIGlmICh0aGlzLnZlcnNpb24gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9nSUQgPSAobmV3IFVpbnQ4QXJyYXkoc3RyZWFtLmdldEJsb2NrKDMyKSkpLmJ1ZmZlci5zbGljZSgwKTtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gbmV3IERhdGUocHZ1dGlscy51dGlsRnJvbUJhc2UobmV3IFVpbnQ4QXJyYXkoc3RyZWFtLmdldEJsb2NrKDgpKSwgOCkpO1xuICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uc0xlbmd0aCA9IHN0cmVhbS5nZXRVaW50MTYoKTtcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IChuZXcgVWludDhBcnJheShzdHJlYW0uZ2V0QmxvY2soZXh0ZW5zaW9uc0xlbmd0aCkpKS5idWZmZXIuc2xpY2UoMCk7XG4gICAgICAgICAgICBzd2l0Y2ggKChzdHJlYW0uZ2V0QmxvY2soMSkpWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc2hBbGdvcml0aG0gPSBOT05FO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzaEFsZ29yaXRobSA9IE1ENTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc2hBbGdvcml0aG0gPSBTSEExO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzaEFsZ29yaXRobSA9IFNIQTIyNDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc2hBbGdvcml0aG0gPSBTSEEyNTY7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNoQWxnb3JpdGhtID0gU0hBMzg0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzaEFsZ29yaXRobSA9IFNIQTUxMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT2JqZWN0J3Mgc3RyZWFtIHdhcyBub3QgY29ycmVjdCBmb3IgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKChzdHJlYW0uZ2V0QmxvY2soMSkpWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IEFOT05ZTU9VUztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IFJTQTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IERTQTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IEVDRFNBO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3QncyBzdHJlYW0gd2FzIG5vdCBjb3JyZWN0IGZvciBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZUxlbmd0aCA9IHN0cmVhbS5nZXRVaW50MTYoKTtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZURhdGEgPSBuZXcgVWludDhBcnJheShzdHJlYW0uZ2V0QmxvY2soc2lnbmF0dXJlTGVuZ3RoKSkuYnVmZmVyLnNsaWNlKDApO1xuICAgICAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5mcm9tQkVSKHNpZ25hdHVyZURhdGEpO1xuICAgICAgICAgICAgQXNuRXJyb3IuYXNzZXJ0KGFzbjEsIFwiU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBcIik7XG4gICAgICAgICAgICB0aGlzLnNpZ25hdHVyZSA9IGFzbjEucmVzdWx0O1xuICAgICAgICAgICAgaWYgKGJsb2NrTGVuZ3RoICE9PSAoNDcgKyBleHRlbnNpb25zTGVuZ3RoICsgc2lnbmF0dXJlTGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9iamVjdCdzIHN0cmVhbSB3YXMgbm90IGNvcnJlY3QgZm9yIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLnRvU3RyZWFtKCk7XG4gICAgICAgIHJldHVybiBuZXcgYXNuMWpzLlJhd0RhdGEoeyBkYXRhOiBzdHJlYW0uc3RyZWFtLmJ1ZmZlciB9KTtcbiAgICB9XG4gICAgdG9TdHJlYW0oKSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBicy5TZXFTdHJlYW0oKTtcbiAgICAgICAgc3RyZWFtLmFwcGVuZFVpbnQxNig0NyArIHRoaXMuZXh0ZW5zaW9ucy5ieXRlTGVuZ3RoICsgdGhpcy5zaWduYXR1cmUudmFsdWVCZWZvcmVEZWNvZGVWaWV3LmJ5dGVMZW5ndGgpO1xuICAgICAgICBzdHJlYW0uYXBwZW5kQ2hhcih0aGlzLnZlcnNpb24pO1xuICAgICAgICBzdHJlYW0uYXBwZW5kVmlldyhuZXcgVWludDhBcnJheSh0aGlzLmxvZ0lEKSk7XG4gICAgICAgIGNvbnN0IHRpbWVCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG4gICAgICAgIGNvbnN0IHRpbWVWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGltZUJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IGJhc2VBcnJheSA9IHB2dXRpbHMudXRpbFRvQmFzZSh0aGlzLnRpbWVzdGFtcC52YWx1ZU9mKCksIDgpO1xuICAgICAgICB0aW1lVmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYmFzZUFycmF5KSwgOCAtIGJhc2VBcnJheS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgc3RyZWFtLmFwcGVuZFZpZXcodGltZVZpZXcpO1xuICAgICAgICBzdHJlYW0uYXBwZW5kVWludDE2KHRoaXMuZXh0ZW5zaW9ucy5ieXRlTGVuZ3RoKTtcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW5zaW9ucy5ieXRlTGVuZ3RoKVxuICAgICAgICAgICAgc3RyZWFtLmFwcGVuZFZpZXcobmV3IFVpbnQ4QXJyYXkodGhpcy5leHRlbnNpb25zKSk7XG4gICAgICAgIGxldCBfaGFzaEFsZ29yaXRobTtcbiAgICAgICAgc3dpdGNoICh0aGlzLmhhc2hBbGdvcml0aG0udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBOT05FOlxuICAgICAgICAgICAgICAgIF9oYXNoQWxnb3JpdGhtID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTUQ1OlxuICAgICAgICAgICAgICAgIF9oYXNoQWxnb3JpdGhtID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU0hBMTpcbiAgICAgICAgICAgICAgICBfaGFzaEFsZ29yaXRobSA9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNIQTIyNDpcbiAgICAgICAgICAgICAgICBfaGFzaEFsZ29yaXRobSA9IDM7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNIQTI1NjpcbiAgICAgICAgICAgICAgICBfaGFzaEFsZ29yaXRobSA9IDQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNIQTM4NDpcbiAgICAgICAgICAgICAgICBfaGFzaEFsZ29yaXRobSA9IDU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNIQTUxMjpcbiAgICAgICAgICAgICAgICBfaGFzaEFsZ29yaXRobSA9IDY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IGRhdGEgZm9yIGhhc2hBbGdvcml0aG06ICR7dGhpcy5oYXNoQWxnb3JpdGhtfWApO1xuICAgICAgICB9XG4gICAgICAgIHN0cmVhbS5hcHBlbmRDaGFyKF9oYXNoQWxnb3JpdGhtKTtcbiAgICAgICAgbGV0IF9zaWduYXR1cmVBbGdvcml0aG07XG4gICAgICAgIHN3aXRjaCAodGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBBTk9OWU1PVVM6XG4gICAgICAgICAgICAgICAgX3NpZ25hdHVyZUFsZ29yaXRobSA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJTQTpcbiAgICAgICAgICAgICAgICBfc2lnbmF0dXJlQWxnb3JpdGhtID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRFNBOlxuICAgICAgICAgICAgICAgIF9zaWduYXR1cmVBbGdvcml0aG0gPSAyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBFQ0RTQTpcbiAgICAgICAgICAgICAgICBfc2lnbmF0dXJlQWxnb3JpdGhtID0gMztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgZGF0YSBmb3Igc2lnbmF0dXJlQWxnb3JpdGhtOiAke3RoaXMuc2lnbmF0dXJlQWxnb3JpdGhtfWApO1xuICAgICAgICB9XG4gICAgICAgIHN0cmVhbS5hcHBlbmRDaGFyKF9zaWduYXR1cmVBbGdvcml0aG0pO1xuICAgICAgICBjb25zdCBfc2lnbmF0dXJlID0gdGhpcy5zaWduYXR1cmUudG9CRVIoZmFsc2UpO1xuICAgICAgICBzdHJlYW0uYXBwZW5kVWludDE2KF9zaWduYXR1cmUuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHN0cmVhbS5hcHBlbmRWaWV3KG5ldyBVaW50OEFycmF5KF9zaWduYXR1cmUpKTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uLFxuICAgICAgICAgICAgbG9nSUQ6IHB2dXRpbHMuYnVmZmVyVG9IZXhDb2Rlcyh0aGlzLmxvZ0lEKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy50aW1lc3RhbXAsXG4gICAgICAgICAgICBleHRlbnNpb25zOiBwdnV0aWxzLmJ1ZmZlclRvSGV4Q29kZXModGhpcy5leHRlbnNpb25zKSxcbiAgICAgICAgICAgIGhhc2hBbGdvcml0aG06IHRoaXMuaGFzaEFsZ29yaXRobSxcbiAgICAgICAgICAgIHNpZ25hdHVyZUFsZ29yaXRobTogdGhpcy5zaWduYXR1cmVBbGdvcml0aG0sXG4gICAgICAgICAgICBzaWduYXR1cmU6IHRoaXMuc2lnbmF0dXJlLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHZlcmlmeShsb2dzLCBkYXRhLCBkYXRhVHlwZSA9IDAsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICBjb25zdCBsb2dJZCA9IHB2dXRpbHMudG9CYXNlNjQocHZ1dGlscy5hcnJheUJ1ZmZlclRvU3RyaW5nKHRoaXMubG9nSUQpKTtcbiAgICAgICAgbGV0IHB1YmxpY0tleUJhc2U2NCA9IG51bGw7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBicy5TZXFTdHJlYW0oKTtcbiAgICAgICAgZm9yIChjb25zdCBsb2cgb2YgbG9ncykge1xuICAgICAgICAgICAgaWYgKGxvZy5sb2dfaWQgPT09IGxvZ0lkKSB7XG4gICAgICAgICAgICAgICAgcHVibGljS2V5QmFzZTY0ID0gbG9nLmtleTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXB1YmxpY0tleUJhc2U2NCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQdWJsaWMga2V5IG5vdCBmb3VuZCBmb3IgQ1Qgd2l0aCBsb2dJZDogJHtsb2dJZH1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwa2kgPSBwdnV0aWxzLnN0cmluZ1RvQXJyYXlCdWZmZXIocHZ1dGlscy5mcm9tQmFzZTY0KHB1YmxpY0tleUJhc2U2NCkpO1xuICAgICAgICBjb25zdCBwdWJsaWNLZXlJbmZvID0gUHVibGljS2V5SW5mby5mcm9tQkVSKHBraSk7XG4gICAgICAgIHN0cmVhbS5hcHBlbmRDaGFyKDB4MDApO1xuICAgICAgICBzdHJlYW0uYXBwZW5kQ2hhcigweDAwKTtcbiAgICAgICAgY29uc3QgdGltZUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig4KTtcbiAgICAgICAgY29uc3QgdGltZVZpZXcgPSBuZXcgVWludDhBcnJheSh0aW1lQnVmZmVyKTtcbiAgICAgICAgY29uc3QgYmFzZUFycmF5ID0gcHZ1dGlscy51dGlsVG9CYXNlKHRoaXMudGltZXN0YW1wLnZhbHVlT2YoKSwgOCk7XG4gICAgICAgIHRpbWVWaWV3LnNldChuZXcgVWludDhBcnJheShiYXNlQXJyYXkpLCA4IC0gYmFzZUFycmF5LmJ5dGVMZW5ndGgpO1xuICAgICAgICBzdHJlYW0uYXBwZW5kVmlldyh0aW1lVmlldyk7XG4gICAgICAgIHN0cmVhbS5hcHBlbmRVaW50MTYoZGF0YVR5cGUpO1xuICAgICAgICBpZiAoZGF0YVR5cGUgPT09IDApXG4gICAgICAgICAgICBzdHJlYW0uYXBwZW5kVWludDI0KGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHN0cmVhbS5hcHBlbmRWaWV3KG5ldyBVaW50OEFycmF5KGRhdGEpKTtcbiAgICAgICAgc3RyZWFtLmFwcGVuZFVpbnQxNih0aGlzLmV4dGVuc2lvbnMuYnl0ZUxlbmd0aCk7XG4gICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnMuYnl0ZUxlbmd0aCAhPT0gMClcbiAgICAgICAgICAgIHN0cmVhbS5hcHBlbmRWaWV3KG5ldyBVaW50OEFycmF5KHRoaXMuZXh0ZW5zaW9ucykpO1xuICAgICAgICByZXR1cm4gY3J5cHRvLnZlcmlmeVdpdGhQdWJsaWNLZXkoc3RyZWFtLmJ1ZmZlci5zbGljZSgwLCBzdHJlYW0ubGVuZ3RoKSwgbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiB0aGlzLnNpZ25hdHVyZS50b0JFUihmYWxzZSkgfSksIHB1YmxpY0tleUluZm8sIHsgYWxnb3JpdGhtSWQ6IEVNUFRZX1NUUklORyB9LCBcIlNIQS0yNTZcIik7XG4gICAgfVxufVxuU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXAuQ0xBU1NfTkFNRSA9IFwiU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBcIjtcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVNDVHNGb3JDZXJ0aWZpY2F0ZShjZXJ0aWZpY2F0ZSwgaXNzdWVyQ2VydGlmaWNhdGUsIGxvZ3MsIGluZGV4ID0gKC0xKSwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgbGV0IHBhcnNlZFZhbHVlID0gbnVsbDtcbiAgICBjb25zdCBzdHJlYW0gPSBuZXcgYnMuU2VxU3RyZWFtKCk7XG4gICAgaWYgKGNlcnRpZmljYXRlLmV4dGVuc2lvbnMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGNlcnRpZmljYXRlLmV4dGVuc2lvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY2VydGlmaWNhdGUuZXh0ZW5zaW9uc1tpXS5leHRuSUQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGlkX1NpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdDpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkVmFsdWUgPSBjZXJ0aWZpY2F0ZS5leHRlbnNpb25zW2ldLnBhcnNlZFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRWYWx1ZSB8fCBwYXJzZWRWYWx1ZS50aW1lc3RhbXBzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3RoaW5nIHRvIHZlcmlmeSBpbiB0aGUgY2VydGlmaWNhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpY2F0ZS5leHRlbnNpb25zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocGFyc2VkVmFsdWUgPT09IG51bGwpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdCBleHRlbnNpb24gaW4gdGhlIHNwZWNpZmllZCBjZXJ0aWZpY2F0ZVwiKTtcbiAgICBjb25zdCB0YnMgPSBjZXJ0aWZpY2F0ZS5lbmNvZGVUQlMoKS50b0JFUigpO1xuICAgIGNvbnN0IGlzc3VlcklkID0gYXdhaXQgY3J5cHRvLmRpZ2VzdCh7IG5hbWU6IFwiU0hBLTI1NlwiIH0sIG5ldyBVaW50OEFycmF5KGlzc3VlckNlcnRpZmljYXRlLnN1YmplY3RQdWJsaWNLZXlJbmZvLnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpKSk7XG4gICAgc3RyZWFtLmFwcGVuZFZpZXcobmV3IFVpbnQ4QXJyYXkoaXNzdWVySWQpKTtcbiAgICBzdHJlYW0uYXBwZW5kVWludDI0KHRicy5ieXRlTGVuZ3RoKTtcbiAgICBzdHJlYW0uYXBwZW5kVmlldyhuZXcgVWludDhBcnJheSh0YnMpKTtcbiAgICBjb25zdCBwcmVDZXJ0ID0gc3RyZWFtLnN0cmVhbS5zbGljZSgwLCBzdHJlYW0ubGVuZ3RoKTtcbiAgICBpZiAoaW5kZXggPT09ICgtMSkpIHtcbiAgICAgICAgY29uc3QgdmVyaWZ5QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB0aW1lc3RhbXAgb2YgcGFyc2VkVmFsdWUudGltZXN0YW1wcykge1xuICAgICAgICAgICAgY29uc3QgdmVyaWZ5UmVzdWx0ID0gYXdhaXQgdGltZXN0YW1wLnZlcmlmeShsb2dzLCBwcmVDZXJ0LmJ1ZmZlciwgMSwgY3J5cHRvKTtcbiAgICAgICAgICAgIHZlcmlmeUFycmF5LnB1c2godmVyaWZ5UmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmVyaWZ5QXJyYXk7XG4gICAgfVxuICAgIGlmIChpbmRleCA+PSBwYXJzZWRWYWx1ZS50aW1lc3RhbXBzLmxlbmd0aClcbiAgICAgICAgaW5kZXggPSAocGFyc2VkVmFsdWUudGltZXN0YW1wcy5sZW5ndGggLSAxKTtcbiAgICByZXR1cm4gW2F3YWl0IHBhcnNlZFZhbHVlLnRpbWVzdGFtcHNbaW5kZXhdLnZlcmlmeShsb2dzLCBwcmVDZXJ0LmJ1ZmZlciwgMSwgY3J5cHRvKV07XG59XG5cbmNvbnN0IFRJTUVTVEFNUFMgPSBcInRpbWVzdGFtcHNcIjtcbmNsYXNzIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdCBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudGltZXN0YW1wcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRJTUVTVEFNUFMsIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdC5kZWZhdWx0VmFsdWVzKFRJTUVTVEFNUFMpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRJTUVTVEFNUFM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBUSU1FU1RBTVBTOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICAoX2EgPSBuYW1lcy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKG5hbWVzLm9wdGlvbmFsID0gZmFsc2UpO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBcIlNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdFwiKSxcbiAgICAgICAgICAgIG9wdGlvbmFsOiBuYW1lcy5vcHRpb25hbFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIGlmICgoc2NoZW1hIGluc3RhbmNlb2YgYXNuMWpzLk9jdGV0U3RyaW5nKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9iamVjdCdzIHNjaGVtYSB3YXMgbm90IHZlcmlmaWVkIGFnYWluc3QgaW5wdXQgZGF0YSBmb3IgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBMaXN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcVN0cmVhbSA9IG5ldyBicy5TZXFTdHJlYW0oe1xuICAgICAgICAgICAgc3RyZWFtOiBuZXcgYnMuQnl0ZVN0cmVhbSh7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiBzY2hlbWEudmFsdWVCbG9jay52YWx1ZUhleFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRhdGFMZW5ndGggPSBzZXFTdHJlYW0uZ2V0VWludDE2KCk7XG4gICAgICAgIGlmIChkYXRhTGVuZ3RoICE9PSBzZXFTdHJlYW0ubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3QncyBzY2hlbWEgd2FzIG5vdCB2ZXJpZmllZCBhZ2FpbnN0IGlucHV0IGRhdGEgZm9yIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdFwiKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoc2VxU3RyZWFtLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXBzLnB1c2gobmV3IFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wKHsgc3RyZWFtOiBzZXFTdHJlYW0gfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgYnMuU2VxU3RyZWFtKCk7XG4gICAgICAgIGxldCBvdmVyYWxsTGVuZ3RoID0gMDtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wc0RhdGEgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB0aW1lc3RhbXAgb2YgdGhpcy50aW1lc3RhbXBzKSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBTdHJlYW0gPSB0aW1lc3RhbXAudG9TdHJlYW0oKTtcbiAgICAgICAgICAgIHRpbWVzdGFtcHNEYXRhLnB1c2godGltZXN0YW1wU3RyZWFtKTtcbiAgICAgICAgICAgIG92ZXJhbGxMZW5ndGggKz0gdGltZXN0YW1wU3RyZWFtLnN0cmVhbS5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0uYXBwZW5kVWludDE2KG92ZXJhbGxMZW5ndGgpO1xuICAgICAgICBmb3IgKGNvbnN0IHRpbWVzdGFtcCBvZiB0aW1lc3RhbXBzRGF0YSkge1xuICAgICAgICAgICAgc3RyZWFtLmFwcGVuZFZpZXcodGltZXN0YW1wLnN0cmVhbS52aWV3KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBzdHJlYW0uc3RyZWFtLmJ1ZmZlci5zbGljZSgwKSB9KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGltZXN0YW1wczogQXJyYXkuZnJvbSh0aGlzLnRpbWVzdGFtcHMsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5TaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcExpc3QuQ0xBU1NfTkFNRSA9IFwiU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBMaXN0XCI7XG5cbmNvbnN0IEFUVFJJQlVURVMkNCA9IFwiYXR0cmlidXRlc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMTEgPSBbXG4gICAgQVRUUklCVVRFUyQ0XG5dO1xuY2xhc3MgU3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXMgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBVFRSSUJVVEVTJDQsIFN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzLmRlZmF1bHRWYWx1ZXMoQVRUUklCVVRFUyQ0KSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBBVFRSSUJVVEVTJDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmF0dHJpYnV0ZXMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEF0dHJpYnV0ZS5zY2hlbWEoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMTEpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IEFUVFJJQlVURVMkNFxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQuYXR0cmlidXRlcywgZWxlbWVudCA9PiBuZXcgQXR0cmlidXRlKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmF0dHJpYnV0ZXMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IEFycmF5LmZyb20odGhpcy5hdHRyaWJ1dGVzLCBvID0+IG8udG9KU09OKCkpXG4gICAgICAgIH07XG4gICAgfVxufVxuU3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXMuQ0xBU1NfTkFNRSA9IFwiU3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXNcIjtcblxuY2xhc3MgRXh0ZW5zaW9uVmFsdWVGYWN0b3J5IHtcbiAgICBzdGF0aWMgZ2V0SXRlbXMoKSB7XG4gICAgICAgIGlmICghdGhpcy50eXBlcykge1xuICAgICAgICAgICAgdGhpcy50eXBlcyA9IHt9O1xuICAgICAgICAgICAgRXh0ZW5zaW9uVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKGlkX1N1YmplY3RBbHROYW1lLCBcIlN1YmplY3RBbHROYW1lXCIsIEFsdE5hbWUpO1xuICAgICAgICAgICAgRXh0ZW5zaW9uVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKGlkX0lzc3VlckFsdE5hbWUsIFwiSXNzdWVyQWx0TmFtZVwiLCBBbHROYW1lKTtcbiAgICAgICAgICAgIEV4dGVuc2lvblZhbHVlRmFjdG9yeS5yZWdpc3RlcihpZF9BdXRob3JpdHlLZXlJZGVudGlmaWVyLCBcIkF1dGhvcml0eUtleUlkZW50aWZpZXJcIiwgQXV0aG9yaXR5S2V5SWRlbnRpZmllcik7XG4gICAgICAgICAgICBFeHRlbnNpb25WYWx1ZUZhY3RvcnkucmVnaXN0ZXIoaWRfQmFzaWNDb25zdHJhaW50cywgXCJCYXNpY0NvbnN0cmFpbnRzXCIsIEJhc2ljQ29uc3RyYWludHMpO1xuICAgICAgICAgICAgRXh0ZW5zaW9uVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKGlkX01pY3Jvc29mdENhVmVyc2lvbiwgXCJNaWNyb3NvZnRDYVZlcnNpb25cIiwgQ0FWZXJzaW9uKTtcbiAgICAgICAgICAgIEV4dGVuc2lvblZhbHVlRmFjdG9yeS5yZWdpc3RlcihpZF9DZXJ0aWZpY2F0ZVBvbGljaWVzLCBcIkNlcnRpZmljYXRlUG9saWNpZXNcIiwgQ2VydGlmaWNhdGVQb2xpY2llcyk7XG4gICAgICAgICAgICBFeHRlbnNpb25WYWx1ZUZhY3RvcnkucmVnaXN0ZXIoaWRfTWljcm9zb2Z0QXBwUG9saWNpZXMsIFwiQ2VydGlmaWNhdGVQb2xpY2llc01pY3Jvc29mdFwiLCBDZXJ0aWZpY2F0ZVBvbGljaWVzKTtcbiAgICAgICAgICAgIEV4dGVuc2lvblZhbHVlRmFjdG9yeS5yZWdpc3RlcihpZF9NaWNyb3NvZnRDZXJ0VGVtcGxhdGVWMiwgXCJNaWNyb3NvZnRDZXJ0VGVtcGxhdGVWMlwiLCBDZXJ0aWZpY2F0ZVRlbXBsYXRlKTtcbiAgICAgICAgICAgIEV4dGVuc2lvblZhbHVlRmFjdG9yeS5yZWdpc3RlcihpZF9DUkxEaXN0cmlidXRpb25Qb2ludHMsIFwiQ1JMRGlzdHJpYnV0aW9uUG9pbnRzXCIsIENSTERpc3RyaWJ1dGlvblBvaW50cyk7XG4gICAgICAgICAgICBFeHRlbnNpb25WYWx1ZUZhY3RvcnkucmVnaXN0ZXIoaWRfRnJlc2hlc3RDUkwsIFwiRnJlc2hlc3RDUkxcIiwgQ1JMRGlzdHJpYnV0aW9uUG9pbnRzKTtcbiAgICAgICAgICAgIEV4dGVuc2lvblZhbHVlRmFjdG9yeS5yZWdpc3RlcihpZF9FeHRLZXlVc2FnZSwgXCJFeHRLZXlVc2FnZVwiLCBFeHRLZXlVc2FnZSk7XG4gICAgICAgICAgICBFeHRlbnNpb25WYWx1ZUZhY3RvcnkucmVnaXN0ZXIoaWRfQ2VydGlmaWNhdGVJc3N1ZXIsIFwiQ2VydGlmaWNhdGVJc3N1ZXJcIiwgR2VuZXJhbE5hbWVzKTtcbiAgICAgICAgICAgIEV4dGVuc2lvblZhbHVlRmFjdG9yeS5yZWdpc3RlcihpZF9BdXRob3JpdHlJbmZvQWNjZXNzLCBcIkF1dGhvcml0eUluZm9BY2Nlc3NcIiwgSW5mb0FjY2Vzcyk7XG4gICAgICAgICAgICBFeHRlbnNpb25WYWx1ZUZhY3RvcnkucmVnaXN0ZXIoaWRfU3ViamVjdEluZm9BY2Nlc3MsIFwiU3ViamVjdEluZm9BY2Nlc3NcIiwgSW5mb0FjY2Vzcyk7XG4gICAgICAgICAgICBFeHRlbnNpb25WYWx1ZUZhY3RvcnkucmVnaXN0ZXIoaWRfSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50LCBcIklzc3VpbmdEaXN0cmlidXRpb25Qb2ludFwiLCBJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQpO1xuICAgICAgICAgICAgRXh0ZW5zaW9uVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKGlkX05hbWVDb25zdHJhaW50cywgXCJOYW1lQ29uc3RyYWludHNcIiwgTmFtZUNvbnN0cmFpbnRzKTtcbiAgICAgICAgICAgIEV4dGVuc2lvblZhbHVlRmFjdG9yeS5yZWdpc3RlcihpZF9Qb2xpY3lDb25zdHJhaW50cywgXCJQb2xpY3lDb25zdHJhaW50c1wiLCBQb2xpY3lDb25zdHJhaW50cyk7XG4gICAgICAgICAgICBFeHRlbnNpb25WYWx1ZUZhY3RvcnkucmVnaXN0ZXIoaWRfUG9saWN5TWFwcGluZ3MsIFwiUG9saWN5TWFwcGluZ3NcIiwgUG9saWN5TWFwcGluZ3MpO1xuICAgICAgICAgICAgRXh0ZW5zaW9uVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKGlkX1ByaXZhdGVLZXlVc2FnZVBlcmlvZCwgXCJQcml2YXRlS2V5VXNhZ2VQZXJpb2RcIiwgUHJpdmF0ZUtleVVzYWdlUGVyaW9kKTtcbiAgICAgICAgICAgIEV4dGVuc2lvblZhbHVlRmFjdG9yeS5yZWdpc3RlcihpZF9RQ1N0YXRlbWVudHMsIFwiUUNTdGF0ZW1lbnRzXCIsIFFDU3RhdGVtZW50cyk7XG4gICAgICAgICAgICBFeHRlbnNpb25WYWx1ZUZhY3RvcnkucmVnaXN0ZXIoaWRfU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBMaXN0LCBcIlNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdFwiLCBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcExpc3QpO1xuICAgICAgICAgICAgRXh0ZW5zaW9uVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKGlkX1N1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzLCBcIlN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzXCIsIFN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50eXBlcztcbiAgICB9XG4gICAgc3RhdGljIGZyb21CRVIoaWQsIHJhdykge1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmZyb21CRVIocmF3KTtcbiAgICAgICAgaWYgKGFzbjEub2Zmc2V0ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZmluZChpZCk7XG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaXRlbS50eXBlKHsgc2NoZW1hOiBhc24xLnJlc3VsdCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IG5ldyBpdGVtLnR5cGUoKTtcbiAgICAgICAgICAgICAgICByZXMucGFyc2luZ0Vycm9yID0gYEluY29ycmVjdGx5IGZvcm1hdHRlZCB2YWx1ZSBvZiBleHRlbnNpb24gJHtpdGVtLm5hbWV9ICgke2lkfSlgO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzbjEucmVzdWx0O1xuICAgIH1cbiAgICBzdGF0aWMgZmluZChpZCkge1xuICAgICAgICBjb25zdCB0eXBlcyA9IHRoaXMuZ2V0SXRlbXMoKTtcbiAgICAgICAgcmV0dXJuIHR5cGVzW2lkXSB8fCBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIoaWQsIG5hbWUsIHR5cGUpIHtcbiAgICAgICAgdGhpcy5nZXRJdGVtcygpW2lkXSA9IHsgbmFtZSwgdHlwZSB9O1xuICAgIH1cbn1cblxuY29uc3QgRVhUTl9JRCA9IFwiZXh0bklEXCI7XG5jb25zdCBDUklUSUNBTCA9IFwiY3JpdGljYWxcIjtcbmNvbnN0IEVYVE5fVkFMVUUgPSBcImV4dG5WYWx1ZVwiO1xuY29uc3QgUEFSU0VEX1ZBTFVFJDUgPSBcInBhcnNlZFZhbHVlXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQxMCA9IFtcbiAgICBFWFROX0lELFxuICAgIENSSVRJQ0FMLFxuICAgIEVYVE5fVkFMVUVcbl07XG5jbGFzcyBFeHRlbnNpb24gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGdldCBwYXJzZWRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BhcnNlZFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFZhbHVlID0gRXh0ZW5zaW9uVmFsdWVGYWN0b3J5LmZyb21CRVIodGhpcy5leHRuSUQsIHRoaXMuZXh0blZhbHVlLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KTtcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlZFZhbHVlID0gcGFyc2VkVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlZFZhbHVlIHx8IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgc2V0IHBhcnNlZFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlZFZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmV4dG5JRCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEVYVE5fSUQsIEV4dGVuc2lvbi5kZWZhdWx0VmFsdWVzKEVYVE5fSUQpKTtcbiAgICAgICAgdGhpcy5jcml0aWNhbCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENSSVRJQ0FMLCBFeHRlbnNpb24uZGVmYXVsdFZhbHVlcyhDUklUSUNBTCkpO1xuICAgICAgICBpZiAoRVhUTl9WQUxVRSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmV4dG5WYWx1ZSA9IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogcGFyYW1ldGVycy5leHRuVmFsdWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmV4dG5WYWx1ZSA9IEV4dGVuc2lvbi5kZWZhdWx0VmFsdWVzKEVYVE5fVkFMVUUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChQQVJTRURfVkFMVUUkNSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlZFZhbHVlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUEFSU0VEX1ZBTFVFJDUsIEV4dGVuc2lvbi5kZWZhdWx0VmFsdWVzKFBBUlNFRF9WQUxVRSQ1KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEVYVE5fSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgQ1JJVElDQUw6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSBFWFROX1ZBTFVFOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKCk7XG4gICAgICAgICAgICBjYXNlIFBBUlNFRF9WQUxVRSQ1OlxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLmV4dG5JRCB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQm9vbGVhbih7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5jcml0aWNhbCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuZXh0blZhbHVlIHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQxMCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgRXh0ZW5zaW9uLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGV4dG5JRDogRVhUTl9JRCxcbiAgICAgICAgICAgICAgICBjcml0aWNhbDogQ1JJVElDQUwsXG4gICAgICAgICAgICAgICAgZXh0blZhbHVlOiBFWFROX1ZBTFVFXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5leHRuSUQgPSBhc24xLnJlc3VsdC5leHRuSUQudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICBpZiAoQ1JJVElDQUwgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuY3JpdGljYWwgPSBhc24xLnJlc3VsdC5jcml0aWNhbC52YWx1ZUJsb2NrLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXh0blZhbHVlID0gYXNuMS5yZXN1bHQuZXh0blZhbHVlO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5leHRuSUQgfSkpO1xuICAgICAgICBpZiAodGhpcy5jcml0aWNhbCAhPT0gRXh0ZW5zaW9uLmRlZmF1bHRWYWx1ZXMoQ1JJVElDQUwpKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQm9vbGVhbih7IHZhbHVlOiB0aGlzLmNyaXRpY2FsIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuZXh0blZhbHVlKTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgb2JqZWN0ID0ge1xuICAgICAgICAgICAgZXh0bklEOiB0aGlzLmV4dG5JRCxcbiAgICAgICAgICAgIGV4dG5WYWx1ZTogdGhpcy5leHRuVmFsdWUudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmNyaXRpY2FsICE9PSBFeHRlbnNpb24uZGVmYXVsdFZhbHVlcyhDUklUSUNBTCkpIHtcbiAgICAgICAgICAgIG9iamVjdC5jcml0aWNhbCA9IHRoaXMuY3JpdGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGFyc2VkVmFsdWUgJiYgdGhpcy5wYXJzZWRWYWx1ZS50b0pTT04pIHtcbiAgICAgICAgICAgIG9iamVjdC5wYXJzZWRWYWx1ZSA9IHRoaXMucGFyc2VkVmFsdWUudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG59XG5FeHRlbnNpb24uQ0xBU1NfTkFNRSA9IFwiRXh0ZW5zaW9uXCI7XG5cbmNvbnN0IEVYVEVOU0lPTlMkNSA9IFwiZXh0ZW5zaW9uc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkJCA9IFtcbiAgICBFWFRFTlNJT05TJDUsXG5dO1xuY2xhc3MgRXh0ZW5zaW9ucyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEVYVEVOU0lPTlMkNSwgRXh0ZW5zaW9ucy5kZWZhdWx0VmFsdWVzKEVYVEVOU0lPTlMkNSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgRVhURU5TSU9OUyQ1OlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30sIG9wdGlvbmFsID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG9wdGlvbmFsLFxuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmV4dGVuc2lvbnMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEV4dGVuc2lvbi5zY2hlbWEobmFtZXMuZXh0ZW5zaW9uIHx8IHt9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkJCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgRXh0ZW5zaW9ucy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiBFWFRFTlNJT05TJDVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LmV4dGVuc2lvbnMsIGVsZW1lbnQgPT4gbmV3IEV4dGVuc2lvbih7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5leHRlbnNpb25zLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBleHRlbnNpb25zOiB0aGlzLmV4dGVuc2lvbnMubWFwKG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5FeHRlbnNpb25zLkNMQVNTX05BTUUgPSBcIkV4dGVuc2lvbnNcIjtcblxuY29uc3QgSVNTVUVSJDUgPSBcImlzc3VlclwiO1xuY29uc3QgU0VSSUFMX05VTUJFUiQ2ID0gXCJzZXJpYWxOdW1iZXJcIjtcbmNvbnN0IElTU1VFUl9VSUQgPSBcImlzc3VlclVJRFwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkXyA9IFtcbiAgICBJU1NVRVIkNSxcbiAgICBTRVJJQUxfTlVNQkVSJDYsXG4gICAgSVNTVUVSX1VJRCxcbl07XG5jbGFzcyBJc3N1ZXJTZXJpYWwgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElTU1VFUiQ1LCBJc3N1ZXJTZXJpYWwuZGVmYXVsdFZhbHVlcyhJU1NVRVIkNSkpO1xuICAgICAgICB0aGlzLnNlcmlhbE51bWJlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNFUklBTF9OVU1CRVIkNiwgSXNzdWVyU2VyaWFsLmRlZmF1bHRWYWx1ZXMoU0VSSUFMX05VTUJFUiQ2KSk7XG4gICAgICAgIGlmIChJU1NVRVJfVUlEIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVyVUlEID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgSVNTVUVSX1VJRCwgSXNzdWVyU2VyaWFsLmRlZmF1bHRWYWx1ZXMoSVNTVUVSX1VJRCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBJU1NVRVIkNTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyYWxOYW1lcygpO1xuICAgICAgICAgICAgY2FzZSBTRVJJQUxfTlVNQkVSJDY6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgY2FzZSBJU1NVRVJfVUlEOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkJpdFN0cmluZygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBHZW5lcmFsTmFtZXMuc2NoZW1hKG5hbWVzLmlzc3VlciB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnNlcmlhbE51bWJlciB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQml0U3RyaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5pc3N1ZXJVSUQgfHwgRU1QVFlfU1RSSU5HKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkXyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgSXNzdWVyU2VyaWFsLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGlzc3Vlcjoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBJU1NVRVIkNVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXI6IFNFUklBTF9OVU1CRVIkNixcbiAgICAgICAgICAgICAgICBpc3N1ZXJVSUQ6IElTU1VFUl9VSURcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmlzc3VlciA9IG5ldyBHZW5lcmFsTmFtZXMoeyBzY2hlbWE6IGFzbjEucmVzdWx0Lmlzc3VlciB9KTtcbiAgICAgICAgdGhpcy5zZXJpYWxOdW1iZXIgPSBhc24xLnJlc3VsdC5zZXJpYWxOdW1iZXI7XG4gICAgICAgIGlmIChJU1NVRVJfVUlEIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5pc3N1ZXJVSUQgPSBhc24xLnJlc3VsdC5pc3N1ZXJVSUQ7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5pc3N1ZXIudG9TY2hlbWEoKSxcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbE51bWJlclxuICAgICAgICAgICAgXVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuaXNzdWVyVUlEKSB7XG4gICAgICAgICAgICByZXN1bHQudmFsdWVCbG9jay52YWx1ZS5wdXNoKHRoaXMuaXNzdWVyVUlEKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGlzc3VlcjogdGhpcy5pc3N1ZXIudG9KU09OKCksXG4gICAgICAgICAgICBzZXJpYWxOdW1iZXI6IHRoaXMuc2VyaWFsTnVtYmVyLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlzc3VlclVJRCkge1xuICAgICAgICAgICAgcmVzdWx0Lmlzc3VlclVJRCA9IHRoaXMuaXNzdWVyVUlELnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuSXNzdWVyU2VyaWFsLkNMQVNTX05BTUUgPSBcIklzc3VlclNlcmlhbFwiO1xuXG5jb25zdCBWRVJTSU9OJGggPSBcInZlcnNpb25cIjtcbmNvbnN0IEJBU0VfQ0VSVElGSUNBVEVfSUQkMiA9IFwiYmFzZUNlcnRpZmljYXRlSURcIjtcbmNvbnN0IFNVQkpFQ1RfTkFNRSA9IFwic3ViamVjdE5hbWVcIjtcbmNvbnN0IElTU1VFUiQ0ID0gXCJpc3N1ZXJcIjtcbmNvbnN0IFNJR05BVFVSRSQ2ID0gXCJzaWduYXR1cmVcIjtcbmNvbnN0IFNFUklBTF9OVU1CRVIkNSA9IFwic2VyaWFsTnVtYmVyXCI7XG5jb25zdCBBVFRSX0NFUlRfVkFMSURJVFlfUEVSSU9EJDEgPSBcImF0dHJDZXJ0VmFsaWRpdHlQZXJpb2RcIjtcbmNvbnN0IEFUVFJJQlVURVMkMyA9IFwiYXR0cmlidXRlc1wiO1xuY29uc3QgSVNTVUVSX1VOSVFVRV9JRCQyID0gXCJpc3N1ZXJVbmlxdWVJRFwiO1xuY29uc3QgRVhURU5TSU9OUyQ0ID0gXCJleHRlbnNpb25zXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRaID0gW1xuICAgIFZFUlNJT04kaCxcbiAgICBCQVNFX0NFUlRJRklDQVRFX0lEJDIsXG4gICAgU1VCSkVDVF9OQU1FLFxuICAgIElTU1VFUiQ0LFxuICAgIFNJR05BVFVSRSQ2LFxuICAgIFNFUklBTF9OVU1CRVIkNSxcbiAgICBBVFRSX0NFUlRfVkFMSURJVFlfUEVSSU9EJDEsXG4gICAgQVRUUklCVVRFUyQzLFxuICAgIElTU1VFUl9VTklRVUVfSUQkMixcbiAgICBFWFRFTlNJT05TJDQsXG5dO1xuY2xhc3MgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjEgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWRVJTSU9OJGgsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YxLmRlZmF1bHRWYWx1ZXMoVkVSU0lPTiRoKSk7XG4gICAgICAgIGlmIChCQVNFX0NFUlRJRklDQVRFX0lEJDIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5iYXNlQ2VydGlmaWNhdGVJRCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEJBU0VfQ0VSVElGSUNBVEVfSUQkMiwgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjEuZGVmYXVsdFZhbHVlcyhCQVNFX0NFUlRJRklDQVRFX0lEJDIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoU1VCSkVDVF9OQU1FIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuc3ViamVjdE5hbWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTVUJKRUNUX05BTUUsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YxLmRlZmF1bHRWYWx1ZXMoU1VCSkVDVF9OQU1FKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc3N1ZXIgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBJU1NVRVIkNCwgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjEuZGVmYXVsdFZhbHVlcyhJU1NVRVIkNCkpO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNJR05BVFVSRSQ2LCBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZUluZm9WMS5kZWZhdWx0VmFsdWVzKFNJR05BVFVSRSQ2KSk7XG4gICAgICAgIHRoaXMuc2VyaWFsTnVtYmVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0VSSUFMX05VTUJFUiQ1LCBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZUluZm9WMS5kZWZhdWx0VmFsdWVzKFNFUklBTF9OVU1CRVIkNSkpO1xuICAgICAgICB0aGlzLmF0dHJDZXJ0VmFsaWRpdHlQZXJpb2QgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBVFRSX0NFUlRfVkFMSURJVFlfUEVSSU9EJDEsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YxLmRlZmF1bHRWYWx1ZXMoQVRUUl9DRVJUX1ZBTElESVRZX1BFUklPRCQxKSk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEFUVFJJQlVURVMkMywgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjEuZGVmYXVsdFZhbHVlcyhBVFRSSUJVVEVTJDMpKTtcbiAgICAgICAgaWYgKElTU1VFUl9VTklRVUVfSUQkMiBpbiBwYXJhbWV0ZXJzKVxuICAgICAgICAgICAgdGhpcy5pc3N1ZXJVbmlxdWVJRCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElTU1VFUl9VTklRVUVfSUQkMiwgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjEuZGVmYXVsdFZhbHVlcyhJU1NVRVJfVU5JUVVFX0lEJDIpKTtcbiAgICAgICAgaWYgKEVYVEVOU0lPTlMkNCBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFWFRFTlNJT05TJDQsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YxLmRlZmF1bHRWYWx1ZXMoRVhURU5TSU9OUyQ0KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kaDpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgQkFTRV9DRVJUSUZJQ0FURV9JRCQyOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXNzdWVyU2VyaWFsKCk7XG4gICAgICAgICAgICBjYXNlIFNVQkpFQ1RfTkFNRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyYWxOYW1lcygpO1xuICAgICAgICAgICAgY2FzZSBJU1NVRVIkNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyYWxOYW1lcygpO1xuICAgICAgICAgICAgY2FzZSBTSUdOQVRVUkUkNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0VSSUFMX05VTUJFUiQ1OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgQVRUUl9DRVJUX1ZBTElESVRZX1BFUklPRCQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXR0Q2VydFZhbGlkaXR5UGVyaW9kKCk7XG4gICAgICAgICAgICBjYXNlIEFUVFJJQlVURVMkMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjYXNlIElTU1VFUl9VTklRVUVfSUQkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5CaXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgRVhURU5TSU9OUyQ0OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXh0ZW5zaW9ucygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMudmVyc2lvbiB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5iYXNlQ2VydGlmaWNhdGVJRCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IElzc3VlclNlcmlhbC5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5zdWJqZWN0TmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEdlbmVyYWxOYW1lcy5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEdlbmVyYWxOYW1lcy5zY2hlbWEoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiAobmFtZXMuaXNzdWVyIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnNpZ25hdHVyZSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnNlcmlhbE51bWJlciB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIEF0dENlcnRWYWxpZGl0eVBlcmlvZC5zY2hlbWEobmFtZXMuYXR0ckNlcnRWYWxpZGl0eVBlcmlvZCB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5hdHRyaWJ1dGVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogQXR0cmlidXRlLnNjaGVtYSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmlzc3VlclVuaXF1ZUlEIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBFeHRlbnNpb25zLnNjaGVtYShuYW1lcy5leHRlbnNpb25zIHx8IHt9LCB0cnVlKVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJFopO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YxLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHZlcnNpb246IFZFUlNJT04kaCxcbiAgICAgICAgICAgICAgICBiYXNlQ2VydGlmaWNhdGVJRDogQkFTRV9DRVJUSUZJQ0FURV9JRCQyLFxuICAgICAgICAgICAgICAgIHN1YmplY3ROYW1lOiBTVUJKRUNUX05BTUUsXG4gICAgICAgICAgICAgICAgaXNzdWVyOiBJU1NVRVIkNCxcbiAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogU0lHTkFUVVJFJDZcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyOiBTRVJJQUxfTlVNQkVSJDUsXG4gICAgICAgICAgICAgICAgYXR0ckNlcnRWYWxpZGl0eVBlcmlvZDoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBBVFRSX0NFUlRfVkFMSURJVFlfUEVSSU9EJDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogQVRUUklCVVRFUyQzLFxuICAgICAgICAgICAgICAgIGlzc3VlclVuaXF1ZUlEOiBJU1NVRVJfVU5JUVVFX0lEJDIsXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBFWFRFTlNJT05TJDRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBhc24xLnJlc3VsdC52ZXJzaW9uLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIGlmIChCQVNFX0NFUlRJRklDQVRFX0lEJDIgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuYmFzZUNlcnRpZmljYXRlSUQgPSBuZXcgSXNzdWVyU2VyaWFsKHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXNuMS5yZXN1bHQuYmFzZUNlcnRpZmljYXRlSUQudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoU1VCSkVDVF9OQU1FIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnN1YmplY3ROYW1lID0gbmV3IEdlbmVyYWxOYW1lcyh7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFzbjEucmVzdWx0LnN1YmplY3ROYW1lLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc3N1ZXIgPSBhc24xLnJlc3VsdC5pc3N1ZXI7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LnNpZ25hdHVyZSB9KTtcbiAgICAgICAgdGhpcy5zZXJpYWxOdW1iZXIgPSBhc24xLnJlc3VsdC5zZXJpYWxOdW1iZXI7XG4gICAgICAgIHRoaXMuYXR0ckNlcnRWYWxpZGl0eVBlcmlvZCA9IG5ldyBBdHRDZXJ0VmFsaWRpdHlQZXJpb2QoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmF0dHJDZXJ0VmFsaWRpdHlQZXJpb2QgfSk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQuYXR0cmlidXRlcy52YWx1ZUJsb2NrLnZhbHVlLCBlbGVtZW50ID0+IG5ldyBBdHRyaWJ1dGUoeyBzY2hlbWE6IGVsZW1lbnQgfSkpO1xuICAgICAgICBpZiAoSVNTVUVSX1VOSVFVRV9JRCQyIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlclVuaXF1ZUlEID0gYXNuMS5yZXN1bHQuaXNzdWVyVW5pcXVlSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEVYVEVOU0lPTlMkNCBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5leHRlbnNpb25zID0gbmV3IEV4dGVuc2lvbnMoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmV4dGVuc2lvbnMgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy52ZXJzaW9uIH0pXVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuYmFzZUNlcnRpZmljYXRlSUQpIHtcbiAgICAgICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5iYXNlQ2VydGlmaWNhdGVJRC50b1NjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdWJqZWN0TmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0LnZhbHVlQmxvY2sudmFsdWUucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN1YmplY3ROYW1lLnRvU2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2godGhpcy5pc3N1ZXIudG9TY2hlbWEoKSk7XG4gICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2godGhpcy5zaWduYXR1cmUudG9TY2hlbWEoKSk7XG4gICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2godGhpcy5zZXJpYWxOdW1iZXIpO1xuICAgICAgICByZXN1bHQudmFsdWVCbG9jay52YWx1ZS5wdXNoKHRoaXMuYXR0ckNlcnRWYWxpZGl0eVBlcmlvZC50b1NjaGVtYSgpKTtcbiAgICAgICAgcmVzdWx0LnZhbHVlQmxvY2sudmFsdWUucHVzaChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuYXR0cmlidXRlcywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKHRoaXMuaXNzdWVyVW5pcXVlSUQpIHtcbiAgICAgICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2godGhpcy5pc3N1ZXJVbmlxdWVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgcmVzdWx0LnZhbHVlQmxvY2sudmFsdWUucHVzaCh0aGlzLmV4dGVuc2lvbnMudG9TY2hlbWEoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb25cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYmFzZUNlcnRpZmljYXRlSUQpIHtcbiAgICAgICAgICAgIHJlc3VsdC5iYXNlQ2VydGlmaWNhdGVJRCA9IHRoaXMuYmFzZUNlcnRpZmljYXRlSUQudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3ViamVjdE5hbWUpIHtcbiAgICAgICAgICAgIHJlc3VsdC5zdWJqZWN0TmFtZSA9IHRoaXMuc3ViamVjdE5hbWUudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0Lmlzc3VlciA9IHRoaXMuaXNzdWVyLnRvSlNPTigpO1xuICAgICAgICByZXN1bHQuc2lnbmF0dXJlID0gdGhpcy5zaWduYXR1cmUudG9KU09OKCk7XG4gICAgICAgIHJlc3VsdC5zZXJpYWxOdW1iZXIgPSB0aGlzLnNlcmlhbE51bWJlci50b0pTT04oKTtcbiAgICAgICAgcmVzdWx0LmF0dHJDZXJ0VmFsaWRpdHlQZXJpb2QgPSB0aGlzLmF0dHJDZXJ0VmFsaWRpdHlQZXJpb2QudG9KU09OKCk7XG4gICAgICAgIHJlc3VsdC5hdHRyaWJ1dGVzID0gQXJyYXkuZnJvbSh0aGlzLmF0dHJpYnV0ZXMsIG8gPT4gby50b0pTT04oKSk7XG4gICAgICAgIGlmICh0aGlzLmlzc3VlclVuaXF1ZUlEKSB7XG4gICAgICAgICAgICByZXN1bHQuaXNzdWVyVW5pcXVlSUQgPSB0aGlzLmlzc3VlclVuaXF1ZUlELnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIHJlc3VsdC5leHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjEuQ0xBU1NfTkFNRSA9IFwiQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjFcIjtcblxuY29uc3QgQUNJTkZPJDEgPSBcImFjaW5mb1wiO1xuY29uc3QgU0lHTkFUVVJFX0FMR09SSVRITSQ3ID0gXCJzaWduYXR1cmVBbGdvcml0aG1cIjtcbmNvbnN0IFNJR05BVFVSRV9WQUxVRSQ0ID0gXCJzaWduYXR1cmVWYWx1ZVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkWSA9IFtcbiAgICBBQ0lORk8kMSxcbiAgICBTSUdOQVRVUkVfVkFMVUUkNCxcbiAgICBTSUdOQVRVUkVfQUxHT1JJVEhNJDdcbl07XG5jbGFzcyBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZVYxIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5hY2luZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBQ0lORk8kMSwgQXR0cmlidXRlQ2VydGlmaWNhdGVWMS5kZWZhdWx0VmFsdWVzKEFDSU5GTyQxKSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkFUVVJFX0FMR09SSVRITSQ3LCBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZVYxLmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX0FMR09SSVRITSQ3KSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlVmFsdWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkVfVkFMVUUkNCwgQXR0cmlidXRlQ2VydGlmaWNhdGVWMS5kZWZhdWx0VmFsdWVzKFNJR05BVFVSRV9WQUxVRSQ0KSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBBQ0lORk8kMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YxKCk7XG4gICAgICAgICAgICBjYXNlIFNJR05BVFVSRV9BTEdPUklUSE0kNzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFX1ZBTFVFJDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YxLnNjaGVtYShuYW1lcy5hY2luZm8gfHwge30pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnNpZ25hdHVyZUFsZ29yaXRobSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc2lnbmF0dXJlVmFsdWUgfHwgRU1QVFlfU1RSSU5HKSB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJFkpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEF0dHJpYnV0ZUNlcnRpZmljYXRlVjEuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgYWNpbmZvOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEFDSU5GTyQxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZUFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBTSUdOQVRVUkVfQUxHT1JJVEhNJDdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlVmFsdWU6IFNJR05BVFVSRV9WQUxVRSQ0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5hY2luZm8gPSBuZXcgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjEoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmFjaW5mbyB9KTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQuc2lnbmF0dXJlQWxnb3JpdGhtIH0pO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZVZhbHVlID0gYXNuMS5yZXN1bHQuc2lnbmF0dXJlVmFsdWU7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0aGlzLmFjaW5mby50b1NjaGVtYSgpLFxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjaW5mbzogdGhpcy5hY2luZm8udG9KU09OKCksXG4gICAgICAgICAgICBzaWduYXR1cmVBbGdvcml0aG06IHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgc2lnbmF0dXJlVmFsdWU6IHRoaXMuc2lnbmF0dXJlVmFsdWUudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuQXR0cmlidXRlQ2VydGlmaWNhdGVWMS5DTEFTU19OQU1FID0gXCJBdHRyaWJ1dGVDZXJ0aWZpY2F0ZVYxXCI7XG5cbmNvbnN0IERJR0VTVEVEX09CSkVDVF9UWVBFID0gXCJkaWdlc3RlZE9iamVjdFR5cGVcIjtcbmNvbnN0IE9USEVSX09CSkVDVF9UWVBFX0lEID0gXCJvdGhlck9iamVjdFR5cGVJRFwiO1xuY29uc3QgRElHRVNUX0FMR09SSVRITSQyID0gXCJkaWdlc3RBbGdvcml0aG1cIjtcbmNvbnN0IE9CSkVDVF9ESUdFU1QgPSBcIm9iamVjdERpZ2VzdFwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkWCA9IFtcbiAgICBESUdFU1RFRF9PQkpFQ1RfVFlQRSxcbiAgICBPVEhFUl9PQkpFQ1RfVFlQRV9JRCxcbiAgICBESUdFU1RfQUxHT1JJVEhNJDIsXG4gICAgT0JKRUNUX0RJR0VTVCxcbl07XG5jbGFzcyBPYmplY3REaWdlc3RJbmZvIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kaWdlc3RlZE9iamVjdFR5cGUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBESUdFU1RFRF9PQkpFQ1RfVFlQRSwgT2JqZWN0RGlnZXN0SW5mby5kZWZhdWx0VmFsdWVzKERJR0VTVEVEX09CSkVDVF9UWVBFKSk7XG4gICAgICAgIGlmIChPVEhFUl9PQkpFQ1RfVFlQRV9JRCBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm90aGVyT2JqZWN0VHlwZUlEID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgT1RIRVJfT0JKRUNUX1RZUEVfSUQsIE9iamVjdERpZ2VzdEluZm8uZGVmYXVsdFZhbHVlcyhPVEhFUl9PQkpFQ1RfVFlQRV9JRCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlnZXN0QWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRElHRVNUX0FMR09SSVRITSQyLCBPYmplY3REaWdlc3RJbmZvLmRlZmF1bHRWYWx1ZXMoRElHRVNUX0FMR09SSVRITSQyKSk7XG4gICAgICAgIHRoaXMub2JqZWN0RGlnZXN0ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgT0JKRUNUX0RJR0VTVCwgT2JqZWN0RGlnZXN0SW5mby5kZWZhdWx0VmFsdWVzKE9CSkVDVF9ESUdFU1QpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIERJR0VTVEVEX09CSkVDVF9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkVudW1lcmF0ZWQoKTtcbiAgICAgICAgICAgIGNhc2UgT1RIRVJfT0JKRUNUX1RZUEVfSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcigpO1xuICAgICAgICAgICAgY2FzZSBESUdFU1RfQUxHT1JJVEhNJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIE9CSkVDVF9ESUdFU1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuRW51bWVyYXRlZCh7IG5hbWU6IChuYW1lcy5kaWdlc3RlZE9iamVjdFR5cGUgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLm90aGVyT2JqZWN0VHlwZUlEIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBBbGdvcml0aG1JZGVudGlmaWVyLnNjaGVtYShuYW1lcy5kaWdlc3RBbGdvcml0aG0gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQml0U3RyaW5nKHsgbmFtZTogKG5hbWVzLm9iamVjdERpZ2VzdCB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJFgpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIE9iamVjdERpZ2VzdEluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgZGlnZXN0ZWRPYmplY3RUeXBlOiBESUdFU1RFRF9PQkpFQ1RfVFlQRSxcbiAgICAgICAgICAgICAgICBvdGhlck9iamVjdFR5cGVJRDogT1RIRVJfT0JKRUNUX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgZGlnZXN0QWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IERJR0VTVF9BTEdPUklUSE0kMlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvYmplY3REaWdlc3Q6IE9CSkVDVF9ESUdFU1RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmRpZ2VzdGVkT2JqZWN0VHlwZSA9IGFzbjEucmVzdWx0LmRpZ2VzdGVkT2JqZWN0VHlwZTtcbiAgICAgICAgaWYgKE9USEVSX09CSkVDVF9UWVBFX0lEIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLm90aGVyT2JqZWN0VHlwZUlEID0gYXNuMS5yZXN1bHQub3RoZXJPYmplY3RUeXBlSUQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaWdlc3RBbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQuZGlnZXN0QWxnb3JpdGhtIH0pO1xuICAgICAgICB0aGlzLm9iamVjdERpZ2VzdCA9IGFzbjEucmVzdWx0Lm9iamVjdERpZ2VzdDtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFt0aGlzLmRpZ2VzdGVkT2JqZWN0VHlwZV1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLm90aGVyT2JqZWN0VHlwZUlEKSB7XG4gICAgICAgICAgICByZXN1bHQudmFsdWVCbG9jay52YWx1ZS5wdXNoKHRoaXMub3RoZXJPYmplY3RUeXBlSUQpO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2godGhpcy5kaWdlc3RBbGdvcml0aG0udG9TY2hlbWEoKSk7XG4gICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2godGhpcy5vYmplY3REaWdlc3QpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGRpZ2VzdGVkT2JqZWN0VHlwZTogdGhpcy5kaWdlc3RlZE9iamVjdFR5cGUudG9KU09OKCksXG4gICAgICAgICAgICBkaWdlc3RBbGdvcml0aG06IHRoaXMuZGlnZXN0QWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgb2JqZWN0RGlnZXN0OiB0aGlzLm9iamVjdERpZ2VzdC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMub3RoZXJPYmplY3RUeXBlSUQpIHtcbiAgICAgICAgICAgIHJlc3VsdC5vdGhlck9iamVjdFR5cGVJRCA9IHRoaXMub3RoZXJPYmplY3RUeXBlSUQudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5PYmplY3REaWdlc3RJbmZvLkNMQVNTX05BTUUgPSBcIk9iamVjdERpZ2VzdEluZm9cIjtcblxuY29uc3QgSVNTVUVSX05BTUUgPSBcImlzc3Vlck5hbWVcIjtcbmNvbnN0IEJBU0VfQ0VSVElGSUNBVEVfSUQkMSA9IFwiYmFzZUNlcnRpZmljYXRlSURcIjtcbmNvbnN0IE9CSkVDVF9ESUdFU1RfSU5GTyQxID0gXCJvYmplY3REaWdlc3RJbmZvXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRXID0gW1xuICAgIElTU1VFUl9OQU1FLFxuICAgIEJBU0VfQ0VSVElGSUNBVEVfSUQkMSxcbiAgICBPQkpFQ1RfRElHRVNUX0lORk8kMVxuXTtcbmNsYXNzIFYyRm9ybSBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmIChJU1NVRVJfTkFNRSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmlzc3Vlck5hbWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBJU1NVRVJfTkFNRSwgVjJGb3JtLmRlZmF1bHRWYWx1ZXMoSVNTVUVSX05BTUUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQkFTRV9DRVJUSUZJQ0FURV9JRCQxIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuYmFzZUNlcnRpZmljYXRlSUQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBCQVNFX0NFUlRJRklDQVRFX0lEJDEsIFYyRm9ybS5kZWZhdWx0VmFsdWVzKEJBU0VfQ0VSVElGSUNBVEVfSUQkMSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPQkpFQ1RfRElHRVNUX0lORk8kMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdERpZ2VzdEluZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPQkpFQ1RfRElHRVNUX0lORk8kMSwgVjJGb3JtLmRlZmF1bHRWYWx1ZXMoT0JKRUNUX0RJR0VTVF9JTkZPJDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgSVNTVUVSX05BTUU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmFsTmFtZXMoKTtcbiAgICAgICAgICAgIGNhc2UgQkFTRV9DRVJUSUZJQ0FURV9JRCQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXNzdWVyU2VyaWFsKCk7XG4gICAgICAgICAgICBjYXNlIE9CSkVDVF9ESUdFU1RfSU5GTyQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0RGlnZXN0SW5mbygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBHZW5lcmFsTmFtZXMuc2NoZW1hKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogbmFtZXMuaXNzdWVyTmFtZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYmFzZUNlcnRpZmljYXRlSUQgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IElzc3VlclNlcmlhbC5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMub2JqZWN0RGlnZXN0SW5mbyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogT2JqZWN0RGlnZXN0SW5mby5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRXKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBWMkZvcm0uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVyTmFtZTogSVNTVUVSX05BTUUsXG4gICAgICAgICAgICAgICAgYmFzZUNlcnRpZmljYXRlSUQ6IEJBU0VfQ0VSVElGSUNBVEVfSUQkMSxcbiAgICAgICAgICAgICAgICBvYmplY3REaWdlc3RJbmZvOiBPQkpFQ1RfRElHRVNUX0lORk8kMVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIGlmIChJU1NVRVJfTkFNRSBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMuaXNzdWVyTmFtZSA9IG5ldyBHZW5lcmFsTmFtZXMoeyBzY2hlbWE6IGFzbjEucmVzdWx0Lmlzc3Vlck5hbWUgfSk7XG4gICAgICAgIGlmIChCQVNFX0NFUlRJRklDQVRFX0lEJDEgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuYmFzZUNlcnRpZmljYXRlSUQgPSBuZXcgSXNzdWVyU2VyaWFsKHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXNuMS5yZXN1bHQuYmFzZUNlcnRpZmljYXRlSUQudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT0JKRUNUX0RJR0VTVF9JTkZPJDEgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0RGlnZXN0SW5mbyA9IG5ldyBPYmplY3REaWdlc3RJbmZvKHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXNuMS5yZXN1bHQub2JqZWN0RGlnZXN0SW5mby52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgYXNuMWpzLlNlcXVlbmNlKCk7XG4gICAgICAgIGlmICh0aGlzLmlzc3Vlck5hbWUpXG4gICAgICAgICAgICByZXN1bHQudmFsdWVCbG9jay52YWx1ZS5wdXNoKHRoaXMuaXNzdWVyTmFtZS50b1NjaGVtYSgpKTtcbiAgICAgICAgaWYgKHRoaXMuYmFzZUNlcnRpZmljYXRlSUQpIHtcbiAgICAgICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5iYXNlQ2VydGlmaWNhdGVJRC50b1NjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vYmplY3REaWdlc3RJbmZvKSB7XG4gICAgICAgICAgICByZXN1bHQudmFsdWVCbG9jay52YWx1ZS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub2JqZWN0RGlnZXN0SW5mby50b1NjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICBpZiAodGhpcy5pc3N1ZXJOYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQuaXNzdWVyTmFtZSA9IHRoaXMuaXNzdWVyTmFtZS50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5iYXNlQ2VydGlmaWNhdGVJRCkge1xuICAgICAgICAgICAgcmVzdWx0LmJhc2VDZXJ0aWZpY2F0ZUlEID0gdGhpcy5iYXNlQ2VydGlmaWNhdGVJRC50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vYmplY3REaWdlc3RJbmZvKSB7XG4gICAgICAgICAgICByZXN1bHQub2JqZWN0RGlnZXN0SW5mbyA9IHRoaXMub2JqZWN0RGlnZXN0SW5mby50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblYyRm9ybS5DTEFTU19OQU1FID0gXCJWMkZvcm1cIjtcblxuY29uc3QgQkFTRV9DRVJUSUZJQ0FURV9JRCA9IFwiYmFzZUNlcnRpZmljYXRlSURcIjtcbmNvbnN0IEVOVElUWV9OQU1FID0gXCJlbnRpdHlOYW1lXCI7XG5jb25zdCBPQkpFQ1RfRElHRVNUX0lORk8gPSBcIm9iamVjdERpZ2VzdEluZm9cIjtcbmNvbnN0IENMRUFSX1BST1BTJFYgPSBbXG4gICAgQkFTRV9DRVJUSUZJQ0FURV9JRCxcbiAgICBFTlRJVFlfTkFNRSxcbiAgICBPQkpFQ1RfRElHRVNUX0lORk9cbl07XG5jbGFzcyBIb2xkZXIgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoQkFTRV9DRVJUSUZJQ0FURV9JRCBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmJhc2VDZXJ0aWZpY2F0ZUlEID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQkFTRV9DRVJUSUZJQ0FURV9JRCwgSG9sZGVyLmRlZmF1bHRWYWx1ZXMoQkFTRV9DRVJUSUZJQ0FURV9JRCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChFTlRJVFlfTkFNRSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmVudGl0eU5hbWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFTlRJVFlfTkFNRSwgSG9sZGVyLmRlZmF1bHRWYWx1ZXMoRU5USVRZX05BTUUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT0JKRUNUX0RJR0VTVF9JTkZPIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0RGlnZXN0SW5mbyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9CSkVDVF9ESUdFU1RfSU5GTywgSG9sZGVyLmRlZmF1bHRWYWx1ZXMoT0JKRUNUX0RJR0VTVF9JTkZPKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEJBU0VfQ0VSVElGSUNBVEVfSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJc3N1ZXJTZXJpYWwoKTtcbiAgICAgICAgICAgIGNhc2UgRU5USVRZX05BTUU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmFsTmFtZXMoKTtcbiAgICAgICAgICAgIGNhc2UgT0JKRUNUX0RJR0VTVF9JTkZPOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0RGlnZXN0SW5mbygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5iYXNlQ2VydGlmaWNhdGVJRCB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSXNzdWVyU2VyaWFsLnNjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5lbnRpdHlOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBHZW5lcmFsTmFtZXMuc2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLm9iamVjdERpZ2VzdEluZm8gfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE9iamVjdERpZ2VzdEluZm8uc2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkVik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgSG9sZGVyLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGJhc2VDZXJ0aWZpY2F0ZUlEOiBCQVNFX0NFUlRJRklDQVRFX0lELFxuICAgICAgICAgICAgICAgIGVudGl0eU5hbWU6IEVOVElUWV9OQU1FLFxuICAgICAgICAgICAgICAgIG9iamVjdERpZ2VzdEluZm86IE9CSkVDVF9ESUdFU1RfSU5GT1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIGlmIChCQVNFX0NFUlRJRklDQVRFX0lEIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmJhc2VDZXJ0aWZpY2F0ZUlEID0gbmV3IElzc3VlclNlcmlhbCh7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFzbjEucmVzdWx0LmJhc2VDZXJ0aWZpY2F0ZUlELnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEVOVElUWV9OQU1FIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmVudGl0eU5hbWUgPSBuZXcgR2VuZXJhbE5hbWVzKHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXNuMS5yZXN1bHQuZW50aXR5TmFtZS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPQkpFQ1RfRElHRVNUX0lORk8gaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0RGlnZXN0SW5mbyA9IG5ldyBPYmplY3REaWdlc3RJbmZvKHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXNuMS5yZXN1bHQub2JqZWN0RGlnZXN0SW5mby52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgYXNuMWpzLlNlcXVlbmNlKCk7XG4gICAgICAgIGlmICh0aGlzLmJhc2VDZXJ0aWZpY2F0ZUlEKSB7XG4gICAgICAgICAgICByZXN1bHQudmFsdWVCbG9jay52YWx1ZS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuYmFzZUNlcnRpZmljYXRlSUQudG9TY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZW50aXR5TmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0LnZhbHVlQmxvY2sudmFsdWUucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmVudGl0eU5hbWUudG9TY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2JqZWN0RGlnZXN0SW5mbykge1xuICAgICAgICAgICAgcmVzdWx0LnZhbHVlQmxvY2sudmFsdWUucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLm9iamVjdERpZ2VzdEluZm8udG9TY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuYmFzZUNlcnRpZmljYXRlSUQpIHtcbiAgICAgICAgICAgIHJlc3VsdC5iYXNlQ2VydGlmaWNhdGVJRCA9IHRoaXMuYmFzZUNlcnRpZmljYXRlSUQudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZW50aXR5TmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0LmVudGl0eU5hbWUgPSB0aGlzLmVudGl0eU5hbWUudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2JqZWN0RGlnZXN0SW5mbykge1xuICAgICAgICAgICAgcmVzdWx0Lm9iamVjdERpZ2VzdEluZm8gPSB0aGlzLm9iamVjdERpZ2VzdEluZm8udG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5Ib2xkZXIuQ0xBU1NfTkFNRSA9IFwiSG9sZGVyXCI7XG5cbmNvbnN0IFZFUlNJT04kZyA9IFwidmVyc2lvblwiO1xuY29uc3QgSE9MREVSID0gXCJob2xkZXJcIjtcbmNvbnN0IElTU1VFUiQzID0gXCJpc3N1ZXJcIjtcbmNvbnN0IFNJR05BVFVSRSQ1ID0gXCJzaWduYXR1cmVcIjtcbmNvbnN0IFNFUklBTF9OVU1CRVIkNCA9IFwic2VyaWFsTnVtYmVyXCI7XG5jb25zdCBBVFRSX0NFUlRfVkFMSURJVFlfUEVSSU9EID0gXCJhdHRyQ2VydFZhbGlkaXR5UGVyaW9kXCI7XG5jb25zdCBBVFRSSUJVVEVTJDIgPSBcImF0dHJpYnV0ZXNcIjtcbmNvbnN0IElTU1VFUl9VTklRVUVfSUQkMSA9IFwiaXNzdWVyVW5pcXVlSURcIjtcbmNvbnN0IEVYVEVOU0lPTlMkMyA9IFwiZXh0ZW5zaW9uc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkVSA9IFtcbiAgICBWRVJTSU9OJGcsXG4gICAgSE9MREVSLFxuICAgIElTU1VFUiQzLFxuICAgIFNJR05BVFVSRSQ1LFxuICAgIFNFUklBTF9OVU1CRVIkNCxcbiAgICBBVFRSX0NFUlRfVkFMSURJVFlfUEVSSU9ELFxuICAgIEFUVFJJQlVURVMkMixcbiAgICBJU1NVRVJfVU5JUVVFX0lEJDEsXG4gICAgRVhURU5TSU9OUyQzXG5dO1xuY2xhc3MgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjIgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWRVJTSU9OJGcsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyLmRlZmF1bHRWYWx1ZXMoVkVSU0lPTiRnKSk7XG4gICAgICAgIHRoaXMuaG9sZGVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgSE9MREVSLCBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZUluZm9WMi5kZWZhdWx0VmFsdWVzKEhPTERFUikpO1xuICAgICAgICB0aGlzLmlzc3VlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElTU1VFUiQzLCBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZUluZm9WMi5kZWZhdWx0VmFsdWVzKElTU1VFUiQzKSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkFUVVJFJDUsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyLmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFJDUpKTtcbiAgICAgICAgdGhpcy5zZXJpYWxOdW1iZXIgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTRVJJQUxfTlVNQkVSJDQsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyLmRlZmF1bHRWYWx1ZXMoU0VSSUFMX05VTUJFUiQ0KSk7XG4gICAgICAgIHRoaXMuYXR0ckNlcnRWYWxpZGl0eVBlcmlvZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEFUVFJfQ0VSVF9WQUxJRElUWV9QRVJJT0QsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyLmRlZmF1bHRWYWx1ZXMoQVRUUl9DRVJUX1ZBTElESVRZX1BFUklPRCkpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBVFRSSUJVVEVTJDIsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyLmRlZmF1bHRWYWx1ZXMoQVRUUklCVVRFUyQyKSk7XG4gICAgICAgIGlmIChJU1NVRVJfVU5JUVVFX0lEJDEgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXJVbmlxdWVJRCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElTU1VFUl9VTklRVUVfSUQkMSwgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjIuZGVmYXVsdFZhbHVlcyhJU1NVRVJfVU5JUVVFX0lEJDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoRVhURU5TSU9OUyQzIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEVYVEVOU0lPTlMkMywgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjIuZGVmYXVsdFZhbHVlcyhFWFRFTlNJT05TJDMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiRnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgY2FzZSBIT0xERVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBIb2xkZXIoKTtcbiAgICAgICAgICAgIGNhc2UgSVNTVUVSJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgY2FzZSBTSUdOQVRVUkUkNTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0VSSUFMX05VTUJFUiQ0OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgQVRUUl9DRVJUX1ZBTElESVRZX1BFUklPRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF0dENlcnRWYWxpZGl0eVBlcmlvZCgpO1xuICAgICAgICAgICAgY2FzZSBBVFRSSUJVVEVTJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY2FzZSBJU1NVRVJfVU5JUVVFX0lEJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBjYXNlIEVYVEVOU0lPTlMkMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEV4dGVuc2lvbnMoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnZlcnNpb24gfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBIb2xkZXIuc2NoZW1hKG5hbWVzLmhvbGRlciB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5DaG9pY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhbE5hbWVzLnNjaGVtYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiAobmFtZXMuaXNzdWVyIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5pc3N1ZXIgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBWMkZvcm0uc2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnNpZ25hdHVyZSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnNlcmlhbE51bWJlciB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIEF0dENlcnRWYWxpZGl0eVBlcmlvZC5zY2hlbWEobmFtZXMuYXR0ckNlcnRWYWxpZGl0eVBlcmlvZCB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5hdHRyaWJ1dGVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogQXR0cmlidXRlLnNjaGVtYSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmlzc3VlclVuaXF1ZUlEIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBFeHRlbnNpb25zLnNjaGVtYShuYW1lcy5leHRlbnNpb25zIHx8IHt9LCB0cnVlKVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJFUpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHZlcnNpb246IFZFUlNJT04kZyxcbiAgICAgICAgICAgICAgICBob2xkZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogSE9MREVSXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzc3VlcjogSVNTVUVSJDMsXG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFNJR05BVFVSRSQ1XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlcjogU0VSSUFMX05VTUJFUiQ0LFxuICAgICAgICAgICAgICAgIGF0dHJDZXJ0VmFsaWRpdHlQZXJpb2Q6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogQVRUUl9DRVJUX1ZBTElESVRZX1BFUklPRFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBBVFRSSUJVVEVTJDIsXG4gICAgICAgICAgICAgICAgaXNzdWVyVW5pcXVlSUQ6IElTU1VFUl9VTklRVUVfSUQkMSxcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEVYVEVOU0lPTlMkM1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGFzbjEucmVzdWx0LnZlcnNpb24udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgdGhpcy5ob2xkZXIgPSBuZXcgSG9sZGVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5ob2xkZXIgfSk7XG4gICAgICAgIHN3aXRjaCAoYXNuMS5yZXN1bHQuaXNzdWVyLmlkQmxvY2sudGFnQ2xhc3MpIHtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICB0aGlzLmlzc3VlciA9IG5ldyBWMkZvcm0oe1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFzbjEucmVzdWx0Lmlzc3Vlci52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCB2YWx1ZSBmb3IgJ2lzc3VlcicgaW4gQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaWduYXR1cmUgPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQuc2lnbmF0dXJlIH0pO1xuICAgICAgICB0aGlzLnNlcmlhbE51bWJlciA9IGFzbjEucmVzdWx0LnNlcmlhbE51bWJlcjtcbiAgICAgICAgdGhpcy5hdHRyQ2VydFZhbGlkaXR5UGVyaW9kID0gbmV3IEF0dENlcnRWYWxpZGl0eVBlcmlvZCh7IHNjaGVtYTogYXNuMS5yZXN1bHQuYXR0ckNlcnRWYWxpZGl0eVBlcmlvZCB9KTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5hdHRyaWJ1dGVzLnZhbHVlQmxvY2sudmFsdWUsIGVsZW1lbnQgPT4gbmV3IEF0dHJpYnV0ZSh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgIGlmIChJU1NVRVJfVU5JUVVFX0lEJDEgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVyVW5pcXVlSUQgPSBhc24xLnJlc3VsdC5pc3N1ZXJVbmlxdWVJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoRVhURU5TSU9OUyQzIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSBuZXcgRXh0ZW5zaW9ucyh7IHNjaGVtYTogYXNuMS5yZXN1bHQuZXh0ZW5zaW9ucyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLnZlcnNpb24gfSksXG4gICAgICAgICAgICAgICAgdGhpcy5ob2xkZXIudG9TY2hlbWEoKSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuaXNzdWVyLnRvU2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpYWxOdW1iZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyQ2VydFZhbGlkaXR5UGVyaW9kLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuYXR0cmlidXRlcywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmlzc3VlclVuaXF1ZUlEKSB7XG4gICAgICAgICAgICByZXN1bHQudmFsdWVCbG9jay52YWx1ZS5wdXNoKHRoaXMuaXNzdWVyVW5pcXVlSUQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIHJlc3VsdC52YWx1ZUJsb2NrLnZhbHVlLnB1c2godGhpcy5leHRlbnNpb25zLnRvU2NoZW1hKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uLFxuICAgICAgICAgICAgaG9sZGVyOiB0aGlzLmhvbGRlci50b0pTT04oKSxcbiAgICAgICAgICAgIGlzc3VlcjogdGhpcy5pc3N1ZXIudG9KU09OKCksXG4gICAgICAgICAgICBzaWduYXR1cmU6IHRoaXMuc2lnbmF0dXJlLnRvSlNPTigpLFxuICAgICAgICAgICAgc2VyaWFsTnVtYmVyOiB0aGlzLnNlcmlhbE51bWJlci50b0pTT04oKSxcbiAgICAgICAgICAgIGF0dHJDZXJ0VmFsaWRpdHlQZXJpb2Q6IHRoaXMuYXR0ckNlcnRWYWxpZGl0eVBlcmlvZC50b0pTT04oKSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IEFycmF5LmZyb20odGhpcy5hdHRyaWJ1dGVzLCBvID0+IG8udG9KU09OKCkpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlzc3VlclVuaXF1ZUlEKSB7XG4gICAgICAgICAgICByZXN1bHQuaXNzdWVyVW5pcXVlSUQgPSB0aGlzLmlzc3VlclVuaXF1ZUlELnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIHJlc3VsdC5leHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjIuQ0xBU1NfTkFNRSA9IFwiQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjJcIjtcblxuY29uc3QgQUNJTkZPID0gXCJhY2luZm9cIjtcbmNvbnN0IFNJR05BVFVSRV9BTEdPUklUSE0kNiA9IFwic2lnbmF0dXJlQWxnb3JpdGhtXCI7XG5jb25zdCBTSUdOQVRVUkVfVkFMVUUkMyA9IFwic2lnbmF0dXJlVmFsdWVcIjtcbmNvbnN0IENMRUFSX1BST1BTJFQgPSBbXG4gICAgQUNJTkZPLFxuICAgIFNJR05BVFVSRV9BTEdPUklUSE0kNixcbiAgICBTSUdOQVRVUkVfVkFMVUUkMyxcbl07XG5jbGFzcyBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZVYyIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5hY2luZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBQ0lORk8sIEF0dHJpYnV0ZUNlcnRpZmljYXRlVjIuZGVmYXVsdFZhbHVlcyhBQ0lORk8pKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkVfQUxHT1JJVEhNJDYsIEF0dHJpYnV0ZUNlcnRpZmljYXRlVjIuZGVmYXVsdFZhbHVlcyhTSUdOQVRVUkVfQUxHT1JJVEhNJDYpKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNJR05BVFVSRV9WQUxVRSQzLCBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZVYyLmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX1ZBTFVFJDMpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEFDSU5GTzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyKCk7XG4gICAgICAgICAgICBjYXNlIFNJR05BVFVSRV9BTEdPUklUSE0kNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFX1ZBTFVFJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyLnNjaGVtYShuYW1lcy5hY2luZm8gfHwge30pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnNpZ25hdHVyZUFsZ29yaXRobSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc2lnbmF0dXJlVmFsdWUgfHwgRU1QVFlfU1RSSU5HKSB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJFQpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEF0dHJpYnV0ZUNlcnRpZmljYXRlVjIuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgYWNpbmZvOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEFDSU5GT1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaWduYXR1cmVBbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogU0lHTkFUVVJFX0FMR09SSVRITSQ2XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZVZhbHVlOiBTSUdOQVRVUkVfVkFMVUUkM1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuYWNpbmZvID0gbmV3IEF0dHJpYnV0ZUNlcnRpZmljYXRlSW5mb1YyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5hY2luZm8gfSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LnNpZ25hdHVyZUFsZ29yaXRobSB9KTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZSA9IGFzbjEucmVzdWx0LnNpZ25hdHVyZVZhbHVlO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5hY2luZm8udG9TY2hlbWEoKSxcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobS50b1NjaGVtYSgpLFxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlVmFsdWVcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2luZm86IHRoaXMuYWNpbmZvLnRvSlNPTigpLFxuICAgICAgICAgICAgc2lnbmF0dXJlQWxnb3JpdGhtOiB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobS50b0pTT04oKSxcbiAgICAgICAgICAgIHNpZ25hdHVyZVZhbHVlOiB0aGlzLnNpZ25hdHVyZVZhbHVlLnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbkF0dHJpYnV0ZUNlcnRpZmljYXRlVjIuQ0xBU1NfTkFNRSA9IFwiQXR0cmlidXRlQ2VydGlmaWNhdGVWMlwiO1xuXG5jb25zdCBDT05URU5UX1RZUEUgPSBcImNvbnRlbnRUeXBlXCI7XG5jb25zdCBDT05URU5UID0gXCJjb250ZW50XCI7XG5jb25zdCBDTEVBUl9QUk9QUyRTID0gW0NPTlRFTlRfVFlQRSwgQ09OVEVOVF07XG5jbGFzcyBDb250ZW50SW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29udGVudFR5cGUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDT05URU5UX1RZUEUsIENvbnRlbnRJbmZvLmRlZmF1bHRWYWx1ZXMoQ09OVEVOVF9UWVBFKSk7XG4gICAgICAgIHRoaXMuY29udGVudCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENPTlRFTlQsIENvbnRlbnRJbmZvLmRlZmF1bHRWYWx1ZXMoQ09OVEVOVCkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgQ09OVEVOVF9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjYXNlIENPTlRFTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQW55KCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIENPTlRFTlRfVFlQRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBtZW1iZXJWYWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJWYWx1ZSA9PT0gdGhpcy5kZWZhdWx0VmFsdWVzKENPTlRFTlRfVFlQRSkpO1xuICAgICAgICAgICAgY2FzZSBDT05URU5UOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgaW5zdGFuY2VvZiBhc24xanMuQW55KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgaWYgKChcIm9wdGlvbmFsXCIgaW4gbmFtZXMpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgbmFtZXMub3B0aW9uYWwgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBcIkNvbnRlbnRJbmZvXCIpLFxuICAgICAgICAgICAgb3B0aW9uYWw6IG5hbWVzLm9wdGlvbmFsLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyBuYW1lOiAobmFtZXMuY29udGVudFR5cGUgfHwgQ09OVEVOVF9UWVBFKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLkFueSh7IG5hbWU6IChuYW1lcy5jb250ZW50IHx8IENPTlRFTlQpIH0pXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkUyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgQ29udGVudEluZm8uc2NoZW1hKCkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmNvbnRlbnRUeXBlID0gYXNuMS5yZXN1bHQuY29udGVudFR5cGUudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBhc24xLnJlc3VsdC5jb250ZW50O1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IHRoaXMuY29udGVudFR5cGUgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbdGhpcy5jb250ZW50XVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvYmplY3QgPSB7XG4gICAgICAgICAgICBjb250ZW50VHlwZTogdGhpcy5jb250ZW50VHlwZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoISh0aGlzLmNvbnRlbnQgaW5zdGFuY2VvZiBhc24xanMuQW55KSkge1xuICAgICAgICAgICAgb2JqZWN0LmNvbnRlbnQgPSB0aGlzLmNvbnRlbnQudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG59XG5Db250ZW50SW5mby5DTEFTU19OQU1FID0gXCJDb250ZW50SW5mb1wiO1xuQ29udGVudEluZm8uREFUQSA9IGlkX0NvbnRlbnRUeXBlX0RhdGE7XG5Db250ZW50SW5mby5TSUdORURfREFUQSA9IGlkX0NvbnRlbnRUeXBlX1NpZ25lZERhdGE7XG5Db250ZW50SW5mby5FTlZFTE9QRURfREFUQSA9IGlkX0NvbnRlbnRUeXBlX0VudmVsb3BlZERhdGE7XG5Db250ZW50SW5mby5FTkNSWVBURURfREFUQSA9IGlkX0NvbnRlbnRUeXBlX0VuY3J5cHRlZERhdGE7XG5cbmNvbnN0IFRZUEUkMSA9IFwidHlwZVwiO1xuY29uc3QgVkFMVUUkNCA9IFwidmFsdWVcIjtcbmNvbnN0IFVUQ19USU1FX05BTUUgPSBcInV0Y1RpbWVOYW1lXCI7XG5jb25zdCBHRU5FUkFMX1RJTUVfTkFNRSA9IFwiZ2VuZXJhbFRpbWVOYW1lXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRSID0gW1VUQ19USU1FX05BTUUsIEdFTkVSQUxfVElNRV9OQU1FXTtcbnZhciBUaW1lVHlwZTtcbihmdW5jdGlvbiAoVGltZVR5cGUpIHtcbiAgICBUaW1lVHlwZVtUaW1lVHlwZVtcIlVUQ1RpbWVcIl0gPSAwXSA9IFwiVVRDVGltZVwiO1xuICAgIFRpbWVUeXBlW1RpbWVUeXBlW1wiR2VuZXJhbGl6ZWRUaW1lXCJdID0gMV0gPSBcIkdlbmVyYWxpemVkVGltZVwiO1xuICAgIFRpbWVUeXBlW1RpbWVUeXBlW1wiZW1wdHlcIl0gPSAyXSA9IFwiZW1wdHlcIjtcbn0pKFRpbWVUeXBlIHx8IChUaW1lVHlwZSA9IHt9KSk7XG5jbGFzcyBUaW1lIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50eXBlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVFlQRSQxLCBUaW1lLmRlZmF1bHRWYWx1ZXMoVFlQRSQxKSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWQUxVRSQ0LCBUaW1lLmRlZmF1bHRWYWx1ZXMoVkFMVUUkNCkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVFlQRSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgY2FzZSBWQUxVRSQ0OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgwLCAwLCAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30sIG9wdGlvbmFsID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLkNob2ljZSh7XG4gICAgICAgICAgICBvcHRpb25hbCxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5VVENUaW1lKHsgbmFtZTogKG5hbWVzLnV0Y1RpbWVOYW1lIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyBuYW1lOiAobmFtZXMuZ2VuZXJhbFRpbWVOYW1lIHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRSKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBUaW1lLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHV0Y1RpbWVOYW1lOiBVVENfVElNRV9OQU1FLFxuICAgICAgICAgICAgICAgIGdlbmVyYWxUaW1lTmFtZTogR0VORVJBTF9USU1FX05BTUVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICBpZiAoVVRDX1RJTUVfTkFNRSBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBhc24xLnJlc3VsdC51dGNUaW1lTmFtZS50b0RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoR0VORVJBTF9USU1FX05BTUUgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gYXNuMS5yZXN1bHQuZ2VuZXJhbFRpbWVOYW1lLnRvRGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBpZiAodGhpcy50eXBlID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5VVENUaW1lKHsgdmFsdWVEYXRlOiB0aGlzLnZhbHVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuR2VuZXJhbGl6ZWRUaW1lKHsgdmFsdWVEYXRlOiB0aGlzLnZhbHVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG59XG5UaW1lLkNMQVNTX05BTUUgPSBcIlRpbWVcIjtcblxuY29uc3QgVEJTJDQgPSBcInRic1wiO1xuY29uc3QgVkVSU0lPTiRmID0gXCJ2ZXJzaW9uXCI7XG5jb25zdCBTRVJJQUxfTlVNQkVSJDMgPSBcInNlcmlhbE51bWJlclwiO1xuY29uc3QgU0lHTkFUVVJFJDQgPSBcInNpZ25hdHVyZVwiO1xuY29uc3QgSVNTVUVSJDIgPSBcImlzc3VlclwiO1xuY29uc3QgTk9UX0JFRk9SRSA9IFwibm90QmVmb3JlXCI7XG5jb25zdCBOT1RfQUZURVIgPSBcIm5vdEFmdGVyXCI7XG5jb25zdCBTVUJKRUNUJDEgPSBcInN1YmplY3RcIjtcbmNvbnN0IFNVQkpFQ1RfUFVCTElDX0tFWV9JTkZPID0gXCJzdWJqZWN0UHVibGljS2V5SW5mb1wiO1xuY29uc3QgSVNTVUVSX1VOSVFVRV9JRCA9IFwiaXNzdWVyVW5pcXVlSURcIjtcbmNvbnN0IFNVQkpFQ1RfVU5JUVVFX0lEID0gXCJzdWJqZWN0VW5pcXVlSURcIjtcbmNvbnN0IEVYVEVOU0lPTlMkMiA9IFwiZXh0ZW5zaW9uc1wiO1xuY29uc3QgU0lHTkFUVVJFX0FMR09SSVRITSQ1ID0gXCJzaWduYXR1cmVBbGdvcml0aG1cIjtcbmNvbnN0IFNJR05BVFVSRV9WQUxVRSQyID0gXCJzaWduYXR1cmVWYWx1ZVwiO1xuY29uc3QgVEJTX0NFUlRJRklDQVRFID0gXCJ0YnNDZXJ0aWZpY2F0ZVwiO1xuY29uc3QgVEJTX0NFUlRJRklDQVRFX1ZFUlNJT04gPSBgJHtUQlNfQ0VSVElGSUNBVEV9LiR7VkVSU0lPTiRmfWA7XG5jb25zdCBUQlNfQ0VSVElGSUNBVEVfU0VSSUFMX05VTUJFUiA9IGAke1RCU19DRVJUSUZJQ0FURX0uJHtTRVJJQUxfTlVNQkVSJDN9YDtcbmNvbnN0IFRCU19DRVJUSUZJQ0FURV9TSUdOQVRVUkUgPSBgJHtUQlNfQ0VSVElGSUNBVEV9LiR7U0lHTkFUVVJFJDR9YDtcbmNvbnN0IFRCU19DRVJUSUZJQ0FURV9JU1NVRVIgPSBgJHtUQlNfQ0VSVElGSUNBVEV9LiR7SVNTVUVSJDJ9YDtcbmNvbnN0IFRCU19DRVJUSUZJQ0FURV9OT1RfQkVGT1JFID0gYCR7VEJTX0NFUlRJRklDQVRFfS4ke05PVF9CRUZPUkV9YDtcbmNvbnN0IFRCU19DRVJUSUZJQ0FURV9OT1RfQUZURVIgPSBgJHtUQlNfQ0VSVElGSUNBVEV9LiR7Tk9UX0FGVEVSfWA7XG5jb25zdCBUQlNfQ0VSVElGSUNBVEVfU1VCSkVDVCA9IGAke1RCU19DRVJUSUZJQ0FURX0uJHtTVUJKRUNUJDF9YDtcbmNvbnN0IFRCU19DRVJUSUZJQ0FURV9TVUJKRUNUX1BVQkxJQ19LRVkgPSBgJHtUQlNfQ0VSVElGSUNBVEV9LiR7U1VCSkVDVF9QVUJMSUNfS0VZX0lORk99YDtcbmNvbnN0IFRCU19DRVJUSUZJQ0FURV9JU1NVRVJfVU5JUVVFX0lEID0gYCR7VEJTX0NFUlRJRklDQVRFfS4ke0lTU1VFUl9VTklRVUVfSUR9YDtcbmNvbnN0IFRCU19DRVJUSUZJQ0FURV9TVUJKRUNUX1VOSVFVRV9JRCA9IGAke1RCU19DRVJUSUZJQ0FURX0uJHtTVUJKRUNUX1VOSVFVRV9JRH1gO1xuY29uc3QgVEJTX0NFUlRJRklDQVRFX0VYVEVOU0lPTlMgPSBgJHtUQlNfQ0VSVElGSUNBVEV9LiR7RVhURU5TSU9OUyQyfWA7XG5jb25zdCBDTEVBUl9QUk9QUyRRID0gW1xuICAgIFRCU19DRVJUSUZJQ0FURSxcbiAgICBUQlNfQ0VSVElGSUNBVEVfVkVSU0lPTixcbiAgICBUQlNfQ0VSVElGSUNBVEVfU0VSSUFMX05VTUJFUixcbiAgICBUQlNfQ0VSVElGSUNBVEVfU0lHTkFUVVJFLFxuICAgIFRCU19DRVJUSUZJQ0FURV9JU1NVRVIsXG4gICAgVEJTX0NFUlRJRklDQVRFX05PVF9CRUZPUkUsXG4gICAgVEJTX0NFUlRJRklDQVRFX05PVF9BRlRFUixcbiAgICBUQlNfQ0VSVElGSUNBVEVfU1VCSkVDVCxcbiAgICBUQlNfQ0VSVElGSUNBVEVfU1VCSkVDVF9QVUJMSUNfS0VZLFxuICAgIFRCU19DRVJUSUZJQ0FURV9JU1NVRVJfVU5JUVVFX0lELFxuICAgIFRCU19DRVJUSUZJQ0FURV9TVUJKRUNUX1VOSVFVRV9JRCxcbiAgICBUQlNfQ0VSVElGSUNBVEVfRVhURU5TSU9OUyxcbiAgICBTSUdOQVRVUkVfQUxHT1JJVEhNJDUsXG4gICAgU0lHTkFUVVJFX1ZBTFVFJDJcbl07XG5mdW5jdGlvbiB0YnNDZXJ0aWZpY2F0ZShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgVEJTX0NFUlRJRklDQVRFKSxcbiAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnRic0NlcnRpZmljYXRlVmVyc2lvbiB8fCBUQlNfQ0VSVElGSUNBVEVfVkVSU0lPTikgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy50YnNDZXJ0aWZpY2F0ZVNlcmlhbE51bWJlciB8fCBUQlNfQ0VSVElGSUNBVEVfU0VSSUFMX05VTUJFUikgfSksXG4gICAgICAgICAgICBBbGdvcml0aG1JZGVudGlmaWVyLnNjaGVtYShuYW1lcy5zaWduYXR1cmUgfHwge1xuICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogVEJTX0NFUlRJRklDQVRFX1NJR05BVFVSRVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMuc2NoZW1hKG5hbWVzLmlzc3VlciB8fCB7XG4gICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBUQlNfQ0VSVElGSUNBVEVfSVNTVUVSXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMudGJzQ2VydGlmaWNhdGVWYWxpZGl0eSB8fCBcInRic0NlcnRpZmljYXRlLnZhbGlkaXR5XCIpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgIFRpbWUuc2NoZW1hKG5hbWVzLm5vdEJlZm9yZSB8fCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0Y1RpbWVOYW1lOiBUQlNfQ0VSVElGSUNBVEVfTk9UX0JFRk9SRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmFsVGltZU5hbWU6IFRCU19DRVJUSUZJQ0FURV9OT1RfQkVGT1JFXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBUaW1lLnNjaGVtYShuYW1lcy5ub3RBZnRlciB8fCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0Y1RpbWVOYW1lOiBUQlNfQ0VSVElGSUNBVEVfTk9UX0FGVEVSLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYWxUaW1lTmFtZTogVEJTX0NFUlRJRklDQVRFX05PVF9BRlRFUlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMuc2NoZW1hKG5hbWVzLnN1YmplY3QgfHwge1xuICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogVEJTX0NFUlRJRklDQVRFX1NVQkpFQ1RcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIFB1YmxpY0tleUluZm8uc2NoZW1hKG5hbWVzLnN1YmplY3RQdWJsaWNLZXlJbmZvIHx8IHtcbiAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFRCU19DRVJUSUZJQ0FURV9TVUJKRUNUX1BVQkxJQ19LRVlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMudGJzQ2VydGlmaWNhdGVJc3N1ZXJVbmlxdWVJRCB8fCBUQlNfQ0VSVElGSUNBVEVfSVNTVUVSX1VOSVFVRV9JRCksXG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLnRic0NlcnRpZmljYXRlU3ViamVjdFVuaXF1ZUlEIHx8IFRCU19DRVJUSUZJQ0FURV9TVUJKRUNUX1VOSVFVRV9JRCksXG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbRXh0ZW5zaW9ucy5zY2hlbWEobmFtZXMuZXh0ZW5zaW9ucyB8fCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogVEJTX0NFUlRJRklDQVRFX0VYVEVOU0lPTlNcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICB9KVxuICAgICAgICBdXG4gICAgfSkpO1xufVxuY2xhc3MgQ2VydGlmaWNhdGUgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGdldCB0YnMoKSB7XG4gICAgICAgIHJldHVybiBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvQXJyYXlCdWZmZXIodGhpcy50YnNWaWV3KTtcbiAgICB9XG4gICAgc2V0IHRicyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRic1ZpZXcgPSBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRic1ZpZXcgPSBuZXcgVWludDhBcnJheShwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBUQlMkNCwgQ2VydGlmaWNhdGUuZGVmYXVsdFZhbHVlcyhUQlMkNCkpKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiRmLCBDZXJ0aWZpY2F0ZS5kZWZhdWx0VmFsdWVzKFZFUlNJT04kZikpO1xuICAgICAgICB0aGlzLnNlcmlhbE51bWJlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNFUklBTF9OVU1CRVIkMywgQ2VydGlmaWNhdGUuZGVmYXVsdFZhbHVlcyhTRVJJQUxfTlVNQkVSJDMpKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkUkNCwgQ2VydGlmaWNhdGUuZGVmYXVsdFZhbHVlcyhTSUdOQVRVUkUkNCkpO1xuICAgICAgICB0aGlzLmlzc3VlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElTU1VFUiQyLCBDZXJ0aWZpY2F0ZS5kZWZhdWx0VmFsdWVzKElTU1VFUiQyKSk7XG4gICAgICAgIHRoaXMubm90QmVmb3JlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTk9UX0JFRk9SRSwgQ2VydGlmaWNhdGUuZGVmYXVsdFZhbHVlcyhOT1RfQkVGT1JFKSk7XG4gICAgICAgIHRoaXMubm90QWZ0ZXIgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBOT1RfQUZURVIsIENlcnRpZmljYXRlLmRlZmF1bHRWYWx1ZXMoTk9UX0FGVEVSKSk7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNVQkpFQ1QkMSwgQ2VydGlmaWNhdGUuZGVmYXVsdFZhbHVlcyhTVUJKRUNUJDEpKTtcbiAgICAgICAgdGhpcy5zdWJqZWN0UHVibGljS2V5SW5mbyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNVQkpFQ1RfUFVCTElDX0tFWV9JTkZPLCBDZXJ0aWZpY2F0ZS5kZWZhdWx0VmFsdWVzKFNVQkpFQ1RfUFVCTElDX0tFWV9JTkZPKSk7XG4gICAgICAgIGlmIChJU1NVRVJfVU5JUVVFX0lEIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVyVW5pcXVlSUQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBJU1NVRVJfVU5JUVVFX0lELCBDZXJ0aWZpY2F0ZS5kZWZhdWx0VmFsdWVzKElTU1VFUl9VTklRVUVfSUQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoU1VCSkVDVF9VTklRVUVfSUQgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5zdWJqZWN0VW5pcXVlSUQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTVUJKRUNUX1VOSVFVRV9JRCwgQ2VydGlmaWNhdGUuZGVmYXVsdFZhbHVlcyhTVUJKRUNUX1VOSVFVRV9JRCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChFWFRFTlNJT05TJDIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5leHRlbnNpb25zID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRVhURU5TSU9OUyQyLCBDZXJ0aWZpY2F0ZS5kZWZhdWx0VmFsdWVzKEVYVEVOU0lPTlMkMikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkFUVVJFX0FMR09SSVRITSQ1LCBDZXJ0aWZpY2F0ZS5kZWZhdWx0VmFsdWVzKFNJR05BVFVSRV9BTEdPUklUSE0kNSkpO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZVZhbHVlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkFUVVJFX1ZBTFVFJDIsIENlcnRpZmljYXRlLmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX1ZBTFVFJDIpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRCUyQ0OlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kZjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgU0VSSUFMX05VTUJFUiQzOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkludGVnZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFJDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIElTU1VFUiQyOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMoKTtcbiAgICAgICAgICAgIGNhc2UgTk9UX0JFRk9SRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRpbWUoKTtcbiAgICAgICAgICAgIGNhc2UgTk9UX0FGVEVSOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVGltZSgpO1xuICAgICAgICAgICAgY2FzZSBTVUJKRUNUJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcygpO1xuICAgICAgICAgICAgY2FzZSBTVUJKRUNUX1BVQkxJQ19LRVlfSU5GTzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFB1YmxpY0tleUluZm8oKTtcbiAgICAgICAgICAgIGNhc2UgSVNTVUVSX1VOSVFVRV9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICAgICAgY2FzZSBTVUJKRUNUX1VOSVFVRV9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICAgICAgY2FzZSBFWFRFTlNJT05TJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY2FzZSBTSUdOQVRVUkVfQUxHT1JJVEhNJDU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIFNJR05BVFVSRV9WQUxVRSQyOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkJpdFN0cmluZygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0YnNDZXJ0aWZpY2F0ZShuYW1lcy50YnNDZXJ0aWZpY2F0ZSksXG4gICAgICAgICAgICAgICAgQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEobmFtZXMuc2lnbmF0dXJlQWxnb3JpdGhtIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogU0lHTkFUVVJFX0FMR09SSVRITSQ1XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkJpdFN0cmluZyh7IG5hbWU6IChuYW1lcy5zaWduYXR1cmVWYWx1ZSB8fCBTSUdOQVRVUkVfVkFMVUUkMikgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRRKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBDZXJ0aWZpY2F0ZS5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICB0YnNDZXJ0aWZpY2F0ZToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IFRCU19DRVJUSUZJQ0FURV9FWFRFTlNJT05TXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudGJzVmlldyA9IGFzbjEucmVzdWx0LnRic0NlcnRpZmljYXRlLnZhbHVlQmVmb3JlRGVjb2RlVmlldztcbiAgICAgICAgaWYgKFRCU19DRVJUSUZJQ0FURV9WRVJTSU9OIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gYXNuMS5yZXN1bHRbVEJTX0NFUlRJRklDQVRFX1ZFUlNJT05dLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIHRoaXMuc2VyaWFsTnVtYmVyID0gYXNuMS5yZXN1bHRbVEJTX0NFUlRJRklDQVRFX1NFUklBTF9OVU1CRVJdO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdFtUQlNfQ0VSVElGSUNBVEVfU0lHTkFUVVJFXSB9KTtcbiAgICAgICAgdGhpcy5pc3N1ZXIgPSBuZXcgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMoeyBzY2hlbWE6IGFzbjEucmVzdWx0W1RCU19DRVJUSUZJQ0FURV9JU1NVRVJdIH0pO1xuICAgICAgICB0aGlzLm5vdEJlZm9yZSA9IG5ldyBUaW1lKHsgc2NoZW1hOiBhc24xLnJlc3VsdFtUQlNfQ0VSVElGSUNBVEVfTk9UX0JFRk9SRV0gfSk7XG4gICAgICAgIHRoaXMubm90QWZ0ZXIgPSBuZXcgVGltZSh7IHNjaGVtYTogYXNuMS5yZXN1bHRbVEJTX0NFUlRJRklDQVRFX05PVF9BRlRFUl0gfSk7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IG5ldyBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcyh7IHNjaGVtYTogYXNuMS5yZXN1bHRbVEJTX0NFUlRJRklDQVRFX1NVQkpFQ1RdIH0pO1xuICAgICAgICB0aGlzLnN1YmplY3RQdWJsaWNLZXlJbmZvID0gbmV3IFB1YmxpY0tleUluZm8oeyBzY2hlbWE6IGFzbjEucmVzdWx0W1RCU19DRVJUSUZJQ0FURV9TVUJKRUNUX1BVQkxJQ19LRVldIH0pO1xuICAgICAgICBpZiAoVEJTX0NFUlRJRklDQVRFX0lTU1VFUl9VTklRVUVfSUQgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLmlzc3VlclVuaXF1ZUlEID0gYXNuMS5yZXN1bHRbVEJTX0NFUlRJRklDQVRFX0lTU1VFUl9VTklRVUVfSURdLnZhbHVlQmxvY2sudmFsdWVIZXg7XG4gICAgICAgIGlmIChUQlNfQ0VSVElGSUNBVEVfU1VCSkVDVF9VTklRVUVfSUQgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLnN1YmplY3RVbmlxdWVJRCA9IGFzbjEucmVzdWx0W1RCU19DRVJUSUZJQ0FURV9TVUJKRUNUX1VOSVFVRV9JRF0udmFsdWVCbG9jay52YWx1ZUhleDtcbiAgICAgICAgaWYgKFRCU19DRVJUSUZJQ0FURV9FWFRFTlNJT05TIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5leHRlbnNpb25zID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdFtUQlNfQ0VSVElGSUNBVEVfRVhURU5TSU9OU10sIGVsZW1lbnQgPT4gbmV3IEV4dGVuc2lvbih7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LnNpZ25hdHVyZUFsZ29yaXRobSB9KTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZSA9IGFzbjEucmVzdWx0LnNpZ25hdHVyZVZhbHVlO1xuICAgIH1cbiAgICBlbmNvZGVUQlMoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIGlmICgoVkVSU0lPTiRmIGluIHRoaXMpICYmICh0aGlzLnZlcnNpb24gIT09IENlcnRpZmljYXRlLmRlZmF1bHRWYWx1ZXMoVkVSU0lPTiRmKSkpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy52ZXJzaW9uIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zZXJpYWxOdW1iZXIpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuc2lnbmF0dXJlLnRvU2NoZW1hKCkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuaXNzdWVyLnRvU2NoZW1hKCkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdEJlZm9yZS50b1NjaGVtYSgpLFxuICAgICAgICAgICAgICAgIHRoaXMubm90QWZ0ZXIudG9TY2hlbWEoKVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zdWJqZWN0LnRvU2NoZW1hKCkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuc3ViamVjdFB1YmxpY0tleUluZm8udG9TY2hlbWEoKSk7XG4gICAgICAgIGlmICh0aGlzLmlzc3VlclVuaXF1ZUlEKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlSGV4OiB0aGlzLmlzc3VlclVuaXF1ZUlEXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3ViamVjdFVuaXF1ZUlEKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlSGV4OiB0aGlzLnN1YmplY3RVbmlxdWVJRFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAzXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5leHRlbnNpb25zLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKGVuY29kZUZsYWcgPSBmYWxzZSkge1xuICAgICAgICBsZXQgdGJzU2NoZW1hO1xuICAgICAgICBpZiAoZW5jb2RlRmxhZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50YnNWaWV3LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGUuc2NoZW1hKCkudmFsdWVbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmZyb21CRVIodGhpcy50YnNWaWV3KTtcbiAgICAgICAgICAgIEFzbkVycm9yLmFzc2VydChhc24xLCBcIlRCUyBDZXJ0aWZpY2F0ZVwiKTtcbiAgICAgICAgICAgIHRic1NjaGVtYSA9IGFzbjEucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGJzU2NoZW1hID0gdGhpcy5lbmNvZGVUQlMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0YnNTY2hlbWEsXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9TY2hlbWEoKSxcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZVZhbHVlXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICB0YnM6IHB2dHN1dGlscy5Db252ZXJ0LlRvSGV4KHRoaXMudGJzVmlldyksXG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICAgICAgICBzZXJpYWxOdW1iZXI6IHRoaXMuc2VyaWFsTnVtYmVyLnRvSlNPTigpLFxuICAgICAgICAgICAgc2lnbmF0dXJlOiB0aGlzLnNpZ25hdHVyZS50b0pTT04oKSxcbiAgICAgICAgICAgIGlzc3VlcjogdGhpcy5pc3N1ZXIudG9KU09OKCksXG4gICAgICAgICAgICBub3RCZWZvcmU6IHRoaXMubm90QmVmb3JlLnRvSlNPTigpLFxuICAgICAgICAgICAgbm90QWZ0ZXI6IHRoaXMubm90QWZ0ZXIudG9KU09OKCksXG4gICAgICAgICAgICBzdWJqZWN0OiB0aGlzLnN1YmplY3QudG9KU09OKCksXG4gICAgICAgICAgICBzdWJqZWN0UHVibGljS2V5SW5mbzogdGhpcy5zdWJqZWN0UHVibGljS2V5SW5mby50b0pTT04oKSxcbiAgICAgICAgICAgIHNpZ25hdHVyZUFsZ29yaXRobTogdGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICBzaWduYXR1cmVWYWx1ZTogdGhpcy5zaWduYXR1cmVWYWx1ZS50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKChWRVJTSU9OJGYgaW4gdGhpcykgJiYgKHRoaXMudmVyc2lvbiAhPT0gQ2VydGlmaWNhdGUuZGVmYXVsdFZhbHVlcyhWRVJTSU9OJGYpKSkge1xuICAgICAgICAgICAgcmVzLnZlcnNpb24gPSB0aGlzLnZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNzdWVyVW5pcXVlSUQpIHtcbiAgICAgICAgICAgIHJlcy5pc3N1ZXJVbmlxdWVJRCA9IHB2dHN1dGlscy5Db252ZXJ0LlRvSGV4KHRoaXMuaXNzdWVyVW5pcXVlSUQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN1YmplY3RVbmlxdWVJRCkge1xuICAgICAgICAgICAgcmVzLnN1YmplY3RVbmlxdWVJRCA9IHB2dHN1dGlscy5Db252ZXJ0LlRvSGV4KHRoaXMuc3ViamVjdFVuaXF1ZUlEKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICByZXMuZXh0ZW5zaW9ucyA9IEFycmF5LmZyb20odGhpcy5leHRlbnNpb25zLCBvID0+IG8udG9KU09OKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGFzeW5jIGdldFB1YmxpY0tleShwYXJhbWV0ZXJzLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by5nZXRQdWJsaWNLZXkodGhpcy5zdWJqZWN0UHVibGljS2V5SW5mbywgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0sIHBhcmFtZXRlcnMpO1xuICAgIH1cbiAgICBhc3luYyBnZXRLZXlIYXNoKGhhc2hBbGdvcml0aG0gPSBcIlNIQS0xXCIsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLmRpZ2VzdCh7IG5hbWU6IGhhc2hBbGdvcml0aG0gfSwgdGhpcy5zdWJqZWN0UHVibGljS2V5SW5mby5zdWJqZWN0UHVibGljS2V5LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KTtcbiAgICB9XG4gICAgYXN5bmMgc2lnbihwcml2YXRlS2V5LCBoYXNoQWxnb3JpdGhtID0gXCJTSEEtMVwiLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgaWYgKCFwcml2YXRlS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZWVkIHRvIHByb3ZpZGUgYSBwcml2YXRlIGtleSBmb3Igc2lnbmluZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaWduYXR1cmVQYXJhbWV0ZXJzID0gYXdhaXQgY3J5cHRvLmdldFNpZ25hdHVyZVBhcmFtZXRlcnMocHJpdmF0ZUtleSwgaGFzaEFsZ29yaXRobSk7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBzaWduYXR1cmVQYXJhbWV0ZXJzLnBhcmFtZXRlcnM7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gc2lnbmF0dXJlUGFyYW1ldGVycy5zaWduYXR1cmVBbGdvcml0aG07XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtID0gc2lnbmF0dXJlUGFyYW1ldGVycy5zaWduYXR1cmVBbGdvcml0aG07XG4gICAgICAgIHRoaXMudGJzVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuZW5jb2RlVEJTKCkudG9CRVIoKSk7XG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IGNyeXB0by5zaWduV2l0aFByaXZhdGVLZXkodGhpcy50YnNWaWV3LCBwcml2YXRlS2V5LCBwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZSA9IG5ldyBhc24xanMuQml0U3RyaW5nKHsgdmFsdWVIZXg6IHNpZ25hdHVyZSB9KTtcbiAgICB9XG4gICAgYXN5bmMgdmVyaWZ5KGlzc3VlckNlcnRpZmljYXRlLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgbGV0IHN1YmplY3RQdWJsaWNLZXlJbmZvO1xuICAgICAgICBpZiAoaXNzdWVyQ2VydGlmaWNhdGUpIHtcbiAgICAgICAgICAgIHN1YmplY3RQdWJsaWNLZXlJbmZvID0gaXNzdWVyQ2VydGlmaWNhdGUuc3ViamVjdFB1YmxpY0tleUluZm87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc3N1ZXIuaXNFcXVhbCh0aGlzLnN1YmplY3QpKSB7XG4gICAgICAgICAgICBzdWJqZWN0UHVibGljS2V5SW5mbyA9IHRoaXMuc3ViamVjdFB1YmxpY0tleUluZm87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoc3ViamVjdFB1YmxpY0tleUluZm8gaW5zdGFuY2VvZiBQdWJsaWNLZXlJbmZvKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgaXNzdWVyIGNlcnRpZmljYXRlIGFzIGEgcGFyYW1ldGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcnlwdG8udmVyaWZ5V2l0aFB1YmxpY0tleSh0aGlzLnRic1ZpZXcsIHRoaXMuc2lnbmF0dXJlVmFsdWUsIHN1YmplY3RQdWJsaWNLZXlJbmZvLCB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSk7XG4gICAgfVxufVxuQ2VydGlmaWNhdGUuQ0xBU1NfTkFNRSA9IFwiQ2VydGlmaWNhdGVcIjtcbmZ1bmN0aW9uIGNoZWNrQ0EoY2VydCwgc2lnbmVyQ2VydCA9IG51bGwpIHtcbiAgICBpZiAoc2lnbmVyQ2VydCAmJiBjZXJ0Lmlzc3Vlci5pc0VxdWFsKHNpZ25lckNlcnQuaXNzdWVyKSAmJiBjZXJ0LnNlcmlhbE51bWJlci5pc0VxdWFsKHNpZ25lckNlcnQuc2VyaWFsTnVtYmVyKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IGlzQ0EgPSBmYWxzZTtcbiAgICBpZiAoY2VydC5leHRlbnNpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3QgZXh0ZW5zaW9uIG9mIGNlcnQuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5leHRuSUQgPT09IGlkX0Jhc2ljQ29uc3RyYWludHMgJiYgZXh0ZW5zaW9uLnBhcnNlZFZhbHVlIGluc3RhbmNlb2YgQmFzaWNDb25zdHJhaW50cykge1xuICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb24ucGFyc2VkVmFsdWUuY0EpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNDQSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNDQSkge1xuICAgICAgICByZXR1cm4gY2VydDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmNvbnN0IENFUlRfSUQkMSA9IFwiY2VydElkXCI7XG5jb25zdCBDRVJUX1ZBTFVFID0gXCJjZXJ0VmFsdWVcIjtcbmNvbnN0IFBBUlNFRF9WQUxVRSQ0ID0gXCJwYXJzZWRWYWx1ZVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkUCA9IFtcbiAgICBDRVJUX0lEJDEsXG4gICAgQ0VSVF9WQUxVRVxuXTtcbmNsYXNzIENlcnRCYWcgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNlcnRJZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENFUlRfSUQkMSwgQ2VydEJhZy5kZWZhdWx0VmFsdWVzKENFUlRfSUQkMSkpO1xuICAgICAgICB0aGlzLmNlcnRWYWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENFUlRfVkFMVUUsIENlcnRCYWcuZGVmYXVsdFZhbHVlcyhDRVJUX1ZBTFVFKSk7XG4gICAgICAgIGlmIChQQVJTRURfVkFMVUUkNCBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlZFZhbHVlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUEFSU0VEX1ZBTFVFJDQsIENlcnRCYWcuZGVmYXVsdFZhbHVlcyhQQVJTRURfVkFMVUUkNCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBDRVJUX0lEJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgQ0VSVF9WQUxVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuQW55KCkpO1xuICAgICAgICAgICAgY2FzZSBQQVJTRURfVkFMVUUkNDpcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIENFUlRfSUQkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSBFTVBUWV9TVFJJTkcpO1xuICAgICAgICAgICAgY2FzZSBDRVJUX1ZBTFVFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgaW5zdGFuY2VvZiBhc24xanMuQW55KTtcbiAgICAgICAgICAgIGNhc2UgUEFSU0VEX1ZBTFVFJDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgobWVtYmVyVmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpICYmIChPYmplY3Qua2V5cyhtZW1iZXJWYWx1ZSkubGVuZ3RoID09PSAwKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IG5hbWU6IChuYW1lcy5pZCB8fCBcImlkXCIpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuQW55KHsgbmFtZTogKG5hbWVzLnZhbHVlIHx8IFwidmFsdWVcIikgfSldXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRQKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBDZXJ0QmFnLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGlkOiBDRVJUX0lEJDEsXG4gICAgICAgICAgICAgICAgdmFsdWU6IENFUlRfVkFMVUVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmNlcnRJZCA9IGFzbjEucmVzdWx0LmNlcnRJZC52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuY2VydFZhbHVlID0gYXNuMS5yZXN1bHQuY2VydFZhbHVlO1xuICAgICAgICBjb25zdCBjZXJ0VmFsdWVIZXggPSB0aGlzLmNlcnRWYWx1ZS52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldztcbiAgICAgICAgc3dpdGNoICh0aGlzLmNlcnRJZCkge1xuICAgICAgICAgICAgY2FzZSBpZF9DZXJ0QmFnX1g1MDlDZXJ0aWZpY2F0ZTpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFZhbHVlID0gQ2VydGlmaWNhdGUuZnJvbUJFUihjZXJ0VmFsdWVIZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlQ2VydGlmaWNhdGVWMi5mcm9tQkVSKGNlcnRWYWx1ZUhleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGlkX0NlcnRCYWdfQXR0cmlidXRlQ2VydGlmaWNhdGU6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFZhbHVlID0gQXR0cmlidXRlQ2VydGlmaWNhdGVWMi5mcm9tQkVSKGNlcnRWYWx1ZUhleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBpZF9DZXJ0QmFnX1NEU0lDZXJ0aWZpY2F0ZTpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgQ0VSVF9JRCB2YWx1ZSBpbiBDZXJ0QmFnOiAke3RoaXMuY2VydElkfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBpZiAoUEFSU0VEX1ZBTFVFJDQgaW4gdGhpcykge1xuICAgICAgICAgICAgaWYgKFwiYWNpbmZvXCIgaW4gdGhpcy5wYXJzZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VydElkID0gaWRfQ2VydEJhZ19BdHRyaWJ1dGVDZXJ0aWZpY2F0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2VydElkID0gaWRfQ2VydEJhZ19YNTA5Q2VydGlmaWNhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNlcnRWYWx1ZSA9IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogdGhpcy5wYXJzZWRWYWx1ZS50b1NjaGVtYSgpLnRvQkVSKGZhbHNlKSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5jZXJ0SWQgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbKChcInRvU2NoZW1hXCIgaW4gdGhpcy5jZXJ0VmFsdWUpID8gdGhpcy5jZXJ0VmFsdWUudG9TY2hlbWEoKSA6IHRoaXMuY2VydFZhbHVlKV1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNlcnRJZDogdGhpcy5jZXJ0SWQsXG4gICAgICAgICAgICBjZXJ0VmFsdWU6IHRoaXMuY2VydFZhbHVlLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgfVxufVxuQ2VydEJhZy5DTEFTU19OQU1FID0gXCJDZXJ0QmFnXCI7XG5cbmNvbnN0IFVTRVJfQ0VSVElGSUNBVEUgPSBcInVzZXJDZXJ0aWZpY2F0ZVwiO1xuY29uc3QgUkVWT0NBVElPTl9EQVRFID0gXCJyZXZvY2F0aW9uRGF0ZVwiO1xuY29uc3QgQ1JMX0VOVFJZX0VYVEVOU0lPTlMgPSBcImNybEVudHJ5RXh0ZW5zaW9uc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkTyA9IFtcbiAgICBVU0VSX0NFUlRJRklDQVRFLFxuICAgIFJFVk9DQVRJT05fREFURSxcbiAgICBDUkxfRU5UUllfRVhURU5TSU9OU1xuXTtcbmNsYXNzIFJldm9rZWRDZXJ0aWZpY2F0ZSBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudXNlckNlcnRpZmljYXRlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVVNFUl9DRVJUSUZJQ0FURSwgUmV2b2tlZENlcnRpZmljYXRlLmRlZmF1bHRWYWx1ZXMoVVNFUl9DRVJUSUZJQ0FURSkpO1xuICAgICAgICB0aGlzLnJldm9jYXRpb25EYXRlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVWT0NBVElPTl9EQVRFLCBSZXZva2VkQ2VydGlmaWNhdGUuZGVmYXVsdFZhbHVlcyhSRVZPQ0FUSU9OX0RBVEUpKTtcbiAgICAgICAgaWYgKENSTF9FTlRSWV9FWFRFTlNJT05TIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuY3JsRW50cnlFeHRlbnNpb25zID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ1JMX0VOVFJZX0VYVEVOU0lPTlMsIFJldm9rZWRDZXJ0aWZpY2F0ZS5kZWZhdWx0VmFsdWVzKENSTF9FTlRSWV9FWFRFTlNJT05TKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFVTRVJfQ0VSVElGSUNBVEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgY2FzZSBSRVZPQ0FUSU9OX0RBVEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lKCk7XG4gICAgICAgICAgICBjYXNlIENSTF9FTlRSWV9FWFRFTlNJT05TOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXh0ZW5zaW9ucygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy51c2VyQ2VydGlmaWNhdGUgfHwgVVNFUl9DRVJUSUZJQ0FURSkgfSksXG4gICAgICAgICAgICAgICAgVGltZS5zY2hlbWEoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRjVGltZU5hbWU6IChuYW1lcy5yZXZvY2F0aW9uRGF0ZSB8fCBSRVZPQ0FUSU9OX0RBVEUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhbFRpbWVOYW1lOiAobmFtZXMucmV2b2NhdGlvbkRhdGUgfHwgUkVWT0NBVElPTl9EQVRFKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgRXh0ZW5zaW9ucy5zY2hlbWEoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiAobmFtZXMuY3JsRW50cnlFeHRlbnNpb25zIHx8IENSTF9FTlRSWV9FWFRFTlNJT05TKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJE8pO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFJldm9rZWRDZXJ0aWZpY2F0ZS5zY2hlbWEoKSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudXNlckNlcnRpZmljYXRlID0gYXNuMS5yZXN1bHQudXNlckNlcnRpZmljYXRlO1xuICAgICAgICB0aGlzLnJldm9jYXRpb25EYXRlID0gbmV3IFRpbWUoeyBzY2hlbWE6IGFzbjEucmVzdWx0LnJldm9jYXRpb25EYXRlIH0pO1xuICAgICAgICBpZiAoQ1JMX0VOVFJZX0VYVEVOU0lPTlMgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuY3JsRW50cnlFeHRlbnNpb25zID0gbmV3IEV4dGVuc2lvbnMoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmNybEVudHJ5RXh0ZW5zaW9ucyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXG4gICAgICAgICAgICB0aGlzLnVzZXJDZXJ0aWZpY2F0ZSxcbiAgICAgICAgICAgIHRoaXMucmV2b2NhdGlvbkRhdGUudG9TY2hlbWEoKVxuICAgICAgICBdO1xuICAgICAgICBpZiAodGhpcy5jcmxFbnRyeUV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5jcmxFbnRyeUV4dGVuc2lvbnMudG9TY2hlbWEoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgdXNlckNlcnRpZmljYXRlOiB0aGlzLnVzZXJDZXJ0aWZpY2F0ZS50b0pTT04oKSxcbiAgICAgICAgICAgIHJldm9jYXRpb25EYXRlOiB0aGlzLnJldm9jYXRpb25EYXRlLnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5jcmxFbnRyeUV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIHJlcy5jcmxFbnRyeUV4dGVuc2lvbnMgPSB0aGlzLmNybEVudHJ5RXh0ZW5zaW9ucy50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cblJldm9rZWRDZXJ0aWZpY2F0ZS5DTEFTU19OQU1FID0gXCJSZXZva2VkQ2VydGlmaWNhdGVcIjtcblxuY29uc3QgVEJTJDMgPSBcInRic1wiO1xuY29uc3QgVkVSU0lPTiRlID0gXCJ2ZXJzaW9uXCI7XG5jb25zdCBTSUdOQVRVUkUkMyA9IFwic2lnbmF0dXJlXCI7XG5jb25zdCBJU1NVRVIkMSA9IFwiaXNzdWVyXCI7XG5jb25zdCBUSElTX1VQREFURSQxID0gXCJ0aGlzVXBkYXRlXCI7XG5jb25zdCBORVhUX1VQREFURSQxID0gXCJuZXh0VXBkYXRlXCI7XG5jb25zdCBSRVZPS0VEX0NFUlRJRklDQVRFUyA9IFwicmV2b2tlZENlcnRpZmljYXRlc1wiO1xuY29uc3QgQ1JMX0VYVEVOU0lPTlMgPSBcImNybEV4dGVuc2lvbnNcIjtcbmNvbnN0IFNJR05BVFVSRV9BTEdPUklUSE0kNCA9IFwic2lnbmF0dXJlQWxnb3JpdGhtXCI7XG5jb25zdCBTSUdOQVRVUkVfVkFMVUUkMSA9IFwic2lnbmF0dXJlVmFsdWVcIjtcbmNvbnN0IFRCU19DRVJUX0xJU1QgPSBcInRic0NlcnRMaXN0XCI7XG5jb25zdCBUQlNfQ0VSVF9MSVNUX1ZFUlNJT04gPSBgJHtUQlNfQ0VSVF9MSVNUfS52ZXJzaW9uYDtcbmNvbnN0IFRCU19DRVJUX0xJU1RfU0lHTkFUVVJFID0gYCR7VEJTX0NFUlRfTElTVH0uc2lnbmF0dXJlYDtcbmNvbnN0IFRCU19DRVJUX0xJU1RfSVNTVUVSID0gYCR7VEJTX0NFUlRfTElTVH0uaXNzdWVyYDtcbmNvbnN0IFRCU19DRVJUX0xJU1RfVEhJU19VUERBVEUgPSBgJHtUQlNfQ0VSVF9MSVNUfS50aGlzVXBkYXRlYDtcbmNvbnN0IFRCU19DRVJUX0xJU1RfTkVYVF9VUERBVEUgPSBgJHtUQlNfQ0VSVF9MSVNUfS5uZXh0VXBkYXRlYDtcbmNvbnN0IFRCU19DRVJUX0xJU1RfUkVWT0tFRF9DRVJUSUZJQ0FURVMgPSBgJHtUQlNfQ0VSVF9MSVNUfS5yZXZva2VkQ2VydGlmaWNhdGVzYDtcbmNvbnN0IFRCU19DRVJUX0xJU1RfRVhURU5TSU9OUyA9IGAke1RCU19DRVJUX0xJU1R9LmV4dGVuc2lvbnNgO1xuY29uc3QgQ0xFQVJfUFJPUFMkTiA9IFtcbiAgICBUQlNfQ0VSVF9MSVNULFxuICAgIFRCU19DRVJUX0xJU1RfVkVSU0lPTixcbiAgICBUQlNfQ0VSVF9MSVNUX1NJR05BVFVSRSxcbiAgICBUQlNfQ0VSVF9MSVNUX0lTU1VFUixcbiAgICBUQlNfQ0VSVF9MSVNUX1RISVNfVVBEQVRFLFxuICAgIFRCU19DRVJUX0xJU1RfTkVYVF9VUERBVEUsXG4gICAgVEJTX0NFUlRfTElTVF9SRVZPS0VEX0NFUlRJRklDQVRFUyxcbiAgICBUQlNfQ0VSVF9MSVNUX0VYVEVOU0lPTlMsXG4gICAgU0lHTkFUVVJFX0FMR09SSVRITSQ0LFxuICAgIFNJR05BVFVSRV9WQUxVRSQxXG5dO1xuZnVuY3Rpb24gdGJzQ2VydExpc3QocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IFRCU19DRVJUX0xJU1QpLFxuICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMudGJzQ2VydExpc3RWZXJzaW9uIHx8IFRCU19DRVJUX0xJU1RfVkVSU0lPTiksXG4gICAgICAgICAgICAgICAgdmFsdWU6IDJcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEobmFtZXMuc2lnbmF0dXJlIHx8IHtcbiAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFRCU19DRVJUX0xJU1RfU0lHTkFUVVJFXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcy5zY2hlbWEobmFtZXMuaXNzdWVyIHx8IHtcbiAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFRCU19DRVJUX0xJU1RfSVNTVUVSXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBUaW1lLnNjaGVtYShuYW1lcy50YnNDZXJ0TGlzdFRoaXNVcGRhdGUgfHwge1xuICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHV0Y1RpbWVOYW1lOiBUQlNfQ0VSVF9MSVNUX1RISVNfVVBEQVRFLFxuICAgICAgICAgICAgICAgICAgICBnZW5lcmFsVGltZU5hbWU6IFRCU19DRVJUX0xJU1RfVEhJU19VUERBVEVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIFRpbWUuc2NoZW1hKG5hbWVzLnRic0NlcnRMaXN0TmV4dFVwZGF0ZSB8fCB7XG4gICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdXRjVGltZU5hbWU6IFRCU19DRVJUX0xJU1RfTkVYVF9VUERBVEUsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYWxUaW1lTmFtZTogVEJTX0NFUlRfTElTVF9ORVhUX1VQREFURVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRydWUpLFxuICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMudGJzQ2VydExpc3RSZXZva2VkQ2VydGlmaWNhdGVzIHx8IFRCU19DRVJUX0xJU1RfUkVWT0tFRF9DRVJUSUZJQ0FURVMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaW1lLnNjaGVtYSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeHRlbnNpb25zLnNjaGVtYSh7fSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW0V4dGVuc2lvbnMuc2NoZW1hKG5hbWVzLmNybEV4dGVuc2lvbnMgfHwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFRCU19DRVJUX0xJU1RfRVhURU5TSU9OU1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KV1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICB9KSk7XG59XG5jb25zdCBXRUxMX0tOT1dOX0VYVEVOU0lPTlMgPSBbXG4gICAgaWRfQXV0aG9yaXR5S2V5SWRlbnRpZmllcixcbiAgICBpZF9Jc3N1ZXJBbHROYW1lLFxuICAgIGlkX0NSTE51bWJlcixcbiAgICBpZF9CYXNlQ1JMTnVtYmVyLFxuICAgIGlkX0lzc3VpbmdEaXN0cmlidXRpb25Qb2ludCxcbiAgICBpZF9GcmVzaGVzdENSTCxcbiAgICBpZF9BdXRob3JpdHlJbmZvQWNjZXNzLFxuICAgIGlkX0NSTFJlYXNvbixcbiAgICBpZF9JbnZhbGlkaXR5RGF0ZSxcbiAgICBpZF9DZXJ0aWZpY2F0ZUlzc3Vlcixcbl07XG5jbGFzcyBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBnZXQgdGJzKCkge1xuICAgICAgICByZXR1cm4gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b0FycmF5QnVmZmVyKHRoaXMudGJzVmlldyk7XG4gICAgfVxuICAgIHNldCB0YnModmFsdWUpIHtcbiAgICAgICAgdGhpcy50YnNWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50YnNWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVEJTJDMsIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QuZGVmYXVsdFZhbHVlcyhUQlMkMykpKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiRlLCBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0LmRlZmF1bHRWYWx1ZXMoVkVSU0lPTiRlKSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkFUVVJFJDMsIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QuZGVmYXVsdFZhbHVlcyhTSUdOQVRVUkUkMykpO1xuICAgICAgICB0aGlzLmlzc3VlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElTU1VFUiQxLCBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0LmRlZmF1bHRWYWx1ZXMoSVNTVUVSJDEpKTtcbiAgICAgICAgdGhpcy50aGlzVXBkYXRlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVEhJU19VUERBVEUkMSwgQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdC5kZWZhdWx0VmFsdWVzKFRISVNfVVBEQVRFJDEpKTtcbiAgICAgICAgaWYgKE5FWFRfVVBEQVRFJDEgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5uZXh0VXBkYXRlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTkVYVF9VUERBVEUkMSwgQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdC5kZWZhdWx0VmFsdWVzKE5FWFRfVVBEQVRFJDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoUkVWT0tFRF9DRVJUSUZJQ0FURVMgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5yZXZva2VkQ2VydGlmaWNhdGVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVWT0tFRF9DRVJUSUZJQ0FURVMsIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QuZGVmYXVsdFZhbHVlcyhSRVZPS0VEX0NFUlRJRklDQVRFUykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChDUkxfRVhURU5TSU9OUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmNybEV4dGVuc2lvbnMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDUkxfRVhURU5TSU9OUywgQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdC5kZWZhdWx0VmFsdWVzKENSTF9FWFRFTlNJT05TKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkVfQUxHT1JJVEhNJDQsIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QuZGVmYXVsdFZhbHVlcyhTSUdOQVRVUkVfQUxHT1JJVEhNJDQpKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNJR05BVFVSRV9WQUxVRSQxLCBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0LmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX1ZBTFVFJDEpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRCUyQzOlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIElTU1VFUiQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMoKTtcbiAgICAgICAgICAgIGNhc2UgVEhJU19VUERBVEUkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRpbWUoKTtcbiAgICAgICAgICAgIGNhc2UgTkVYVF9VUERBVEUkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRpbWUoKTtcbiAgICAgICAgICAgIGNhc2UgUkVWT0tFRF9DRVJUSUZJQ0FURVM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY2FzZSBDUkxfRVhURU5TSU9OUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEV4dGVuc2lvbnMoKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFX0FMR09SSVRITSQ0OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcigpO1xuICAgICAgICAgICAgY2FzZSBTSUdOQVRVUkVfVkFMVUUkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5CaXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgXCJDZXJ0aWZpY2F0ZUxpc3RcIiksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIHRic0NlcnRMaXN0KHBhcmFtZXRlcnMpLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnNpZ25hdHVyZUFsZ29yaXRobSB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFNJR05BVFVSRV9BTEdPUklUSE0kNFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc2lnbmF0dXJlVmFsdWUgfHwgU0lHTkFUVVJFX1ZBTFVFJDEpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkTik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdC5zY2hlbWEoKSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudGJzVmlldyA9IGFzbjEucmVzdWx0LnRic0NlcnRMaXN0LnZhbHVlQmVmb3JlRGVjb2RlVmlldztcbiAgICAgICAgaWYgKFRCU19DRVJUX0xJU1RfVkVSU0lPTiBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gYXNuMS5yZXN1bHRbVEJTX0NFUlRfTElTVF9WRVJTSU9OXS52YWx1ZUJsb2NrLnZhbHVlRGVjO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0W1RCU19DRVJUX0xJU1RfU0lHTkFUVVJFXSB9KTtcbiAgICAgICAgdGhpcy5pc3N1ZXIgPSBuZXcgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMoeyBzY2hlbWE6IGFzbjEucmVzdWx0W1RCU19DRVJUX0xJU1RfSVNTVUVSXSB9KTtcbiAgICAgICAgdGhpcy50aGlzVXBkYXRlID0gbmV3IFRpbWUoeyBzY2hlbWE6IGFzbjEucmVzdWx0W1RCU19DRVJUX0xJU1RfVEhJU19VUERBVEVdIH0pO1xuICAgICAgICBpZiAoVEJTX0NFUlRfTElTVF9ORVhUX1VQREFURSBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0VXBkYXRlID0gbmV3IFRpbWUoeyBzY2hlbWE6IGFzbjEucmVzdWx0W1RCU19DRVJUX0xJU1RfTkVYVF9VUERBVEVdIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChUQlNfQ0VSVF9MSVNUX1JFVk9LRURfQ0VSVElGSUNBVEVTIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJldm9rZWRDZXJ0aWZpY2F0ZXMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0W1RCU19DRVJUX0xJU1RfUkVWT0tFRF9DRVJUSUZJQ0FURVNdLCBlbGVtZW50ID0+IG5ldyBSZXZva2VkQ2VydGlmaWNhdGUoeyBzY2hlbWE6IGVsZW1lbnQgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChUQlNfQ0VSVF9MSVNUX0VYVEVOU0lPTlMgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuY3JsRXh0ZW5zaW9ucyA9IG5ldyBFeHRlbnNpb25zKHsgc2NoZW1hOiBhc24xLnJlc3VsdFtUQlNfQ0VSVF9MSVNUX0VYVEVOU0lPTlNdIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LnNpZ25hdHVyZUFsZ29yaXRobSB9KTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZSA9IGFzbjEucmVzdWx0LnNpZ25hdHVyZVZhbHVlO1xuICAgIH1cbiAgICBlbmNvZGVUQlMoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIGlmICh0aGlzLnZlcnNpb24gIT09IENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QuZGVmYXVsdFZhbHVlcyhWRVJTSU9OJGUpKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLnZlcnNpb24gfSkpO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zaWduYXR1cmUudG9TY2hlbWEoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5pc3N1ZXIudG9TY2hlbWEoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy50aGlzVXBkYXRlLnRvU2NoZW1hKCkpO1xuICAgICAgICBpZiAodGhpcy5uZXh0VXBkYXRlKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMubmV4dFVwZGF0ZS50b1NjaGVtYSgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZXZva2VkQ2VydGlmaWNhdGVzKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMucmV2b2tlZENlcnRpZmljYXRlcywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY3JsRXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JsRXh0ZW5zaW9ucy50b1NjaGVtYSgpXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1NjaGVtYShlbmNvZGVGbGFnID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHRic1NjaGVtYTtcbiAgICAgICAgaWYgKCFlbmNvZGVGbGFnKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGJzVmlldy5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Quc2NoZW1hKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmZyb21CRVIodGhpcy50YnNWaWV3KTtcbiAgICAgICAgICAgIEFzbkVycm9yLmFzc2VydChhc24xLCBcIlRCUyBDZXJ0aWZpY2F0ZSBSZXZvY2F0aW9uIExpc3RcIik7XG4gICAgICAgICAgICB0YnNTY2hlbWEgPSBhc24xLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRic1NjaGVtYSA9IHRoaXMuZW5jb2RlVEJTKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgdGJzU2NoZW1hLFxuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgdGJzOiBwdnRzdXRpbHMuQ29udmVydC5Ub0hleCh0aGlzLnRic1ZpZXcpLFxuICAgICAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uLFxuICAgICAgICAgICAgc2lnbmF0dXJlOiB0aGlzLnNpZ25hdHVyZS50b0pTT04oKSxcbiAgICAgICAgICAgIGlzc3VlcjogdGhpcy5pc3N1ZXIudG9KU09OKCksXG4gICAgICAgICAgICB0aGlzVXBkYXRlOiB0aGlzLnRoaXNVcGRhdGUudG9KU09OKCksXG4gICAgICAgICAgICBzaWduYXR1cmVBbGdvcml0aG06IHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgc2lnbmF0dXJlVmFsdWU6IHRoaXMuc2lnbmF0dXJlVmFsdWUudG9KU09OKClcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMudmVyc2lvbiAhPT0gQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdC5kZWZhdWx0VmFsdWVzKFZFUlNJT04kZSkpXG4gICAgICAgICAgICByZXMudmVyc2lvbiA9IHRoaXMudmVyc2lvbjtcbiAgICAgICAgaWYgKHRoaXMubmV4dFVwZGF0ZSkge1xuICAgICAgICAgICAgcmVzLm5leHRVcGRhdGUgPSB0aGlzLm5leHRVcGRhdGUudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmV2b2tlZENlcnRpZmljYXRlcykge1xuICAgICAgICAgICAgcmVzLnJldm9rZWRDZXJ0aWZpY2F0ZXMgPSBBcnJheS5mcm9tKHRoaXMucmV2b2tlZENlcnRpZmljYXRlcywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jcmxFeHRlbnNpb25zKSB7XG4gICAgICAgICAgICByZXMuY3JsRXh0ZW5zaW9ucyA9IHRoaXMuY3JsRXh0ZW5zaW9ucy50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpc0NlcnRpZmljYXRlUmV2b2tlZChjZXJ0aWZpY2F0ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNzdWVyLmlzRXF1YWwoY2VydGlmaWNhdGUuaXNzdWVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZXZva2VkQ2VydGlmaWNhdGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCByZXZva2VkQ2VydGlmaWNhdGUgb2YgdGhpcy5yZXZva2VkQ2VydGlmaWNhdGVzKSB7XG4gICAgICAgICAgICBpZiAocmV2b2tlZENlcnRpZmljYXRlLnVzZXJDZXJ0aWZpY2F0ZS5pc0VxdWFsKGNlcnRpZmljYXRlLnNlcmlhbE51bWJlcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHNpZ24ocHJpdmF0ZUtleSwgaGFzaEFsZ29yaXRobSA9IFwiU0hBLTFcIiwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGlmICghcHJpdmF0ZUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmVlZCB0byBwcm92aWRlIGEgcHJpdmF0ZSBrZXkgZm9yIHNpZ25pbmdcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlUGFyYW1ldGVycyA9IGF3YWl0IGNyeXB0by5nZXRTaWduYXR1cmVQYXJhbWV0ZXJzKHByaXZhdGVLZXksIGhhc2hBbGdvcml0aG0pO1xuICAgICAgICBjb25zdCB7IHBhcmFtZXRlcnMgfSA9IHNpZ25hdHVyZVBhcmFtZXRlcnM7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gc2lnbmF0dXJlUGFyYW1ldGVycy5zaWduYXR1cmVBbGdvcml0aG07XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtID0gc2lnbmF0dXJlUGFyYW1ldGVycy5zaWduYXR1cmVBbGdvcml0aG07XG4gICAgICAgIHRoaXMudGJzVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuZW5jb2RlVEJTKCkudG9CRVIoKSk7XG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IGNyeXB0by5zaWduV2l0aFByaXZhdGVLZXkodGhpcy50YnNWaWV3LCBwcml2YXRlS2V5LCBwYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVWYWx1ZSA9IG5ldyBhc24xanMuQml0U3RyaW5nKHsgdmFsdWVIZXg6IHNpZ25hdHVyZSB9KTtcbiAgICB9XG4gICAgYXN5bmMgdmVyaWZ5KHBhcmFtZXRlcnMgPSB7fSwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGxldCBzdWJqZWN0UHVibGljS2V5SW5mbztcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuaXNzdWVyQ2VydGlmaWNhdGUpIHtcbiAgICAgICAgICAgIHN1YmplY3RQdWJsaWNLZXlJbmZvID0gcGFyYW1ldGVycy5pc3N1ZXJDZXJ0aWZpY2F0ZS5zdWJqZWN0UHVibGljS2V5SW5mbztcbiAgICAgICAgICAgIGlmICghdGhpcy5pc3N1ZXIuaXNFcXVhbChwYXJhbWV0ZXJzLmlzc3VlckNlcnRpZmljYXRlLnN1YmplY3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnB1YmxpY0tleUluZm8pIHtcbiAgICAgICAgICAgIHN1YmplY3RQdWJsaWNLZXlJbmZvID0gcGFyYW1ldGVycy5wdWJsaWNLZXlJbmZvO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3ViamVjdFB1YmxpY0tleUluZm8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklzc3VlcidzIGNlcnRpZmljYXRlIG11c3QgYmUgcHJvdmlkZWQgYXMgYW4gaW5wdXQgcGFyYW1ldGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNybEV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXh0ZW5zaW9uIG9mIHRoaXMuY3JsRXh0ZW5zaW9ucy5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5jcml0aWNhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIVdFTExfS05PV05fRVhURU5TSU9OUy5pbmNsdWRlcyhleHRlbnNpb24uZXh0bklEKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyeXB0by52ZXJpZnlXaXRoUHVibGljS2V5KHRoaXMudGJzVmlldywgdGhpcy5zaWduYXR1cmVWYWx1ZSwgc3ViamVjdFB1YmxpY0tleUluZm8sIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtKTtcbiAgICB9XG59XG5DZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0LkNMQVNTX05BTUUgPSBcIkNlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3RcIjtcblxuY29uc3QgQ1JMX0lEID0gXCJjcmxJZFwiO1xuY29uc3QgQ1JMX1ZBTFVFID0gXCJjcmxWYWx1ZVwiO1xuY29uc3QgUEFSU0VEX1ZBTFVFJDMgPSBcInBhcnNlZFZhbHVlXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRNID0gW1xuICAgIENSTF9JRCxcbiAgICBDUkxfVkFMVUUsXG5dO1xuY2xhc3MgQ1JMQmFnIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jcmxJZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENSTF9JRCwgQ1JMQmFnLmRlZmF1bHRWYWx1ZXMoQ1JMX0lEKSk7XG4gICAgICAgIHRoaXMuY3JsVmFsdWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDUkxfVkFMVUUsIENSTEJhZy5kZWZhdWx0VmFsdWVzKENSTF9WQUxVRSkpO1xuICAgICAgICBpZiAoUEFSU0VEX1ZBTFVFJDMgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5wYXJzZWRWYWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBBUlNFRF9WQUxVRSQzLCBDUkxCYWcuZGVmYXVsdFZhbHVlcyhQQVJTRURfVkFMVUUkMykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBDUkxfSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgQ1JMX1ZBTFVFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5BbnkoKSk7XG4gICAgICAgICAgICBjYXNlIFBBUlNFRF9WQUxVRSQzOlxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgQ1JMX0lEOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IEVNUFRZX1NUUklORyk7XG4gICAgICAgICAgICBjYXNlIENSTF9WQUxVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlIGluc3RhbmNlb2YgYXNuMWpzLkFueSk7XG4gICAgICAgICAgICBjYXNlIFBBUlNFRF9WQUxVRSQzOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSAmJiAoT2JqZWN0LmtleXMobWVtYmVyVmFsdWUpLmxlbmd0aCA9PT0gMCkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyBuYW1lOiAobmFtZXMuaWQgfHwgXCJpZFwiKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLkFueSh7IG5hbWU6IChuYW1lcy52YWx1ZSB8fCBcInZhbHVlXCIpIH0pXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkTSk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgQ1JMQmFnLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGlkOiBDUkxfSUQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IENSTF9WQUxVRVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuY3JsSWQgPSBhc24xLnJlc3VsdC5jcmxJZC52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuY3JsVmFsdWUgPSBhc24xLnJlc3VsdC5jcmxWYWx1ZTtcbiAgICAgICAgc3dpdGNoICh0aGlzLmNybElkKSB7XG4gICAgICAgICAgICBjYXNlIGlkX0NSTEJhZ19YNTA5Q1JMOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRWYWx1ZSA9IENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QuZnJvbUJFUih0aGlzLmNlcnRWYWx1ZS52YWx1ZUJsb2NrLnZhbHVlSGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IENSTF9JRCB2YWx1ZSBpbiBDUkxCYWc6ICR7dGhpcy5jcmxJZH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyc2VkVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY3JsSWQgPSBpZF9DUkxCYWdfWDUwOUNSTDtcbiAgICAgICAgICAgIHRoaXMuY3JsVmFsdWUgPSBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IHRoaXMucGFyc2VkVmFsdWUudG9TY2hlbWEoKS50b0JFUihmYWxzZSkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IHRoaXMuY3JsSWQgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbdGhpcy5jcmxWYWx1ZS50b1NjaGVtYSgpXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JsSWQ6IHRoaXMuY3JsSWQsXG4gICAgICAgICAgICBjcmxWYWx1ZTogdGhpcy5jcmxWYWx1ZS50b0pTT04oKVxuICAgICAgICB9O1xuICAgIH1cbn1cbkNSTEJhZy5DTEFTU19OQU1FID0gXCJDUkxCYWdcIjtcblxuY29uc3QgVkVSU0lPTiRkID0gXCJ2ZXJzaW9uXCI7XG5jb25zdCBFTkNSWVBURURfQ09OVEVOVF9JTkZPJDEgPSBcImVuY3J5cHRlZENvbnRlbnRJbmZvXCI7XG5jb25zdCBVTlBST1RFQ1RFRF9BVFRSUyQxID0gXCJ1bnByb3RlY3RlZEF0dHJzXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRMID0gW1xuICAgIFZFUlNJT04kZCxcbiAgICBFTkNSWVBURURfQ09OVEVOVF9JTkZPJDEsXG4gICAgVU5QUk9URUNURURfQVRUUlMkMSxcbl07XG5jbGFzcyBFbmNyeXB0ZWREYXRhIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiRkLCBFbmNyeXB0ZWREYXRhLmRlZmF1bHRWYWx1ZXMoVkVSU0lPTiRkKSk7XG4gICAgICAgIHRoaXMuZW5jcnlwdGVkQ29udGVudEluZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFTkNSWVBURURfQ09OVEVOVF9JTkZPJDEsIEVuY3J5cHRlZERhdGEuZGVmYXVsdFZhbHVlcyhFTkNSWVBURURfQ09OVEVOVF9JTkZPJDEpKTtcbiAgICAgICAgaWYgKFVOUFJPVEVDVEVEX0FUVFJTJDEgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy51bnByb3RlY3RlZEF0dHJzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVU5QUk9URUNURURfQVRUUlMkMSwgRW5jcnlwdGVkRGF0YS5kZWZhdWx0VmFsdWVzKFVOUFJPVEVDVEVEX0FUVFJTJDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiRkOlxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgY2FzZSBFTkNSWVBURURfQ09OVEVOVF9JTkZPJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFbmNyeXB0ZWRDb250ZW50SW5mbygpO1xuICAgICAgICAgICAgY2FzZSBVTlBST1RFQ1RFRF9BVFRSUyQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiRkOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IDApO1xuICAgICAgICAgICAgY2FzZSBFTkNSWVBURURfQ09OVEVOVF9JTkZPJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgoRW5jcnlwdGVkQ29udGVudEluZm8uY29tcGFyZVdpdGhEZWZhdWx0KFwiY29udGVudFR5cGVcIiwgbWVtYmVyVmFsdWUuY29udGVudFR5cGUpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoRW5jcnlwdGVkQ29udGVudEluZm8uY29tcGFyZVdpdGhEZWZhdWx0KFwiY29udGVudEVuY3J5cHRpb25BbGdvcml0aG1cIiwgbWVtYmVyVmFsdWUuY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0pKSAmJlxuICAgICAgICAgICAgICAgICAgICAoRW5jcnlwdGVkQ29udGVudEluZm8uY29tcGFyZVdpdGhEZWZhdWx0KFwiZW5jcnlwdGVkQ29udGVudFwiLCBtZW1iZXJWYWx1ZS5lbmNyeXB0ZWRDb250ZW50KSkpO1xuICAgICAgICAgICAgY2FzZSBVTlBST1RFQ1RFRF9BVFRSUyQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnZlcnNpb24gfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBFbmNyeXB0ZWRDb250ZW50SW5mby5zY2hlbWEobmFtZXMuZW5jcnlwdGVkQ29udGVudEluZm8gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy51bnByb3RlY3RlZEF0dHJzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEF0dHJpYnV0ZS5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkTCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgRW5jcnlwdGVkRGF0YS5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBWRVJTSU9OJGQsXG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkQ29udGVudEluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogRU5DUllQVEVEX0NPTlRFTlRfSU5GTyQxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVucHJvdGVjdGVkQXR0cnM6IFVOUFJPVEVDVEVEX0FUVFJTJDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBhc24xLnJlc3VsdC52ZXJzaW9uLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIHRoaXMuZW5jcnlwdGVkQ29udGVudEluZm8gPSBuZXcgRW5jcnlwdGVkQ29udGVudEluZm8oeyBzY2hlbWE6IGFzbjEucmVzdWx0LmVuY3J5cHRlZENvbnRlbnRJbmZvIH0pO1xuICAgICAgICBpZiAoVU5QUk9URUNURURfQVRUUlMkMSBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMudW5wcm90ZWN0ZWRBdHRycyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQudW5wcm90ZWN0ZWRBdHRycywgZWxlbWVudCA9PiBuZXcgQXR0cmlidXRlKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5lbmNyeXB0ZWRDb250ZW50SW5mby50b1NjaGVtYSgpKTtcbiAgICAgICAgaWYgKHRoaXMudW5wcm90ZWN0ZWRBdHRycykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMudW5wcm90ZWN0ZWRBdHRycywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uLFxuICAgICAgICAgICAgZW5jcnlwdGVkQ29udGVudEluZm86IHRoaXMuZW5jcnlwdGVkQ29udGVudEluZm8udG9KU09OKClcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMudW5wcm90ZWN0ZWRBdHRycylcbiAgICAgICAgICAgIHJlcy51bnByb3RlY3RlZEF0dHJzID0gQXJyYXkuZnJvbSh0aGlzLnVucHJvdGVjdGVkQXR0cnMsIG8gPT4gby50b0pTT04oKSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGFzeW5jIGVuY3J5cHQocGFyYW1ldGVycywgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIEFyZ3VtZW50RXJyb3IuYXNzZXJ0KHBhcmFtZXRlcnMsIFwicGFyYW1ldGVyc1wiLCBcIm9iamVjdFwiKTtcbiAgICAgICAgY29uc3QgZW5jcnlwdFBhcmFtcyA9IHtcbiAgICAgICAgICAgIC4uLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCIxLjIuODQwLjExMzU0OS4xLjcuMVwiLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVuY3J5cHRlZENvbnRlbnRJbmZvID0gYXdhaXQgY3J5cHRvLmVuY3J5cHRFbmNyeXB0ZWRDb250ZW50SW5mbyhlbmNyeXB0UGFyYW1zKTtcbiAgICB9XG4gICAgYXN5bmMgZGVjcnlwdChwYXJhbWV0ZXJzLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgQXJndW1lbnRFcnJvci5hc3NlcnQocGFyYW1ldGVycywgXCJwYXJhbWV0ZXJzXCIsIFwib2JqZWN0XCIpO1xuICAgICAgICBjb25zdCBkZWNyeXB0UGFyYW1zID0ge1xuICAgICAgICAgICAgLi4ucGFyYW1ldGVycyxcbiAgICAgICAgICAgIGVuY3J5cHRlZENvbnRlbnRJbmZvOiB0aGlzLmVuY3J5cHRlZENvbnRlbnRJbmZvLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY3J5cHRvLmRlY3J5cHRFbmNyeXB0ZWRDb250ZW50SW5mbyhkZWNyeXB0UGFyYW1zKTtcbiAgICB9XG59XG5FbmNyeXB0ZWREYXRhLkNMQVNTX05BTUUgPSBcIkVuY3J5cHRlZERhdGFcIjtcblxuY29uc3QgRU5DUllQVElPTl9BTEdPUklUSE0gPSBcImVuY3J5cHRpb25BbGdvcml0aG1cIjtcbmNvbnN0IEVOQ1JZUFRFRF9EQVRBID0gXCJlbmNyeXB0ZWREYXRhXCI7XG5jb25zdCBQQVJTRURfVkFMVUUkMiA9IFwicGFyc2VkVmFsdWVcIjtcbmNvbnN0IENMRUFSX1BST1BTJEsgPSBbXG4gICAgRU5DUllQVElPTl9BTEdPUklUSE0sXG4gICAgRU5DUllQVEVEX0RBVEEsXG5dO1xuY2xhc3MgUEtDUzhTaHJvdWRlZEtleUJhZyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZW5jcnlwdGlvbkFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEVOQ1JZUFRJT05fQUxHT1JJVEhNLCBQS0NTOFNocm91ZGVkS2V5QmFnLmRlZmF1bHRWYWx1ZXMoRU5DUllQVElPTl9BTEdPUklUSE0pKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0ZWREYXRhID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRU5DUllQVEVEX0RBVEEsIFBLQ1M4U2hyb3VkZWRLZXlCYWcuZGVmYXVsdFZhbHVlcyhFTkNSWVBURURfREFUQSkpO1xuICAgICAgICBpZiAoUEFSU0VEX1ZBTFVFJDIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5wYXJzZWRWYWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBBUlNFRF9WQUxVRSQyLCBQS0NTOFNocm91ZGVkS2V5QmFnLmRlZmF1bHRWYWx1ZXMoUEFSU0VEX1ZBTFVFJDIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgRU5DUllQVElPTl9BTEdPUklUSE06XG4gICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgQWxnb3JpdGhtSWRlbnRpZmllcigpKTtcbiAgICAgICAgICAgIGNhc2UgRU5DUllQVEVEX0RBVEE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKCkpO1xuICAgICAgICAgICAgY2FzZSBQQVJTRURfVkFMVUUkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRJT05fQUxHT1JJVEhNOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKEFsZ29yaXRobUlkZW50aWZpZXIuY29tcGFyZVdpdGhEZWZhdWx0KFwiYWxnb3JpdGhtSWRcIiwgbWVtYmVyVmFsdWUuYWxnb3JpdGhtSWQpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoKFwiYWxnb3JpdGhtUGFyYW1zXCIgaW4gbWVtYmVyVmFsdWUpID09PSBmYWxzZSkpO1xuICAgICAgICAgICAgY2FzZSBFTkNSWVBURURfREFUQTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmlzRXF1YWwoUEtDUzhTaHJvdWRlZEtleUJhZy5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpKSk7XG4gICAgICAgICAgICBjYXNlIFBBUlNFRF9WQUxVRSQyOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSAmJiAoT2JqZWN0LmtleXMobWVtYmVyVmFsdWUpLmxlbmd0aCA9PT0gMCkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBBbGdvcml0aG1JZGVudGlmaWVyLnNjaGVtYShuYW1lcy5lbmNyeXB0aW9uQWxnb3JpdGhtIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogRU5DUllQVElPTl9BTEdPUklUSE1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuZW5jcnlwdGVkRGF0YSB8fCBFTkNSWVBURURfREFUQSkgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29uc3RydWN0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5lbmNyeXB0ZWREYXRhIHx8IEVOQ1JZUFRFRF9EQVRBKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkSyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgUEtDUzhTaHJvdWRlZEtleUJhZy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbmNyeXB0aW9uQWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEVOQ1JZUFRJT05fQUxHT1JJVEhNXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZERhdGE6IEVOQ1JZUFRFRF9EQVRBXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0aW9uQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmVuY3J5cHRpb25BbGdvcml0aG0gfSk7XG4gICAgICAgIHRoaXMuZW5jcnlwdGVkRGF0YSA9IGFzbjEucmVzdWx0LmVuY3J5cHRlZERhdGE7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0aGlzLmVuY3J5cHRpb25BbGdvcml0aG0udG9TY2hlbWEoKSxcbiAgICAgICAgICAgICAgICB0aGlzLmVuY3J5cHRlZERhdGFcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbmNyeXB0aW9uQWxnb3JpdGhtOiB0aGlzLmVuY3J5cHRpb25BbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICBlbmNyeXB0ZWREYXRhOiB0aGlzLmVuY3J5cHRlZERhdGEudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlSW50ZXJuYWxWYWx1ZXMocGFyYW1ldGVycywgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGNvbnN0IGNtc0VuY3J5cHRlZCA9IG5ldyBFbmNyeXB0ZWREYXRhKHtcbiAgICAgICAgICAgIGVuY3J5cHRlZENvbnRlbnRJbmZvOiBuZXcgRW5jcnlwdGVkQ29udGVudEluZm8oe1xuICAgICAgICAgICAgICAgIGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtOiB0aGlzLmVuY3J5cHRpb25BbGdvcml0aG0sXG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkQ29udGVudDogdGhpcy5lbmNyeXB0ZWREYXRhXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVjcnlwdGVkRGF0YSA9IGF3YWl0IGNtc0VuY3J5cHRlZC5kZWNyeXB0KHBhcmFtZXRlcnMsIGNyeXB0byk7XG4gICAgICAgIHRoaXMucGFyc2VkVmFsdWUgPSBQcml2YXRlS2V5SW5mby5mcm9tQkVSKGRlY3J5cHRlZERhdGEpO1xuICAgIH1cbiAgICBhc3luYyBtYWtlSW50ZXJuYWxWYWx1ZXMocGFyYW1ldGVycywgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXJzZWRWYWx1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGluaXRpYWxpemUgXFxcInBhcnNlZFZhbHVlXFxcIiBmaXJzdFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbXNFbmNyeXB0ZWQgPSBuZXcgRW5jcnlwdGVkRGF0YSgpO1xuICAgICAgICBjb25zdCBlbmNyeXB0UGFyYW1zID0ge1xuICAgICAgICAgICAgLi4ucGFyYW1ldGVycyxcbiAgICAgICAgICAgIGNvbnRlbnRUb0VuY3J5cHQ6IHRoaXMucGFyc2VkVmFsdWUudG9TY2hlbWEoKS50b0JFUihmYWxzZSksXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IGNtc0VuY3J5cHRlZC5lbmNyeXB0KGVuY3J5cHRQYXJhbXMsIGNyeXB0byk7XG4gICAgICAgIGlmICghY21zRW5jcnlwdGVkLmVuY3J5cHRlZENvbnRlbnRJbmZvLmVuY3J5cHRlZENvbnRlbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBmaWxlZCBgZW5jcnlwdGVkQ29udGVudGAgaW4gRW5jcnlwdGVkQ29udGVudEluZm8gaXMgZW1wdHlcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmNyeXB0aW9uQWxnb3JpdGhtID0gY21zRW5jcnlwdGVkLmVuY3J5cHRlZENvbnRlbnRJbmZvLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZERhdGEgPSBjbXNFbmNyeXB0ZWQuZW5jcnlwdGVkQ29udGVudEluZm8uZW5jcnlwdGVkQ29udGVudDtcbiAgICB9XG59XG5QS0NTOFNocm91ZGVkS2V5QmFnLkNMQVNTX05BTUUgPSBcIlBLQ1M4U2hyb3VkZWRLZXlCYWdcIjtcblxuY29uc3QgU0VDUkVUX1RZUEVfSUQgPSBcInNlY3JldFR5cGVJZFwiO1xuY29uc3QgU0VDUkVUX1ZBTFVFID0gXCJzZWNyZXRWYWx1ZVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkSiA9IFtcbiAgICBTRUNSRVRfVFlQRV9JRCxcbiAgICBTRUNSRVRfVkFMVUUsXG5dO1xuY2xhc3MgU2VjcmV0QmFnIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zZWNyZXRUeXBlSWQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTRUNSRVRfVFlQRV9JRCwgU2VjcmV0QmFnLmRlZmF1bHRWYWx1ZXMoU0VDUkVUX1RZUEVfSUQpKTtcbiAgICAgICAgdGhpcy5zZWNyZXRWYWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNFQ1JFVF9WQUxVRSwgU2VjcmV0QmFnLmRlZmF1bHRWYWx1ZXMoU0VDUkVUX1ZBTFVFKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBTRUNSRVRfVFlQRV9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBTRUNSRVRfVkFMVUU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLkFueSgpKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgU0VDUkVUX1RZUEVfSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgICAgIGNhc2UgU0VDUkVUX1ZBTFVFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgaW5zdGFuY2VvZiBhc24xanMuQW55KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLmlkIHx8IFwiaWRcIikgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5BbnkoeyBuYW1lOiAobmFtZXMudmFsdWUgfHwgXCJ2YWx1ZVwiKSB9KV1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJEopO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFNlY3JldEJhZy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBpZDogU0VDUkVUX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFNFQ1JFVF9WQUxVRVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuc2VjcmV0VHlwZUlkID0gYXNuMS5yZXN1bHQuc2VjcmV0VHlwZUlkLnZhbHVlQmxvY2sudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5zZWNyZXRWYWx1ZSA9IGFzbjEucmVzdWx0LnNlY3JldFZhbHVlO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IHRoaXMuc2VjcmV0VHlwZUlkIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW3RoaXMuc2VjcmV0VmFsdWUudG9TY2hlbWEoKV1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY3JldFR5cGVJZDogdGhpcy5zZWNyZXRUeXBlSWQsXG4gICAgICAgICAgICBzZWNyZXRWYWx1ZTogdGhpcy5zZWNyZXRWYWx1ZS50b0pTT04oKVxuICAgICAgICB9O1xuICAgIH1cbn1cblNlY3JldEJhZy5DTEFTU19OQU1FID0gXCJTZWNyZXRCYWdcIjtcblxuY2xhc3MgU2FmZUJhZ1ZhbHVlRmFjdG9yeSB7XG4gICAgc3RhdGljIGdldEl0ZW1zKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXRlbXMpIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB7fTtcbiAgICAgICAgICAgIFNhZmVCYWdWYWx1ZUZhY3RvcnkucmVnaXN0ZXIoXCIxLjIuODQwLjExMzU0OS4xLjEyLjEwLjEuMVwiLCBQcml2YXRlS2V5SW5mbyk7XG4gICAgICAgICAgICBTYWZlQmFnVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKFwiMS4yLjg0MC4xMTM1NDkuMS4xMi4xMC4xLjJcIiwgUEtDUzhTaHJvdWRlZEtleUJhZyk7XG4gICAgICAgICAgICBTYWZlQmFnVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKFwiMS4yLjg0MC4xMTM1NDkuMS4xMi4xMC4xLjNcIiwgQ2VydEJhZyk7XG4gICAgICAgICAgICBTYWZlQmFnVmFsdWVGYWN0b3J5LnJlZ2lzdGVyKFwiMS4yLjg0MC4xMTM1NDkuMS4xMi4xMC4xLjRcIiwgQ1JMQmFnKTtcbiAgICAgICAgICAgIFNhZmVCYWdWYWx1ZUZhY3RvcnkucmVnaXN0ZXIoXCIxLjIuODQwLjExMzU0OS4xLjEyLjEwLjEuNVwiLCBTZWNyZXRCYWcpO1xuICAgICAgICAgICAgU2FmZUJhZ1ZhbHVlRmFjdG9yeS5yZWdpc3RlcihcIjEuMi44NDAuMTEzNTQ5LjEuMTIuMTAuMS42XCIsIFNhZmVDb250ZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXM7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3RlcihpZCwgdHlwZSkge1xuICAgICAgICB0aGlzLmdldEl0ZW1zKClbaWRdID0gdHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGZpbmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SXRlbXMoKVtpZF0gfHwgbnVsbDtcbiAgICB9XG59XG5cbmNvbnN0IEJBR19JRCA9IFwiYmFnSWRcIjtcbmNvbnN0IEJBR19WQUxVRSA9IFwiYmFnVmFsdWVcIjtcbmNvbnN0IEJBR19BVFRSSUJVVEVTID0gXCJiYWdBdHRyaWJ1dGVzXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRJID0gW1xuICAgIEJBR19JRCxcbiAgICBCQUdfVkFMVUUsXG4gICAgQkFHX0FUVFJJQlVURVNcbl07XG5jbGFzcyBTYWZlQmFnIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5iYWdJZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEJBR19JRCwgU2FmZUJhZy5kZWZhdWx0VmFsdWVzKEJBR19JRCkpO1xuICAgICAgICB0aGlzLmJhZ1ZhbHVlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQkFHX1ZBTFVFLCBTYWZlQmFnLmRlZmF1bHRWYWx1ZXMoQkFHX1ZBTFVFKSk7XG4gICAgICAgIGlmIChCQUdfQVRUUklCVVRFUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmJhZ0F0dHJpYnV0ZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBCQUdfQVRUUklCVVRFUywgU2FmZUJhZy5kZWZhdWx0VmFsdWVzKEJBR19BVFRSSUJVVEVTKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEJBR19JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBCQUdfVkFMVUU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLkFueSgpKTtcbiAgICAgICAgICAgIGNhc2UgQkFHX0FUVFJJQlVURVM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBCQUdfSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgICAgIGNhc2UgQkFHX1ZBTFVFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgaW5zdGFuY2VvZiBhc24xanMuQW55KTtcbiAgICAgICAgICAgIGNhc2UgQkFHX0FUVFJJQlVURVM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyBuYW1lOiAobmFtZXMuYmFnSWQgfHwgQkFHX0lEKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLkFueSh7IG5hbWU6IChuYW1lcy5iYWdWYWx1ZSB8fCBCQUdfVkFMVUUpIH0pXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuU2V0KHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYmFnQXR0cmlidXRlcyB8fCBCQUdfQVRUUklCVVRFUyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEF0dHJpYnV0ZS5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkSSk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgU2FmZUJhZy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBiYWdJZDogQkFHX0lELFxuICAgICAgICAgICAgICAgIGJhZ1ZhbHVlOiBCQUdfVkFMVUUsXG4gICAgICAgICAgICAgICAgYmFnQXR0cmlidXRlczogQkFHX0FUVFJJQlVURVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmJhZ0lkID0gYXNuMS5yZXN1bHQuYmFnSWQudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBiYWdUeXBlID0gU2FmZUJhZ1ZhbHVlRmFjdG9yeS5maW5kKHRoaXMuYmFnSWQpO1xuICAgICAgICBpZiAoIWJhZ1R5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBCQUdfSUQgZm9yIFNhZmVCYWc6ICR7dGhpcy5iYWdJZH1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJhZ1ZhbHVlID0gbmV3IGJhZ1R5cGUoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmJhZ1ZhbHVlIH0pO1xuICAgICAgICBpZiAoQkFHX0FUVFJJQlVURVMgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuYmFnQXR0cmlidXRlcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQuYmFnQXR0cmlidXRlcywgZWxlbWVudCA9PiBuZXcgQXR0cmlidXRlKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXG4gICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5iYWdJZCB9KSxcbiAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFt0aGlzLmJhZ1ZhbHVlLnRvU2NoZW1hKCldXG4gICAgICAgICAgICB9KVxuICAgICAgICBdO1xuICAgICAgICBpZiAodGhpcy5iYWdBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuU2V0KHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmJhZ0F0dHJpYnV0ZXMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgIGJhZ0lkOiB0aGlzLmJhZ0lkLFxuICAgICAgICAgICAgYmFnVmFsdWU6IHRoaXMuYmFnVmFsdWUudG9KU09OKClcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYmFnQXR0cmlidXRlcykge1xuICAgICAgICAgICAgb3V0cHV0LmJhZ0F0dHJpYnV0ZXMgPSBBcnJheS5mcm9tKHRoaXMuYmFnQXR0cmlidXRlcywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbn1cblNhZmVCYWcuQ0xBU1NfTkFNRSA9IFwiU2FmZUJhZ1wiO1xuXG5jb25zdCBTQUZFX0JVR1MgPSBcInNhZmVCYWdzXCI7XG5jbGFzcyBTYWZlQ29udGVudHMgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNhZmVCYWdzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0FGRV9CVUdTLCBTYWZlQ29udGVudHMuZGVmYXVsdFZhbHVlcyhTQUZFX0JVR1MpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFNBRkVfQlVHUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFNBRkVfQlVHUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuc2FmZUJhZ3MgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFNhZmVCYWcuc2NoZW1hKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIFtcbiAgICAgICAgICAgIFNBRkVfQlVHU1xuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBTYWZlQ29udGVudHMuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgc2FmZUJhZ3M6IFNBRkVfQlVHU1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuc2FmZUJhZ3MgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LnNhZmVCYWdzLCBlbGVtZW50ID0+IG5ldyBTYWZlQmFnKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLnNhZmVCYWdzLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzYWZlQmFnczogQXJyYXkuZnJvbSh0aGlzLnNhZmVCYWdzLCBvID0+IG8udG9KU09OKCkpXG4gICAgICAgIH07XG4gICAgfVxufVxuU2FmZUNvbnRlbnRzLkNMQVNTX05BTUUgPSBcIlNhZmVDb250ZW50c1wiO1xuXG5jb25zdCBPVEhFUl9DRVJUX0ZPUk1BVCA9IFwib3RoZXJDZXJ0Rm9ybWF0XCI7XG5jb25zdCBPVEhFUl9DRVJUID0gXCJvdGhlckNlcnRcIjtcbmNvbnN0IENMRUFSX1BST1BTJEggPSBbXG4gICAgT1RIRVJfQ0VSVF9GT1JNQVQsXG4gICAgT1RIRVJfQ0VSVFxuXTtcbmNsYXNzIE90aGVyQ2VydGlmaWNhdGVGb3JtYXQgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm90aGVyQ2VydEZvcm1hdCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9USEVSX0NFUlRfRk9STUFULCBPdGhlckNlcnRpZmljYXRlRm9ybWF0LmRlZmF1bHRWYWx1ZXMoT1RIRVJfQ0VSVF9GT1JNQVQpKTtcbiAgICAgICAgdGhpcy5vdGhlckNlcnQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPVEhFUl9DRVJULCBPdGhlckNlcnRpZmljYXRlRm9ybWF0LmRlZmF1bHRWYWx1ZXMoT1RIRVJfQ0VSVCkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgT1RIRVJfQ0VSVF9GT1JNQVQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgT1RIRVJfQ0VSVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5BbnkoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLm90aGVyQ2VydEZvcm1hdCB8fCBPVEhFUl9DRVJUX0ZPUk1BVCkgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5BbnkoeyBuYW1lOiAobmFtZXMub3RoZXJDZXJ0IHx8IE9USEVSX0NFUlQpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkSCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgT3RoZXJDZXJ0aWZpY2F0ZUZvcm1hdC5zY2hlbWEoKSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMub3RoZXJDZXJ0Rm9ybWF0ID0gYXNuMS5yZXN1bHQub3RoZXJDZXJ0Rm9ybWF0LnZhbHVlQmxvY2sudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5vdGhlckNlcnQgPSBhc24xLnJlc3VsdC5vdGhlckNlcnQ7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5vdGhlckNlcnRGb3JtYXQgfSksXG4gICAgICAgICAgICAgICAgdGhpcy5vdGhlckNlcnRcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIG90aGVyQ2VydEZvcm1hdDogdGhpcy5vdGhlckNlcnRGb3JtYXRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCEodGhpcy5vdGhlckNlcnQgaW5zdGFuY2VvZiBhc24xanMuQW55KSkge1xuICAgICAgICAgICAgcmVzLm90aGVyQ2VydCA9IHRoaXMub3RoZXJDZXJ0LnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuXG5jb25zdCBDRVJUSUZJQ0FURVMkMSA9IFwiY2VydGlmaWNhdGVzXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRHID0gW1xuICAgIENFUlRJRklDQVRFUyQxLFxuXTtcbmNsYXNzIENlcnRpZmljYXRlU2V0IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jZXJ0aWZpY2F0ZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDRVJUSUZJQ0FURVMkMSwgQ2VydGlmaWNhdGVTZXQuZGVmYXVsdFZhbHVlcyhDRVJUSUZJQ0FURVMkMSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgQ0VSVElGSUNBVEVTJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2V0KHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5jZXJ0aWZpY2F0ZXMgfHwgQ0VSVElGSUNBVEVTJDEpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IGFzbjFqcy5DaG9pY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDZXJ0aWZpY2F0ZS5zY2hlbWEoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQW55KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZVYyLnNjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE90aGVyQ2VydGlmaWNhdGVGb3JtYXQuc2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRHKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBDZXJ0aWZpY2F0ZVNldC5zY2hlbWEoKSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuY2VydGlmaWNhdGVzID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5jZXJ0aWZpY2F0ZXMgfHwgW10sIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsVGFnTnVtYmVyID0gZWxlbWVudC5pZEJsb2NrLnRhZ051bWJlcjtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmlkQmxvY2sudGFnQ2xhc3MgPT09IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDZXJ0aWZpY2F0ZSh7IHNjaGVtYTogZWxlbWVudCB9KTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRTZXF1ZW5jZSA9IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBlbGVtZW50LnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3dpdGNoIChpbml0aWFsVGFnTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFNlcXVlbmNlLnZhbHVlQmxvY2sudmFsdWVbMF0udmFsdWVCbG9jay52YWx1ZVswXS52YWx1ZUJsb2NrLnZhbHVlRGVjID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZUNlcnRpZmljYXRlVjIoeyBzY2hlbWE6IGVsZW1lbnRTZXF1ZW5jZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlQ2VydGlmaWNhdGVWMSh7IHNjaGVtYTogZWxlbWVudFNlcXVlbmNlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZUNlcnRpZmljYXRlVjIoeyBzY2hlbWE6IGVsZW1lbnRTZXF1ZW5jZSB9KTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT3RoZXJDZXJ0aWZpY2F0ZUZvcm1hdCh7IHNjaGVtYTogZWxlbWVudFNlcXVlbmNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNldCh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmNlcnRpZmljYXRlcywgZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgKGVsZW1lbnQgaW5zdGFuY2VvZiBDZXJ0aWZpY2F0ZSk6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC50b1NjaGVtYSgpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIChlbGVtZW50IGluc3RhbmNlb2YgQXR0cmlidXRlQ2VydGlmaWNhdGVWMSk6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudC50b1NjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIChlbGVtZW50IGluc3RhbmNlb2YgQXR0cmlidXRlQ2VydGlmaWNhdGVWMik6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudC50b1NjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIChlbGVtZW50IGluc3RhbmNlb2YgT3RoZXJDZXJ0aWZpY2F0ZUZvcm1hdCk6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudC50b1NjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC50b1NjaGVtYSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjZXJ0aWZpY2F0ZXM6IEFycmF5LmZyb20odGhpcy5jZXJ0aWZpY2F0ZXMsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5DZXJ0aWZpY2F0ZVNldC5DTEFTU19OQU1FID0gXCJDZXJ0aWZpY2F0ZVNldFwiO1xuXG5jb25zdCBPVEhFUl9SRVZfSU5GT19GT1JNQVQgPSBcIm90aGVyUmV2SW5mb0Zvcm1hdFwiO1xuY29uc3QgT1RIRVJfUkVWX0lORk8gPSBcIm90aGVyUmV2SW5mb1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkRiA9IFtcbiAgICBPVEhFUl9SRVZfSU5GT19GT1JNQVQsXG4gICAgT1RIRVJfUkVWX0lORk9cbl07XG5jbGFzcyBPdGhlclJldm9jYXRpb25JbmZvRm9ybWF0IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5vdGhlclJldkluZm9Gb3JtYXQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPVEhFUl9SRVZfSU5GT19GT1JNQVQsIE90aGVyUmV2b2NhdGlvbkluZm9Gb3JtYXQuZGVmYXVsdFZhbHVlcyhPVEhFUl9SRVZfSU5GT19GT1JNQVQpKTtcbiAgICAgICAgdGhpcy5vdGhlclJldkluZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPVEhFUl9SRVZfSU5GTywgT3RoZXJSZXZvY2F0aW9uSW5mb0Zvcm1hdC5kZWZhdWx0VmFsdWVzKE9USEVSX1JFVl9JTkZPKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBPVEhFUl9SRVZfSU5GT19GT1JNQVQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgT1RIRVJfUkVWX0lORk86XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQW55KCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IG5hbWU6IChuYW1lcy5vdGhlclJldkluZm9Gb3JtYXQgfHwgT1RIRVJfUkVWX0lORk9fRk9STUFUKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkFueSh7IG5hbWU6IChuYW1lcy5vdGhlclJldkluZm8gfHwgT1RIRVJfUkVWX0lORk8pIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkRik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgT3RoZXJSZXZvY2F0aW9uSW5mb0Zvcm1hdC5zY2hlbWEoKSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMub3RoZXJSZXZJbmZvRm9ybWF0ID0gYXNuMS5yZXN1bHQub3RoZXJSZXZJbmZvRm9ybWF0LnZhbHVlQmxvY2sudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5vdGhlclJldkluZm8gPSBhc24xLnJlc3VsdC5vdGhlclJldkluZm87XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5vdGhlclJldkluZm9Gb3JtYXQgfSksXG4gICAgICAgICAgICAgICAgdGhpcy5vdGhlclJldkluZm9cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIG90aGVyUmV2SW5mb0Zvcm1hdDogdGhpcy5vdGhlclJldkluZm9Gb3JtYXRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCEodGhpcy5vdGhlclJldkluZm8gaW5zdGFuY2VvZiBhc24xanMuQW55KSkge1xuICAgICAgICAgICAgcmVzLm90aGVyUmV2SW5mbyA9IHRoaXMub3RoZXJSZXZJbmZvLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuT3RoZXJSZXZvY2F0aW9uSW5mb0Zvcm1hdC5DTEFTU19OQU1FID0gXCJPdGhlclJldm9jYXRpb25JbmZvRm9ybWF0XCI7XG5cbmNvbnN0IENSTFMkMyA9IFwiY3Jsc1wiO1xuY29uc3QgT1RIRVJfUkVWT0NBVElPTl9JTkZPUyA9IFwib3RoZXJSZXZvY2F0aW9uSW5mb3NcIjtcbmNvbnN0IENMRUFSX1BST1BTJEUgPSBbXG4gICAgQ1JMUyQzXG5dO1xuY2xhc3MgUmV2b2NhdGlvbkluZm9DaG9pY2VzIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jcmxzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ1JMUyQzLCBSZXZvY2F0aW9uSW5mb0Nob2ljZXMuZGVmYXVsdFZhbHVlcyhDUkxTJDMpKTtcbiAgICAgICAgdGhpcy5vdGhlclJldm9jYXRpb25JbmZvcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9USEVSX1JFVk9DQVRJT05fSU5GT1MsIFJldm9jYXRpb25JbmZvQ2hvaWNlcy5kZWZhdWx0VmFsdWVzKE9USEVSX1JFVk9DQVRJT05fSU5GT1MpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIENSTFMkMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjYXNlIE9USEVSX1JFVk9DQVRJT05fSU5GT1M6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2V0KHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5jcmxzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgYXNuMWpzLkNob2ljZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Quc2NoZW1hKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQW55KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRFKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBSZXZvY2F0aW9uSW5mb0Nob2ljZXMuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgY3JsczogQ1JMUyQzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKGFzbjEucmVzdWx0LmNybHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBhc24xLnJlc3VsdC5jcmxzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuaWRCbG9jay50YWdDbGFzcyA9PT0gMSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmxzLnB1c2gobmV3IENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QoeyBzY2hlbWE6IGVsZW1lbnQgfSkpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdGhlclJldm9jYXRpb25JbmZvcy5wdXNoKG5ldyBPdGhlclJldm9jYXRpb25JbmZvRm9ybWF0KHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCguLi5BcnJheS5mcm9tKHRoaXMuY3JscywgbyA9PiBvLnRvU2NoZW1hKCkpKTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCguLi5BcnJheS5mcm9tKHRoaXMub3RoZXJSZXZvY2F0aW9uSW5mb3MsIGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gZWxlbWVudC50b1NjaGVtYSgpO1xuICAgICAgICAgICAgc2NoZW1hLmlkQmxvY2sudGFnQ2xhc3MgPSAzO1xuICAgICAgICAgICAgc2NoZW1hLmlkQmxvY2sudGFnTnVtYmVyID0gMTtcbiAgICAgICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNldCh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmxzOiBBcnJheS5mcm9tKHRoaXMuY3JscywgbyA9PiBvLnRvSlNPTigpKSxcbiAgICAgICAgICAgIG90aGVyUmV2b2NhdGlvbkluZm9zOiBBcnJheS5mcm9tKHRoaXMub3RoZXJSZXZvY2F0aW9uSW5mb3MsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5SZXZvY2F0aW9uSW5mb0Nob2ljZXMuQ0xBU1NfTkFNRSA9IFwiUmV2b2NhdGlvbkluZm9DaG9pY2VzXCI7XG5cbmNvbnN0IENFUlRTJDMgPSBcImNlcnRzXCI7XG5jb25zdCBDUkxTJDIgPSBcImNybHNcIjtcbmNvbnN0IENMRUFSX1BST1BTJEQgPSBbXG4gICAgQ0VSVFMkMyxcbiAgICBDUkxTJDIsXG5dO1xuY2xhc3MgT3JpZ2luYXRvckluZm8gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNybHMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDUkxTJDIsIE9yaWdpbmF0b3JJbmZvLmRlZmF1bHRWYWx1ZXMoQ1JMUyQyKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBDRVJUUyQzOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ2VydGlmaWNhdGVTZXQoKTtcbiAgICAgICAgICAgIGNhc2UgQ1JMUyQyOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmV2b2NhdGlvbkluZm9DaG9pY2VzKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIENFUlRTJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5jZXJ0aWZpY2F0ZXMubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGNhc2UgQ1JMUyQyOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLmNybHMubGVuZ3RoID09PSAwKSAmJiAobWVtYmVyVmFsdWUub3RoZXJSZXZvY2F0aW9uSW5mb3MubGVuZ3RoID09PSAwKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuY2VydHMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBDZXJ0aWZpY2F0ZVNldC5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5jcmxzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogUmV2b2NhdGlvbkluZm9DaG9pY2VzLnNjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJEQpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIE9yaWdpbmF0b3JJbmZvLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGNlcnRzOiBDRVJUUyQzLFxuICAgICAgICAgICAgICAgIGNybHM6IENSTFMkMlxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIGlmIChDRVJUUyQzIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmNlcnRzID0gbmV3IENlcnRpZmljYXRlU2V0KHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2V0KHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFzbjEucmVzdWx0LmNlcnRzLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENSTFMkMiBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5jcmxzID0gbmV3IFJldm9jYXRpb25JbmZvQ2hvaWNlcyh7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiBuZXcgYXNuMWpzLlNldCh7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhc24xLnJlc3VsdC5jcmxzLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IHNlcXVlbmNlVmFsdWUgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMuY2VydHMpIHtcbiAgICAgICAgICAgIHNlcXVlbmNlVmFsdWUucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmNlcnRzLnRvU2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNybHMpIHtcbiAgICAgICAgICAgIHNlcXVlbmNlVmFsdWUucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmNybHMudG9TY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBzZXF1ZW5jZVZhbHVlXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuY2VydHMpIHtcbiAgICAgICAgICAgIHJlcy5jZXJ0cyA9IHRoaXMuY2VydHMudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY3Jscykge1xuICAgICAgICAgICAgcmVzLmNybHMgPSB0aGlzLmNybHMudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG5PcmlnaW5hdG9ySW5mby5DTEFTU19OQU1FID0gXCJPcmlnaW5hdG9ySW5mb1wiO1xuXG5jb25zdCBJU1NVRVIgPSBcImlzc3VlclwiO1xuY29uc3QgU0VSSUFMX05VTUJFUiQyID0gXCJzZXJpYWxOdW1iZXJcIjtcbmNvbnN0IENMRUFSX1BST1BTJEMgPSBbXG4gICAgSVNTVUVSLFxuICAgIFNFUklBTF9OVU1CRVIkMixcbl07XG5jbGFzcyBJc3N1ZXJBbmRTZXJpYWxOdW1iZXIgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElTU1VFUiwgSXNzdWVyQW5kU2VyaWFsTnVtYmVyLmRlZmF1bHRWYWx1ZXMoSVNTVUVSKSk7XG4gICAgICAgIHRoaXMuc2VyaWFsTnVtYmVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0VSSUFMX05VTUJFUiQyLCBJc3N1ZXJBbmRTZXJpYWxOdW1iZXIuZGVmYXVsdFZhbHVlcyhTRVJJQUxfTlVNQkVSJDIpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIElTU1VFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzKCk7XG4gICAgICAgICAgICBjYXNlIFNFUklBTF9OVU1CRVIkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5JbnRlZ2VyKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzLnNjaGVtYShuYW1lcy5pc3N1ZXIgfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy5zZXJpYWxOdW1iZXIgfHwgRU1QVFlfU1RSSU5HKSB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJEMpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIElzc3VlckFuZFNlcmlhbE51bWJlci5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogSVNTVUVSXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlcjogU0VSSUFMX05VTUJFUiQyXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5pc3N1ZXIgPSBuZXcgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMoeyBzY2hlbWE6IGFzbjEucmVzdWx0Lmlzc3VlciB9KTtcbiAgICAgICAgdGhpcy5zZXJpYWxOdW1iZXIgPSBhc24xLnJlc3VsdC5zZXJpYWxOdW1iZXI7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0aGlzLmlzc3Vlci50b1NjaGVtYSgpLFxuICAgICAgICAgICAgICAgIHRoaXMuc2VyaWFsTnVtYmVyXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNzdWVyOiB0aGlzLmlzc3Vlci50b0pTT04oKSxcbiAgICAgICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5zZXJpYWxOdW1iZXIudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuSXNzdWVyQW5kU2VyaWFsTnVtYmVyLkNMQVNTX05BTUUgPSBcIklzc3VlckFuZFNlcmlhbE51bWJlclwiO1xuXG5jb25zdCBWQVJJQU5UJDMgPSBcInZhcmlhbnRcIjtcbmNvbnN0IFZBTFVFJDMgPSBcInZhbHVlXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRCID0gW1xuICAgIFwiYmxvY2tOYW1lXCJcbl07XG5jbGFzcyBSZWNpcGllbnRJZGVudGlmaWVyIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52YXJpYW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkFSSUFOVCQzLCBSZWNpcGllbnRJZGVudGlmaWVyLmRlZmF1bHRWYWx1ZXMoVkFSSUFOVCQzKSk7XG4gICAgICAgIGlmIChWQUxVRSQzIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWQUxVRSQzLCBSZWNpcGllbnRJZGVudGlmaWVyLmRlZmF1bHRWYWx1ZXMoVkFMVUUkMykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWQVJJQU5UJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgtMSk7XG4gICAgICAgICAgICBjYXNlIFZBTFVFJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWQVJJQU5UJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gKC0xKSk7XG4gICAgICAgICAgICBjYXNlIFZBTFVFJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChPYmplY3Qua2V5cyhtZW1iZXJWYWx1ZSkubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLkNob2ljZSh7XG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIElzc3VlckFuZFNlcmlhbE51bWJlci5zY2hlbWEoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRCKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBSZWNpcGllbnRJZGVudGlmaWVyLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogXCJibG9ja05hbWVcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIGlmIChhc24xLnJlc3VsdC5ibG9ja05hbWUuaWRCbG9jay50YWdDbGFzcyA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy52YXJpYW50ID0gMTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXcgSXNzdWVyQW5kU2VyaWFsTnVtYmVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5ibG9ja05hbWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhcmlhbnQgPSAyO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogYXNuMS5yZXN1bHQuYmxvY2tOYW1lLnZhbHVlQmxvY2sudmFsdWVIZXggfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy52YXJpYW50KSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCEodGhpcy52YWx1ZSBpbnN0YW5jZW9mIElzc3VlckFuZFNlcmlhbE51bWJlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5jb3JyZWN0IHR5cGUgb2YgUmVjaXBpZW50SWRlbnRpZmllci52YWx1ZS4gSXQgc2hvdWxkIGJlIElzc3VlckFuZFNlcmlhbE51bWJlci5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLnRvU2NoZW1hKCk7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgaWYgKCEodGhpcy52YWx1ZSBpbnN0YW5jZW9mIGFzbjFqcy5PY3RldFN0cmluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5jb3JyZWN0IHR5cGUgb2YgUmVjaXBpZW50SWRlbnRpZmllci52YWx1ZS4gSXQgc2hvdWxkIGJlIEFTTi4xIE9jdGV0U3RyaW5nLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVIZXg6IHRoaXMudmFsdWUudmFsdWVCbG9jay52YWx1ZUhleFZpZXdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQW55KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICB2YXJpYW50OiB0aGlzLnZhcmlhbnRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCh0aGlzLnZhcmlhbnQgPT09IDEgfHwgdGhpcy52YXJpYW50ID09PSAyKSAmJiB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICByZXMudmFsdWUgPSB0aGlzLnZhbHVlLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuUmVjaXBpZW50SWRlbnRpZmllci5DTEFTU19OQU1FID0gXCJSZWNpcGllbnRJZGVudGlmaWVyXCI7XG5cbmNvbnN0IFZFUlNJT04kYyA9IFwidmVyc2lvblwiO1xuY29uc3QgUklEJDEgPSBcInJpZFwiO1xuY29uc3QgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDMgPSBcImtleUVuY3J5cHRpb25BbGdvcml0aG1cIjtcbmNvbnN0IEVOQ1JZUFRFRF9LRVkkMyA9IFwiZW5jcnlwdGVkS2V5XCI7XG5jb25zdCBSRUNJUElFTlRfQ0VSVElGSUNBVEUkMSA9IFwicmVjaXBpZW50Q2VydGlmaWNhdGVcIjtcbmNvbnN0IENMRUFSX1BST1BTJEEgPSBbXG4gICAgVkVSU0lPTiRjLFxuICAgIFJJRCQxLFxuICAgIEtFWV9FTkNSWVBUSU9OX0FMR09SSVRITSQzLFxuICAgIEVOQ1JZUFRFRF9LRVkkMyxcbl07XG5jbGFzcyBLZXlUcmFuc1JlY2lwaWVudEluZm8gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWRVJTSU9OJGMsIEtleVRyYW5zUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFZFUlNJT04kYykpO1xuICAgICAgICB0aGlzLnJpZCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFJJRCQxLCBLZXlUcmFuc1JlY2lwaWVudEluZm8uZGVmYXVsdFZhbHVlcyhSSUQkMSkpO1xuICAgICAgICB0aGlzLmtleUVuY3J5cHRpb25BbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBLRVlfRU5DUllQVElPTl9BTEdPUklUSE0kMywgS2V5VHJhbnNSZWNpcGllbnRJbmZvLmRlZmF1bHRWYWx1ZXMoS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDMpKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0ZWRLZXkgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFTkNSWVBURURfS0VZJDMsIEtleVRyYW5zUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKEVOQ1JZUFRFRF9LRVkkMykpO1xuICAgICAgICB0aGlzLnJlY2lwaWVudENlcnRpZmljYXRlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVDSVBJRU5UX0NFUlRJRklDQVRFJDEsIEtleVRyYW5zUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFJFQ0lQSUVOVF9DRVJUSUZJQ0FURSQxKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJGM6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgtMSk7XG4gICAgICAgICAgICBjYXNlIFJJRCQxOlxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIGNhc2UgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRFRF9LRVkkMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgY2FzZSBSRUNJUElFTlRfQ0VSVElGSUNBVEUkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENlcnRpZmljYXRlKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kYzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSBLZXlUcmFuc1JlY2lwaWVudEluZm8uZGVmYXVsdFZhbHVlcyhWRVJTSU9OJGMpKTtcbiAgICAgICAgICAgIGNhc2UgUklEJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChPYmplY3Qua2V5cyhtZW1iZXJWYWx1ZSkubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGNhc2UgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDM6XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRFRF9LRVkkMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVtYmVyVmFsdWUuaXNFcXVhbChLZXlUcmFuc1JlY2lwaWVudEluZm8uZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSk7XG4gICAgICAgICAgICBjYXNlIFJFQ0lQSUVOVF9DRVJUSUZJQ0FURSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnZlcnNpb24gfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBSZWNpcGllbnRJZGVudGlmaWVyLnNjaGVtYShuYW1lcy5yaWQgfHwge30pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmtleUVuY3J5cHRpb25BbGdvcml0aG0gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuZW5jcnlwdGVkS2V5IHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRBKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBLZXlUcmFuc1JlY2lwaWVudEluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogVkVSU0lPTiRjLFxuICAgICAgICAgICAgICAgIHJpZDoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBSSUQkMVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBrZXlFbmNyeXB0aW9uQWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEtFWV9FTkNSWVBUSU9OX0FMR09SSVRITSQzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZEtleTogRU5DUllQVEVEX0tFWSQzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gYXNuMS5yZXN1bHQudmVyc2lvbi52YWx1ZUJsb2NrLnZhbHVlRGVjO1xuICAgICAgICBpZiAoYXNuMS5yZXN1bHQucmlkLmlkQmxvY2sudGFnQ2xhc3MgPT09IDMpIHtcbiAgICAgICAgICAgIHRoaXMucmlkID0gbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBhc24xLnJlc3VsdC5yaWQudmFsdWVCbG9jay52YWx1ZUhleCB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmlkID0gbmV3IElzc3VlckFuZFNlcmlhbE51bWJlcih7IHNjaGVtYTogYXNuMS5yZXN1bHQucmlkIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMua2V5RW5jcnlwdGlvbkFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtIH0pO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZEtleSA9IGFzbjEucmVzdWx0LmVuY3J5cHRlZEtleTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIGlmICh0aGlzLnJpZCBpbnN0YW5jZW9mIElzc3VlckFuZFNlcmlhbE51bWJlcikge1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gMDtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KSk7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMucmlkLnRvU2NoZW1hKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gMjtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KSk7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlSGV4OiB0aGlzLnJpZC52YWx1ZUJsb2NrLnZhbHVlSGV4Vmlld1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLnRvU2NoZW1hKCkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuZW5jcnlwdGVkS2V5KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbixcbiAgICAgICAgICAgIHJpZDogdGhpcy5yaWQudG9KU09OKCksXG4gICAgICAgICAgICBrZXlFbmNyeXB0aW9uQWxnb3JpdGhtOiB0aGlzLmtleUVuY3J5cHRpb25BbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICBlbmNyeXB0ZWRLZXk6IHRoaXMuZW5jcnlwdGVkS2V5LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbktleVRyYW5zUmVjaXBpZW50SW5mby5DTEFTU19OQU1FID0gXCJLZXlUcmFuc1JlY2lwaWVudEluZm9cIjtcblxuY29uc3QgQUxHT1JJVEhNID0gXCJhbGdvcml0aG1cIjtcbmNvbnN0IFBVQkxJQ19LRVkgPSBcInB1YmxpY0tleVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkeiA9IFtcbiAgICBBTEdPUklUSE0sXG4gICAgUFVCTElDX0tFWVxuXTtcbmNsYXNzIE9yaWdpbmF0b3JQdWJsaWNLZXkgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEFMR09SSVRITSwgT3JpZ2luYXRvclB1YmxpY0tleS5kZWZhdWx0VmFsdWVzKEFMR09SSVRITSkpO1xuICAgICAgICB0aGlzLnB1YmxpY0tleSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBVQkxJQ19LRVksIE9yaWdpbmF0b3JQdWJsaWNLZXkuZGVmYXVsdFZhbHVlcyhQVUJMSUNfS0VZKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBBTEdPUklUSE06XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIFBVQkxJQ19LRVk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEFMR09SSVRITTpcbiAgICAgICAgICAgIGNhc2UgUFVCTElDX0tFWTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmlzRXF1YWwoT3JpZ2luYXRvclB1YmxpY0tleS5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmFsZ29yaXRobSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoeyBuYW1lOiAobmFtZXMucHVibGljS2V5IHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyR6KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBPcmlnaW5hdG9yUHVibGljS2V5LnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBBTEdPUklUSE1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHVibGljS2V5OiBQVUJMSUNfS0VZXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5hbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQuYWxnb3JpdGhtIH0pO1xuICAgICAgICB0aGlzLnB1YmxpY0tleSA9IGFzbjEucmVzdWx0LnB1YmxpY0tleTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIHRoaXMuYWxnb3JpdGhtLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5wdWJsaWNLZXlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbGdvcml0aG06IHRoaXMuYWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgcHVibGljS2V5OiB0aGlzLnB1YmxpY0tleS50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5PcmlnaW5hdG9yUHVibGljS2V5LkNMQVNTX05BTUUgPSBcIk9yaWdpbmF0b3JQdWJsaWNLZXlcIjtcblxuY29uc3QgVkFSSUFOVCQyID0gXCJ2YXJpYW50XCI7XG5jb25zdCBWQUxVRSQyID0gXCJ2YWx1ZVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkeSA9IFtcbiAgICBcImJsb2NrTmFtZVwiLFxuXTtcbmNsYXNzIE9yaWdpbmF0b3JJZGVudGlmaWVyT3JLZXkgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZhcmlhbnQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWQVJJQU5UJDIsIE9yaWdpbmF0b3JJZGVudGlmaWVyT3JLZXkuZGVmYXVsdFZhbHVlcyhWQVJJQU5UJDIpKTtcbiAgICAgICAgaWYgKFZBTFVFJDIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZBTFVFJDIsIE9yaWdpbmF0b3JJZGVudGlmaWVyT3JLZXkuZGVmYXVsdFZhbHVlcyhWQUxVRSQyKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZBUklBTlQkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gKC0xKTtcbiAgICAgICAgICAgIGNhc2UgVkFMVUUkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZBUklBTlQkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSAoLTEpKTtcbiAgICAgICAgICAgIGNhc2UgVkFMVUUkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gKE9iamVjdC5rZXlzKG1lbWJlclZhbHVlKS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgSXNzdWVyQW5kU2VyaWFsTnVtYmVyLnNjaGVtYSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogT3JpZ2luYXRvclB1YmxpY0tleS5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyR5KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBPcmlnaW5hdG9ySWRlbnRpZmllck9yS2V5LnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogXCJibG9ja05hbWVcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIGlmIChhc24xLnJlc3VsdC5ibG9ja05hbWUuaWRCbG9jay50YWdDbGFzcyA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy52YXJpYW50ID0gMTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXcgSXNzdWVyQW5kU2VyaWFsTnVtYmVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5ibG9ja05hbWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoYXNuMS5yZXN1bHQuYmxvY2tOYW1lLmlkQmxvY2sudGFnTnVtYmVyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYXNuMS5yZXN1bHQuYmxvY2tOYW1lLmlkQmxvY2sudGFnQ2xhc3MgPSAxO1xuICAgICAgICAgICAgICAgIGFzbjEucmVzdWx0LmJsb2NrTmFtZS5pZEJsb2NrLnRhZ051bWJlciA9IDQ7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYW50ID0gMjtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gYXNuMS5yZXN1bHQuYmxvY2tOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYW50ID0gMztcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gbmV3IE9yaWdpbmF0b3JQdWJsaWNLZXkoe1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFzbjEucmVzdWx0LmJsb2NrTmFtZS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy52YXJpYW50KSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUudG9TY2hlbWEoKTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLmlkQmxvY2sudGFnQ2xhc3MgPSAzO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuaWRCbG9jay50YWdOdW1iZXIgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX3NjaGVtYSA9IHRoaXMudmFsdWUudG9TY2hlbWEoKTtcbiAgICAgICAgICAgICAgICAgICAgX3NjaGVtYS5pZEJsb2NrLnRhZ0NsYXNzID0gMztcbiAgICAgICAgICAgICAgICAgICAgX3NjaGVtYS5pZEJsb2NrLnRhZ051bWJlciA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfc2NoZW1hO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQW55KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICB2YXJpYW50OiB0aGlzLnZhcmlhbnRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCh0aGlzLnZhcmlhbnQgPT09IDEpIHx8ICh0aGlzLnZhcmlhbnQgPT09IDIpIHx8ICh0aGlzLnZhcmlhbnQgPT09IDMpKSB7XG4gICAgICAgICAgICByZXMudmFsdWUgPSB0aGlzLnZhbHVlLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuT3JpZ2luYXRvcklkZW50aWZpZXJPcktleS5DTEFTU19OQU1FID0gXCJPcmlnaW5hdG9ySWRlbnRpZmllck9yS2V5XCI7XG5cbmNvbnN0IEtFWV9BVFRSX0lEID0gXCJrZXlBdHRySWRcIjtcbmNvbnN0IEtFWV9BVFRSID0gXCJrZXlBdHRyXCI7XG5jb25zdCBDTEVBUl9QUk9QUyR4ID0gW1xuICAgIEtFWV9BVFRSX0lELFxuICAgIEtFWV9BVFRSLFxuXTtcbmNsYXNzIE90aGVyS2V5QXR0cmlidXRlIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5rZXlBdHRySWQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBLRVlfQVRUUl9JRCwgT3RoZXJLZXlBdHRyaWJ1dGUuZGVmYXVsdFZhbHVlcyhLRVlfQVRUUl9JRCkpO1xuICAgICAgICBpZiAoS0VZX0FUVFIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5rZXlBdHRyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgS0VZX0FUVFIsIE90aGVyS2V5QXR0cmlidXRlLmRlZmF1bHRWYWx1ZXMoS0VZX0FUVFIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgS0VZX0FUVFJfSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgS0VZX0FUVFI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBLRVlfQVRUUl9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBtZW1iZXJWYWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiBtZW1iZXJWYWx1ZSA9PT0gRU1QVFlfU1RSSU5HKTtcbiAgICAgICAgICAgIGNhc2UgS0VZX0FUVFI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChPYmplY3Qua2V5cyhtZW1iZXJWYWx1ZSkubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG9wdGlvbmFsOiAobmFtZXMub3B0aW9uYWwgfHwgdHJ1ZSksXG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IG5hbWU6IChuYW1lcy5rZXlBdHRySWQgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkFueSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMua2V5QXR0ciB8fCBFTVBUWV9TVFJJTkcpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyR4KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBPdGhlcktleUF0dHJpYnV0ZS5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBrZXlBdHRySWQ6IEtFWV9BVFRSX0lELFxuICAgICAgICAgICAgICAgIGtleUF0dHI6IEtFWV9BVFRSXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5rZXlBdHRySWQgPSBhc24xLnJlc3VsdC5rZXlBdHRySWQudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICBpZiAoS0VZX0FUVFIgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMua2V5QXR0ciA9IGFzbjEucmVzdWx0LmtleUF0dHI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IHRoaXMua2V5QXR0cklkIH0pKTtcbiAgICAgICAgaWYgKEtFWV9BVFRSIGluIHRoaXMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5rZXlBdHRyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5LFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAga2V5QXR0cklkOiB0aGlzLmtleUF0dHJJZFxuICAgICAgICB9O1xuICAgICAgICBpZiAoS0VZX0FUVFIgaW4gdGhpcykge1xuICAgICAgICAgICAgcmVzLmtleUF0dHIgPSB0aGlzLmtleUF0dHIudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG5PdGhlcktleUF0dHJpYnV0ZS5DTEFTU19OQU1FID0gXCJPdGhlcktleUF0dHJpYnV0ZVwiO1xuXG5jb25zdCBTVUJKRUNUX0tFWV9JREVOVElGSUVSID0gXCJzdWJqZWN0S2V5SWRlbnRpZmllclwiO1xuY29uc3QgREFURSQxID0gXCJkYXRlXCI7XG5jb25zdCBPVEhFUiQxID0gXCJvdGhlclwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkdyA9IFtcbiAgICBTVUJKRUNUX0tFWV9JREVOVElGSUVSLFxuICAgIERBVEUkMSxcbiAgICBPVEhFUiQxLFxuXTtcbmNsYXNzIFJlY2lwaWVudEtleUlkZW50aWZpZXIgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN1YmplY3RLZXlJZGVudGlmaWVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU1VCSkVDVF9LRVlfSURFTlRJRklFUiwgUmVjaXBpZW50S2V5SWRlbnRpZmllci5kZWZhdWx0VmFsdWVzKFNVQkpFQ1RfS0VZX0lERU5USUZJRVIpKTtcbiAgICAgICAgaWYgKERBVEUkMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBEQVRFJDEsIFJlY2lwaWVudEtleUlkZW50aWZpZXIuZGVmYXVsdFZhbHVlcyhEQVRFJDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT1RIRVIkMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm90aGVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgT1RIRVIkMSwgUmVjaXBpZW50S2V5SWRlbnRpZmllci5kZWZhdWx0VmFsdWVzKE9USEVSJDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgU1VCSkVDVF9LRVlfSURFTlRJRklFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgY2FzZSBEQVRFJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuR2VuZXJhbGl6ZWRUaW1lKCk7XG4gICAgICAgICAgICBjYXNlIE9USEVSJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPdGhlcktleUF0dHJpYnV0ZSgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBTVUJKRUNUX0tFWV9JREVOVElGSUVSOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChSZWNpcGllbnRLZXlJZGVudGlmaWVyLmRlZmF1bHRWYWx1ZXMoU1VCSkVDVF9LRVlfSURFTlRJRklFUikpKTtcbiAgICAgICAgICAgIGNhc2UgREFURSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLnllYXIgPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5tb250aCA9PT0gMCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1lbWJlclZhbHVlLmRheSA9PT0gMCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1lbWJlclZhbHVlLmhvdXIgPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5taW51dGUgPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5zZWNvbmQgPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5taWxsaXNlY29uZCA9PT0gMCkpO1xuICAgICAgICAgICAgY2FzZSBPVEhFUiQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLmtleUF0dHJJZCA9PT0gRU1QVFlfU1RSSU5HKSAmJiAoKFwia2V5QXR0clwiIGluIG1lbWJlclZhbHVlKSA9PT0gZmFsc2UpKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IG5hbWU6IChuYW1lcy5zdWJqZWN0S2V5SWRlbnRpZmllciB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuR2VuZXJhbGl6ZWRUaW1lKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5kYXRlIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBPdGhlcktleUF0dHJpYnV0ZS5zY2hlbWEobmFtZXMub3RoZXIgfHwge30pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkdyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgUmVjaXBpZW50S2V5SWRlbnRpZmllci5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBzdWJqZWN0S2V5SWRlbnRpZmllcjogU1VCSkVDVF9LRVlfSURFTlRJRklFUixcbiAgICAgICAgICAgICAgICBkYXRlOiBEQVRFJDEsXG4gICAgICAgICAgICAgICAgb3RoZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogT1RIRVIkMVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuc3ViamVjdEtleUlkZW50aWZpZXIgPSBhc24xLnJlc3VsdC5zdWJqZWN0S2V5SWRlbnRpZmllcjtcbiAgICAgICAgaWYgKERBVEUkMSBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMuZGF0ZSA9IGFzbjEucmVzdWx0LmRhdGU7XG4gICAgICAgIGlmIChPVEhFUiQxIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5vdGhlciA9IG5ldyBPdGhlcktleUF0dHJpYnV0ZSh7IHNjaGVtYTogYXNuMS5yZXN1bHQub3RoZXIgfSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuc3ViamVjdEtleUlkZW50aWZpZXIpO1xuICAgICAgICBpZiAodGhpcy5kYXRlKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3RoZXIpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5vdGhlci50b1NjaGVtYSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICBzdWJqZWN0S2V5SWRlbnRpZmllcjogdGhpcy5zdWJqZWN0S2V5SWRlbnRpZmllci50b0pTT04oKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5kYXRlKSB7XG4gICAgICAgICAgICByZXMuZGF0ZSA9IHRoaXMuZGF0ZS50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vdGhlcikge1xuICAgICAgICAgICAgcmVzLm90aGVyID0gdGhpcy5vdGhlci50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cblJlY2lwaWVudEtleUlkZW50aWZpZXIuQ0xBU1NfTkFNRSA9IFwiUmVjaXBpZW50S2V5SWRlbnRpZmllclwiO1xuXG5jb25zdCBWQVJJQU5UJDEgPSBcInZhcmlhbnRcIjtcbmNvbnN0IFZBTFVFJDEgPSBcInZhbHVlXCI7XG5jb25zdCBDTEVBUl9QUk9QUyR2ID0gW1xuICAgIFwiYmxvY2tOYW1lXCIsXG5dO1xuY2xhc3MgS2V5QWdyZWVSZWNpcGllbnRJZGVudGlmaWVyIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52YXJpYW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkFSSUFOVCQxLCBLZXlBZ3JlZVJlY2lwaWVudElkZW50aWZpZXIuZGVmYXVsdFZhbHVlcyhWQVJJQU5UJDEpKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZBTFVFJDEsIEtleUFncmVlUmVjaXBpZW50SWRlbnRpZmllci5kZWZhdWx0VmFsdWVzKFZBTFVFJDEpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZBUklBTlQkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKC0xKTtcbiAgICAgICAgICAgIGNhc2UgVkFMVUUkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZBUklBTlQkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSAoLTEpKTtcbiAgICAgICAgICAgIGNhc2UgVkFMVUUkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKE9iamVjdC5rZXlzKG1lbWJlclZhbHVlKS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgSXNzdWVyQW5kU2VyaWFsTnVtYmVyLnNjaGVtYShuYW1lcy5pc3N1ZXJBbmRTZXJpYWxOdW1iZXIgfHwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBSZWNpcGllbnRLZXlJZGVudGlmaWVyLnNjaGVtYShuYW1lcy5yS2V5SWQgfHwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyR2KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBLZXlBZ3JlZVJlY2lwaWVudElkZW50aWZpZXIuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBcImJsb2NrTmFtZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKGFzbjEucmVzdWx0LmJsb2NrTmFtZS5pZEJsb2NrLnRhZ0NsYXNzID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnZhcmlhbnQgPSAxO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ldyBJc3N1ZXJBbmRTZXJpYWxOdW1iZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmJsb2NrTmFtZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmFyaWFudCA9IDI7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbmV3IFJlY2lwaWVudEtleUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgIHNjaGVtYTogbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhc24xLnJlc3VsdC5ibG9ja05hbWUudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnZhcmlhbnQpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS50b1NjaGVtYSgpO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWUudG9TY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLkFueSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgdmFyaWFudDogdGhpcy52YXJpYW50LFxuICAgICAgICB9O1xuICAgICAgICBpZiAoKHRoaXMudmFyaWFudCA9PT0gMSkgfHwgKHRoaXMudmFyaWFudCA9PT0gMikpIHtcbiAgICAgICAgICAgIHJlcy52YWx1ZSA9IHRoaXMudmFsdWUudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG5LZXlBZ3JlZVJlY2lwaWVudElkZW50aWZpZXIuQ0xBU1NfTkFNRSA9IFwiS2V5QWdyZWVSZWNpcGllbnRJZGVudGlmaWVyXCI7XG5cbmNvbnN0IFJJRCA9IFwicmlkXCI7XG5jb25zdCBFTkNSWVBURURfS0VZJDIgPSBcImVuY3J5cHRlZEtleVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkdSA9IFtcbiAgICBSSUQsXG4gICAgRU5DUllQVEVEX0tFWSQyLFxuXTtcbmNsYXNzIFJlY2lwaWVudEVuY3J5cHRlZEtleSBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmlkID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUklELCBSZWNpcGllbnRFbmNyeXB0ZWRLZXkuZGVmYXVsdFZhbHVlcyhSSUQpKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0ZWRLZXkgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFTkNSWVBURURfS0VZJDIsIFJlY2lwaWVudEVuY3J5cHRlZEtleS5kZWZhdWx0VmFsdWVzKEVOQ1JZUFRFRF9LRVkkMikpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgUklEOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgS2V5QWdyZWVSZWNpcGllbnRJZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRFRF9LRVkkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBSSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgobWVtYmVyVmFsdWUudmFyaWFudCA9PT0gKC0xKSkgJiYgKChcInZhbHVlXCIgaW4gbWVtYmVyVmFsdWUpID09PSBmYWxzZSkpO1xuICAgICAgICAgICAgY2FzZSBFTkNSWVBURURfS0VZJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5pc0VxdWFsKFJlY2lwaWVudEVuY3J5cHRlZEtleS5kZWZhdWx0VmFsdWVzKEVOQ1JZUFRFRF9LRVkkMikpKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgS2V5QWdyZWVSZWNpcGllbnRJZGVudGlmaWVyLnNjaGVtYShuYW1lcy5yaWQgfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuZW5jcnlwdGVkS2V5IHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyR1KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBSZWNpcGllbnRFbmNyeXB0ZWRLZXkuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgcmlkOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFJJRFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXk6IEVOQ1JZUFRFRF9LRVkkMlxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMucmlkID0gbmV3IEtleUFncmVlUmVjaXBpZW50SWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQucmlkIH0pO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZEtleSA9IGFzbjEucmVzdWx0LmVuY3J5cHRlZEtleTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIHRoaXMucmlkLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5lbmNyeXB0ZWRLZXlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByaWQ6IHRoaXMucmlkLnRvSlNPTigpLFxuICAgICAgICAgICAgZW5jcnlwdGVkS2V5OiB0aGlzLmVuY3J5cHRlZEtleS50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5SZWNpcGllbnRFbmNyeXB0ZWRLZXkuQ0xBU1NfTkFNRSA9IFwiUmVjaXBpZW50RW5jcnlwdGVkS2V5XCI7XG5cbmNvbnN0IEVOQ1JZUFRFRF9LRVlTID0gXCJlbmNyeXB0ZWRLZXlzXCI7XG5jb25zdCBSRUNJUElFTlRfRU5DUllQVEVEX0tFWVMgPSBcIlJlY2lwaWVudEVuY3J5cHRlZEtleXNcIjtcbmNvbnN0IENMRUFSX1BST1BTJHQgPSBbXG4gICAgUkVDSVBJRU5UX0VOQ1JZUFRFRF9LRVlTLFxuXTtcbmNsYXNzIFJlY2lwaWVudEVuY3J5cHRlZEtleXMgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZEtleXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFTkNSWVBURURfS0VZUywgUmVjaXBpZW50RW5jcnlwdGVkS2V5cy5kZWZhdWx0VmFsdWVzKEVOQ1JZUFRFRF9LRVlTKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBFTkNSWVBURURfS0VZUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRFRF9LRVlTOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5SZWNpcGllbnRFbmNyeXB0ZWRLZXlzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBSZWNpcGllbnRFbmNyeXB0ZWRLZXkuc2NoZW1hKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJHQpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFJlY2lwaWVudEVuY3J5cHRlZEtleXMuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgUmVjaXBpZW50RW5jcnlwdGVkS2V5czogUkVDSVBJRU5UX0VOQ1JZUFRFRF9LRVlTXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0ZWRLZXlzID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5SZWNpcGllbnRFbmNyeXB0ZWRLZXlzLCBlbGVtZW50ID0+IG5ldyBSZWNpcGllbnRFbmNyeXB0ZWRLZXkoeyBzY2hlbWE6IGVsZW1lbnQgfSkpO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuZW5jcnlwdGVkS2V5cywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZW5jcnlwdGVkS2V5czogQXJyYXkuZnJvbSh0aGlzLmVuY3J5cHRlZEtleXMsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5SZWNpcGllbnRFbmNyeXB0ZWRLZXlzLkNMQVNTX05BTUUgPSBcIlJlY2lwaWVudEVuY3J5cHRlZEtleXNcIjtcblxuY29uc3QgVkVSU0lPTiRiID0gXCJ2ZXJzaW9uXCI7XG5jb25zdCBPUklHSU5BVE9SID0gXCJvcmlnaW5hdG9yXCI7XG5jb25zdCBVS00gPSBcInVrbVwiO1xuY29uc3QgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDIgPSBcImtleUVuY3J5cHRpb25BbGdvcml0aG1cIjtcbmNvbnN0IFJFQ0lQSUVOVF9FTkNSWVBURURfS0VZID0gXCJyZWNpcGllbnRFbmNyeXB0ZWRLZXlzXCI7XG5jb25zdCBSRUNJUElFTlRfQ0VSVElGSUNBVEUgPSBcInJlY2lwaWVudENlcnRpZmljYXRlXCI7XG5jb25zdCBSRUNJUElFTlRfUFVCTElDX0tFWSA9IFwicmVjaXBpZW50UHVibGljS2V5XCI7XG5jb25zdCBDTEVBUl9QUk9QUyRzID0gW1xuICAgIFZFUlNJT04kYixcbiAgICBPUklHSU5BVE9SLFxuICAgIFVLTSxcbiAgICBLRVlfRU5DUllQVElPTl9BTEdPUklUSE0kMixcbiAgICBSRUNJUElFTlRfRU5DUllQVEVEX0tFWSxcbl07XG5jbGFzcyBLZXlBZ3JlZVJlY2lwaWVudEluZm8gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWRVJTSU9OJGIsIEtleUFncmVlUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFZFUlNJT04kYikpO1xuICAgICAgICB0aGlzLm9yaWdpbmF0b3IgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPUklHSU5BVE9SLCBLZXlBZ3JlZVJlY2lwaWVudEluZm8uZGVmYXVsdFZhbHVlcyhPUklHSU5BVE9SKSk7XG4gICAgICAgIGlmIChVS00gaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy51a20gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBVS00sIEtleUFncmVlUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFVLTSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMua2V5RW5jcnlwdGlvbkFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEtFWV9FTkNSWVBUSU9OX0FMR09SSVRITSQyLCBLZXlBZ3JlZVJlY2lwaWVudEluZm8uZGVmYXVsdFZhbHVlcyhLRVlfRU5DUllQVElPTl9BTEdPUklUSE0kMikpO1xuICAgICAgICB0aGlzLnJlY2lwaWVudEVuY3J5cHRlZEtleXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBSRUNJUElFTlRfRU5DUllQVEVEX0tFWSwgS2V5QWdyZWVSZWNpcGllbnRJbmZvLmRlZmF1bHRWYWx1ZXMoUkVDSVBJRU5UX0VOQ1JZUFRFRF9LRVkpKTtcbiAgICAgICAgdGhpcy5yZWNpcGllbnRDZXJ0aWZpY2F0ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFJFQ0lQSUVOVF9DRVJUSUZJQ0FURSwgS2V5QWdyZWVSZWNpcGllbnRJbmZvLmRlZmF1bHRWYWx1ZXMoUkVDSVBJRU5UX0NFUlRJRklDQVRFKSk7XG4gICAgICAgIHRoaXMucmVjaXBpZW50UHVibGljS2V5ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVDSVBJRU5UX1BVQkxJQ19LRVksIEtleUFncmVlUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFJFQ0lQSUVOVF9QVUJMSUNfS0VZKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJGI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIE9SSUdJTkFUT1I6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPcmlnaW5hdG9ySWRlbnRpZmllck9yS2V5KCk7XG4gICAgICAgICAgICBjYXNlIFVLTTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgY2FzZSBLRVlfRU5DUllQVElPTl9BTEdPUklUSE0kMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgUkVDSVBJRU5UX0VOQ1JZUFRFRF9LRVk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWNpcGllbnRFbmNyeXB0ZWRLZXlzKCk7XG4gICAgICAgICAgICBjYXNlIFJFQ0lQSUVOVF9DRVJUSUZJQ0FURTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENlcnRpZmljYXRlKCk7XG4gICAgICAgICAgICBjYXNlIFJFQ0lQSUVOVF9QVUJMSUNfS0VZOlxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJGI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gMCk7XG4gICAgICAgICAgICBjYXNlIE9SSUdJTkFUT1I6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgobWVtYmVyVmFsdWUudmFyaWFudCA9PT0gKC0xKSkgJiYgKChcInZhbHVlXCIgaW4gbWVtYmVyVmFsdWUpID09PSBmYWxzZSkpO1xuICAgICAgICAgICAgY2FzZSBVS006XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5pc0VxdWFsKEtleUFncmVlUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFVLTSkpKTtcbiAgICAgICAgICAgIGNhc2UgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgobWVtYmVyVmFsdWUuYWxnb3JpdGhtSWQgPT09IEVNUFRZX1NUUklORykgJiYgKChcImFsZ29yaXRobVBhcmFtc1wiIGluIG1lbWJlclZhbHVlKSA9PT0gZmFsc2UpKTtcbiAgICAgICAgICAgIGNhc2UgUkVDSVBJRU5UX0VOQ1JZUFRFRF9LRVk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5lbmNyeXB0ZWRLZXlzLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICBjYXNlIFJFQ0lQSUVOVF9DRVJUSUZJQ0FURTpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIFJFQ0lQSUVOVF9QVUJMSUNfS0VZOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcsXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IG5hbWVzLnZlcnNpb24gfHwgRU1QVFlfU1RSSU5HIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgT3JpZ2luYXRvcklkZW50aWZpZXJPcktleS5zY2hlbWEobmFtZXMub3JpZ2luYXRvciB8fCB7fSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgbmFtZTogbmFtZXMudWttIHx8IEVNUFRZX1NUUklORyB9KV1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBBbGdvcml0aG1JZGVudGlmaWVyLnNjaGVtYShuYW1lcy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtIHx8IHt9KSxcbiAgICAgICAgICAgICAgICBSZWNpcGllbnRFbmNyeXB0ZWRLZXlzLnNjaGVtYShuYW1lcy5yZWNpcGllbnRFbmNyeXB0ZWRLZXlzIHx8IHt9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJHMpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIEtleUFncmVlUmVjaXBpZW50SW5mby5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBWRVJTSU9OJGIsXG4gICAgICAgICAgICAgICAgb3JpZ2luYXRvcjoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBPUklHSU5BVE9SXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVrbTogVUtNLFxuICAgICAgICAgICAgICAgIGtleUVuY3J5cHRpb25BbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVjaXBpZW50RW5jcnlwdGVkS2V5czoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBSRUNJUElFTlRfRU5DUllQVEVEX0tFWVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGFzbjEucmVzdWx0LnZlcnNpb24udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgdGhpcy5vcmlnaW5hdG9yID0gbmV3IE9yaWdpbmF0b3JJZGVudGlmaWVyT3JLZXkoeyBzY2hlbWE6IGFzbjEucmVzdWx0Lm9yaWdpbmF0b3IgfSk7XG4gICAgICAgIGlmIChVS00gaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLnVrbSA9IGFzbjEucmVzdWx0LnVrbTtcbiAgICAgICAgdGhpcy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmtleUVuY3J5cHRpb25BbGdvcml0aG0gfSk7XG4gICAgICAgIHRoaXMucmVjaXBpZW50RW5jcnlwdGVkS2V5cyA9IG5ldyBSZWNpcGllbnRFbmNyeXB0ZWRLZXlzKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5yZWNpcGllbnRFbmNyeXB0ZWRLZXlzIH0pO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy52ZXJzaW9uIH0pKTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWx1ZTogW3RoaXMub3JpZ2luYXRvci50b1NjaGVtYSgpXVxuICAgICAgICB9KSk7XG4gICAgICAgIGlmICh0aGlzLnVrbSkge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbdGhpcy51a21dXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLmtleUVuY3J5cHRpb25BbGdvcml0aG0udG9TY2hlbWEoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5yZWNpcGllbnRFbmNyeXB0ZWRLZXlzLnRvU2NoZW1hKCkpO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICAgICAgICBvcmlnaW5hdG9yOiB0aGlzLm9yaWdpbmF0b3IudG9KU09OKCksXG4gICAgICAgICAgICBrZXlFbmNyeXB0aW9uQWxnb3JpdGhtOiB0aGlzLmtleUVuY3J5cHRpb25BbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICByZWNpcGllbnRFbmNyeXB0ZWRLZXlzOiB0aGlzLnJlY2lwaWVudEVuY3J5cHRlZEtleXMudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnVrbSkge1xuICAgICAgICAgICAgcmVzLnVrbSA9IHRoaXMudWttLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuS2V5QWdyZWVSZWNpcGllbnRJbmZvLkNMQVNTX05BTUUgPSBcIktleUFncmVlUmVjaXBpZW50SW5mb1wiO1xuXG5jb25zdCBLRVlfSURFTlRJRklFUiA9IFwia2V5SWRlbnRpZmllclwiO1xuY29uc3QgREFURSA9IFwiZGF0ZVwiO1xuY29uc3QgT1RIRVIgPSBcIm90aGVyXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRyID0gW1xuICAgIEtFWV9JREVOVElGSUVSLFxuICAgIERBVEUsXG4gICAgT1RIRVIsXG5dO1xuY2xhc3MgS0VLSWRlbnRpZmllciBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMua2V5SWRlbnRpZmllciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEtFWV9JREVOVElGSUVSLCBLRUtJZGVudGlmaWVyLmRlZmF1bHRWYWx1ZXMoS0VZX0lERU5USUZJRVIpKTtcbiAgICAgICAgaWYgKERBVEUgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5kYXRlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgREFURSwgS0VLSWRlbnRpZmllci5kZWZhdWx0VmFsdWVzKERBVEUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT1RIRVIgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5vdGhlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9USEVSLCBLRUtJZGVudGlmaWVyLmRlZmF1bHRWYWx1ZXMoT1RIRVIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgS0VZX0lERU5USUZJRVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgREFURTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoKTtcbiAgICAgICAgICAgIGNhc2UgT1RIRVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPdGhlcktleUF0dHJpYnV0ZSgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBLRVlfSURFTlRJRklFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmlzRXF1YWwoS0VLSWRlbnRpZmllci5kZWZhdWx0VmFsdWVzKEtFWV9JREVOVElGSUVSKSkpO1xuICAgICAgICAgICAgY2FzZSBEQVRFOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLnllYXIgPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5tb250aCA9PT0gMCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1lbWJlclZhbHVlLmRheSA9PT0gMCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1lbWJlclZhbHVlLmhvdXIgPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5taW51dGUgPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5zZWNvbmQgPT09IDApICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5taWxsaXNlY29uZCA9PT0gMCkpO1xuICAgICAgICAgICAgY2FzZSBPVEhFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChtZW1iZXJWYWx1ZS5jb21wYXJlV2l0aERlZmF1bHQoXCJrZXlBdHRySWRcIiwgbWVtYmVyVmFsdWUua2V5QXR0cklkKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKChcImtleUF0dHJcIiBpbiBtZW1iZXJWYWx1ZSkgPT09IGZhbHNlKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMua2V5SWRlbnRpZmllciB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuR2VuZXJhbGl6ZWRUaW1lKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5kYXRlIHx8IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBPdGhlcktleUF0dHJpYnV0ZS5zY2hlbWEobmFtZXMub3RoZXIgfHwge30pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkcik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgS0VLSWRlbnRpZmllci5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBrZXlJZGVudGlmaWVyOiBLRVlfSURFTlRJRklFUixcbiAgICAgICAgICAgICAgICBkYXRlOiBEQVRFLFxuICAgICAgICAgICAgICAgIG90aGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IE9USEVSXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5rZXlJZGVudGlmaWVyID0gYXNuMS5yZXN1bHQua2V5SWRlbnRpZmllcjtcbiAgICAgICAgaWYgKERBVEUgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLmRhdGUgPSBhc24xLnJlc3VsdC5kYXRlO1xuICAgICAgICBpZiAoT1RIRVIgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLm90aGVyID0gbmV3IE90aGVyS2V5QXR0cmlidXRlKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5vdGhlciB9KTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5rZXlJZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKHRoaXMuZGF0ZSkge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLmRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm90aGVyKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMub3RoZXIudG9TY2hlbWEoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAga2V5SWRlbnRpZmllcjogdGhpcy5rZXlJZGVudGlmaWVyLnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmRhdGUpIHtcbiAgICAgICAgICAgIHJlcy5kYXRlID0gdGhpcy5kYXRlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm90aGVyKSB7XG4gICAgICAgICAgICByZXMub3RoZXIgPSB0aGlzLm90aGVyLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuS0VLSWRlbnRpZmllci5DTEFTU19OQU1FID0gXCJLRUtJZGVudGlmaWVyXCI7XG5cbmNvbnN0IFZFUlNJT04kYSA9IFwidmVyc2lvblwiO1xuY29uc3QgS0VLX0lEID0gXCJrZWtpZFwiO1xuY29uc3QgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDEgPSBcImtleUVuY3J5cHRpb25BbGdvcml0aG1cIjtcbmNvbnN0IEVOQ1JZUFRFRF9LRVkkMSA9IFwiZW5jcnlwdGVkS2V5XCI7XG5jb25zdCBQRVJfREVGSU5FRF9LRUsgPSBcInByZURlZmluZWRLRUtcIjtcbmNvbnN0IENMRUFSX1BST1BTJHEgPSBbXG4gICAgVkVSU0lPTiRhLFxuICAgIEtFS19JRCxcbiAgICBLRVlfRU5DUllQVElPTl9BTEdPUklUSE0kMSxcbiAgICBFTkNSWVBURURfS0VZJDEsXG5dO1xuY2xhc3MgS0VLUmVjaXBpZW50SW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZFUlNJT04kYSwgS0VLUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFZFUlNJT04kYSkpO1xuICAgICAgICB0aGlzLmtla2lkID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgS0VLX0lELCBLRUtSZWNpcGllbnRJbmZvLmRlZmF1bHRWYWx1ZXMoS0VLX0lEKSk7XG4gICAgICAgIHRoaXMua2V5RW5jcnlwdGlvbkFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEtFWV9FTkNSWVBUSU9OX0FMR09SSVRITSQxLCBLRUtSZWNpcGllbnRJbmZvLmRlZmF1bHRWYWx1ZXMoS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDEpKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0ZWRLZXkgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFTkNSWVBURURfS0VZJDEsIEtFS1JlY2lwaWVudEluZm8uZGVmYXVsdFZhbHVlcyhFTkNSWVBURURfS0VZJDEpKTtcbiAgICAgICAgdGhpcy5wcmVEZWZpbmVkS0VLID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUEVSX0RFRklORURfS0VLLCBLRUtSZWNpcGllbnRJbmZvLmRlZmF1bHRWYWx1ZXMoUEVSX0RFRklORURfS0VLKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJGE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIEtFS19JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEtFS0lkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRFRF9LRVkkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgY2FzZSBQRVJfREVGSU5FRF9LRUs6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJLRUtSZWNpcGllbnRJbmZvXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gS0VLUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFZFUlNJT04kYSkpO1xuICAgICAgICAgICAgY2FzZSBLRUtfSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgobWVtYmVyVmFsdWUuY29tcGFyZVdpdGhEZWZhdWx0KFwia2V5SWRlbnRpZmllclwiLCBtZW1iZXJWYWx1ZS5rZXlJZGVudGlmaWVyKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKChcImRhdGVcIiBpbiBtZW1iZXJWYWx1ZSkgPT09IGZhbHNlKSAmJlxuICAgICAgICAgICAgICAgICAgICAoKFwib3RoZXJcIiBpbiBtZW1iZXJWYWx1ZSkgPT09IGZhbHNlKSk7XG4gICAgICAgICAgICBjYXNlIEtFWV9FTkNSWVBUSU9OX0FMR09SSVRITSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLmFsZ29yaXRobUlkID09PSBFTVBUWV9TVFJJTkcpICYmICgoXCJhbGdvcml0aG1QYXJhbXNcIiBpbiBtZW1iZXJWYWx1ZSkgPT09IGZhbHNlKSk7XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRFRF9LRVkkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmlzRXF1YWwoS0VLUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKEVOQ1JZUFRFRF9LRVkkMSkpKTtcbiAgICAgICAgICAgIGNhc2UgUEVSX0RFRklORURfS0VLOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuYnl0ZUxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy52ZXJzaW9uIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgS0VLSWRlbnRpZmllci5zY2hlbWEobmFtZXMua2VraWQgfHwge30pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmtleUVuY3J5cHRpb25BbGdvcml0aG0gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuZW5jcnlwdGVkS2V5IHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRxKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBLRUtSZWNpcGllbnRJbmZvLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHZlcnNpb246IFZFUlNJT04kYSxcbiAgICAgICAgICAgICAgICBrZWtpZDoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBLRUtfSURcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAga2V5RW5jcnlwdGlvbkFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBLRVlfRU5DUllQVElPTl9BTEdPUklUSE0kMVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXk6IEVOQ1JZUFRFRF9LRVkkMVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGFzbjEucmVzdWx0LnZlcnNpb24udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgdGhpcy5rZWtpZCA9IG5ldyBLRUtJZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5rZWtpZCB9KTtcbiAgICAgICAgdGhpcy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmtleUVuY3J5cHRpb25BbGdvcml0aG0gfSk7XG4gICAgICAgIHRoaXMuZW5jcnlwdGVkS2V5ID0gYXNuMS5yZXN1bHQuZW5jcnlwdGVkS2V5O1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLmtla2lkLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5lbmNyeXB0ZWRLZXlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICAgICAgICBrZWtpZDogdGhpcy5rZWtpZC50b0pTT04oKSxcbiAgICAgICAgICAgIGtleUVuY3J5cHRpb25BbGdvcml0aG06IHRoaXMua2V5RW5jcnlwdGlvbkFsZ29yaXRobS50b0pTT04oKSxcbiAgICAgICAgICAgIGVuY3J5cHRlZEtleTogdGhpcy5lbmNyeXB0ZWRLZXkudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuS0VLUmVjaXBpZW50SW5mby5DTEFTU19OQU1FID0gXCJLRUtSZWNpcGllbnRJbmZvXCI7XG5cbmNvbnN0IFZFUlNJT04kOSA9IFwidmVyc2lvblwiO1xuY29uc3QgS0VZX0RFUklWQVRJT05fQUxHT1JJVEhNID0gXCJrZXlEZXJpdmF0aW9uQWxnb3JpdGhtXCI7XG5jb25zdCBLRVlfRU5DUllQVElPTl9BTEdPUklUSE0gPSBcImtleUVuY3J5cHRpb25BbGdvcml0aG1cIjtcbmNvbnN0IEVOQ1JZUFRFRF9LRVkgPSBcImVuY3J5cHRlZEtleVwiO1xuY29uc3QgUEFTU1dPUkQgPSBcInBhc3N3b3JkXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRwID0gW1xuICAgIFZFUlNJT04kOSxcbiAgICBLRVlfREVSSVZBVElPTl9BTEdPUklUSE0sXG4gICAgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNLFxuICAgIEVOQ1JZUFRFRF9LRVlcbl07XG5jbGFzcyBQYXNzd29yZFJlY2lwaWVudGluZm8gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWRVJTSU9OJDksIFBhc3N3b3JkUmVjaXBpZW50aW5mby5kZWZhdWx0VmFsdWVzKFZFUlNJT04kOSkpO1xuICAgICAgICBpZiAoS0VZX0RFUklWQVRJT05fQUxHT1JJVEhNIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMua2V5RGVyaXZhdGlvbkFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEtFWV9ERVJJVkFUSU9OX0FMR09SSVRITSwgUGFzc3dvcmRSZWNpcGllbnRpbmZvLmRlZmF1bHRWYWx1ZXMoS0VZX0RFUklWQVRJT05fQUxHT1JJVEhNKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgS0VZX0VOQ1JZUFRJT05fQUxHT1JJVEhNLCBQYXNzd29yZFJlY2lwaWVudGluZm8uZGVmYXVsdFZhbHVlcyhLRVlfRU5DUllQVElPTl9BTEdPUklUSE0pKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0ZWRLZXkgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFTkNSWVBURURfS0VZLCBQYXNzd29yZFJlY2lwaWVudGluZm8uZGVmYXVsdFZhbHVlcyhFTkNSWVBURURfS0VZKSk7XG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQQVNTV09SRCwgUGFzc3dvcmRSZWNpcGllbnRpbmZvLmRlZmF1bHRWYWx1ZXMoUEFTU1dPUkQpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kOTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKC0xKTtcbiAgICAgICAgICAgIGNhc2UgS0VZX0RFUklWQVRJT05fQUxHT1JJVEhNOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcigpO1xuICAgICAgICAgICAgY2FzZSBLRVlfRU5DUllQVElPTl9BTEdPUklUSE06XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIEVOQ1JZUFRFRF9LRVk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgUEFTU1dPUkQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiQ5OlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09ICgtMSkpO1xuICAgICAgICAgICAgY2FzZSBLRVlfREVSSVZBVElPTl9BTEdPUklUSE06XG4gICAgICAgICAgICBjYXNlIEtFWV9FTkNSWVBUSU9OX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChtZW1iZXJWYWx1ZS5hbGdvcml0aG1JZCA9PT0gRU1QVFlfU1RSSU5HKSAmJiAoKFwiYWxnb3JpdGhtUGFyYW1zXCIgaW4gbWVtYmVyVmFsdWUpID09PSBmYWxzZSkpO1xuICAgICAgICAgICAgY2FzZSBFTkNSWVBURURfS0VZOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChQYXNzd29yZFJlY2lwaWVudGluZm8uZGVmYXVsdFZhbHVlcyhFTkNSWVBURURfS0VZKSkpO1xuICAgICAgICAgICAgY2FzZSBQQVNTV09SRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmJ5dGVMZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMudmVyc2lvbiB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMua2V5RGVyaXZhdGlvbkFsZ29yaXRobSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmtleUVuY3J5cHRpb25BbGdvcml0aG0gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuZW5jcnlwdGVkS2V5IHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRwKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBQYXNzd29yZFJlY2lwaWVudGluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogVkVSU0lPTiQ5LFxuICAgICAgICAgICAgICAgIGtleURlcml2YXRpb25BbGdvcml0aG06IEtFWV9ERVJJVkFUSU9OX0FMR09SSVRITSxcbiAgICAgICAgICAgICAgICBrZXlFbmNyeXB0aW9uQWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEtFWV9FTkNSWVBUSU9OX0FMR09SSVRITVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRLZXk6IEVOQ1JZUFRFRF9LRVlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBhc24xLnJlc3VsdC52ZXJzaW9uLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIGlmIChLRVlfREVSSVZBVElPTl9BTEdPUklUSE0gaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMua2V5RGVyaXZhdGlvbkFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXNuMS5yZXN1bHQua2V5RGVyaXZhdGlvbkFsZ29yaXRobS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMua2V5RW5jcnlwdGlvbkFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtIH0pO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZEtleSA9IGFzbjEucmVzdWx0LmVuY3J5cHRlZEtleTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KSk7XG4gICAgICAgIGlmICh0aGlzLmtleURlcml2YXRpb25BbGdvcml0aG0pIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5rZXlEZXJpdmF0aW9uQWxnb3JpdGhtLnRvU2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLnRvU2NoZW1hKCkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuZW5jcnlwdGVkS2V5KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uLFxuICAgICAgICAgICAga2V5RW5jcnlwdGlvbkFsZ29yaXRobTogdGhpcy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgZW5jcnlwdGVkS2V5OiB0aGlzLmVuY3J5cHRlZEtleS50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMua2V5RGVyaXZhdGlvbkFsZ29yaXRobSkge1xuICAgICAgICAgICAgcmVzLmtleURlcml2YXRpb25BbGdvcml0aG0gPSB0aGlzLmtleURlcml2YXRpb25BbGdvcml0aG0udG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG5QYXNzd29yZFJlY2lwaWVudGluZm8uQ0xBU1NfTkFNRSA9IFwiUGFzc3dvcmRSZWNpcGllbnRJbmZvXCI7XG5cbmNvbnN0IE9SSV9UWVBFID0gXCJvcmlUeXBlXCI7XG5jb25zdCBPUklfVkFMVUUgPSBcIm9yaVZhbHVlXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRvID0gW1xuICAgIE9SSV9UWVBFLFxuICAgIE9SSV9WQUxVRVxuXTtcbmNsYXNzIE90aGVyUmVjaXBpZW50SW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMub3JpVHlwZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9SSV9UWVBFLCBPdGhlclJlY2lwaWVudEluZm8uZGVmYXVsdFZhbHVlcyhPUklfVFlQRSkpO1xuICAgICAgICB0aGlzLm9yaVZhbHVlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgT1JJX1ZBTFVFLCBPdGhlclJlY2lwaWVudEluZm8uZGVmYXVsdFZhbHVlcyhPUklfVkFMVUUpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIE9SSV9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjYXNlIE9SSV9WQUxVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIE9SSV9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IEVNUFRZX1NUUklORyk7XG4gICAgICAgICAgICBjYXNlIE9SSV9WQUxVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKE9iamVjdC5rZXlzKG1lbWJlclZhbHVlKS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyBuYW1lOiAobmFtZXMub3JpVHlwZSB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQW55KHsgbmFtZTogKG5hbWVzLm9yaVZhbHVlIHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRvKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBPdGhlclJlY2lwaWVudEluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgb3JpVHlwZTogT1JJX1RZUEUsXG4gICAgICAgICAgICAgICAgb3JpVmFsdWU6IE9SSV9WQUxVRVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMub3JpVHlwZSA9IGFzbjEucmVzdWx0Lm9yaVR5cGUudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICB0aGlzLm9yaVZhbHVlID0gYXNuMS5yZXN1bHQub3JpVmFsdWU7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5vcmlUeXBlIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMub3JpVmFsdWVcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIG9yaVR5cGU6IHRoaXMub3JpVHlwZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoIU90aGVyUmVjaXBpZW50SW5mby5jb21wYXJlV2l0aERlZmF1bHQoT1JJX1ZBTFVFLCB0aGlzLm9yaVZhbHVlKSkge1xuICAgICAgICAgICAgcmVzLm9yaVZhbHVlID0gdGhpcy5vcmlWYWx1ZS50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cbk90aGVyUmVjaXBpZW50SW5mby5DTEFTU19OQU1FID0gXCJPdGhlclJlY2lwaWVudEluZm9cIjtcblxuY29uc3QgVkFSSUFOVCA9IFwidmFyaWFudFwiO1xuY29uc3QgVkFMVUUgPSBcInZhbHVlXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRuID0gW1xuICAgIFwiYmxvY2tOYW1lXCJcbl07XG5jbGFzcyBSZWNpcGllbnRJbmZvIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52YXJpYW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkFSSUFOVCwgUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFZBUklBTlQpKTtcbiAgICAgICAgaWYgKFZBTFVFIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWQUxVRSwgUmVjaXBpZW50SW5mby5kZWZhdWx0VmFsdWVzKFZBTFVFKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZBUklBTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgtMSk7XG4gICAgICAgICAgICBjYXNlIFZBTFVFOlxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkFSSUFOVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSBSZWNpcGllbnRJbmZvLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpO1xuICAgICAgICAgICAgY2FzZSBWQUxVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKE9iamVjdC5rZXlzKG1lbWJlclZhbHVlKS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuQ2hvaWNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgS2V5VHJhbnNSZWNpcGllbnRJbmZvLnNjaGVtYSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEtleUFncmVlUmVjaXBpZW50SW5mby5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEtFS1JlY2lwaWVudEluZm8uc2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAzXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBQYXNzd29yZFJlY2lwaWVudGluZm8uc2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiA0XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBPdGhlclJlY2lwaWVudEluZm8uc2NoZW1hKCkudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkbik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgUmVjaXBpZW50SW5mby5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBibG9ja05hbWU6IFwiYmxvY2tOYW1lXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICBpZiAoYXNuMS5yZXN1bHQuYmxvY2tOYW1lLmlkQmxvY2sudGFnQ2xhc3MgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMudmFyaWFudCA9IDE7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbmV3IEtleVRyYW5zUmVjaXBpZW50SW5mbyh7IHNjaGVtYTogYXNuMS5yZXN1bHQuYmxvY2tOYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYmxvY2tTZXF1ZW5jZSA9IG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBhc24xLnJlc3VsdC5ibG9ja05hbWUudmFsdWVCbG9jay52YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGFzbjEucmVzdWx0LmJsb2NrTmFtZS5pZEJsb2NrLnRhZ051bWJlcikge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YXJpYW50ID0gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ldyBLZXlBZ3JlZVJlY2lwaWVudEluZm8oeyBzY2hlbWE6IGJsb2NrU2VxdWVuY2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YXJpYW50ID0gMztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ldyBLRUtSZWNpcGllbnRJbmZvKHsgc2NoZW1hOiBibG9ja1NlcXVlbmNlIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFyaWFudCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXcgUGFzc3dvcmRSZWNpcGllbnRpbmZvKHsgc2NoZW1hOiBibG9ja1NlcXVlbmNlIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFyaWFudCA9IDU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXcgT3RoZXJSZWNpcGllbnRJbmZvKHsgc2NoZW1hOiBibG9ja1NlcXVlbmNlIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3Qgc3RydWN0dXJlIG9mIFJlY2lwaWVudEluZm8gYmxvY2tcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIFBhcmFtZXRlckVycm9yLmFzc2VydEVtcHR5KHRoaXMudmFsdWUsIFwidmFsdWVcIiwgXCJSZWNpcGllbnRJbmZvXCIpO1xuICAgICAgICBjb25zdCBfc2NoZW1hID0gdGhpcy52YWx1ZS50b1NjaGVtYSgpO1xuICAgICAgICBzd2l0Y2ggKHRoaXMudmFyaWFudCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBfc2NoZW1hO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIF9zY2hlbWEuaWRCbG9jay50YWdDbGFzcyA9IDM7XG4gICAgICAgICAgICAgICAgX3NjaGVtYS5pZEJsb2NrLnRhZ051bWJlciA9ICh0aGlzLnZhcmlhbnQgLSAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3NjaGVtYTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQW55KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICB2YXJpYW50OiB0aGlzLnZhcmlhbnRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgJiYgKHRoaXMudmFyaWFudCA+PSAxKSAmJiAodGhpcy52YXJpYW50IDw9IDQpKSB7XG4gICAgICAgICAgICByZXMudmFsdWUgPSB0aGlzLnZhbHVlLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuUmVjaXBpZW50SW5mby5DTEFTU19OQU1FID0gXCJSZWNpcGllbnRJbmZvXCI7XG5cbmNvbnN0IEhBU0hfQUxHT1JJVEhNJDIgPSBcImhhc2hBbGdvcml0aG1cIjtcbmNvbnN0IE1BU0tfR0VOX0FMR09SSVRITSA9IFwibWFza0dlbkFsZ29yaXRobVwiO1xuY29uc3QgUF9TT1VSQ0VfQUxHT1JJVEhNID0gXCJwU291cmNlQWxnb3JpdGhtXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRtID0gW1xuICAgIEhBU0hfQUxHT1JJVEhNJDIsXG4gICAgTUFTS19HRU5fQUxHT1JJVEhNLFxuICAgIFBfU09VUkNFX0FMR09SSVRITVxuXTtcbmNsYXNzIFJTQUVTT0FFUFBhcmFtcyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaGFzaEFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEhBU0hfQUxHT1JJVEhNJDIsIFJTQUVTT0FFUFBhcmFtcy5kZWZhdWx0VmFsdWVzKEhBU0hfQUxHT1JJVEhNJDIpKTtcbiAgICAgICAgdGhpcy5tYXNrR2VuQWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTUFTS19HRU5fQUxHT1JJVEhNLCBSU0FFU09BRVBQYXJhbXMuZGVmYXVsdFZhbHVlcyhNQVNLX0dFTl9BTEdPUklUSE0pKTtcbiAgICAgICAgdGhpcy5wU291cmNlQWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUF9TT1VSQ0VfQUxHT1JJVEhNLCBSU0FFU09BRVBQYXJhbXMuZGVmYXVsdFZhbHVlcyhQX1NPVVJDRV9BTEdPUklUSE0pKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEhBU0hfQUxHT1JJVEhNJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IFwiMS4zLjE0LjMuMi4yNlwiLFxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuTnVsbCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXNlIE1BU0tfR0VOX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogXCIxLjIuODQwLjExMzU0OS4xLjEuOFwiLFxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IChuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogXCIxLjMuMTQuMy4yLjI2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuTnVsbCgpXG4gICAgICAgICAgICAgICAgICAgIH0pKS50b1NjaGVtYSgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXNlIFBfU09VUkNFX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogXCIxLjIuODQwLjExMzU0OS4xLjEuOVwiLFxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogKG5ldyBVaW50OEFycmF5KFsweGRhLCAweDM5LCAweGEzLCAweGVlLCAweDVlLCAweDZiLCAweDRiLCAweDBkLCAweDMyLCAweDU1LCAweGJmLCAweGVmLCAweDk1LCAweDYwLCAweDE4LCAweDkwLCAweGFmLCAweGQ4LCAweDA3LCAweDA5XSkpLmJ1ZmZlciB9KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEobmFtZXMuaGFzaEFsZ29yaXRobSB8fCB7fSldXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW0FsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLm1hc2tHZW5BbGdvcml0aG0gfHwge30pXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtBbGdvcml0aG1JZGVudGlmaWVyLnNjaGVtYShuYW1lcy5wU291cmNlQWxnb3JpdGhtIHx8IHt9KV1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJG0pO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFJTQUVTT0FFUFBhcmFtcy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBoYXNoQWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEhBU0hfQUxHT1JJVEhNJDJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWFza0dlbkFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBNQVNLX0dFTl9BTEdPUklUSE1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcFNvdXJjZUFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBQX1NPVVJDRV9BTEdPUklUSE1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICBpZiAoSEFTSF9BTEdPUklUSE0kMiBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMuaGFzaEFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5oYXNoQWxnb3JpdGhtIH0pO1xuICAgICAgICBpZiAoTUFTS19HRU5fQUxHT1JJVEhNIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5tYXNrR2VuQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0Lm1hc2tHZW5BbGdvcml0aG0gfSk7XG4gICAgICAgIGlmIChQX1NPVVJDRV9BTEdPUklUSE0gaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLnBTb3VyY2VBbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQucFNvdXJjZUFsZ29yaXRobSB9KTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIGlmICghdGhpcy5oYXNoQWxnb3JpdGhtLmlzRXF1YWwoUlNBRVNPQUVQUGFyYW1zLmRlZmF1bHRWYWx1ZXMoSEFTSF9BTEdPUklUSE0kMikpKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFt0aGlzLmhhc2hBbGdvcml0aG0udG9TY2hlbWEoKV1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubWFza0dlbkFsZ29yaXRobS5pc0VxdWFsKFJTQUVTT0FFUFBhcmFtcy5kZWZhdWx0VmFsdWVzKE1BU0tfR0VOX0FMR09SSVRITSkpKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFt0aGlzLm1hc2tHZW5BbGdvcml0aG0udG9TY2hlbWEoKV1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucFNvdXJjZUFsZ29yaXRobS5pc0VxdWFsKFJTQUVTT0FFUFBhcmFtcy5kZWZhdWx0VmFsdWVzKFBfU09VUkNFX0FMR09SSVRITSkpKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFt0aGlzLnBTb3VyY2VBbGdvcml0aG0udG9TY2hlbWEoKV1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7fTtcbiAgICAgICAgaWYgKCF0aGlzLmhhc2hBbGdvcml0aG0uaXNFcXVhbChSU0FFU09BRVBQYXJhbXMuZGVmYXVsdFZhbHVlcyhIQVNIX0FMR09SSVRITSQyKSkpIHtcbiAgICAgICAgICAgIHJlcy5oYXNoQWxnb3JpdGhtID0gdGhpcy5oYXNoQWxnb3JpdGhtLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5tYXNrR2VuQWxnb3JpdGhtLmlzRXF1YWwoUlNBRVNPQUVQUGFyYW1zLmRlZmF1bHRWYWx1ZXMoTUFTS19HRU5fQUxHT1JJVEhNKSkpIHtcbiAgICAgICAgICAgIHJlcy5tYXNrR2VuQWxnb3JpdGhtID0gdGhpcy5tYXNrR2VuQWxnb3JpdGhtLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5wU291cmNlQWxnb3JpdGhtLmlzRXF1YWwoUlNBRVNPQUVQUGFyYW1zLmRlZmF1bHRWYWx1ZXMoUF9TT1VSQ0VfQUxHT1JJVEhNKSkpIHtcbiAgICAgICAgICAgIHJlcy5wU291cmNlQWxnb3JpdGhtID0gdGhpcy5wU291cmNlQWxnb3JpdGhtLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuUlNBRVNPQUVQUGFyYW1zLkNMQVNTX05BTUUgPSBcIlJTQUVTT0FFUFBhcmFtc1wiO1xuXG5jb25zdCBLRVlfSU5GTyA9IFwia2V5SW5mb1wiO1xuY29uc3QgRU5USVRZX1VfSU5GTyA9IFwiZW50aXR5VUluZm9cIjtcbmNvbnN0IFNVUFBfUFVCX0lORk8gPSBcInN1cHBQdWJJbmZvXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRsID0gW1xuICAgIEtFWV9JTkZPLFxuICAgIEVOVElUWV9VX0lORk8sXG4gICAgU1VQUF9QVUJfSU5GT1xuXTtcbmNsYXNzIEVDQ0NNU1NoYXJlZEluZm8gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmtleUluZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBLRVlfSU5GTywgRUNDQ01TU2hhcmVkSW5mby5kZWZhdWx0VmFsdWVzKEtFWV9JTkZPKSk7XG4gICAgICAgIGlmIChFTlRJVFlfVV9JTkZPIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5VUluZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFTlRJVFlfVV9JTkZPLCBFQ0NDTVNTaGFyZWRJbmZvLmRlZmF1bHRWYWx1ZXMoRU5USVRZX1VfSU5GTykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3VwcFB1YkluZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTVVBQX1BVQl9JTkZPLCBFQ0NDTVNTaGFyZWRJbmZvLmRlZmF1bHRWYWx1ZXMoU1VQUF9QVUJfSU5GTykpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgS0VZX0lORk86XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIEVOVElUWV9VX0lORk86XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgU1VQUF9QVUJfSU5GTzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBLRVlfSU5GTzpcbiAgICAgICAgICAgIGNhc2UgRU5USVRZX1VfSU5GTzpcbiAgICAgICAgICAgIGNhc2UgU1VQUF9QVUJfSU5GTzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmlzRXF1YWwoRUNDQ01TU2hhcmVkSW5mby5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmtleUluZm8gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuZW50aXR5VUluZm8gfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5PY3RldFN0cmluZygpXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuc3VwcFB1YkluZm8gfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKCldXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRsKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBFQ0NDTVNTaGFyZWRJbmZvLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGtleUluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogS0VZX0lORk9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW50aXR5VUluZm86IEVOVElUWV9VX0lORk8sXG4gICAgICAgICAgICAgICAgc3VwcFB1YkluZm86IFNVUFBfUFVCX0lORk9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmtleUluZm8gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQua2V5SW5mbyB9KTtcbiAgICAgICAgaWYgKEVOVElUWV9VX0lORk8gaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLmVudGl0eVVJbmZvID0gYXNuMS5yZXN1bHQuZW50aXR5VUluZm8udmFsdWVCbG9jay52YWx1ZVswXTtcbiAgICAgICAgdGhpcy5zdXBwUHViSW5mbyA9IGFzbjEucmVzdWx0LnN1cHBQdWJJbmZvLnZhbHVlQmxvY2sudmFsdWVbMF07XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMua2V5SW5mby50b1NjaGVtYSgpKTtcbiAgICAgICAgaWYgKHRoaXMuZW50aXR5VUluZm8pIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW3RoaXMuZW50aXR5VUluZm9dXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWx1ZTogW3RoaXMuc3VwcFB1YkluZm9dXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIGtleUluZm86IHRoaXMua2V5SW5mby50b0pTT04oKSxcbiAgICAgICAgICAgIHN1cHBQdWJJbmZvOiB0aGlzLnN1cHBQdWJJbmZvLnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5lbnRpdHlVSW5mbykge1xuICAgICAgICAgICAgcmVzLmVudGl0eVVJbmZvID0gdGhpcy5lbnRpdHlVSW5mby50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cbkVDQ0NNU1NoYXJlZEluZm8uQ0xBU1NfTkFNRSA9IFwiRUNDQ01TU2hhcmVkSW5mb1wiO1xuXG5jb25zdCBWRVJTSU9OJDggPSBcInZlcnNpb25cIjtcbmNvbnN0IE9SSUdJTkFUT1JfSU5GTyA9IFwib3JpZ2luYXRvckluZm9cIjtcbmNvbnN0IFJFQ0lQSUVOVF9JTkZPUyA9IFwicmVjaXBpZW50SW5mb3NcIjtcbmNvbnN0IEVOQ1JZUFRFRF9DT05URU5UX0lORk8gPSBcImVuY3J5cHRlZENvbnRlbnRJbmZvXCI7XG5jb25zdCBVTlBST1RFQ1RFRF9BVFRSUyA9IFwidW5wcm90ZWN0ZWRBdHRyc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkayA9IFtcbiAgICBWRVJTSU9OJDgsXG4gICAgT1JJR0lOQVRPUl9JTkZPLFxuICAgIFJFQ0lQSUVOVF9JTkZPUyxcbiAgICBFTkNSWVBURURfQ09OVEVOVF9JTkZPLFxuICAgIFVOUFJPVEVDVEVEX0FUVFJTXG5dO1xuY29uc3QgZGVmYXVsdEVuY3J5cHRpb25QYXJhbXMgPSB7XG4gICAga2RmQWxnb3JpdGhtOiBcIlNIQS01MTJcIixcbiAgICBrZWtFbmNyeXB0aW9uTGVuZ3RoOiAyNTZcbn07XG5jb25zdCBjdXJ2ZUxlbmd0aEJ5TmFtZSA9IHtcbiAgICBcIlAtMjU2XCI6IDI1NixcbiAgICBcIlAtMzg0XCI6IDM4NCxcbiAgICBcIlAtNTIxXCI6IDUyOFxufTtcbmNsYXNzIEVudmVsb3BlZERhdGEgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWRVJTSU9OJDgsIEVudmVsb3BlZERhdGEuZGVmYXVsdFZhbHVlcyhWRVJTSU9OJDgpKTtcbiAgICAgICAgaWYgKE9SSUdJTkFUT1JfSU5GTyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmF0b3JJbmZvID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgT1JJR0lOQVRPUl9JTkZPLCBFbnZlbG9wZWREYXRhLmRlZmF1bHRWYWx1ZXMoT1JJR0lOQVRPUl9JTkZPKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWNpcGllbnRJbmZvcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFJFQ0lQSUVOVF9JTkZPUywgRW52ZWxvcGVkRGF0YS5kZWZhdWx0VmFsdWVzKFJFQ0lQSUVOVF9JTkZPUykpO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZENvbnRlbnRJbmZvID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRU5DUllQVEVEX0NPTlRFTlRfSU5GTywgRW52ZWxvcGVkRGF0YS5kZWZhdWx0VmFsdWVzKEVOQ1JZUFRFRF9DT05URU5UX0lORk8pKTtcbiAgICAgICAgaWYgKFVOUFJPVEVDVEVEX0FUVFJTIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMudW5wcm90ZWN0ZWRBdHRycyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFVOUFJPVEVDVEVEX0FUVFJTLCBFbnZlbG9wZWREYXRhLmRlZmF1bHRWYWx1ZXMoVU5QUk9URUNURURfQVRUUlMpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvbGljeSA9IHtcbiAgICAgICAgICAgIGRpc2FibGVTcGxpdDogISFwYXJhbWV0ZXJzLmRpc2FibGVTcGxpdCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kODpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgT1JJR0lOQVRPUl9JTkZPOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT3JpZ2luYXRvckluZm8oKTtcbiAgICAgICAgICAgIGNhc2UgUkVDSVBJRU5UX0lORk9TOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNhc2UgRU5DUllQVEVEX0NPTlRFTlRfSU5GTzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVuY3J5cHRlZENvbnRlbnRJbmZvKCk7XG4gICAgICAgICAgICBjYXNlIFVOUFJPVEVDVEVEX0FUVFJTOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiQ4OlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IEVudmVsb3BlZERhdGEuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSk7XG4gICAgICAgICAgICBjYXNlIE9SSUdJTkFUT1JfSU5GTzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChtZW1iZXJWYWx1ZS5jZXJ0cy5jZXJ0aWZpY2F0ZXMubGVuZ3RoID09PSAwKSAmJiAobWVtYmVyVmFsdWUuY3Jscy5jcmxzLmxlbmd0aCA9PT0gMCkpO1xuICAgICAgICAgICAgY2FzZSBSRUNJUElFTlRfSU5GT1M6XG4gICAgICAgICAgICBjYXNlIFVOUFJPVEVDVEVEX0FUVFJTOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGNhc2UgRU5DUllQVEVEX0NPTlRFTlRfSU5GTzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChFbmNyeXB0ZWRDb250ZW50SW5mby5jb21wYXJlV2l0aERlZmF1bHQoXCJjb250ZW50VHlwZVwiLCBtZW1iZXJWYWx1ZS5jb250ZW50VHlwZSkpICYmXG4gICAgICAgICAgICAgICAgICAgIChFbmNyeXB0ZWRDb250ZW50SW5mby5jb21wYXJlV2l0aERlZmF1bHQoXCJjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobVwiLCBtZW1iZXJWYWx1ZS5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChFbmNyeXB0ZWRDb250ZW50SW5mby5jb21wYXJlV2l0aERlZmF1bHQoXCJlbmNyeXB0ZWRDb250ZW50XCIsIG1lbWJlclZhbHVlLmVuY3J5cHRlZENvbnRlbnQpKSkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMudmVyc2lvbiB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMub3JpZ2luYXRvckluZm8gfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBPcmlnaW5hdG9ySW5mby5zY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXQoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLnJlY2lwaWVudEluZm9zIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFJlY2lwaWVudEluZm8uc2NoZW1hKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBFbmNyeXB0ZWRDb250ZW50SW5mby5zY2hlbWEobmFtZXMuZW5jcnlwdGVkQ29udGVudEluZm8gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy51bnByb3RlY3RlZEF0dHJzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEF0dHJpYnV0ZS5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkayk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgRW52ZWxvcGVkRGF0YS5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBWRVJTSU9OJDgsXG4gICAgICAgICAgICAgICAgb3JpZ2luYXRvckluZm86IE9SSUdJTkFUT1JfSU5GTyxcbiAgICAgICAgICAgICAgICByZWNpcGllbnRJbmZvczogUkVDSVBJRU5UX0lORk9TLFxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZENvbnRlbnRJbmZvOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEVOQ1JZUFRFRF9DT05URU5UX0lORk9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdW5wcm90ZWN0ZWRBdHRyczogVU5QUk9URUNURURfQVRUUlNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBhc24xLnJlc3VsdC52ZXJzaW9uLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIGlmIChPUklHSU5BVE9SX0lORk8gaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYXRvckluZm8gPSBuZXcgT3JpZ2luYXRvckluZm8oe1xuICAgICAgICAgICAgICAgIHNjaGVtYTogbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhc24xLnJlc3VsdC5vcmlnaW5hdG9ySW5mby52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVjaXBpZW50SW5mb3MgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LnJlY2lwaWVudEluZm9zLCBvID0+IG5ldyBSZWNpcGllbnRJbmZvKHsgc2NoZW1hOiBvIH0pKTtcbiAgICAgICAgdGhpcy5lbmNyeXB0ZWRDb250ZW50SW5mbyA9IG5ldyBFbmNyeXB0ZWRDb250ZW50SW5mbyh7IHNjaGVtYTogYXNuMS5yZXN1bHQuZW5jcnlwdGVkQ29udGVudEluZm8gfSk7XG4gICAgICAgIGlmIChVTlBST1RFQ1RFRF9BVFRSUyBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMudW5wcm90ZWN0ZWRBdHRycyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQudW5wcm90ZWN0ZWRBdHRycywgbyA9PiBuZXcgQXR0cmlidXRlKHsgc2NoZW1hOiBvIH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KSk7XG4gICAgICAgIGlmICh0aGlzLm9yaWdpbmF0b3JJbmZvKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub3JpZ2luYXRvckluZm8udG9TY2hlbWEoKS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlNldCh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLnJlY2lwaWVudEluZm9zLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgfSkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuZW5jcnlwdGVkQ29udGVudEluZm8udG9TY2hlbWEoKSk7XG4gICAgICAgIGlmICh0aGlzLnVucHJvdGVjdGVkQXR0cnMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLnVucHJvdGVjdGVkQXR0cnMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbixcbiAgICAgICAgICAgIHJlY2lwaWVudEluZm9zOiBBcnJheS5mcm9tKHRoaXMucmVjaXBpZW50SW5mb3MsIG8gPT4gby50b0pTT04oKSksXG4gICAgICAgICAgICBlbmNyeXB0ZWRDb250ZW50SW5mbzogdGhpcy5lbmNyeXB0ZWRDb250ZW50SW5mby50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMub3JpZ2luYXRvckluZm8pXG4gICAgICAgICAgICByZXMub3JpZ2luYXRvckluZm8gPSB0aGlzLm9yaWdpbmF0b3JJbmZvLnRvSlNPTigpO1xuICAgICAgICBpZiAodGhpcy51bnByb3RlY3RlZEF0dHJzKVxuICAgICAgICAgICAgcmVzLnVucHJvdGVjdGVkQXR0cnMgPSBBcnJheS5mcm9tKHRoaXMudW5wcm90ZWN0ZWRBdHRycywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgYWRkUmVjaXBpZW50QnlDZXJ0aWZpY2F0ZShjZXJ0aWZpY2F0ZSwgcGFyYW1ldGVycywgdmFyaWFudCwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRpb25QYXJhbWV0ZXJzID0gT2JqZWN0LmFzc2lnbih7IHVzZU9BRVA6IHRydWUsIG9hZXBIYXNoQWxnb3JpdGhtOiBcIlNIQS01MTJcIiB9LCBkZWZhdWx0RW5jcnlwdGlvblBhcmFtcywgcGFyYW1ldGVycyB8fCB7fSk7XG4gICAgICAgIGlmIChjZXJ0aWZpY2F0ZS5zdWJqZWN0UHVibGljS2V5SW5mby5hbGdvcml0aG0uYWxnb3JpdGhtSWQuaW5kZXhPZihcIjEuMi44NDAuMTEzNTQ5XCIpICE9PSAoLTEpKVxuICAgICAgICAgICAgdmFyaWFudCA9IDE7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNlcnRpZmljYXRlLnN1YmplY3RQdWJsaWNLZXlJbmZvLmFsZ29yaXRobS5hbGdvcml0aG1JZC5pbmRleE9mKFwiMS4yLjg0MC4xMDA0NVwiKSAhPT0gKC0xKSlcbiAgICAgICAgICAgICAgICB2YXJpYW50ID0gMjtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdHlwZSBvZiBjZXJ0aWZpY2F0ZSdzIHB1YmxpYyBrZXk6ICR7Y2VydGlmaWNhdGUuc3ViamVjdFB1YmxpY0tleUluZm8uYWxnb3JpdGhtLmFsZ29yaXRobUlkfWApO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodmFyaWFudCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFsZ29yaXRobUlkO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWxnb3JpdGhtUGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5jcnlwdGlvblBhcmFtZXRlcnMudXNlT0FFUCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQgPSBjcnlwdG8uZ2V0T0lEQnlBbGdvcml0aG0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUlNBLU9BRVBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSwgXCJrZXlFbmNyeXB0aW9uQWxnb3JpdGhtXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaE9JRCA9IGNyeXB0by5nZXRPSURCeUFsZ29yaXRobSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZW5jcnlwdGlvblBhcmFtZXRlcnMub2FlcEhhc2hBbGdvcml0aG1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRydWUsIFwiUlNBRVMtT0FFUC1wYXJhbXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNoQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBoYXNoT0lELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5OdWxsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcnNhT0FFUFBhcmFtcyA9IG5ldyBSU0FFU09BRVBQYXJhbXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hBbGdvcml0aG0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0dlbkFsZ29yaXRobTogbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogXCIxLjIuODQwLjExMzU0OS4xLjEuOFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IGhhc2hBbGdvcml0aG0udG9TY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtcyA9IHJzYU9BRVBQYXJhbXMudG9TY2hlbWEoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkID0gY3J5cHRvLmdldE9JREJ5QWxnb3JpdGhtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJTQUVTLVBLQ1MxLXYxXzVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxnb3JpdGhtSWQgPT09IEVNUFRZX1NUUklORylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gbm90IGZpbmQgT0lEIGZvciBSU0FFUy1QS0NTMS12MV81XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtUGFyYW1zID0gbmV3IGFzbjFqcy5OdWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5SW5mbyA9IG5ldyBLZXlUcmFuc1JlY2lwaWVudEluZm8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZDogbmV3IElzc3VlckFuZFNlcmlhbE51bWJlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVyOiBjZXJ0aWZpY2F0ZS5pc3N1ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyOiBjZXJ0aWZpY2F0ZS5zZXJpYWxOdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5RW5jcnlwdGlvbkFsZ29yaXRobTogbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNpcGllbnRDZXJ0aWZpY2F0ZTogY2VydGlmaWNhdGUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY2lwaWVudEluZm9zLnB1c2gobmV3IFJlY2lwaWVudEluZm8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXlJbmZvXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNpcGllbnRJZGVudGlmaWVyID0gbmV3IEtleUFncmVlUmVjaXBpZW50SWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBJc3N1ZXJBbmRTZXJpYWxOdW1iZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlcjogY2VydGlmaWNhdGUuaXNzdWVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlcjogY2VydGlmaWNhdGUuc2VyaWFsTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkS2V5QWdyZWVSZWNpcGllbnRJbmZvKHJlY2lwaWVudElkZW50aWZpZXIsIGVuY3J5cHRpb25QYXJhbWV0ZXJzLCB7IHJlY2lwaWVudENlcnRpZmljYXRlOiBjZXJ0aWZpY2F0ZSB9LCBjcnlwdG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIFwidmFyaWFudFwiIHZhbHVlOiAke3ZhcmlhbnR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFkZFJlY2lwaWVudEJ5UHJlRGVmaW5lZERhdGEocHJlRGVmaW5lZERhdGEsIHBhcmFtZXRlcnMgPSB7fSwgdmFyaWFudCwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIEFyZ3VtZW50RXJyb3IuYXNzZXJ0KHByZURlZmluZWREYXRhLCBcInByZURlZmluZWREYXRhXCIsIFwiQXJyYXlCdWZmZXJcIik7XG4gICAgICAgIGlmICghcHJlRGVmaW5lZERhdGEuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJlLWRlZmluZWQgZGF0YSBjb3VsZCBoYXZlIHplcm8gbGVuZ3RoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcGFyYW1ldGVycy5rZXlJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlJZGVudGlmaWVyQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDE2KTtcbiAgICAgICAgICAgIGNvbnN0IGtleUlkZW50aWZpZXJWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoa2V5SWRlbnRpZmllckJ1ZmZlcik7XG4gICAgICAgICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGtleUlkZW50aWZpZXJWaWV3KTtcbiAgICAgICAgICAgIHBhcmFtZXRlcnMua2V5SWRlbnRpZmllciA9IGtleUlkZW50aWZpZXJCdWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwYXJhbWV0ZXJzLmhtYWNIYXNoQWxnb3JpdGhtKVxuICAgICAgICAgICAgcGFyYW1ldGVycy5obWFjSGFzaEFsZ29yaXRobSA9IFwiU0hBLTUxMlwiO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5pdGVyYXRpb25Db3VudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbWV0ZXJzLml0ZXJhdGlvbkNvdW50ID0gMjA0ODtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhcmFtZXRlcnMua2V5RW5jcnlwdGlvbkFsZ29yaXRobSkge1xuICAgICAgICAgICAgcGFyYW1ldGVycy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiQUVTLUtXXCIsXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiAyNTZcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwYXJhbWV0ZXJzLmtleUVuY3J5cHRpb25BbGdvcml0aG1QYXJhbXMpXG4gICAgICAgICAgICBwYXJhbWV0ZXJzLmtleUVuY3J5cHRpb25BbGdvcml0aG1QYXJhbXMgPSBuZXcgYXNuMWpzLk51bGwoKTtcbiAgICAgICAgc3dpdGNoICh2YXJpYW50KSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZWtPSUQgPSBjcnlwdG8uZ2V0T0lEQnlBbGdvcml0aG0ocGFyYW1ldGVycy5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLCB0cnVlLCBcImtleUVuY3J5cHRpb25BbGdvcml0aG1cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleUluZm8gPSBuZXcgS0VLUmVjaXBpZW50SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiA0LFxuICAgICAgICAgICAgICAgICAgICAgICAga2VraWQ6IG5ldyBLRUtJZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlJZGVudGlmaWVyOiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IHBhcmFtZXRlcnMua2V5SWRlbnRpZmllciB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlFbmNyeXB0aW9uQWxnb3JpdGhtOiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IGtla09JRCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IHBhcmFtZXRlcnMua2V5RW5jcnlwdGlvbkFsZ29yaXRobVBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVEZWZpbmVkS0VLOiBwcmVEZWZpbmVkRGF0YVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNpcGllbnRJbmZvcy5wdXNoKG5ldyBSZWNpcGllbnRJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToga2V5SW5mb1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGJrZGYyT0lEID0gY3J5cHRvLmdldE9JREJ5QWxnb3JpdGhtKHsgbmFtZTogXCJQQktERjJcIiB9LCB0cnVlLCBcImtleURlcml2YXRpb25BbGdvcml0aG1cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbHRCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNjQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWx0VmlldyA9IG5ldyBVaW50OEFycmF5KHNhbHRCdWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHNhbHRWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG1hY09JRCA9IGNyeXB0by5nZXRPSURCeUFsZ29yaXRobSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkhNQUNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2g6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJhbWV0ZXJzLmhtYWNIYXNoQWxnb3JpdGhtXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHRydWUsIFwiaG1hY0hhc2hBbGdvcml0aG1cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBia2RmMlBhcmFtcyA9IG5ldyBQQktERjJQYXJhbXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FsdDogbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBzYWx0QnVmZmVyIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0aW9uQ291bnQ6IHBhcmFtZXRlcnMuaXRlcmF0aW9uQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmY6IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogaG1hY09JRCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuTnVsbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2VrT0lEID0gY3J5cHRvLmdldE9JREJ5QWxnb3JpdGhtKHBhcmFtZXRlcnMua2V5RW5jcnlwdGlvbkFsZ29yaXRobSwgdHJ1ZSwgXCJrZXlFbmNyeXB0aW9uQWxnb3JpdGhtXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlJbmZvID0gbmV3IFBhc3N3b3JkUmVjaXBpZW50aW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5RGVyaXZhdGlvbkFsZ29yaXRobTogbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBwYmtkZjJPSUQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtUGFyYW1zOiBwYmtkZjJQYXJhbXMudG9TY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlFbmNyeXB0aW9uQWxnb3JpdGhtOiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IGtla09JRCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IHBhcmFtZXRlcnMua2V5RW5jcnlwdGlvbkFsZ29yaXRobVBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcHJlRGVmaW5lZERhdGFcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjaXBpZW50SW5mb3MucHVzaChuZXcgUmVjaXBpZW50SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiA0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGtleUluZm9cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHZhbHVlIGZvciBcInZhcmlhbnRcIjogJHt2YXJpYW50fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFJlY2lwaWVudEJ5S2V5SWRlbnRpZmllcihrZXksIGtleUlkLCBwYXJhbWV0ZXJzLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgY29uc3QgZW5jcnlwdGlvblBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0RW5jcnlwdGlvblBhcmFtcywgcGFyYW1ldGVycyB8fCB7fSk7XG4gICAgICAgIGNvbnN0IHJlY2lwaWVudElkZW50aWZpZXIgPSBuZXcgS2V5QWdyZWVSZWNpcGllbnRJZGVudGlmaWVyKHtcbiAgICAgICAgICAgIHZhcmlhbnQ6IDIsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IFJlY2lwaWVudEtleUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgIHN1YmplY3RLZXlJZGVudGlmaWVyOiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IGtleUlkIH0pLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2FkZEtleUFncmVlUmVjaXBpZW50SW5mbyhyZWNpcGllbnRJZGVudGlmaWVyLCBlbmNyeXB0aW9uUGFyYW1ldGVycywgeyByZWNpcGllbnRQdWJsaWNLZXk6IGtleSB9LCBjcnlwdG8pO1xuICAgIH1cbiAgICBfYWRkS2V5QWdyZWVSZWNpcGllbnRJbmZvKHJlY2lwaWVudElkZW50aWZpZXIsIGVuY3J5cHRpb25QYXJhbWV0ZXJzLCBleHRyYVJlY2lwaWVudEluZm9QYXJhbXMsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICBjb25zdCBlbmNyeXB0ZWRLZXkgPSBuZXcgUmVjaXBpZW50RW5jcnlwdGVkS2V5KHtcbiAgICAgICAgICAgIHJpZDogcmVjaXBpZW50SWRlbnRpZmllclxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYWVzS1dvaWQgPSBjcnlwdG8uZ2V0T0lEQnlBbGdvcml0aG0oe1xuICAgICAgICAgICAgbmFtZTogXCJBRVMtS1dcIixcbiAgICAgICAgICAgIGxlbmd0aDogZW5jcnlwdGlvblBhcmFtZXRlcnMua2VrRW5jcnlwdGlvbkxlbmd0aFxuICAgICAgICB9LCB0cnVlLCBcImtleUVuY3J5cHRpb25BbGdvcml0aG1cIik7XG4gICAgICAgIGNvbnN0IGFlc0tXID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IGFlc0tXb2lkLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZWNkaE9JRCA9IGNyeXB0by5nZXRPSURCeUFsZ29yaXRobSh7XG4gICAgICAgICAgICBuYW1lOiBcIkVDREhcIixcbiAgICAgICAgICAgIGtkZjogZW5jcnlwdGlvblBhcmFtZXRlcnMua2RmQWxnb3JpdGhtXG4gICAgICAgIH0sIHRydWUsIFwiS2V5QWdyZWVSZWNpcGllbnRJbmZvXCIpO1xuICAgICAgICBjb25zdCB1a21CdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNjQpO1xuICAgICAgICBjb25zdCB1a21WaWV3ID0gbmV3IFVpbnQ4QXJyYXkodWttQnVmZmVyKTtcbiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyh1a21WaWV3KTtcbiAgICAgICAgY29uc3QgcmVjaXBpZW50SW5mb1BhcmFtcyA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDMsXG4gICAgICAgICAgICB1a206IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogdWttQnVmZmVyIH0pLFxuICAgICAgICAgICAga2V5RW5jcnlwdGlvbkFsZ29yaXRobTogbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgIGFsZ29yaXRobUlkOiBlY2RoT0lELFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogYWVzS1cudG9TY2hlbWEoKVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZWNpcGllbnRFbmNyeXB0ZWRLZXlzOiBuZXcgUmVjaXBpZW50RW5jcnlwdGVkS2V5cyh7XG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5czogW2VuY3J5cHRlZEtleV1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGtleUluZm8gPSBuZXcgS2V5QWdyZWVSZWNpcGllbnRJbmZvKE9iamVjdC5hc3NpZ24ocmVjaXBpZW50SW5mb1BhcmFtcywgZXh0cmFSZWNpcGllbnRJbmZvUGFyYW1zKSk7XG4gICAgICAgIHRoaXMucmVjaXBpZW50SW5mb3MucHVzaChuZXcgUmVjaXBpZW50SW5mbyh7XG4gICAgICAgICAgICB2YXJpYW50OiAyLFxuICAgICAgICAgICAgdmFsdWU6IGtleUluZm9cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBlbmNyeXB0KGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLCBjb250ZW50VG9FbmNyeXB0LCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgY29uc3QgaXZCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMTYpO1xuICAgICAgICBjb25zdCBpdlZpZXcgPSBuZXcgVWludDhBcnJheShpdkJ1ZmZlcik7XG4gICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoaXZWaWV3KTtcbiAgICAgICAgY29uc3QgY29udGVudFZpZXcgPSBuZXcgVWludDhBcnJheShjb250ZW50VG9FbmNyeXB0KTtcbiAgICAgICAgY29uc3QgY29udGVudEVuY3J5cHRpb25PSUQgPSBjcnlwdG8uZ2V0T0lEQnlBbGdvcml0aG0oY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0sIHRydWUsIFwiY29udGVudEVuY3J5cHRpb25BbGdvcml0aG1cIik7XG4gICAgICAgIGNvbnN0IHNlc3Npb25LZXkgPSBhd2FpdCBjcnlwdG8uZ2VuZXJhdGVLZXkoY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0sIHRydWUsIFtcImVuY3J5cHRcIl0pO1xuICAgICAgICBjb25zdCBlbmNyeXB0ZWRDb250ZW50ID0gYXdhaXQgY3J5cHRvLmVuY3J5cHQoe1xuICAgICAgICAgICAgbmFtZTogY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0ubmFtZSxcbiAgICAgICAgICAgIGl2OiBpdlZpZXdcbiAgICAgICAgfSwgc2Vzc2lvbktleSwgY29udGVudFZpZXcpO1xuICAgICAgICBjb25zdCBleHBvcnRlZFNlc3Npb25LZXkgPSBhd2FpdCBjcnlwdG8uZXhwb3J0S2V5KFwicmF3XCIsIHNlc3Npb25LZXkpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSAyO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZENvbnRlbnRJbmZvID0gbmV3IEVuY3J5cHRlZENvbnRlbnRJbmZvKHtcbiAgICAgICAgICAgIGRpc2FibGVTcGxpdDogdGhpcy5wb2xpY3kuZGlzYWJsZVNwbGl0LFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiMS4yLjg0MC4xMTM1NDkuMS43LjFcIixcbiAgICAgICAgICAgIGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtOiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IGNvbnRlbnRFbmNyeXB0aW9uT0lELFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBpdkJ1ZmZlciB9KVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBlbmNyeXB0ZWRDb250ZW50OiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IGVuY3J5cHRlZENvbnRlbnQgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IFN1YktleUFncmVlUmVjaXBpZW50SW5mbyA9IGFzeW5jIChpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVjaXBpZW50SW5mbyA9IHRoaXMucmVjaXBpZW50SW5mb3NbaW5kZXhdLnZhbHVlO1xuICAgICAgICAgICAgbGV0IHJlY2lwaWVudEN1cnZlO1xuICAgICAgICAgICAgbGV0IHJlY2lwaWVudFB1YmxpY0tleTtcbiAgICAgICAgICAgIGlmIChyZWNpcGllbnRJbmZvLnJlY2lwaWVudFB1YmxpY0tleSkge1xuICAgICAgICAgICAgICAgIHJlY2lwaWVudEN1cnZlID0gcmVjaXBpZW50SW5mby5yZWNpcGllbnRQdWJsaWNLZXkuYWxnb3JpdGhtLm5hbWVkQ3VydmU7XG4gICAgICAgICAgICAgICAgcmVjaXBpZW50UHVibGljS2V5ID0gcmVjaXBpZW50SW5mby5yZWNpcGllbnRQdWJsaWNLZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZWNpcGllbnRJbmZvLnJlY2lwaWVudENlcnRpZmljYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VydmVPYmplY3QgPSByZWNpcGllbnRJbmZvLnJlY2lwaWVudENlcnRpZmljYXRlLnN1YmplY3RQdWJsaWNLZXlJbmZvLmFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXM7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnZlT2JqZWN0LmNvbnN0cnVjdG9yLmJsb2NrTmFtZSgpICE9PSBhc24xanMuT2JqZWN0SWRlbnRpZmllci5ibG9ja05hbWUoKSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgXCJyZWNpcGllbnRDZXJ0aWZpY2F0ZVwiIGZvciBpbmRleCAke2luZGV4fWApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnZlT0lEID0gY3VydmVPYmplY3QudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoY3VydmVPSUQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTAwNDUuMy4xLjdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudEN1cnZlID0gXCJQLTI1NlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIxLjMuMTMyLjAuMzRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudEN1cnZlID0gXCJQLTM4NFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIxLjMuMTMyLjAuMzVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudEN1cnZlID0gXCJQLTUyMVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBjdXJ2ZSBPSUQgZm9yIGluZGV4ICR7aW5kZXh9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlY2lwaWVudFB1YmxpY0tleSA9IGF3YWl0IHJlY2lwaWVudEluZm8ucmVjaXBpZW50Q2VydGlmaWNhdGUuZ2V0UHVibGljS2V5KHtcbiAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkVDREhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZEN1cnZlOiByZWNpcGllbnRDdXJ2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlczogW11cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGNyeXB0byk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBSZWNpcGllbnRJbmZvXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVjaXBpZW50Q3VydmVMZW5ndGggPSBjdXJ2ZUxlbmd0aEJ5TmFtZVtyZWNpcGllbnRDdXJ2ZV07XG4gICAgICAgICAgICBjb25zdCBlY2RoS2V5cyA9IGF3YWl0IGNyeXB0by5nZW5lcmF0ZUtleSh7IG5hbWU6IFwiRUNESFwiLCBuYW1lZEN1cnZlOiByZWNpcGllbnRDdXJ2ZSB9LCB0cnVlLCBbXCJkZXJpdmVCaXRzXCJdKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydGVkRUNESFB1YmxpY0tleSA9IGF3YWl0IGNyeXB0by5leHBvcnRLZXkoXCJzcGtpXCIsIGVjZGhLZXlzLnB1YmxpY0tleSk7XG4gICAgICAgICAgICBjb25zdCBkZXJpdmVkQml0cyA9IGF3YWl0IGNyeXB0by5kZXJpdmVCaXRzKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkVDREhcIixcbiAgICAgICAgICAgICAgICBwdWJsaWM6IHJlY2lwaWVudFB1YmxpY0tleVxuICAgICAgICAgICAgfSwgZWNkaEtleXMucHJpdmF0ZUtleSwgcmVjaXBpZW50Q3VydmVMZW5ndGgpO1xuICAgICAgICAgICAgY29uc3QgYWVzS1dBbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogcmVjaXBpZW50SW5mby5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGt3QWxnb3JpdGhtID0gY3J5cHRvLmdldEFsZ29yaXRobUJ5T0lEKGFlc0tXQWxnb3JpdGhtLmFsZ29yaXRobUlkLCB0cnVlLCBcImFlc0tXQWxnb3JpdGhtXCIpO1xuICAgICAgICAgICAgbGV0IGt3TGVuZ3RoID0ga3dBbGdvcml0aG0ubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3Qga3dMZW5ndGhCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNCk7XG4gICAgICAgICAgICBjb25zdCBrd0xlbmd0aFZpZXcgPSBuZXcgVWludDhBcnJheShrd0xlbmd0aEJ1ZmZlcik7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMzsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICAgICAgICBrd0xlbmd0aFZpZXdbal0gPSBrd0xlbmd0aDtcbiAgICAgICAgICAgICAgICBrd0xlbmd0aCA+Pj0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVjY0luZm8gPSBuZXcgRUNDQ01TU2hhcmVkSW5mbyh7XG4gICAgICAgICAgICAgICAga2V5SW5mbzogbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogYWVzS1dBbGdvcml0aG0uYWxnb3JpdGhtSWRcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBlbnRpdHlVSW5mbzogcmVjaXBpZW50SW5mby51a20sXG4gICAgICAgICAgICAgICAgc3VwcFB1YkluZm86IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDoga3dMZW5ndGhCdWZmZXIgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZEluZm8gPSBlY2NJbmZvLnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgY29uc3QgZWNkaEFsZ29yaXRobSA9IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRChyZWNpcGllbnRJbmZvLmtleUVuY3J5cHRpb25BbGdvcml0aG0uYWxnb3JpdGhtSWQsIHRydWUsIFwiZWNkaEFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGRlcml2ZWRLZXlSYXcgPSBhd2FpdCBrZGYoZWNkaEFsZ29yaXRobS5rZGYsIGRlcml2ZWRCaXRzLCBrd0FsZ29yaXRobS5sZW5ndGgsIGVuY29kZWRJbmZvLCBjcnlwdG8pO1xuICAgICAgICAgICAgY29uc3QgYXdzS1cgPSBhd2FpdCBjcnlwdG8uaW1wb3J0S2V5KFwicmF3XCIsIGRlcml2ZWRLZXlSYXcsIHsgbmFtZTogXCJBRVMtS1dcIiB9LCB0cnVlLCBbXCJ3cmFwS2V5XCJdKTtcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRLZXkgPSBhd2FpdCBjcnlwdG8ud3JhcEtleShcInJhd1wiLCBzZXNzaW9uS2V5LCBhd3NLVywgeyBuYW1lOiBcIkFFUy1LV1wiIH0pO1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYXRvciA9IG5ldyBPcmlnaW5hdG9ySWRlbnRpZmllck9yS2V5KCk7XG4gICAgICAgICAgICBvcmlnaW5hdG9yLnZhcmlhbnQgPSAzO1xuICAgICAgICAgICAgb3JpZ2luYXRvci52YWx1ZSA9IE9yaWdpbmF0b3JQdWJsaWNLZXkuZnJvbUJFUihleHBvcnRlZEVDREhQdWJsaWNLZXkpO1xuICAgICAgICAgICAgcmVjaXBpZW50SW5mby5vcmlnaW5hdG9yID0gb3JpZ2luYXRvcjtcbiAgICAgICAgICAgIHJlY2lwaWVudEluZm8ucmVjaXBpZW50RW5jcnlwdGVkS2V5cy5lbmNyeXB0ZWRLZXlzWzBdLmVuY3J5cHRlZEtleSA9IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogd3JhcHBlZEtleSB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IGVjZGhQcml2YXRlS2V5OiBlY2RoS2V5cy5wcml2YXRlS2V5IH07XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IFN1YktleVRyYW5zUmVjaXBpZW50SW5mbyA9IGFzeW5jIChpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVjaXBpZW50SW5mbyA9IHRoaXMucmVjaXBpZW50SW5mb3NbaW5kZXhdLnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtUGFyYW1ldGVycyA9IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRChyZWNpcGllbnRJbmZvLmtleUVuY3J5cHRpb25BbGdvcml0aG0uYWxnb3JpdGhtSWQsIHRydWUsIFwia2V5RW5jcnlwdGlvbkFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgIGlmIChhbGdvcml0aG1QYXJhbWV0ZXJzLm5hbWUgPT09IFwiUlNBLU9BRVBcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHJlY2lwaWVudEluZm8ua2V5RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXM7XG4gICAgICAgICAgICAgICAgY29uc3QgcnNhT0FFUFBhcmFtcyA9IG5ldyBSU0FFU09BRVBQYXJhbXMoeyBzY2hlbWEgfSk7XG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtUGFyYW1ldGVycy5oYXNoID0gY3J5cHRvLmdldEFsZ29yaXRobUJ5T0lEKHJzYU9BRVBQYXJhbXMuaGFzaEFsZ29yaXRobS5hbGdvcml0aG1JZCk7XG4gICAgICAgICAgICAgICAgaWYgKChcIm5hbWVcIiBpbiBhbGdvcml0aG1QYXJhbWV0ZXJzLmhhc2gpID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgT0lEIGZvciBoYXNoIGFsZ29yaXRobTogJHtyc2FPQUVQUGFyYW1zLmhhc2hBbGdvcml0aG0uYWxnb3JpdGhtSWR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleSA9IGF3YWl0IHJlY2lwaWVudEluZm8ucmVjaXBpZW50Q2VydGlmaWNhdGUuZ2V0UHVibGljS2V5KHtcbiAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IGFsZ29yaXRobVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2FnZXM6IFtcImVuY3J5cHRcIiwgXCJ3cmFwS2V5XCJdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBjcnlwdG8pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleSA9IGF3YWl0IGNyeXB0by5lbmNyeXB0KHB1YmxpY0tleS5hbGdvcml0aG0sIHB1YmxpY0tleSwgZXhwb3J0ZWRTZXNzaW9uS2V5KTtcbiAgICAgICAgICAgICAgICByZWNpcGllbnRJbmZvLmVuY3J5cHRlZEtleSA9IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogZW5jcnlwdGVkS2V5IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBTdWJLRUtSZWNpcGllbnRJbmZvID0gYXN5bmMgKGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWNpcGllbnRJbmZvID0gdGhpcy5yZWNpcGllbnRJbmZvc1tpbmRleF0udmFsdWU7XG4gICAgICAgICAgICBjb25zdCBrZWtBbGdvcml0aG0gPSBjcnlwdG8uZ2V0QWxnb3JpdGhtQnlPSUQocmVjaXBpZW50SW5mby5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobUlkLCB0cnVlLCBcImtla0FsZ29yaXRobVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGtla0tleSA9IGF3YWl0IGNyeXB0by5pbXBvcnRLZXkoXCJyYXdcIiwgbmV3IFVpbnQ4QXJyYXkocmVjaXBpZW50SW5mby5wcmVEZWZpbmVkS0VLKSwga2VrQWxnb3JpdGhtLCB0cnVlLCBbXCJ3cmFwS2V5XCJdKTtcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRLZXkgPSBhd2FpdCBjcnlwdG8ud3JhcEtleShcInJhd1wiLCBzZXNzaW9uS2V5LCBrZWtLZXksIGtla0FsZ29yaXRobSk7XG4gICAgICAgICAgICByZWNpcGllbnRJbmZvLmVuY3J5cHRlZEtleSA9IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogd3JhcHBlZEtleSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgU3ViUGFzc3dvcmRSZWNpcGllbnRpbmZvID0gYXN5bmMgKGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWNpcGllbnRJbmZvID0gdGhpcy5yZWNpcGllbnRJbmZvc1tpbmRleF0udmFsdWU7XG4gICAgICAgICAgICBsZXQgcGJrZGYyUGFyYW1zO1xuICAgICAgICAgICAgaWYgKCFyZWNpcGllbnRJbmZvLmtleURlcml2YXRpb25BbGdvcml0aG0pXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGFwcGVuZCBlbmNvZGVkIFxcXCJrZXlEZXJpdmF0aW9uQWxnb3JpdGhtXFxcIlwiKTtcbiAgICAgICAgICAgIGlmICghcmVjaXBpZW50SW5mby5rZXlEZXJpdmF0aW9uQWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3RseSBlbmNvZGVkIFxcXCJrZXlEZXJpdmF0aW9uQWxnb3JpdGhtXFxcIlwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGJrZGYyUGFyYW1zID0gbmV3IFBCS0RGMlBhcmFtcyh7IHNjaGVtYTogcmVjaXBpZW50SW5mby5rZXlEZXJpdmF0aW9uQWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdGx5IGVuY29kZWQgXFxcImtleURlcml2YXRpb25BbGdvcml0aG1cXFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGFzc3dvcmRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocmVjaXBpZW50SW5mby5wYXNzd29yZCk7XG4gICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9uS2V5ID0gYXdhaXQgY3J5cHRvLmltcG9ydEtleShcInJhd1wiLCBwYXNzd29yZFZpZXcsIFwiUEJLREYyXCIsIGZhbHNlLCBbXCJkZXJpdmVLZXlcIl0pO1xuICAgICAgICAgICAgY29uc3Qga2VrQWxnb3JpdGhtID0gY3J5cHRvLmdldEFsZ29yaXRobUJ5T0lEKHJlY2lwaWVudEluZm8ua2V5RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1JZCwgdHJ1ZSwgXCJrZWtBbGdvcml0aG1cIik7XG4gICAgICAgICAgICBsZXQgaG1hY0hhc2hBbGdvcml0aG0gPSBcIlNIQS0xXCI7XG4gICAgICAgICAgICBpZiAocGJrZGYyUGFyYW1zLnByZikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZkFsZ29yaXRobSA9IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRChwYmtkZjJQYXJhbXMucHJmLmFsZ29yaXRobUlkLCB0cnVlLCBcInByZkFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgICAgICBobWFjSGFzaEFsZ29yaXRobSA9IHByZkFsZ29yaXRobS5oYXNoLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzYWx0VmlldyA9IG5ldyBVaW50OEFycmF5KHBia2RmMlBhcmFtcy5zYWx0LnZhbHVlQmxvY2sudmFsdWVIZXgpO1xuICAgICAgICAgICAgY29uc3QgaXRlcmF0aW9ucyA9IHBia2RmMlBhcmFtcy5pdGVyYXRpb25Db3VudDtcbiAgICAgICAgICAgIGNvbnN0IGRlcml2ZWRLZXkgPSBhd2FpdCBjcnlwdG8uZGVyaXZlS2V5KHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlBCS0RGMlwiLFxuICAgICAgICAgICAgICAgIGhhc2g6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaG1hY0hhc2hBbGdvcml0aG1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNhbHQ6IHNhbHRWaWV3LFxuICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnNcbiAgICAgICAgICAgIH0sIGRlcml2YXRpb25LZXksIGtla0FsZ29yaXRobSwgdHJ1ZSwgW1wid3JhcEtleVwiXSk7XG4gICAgICAgICAgICBjb25zdCB3cmFwcGVkS2V5ID0gYXdhaXQgY3J5cHRvLndyYXBLZXkoXCJyYXdcIiwgc2Vzc2lvbktleSwgZGVyaXZlZEtleSwga2VrQWxnb3JpdGhtKTtcbiAgICAgICAgICAgIHJlY2lwaWVudEluZm8uZW5jcnlwdGVkS2V5ID0gbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiB3cmFwcGVkS2V5IH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlY2lwaWVudEluZm9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMucmVjaXBpZW50SW5mb3NbaV0udmFyaWFudCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goYXdhaXQgU3ViS2V5VHJhbnNSZWNpcGllbnRJbmZvKGkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICByZXMucHVzaChhd2FpdCBTdWJLZXlBZ3JlZVJlY2lwaWVudEluZm8oaSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKGF3YWl0IFN1YktFS1JlY2lwaWVudEluZm8oaSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKGF3YWl0IFN1YlBhc3N3b3JkUmVjaXBpZW50aW5mbyhpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biByZWNpcGllbnQgdHlwZSBpbiBhcnJheSB3aXRoIGluZGV4ICR7aX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBhc3luYyBkZWNyeXB0KHJlY2lwaWVudEluZGV4LCBwYXJhbWV0ZXJzLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgY29uc3QgZGVjcnlwdGlvblBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzIHx8IHt9O1xuICAgICAgICBpZiAoKHJlY2lwaWVudEluZGV4ICsgMSkgPiB0aGlzLnJlY2lwaWVudEluZm9zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNYXhpbXVtIHZhbHVlIGZvciBcImluZGV4XCIgaXM6ICR7dGhpcy5yZWNpcGllbnRJbmZvcy5sZW5ndGggLSAxfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFN1YktleUFncmVlUmVjaXBpZW50SW5mbyA9IGFzeW5jIChpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVjaXBpZW50SW5mbyA9IHRoaXMucmVjaXBpZW50SW5mb3NbaW5kZXhdLnZhbHVlO1xuICAgICAgICAgICAgbGV0IGN1cnZlT0lEO1xuICAgICAgICAgICAgbGV0IHJlY2lwaWVudEN1cnZlO1xuICAgICAgICAgICAgbGV0IHJlY2lwaWVudEN1cnZlTGVuZ3RoO1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYXRvciA9IHJlY2lwaWVudEluZm8ub3JpZ2luYXRvcjtcbiAgICAgICAgICAgIGlmIChkZWNyeXB0aW9uUGFyYW1ldGVycy5yZWNpcGllbnRDZXJ0aWZpY2F0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnZlT2JqZWN0ID0gZGVjcnlwdGlvblBhcmFtZXRlcnMucmVjaXBpZW50Q2VydGlmaWNhdGUuc3ViamVjdFB1YmxpY0tleUluZm8uYWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcztcbiAgICAgICAgICAgICAgICBpZiAoY3VydmVPYmplY3QuY29uc3RydWN0b3IuYmxvY2tOYW1lKCkgIT09IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyLmJsb2NrTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IFwicmVjaXBpZW50Q2VydGlmaWNhdGVcIiBmb3IgaW5kZXggJHtpbmRleH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VydmVPSUQgPSBjdXJ2ZU9iamVjdC52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvcmlnaW5hdG9yLnZhbHVlLmFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJ2ZU9iamVjdCA9IG9yaWdpbmF0b3IudmFsdWUuYWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcztcbiAgICAgICAgICAgICAgICBpZiAoY3VydmVPYmplY3QuY29uc3RydWN0b3IuYmxvY2tOYW1lKCkgIT09IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyLmJsb2NrTmFtZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IG9yaWdpbmF0b3IgZm9yIGluZGV4ICR7aW5kZXh9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnZlT0lEID0gY3VydmVPYmplY3QudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyYW1ldGVyIFxcXCJyZWNpcGllbnRDZXJ0aWZpY2F0ZVxcXCIgaXMgbWFuZGF0b3J5IGZvciBcXFwiS2V5QWdyZWVSZWNpcGllbnRJbmZvXFxcIiBpZiBhbGdvcml0aG0gcGFyYW1zIGFyZSBtaXNzaW5nIGZyb20gb3JpZ2luYXRvclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGVjcnlwdGlvblBhcmFtZXRlcnMucmVjaXBpZW50UHJpdmF0ZUtleSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbWV0ZXIgXFxcInJlY2lwaWVudFByaXZhdGVLZXlcXFwiIGlzIG1hbmRhdG9yeSBmb3IgXFxcIktleUFncmVlUmVjaXBpZW50SW5mb1xcXCJcIik7XG4gICAgICAgICAgICBzd2l0Y2ggKGN1cnZlT0lEKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIjEuMi44NDAuMTAwNDUuMy4xLjdcIjpcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBpZW50Q3VydmUgPSBcIlAtMjU2XCI7XG4gICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudEN1cnZlTGVuZ3RoID0gMjU2O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiMS4zLjEzMi4wLjM0XCI6XG4gICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudEN1cnZlID0gXCJQLTM4NFwiO1xuICAgICAgICAgICAgICAgICAgICByZWNpcGllbnRDdXJ2ZUxlbmd0aCA9IDM4NDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIjEuMy4xMzIuMC4zNVwiOlxuICAgICAgICAgICAgICAgICAgICByZWNpcGllbnRDdXJ2ZSA9IFwiUC01MjFcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBpZW50Q3VydmVMZW5ndGggPSA1Mjg7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IGN1cnZlIE9JRCBmb3IgaW5kZXggJHtpbmRleH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlY2RoUHJpdmF0ZUtleTtcbiAgICAgICAgICAgIGxldCBrZXlDcnlwdG8gPSBjcnlwdG87XG4gICAgICAgICAgICBpZiAoQnVmZmVyU291cmNlQ29udmVydGVyLmlzQnVmZmVyU291cmNlKGRlY3J5cHRpb25QYXJhbWV0ZXJzLnJlY2lwaWVudFByaXZhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgZWNkaFByaXZhdGVLZXkgPSBhd2FpdCBjcnlwdG8uaW1wb3J0S2V5KFwicGtjczhcIiwgZGVjcnlwdGlvblBhcmFtZXRlcnMucmVjaXBpZW50UHJpdmF0ZUtleSwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkVDREhcIixcbiAgICAgICAgICAgICAgICAgICAgbmFtZWRDdXJ2ZTogcmVjaXBpZW50Q3VydmVcbiAgICAgICAgICAgICAgICB9LCB0cnVlLCBbXCJkZXJpdmVCaXRzXCJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVjZGhQcml2YXRlS2V5ID0gZGVjcnlwdGlvblBhcmFtZXRlcnMucmVjaXBpZW50UHJpdmF0ZUtleTtcbiAgICAgICAgICAgICAgICBpZiAoXCJjcnlwdG9cIiBpbiBkZWNyeXB0aW9uUGFyYW1ldGVycyAmJiBkZWNyeXB0aW9uUGFyYW1ldGVycy5jcnlwdG8pIHtcbiAgICAgICAgICAgICAgICAgICAga2V5Q3J5cHRvID0gZGVjcnlwdGlvblBhcmFtZXRlcnMuY3J5cHRvLnN1YnRsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKFwiYWxnb3JpdGhtUGFyYW1zXCIgaW4gb3JpZ2luYXRvci52YWx1ZS5hbGdvcml0aG0pID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICBvcmlnaW5hdG9yLnZhbHVlLmFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMgPSBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogY3VydmVPSUQgfSk7XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBvcmlnaW5hdG9yLnZhbHVlLnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgY29uc3QgZWNkaFB1YmxpY0tleSA9IGF3YWl0IGNyeXB0by5pbXBvcnRLZXkoXCJzcGtpXCIsIGJ1ZmZlciwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiRUNESFwiLFxuICAgICAgICAgICAgICAgIG5hbWVkQ3VydmU6IHJlY2lwaWVudEN1cnZlXG4gICAgICAgICAgICB9LCB0cnVlLCBbXSk7XG4gICAgICAgICAgICBjb25zdCBzaGFyZWRTZWNyZXQgPSBhd2FpdCBrZXlDcnlwdG8uZGVyaXZlQml0cyh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJFQ0RIXCIsXG4gICAgICAgICAgICAgICAgcHVibGljOiBlY2RoUHVibGljS2V5XG4gICAgICAgICAgICB9LCBlY2RoUHJpdmF0ZUtleSwgcmVjaXBpZW50Q3VydmVMZW5ndGgpO1xuICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gYXBwbHlLREYoaW5jbHVkZUFsZ29yaXRobVBhcmFtcykge1xuICAgICAgICAgICAgICAgIGluY2x1ZGVBbGdvcml0aG1QYXJhbXMgPSBpbmNsdWRlQWxnb3JpdGhtUGFyYW1zIHx8IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFlc0tXQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IHJlY2lwaWVudEluZm8ua2V5RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qga3dBbGdvcml0aG0gPSBjcnlwdG8uZ2V0QWxnb3JpdGhtQnlPSUQoYWVzS1dBbGdvcml0aG0uYWxnb3JpdGhtSWQsIHRydWUsIFwia3dBbGdvcml0aG1cIik7XG4gICAgICAgICAgICAgICAgbGV0IGt3TGVuZ3RoID0ga3dBbGdvcml0aG0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnN0IGt3TGVuZ3RoQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGt3TGVuZ3RoVmlldyA9IG5ldyBVaW50OEFycmF5KGt3TGVuZ3RoQnVmZmVyKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMzsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICAgICAgICAgICAga3dMZW5ndGhWaWV3W2pdID0ga3dMZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGt3TGVuZ3RoID4+PSA4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBrZXlJbmZvQWxnb3JpdGhtID0ge1xuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogYWVzS1dBbGdvcml0aG0uYWxnb3JpdGhtSWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlQWxnb3JpdGhtUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleUluZm9BbGdvcml0aG0uYWxnb3JpdGhtUGFyYW1zID0gbmV3IGFzbjFqcy5OdWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGVjY0luZm8gPSBuZXcgRUNDQ01TU2hhcmVkSW5mbyh7XG4gICAgICAgICAgICAgICAgICAgIGtleUluZm86IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKGtleUluZm9BbGdvcml0aG0pLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHlVSW5mbzogcmVjaXBpZW50SW5mby51a20sXG4gICAgICAgICAgICAgICAgICAgIHN1cHBQdWJJbmZvOiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IGt3TGVuZ3RoQnVmZmVyIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5jb2RlZEluZm8gPSBlY2NJbmZvLnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVjZGhBbGdvcml0aG0gPSBjcnlwdG8uZ2V0QWxnb3JpdGhtQnlPSUQocmVjaXBpZW50SW5mby5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobUlkLCB0cnVlLCBcImVjZGhBbGdvcml0aG1cIik7XG4gICAgICAgICAgICAgICAgaWYgKCFlY2RoQWxnb3JpdGhtLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgT0lEIGZvciBrZXkgZW5jcnlwdGlvbiBhbGdvcml0aG06ICR7cmVjaXBpZW50SW5mby5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobUlkfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ga2RmKGVjZGhBbGdvcml0aG0ua2RmLCBzaGFyZWRTZWNyZXQsIGt3QWxnb3JpdGhtLmxlbmd0aCwgZW5jb2RlZEluZm8sIGNyeXB0byk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBrZGZSZXN1bHQgPSBhd2FpdCBhcHBseUtERigpO1xuICAgICAgICAgICAgY29uc3QgaW1wb3J0QWVzS3dLZXkgPSBhc3luYyAoa2RmUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyeXB0by5pbXBvcnRLZXkoXCJyYXdcIiwga2RmUmVzdWx0LCB7IG5hbWU6IFwiQUVTLUtXXCIgfSwgdHJ1ZSwgW1widW53cmFwS2V5XCJdKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBhZXNLd0tleSA9IGF3YWl0IGltcG9ydEFlc0t3S2V5KGtkZlJlc3VsdCk7XG4gICAgICAgICAgICBjb25zdCB1bndyYXBTZXNzaW9uS2V5ID0gYXN5bmMgKGFlc0t3S2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtSWQgPSB0aGlzLmVuY3J5cHRlZENvbnRlbnRJbmZvLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobUlkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtID0gY3J5cHRvLmdldEFsZ29yaXRobUJ5T0lEKGFsZ29yaXRobUlkLCB0cnVlLCBcImNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjcnlwdG8udW53cmFwS2V5KFwicmF3XCIsIHJlY2lwaWVudEluZm8ucmVjaXBpZW50RW5jcnlwdGVkS2V5cy5lbmNyeXB0ZWRLZXlzWzBdLmVuY3J5cHRlZEtleS52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldywgYWVzS3dLZXksIHsgbmFtZTogXCJBRVMtS1dcIiB9LCBjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobSwgdHJ1ZSwgW1wiZGVjcnlwdFwiXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdW53cmFwU2Vzc2lvbktleShhZXNLd0tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2RmUmVzdWx0ID0gYXdhaXQgYXBwbHlLREYodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWVzS3dLZXkgPSBhd2FpdCBpbXBvcnRBZXNLd0tleShrZGZSZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bndyYXBTZXNzaW9uS2V5KGFlc0t3S2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgU3ViS2V5VHJhbnNSZWNpcGllbnRJbmZvID0gYXN5bmMgKGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWNpcGllbnRJbmZvID0gdGhpcy5yZWNpcGllbnRJbmZvc1tpbmRleF0udmFsdWU7XG4gICAgICAgICAgICBpZiAoIWRlY3J5cHRpb25QYXJhbWV0ZXJzLnJlY2lwaWVudFByaXZhdGVLZXkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbWV0ZXIgXFxcInJlY2lwaWVudFByaXZhdGVLZXlcXFwiIGlzIG1hbmRhdG9yeSBmb3IgXFxcIktleVRyYW5zUmVjaXBpZW50SW5mb1xcXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhbGdvcml0aG1QYXJhbWV0ZXJzID0gY3J5cHRvLmdldEFsZ29yaXRobUJ5T0lEKHJlY2lwaWVudEluZm8ua2V5RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1JZCwgdHJ1ZSwgXCJrZXlFbmNyeXB0aW9uQWxnb3JpdGhtXCIpO1xuICAgICAgICAgICAgaWYgKGFsZ29yaXRobVBhcmFtZXRlcnMubmFtZSA9PT0gXCJSU0EtT0FFUFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gcmVjaXBpZW50SW5mby5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcztcbiAgICAgICAgICAgICAgICBjb25zdCByc2FPQUVQUGFyYW1zID0gbmV3IFJTQUVTT0FFUFBhcmFtcyh7IHNjaGVtYSB9KTtcbiAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbWV0ZXJzLmhhc2ggPSBjcnlwdG8uZ2V0QWxnb3JpdGhtQnlPSUQocnNhT0FFUFBhcmFtcy5oYXNoQWxnb3JpdGhtLmFsZ29yaXRobUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoKFwibmFtZVwiIGluIGFsZ29yaXRobVBhcmFtZXRlcnMuaGFzaCkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBPSUQgZm9yIGhhc2ggYWxnb3JpdGhtOiAke3JzYU9BRVBQYXJhbXMuaGFzaEFsZ29yaXRobS5hbGdvcml0aG1JZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwcml2YXRlS2V5O1xuICAgICAgICAgICAgbGV0IGtleUNyeXB0byA9IGNyeXB0bztcbiAgICAgICAgICAgIGlmIChCdWZmZXJTb3VyY2VDb252ZXJ0ZXIuaXNCdWZmZXJTb3VyY2UoZGVjcnlwdGlvblBhcmFtZXRlcnMucmVjaXBpZW50UHJpdmF0ZUtleSkpIHtcbiAgICAgICAgICAgICAgICBwcml2YXRlS2V5ID0gYXdhaXQgY3J5cHRvLmltcG9ydEtleShcInBrY3M4XCIsIGRlY3J5cHRpb25QYXJhbWV0ZXJzLnJlY2lwaWVudFByaXZhdGVLZXksIGFsZ29yaXRobVBhcmFtZXRlcnMsIHRydWUsIFtcImRlY3J5cHRcIl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJpdmF0ZUtleSA9IGRlY3J5cHRpb25QYXJhbWV0ZXJzLnJlY2lwaWVudFByaXZhdGVLZXk7XG4gICAgICAgICAgICAgICAgaWYgKFwiY3J5cHRvXCIgaW4gZGVjcnlwdGlvblBhcmFtZXRlcnMgJiYgZGVjcnlwdGlvblBhcmFtZXRlcnMuY3J5cHRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleUNyeXB0byA9IGRlY3J5cHRpb25QYXJhbWV0ZXJzLmNyeXB0by5zdWJ0bGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbktleSA9IGF3YWl0IGtleUNyeXB0by5kZWNyeXB0KHByaXZhdGVLZXkuYWxnb3JpdGhtLCBwcml2YXRlS2V5LCByZWNpcGllbnRJbmZvLmVuY3J5cHRlZEtleS52YWx1ZUJsb2NrLnZhbHVlSGV4Vmlldyk7XG4gICAgICAgICAgICBjb25zdCBhbGdvcml0aG1JZCA9IHRoaXMuZW5jcnlwdGVkQ29udGVudEluZm8uY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0uYWxnb3JpdGhtSWQ7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobSA9IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRChhbGdvcml0aG1JZCwgdHJ1ZSwgXCJjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgIGlmICgoXCJuYW1lXCIgaW4gY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0pID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBcImNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtXCI6ICR7YWxnb3JpdGhtSWR9YCk7XG4gICAgICAgICAgICByZXR1cm4gY3J5cHRvLmltcG9ydEtleShcInJhd1wiLCBzZXNzaW9uS2V5LCBjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobSwgdHJ1ZSwgW1wiZGVjcnlwdFwiXSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IFN1YktFS1JlY2lwaWVudEluZm8gPSBhc3luYyAoaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlY2lwaWVudEluZm8gPSB0aGlzLnJlY2lwaWVudEluZm9zW2luZGV4XS52YWx1ZTtcbiAgICAgICAgICAgIGlmICghZGVjcnlwdGlvblBhcmFtZXRlcnMucHJlRGVmaW5lZERhdGEpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyYW1ldGVyIFxcXCJwcmVEZWZpbmVkRGF0YVxcXCIgaXMgbWFuZGF0b3J5IGZvciBcXFwiS0VLUmVjaXBpZW50SW5mb1xcXCJcIik7XG4gICAgICAgICAgICBjb25zdCBrZWtBbGdvcml0aG0gPSBjcnlwdG8uZ2V0QWxnb3JpdGhtQnlPSUQocmVjaXBpZW50SW5mby5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobUlkLCB0cnVlLCBcImtla0FsZ29yaXRobVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGltcG9ydGVkS2V5ID0gYXdhaXQgY3J5cHRvLmltcG9ydEtleShcInJhd1wiLCBkZWNyeXB0aW9uUGFyYW1ldGVycy5wcmVEZWZpbmVkRGF0YSwga2VrQWxnb3JpdGhtLCB0cnVlLCBbXCJ1bndyYXBLZXlcIl0pO1xuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtSWQgPSB0aGlzLmVuY3J5cHRlZENvbnRlbnRJbmZvLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobUlkO1xuICAgICAgICAgICAgY29uc3QgY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0gPSBjcnlwdG8uZ2V0QWxnb3JpdGhtQnlPSUQoYWxnb3JpdGhtSWQsIHRydWUsIFwiY29udGVudEVuY3J5cHRpb25BbGdvcml0aG1cIik7XG4gICAgICAgICAgICBpZiAoIWNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLm5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBcImNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtXCI6ICR7YWxnb3JpdGhtSWR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3J5cHRvLnVud3JhcEtleShcInJhd1wiLCByZWNpcGllbnRJbmZvLmVuY3J5cHRlZEtleS52YWx1ZUJsb2NrLnZhbHVlSGV4VmlldywgaW1wb3J0ZWRLZXksIGtla0FsZ29yaXRobSwgY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0sIHRydWUsIFtcImRlY3J5cHRcIl0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBTdWJQYXNzd29yZFJlY2lwaWVudGluZm8gPSBhc3luYyAoaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlY2lwaWVudEluZm8gPSB0aGlzLnJlY2lwaWVudEluZm9zW2luZGV4XS52YWx1ZTtcbiAgICAgICAgICAgIGxldCBwYmtkZjJQYXJhbXM7XG4gICAgICAgICAgICBpZiAoIWRlY3J5cHRpb25QYXJhbWV0ZXJzLnByZURlZmluZWREYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyYW1ldGVyIFxcXCJwcmVEZWZpbmVkRGF0YVxcXCIgaXMgbWFuZGF0b3J5IGZvciBcXFwiS0VLUmVjaXBpZW50SW5mb1xcXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlY2lwaWVudEluZm8ua2V5RGVyaXZhdGlvbkFsZ29yaXRobSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBhcHBlbmQgZW5jb2RlZCBcXFwia2V5RGVyaXZhdGlvbkFsZ29yaXRobVxcXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlY2lwaWVudEluZm8ua2V5RGVyaXZhdGlvbkFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3RseSBlbmNvZGVkIFxcXCJrZXlEZXJpdmF0aW9uQWxnb3JpdGhtXFxcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGJrZGYyUGFyYW1zID0gbmV3IFBCS0RGMlBhcmFtcyh7IHNjaGVtYTogcmVjaXBpZW50SW5mby5rZXlEZXJpdmF0aW9uQWxnb3JpdGhtLmFsZ29yaXRobVBhcmFtcyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdGx5IGVuY29kZWQgXFxcImtleURlcml2YXRpb25BbGdvcml0aG1cXFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGJrZGYyS2V5ID0gYXdhaXQgY3J5cHRvLmltcG9ydEtleShcInJhd1wiLCBkZWNyeXB0aW9uUGFyYW1ldGVycy5wcmVEZWZpbmVkRGF0YSwgXCJQQktERjJcIiwgZmFsc2UsIFtcImRlcml2ZUtleVwiXSk7XG4gICAgICAgICAgICBjb25zdCBrZWtBbGdvcml0aG0gPSBjcnlwdG8uZ2V0QWxnb3JpdGhtQnlPSUQocmVjaXBpZW50SW5mby5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobUlkLCB0cnVlLCBcImtleUVuY3J5cHRpb25BbGdvcml0aG1cIik7XG4gICAgICAgICAgICBjb25zdCBobWFjSGFzaEFsZ29yaXRobSA9IHBia2RmMlBhcmFtcy5wcmZcbiAgICAgICAgICAgICAgICA/IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRChwYmtkZjJQYXJhbXMucHJmLmFsZ29yaXRobUlkLCB0cnVlLCBcInByZkFsZ29yaXRobVwiKS5oYXNoLm5hbWVcbiAgICAgICAgICAgICAgICA6IFwiU0hBLTFcIjtcbiAgICAgICAgICAgIGNvbnN0IHNhbHRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocGJrZGYyUGFyYW1zLnNhbHQudmFsdWVCbG9jay52YWx1ZUhleCk7XG4gICAgICAgICAgICBjb25zdCBpdGVyYXRpb25zID0gcGJrZGYyUGFyYW1zLml0ZXJhdGlvbkNvdW50O1xuICAgICAgICAgICAgY29uc3Qga2VrS2V5ID0gYXdhaXQgY3J5cHRvLmRlcml2ZUtleSh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJQQktERjJcIixcbiAgICAgICAgICAgICAgICBoYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGhtYWNIYXNoQWxnb3JpdGhtXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzYWx0OiBzYWx0VmlldyxcbiAgICAgICAgICAgICAgICBpdGVyYXRpb25zXG4gICAgICAgICAgICB9LCBwYmtkZjJLZXksIGtla0FsZ29yaXRobSwgdHJ1ZSwgW1widW53cmFwS2V5XCJdKTtcbiAgICAgICAgICAgIGNvbnN0IGFsZ29yaXRobUlkID0gdGhpcy5lbmNyeXB0ZWRDb250ZW50SW5mby5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1JZDtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtID0gY3J5cHRvLmdldEFsZ29yaXRobUJ5T0lEKGFsZ29yaXRobUlkLCB0cnVlLCBcImNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGNyeXB0by51bndyYXBLZXkoXCJyYXdcIiwgcmVjaXBpZW50SW5mby5lbmNyeXB0ZWRLZXkudmFsdWVCbG9jay52YWx1ZUhleFZpZXcsIGtla0tleSwga2VrQWxnb3JpdGhtLCBjb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobSwgdHJ1ZSwgW1wiZGVjcnlwdFwiXSk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCB1bndyYXBwZWRLZXk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5yZWNpcGllbnRJbmZvc1tyZWNpcGllbnRJbmRleF0udmFyaWFudCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHVud3JhcHBlZEtleSA9IGF3YWl0IFN1YktleVRyYW5zUmVjaXBpZW50SW5mbyhyZWNpcGllbnRJbmRleCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgdW53cmFwcGVkS2V5ID0gYXdhaXQgU3ViS2V5QWdyZWVSZWNpcGllbnRJbmZvKHJlY2lwaWVudEluZGV4KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICB1bndyYXBwZWRLZXkgPSBhd2FpdCBTdWJLRUtSZWNpcGllbnRJbmZvKHJlY2lwaWVudEluZGV4KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICB1bndyYXBwZWRLZXkgPSBhd2FpdCBTdWJQYXNzd29yZFJlY2lwaWVudGluZm8ocmVjaXBpZW50SW5kZXgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcmVjaXBpZW50IHR5cGUgaW4gYXJyYXkgd2l0aCBpbmRleCAke3JlY2lwaWVudEluZGV4fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsZ29yaXRobUlkID0gdGhpcy5lbmNyeXB0ZWRDb250ZW50SW5mby5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1JZDtcbiAgICAgICAgY29uc3QgY29udGVudEVuY3J5cHRpb25BbGdvcml0aG0gPSBjcnlwdG8uZ2V0QWxnb3JpdGhtQnlPSUQoYWxnb3JpdGhtSWQsIHRydWUsIFwiY29udGVudEVuY3J5cHRpb25BbGdvcml0aG1cIik7XG4gICAgICAgIGNvbnN0IGl2QnVmZmVyID0gdGhpcy5lbmNyeXB0ZWRDb250ZW50SW5mby5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobS5hbGdvcml0aG1QYXJhbXMudmFsdWVCbG9jay52YWx1ZUhleDtcbiAgICAgICAgY29uc3QgaXZWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoaXZCdWZmZXIpO1xuICAgICAgICBpZiAoIXRoaXMuZW5jcnlwdGVkQ29udGVudEluZm8uZW5jcnlwdGVkQ29udGVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVxdWlyZWQgcHJvcGVydHkgYGVuY3J5cHRlZENvbnRlbnRgIGlzIGVtcHR5XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFCdWZmZXIgPSB0aGlzLmVuY3J5cHRlZENvbnRlbnRJbmZvLmdldEVuY3J5cHRlZENvbnRlbnQoKTtcbiAgICAgICAgcmV0dXJuIGNyeXB0by5kZWNyeXB0KHtcbiAgICAgICAgICAgIG5hbWU6IGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLm5hbWUsXG4gICAgICAgICAgICBpdjogaXZWaWV3XG4gICAgICAgIH0sIHVud3JhcHBlZEtleSwgZGF0YUJ1ZmZlcik7XG4gICAgfVxufVxuRW52ZWxvcGVkRGF0YS5DTEFTU19OQU1FID0gXCJFbnZlbG9wZWREYXRhXCI7XG5cbmNvbnN0IFNBRkVfQ09OVEVOVFMgPSBcInNhZmVDb250ZW50c1wiO1xuY29uc3QgUEFSU0VEX1ZBTFVFJDEgPSBcInBhcnNlZFZhbHVlXCI7XG5jb25zdCBDT05URU5UX0lORk9TID0gXCJjb250ZW50SW5mb3NcIjtcbmNsYXNzIEF1dGhlbnRpY2F0ZWRTYWZlIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zYWZlQ29udGVudHMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTQUZFX0NPTlRFTlRTLCBBdXRoZW50aWNhdGVkU2FmZS5kZWZhdWx0VmFsdWVzKFNBRkVfQ09OVEVOVFMpKTtcbiAgICAgICAgaWYgKFBBUlNFRF9WQUxVRSQxIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2VkVmFsdWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBQQVJTRURfVkFMVUUkMSwgQXV0aGVudGljYXRlZFNhZmUuZGVmYXVsdFZhbHVlcyhQQVJTRURfVkFMVUUkMSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBTQUZFX0NPTlRFTlRTOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNhc2UgUEFSU0VEX1ZBTFVFJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBTQUZFX0NPTlRFTlRTOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGNhc2UgUEFSU0VEX1ZBTFVFJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgobWVtYmVyVmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpICYmIChPYmplY3Qua2V5cyhtZW1iZXJWYWx1ZSkubGVuZ3RoID09PSAwKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuY29udGVudEluZm9zIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBDb250ZW50SW5mby5zY2hlbWEoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgW1xuICAgICAgICAgICAgQ09OVEVOVF9JTkZPU1xuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBBdXRoZW50aWNhdGVkU2FmZS5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50SW5mb3M6IENPTlRFTlRfSU5GT1NcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnNhZmVDb250ZW50cyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQuY29udGVudEluZm9zLCBlbGVtZW50ID0+IG5ldyBDb250ZW50SW5mbyh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5zYWZlQ29udGVudHMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNhZmVDb250ZW50czogQXJyYXkuZnJvbSh0aGlzLnNhZmVDb250ZW50cywgbyA9PiBvLnRvSlNPTigpKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUludGVybmFsVmFsdWVzKHBhcmFtZXRlcnMsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICBQYXJhbWV0ZXJFcnJvci5hc3NlcnQocGFyYW1ldGVycywgU0FGRV9DT05URU5UUyk7XG4gICAgICAgIEFyZ3VtZW50RXJyb3IuYXNzZXJ0KHBhcmFtZXRlcnMuc2FmZUNvbnRlbnRzLCBTQUZFX0NPTlRFTlRTLCBcIkFycmF5XCIpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zYWZlQ29udGVudHMubGVuZ3RoICE9PSB0aGlzLnNhZmVDb250ZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEVycm9yKFwiTGVuZ3RoIG9mIFxcXCJwYXJhbWV0ZXJzLnNhZmVDb250ZW50c1xcXCIgbXVzdCBiZSBlcXVhbCB0byBcXFwidGhpcy5zYWZlQ29udGVudHMubGVuZ3RoXFxcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZFZhbHVlID0ge1xuICAgICAgICAgICAgc2FmZUNvbnRlbnRzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGNvbnRlbnRdIG9mIHRoaXMuc2FmZUNvbnRlbnRzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2FmZUNvbnRlbnQgPSBwYXJhbWV0ZXJzLnNhZmVDb250ZW50c1tpbmRleF07XG4gICAgICAgICAgICBjb25zdCBlcnJvclRhcmdldCA9IGBwYXJhbWV0ZXJzLnNhZmVDb250ZW50c1ske2luZGV4fV1gO1xuICAgICAgICAgICAgc3dpdGNoIChjb250ZW50LmNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBpZF9Db250ZW50VHlwZV9EYXRhOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcmd1bWVudEVycm9yLmFzc2VydChjb250ZW50LmNvbnRlbnQsIFwidGhpcy5zYWZlQ29udGVudHNbal0uY29udGVudFwiLCBhc24xanMuT2N0ZXRTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0aFNhZmVDb250ZW50ID0gY29udGVudC5jb250ZW50LmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFZhbHVlLnNhZmVDb250ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2YWN5TW9kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogU2FmZUNvbnRlbnRzLmZyb21CRVIoYXV0aFNhZmVDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBpZF9Db250ZW50VHlwZV9FbnZlbG9wZWREYXRhOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbXNFbnZlbG9wZWQgPSBuZXcgRW52ZWxvcGVkRGF0YSh7IHNjaGVtYTogY29udGVudC5jb250ZW50IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0KGVycm9yVGFyZ2V0LCBzYWZlQ29udGVudCwgXCJyZWNpcGllbnRDZXJ0aWZpY2F0ZVwiLCBcInJlY2lwaWVudEtleVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudmVsb3BlZERhdGEgPSBzYWZlQ29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2lwaWVudENlcnRpZmljYXRlID0gZW52ZWxvcGVkRGF0YS5yZWNpcGllbnRDZXJ0aWZpY2F0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2lwaWVudEtleSA9IGVudmVsb3BlZERhdGEucmVjaXBpZW50S2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gYXdhaXQgY21zRW52ZWxvcGVkLmRlY3J5cHQoMCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudENlcnRpZmljYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudFByaXZhdGVLZXk6IHJlY2lwaWVudEtleVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgY3J5cHRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkVmFsdWUuc2FmZUNvbnRlbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXZhY3lNb2RlOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTYWZlQ29udGVudHMuZnJvbUJFUihkZWNyeXB0ZWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBpZF9Db250ZW50VHlwZV9FbmNyeXB0ZWREYXRhOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbXNFbmNyeXB0ZWQgPSBuZXcgRW5jcnlwdGVkRGF0YSh7IHNjaGVtYTogY29udGVudC5jb250ZW50IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0KGVycm9yVGFyZ2V0LCBzYWZlQ29udGVudCwgXCJwYXNzd29yZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkID0gc2FmZUNvbnRlbnQucGFzc3dvcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWQgPSBhd2FpdCBjbXNFbmNyeXB0ZWQuZGVjcnlwdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNyeXB0byk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFZhbHVlLnNhZmVDb250ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2YWN5TW9kZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogU2FmZUNvbnRlbnRzLmZyb21CRVIoZGVjcnlwdGVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBcImNvbnRlbnRUeXBlXCIgZm9yIEF1dGhlbnRpY2F0ZWRTYWZlOiBcIiAke2NvbnRlbnQuY29udGVudFR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbWFrZUludGVybmFsVmFsdWVzKHBhcmFtZXRlcnMsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICBpZiAoISh0aGlzLnBhcnNlZFZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHJ1biBcXFwicGFyc2VWYWx1ZXNcXFwiIGZpcnN0IG9yIGFkZCBcXFwicGFyc2VkVmFsdWVcXFwiIG1hbnVhbGx5XCIpO1xuICAgICAgICB9XG4gICAgICAgIEFyZ3VtZW50RXJyb3IuYXNzZXJ0KHRoaXMucGFyc2VkVmFsdWUsIFwidGhpcy5wYXJzZWRWYWx1ZVwiLCBcIm9iamVjdFwiKTtcbiAgICAgICAgQXJndW1lbnRFcnJvci5hc3NlcnQodGhpcy5wYXJzZWRWYWx1ZS5zYWZlQ29udGVudHMsIFwidGhpcy5wYXJzZWRWYWx1ZS5zYWZlQ29udGVudHNcIiwgXCJBcnJheVwiKTtcbiAgICAgICAgQXJndW1lbnRFcnJvci5hc3NlcnQocGFyYW1ldGVycywgXCJwYXJhbWV0ZXJzXCIsIFwib2JqZWN0XCIpO1xuICAgICAgICBQYXJhbWV0ZXJFcnJvci5hc3NlcnQocGFyYW1ldGVycywgXCJzYWZlQ29udGVudHNcIik7XG4gICAgICAgIEFyZ3VtZW50RXJyb3IuYXNzZXJ0KHBhcmFtZXRlcnMuc2FmZUNvbnRlbnRzLCBcInBhcmFtZXRlcnMuc2FmZUNvbnRlbnRzXCIsIFwiQXJyYXlcIik7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNhZmVDb250ZW50cy5sZW5ndGggIT09IHRoaXMucGFyc2VkVmFsdWUuc2FmZUNvbnRlbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXJyb3IoXCJMZW5ndGggb2YgXFxcInBhcmFtZXRlcnMuc2FmZUNvbnRlbnRzXFxcIiBtdXN0IGJlIGVxdWFsIHRvIFxcXCJ0aGlzLnBhcnNlZFZhbHVlLnNhZmVDb250ZW50c1xcXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zYWZlQ29udGVudHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGNvbnRlbnRdIG9mIHRoaXMucGFyc2VkVmFsdWUuc2FmZUNvbnRlbnRzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0KFwiY29udGVudFwiLCBjb250ZW50LCBcInByaXZhY3lNb2RlXCIsIFwidmFsdWVcIik7XG4gICAgICAgICAgICBBcmd1bWVudEVycm9yLmFzc2VydChjb250ZW50LnZhbHVlLCBcImNvbnRlbnQudmFsdWVcIiwgU2FmZUNvbnRlbnRzKTtcbiAgICAgICAgICAgIHN3aXRjaCAoY29udGVudC5wcml2YWN5TW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudEJ1ZmZlciA9IGNvbnRlbnQudmFsdWUudG9TY2hlbWEoKS50b0JFUihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhZmVDb250ZW50cy5wdXNoKG5ldyBDb250ZW50SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IFwiMS4yLjg0MC4xMTM1NDkuMS43LjFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IGNvbnRlbnRCdWZmZXIgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNtc0VuY3J5cHRlZCA9IG5ldyBFbmNyeXB0ZWREYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFyYW1ldGVycyA9IHBhcmFtZXRlcnMuc2FmZUNvbnRlbnRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXJhbWV0ZXJzLmNvbnRlbnRUb0VuY3J5cHQgPSBjb250ZW50LnZhbHVlLnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY21zRW5jcnlwdGVkLmVuY3J5cHQoY3VycmVudFBhcmFtZXRlcnMsIGNyeXB0byk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhZmVDb250ZW50cy5wdXNoKG5ldyBDb250ZW50SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IFwiMS4yLjg0MC4xMTM1NDkuMS43LjZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjbXNFbmNyeXB0ZWQudG9TY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY21zRW52ZWxvcGVkID0gbmV3IEVudmVsb3BlZERhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRUb0VuY3J5cHQgPSBjb250ZW50LnZhbHVlLnRvU2NoZW1hKCkudG9CRVIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FmZUNvbnRlbnQgPSBwYXJhbWV0ZXJzLnNhZmVDb250ZW50c1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBQYXJhbWV0ZXJFcnJvci5hc3NlcnQoYHBhcmFtZXRlcnMuc2FmZUNvbnRlbnRzWyR7aW5kZXh9XWAsIHNhZmVDb250ZW50LCBcImVuY3J5cHRpbmdDZXJ0aWZpY2F0ZVwiLCBcImVuY3J5cHRpb25BbGdvcml0aG1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIChzYWZlQ29udGVudC5lbmNyeXB0aW9uQWxnb3JpdGhtLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJhZXMtY2JjXCIpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgKHNhZmVDb250ZW50LmVuY3J5cHRpb25BbGdvcml0aG0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFlcy1nY21cIik6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IHBhcmFtZXRlciBcImVuY3J5cHRpb25BbGdvcml0aG1cIiBpbiBcInBhcmFtZXRlcnMuc2FmZUNvbnRlbnRzW2ldXCI6ICR7c2FmZUNvbnRlbnQuZW5jcnlwdGlvbkFsZ29yaXRobX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgKHNhZmVDb250ZW50LmVuY3J5cHRpb25BbGdvcml0aG0ubGVuZ3RoID09PSAxMjgpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgKHNhZmVDb250ZW50LmVuY3J5cHRpb25BbGdvcml0aG0ubGVuZ3RoID09PSAxOTIpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgKHNhZmVDb250ZW50LmVuY3J5cHRpb25BbGdvcml0aG0ubGVuZ3RoID09PSAyNTYpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluY29ycmVjdCBwYXJhbWV0ZXIgXCJlbmNyeXB0aW9uQWxnb3JpdGhtLmxlbmd0aFwiIGluIFwicGFyYW1ldGVycy5zYWZlQ29udGVudHNbaV1cIjogJHtzYWZlQ29udGVudC5lbmNyeXB0aW9uQWxnb3JpdGhtLmxlbmd0aH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRpb25BbGdvcml0aG0gPSBzYWZlQ29udGVudC5lbmNyeXB0aW9uQWxnb3JpdGhtO1xuICAgICAgICAgICAgICAgICAgICAgICAgY21zRW52ZWxvcGVkLmFkZFJlY2lwaWVudEJ5Q2VydGlmaWNhdGUoc2FmZUNvbnRlbnQuZW5jcnlwdGluZ0NlcnRpZmljYXRlLCB7fSwgdW5kZWZpbmVkLCBjcnlwdG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY21zRW52ZWxvcGVkLmVuY3J5cHQoZW5jcnlwdGlvbkFsZ29yaXRobSwgY29udGVudFRvRW5jcnlwdCwgY3J5cHRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FmZUNvbnRlbnRzLnB1c2gobmV3IENvbnRlbnRJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogXCIxLjIuODQwLjExMzU0OS4xLjcuM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNtc0VudmVsb3BlZC50b1NjaGVtYSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmNvcnJlY3QgdmFsdWUgZm9yIFwiY29udGVudC5wcml2YWN5TW9kZVwiOiAke2NvbnRlbnQucHJpdmFjeU1vZGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuQXV0aGVudGljYXRlZFNhZmUuQ0xBU1NfTkFNRSA9IFwiQXV0aGVudGljYXRlZFNhZmVcIjtcblxuY29uc3QgSEFTSF9BTEdPUklUSE0kMSA9IFwiaGFzaEFsZ29yaXRobVwiO1xuY29uc3QgSVNTVUVSX05BTUVfSEFTSCA9IFwiaXNzdWVyTmFtZUhhc2hcIjtcbmNvbnN0IElTU1VFUl9LRVlfSEFTSCA9IFwiaXNzdWVyS2V5SGFzaFwiO1xuY29uc3QgU0VSSUFMX05VTUJFUiQxID0gXCJzZXJpYWxOdW1iZXJcIjtcbmNvbnN0IENMRUFSX1BST1BTJGogPSBbXG4gICAgSEFTSF9BTEdPUklUSE0kMSxcbiAgICBJU1NVRVJfTkFNRV9IQVNILFxuICAgIElTU1VFUl9LRVlfSEFTSCxcbiAgICBTRVJJQUxfTlVNQkVSJDEsXG5dO1xuY2xhc3MgQ2VydElEIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlKGNlcnRpZmljYXRlLCBwYXJhbWV0ZXJzLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgY29uc3QgY2VydElEID0gbmV3IENlcnRJRCgpO1xuICAgICAgICBhd2FpdCBjZXJ0SUQuY3JlYXRlRm9yQ2VydGlmaWNhdGUoY2VydGlmaWNhdGUsIHBhcmFtZXRlcnMsIGNyeXB0byk7XG4gICAgICAgIHJldHVybiBjZXJ0SUQ7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmhhc2hBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBIQVNIX0FMR09SSVRITSQxLCBDZXJ0SUQuZGVmYXVsdFZhbHVlcyhIQVNIX0FMR09SSVRITSQxKSk7XG4gICAgICAgIHRoaXMuaXNzdWVyTmFtZUhhc2ggPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBJU1NVRVJfTkFNRV9IQVNILCBDZXJ0SUQuZGVmYXVsdFZhbHVlcyhJU1NVRVJfTkFNRV9IQVNIKSk7XG4gICAgICAgIHRoaXMuaXNzdWVyS2V5SGFzaCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElTU1VFUl9LRVlfSEFTSCwgQ2VydElELmRlZmF1bHRWYWx1ZXMoSVNTVUVSX0tFWV9IQVNIKSk7XG4gICAgICAgIHRoaXMuc2VyaWFsTnVtYmVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0VSSUFMX05VTUJFUiQxLCBDZXJ0SUQuZGVmYXVsdFZhbHVlcyhTRVJJQUxfTlVNQkVSJDEpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEhBU0hfQUxHT1JJVEhNJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIElTU1VFUl9OQU1FX0hBU0g6XG4gICAgICAgICAgICBjYXNlIElTU1VFUl9LRVlfSEFTSDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgY2FzZSBTRVJJQUxfTlVNQkVSJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBIQVNIX0FMR09SSVRITSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLmFsZ29yaXRobUlkID09PSBFTVBUWV9TVFJJTkcpICYmICgoXCJhbGdvcml0aG1QYXJhbXNcIiBpbiBtZW1iZXJWYWx1ZSkgPT09IGZhbHNlKSk7XG4gICAgICAgICAgICBjYXNlIElTU1VFUl9OQU1FX0hBU0g6XG4gICAgICAgICAgICBjYXNlIElTU1VFUl9LRVlfSEFTSDpcbiAgICAgICAgICAgIGNhc2UgU0VSSUFMX05VTUJFUiQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChDZXJ0SUQuZGVmYXVsdFZhbHVlcyhTRVJJQUxfTlVNQkVSJDEpKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmhhc2hBbGdvcml0aG1PYmplY3QgfHwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiAobmFtZXMuaGFzaEFsZ29yaXRobSB8fCBFTVBUWV9TVFJJTkcpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgbmFtZTogKG5hbWVzLmlzc3Vlck5hbWVIYXNoIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IG5hbWU6IChuYW1lcy5pc3N1ZXJLZXlIYXNoIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnNlcmlhbE51bWJlciB8fCBFTVBUWV9TVFJJTkcpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkaik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgQ2VydElELnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGhhc2hBbGdvcml0aG06IEhBU0hfQUxHT1JJVEhNJDEsXG4gICAgICAgICAgICAgICAgaXNzdWVyTmFtZUhhc2g6IElTU1VFUl9OQU1FX0hBU0gsXG4gICAgICAgICAgICAgICAgaXNzdWVyS2V5SGFzaDogSVNTVUVSX0tFWV9IQVNILFxuICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlcjogU0VSSUFMX05VTUJFUiQxXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5oYXNoQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0Lmhhc2hBbGdvcml0aG0gfSk7XG4gICAgICAgIHRoaXMuaXNzdWVyTmFtZUhhc2ggPSBhc24xLnJlc3VsdC5pc3N1ZXJOYW1lSGFzaDtcbiAgICAgICAgdGhpcy5pc3N1ZXJLZXlIYXNoID0gYXNuMS5yZXN1bHQuaXNzdWVyS2V5SGFzaDtcbiAgICAgICAgdGhpcy5zZXJpYWxOdW1iZXIgPSBhc24xLnJlc3VsdC5zZXJpYWxOdW1iZXI7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc2hBbGdvcml0aG0udG9TY2hlbWEoKSxcbiAgICAgICAgICAgICAgICB0aGlzLmlzc3Vlck5hbWVIYXNoLFxuICAgICAgICAgICAgICAgIHRoaXMuaXNzdWVyS2V5SGFzaCxcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbE51bWJlclxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhhc2hBbGdvcml0aG06IHRoaXMuaGFzaEFsZ29yaXRobS50b0pTT04oKSxcbiAgICAgICAgICAgIGlzc3Vlck5hbWVIYXNoOiB0aGlzLmlzc3Vlck5hbWVIYXNoLnRvSlNPTigpLFxuICAgICAgICAgICAgaXNzdWVyS2V5SGFzaDogdGhpcy5pc3N1ZXJLZXlIYXNoLnRvSlNPTigpLFxuICAgICAgICAgICAgc2VyaWFsTnVtYmVyOiB0aGlzLnNlcmlhbE51bWJlci50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaXNFcXVhbChjZXJ0aWZpY2F0ZUlEKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc2hBbGdvcml0aG0uYWxnb3JpdGhtSWQgIT09IGNlcnRpZmljYXRlSUQuaGFzaEFsZ29yaXRobS5hbGdvcml0aG1JZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKHRoaXMuaXNzdWVyTmFtZUhhc2gudmFsdWVCbG9jay52YWx1ZUhleFZpZXcsIGNlcnRpZmljYXRlSUQuaXNzdWVyTmFtZUhhc2gudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLmlzRXF1YWwodGhpcy5pc3N1ZXJLZXlIYXNoLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3LCBjZXJ0aWZpY2F0ZUlELmlzc3VlcktleUhhc2gudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnNlcmlhbE51bWJlci5pc0VxdWFsKGNlcnRpZmljYXRlSUQuc2VyaWFsTnVtYmVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVGb3JDZXJ0aWZpY2F0ZShjZXJ0aWZpY2F0ZSwgcGFyYW1ldGVycywgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIFBhcmFtZXRlckVycm9yLmFzc2VydChwYXJhbWV0ZXJzLCBIQVNIX0FMR09SSVRITSQxLCBcImlzc3VlckNlcnRpZmljYXRlXCIpO1xuICAgICAgICBjb25zdCBoYXNoT0lEID0gY3J5cHRvLmdldE9JREJ5QWxnb3JpdGhtKHsgbmFtZTogcGFyYW1ldGVycy5oYXNoQWxnb3JpdGhtIH0sIHRydWUsIFwiaGFzaEFsZ29yaXRobVwiKTtcbiAgICAgICAgdGhpcy5oYXNoQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoe1xuICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IGhhc2hPSUQsXG4gICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuTnVsbCgpXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBpc3N1ZXJDZXJ0aWZpY2F0ZSA9IHBhcmFtZXRlcnMuaXNzdWVyQ2VydGlmaWNhdGU7XG4gICAgICAgIHRoaXMuc2VyaWFsTnVtYmVyID0gY2VydGlmaWNhdGUuc2VyaWFsTnVtYmVyO1xuICAgICAgICBjb25zdCBoYXNoSXNzdWVyTmFtZSA9IGF3YWl0IGNyeXB0by5kaWdlc3QoeyBuYW1lOiBwYXJhbWV0ZXJzLmhhc2hBbGdvcml0aG0gfSwgaXNzdWVyQ2VydGlmaWNhdGUuc3ViamVjdC50b1NjaGVtYSgpLnRvQkVSKGZhbHNlKSk7XG4gICAgICAgIHRoaXMuaXNzdWVyTmFtZUhhc2ggPSBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IGhhc2hJc3N1ZXJOYW1lIH0pO1xuICAgICAgICBjb25zdCBpc3N1ZXJLZXlCdWZmZXIgPSBpc3N1ZXJDZXJ0aWZpY2F0ZS5zdWJqZWN0UHVibGljS2V5SW5mby5zdWJqZWN0UHVibGljS2V5LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3O1xuICAgICAgICBjb25zdCBoYXNoSXNzdWVyS2V5ID0gYXdhaXQgY3J5cHRvLmRpZ2VzdCh7IG5hbWU6IHBhcmFtZXRlcnMuaGFzaEFsZ29yaXRobSB9LCBpc3N1ZXJLZXlCdWZmZXIpO1xuICAgICAgICB0aGlzLmlzc3VlcktleUhhc2ggPSBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IGhhc2hJc3N1ZXJLZXkgfSk7XG4gICAgfVxufVxuQ2VydElELkNMQVNTX05BTUUgPSBcIkNlcnRJRFwiO1xuXG5jb25zdCBDRVJUX0lEID0gXCJjZXJ0SURcIjtcbmNvbnN0IENFUlRfU1RBVFVTID0gXCJjZXJ0U3RhdHVzXCI7XG5jb25zdCBUSElTX1VQREFURSA9IFwidGhpc1VwZGF0ZVwiO1xuY29uc3QgTkVYVF9VUERBVEUgPSBcIm5leHRVcGRhdGVcIjtcbmNvbnN0IFNJTkdMRV9FWFRFTlNJT05TID0gXCJzaW5nbGVFeHRlbnNpb25zXCI7XG5jb25zdCBDTEVBUl9QUk9QUyRpID0gW1xuICAgIENFUlRfSUQsXG4gICAgQ0VSVF9TVEFUVVMsXG4gICAgVEhJU19VUERBVEUsXG4gICAgTkVYVF9VUERBVEUsXG4gICAgU0lOR0xFX0VYVEVOU0lPTlMsXG5dO1xuY2xhc3MgU2luZ2xlUmVzcG9uc2UgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNlcnRJRCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENFUlRfSUQsIFNpbmdsZVJlc3BvbnNlLmRlZmF1bHRWYWx1ZXMoQ0VSVF9JRCkpO1xuICAgICAgICB0aGlzLmNlcnRTdGF0dXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDRVJUX1NUQVRVUywgU2luZ2xlUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhDRVJUX1NUQVRVUykpO1xuICAgICAgICB0aGlzLnRoaXNVcGRhdGUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBUSElTX1VQREFURSwgU2luZ2xlUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhUSElTX1VQREFURSkpO1xuICAgICAgICBpZiAoTkVYVF9VUERBVEUgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5uZXh0VXBkYXRlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTkVYVF9VUERBVEUsIFNpbmdsZVJlc3BvbnNlLmRlZmF1bHRWYWx1ZXMoTkVYVF9VUERBVEUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoU0lOR0xFX0VYVEVOU0lPTlMgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5zaW5nbGVFeHRlbnNpb25zID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lOR0xFX0VYVEVOU0lPTlMsIFNpbmdsZVJlc3BvbnNlLmRlZmF1bHRWYWx1ZXMoU0lOR0xFX0VYVEVOU0lPTlMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgQ0VSVF9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENlcnRJRCgpO1xuICAgICAgICAgICAgY2FzZSBDRVJUX1NUQVRVUzpcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICBjYXNlIFRISVNfVVBEQVRFOlxuICAgICAgICAgICAgY2FzZSBORVhUX1VQREFURTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoMCwgMCwgMCk7XG4gICAgICAgICAgICBjYXNlIFNJTkdMRV9FWFRFTlNJT05TOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgQ0VSVF9JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChDZXJ0SUQuY29tcGFyZVdpdGhEZWZhdWx0KFwiaGFzaEFsZ29yaXRobVwiLCBtZW1iZXJWYWx1ZS5oYXNoQWxnb3JpdGhtKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKENlcnRJRC5jb21wYXJlV2l0aERlZmF1bHQoXCJpc3N1ZXJOYW1lSGFzaFwiLCBtZW1iZXJWYWx1ZS5pc3N1ZXJOYW1lSGFzaCkpICYmXG4gICAgICAgICAgICAgICAgICAgIChDZXJ0SUQuY29tcGFyZVdpdGhEZWZhdWx0KFwiaXNzdWVyS2V5SGFzaFwiLCBtZW1iZXJWYWx1ZS5pc3N1ZXJLZXlIYXNoKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKENlcnRJRC5jb21wYXJlV2l0aERlZmF1bHQoXCJzZXJpYWxOdW1iZXJcIiwgbWVtYmVyVmFsdWUuc2VyaWFsTnVtYmVyKSkpO1xuICAgICAgICAgICAgY2FzZSBDRVJUX1NUQVRVUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKE9iamVjdC5rZXlzKG1lbWJlclZhbHVlKS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgY2FzZSBUSElTX1VQREFURTpcbiAgICAgICAgICAgIGNhc2UgTkVYVF9VUERBVEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gU2luZ2xlUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIENlcnRJRC5zY2hlbWEobmFtZXMuY2VydElEIHx8IHt9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNob2ljZSh7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlByaW1pdGl2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmNlcnRTdGF0dXMgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuY2VydFN0YXR1cyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuRW51bWVyYXRlZCgpXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5QcmltaXRpdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5jZXJ0U3RhdHVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5CbG9jazogeyBsZW5ndGg6IDEgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuR2VuZXJhbGl6ZWRUaW1lKHsgbmFtZTogKG5hbWVzLnRoaXNVcGRhdGUgfHwgRU1QVFlfU1RSSU5HKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyBuYW1lOiAobmFtZXMubmV4dFVwZGF0ZSB8fCBFTVBUWV9TVFJJTkcpIH0pXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtFeHRlbnNpb25zLnNjaGVtYShuYW1lcy5zaW5nbGVFeHRlbnNpb25zIHx8IHt9KV1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJGkpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFNpbmdsZVJlc3BvbnNlLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGNlcnRJRDoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBDRVJUX0lEXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNlcnRTdGF0dXM6IENFUlRfU1RBVFVTLFxuICAgICAgICAgICAgICAgIHRoaXNVcGRhdGU6IFRISVNfVVBEQVRFLFxuICAgICAgICAgICAgICAgIG5leHRVcGRhdGU6IE5FWFRfVVBEQVRFLFxuICAgICAgICAgICAgICAgIHNpbmdsZUV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogU0lOR0xFX0VYVEVOU0lPTlNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmNlcnRJRCA9IG5ldyBDZXJ0SUQoeyBzY2hlbWE6IGFzbjEucmVzdWx0LmNlcnRJRCB9KTtcbiAgICAgICAgdGhpcy5jZXJ0U3RhdHVzID0gYXNuMS5yZXN1bHQuY2VydFN0YXR1cztcbiAgICAgICAgdGhpcy50aGlzVXBkYXRlID0gYXNuMS5yZXN1bHQudGhpc1VwZGF0ZS50b0RhdGUoKTtcbiAgICAgICAgaWYgKE5FWFRfVVBEQVRFIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5uZXh0VXBkYXRlID0gYXNuMS5yZXN1bHQubmV4dFVwZGF0ZS50b0RhdGUoKTtcbiAgICAgICAgaWYgKFNJTkdMRV9FWFRFTlNJT05TIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5zaW5nbGVFeHRlbnNpb25zID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdC5zaW5nbGVFeHRlbnNpb25zLnZhbHVlQmxvY2sudmFsdWUsIGVsZW1lbnQgPT4gbmV3IEV4dGVuc2lvbih7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuY2VydElELnRvU2NoZW1hKCkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuY2VydFN0YXR1cyk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyB2YWx1ZURhdGU6IHRoaXMudGhpc1VwZGF0ZSB9KSk7XG4gICAgICAgIGlmICh0aGlzLm5leHRVcGRhdGUpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuR2VuZXJhbGl6ZWRUaW1lKHsgdmFsdWVEYXRlOiB0aGlzLm5leHRVcGRhdGUgfSldXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlRXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLnNpbmdsZUV4dGVuc2lvbnMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIGNlcnRJRDogdGhpcy5jZXJ0SUQudG9KU09OKCksXG4gICAgICAgICAgICBjZXJ0U3RhdHVzOiB0aGlzLmNlcnRTdGF0dXMudG9KU09OKCksXG4gICAgICAgICAgICB0aGlzVXBkYXRlOiB0aGlzLnRoaXNVcGRhdGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMubmV4dFVwZGF0ZSkge1xuICAgICAgICAgICAgcmVzLm5leHRVcGRhdGUgPSB0aGlzLm5leHRVcGRhdGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlRXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgcmVzLnNpbmdsZUV4dGVuc2lvbnMgPSBBcnJheS5mcm9tKHRoaXMuc2luZ2xlRXh0ZW5zaW9ucywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cblNpbmdsZVJlc3BvbnNlLkNMQVNTX05BTUUgPSBcIlNpbmdsZVJlc3BvbnNlXCI7XG5cbmNvbnN0IFRCUyQyID0gXCJ0YnNcIjtcbmNvbnN0IFZFUlNJT04kNyA9IFwidmVyc2lvblwiO1xuY29uc3QgUkVTUE9OREVSX0lEID0gXCJyZXNwb25kZXJJRFwiO1xuY29uc3QgUFJPRFVDRURfQVQgPSBcInByb2R1Y2VkQXRcIjtcbmNvbnN0IFJFU1BPTlNFUyA9IFwicmVzcG9uc2VzXCI7XG5jb25zdCBSRVNQT05TRV9FWFRFTlNJT05TID0gXCJyZXNwb25zZUV4dGVuc2lvbnNcIjtcbmNvbnN0IFJFU1BPTlNFX0RBVEEgPSBcIlJlc3BvbnNlRGF0YVwiO1xuY29uc3QgUkVTUE9OU0VfREFUQV9WRVJTSU9OID0gYCR7UkVTUE9OU0VfREFUQX0uJHtWRVJTSU9OJDd9YDtcbmNvbnN0IFJFU1BPTlNFX0RBVEFfUkVTUE9OREVSX0lEID0gYCR7UkVTUE9OU0VfREFUQX0uJHtSRVNQT05ERVJfSUR9YDtcbmNvbnN0IFJFU1BPTlNFX0RBVEFfUFJPRFVDRURfQVQgPSBgJHtSRVNQT05TRV9EQVRBfS4ke1BST0RVQ0VEX0FUfWA7XG5jb25zdCBSRVNQT05TRV9EQVRBX1JFU1BPTlNFUyA9IGAke1JFU1BPTlNFX0RBVEF9LiR7UkVTUE9OU0VTfWA7XG5jb25zdCBSRVNQT05TRV9EQVRBX1JFU1BPTlNFX0VYVEVOU0lPTlMgPSBgJHtSRVNQT05TRV9EQVRBfS4ke1JFU1BPTlNFX0VYVEVOU0lPTlN9YDtcbmNvbnN0IENMRUFSX1BST1BTJGggPSBbXG4gICAgUkVTUE9OU0VfREFUQSxcbiAgICBSRVNQT05TRV9EQVRBX1ZFUlNJT04sXG4gICAgUkVTUE9OU0VfREFUQV9SRVNQT05ERVJfSUQsXG4gICAgUkVTUE9OU0VfREFUQV9QUk9EVUNFRF9BVCxcbiAgICBSRVNQT05TRV9EQVRBX1JFU1BPTlNFUyxcbiAgICBSRVNQT05TRV9EQVRBX1JFU1BPTlNFX0VYVEVOU0lPTlNcbl07XG5jbGFzcyBSZXNwb25zZURhdGEgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGdldCB0YnMoKSB7XG4gICAgICAgIHJldHVybiBwdnRzdXRpbHMuQnVmZmVyU291cmNlQ29udmVydGVyLnRvQXJyYXlCdWZmZXIodGhpcy50YnNWaWV3KTtcbiAgICB9XG4gICAgc2V0IHRicyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRic1ZpZXcgPSBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRic1ZpZXcgPSBuZXcgVWludDhBcnJheShwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBUQlMkMiwgUmVzcG9uc2VEYXRhLmRlZmF1bHRWYWx1ZXMoVEJTJDIpKSk7XG4gICAgICAgIGlmIChWRVJTSU9OJDcgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiQ3LCBSZXNwb25zZURhdGEuZGVmYXVsdFZhbHVlcyhWRVJTSU9OJDcpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc3BvbmRlcklEID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVTUE9OREVSX0lELCBSZXNwb25zZURhdGEuZGVmYXVsdFZhbHVlcyhSRVNQT05ERVJfSUQpKTtcbiAgICAgICAgdGhpcy5wcm9kdWNlZEF0ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUFJPRFVDRURfQVQsIFJlc3BvbnNlRGF0YS5kZWZhdWx0VmFsdWVzKFBST0RVQ0VEX0FUKSk7XG4gICAgICAgIHRoaXMucmVzcG9uc2VzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVTUE9OU0VTLCBSZXNwb25zZURhdGEuZGVmYXVsdFZhbHVlcyhSRVNQT05TRVMpKTtcbiAgICAgICAgaWYgKFJFU1BPTlNFX0VYVEVOU0lPTlMgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUV4dGVuc2lvbnMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBSRVNQT05TRV9FWFRFTlNJT05TLCBSZXNwb25zZURhdGEuZGVmYXVsdFZhbHVlcyhSRVNQT05TRV9FWFRFTlNJT05TKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kNzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgVEJTJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0JVRkZFUjtcbiAgICAgICAgICAgIGNhc2UgUkVTUE9OREVSX0lEOlxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIGNhc2UgUFJPRFVDRURfQVQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKDAsIDAsIDApO1xuICAgICAgICAgICAgY2FzZSBSRVNQT05TRVM6XG4gICAgICAgICAgICBjYXNlIFJFU1BPTlNFX0VYVEVOU0lPTlM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBUQlMkMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmJ5dGVMZW5ndGggPT09IDApO1xuICAgICAgICAgICAgY2FzZSBSRVNQT05ERVJfSUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChPYmplY3Qua2V5cyhtZW1iZXJWYWx1ZSkubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGNhc2UgUFJPRFVDRURfQVQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gUmVzcG9uc2VEYXRhLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpO1xuICAgICAgICAgICAgY2FzZSBSRVNQT05TRVM6XG4gICAgICAgICAgICBjYXNlIFJFU1BPTlNFX0VYVEVOU0lPTlM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBSRVNQT05TRV9EQVRBKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy52ZXJzaW9uIHx8IFJFU1BPTlNFX0RBVEFfVkVSU0lPTikgfSldXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5DaG9pY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLnJlc3BvbmRlcklEIHx8IFJFU1BPTlNFX0RBVEFfUkVTUE9OREVSX0lEKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMuc2NoZW1hKG5hbWVzLlJlc3BvbnNlRGF0YUJ5TmFtZSB8fCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogXCJSZXNwb25zZURhdGEuYnlOYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5yZXNwb25kZXJJRCB8fCBSRVNQT05TRV9EQVRBX1JFU1BPTkRFUl9JRCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuUmVzcG9uc2VEYXRhQnlLZXkgfHwgXCJSZXNwb25zZURhdGEuYnlLZXlcIikgfSldXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyBuYW1lOiAobmFtZXMucHJvZHVjZWRBdCB8fCBSRVNQT05TRV9EQVRBX1BST0RVQ0VEX0FUKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFJFU1BPTlNFX0RBVEFfUkVTUE9OU0VTLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTaW5nbGVSZXNwb25zZS5zY2hlbWEobmFtZXMucmVzcG9uc2UgfHwge30pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW0V4dGVuc2lvbnMuc2NoZW1hKG5hbWVzLmV4dGVuc2lvbnMgfHwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogUkVTUE9OU0VfREFUQV9SRVNQT05TRV9FWFRFTlNJT05TXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRoKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBSZXNwb25zZURhdGEuc2NoZW1hKCkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnRic1ZpZXcgPSBhc24xLnJlc3VsdC5SZXNwb25zZURhdGEudmFsdWVCZWZvcmVEZWNvZGVWaWV3O1xuICAgICAgICBpZiAoUkVTUE9OU0VfREFUQV9WRVJTSU9OIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gYXNuMS5yZXN1bHRbUkVTUE9OU0VfREFUQV9WRVJTSU9OXS52YWx1ZUJsb2NrLnZhbHVlRGVjO1xuICAgICAgICBpZiAoYXNuMS5yZXN1bHRbUkVTUE9OU0VfREFUQV9SRVNQT05ERVJfSURdLmlkQmxvY2sudGFnTnVtYmVyID09PSAxKVxuICAgICAgICAgICAgdGhpcy5yZXNwb25kZXJJRCA9IG5ldyBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcyh7IHNjaGVtYTogYXNuMS5yZXN1bHRbUkVTUE9OU0VfREFUQV9SRVNQT05ERVJfSURdLnZhbHVlQmxvY2sudmFsdWVbMF0gfSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMucmVzcG9uZGVySUQgPSBhc24xLnJlc3VsdFtSRVNQT05TRV9EQVRBX1JFU1BPTkRFUl9JRF0udmFsdWVCbG9jay52YWx1ZVswXTtcbiAgICAgICAgdGhpcy5wcm9kdWNlZEF0ID0gYXNuMS5yZXN1bHRbUkVTUE9OU0VfREFUQV9QUk9EVUNFRF9BVF0udG9EYXRlKCk7XG4gICAgICAgIHRoaXMucmVzcG9uc2VzID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdFtSRVNQT05TRV9EQVRBX1JFU1BPTlNFU10sIGVsZW1lbnQgPT4gbmV3IFNpbmdsZVJlc3BvbnNlKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICAgICAgaWYgKFJFU1BPTlNFX0RBVEFfUkVTUE9OU0VfRVhURU5TSU9OUyBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VFeHRlbnNpb25zID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdFtSRVNQT05TRV9EQVRBX1JFU1BPTlNFX0VYVEVOU0lPTlNdLnZhbHVlQmxvY2sudmFsdWUsIGVsZW1lbnQgPT4gbmV3IEV4dGVuc2lvbih7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKGVuY29kZUZsYWcgPSBmYWxzZSkge1xuICAgICAgICBsZXQgdGJzU2NoZW1hO1xuICAgICAgICBpZiAoZW5jb2RlRmxhZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50YnNWaWV3LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVzcG9uc2VEYXRhLnNjaGVtYSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5mcm9tQkVSKHRoaXMudGJzVmlldyk7XG4gICAgICAgICAgICBBc25FcnJvci5hc3NlcnQoYXNuMSwgXCJUQlMgUmVzcG9uc2UgRGF0YVwiKTtcbiAgICAgICAgICAgIHRic1NjaGVtYSA9IGFzbjEucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgICAgIGlmIChWRVJTSU9OJDcgaW4gdGhpcykge1xuICAgICAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KV1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNwb25kZXJJRCBpbnN0YW5jZW9mIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFt0aGlzLnJlc3BvbmRlcklELnRvU2NoZW1hKCldXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFt0aGlzLnJlc3BvbmRlcklEXVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyB2YWx1ZURhdGU6IHRoaXMucHJvZHVjZWRBdCB9KSk7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMucmVzcG9uc2VzLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc3BvbnNlRXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5yZXNwb25zZUV4dGVuc2lvbnMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGJzU2NoZW1hID0gbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGJzU2NoZW1hO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgICAgICBpZiAoVkVSU0lPTiQ3IGluIHRoaXMpIHtcbiAgICAgICAgICAgIHJlcy52ZXJzaW9uID0gdGhpcy52ZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlc3BvbmRlcklEKSB7XG4gICAgICAgICAgICByZXMucmVzcG9uZGVySUQgPSB0aGlzLnJlc3BvbmRlcklEO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb2R1Y2VkQXQpIHtcbiAgICAgICAgICAgIHJlcy5wcm9kdWNlZEF0ID0gdGhpcy5wcm9kdWNlZEF0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNlcykge1xuICAgICAgICAgICAgcmVzLnJlc3BvbnNlcyA9IEFycmF5LmZyb20odGhpcy5yZXNwb25zZXMsIG8gPT4gby50b0pTT04oKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VFeHRlbnNpb25zKSB7XG4gICAgICAgICAgICByZXMucmVzcG9uc2VFeHRlbnNpb25zID0gQXJyYXkuZnJvbSh0aGlzLnJlc3BvbnNlRXh0ZW5zaW9ucywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cblJlc3BvbnNlRGF0YS5DTEFTU19OQU1FID0gXCJSZXNwb25zZURhdGFcIjtcblxuY29uc3QgVFJVU1RFRF9DRVJUUyA9IFwidHJ1c3RlZENlcnRzXCI7XG5jb25zdCBDRVJUUyQyID0gXCJjZXJ0c1wiO1xuY29uc3QgQ1JMUyQxID0gXCJjcmxzXCI7XG5jb25zdCBPQ1NQUyQxID0gXCJvY3Nwc1wiO1xuY29uc3QgQ0hFQ0tfREFURSA9IFwiY2hlY2tEYXRlXCI7XG5jb25zdCBGSU5EX09SSUdJTiA9IFwiZmluZE9yaWdpblwiO1xuY29uc3QgRklORF9JU1NVRVIgPSBcImZpbmRJc3N1ZXJcIjtcbnZhciBDaGFpblZhbGlkYXRpb25Db2RlO1xuKGZ1bmN0aW9uIChDaGFpblZhbGlkYXRpb25Db2RlKSB7XG4gICAgQ2hhaW5WYWxpZGF0aW9uQ29kZVtDaGFpblZhbGlkYXRpb25Db2RlW1widW5rbm93blwiXSA9IC0xXSA9IFwidW5rbm93blwiO1xuICAgIENoYWluVmFsaWRhdGlvbkNvZGVbQ2hhaW5WYWxpZGF0aW9uQ29kZVtcInN1Y2Nlc3NcIl0gPSAwXSA9IFwic3VjY2Vzc1wiO1xuICAgIENoYWluVmFsaWRhdGlvbkNvZGVbQ2hhaW5WYWxpZGF0aW9uQ29kZVtcIm5vUmV2b2NhdGlvblwiXSA9IDExXSA9IFwibm9SZXZvY2F0aW9uXCI7XG4gICAgQ2hhaW5WYWxpZGF0aW9uQ29kZVtDaGFpblZhbGlkYXRpb25Db2RlW1wibm9QYXRoXCJdID0gNjBdID0gXCJub1BhdGhcIjtcbiAgICBDaGFpblZhbGlkYXRpb25Db2RlW0NoYWluVmFsaWRhdGlvbkNvZGVbXCJub1ZhbGlkUGF0aFwiXSA9IDk3XSA9IFwibm9WYWxpZFBhdGhcIjtcbn0pKENoYWluVmFsaWRhdGlvbkNvZGUgfHwgKENoYWluVmFsaWRhdGlvbkNvZGUgPSB7fSkpO1xuY2xhc3MgQ2hhaW5WYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoY29kZSwgbWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gQ2hhaW5WYWxpZGF0aW9uRXJyb3IuTkFNRTtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG59XG5DaGFpblZhbGlkYXRpb25FcnJvci5OQU1FID0gXCJDaGFpblZhbGlkYXRpb25FcnJvclwiO1xuZnVuY3Rpb24gaXNUcnVzdGVkKGNlcnQsIHRydXN0ZWRMaXN0KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cnVzdGVkTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKGNlcnQudGJzVmlldywgdHJ1c3RlZExpc3RbaV0udGJzVmlldykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmNsYXNzIENlcnRpZmljYXRlQ2hhaW5WYWxpZGF0aW9uRW5naW5lIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgdGhpcy50cnVzdGVkQ2VydHMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBUUlVTVEVEX0NFUlRTLCB0aGlzLmRlZmF1bHRWYWx1ZXMoVFJVU1RFRF9DRVJUUykpO1xuICAgICAgICB0aGlzLmNlcnRzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ0VSVFMkMiwgdGhpcy5kZWZhdWx0VmFsdWVzKENFUlRTJDIpKTtcbiAgICAgICAgdGhpcy5jcmxzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ1JMUyQxLCB0aGlzLmRlZmF1bHRWYWx1ZXMoQ1JMUyQxKSk7XG4gICAgICAgIHRoaXMub2NzcHMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPQ1NQUyQxLCB0aGlzLmRlZmF1bHRWYWx1ZXMoT0NTUFMkMSkpO1xuICAgICAgICB0aGlzLmNoZWNrRGF0ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIENIRUNLX0RBVEUsIHRoaXMuZGVmYXVsdFZhbHVlcyhDSEVDS19EQVRFKSk7XG4gICAgICAgIHRoaXMuZmluZE9yaWdpbiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEZJTkRfT1JJR0lOLCB0aGlzLmRlZmF1bHRWYWx1ZXMoRklORF9PUklHSU4pKTtcbiAgICAgICAgdGhpcy5maW5kSXNzdWVyID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRklORF9JU1NVRVIsIHRoaXMuZGVmYXVsdFZhbHVlcyhGSU5EX0lTU1VFUikpO1xuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdEZpbmRPcmlnaW4oY2VydGlmaWNhdGUsIHZhbGlkYXRpb25FbmdpbmUpIHtcbiAgICAgICAgaWYgKGNlcnRpZmljYXRlLnRic1ZpZXcuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY2VydGlmaWNhdGUudGJzVmlldyA9IG5ldyBVaW50OEFycmF5KGNlcnRpZmljYXRlLmVuY29kZVRCUygpLnRvQkVSKCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgbG9jYWxDZXJ0IG9mIHZhbGlkYXRpb25FbmdpbmUuY2VydHMpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbENlcnQudGJzVmlldy5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxDZXJ0LnRic1ZpZXcgPSBuZXcgVWludDhBcnJheShsb2NhbENlcnQuZW5jb2RlVEJTKCkudG9CRVIoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKGNlcnRpZmljYXRlLnRic1ZpZXcsIGxvY2FsQ2VydC50YnNWaWV3KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJJbnRlcm1lZGlhdGUgQ2VydGlmaWNhdGVzXCI7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0cnVzdGVkQ2VydCBvZiB2YWxpZGF0aW9uRW5naW5lLnRydXN0ZWRDZXJ0cykge1xuICAgICAgICAgICAgaWYgKHRydXN0ZWRDZXJ0LnRic1ZpZXcuYnl0ZUxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICB0cnVzdGVkQ2VydC50YnNWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodHJ1c3RlZENlcnQuZW5jb2RlVEJTKCkudG9CRVIoKSk7XG4gICAgICAgICAgICBpZiAocHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKGNlcnRpZmljYXRlLnRic1ZpZXcsIHRydXN0ZWRDZXJ0LnRic1ZpZXcpKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIlRydXN0ZWQgQ2VydGlmaWNhdGVzXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiVW5rbm93blwiO1xuICAgIH1cbiAgICBhc3luYyBkZWZhdWx0RmluZElzc3VlcihjZXJ0aWZpY2F0ZSwgdmFsaWRhdGlvbkVuZ2luZSwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXQga2V5SWRlbnRpZmllciA9IG51bGw7XG4gICAgICAgIGxldCBhdXRob3JpdHlDZXJ0SXNzdWVyID0gbnVsbDtcbiAgICAgICAgbGV0IGF1dGhvcml0eUNlcnRTZXJpYWxOdW1iZXIgPSBudWxsO1xuICAgICAgICBpZiAoY2VydGlmaWNhdGUuc3ViamVjdC5pc0VxdWFsKGNlcnRpZmljYXRlLmlzc3VlcikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyaWZpY2F0aW9uUmVzdWx0ID0gYXdhaXQgY2VydGlmaWNhdGUudmVyaWZ5KHVuZGVmaW5lZCwgY3J5cHRvKTtcbiAgICAgICAgICAgICAgICBpZiAodmVyaWZpY2F0aW9uUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbY2VydGlmaWNhdGVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjZXJ0aWZpY2F0ZS5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV4dGVuc2lvbiBvZiBjZXJ0aWZpY2F0ZS5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5leHRuSUQgPT09IGlkX0F1dGhvcml0eUtleUlkZW50aWZpZXIgJiYgZXh0ZW5zaW9uLnBhcnNlZFZhbHVlIGluc3RhbmNlb2YgQXV0aG9yaXR5S2V5SWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLnBhcnNlZFZhbHVlLmtleUlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleUlkZW50aWZpZXIgPSBleHRlbnNpb24ucGFyc2VkVmFsdWUua2V5SWRlbnRpZmllcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb24ucGFyc2VkVmFsdWUuYXV0aG9yaXR5Q2VydElzc3Vlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eUNlcnRJc3N1ZXIgPSBleHRlbnNpb24ucGFyc2VkVmFsdWUuYXV0aG9yaXR5Q2VydElzc3VlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb24ucGFyc2VkVmFsdWUuYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eUNlcnRTZXJpYWxOdW1iZXIgPSBleHRlbnNpb24ucGFyc2VkVmFsdWUuYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tDZXJ0aWZpY2F0ZShwb3NzaWJsZUlzc3Vlcikge1xuICAgICAgICAgICAgaWYgKGtleUlkZW50aWZpZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAocG9zc2libGVJc3N1ZXIuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXh0ZW5zaW9uRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBleHRlbnNpb24gb2YgcG9zc2libGVJc3N1ZXIuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5leHRuSUQgPT09IGlkX1N1YmplY3RLZXlJZGVudGlmaWVyICYmIGV4dGVuc2lvbi5wYXJzZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbkZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKGV4dGVuc2lvbi5wYXJzZWRWYWx1ZS52YWx1ZUJsb2NrLnZhbHVlSGV4LCBrZXlJZGVudGlmaWVyLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwb3NzaWJsZUlzc3Vlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb25Gb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGF1dGhvcml0eUNlcnRTZXJpYWxOdW1iZXJFcXVhbCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGF1dGhvcml0eUNlcnRTZXJpYWxOdW1iZXIgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlckVxdWFsID0gcG9zc2libGVJc3N1ZXIuc2VyaWFsTnVtYmVyLmlzRXF1YWwoYXV0aG9yaXR5Q2VydFNlcmlhbE51bWJlcik7XG4gICAgICAgICAgICBpZiAoYXV0aG9yaXR5Q2VydElzc3VlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChwb3NzaWJsZUlzc3Vlci5zdWJqZWN0LmlzRXF1YWwoYXV0aG9yaXR5Q2VydElzc3VlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhvcml0eUNlcnRTZXJpYWxOdW1iZXJFcXVhbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHBvc3NpYmxlSXNzdWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY2VydGlmaWNhdGUuaXNzdWVyLmlzRXF1YWwocG9zc2libGVJc3N1ZXIuc3ViamVjdCkpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHBvc3NpYmxlSXNzdWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRydXN0ZWRDZXJ0IG9mIHZhbGlkYXRpb25FbmdpbmUudHJ1c3RlZENlcnRzKSB7XG4gICAgICAgICAgICBjaGVja0NlcnRpZmljYXRlKHRydXN0ZWRDZXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGludGVybWVkaWF0ZUNlcnQgb2YgdmFsaWRhdGlvbkVuZ2luZS5jZXJ0cykge1xuICAgICAgICAgICAgY2hlY2tDZXJ0aWZpY2F0ZShpbnRlcm1lZGlhdGVDZXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gcmVzdWx0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcmlmaWNhdGlvblJlc3VsdCA9IGF3YWl0IGNlcnRpZmljYXRlLnZlcmlmeShyZXN1bHRbaV0sIGNyeXB0byk7XG4gICAgICAgICAgICAgICAgaWYgKHZlcmlmaWNhdGlvblJlc3VsdCA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVFJVU1RFRF9DRVJUUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjYXNlIENFUlRTJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY2FzZSBDUkxTJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY2FzZSBPQ1NQUyQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNhc2UgQ0hFQ0tfREFURTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGNhc2UgRklORF9PUklHSU46XG4gICAgICAgICAgICAgICAgcmV0dXJuIENlcnRpZmljYXRlQ2hhaW5WYWxpZGF0aW9uRW5naW5lLmRlZmF1bHRGaW5kT3JpZ2luO1xuICAgICAgICAgICAgY2FzZSBGSU5EX0lTU1VFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0RmluZElzc3VlcjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1lbWJlciBuYW1lIGZvciBDZXJ0aWZpY2F0ZUNoYWluVmFsaWRhdGlvbkVuZ2luZSBjbGFzczogJHttZW1iZXJOYW1lfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNvcnQocGFzc2VkV2hlbk5vdFJldlZhbHVlcyA9IGZhbHNlLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgY29uc3QgbG9jYWxDZXJ0cyA9IFtdO1xuICAgICAgICBjb25zdCBidWlsZFBhdGggPSBhc3luYyAoY2VydGlmaWNhdGUsIGNyeXB0bykgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1VuaXF1ZShhcnJheSkge1xuICAgICAgICAgICAgICAgIGxldCB1bmlxdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhcnJheS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IGkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlbaV0gPT09IGFycmF5W2pdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF1bmlxdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuaXF1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1RydXN0ZWQoY2VydGlmaWNhdGUsIHRoaXMudHJ1c3RlZENlcnRzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbW2NlcnRpZmljYXRlXV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmaW5kSXNzdWVyUmVzdWx0ID0gYXdhaXQgdGhpcy5maW5kSXNzdWVyKGNlcnRpZmljYXRlLCB0aGlzLCBjcnlwdG8pO1xuICAgICAgICAgICAgaWYgKGZpbmRJc3N1ZXJSZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsaWQgY2VydGlmaWNhdGUgcGF0aHMgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbmRJc3N1ZXJSZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKGZpbmRJc3N1ZXJSZXN1bHRbaV0udGJzVmlldywgY2VydGlmaWNhdGUudGJzVmlldykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goW2ZpbmRJc3N1ZXJSZXN1bHRbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWxkUGF0aFJlc3VsdCA9IGF3YWl0IGJ1aWxkUGF0aChmaW5kSXNzdWVyUmVzdWx0W2ldLCBjcnlwdG8pO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYnVpbGRQYXRoUmVzdWx0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvcHkgPSBidWlsZFBhdGhSZXN1bHRbal0uc2xpY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgY29weS5zcGxpY2UoMCwgMCwgZmluZElzc3VlclJlc3VsdFtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1VuaXF1ZShjb3B5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNvcHkpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChidWlsZFBhdGhSZXN1bHRbal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpbmRDUkwgPSBhc3luYyAoY2VydGlmaWNhdGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzc3VlckNlcnRpZmljYXRlcyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgY3JscyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgY3Jsc0FuZENlcnRpZmljYXRlcyA9IFtdO1xuICAgICAgICAgICAgaXNzdWVyQ2VydGlmaWNhdGVzLnB1c2goLi4ubG9jYWxDZXJ0cy5maWx0ZXIoZWxlbWVudCA9PiBjZXJ0aWZpY2F0ZS5pc3N1ZXIuaXNFcXVhbChlbGVtZW50LnN1YmplY3QpKSk7XG4gICAgICAgICAgICBpZiAoaXNzdWVyQ2VydGlmaWNhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTWVzc2FnZTogXCJObyBjZXJ0aWZpY2F0ZSdzIGlzc3VlcnNcIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjcmxzLnB1c2goLi4udGhpcy5jcmxzLmZpbHRlcihvID0+IG8uaXNzdWVyLmlzRXF1YWwoY2VydGlmaWNhdGUuaXNzdWVyKSkpO1xuICAgICAgICAgICAgaWYgKGNybHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNNZXNzYWdlOiBcIk5vIENSTHMgZm9yIHNwZWNpZmljIGNlcnRpZmljYXRlIGlzc3VlclwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3Jscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNybCA9IGNybHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGNybC5uZXh0VXBkYXRlICYmIGNybC5uZXh0VXBkYXRlLnZhbHVlIDwgdGhpcy5jaGVja0RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaXNzdWVyQ2VydGlmaWNhdGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmxzW2ldLnZlcmlmeSh7IGlzc3VlckNlcnRpZmljYXRlOiBpc3N1ZXJDZXJ0aWZpY2F0ZXNbal0gfSwgY3J5cHRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmxzQW5kQ2VydGlmaWNhdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmw6IGNybHNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlcnRpZmljYXRlOiBpc3N1ZXJDZXJ0aWZpY2F0ZXNbal1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjcmxzQW5kQ2VydGlmaWNhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTWVzc2FnZTogRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGNybHNBbmRDZXJ0aWZpY2F0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDMsXG4gICAgICAgICAgICAgICAgc3RhdHVzTWVzc2FnZTogXCJObyB2YWxpZCBDUkxzIGZvdW5kXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpbmRPQ1NQID0gYXN5bmMgKGNlcnRpZmljYXRlLCBpc3N1ZXJDZXJ0aWZpY2F0ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFzaEFsZ29yaXRobSA9IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRChjZXJ0aWZpY2F0ZS5zaWduYXR1cmVBbGdvcml0aG0uYWxnb3JpdGhtSWQpO1xuICAgICAgICAgICAgaWYgKCFoYXNoQWxnb3JpdGhtLm5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaGFzaEFsZ29yaXRobS5oYXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2NzcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvY3NwID0gdGhpcy5vY3Nwc1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvY3NwLmdldENlcnRpZmljYXRlU3RhdHVzKGNlcnRpZmljYXRlLCBpc3N1ZXJDZXJ0aWZpY2F0ZSwgY3J5cHRvKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmlzRm9yQ2VydGlmaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgIH07XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yQ0EoY2VydGlmaWNhdGUsIG5lZWRUb0NoZWNrQ1JMID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGxldCBpc0NBID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgbXVzdEJlQ0EgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBrZXlVc2FnZVByZXNlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBjUkxTaWduID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoY2VydGlmaWNhdGUuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2VydGlmaWNhdGUuZXh0ZW5zaW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBjZXJ0aWZpY2F0ZS5leHRlbnNpb25zW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLmNyaXRpY2FsICYmICFleHRlbnNpb24ucGFyc2VkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRDb2RlOiA2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdE1lc3NhZ2U6IGBVbmFibGUgdG8gcGFyc2UgY3JpdGljYWwgY2VydGlmaWNhdGUgZXh0ZW5zaW9uOiAke2V4dGVuc2lvbi5leHRuSUR9YFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLmV4dG5JRCA9PT0gaWRfS2V5VXNhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVVzYWdlUHJlc2VudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoZXh0ZW5zaW9uLnBhcnNlZFZhbHVlLnZhbHVlQmxvY2sudmFsdWVIZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2aWV3WzBdICYgMHgwNCkgPT09IDB4MDQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVzdEJlQ0EgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2aWV3WzBdICYgMHgwMikgPT09IDB4MDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY1JMU2lnbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5leHRuSUQgPT09IGlkX0Jhc2ljQ29uc3RyYWludHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImNBXCIgaW4gZXh0ZW5zaW9uLnBhcnNlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5wYXJzZWRWYWx1ZS5jQSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDQSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChtdXN0QmVDQSA9PT0gdHJ1ZSkgJiYgKGlzQ0EgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvZGU6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBcIlVuYWJsZSB0byBidWlsZCBjZXJ0aWZpY2F0ZSBjaGFpbiAtIHVzaW5nIFxcXCJrZXlDZXJ0U2lnblxcXCIgZmxhZyBzZXQgd2l0aG91dCBCYXNpY0NvbnN0cmFpbnRzXCJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChrZXlVc2FnZVByZXNlbnQgPT09IHRydWUpICYmIChpc0NBID09PSB0cnVlKSAmJiAobXVzdEJlQ0EgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvZGU6IDQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBcIlVuYWJsZSB0byBidWlsZCBjZXJ0aWZpY2F0ZSBjaGFpbiAtIFxcXCJrZXlDZXJ0U2lnblxcXCIgZmxhZyB3YXMgbm90IHNldFwiXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoaXNDQSA9PT0gdHJ1ZSkgJiYgKGtleVVzYWdlUHJlc2VudCA9PT0gdHJ1ZSkgJiYgKChuZWVkVG9DaGVja0NSTCkgJiYgKGNSTFNpZ24gPT09IGZhbHNlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRDb2RlOiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZTogXCJVbmFibGUgdG8gYnVpbGQgY2VydGlmaWNhdGUgY2hhaW4gLSBpbnRlcm1lZGlhdGUgY2VydGlmaWNhdGUgbXVzdCBoYXZlIFxcXCJjUkxTaWduXFxcIiBrZXkgdXNhZ2UgZmxhZ1wiXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQ0EgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q29kZTogNyxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZTogXCJVbmFibGUgdG8gYnVpbGQgY2VydGlmaWNhdGUgY2hhaW4gLSBtb3JlIHRoYW4gb25lIHBvc3NpYmxlIGVuZC11c2VyIGNlcnRpZmljYXRlXCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVzdWx0Q29kZTogMCxcbiAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBFTVBUWV9TVFJJTkdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmFzaWNDaGVjayA9IGFzeW5jIChwYXRoLCBjaGVja0RhdGUpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgocGF0aFtpXS5ub3RCZWZvcmUudmFsdWUgPiBjaGVja0RhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgIChwYXRoW2ldLm5vdEFmdGVyLnZhbHVlIDwgY2hlY2tEYXRlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvZGU6IDgsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBcIlRoZSBjZXJ0aWZpY2F0ZSBpcyBlaXRoZXIgbm90IHlldCB2YWxpZCBvciBleHBpcmVkXCJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q29kZTogOSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZTogXCJUb28gc2hvcnQgY2VydGlmaWNhdGUgcGF0aFwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAocGF0aC5sZW5ndGggLSAyKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBpZiAocGF0aFtpXS5pc3N1ZXIuaXNFcXVhbChwYXRoW2ldLnN1YmplY3QpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aFtpXS5pc3N1ZXIuaXNFcXVhbChwYXRoW2kgKyAxXS5zdWJqZWN0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRDb2RlOiAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBcIkluY29ycmVjdCBuYW1lIGNoYWluaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHRoaXMuY3Jscy5sZW5ndGggIT09IDApIHx8ICh0aGlzLm9jc3BzLmxlbmd0aCAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IChwYXRoLmxlbmd0aCAtIDEpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9jc3BSZXN1bHQgPSAyO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3JsUmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzTWVzc2FnZTogRU1QVFlfU1RSSU5HXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9jc3BzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2NzcFJlc3VsdCA9IGF3YWl0IGZpbmRPQ1NQKHBhdGhbaV0sIHBhdGhbaSArIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob2NzcFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvZGU6IDEyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZTogXCJPbmUgb2YgY2VydGlmaWNhdGVzIHdhcyByZXZva2VkIHZpYSBPQ1NQIHJlc3BvbnNlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jcmxzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JsUmVzdWx0ID0gYXdhaXQgZmluZENSTChwYXRoW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjcmxSZXN1bHQuc3RhdHVzID09PSAwICYmIGNybFJlc3VsdC5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNybFJlc3VsdC5yZXN1bHQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDZXJ0aWZpY2F0ZVJldm9rZWQgPSBjcmxSZXN1bHQucmVzdWx0W2pdLmNybC5pc0NlcnRpZmljYXRlUmV2b2tlZChwYXRoW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ2VydGlmaWNhdGVSZXZva2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q29kZTogMTIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZTogXCJPbmUgb2YgY2VydGlmaWNhdGVzIGhhZCBiZWVuIHJldm9rZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0NlcnRpZmljYXRlQ0EgPSBhd2FpdCBjaGVja0ZvckNBKGNybFJlc3VsdC5yZXN1bHRbal0uY2VydGlmaWNhdGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDZXJ0aWZpY2F0ZUNBLnJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRDb2RlOiAxMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBcIkNSTCBpc3N1ZXIgY2VydGlmaWNhdGUgaXMgbm90IGEgQ0EgY2VydGlmaWNhdGUgb3IgZG9lcyBub3QgaGF2ZSBjcmxTaWduIGZsYWdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXNzZWRXaGVuTm90UmV2VmFsdWVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2hhaW5WYWxpZGF0aW9uRXJyb3IoQ2hhaW5WYWxpZGF0aW9uQ29kZS5ub1Jldm9jYXRpb24sIGBObyByZXZvY2F0aW9uIHZhbHVlcyBmb3VuZCBmb3Igb25lIG9mIGNlcnRpZmljYXRlczogJHtjcmxSZXN1bHQuc3RhdHVzTWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2NzcFJlc3VsdCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvZGU6IDExLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBcIk5vIHJldm9jYXRpb24gdmFsdWVzIGZvdW5kIGZvciBvbmUgb2YgY2VydGlmaWNhdGVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgob2NzcFJlc3VsdCA9PT0gMikgJiYgKGNybFJlc3VsdC5zdGF0dXMgPT09IDIpICYmIHBhc3NlZFdoZW5Ob3RSZXZWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzc3VlckNlcnRpZmljYXRlID0gcGF0aFtpICsgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXh0ZW5zaW9uRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZXJDZXJ0aWZpY2F0ZS5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBleHRlbnNpb24gb2YgaXNzdWVyQ2VydGlmaWNhdGUuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGV4dGVuc2lvbi5leHRuSUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgaWRfQ1JMRGlzdHJpYnV0aW9uUG9pbnRzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBpZF9GcmVzaGVzdENSTDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgaWRfQXV0aG9yaXR5SW5mb0FjY2VzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25Gb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uRm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2hhaW5WYWxpZGF0aW9uRXJyb3IoQ2hhaW5WYWxpZGF0aW9uQ29kZS5ub1Jldm9jYXRpb24sIGBObyByZXZvY2F0aW9uIHZhbHVlcyBmb3VuZCBmb3Igb25lIG9mIGNlcnRpZmljYXRlczogJHtjcmxSZXN1bHQuc3RhdHVzTWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2ksIGNlcnRdIG9mIHBhdGguZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGVja0ZvckNBKGNlcnQpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvZGU6IDE0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZTogXCJPbmUgb2YgaW50ZXJtZWRpYXRlIGNlcnRpZmljYXRlcyBpcyBub3QgYSBDQSBjZXJ0aWZpY2F0ZVwiXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIGxvY2FsQ2VydHMucHVzaCguLi50aGlzLnRydXN0ZWRDZXJ0cyk7XG4gICAgICAgIGxvY2FsQ2VydHMucHVzaCguLi50aGlzLmNlcnRzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbENlcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxvY2FsQ2VydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gailcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgaWYgKHB2dHN1dGlscy5CdWZmZXJTb3VyY2VDb252ZXJ0ZXIuaXNFcXVhbChsb2NhbENlcnRzW2ldLnRic1ZpZXcsIGxvY2FsQ2VydHNbal0udGJzVmlldykpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxDZXJ0cy5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGVhZkNlcnQgPSBsb2NhbENlcnRzW2xvY2FsQ2VydHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGNvbnN0IGNlcnRpZmljYXRlUGF0aCA9IFtsZWFmQ2VydF07XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGJ1aWxkUGF0aChsZWFmQ2VydCwgY3J5cHRvKTtcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBDaGFpblZhbGlkYXRpb25FcnJvcihDaGFpblZhbGlkYXRpb25Db2RlLm5vUGF0aCwgXCJVbmFibGUgdG8gZmluZCBjZXJ0aWZpY2F0ZSBwYXRoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSByZXN1bHQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAocmVzdWx0W2ldKS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlcnRpZmljYXRlID0gKHJlc3VsdFtpXSlbal07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLnRydXN0ZWRDZXJ0cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci5pc0VxdWFsKGNlcnRpZmljYXRlLnRic1ZpZXcsIHRoaXMudHJ1c3RlZENlcnRzW2tdLnRic1ZpZXcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBDaGFpblZhbGlkYXRpb25FcnJvcihDaGFpblZhbGlkYXRpb25Db2RlLm5vVmFsaWRQYXRoLCBcIk5vIHZhbGlkIGNlcnRpZmljYXRlIHBhdGhzIGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaG9ydGVzdExlbmd0aCA9IHJlc3VsdFswXS5sZW5ndGg7XG4gICAgICAgIGxldCBzaG9ydGVzdEluZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHRbaV0ubGVuZ3RoIDwgc2hvcnRlc3RMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzaG9ydGVzdExlbmd0aCA9IHJlc3VsdFtpXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgc2hvcnRlc3RJbmRleCA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHRbc2hvcnRlc3RJbmRleF0ubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBjZXJ0aWZpY2F0ZVBhdGgucHVzaCgocmVzdWx0W3Nob3J0ZXN0SW5kZXhdKVtpXSk7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGJhc2ljQ2hlY2soY2VydGlmaWNhdGVQYXRoLCB0aGlzLmNoZWNrRGF0ZSk7XG4gICAgICAgIGlmIChyZXN1bHQucmVzdWx0ID09PSBmYWxzZSlcbiAgICAgICAgICAgIHRocm93IHJlc3VsdDtcbiAgICAgICAgcmV0dXJuIGNlcnRpZmljYXRlUGF0aDtcbiAgICB9XG4gICAgYXN5bmMgdmVyaWZ5KHBhcmFtZXRlcnMgPSB7fSwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNvbXBhcmVETlNOYW1lKG5hbWUsIGNvbnN0cmFpbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVQcmVwYXJlZCA9IHN0cmluZ1ByZXAobmFtZSk7XG4gICAgICAgICAgICBjb25zdCBjb25zdHJhaW50UHJlcGFyZWQgPSBzdHJpbmdQcmVwKGNvbnN0cmFpbnQpO1xuICAgICAgICAgICAgY29uc3QgbmFtZVNwbGl0dGVkID0gbmFtZVByZXBhcmVkLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0cmFpbnRTcGxpdHRlZCA9IGNvbnN0cmFpbnRQcmVwYXJlZC5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICBjb25zdCBuYW1lTGVuID0gbmFtZVNwbGl0dGVkLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0ckxlbiA9IGNvbnN0cmFpbnRTcGxpdHRlZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoKG5hbWVMZW4gPT09IDApIHx8IChjb25zdHJMZW4gPT09IDApIHx8IChuYW1lTGVuIDwgY29uc3RyTGVuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZUxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWVTcGxpdHRlZFtpXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uc3RyTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uc3RyYWludFNwbGl0dGVkW2ldLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnN0ckxlbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnN0ckxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnN0cmFpbnRTcGxpdHRlZFtjb25zdHJMZW4gLSAxIC0gaV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmFtZVNwbGl0dGVkW25hbWVMZW4gLSAxIC0gaV0ubG9jYWxlQ29tcGFyZShjb25zdHJhaW50U3BsaXR0ZWRbY29uc3RyTGVuIC0gMSAtIGldKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY29tcGFyZVJGQzgyMk5hbWUobmFtZSwgY29uc3RyYWludCkge1xuICAgICAgICAgICAgY29uc3QgbmFtZVByZXBhcmVkID0gc3RyaW5nUHJlcChuYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0cmFpbnRQcmVwYXJlZCA9IHN0cmluZ1ByZXAoY29uc3RyYWludCk7XG4gICAgICAgICAgICBjb25zdCBuYW1lU3BsaXR0ZWQgPSBuYW1lUHJlcGFyZWQuc3BsaXQoXCJAXCIpO1xuICAgICAgICAgICAgY29uc3QgY29uc3RyYWludFNwbGl0dGVkID0gY29uc3RyYWludFByZXBhcmVkLnNwbGl0KFwiQFwiKTtcbiAgICAgICAgICAgIGlmICgobmFtZVNwbGl0dGVkLmxlbmd0aCA9PT0gMCkgfHwgKGNvbnN0cmFpbnRTcGxpdHRlZC5sZW5ndGggPT09IDApIHx8IChuYW1lU3BsaXR0ZWQubGVuZ3RoIDwgY29uc3RyYWludFNwbGl0dGVkLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKGNvbnN0cmFpbnRTcGxpdHRlZC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjb21wYXJlRE5TTmFtZShuYW1lU3BsaXR0ZWRbMV0sIGNvbnN0cmFpbnRTcGxpdHRlZFswXSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBucyA9IG5hbWVTcGxpdHRlZFsxXS5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNzID0gY29uc3RyYWludFNwbGl0dGVkWzBdLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNzWzBdLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnMubGVuZ3RoID09PSBjcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAobmFtZVByZXBhcmVkLmxvY2FsZUNvbXBhcmUoY29uc3RyYWludFByZXBhcmVkKSA9PT0gMCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY29tcGFyZVVuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXIobmFtZSwgY29uc3RyYWludCkge1xuICAgICAgICAgICAgbGV0IG5hbWVQcmVwYXJlZCA9IHN0cmluZ1ByZXAobmFtZSk7XG4gICAgICAgICAgICBjb25zdCBjb25zdHJhaW50UHJlcGFyZWQgPSBzdHJpbmdQcmVwKGNvbnN0cmFpbnQpO1xuICAgICAgICAgICAgY29uc3QgbnMgPSBuYW1lUHJlcGFyZWQuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgY29uc3QgY3MgPSBjb25zdHJhaW50UHJlcGFyZWQuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgaWYgKGNzLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKG5zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgobnNbaV0ubGVuZ3RoID4gMCkgJiYgKG5zW2ldLmNoYXJBdChuc1tpXS5sZW5ndGggLSAxKSAhPT0gXCI6XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuc1BvcnQgPSBuc1tpXS5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lUHJlcGFyZWQgPSBuc1BvcnRbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXBhcmVETlNOYW1lKG5hbWVQcmVwYXJlZCwgY29uc3RyYWludFByZXBhcmVkKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lU3BsaXR0ZWQgPSBuYW1lUHJlcGFyZWQuc3BsaXQoXCIuXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0cmFpbnRTcGxpdHRlZCA9IGNvbnN0cmFpbnRQcmVwYXJlZC5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnN0cmFpbnRTcGxpdHRlZFswXS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lU3BsaXR0ZWQubGVuZ3RoID09PSBjb25zdHJhaW50U3BsaXR0ZWQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNvbXBhcmVJUEFkZHJlc3MobmFtZSwgY29uc3RyYWludCkge1xuICAgICAgICAgICAgY29uc3QgbmFtZVZpZXcgPSBuYW1lLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3O1xuICAgICAgICAgICAgY29uc3QgY29uc3RyYWludFZpZXcgPSBjb25zdHJhaW50LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3O1xuICAgICAgICAgICAgaWYgKChuYW1lVmlldy5sZW5ndGggPT09IDQpICYmIChjb25zdHJhaW50Vmlldy5sZW5ndGggPT09IDgpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChuYW1lVmlld1tpXSBeIGNvbnN0cmFpbnRWaWV3W2ldKSAmIGNvbnN0cmFpbnRWaWV3W2kgKyA0XSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKG5hbWVWaWV3Lmxlbmd0aCA9PT0gMTYpICYmIChjb25zdHJhaW50Vmlldy5sZW5ndGggPT09IDMyKSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKG5hbWVWaWV3W2ldIF4gY29uc3RyYWludFZpZXdbaV0pICYgY29uc3RyYWludFZpZXdbaSArIDE2XSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY29tcGFyZURpcmVjdG9yeU5hbWUobmFtZSwgY29uc3RyYWludCkge1xuICAgICAgICAgICAgaWYgKChuYW1lLnR5cGVzQW5kVmFsdWVzLmxlbmd0aCA9PT0gMCkgfHwgKGNvbnN0cmFpbnQudHlwZXNBbmRWYWx1ZXMubGVuZ3RoID09PSAwKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChuYW1lLnR5cGVzQW5kVmFsdWVzLmxlbmd0aCA8IGNvbnN0cmFpbnQudHlwZXNBbmRWYWx1ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IG5hbWVTdGFydCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnN0cmFpbnQudHlwZXNBbmRWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbG9jYWxSZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gbmFtZVN0YXJ0OyBqIDwgbmFtZS50eXBlc0FuZFZhbHVlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFJlc3VsdCA9IG5hbWUudHlwZXNBbmRWYWx1ZXNbal0uaXNFcXVhbChjb25zdHJhaW50LnR5cGVzQW5kVmFsdWVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUudHlwZXNBbmRWYWx1ZXNbal0udHlwZSA9PT0gY29uc3RyYWludC50eXBlc0FuZFZhbHVlc1tpXS50eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmIGxvY2FsUmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobmFtZVN0YXJ0ID09PSAwKSB8fCAobmFtZVN0YXJ0ID09PSBqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVTdGFydCA9IGogKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobG9jYWxSZXN1bHQgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKG5hbWVTdGFydCA9PT0gMCkgPyBmYWxzZSA6IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2VydHMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVtcHR5IGNlcnRpZmljYXRlIGFycmF5XCIpO1xuICAgICAgICAgICAgY29uc3QgcGFzc2VkV2hlbk5vdFJldlZhbHVlcyA9IHBhcmFtZXRlcnMucGFzc2VkV2hlbk5vdFJldlZhbHVlcyB8fCBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxQb2xpY3lTZXQgPSBwYXJhbWV0ZXJzLmluaXRpYWxQb2xpY3lTZXQgfHwgW2lkX0FueVBvbGljeV07XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsRXhwbGljaXRQb2xpY3kgPSBwYXJhbWV0ZXJzLmluaXRpYWxFeHBsaWNpdFBvbGljeSB8fCBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxQb2xpY3lNYXBwaW5nSW5oaWJpdCA9IHBhcmFtZXRlcnMuaW5pdGlhbFBvbGljeU1hcHBpbmdJbmhpYml0IHx8IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgaW5pdGlhbEluaGliaXRQb2xpY3kgPSBwYXJhbWV0ZXJzLmluaXRpYWxJbmhpYml0UG9saWN5IHx8IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgaW5pdGlhbFBlcm1pdHRlZFN1YnRyZWVzU2V0ID0gcGFyYW1ldGVycy5pbml0aWFsUGVybWl0dGVkU3VidHJlZXNTZXQgfHwgW107XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsRXhjbHVkZWRTdWJ0cmVlc1NldCA9IHBhcmFtZXRlcnMuaW5pdGlhbEV4Y2x1ZGVkU3VidHJlZXNTZXQgfHwgW107XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsUmVxdWlyZWROYW1lRm9ybXMgPSBwYXJhbWV0ZXJzLmluaXRpYWxSZXF1aXJlZE5hbWVGb3JtcyB8fCBbXTtcbiAgICAgICAgICAgIGxldCBleHBsaWNpdFBvbGljeUluZGljYXRvciA9IGluaXRpYWxFeHBsaWNpdFBvbGljeTtcbiAgICAgICAgICAgIGxldCBwb2xpY3lNYXBwaW5nSW5oaWJpdEluZGljYXRvciA9IGluaXRpYWxQb2xpY3lNYXBwaW5nSW5oaWJpdDtcbiAgICAgICAgICAgIGxldCBpbmhpYml0QW55UG9saWN5SW5kaWNhdG9yID0gaW5pdGlhbEluaGliaXRQb2xpY3k7XG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nQ29uc3RyYWludHMgPSBbXG4gICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgbGV0IGV4cGxpY2l0UG9saWN5UGVuZGluZyA9IDA7XG4gICAgICAgICAgICBsZXQgcG9saWN5TWFwcGluZ0luaGliaXRQZW5kaW5nID0gMDtcbiAgICAgICAgICAgIGxldCBpbmhpYml0QW55UG9saWN5UGVuZGluZyA9IDA7XG4gICAgICAgICAgICBsZXQgcGVybWl0dGVkU3VidHJlZXMgPSBpbml0aWFsUGVybWl0dGVkU3VidHJlZXNTZXQ7XG4gICAgICAgICAgICBsZXQgZXhjbHVkZWRTdWJ0cmVlcyA9IGluaXRpYWxFeGNsdWRlZFN1YnRyZWVzU2V0O1xuICAgICAgICAgICAgY29uc3QgcmVxdWlyZWROYW1lRm9ybXMgPSBpbml0aWFsUmVxdWlyZWROYW1lRm9ybXM7XG4gICAgICAgICAgICBsZXQgcGF0aERlcHRoID0gMTtcbiAgICAgICAgICAgIHRoaXMuY2VydHMgPSBhd2FpdCB0aGlzLnNvcnQocGFzc2VkV2hlbk5vdFJldlZhbHVlcywgY3J5cHRvKTtcbiAgICAgICAgICAgIGNvbnN0IGFsbFBvbGljaWVzID0gW107XG4gICAgICAgICAgICBhbGxQb2xpY2llcy5wdXNoKGlkX0FueVBvbGljeSk7XG4gICAgICAgICAgICBjb25zdCBwb2xpY2llc0FuZENlcnRzID0gW107XG4gICAgICAgICAgICBjb25zdCBhbnlQb2xpY3lBcnJheSA9IG5ldyBBcnJheSh0aGlzLmNlcnRzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8ICh0aGlzLmNlcnRzLmxlbmd0aCAtIDEpOyBpaSsrKVxuICAgICAgICAgICAgICAgIGFueVBvbGljeUFycmF5W2lpXSA9IHRydWU7XG4gICAgICAgICAgICBwb2xpY2llc0FuZENlcnRzLnB1c2goYW55UG9saWN5QXJyYXkpO1xuICAgICAgICAgICAgY29uc3QgcG9saWN5TWFwcGluZ3MgPSBuZXcgQXJyYXkodGhpcy5jZXJ0cy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIGNvbnN0IGNlcnRQb2xpY2llcyA9IG5ldyBBcnJheSh0aGlzLmNlcnRzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgbGV0IGV4cGxpY2l0UG9saWN5U3RhcnQgPSAoZXhwbGljaXRQb2xpY3lJbmRpY2F0b3IpID8gKHRoaXMuY2VydHMubGVuZ3RoIC0gMSkgOiAoLTEpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9ICh0aGlzLmNlcnRzLmxlbmd0aCAtIDIpOyBpID49IDA7IGktLSwgcGF0aERlcHRoKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjZXJ0ID0gdGhpcy5jZXJ0c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoY2VydC5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2VydC5leHRlbnNpb25zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBjZXJ0LmV4dGVuc2lvbnNbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLmV4dG5JRCA9PT0gaWRfQ2VydGlmaWNhdGVQb2xpY2llcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlcnRQb2xpY2llc1tpXSA9IGV4dGVuc2lvbi5wYXJzZWRWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IGFsbFBvbGljaWVzLmxlbmd0aDsgcysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxQb2xpY2llc1tzXSA9PT0gaWRfQW55UG9saWN5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgKHBvbGljaWVzQW5kQ2VydHNbc10pW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBleHRlbnNpb24ucGFyc2VkVmFsdWUuY2VydGlmaWNhdGVQb2xpY2llcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9saWN5SW5kZXggPSAoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lJZCA9IGV4dGVuc2lvbi5wYXJzZWRWYWx1ZS5jZXJ0aWZpY2F0ZVBvbGljaWVzW2tdLnBvbGljeUlkZW50aWZpZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgYWxsUG9saWNpZXMubGVuZ3RoOyBzKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lJZCA9PT0gYWxsUG9saWNpZXNbc10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lJbmRleCA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeUluZGV4ID09PSAoLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxQb2xpY2llcy5wdXNoKHBvbGljeUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlcnRBcnJheSA9IG5ldyBBcnJheSh0aGlzLmNlcnRzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VydEFycmF5W2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljaWVzQW5kQ2VydHMucHVzaChjZXJ0QXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwb2xpY2llc0FuZENlcnRzW3BvbGljeUluZGV4XSlbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb24uZXh0bklEID09PSBpZF9Qb2xpY3lNYXBwaW5ncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lNYXBwaW5nSW5oaWJpdEluZGljYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvZGU6IDk4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZTogXCJQb2xpY3kgbWFwcGluZyBwcm9oaWJpdGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5TWFwcGluZ3NbaV0gPSBleHRlbnNpb24ucGFyc2VkVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLmV4dG5JRCA9PT0gaWRfUG9saWN5Q29uc3RyYWludHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwbGljaXRQb2xpY3lJbmRpY2F0b3IgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb24ucGFyc2VkVmFsdWUucmVxdWlyZUV4cGxpY2l0UG9saWN5ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBsaWNpdFBvbGljeUluZGljYXRvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBsaWNpdFBvbGljeVN0YXJ0ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nQ29uc3RyYWludHNbMF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0NvbnN0cmFpbnRzWzBdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBsaWNpdFBvbGljeVBlbmRpbmcgPSBleHRlbnNpb24ucGFyc2VkVmFsdWUucmVxdWlyZUV4cGxpY2l0UG9saWN5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGxpY2l0UG9saWN5UGVuZGluZyA9IChleHBsaWNpdFBvbGljeVBlbmRpbmcgPiBleHRlbnNpb24ucGFyc2VkVmFsdWUucmVxdWlyZUV4cGxpY2l0UG9saWN5KSA/IGV4dGVuc2lvbi5wYXJzZWRWYWx1ZS5yZXF1aXJlRXhwbGljaXRQb2xpY3kgOiBleHBsaWNpdFBvbGljeVBlbmRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5wYXJzZWRWYWx1ZS5pbmhpYml0UG9saWN5TWFwcGluZyA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeU1hcHBpbmdJbmhpYml0SW5kaWNhdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ0NvbnN0cmFpbnRzWzFdID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdDb25zdHJhaW50c1sxXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5TWFwcGluZ0luaGliaXRQZW5kaW5nID0gZXh0ZW5zaW9uLnBhcnNlZFZhbHVlLmluaGliaXRQb2xpY3lNYXBwaW5nICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lNYXBwaW5nSW5oaWJpdFBlbmRpbmcgPSAocG9saWN5TWFwcGluZ0luaGliaXRQZW5kaW5nID4gKGV4dGVuc2lvbi5wYXJzZWRWYWx1ZS5pbmhpYml0UG9saWN5TWFwcGluZyArIDEpKSA/IChleHRlbnNpb24ucGFyc2VkVmFsdWUuaW5oaWJpdFBvbGljeU1hcHBpbmcgKyAxKSA6IHBvbGljeU1hcHBpbmdJbmhpYml0UGVuZGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb24uZXh0bklEID09PSBpZF9JbmhpYml0QW55UG9saWN5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluaGliaXRBbnlQb2xpY3lJbmRpY2F0b3IgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb24ucGFyc2VkVmFsdWUudmFsdWVCbG9jay52YWx1ZURlYyA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGliaXRBbnlQb2xpY3lJbmRpY2F0b3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nQ29uc3RyYWludHNbMl0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0NvbnN0cmFpbnRzWzJdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhpYml0QW55UG9saWN5UGVuZGluZyA9IGV4dGVuc2lvbi5wYXJzZWRWYWx1ZS52YWx1ZUJsb2NrLnZhbHVlRGVjO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGliaXRBbnlQb2xpY3lQZW5kaW5nID0gKGluaGliaXRBbnlQb2xpY3lQZW5kaW5nID4gZXh0ZW5zaW9uLnBhcnNlZFZhbHVlLnZhbHVlQmxvY2sudmFsdWVEZWMpID8gZXh0ZW5zaW9uLnBhcnNlZFZhbHVlLnZhbHVlQmxvY2sudmFsdWVEZWMgOiBpbmhpYml0QW55UG9saWN5UGVuZGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5oaWJpdEFueVBvbGljeUluZGljYXRvciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvbGljeUluZGV4ID0gKC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHNlYXJjaEFueVBvbGljeSA9IDA7IHNlYXJjaEFueVBvbGljeSA8IGFsbFBvbGljaWVzLmxlbmd0aDsgc2VhcmNoQW55UG9saWN5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxsUG9saWNpZXNbc2VhcmNoQW55UG9saWN5XSA9PT0gaWRfQW55UG9saWN5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeUluZGV4ID0gc2VhcmNoQW55UG9saWN5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9saWN5SW5kZXggIT09ICgtMSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIChwb2xpY2llc0FuZENlcnRzWzBdKVtpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwbGljaXRQb2xpY3lJbmRpY2F0b3IgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ0NvbnN0cmFpbnRzWzBdID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwbGljaXRQb2xpY3lQZW5kaW5nLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cGxpY2l0UG9saWN5UGVuZGluZyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBsaWNpdFBvbGljeUluZGljYXRvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGxpY2l0UG9saWN5U3RhcnQgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nQ29uc3RyYWludHNbMF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeU1hcHBpbmdJbmhpYml0SW5kaWNhdG9yID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdDb25zdHJhaW50c1sxXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeU1hcHBpbmdJbmhpYml0UGVuZGluZy0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lNYXBwaW5nSW5oaWJpdFBlbmRpbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5TWFwcGluZ0luaGliaXRJbmRpY2F0b3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nQ29uc3RyYWludHNbMV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluaGliaXRBbnlQb2xpY3lJbmRpY2F0b3IgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ0NvbnN0cmFpbnRzWzJdID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oaWJpdEFueVBvbGljeVBlbmRpbmctLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5oaWJpdEFueVBvbGljeVBlbmRpbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oaWJpdEFueVBvbGljeUluZGljYXRvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdDb25zdHJhaW50c1syXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKHRoaXMuY2VydHMubGVuZ3RoIC0gMSk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgoaSA8ICh0aGlzLmNlcnRzLmxlbmd0aCAtIDIpKSAmJiAodHlwZW9mIHBvbGljeU1hcHBpbmdzW2kgKyAxXSAhPT0gXCJ1bmRlZmluZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBwb2xpY3lNYXBwaW5nc1tpICsgMV0ubWFwcGluZ3MubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocG9saWN5TWFwcGluZ3NbaSArIDFdLm1hcHBpbmdzW2tdLmlzc3VlckRvbWFpblBvbGljeSA9PT0gaWRfQW55UG9saWN5KSB8fCAocG9saWN5TWFwcGluZ3NbaSArIDFdLm1hcHBpbmdzW2tdLnN1YmplY3REb21haW5Qb2xpY3kgPT09IGlkX0FueVBvbGljeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRDb2RlOiA5OSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZTogXCJUaGUgXFxcImFueVBvbGljeVxcXCIgc2hvdWxkIG5vdCBiZSBhIHBhcnQgb2YgcG9saWN5IG1hcHBpbmcgc2NoZW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzc3VlckRvbWFpblBvbGljeUluZGV4ID0gKC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWJqZWN0RG9tYWluUG9saWN5SW5kZXggPSAoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBhbGxQb2xpY2llcy5sZW5ndGg7IG4rKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxQb2xpY2llc1tuXSA9PT0gcG9saWN5TWFwcGluZ3NbaSArIDFdLm1hcHBpbmdzW2tdLmlzc3VlckRvbWFpblBvbGljeSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVyRG9tYWluUG9saWN5SW5kZXggPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxQb2xpY2llc1tuXSA9PT0gcG9saWN5TWFwcGluZ3NbaSArIDFdLm1hcHBpbmdzW2tdLnN1YmplY3REb21haW5Qb2xpY3kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3REb21haW5Qb2xpY3lJbmRleCA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChwb2xpY2llc0FuZENlcnRzW2lzc3VlckRvbWFpblBvbGljeUluZGV4XSlbaV0gIT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIChwb2xpY2llc0FuZENlcnRzW2lzc3VlckRvbWFpblBvbGljeUluZGV4XSlbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNlcnRQb2xpY2llc1tpXS5jZXJ0aWZpY2F0ZVBvbGljaWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeU1hcHBpbmdzW2kgKyAxXS5tYXBwaW5nc1trXS5zdWJqZWN0RG9tYWluUG9saWN5ID09PSBjZXJ0UG9saWNpZXNbaV0uY2VydGlmaWNhdGVQb2xpY2llc1tqXS5wb2xpY3lJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaXNzdWVyRG9tYWluUG9saWN5SW5kZXggIT09ICgtMSkpICYmIChzdWJqZWN0RG9tYWluUG9saWN5SW5kZXggIT09ICgtMSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8PSBpOyBtKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChwb2xpY2llc0FuZENlcnRzW3N1YmplY3REb21haW5Qb2xpY3lJbmRleF0pW21dICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwb2xpY2llc0FuZENlcnRzW2lzc3VlckRvbWFpblBvbGljeUluZGV4XSlbbV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgKHBvbGljaWVzQW5kQ2VydHNbc3ViamVjdERvbWFpblBvbGljeUluZGV4XSlbbV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxQb2xpY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChhbGxQb2xpY2llc1tpXSA9PT0gaWRfQW55UG9saWN5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZXhwbGljaXRQb2xpY3lTdGFydDsgaisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIChwb2xpY2llc0FuZENlcnRzW2ldKVtqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdXRoQ29uc3RyUG9saWNpZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9saWNpZXNBbmRDZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAodGhpcy5jZXJ0cy5sZW5ndGggLSAxKTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhbnlQb2xpY3lGb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGogPCBleHBsaWNpdFBvbGljeVN0YXJ0KSAmJiAoYWxsUG9saWNpZXNbaV0gPT09IGlkX0FueVBvbGljeSkgJiYgKGFsbFBvbGljaWVzLmxlbmd0aCA+IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAocG9saWNpZXNBbmRDZXJ0c1tpXSlbal0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqID49IGV4cGxpY2l0UG9saWN5U3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGFsbFBvbGljaWVzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxQb2xpY2llc1trXSA9PT0gaWRfQW55UG9saWN5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHBvbGljaWVzQW5kQ2VydHNba10pW2pdID09PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFueVBvbGljeUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbnlQb2xpY3lGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kID09PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICBhdXRoQ29uc3RyUG9saWNpZXMucHVzaChhbGxQb2xpY2llc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdXNlckNvbnN0clBvbGljaWVzID0gW107XG4gICAgICAgICAgICBpZiAoKGluaXRpYWxQb2xpY3lTZXQubGVuZ3RoID09PSAxKSAmJiAoaW5pdGlhbFBvbGljeVNldFswXSA9PT0gaWRfQW55UG9saWN5KSAmJiAoZXhwbGljaXRQb2xpY3lJbmRpY2F0b3IgPT09IGZhbHNlKSlcbiAgICAgICAgICAgICAgICB1c2VyQ29uc3RyUG9saWNpZXMgPSBpbml0aWFsUG9saWN5U2V0O1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKChhdXRoQ29uc3RyUG9saWNpZXMubGVuZ3RoID09PSAxKSAmJiAoYXV0aENvbnN0clBvbGljaWVzWzBdID09PSBpZF9BbnlQb2xpY3kpKVxuICAgICAgICAgICAgICAgICAgICB1c2VyQ29uc3RyUG9saWNpZXMgPSBpbml0aWFsUG9saWN5U2V0O1xuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF1dGhDb25zdHJQb2xpY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbml0aWFsUG9saWN5U2V0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChpbml0aWFsUG9saWN5U2V0W2pdID09PSBhdXRoQ29uc3RyUG9saWNpZXNbaV0pIHx8IChpbml0aWFsUG9saWN5U2V0W2pdID09PSBpZF9BbnlQb2xpY3kpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJDb25zdHJQb2xpY2llcy5wdXNoKGF1dGhDb25zdHJQb2xpY2llc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBvbGljeVJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICh1c2VyQ29uc3RyUG9saWNpZXMubGVuZ3RoID4gMCksXG4gICAgICAgICAgICAgICAgcmVzdWx0Q29kZTogMCxcbiAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiAodXNlckNvbnN0clBvbGljaWVzLmxlbmd0aCA+IDApID8gRU1QVFlfU1RSSU5HIDogXCJaZXJvIFxcXCJ1c2VyQ29uc3RyUG9saWNpZXNcXFwiIGFycmF5LCBubyBpbnRlcnNlY3Rpb25zIHdpdGggXFxcImF1dGhDb25zdHJQb2xpY2llc1xcXCJcIixcbiAgICAgICAgICAgICAgICBhdXRoQ29uc3RyUG9saWNpZXMsXG4gICAgICAgICAgICAgICAgdXNlckNvbnN0clBvbGljaWVzLFxuICAgICAgICAgICAgICAgIGV4cGxpY2l0UG9saWN5SW5kaWNhdG9yLFxuICAgICAgICAgICAgICAgIHBvbGljeU1hcHBpbmdzLFxuICAgICAgICAgICAgICAgIGNlcnRpZmljYXRlUGF0aDogdGhpcy5jZXJ0c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh1c2VyQ29uc3RyUG9saWNpZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBwb2xpY3lSZXN1bHQ7XG4gICAgICAgICAgICBpZiAocG9saWN5UmVzdWx0LnJlc3VsdCA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvbGljeVJlc3VsdDtcbiAgICAgICAgICAgIHBhdGhEZXB0aCA9IDE7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gKHRoaXMuY2VydHMubGVuZ3RoIC0gMik7IGkgPj0gMDsgaS0tLCBwYXRoRGVwdGgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlcnQgPSB0aGlzLmNlcnRzW2ldO1xuICAgICAgICAgICAgICAgIGxldCBzdWJqZWN0QWx0TmFtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgY2VydFBlcm1pdHRlZFN1YnRyZWVzID0gW107XG4gICAgICAgICAgICAgICAgbGV0IGNlcnRFeGNsdWRlZFN1YnRyZWVzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGNlcnQuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNlcnQuZXh0ZW5zaW9ucy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gY2VydC5leHRlbnNpb25zW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5leHRuSUQgPT09IGlkX05hbWVDb25zdHJhaW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInBlcm1pdHRlZFN1YnRyZWVzXCIgaW4gZXh0ZW5zaW9uLnBhcnNlZFZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZXJ0UGVybWl0dGVkU3VidHJlZXMgPSBjZXJ0UGVybWl0dGVkU3VidHJlZXMuY29uY2F0KGV4dGVuc2lvbi5wYXJzZWRWYWx1ZS5wZXJtaXR0ZWRTdWJ0cmVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiZXhjbHVkZWRTdWJ0cmVlc1wiIGluIGV4dGVuc2lvbi5wYXJzZWRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VydEV4Y2x1ZGVkU3VidHJlZXMgPSBjZXJ0RXhjbHVkZWRTdWJ0cmVlcy5jb25jYXQoZXh0ZW5zaW9uLnBhcnNlZFZhbHVlLmV4Y2x1ZGVkU3VidHJlZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5leHRuSUQgPT09IGlkX1N1YmplY3RBbHROYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3RBbHROYW1lcyA9IHN1YmplY3RBbHROYW1lcy5jb25jYXQoZXh0ZW5zaW9uLnBhcnNlZFZhbHVlLmFsdE5hbWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgZm9ybUZvdW5kID0gKHJlcXVpcmVkTmFtZUZvcm1zLmxlbmd0aCA8PSAwKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlcXVpcmVkTmFtZUZvcm1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVxdWlyZWROYW1lRm9ybXNbal0uYmFzZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWROYW1lRm9ybXNbal0uYmFzZS52YWx1ZS50eXBlc0FuZFZhbHVlcy5sZW5ndGggIT09IGNlcnQuc3ViamVjdC50eXBlc0FuZFZhbHVlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjZXJ0LnN1YmplY3QudHlwZXNBbmRWYWx1ZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZXJ0LnN1YmplY3QudHlwZXNBbmRWYWx1ZXNba10udHlwZSAhPT0gcmVxdWlyZWROYW1lRm9ybXNbal0uYmFzZS52YWx1ZS50eXBlc0FuZFZhbHVlc1trXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1Gb3VuZCA9PT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZvcm1Gb3VuZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9saWN5UmVzdWx0LnJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBwb2xpY3lSZXN1bHQucmVzdWx0Q29kZSA9IDIxO1xuICAgICAgICAgICAgICAgICAgICBwb2xpY3lSZXN1bHQucmVzdWx0TWVzc2FnZSA9IFwiTm8gbmVjZXNzYXJ5IG5hbWUgZm9ybSBmb3VuZFwiO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBwb2xpY3lSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0ckdyb3VwcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgW10sXG4gICAgICAgICAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgICAgICAgICBbXSxcbiAgICAgICAgICAgICAgICAgICAgW10sXG4gICAgICAgICAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwZXJtaXR0ZWRTdWJ0cmVlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBlcm1pdHRlZFN1YnRyZWVzW2pdLmJhc2UudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ckdyb3Vwc1swXS5wdXNoKHBlcm1pdHRlZFN1YnRyZWVzW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJHcm91cHNbMV0ucHVzaChwZXJtaXR0ZWRTdWJ0cmVlc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RyR3JvdXBzWzJdLnB1c2gocGVybWl0dGVkU3VidHJlZXNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ckdyb3Vwc1szXS5wdXNoKHBlcm1pdHRlZFN1YnRyZWVzW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJHcm91cHNbNF0ucHVzaChwZXJtaXR0ZWRTdWJ0cmVlc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgNTsgcCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBncm91cFBlcm1pdHRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVFeGlzdHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBjb25zdHJHcm91cHNbcF07XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ3JvdXAubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmplY3RBbHROYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHN1YmplY3RBbHROYW1lcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJqZWN0QWx0TmFtZXNba10udHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUV4aXN0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwUGVybWl0dGVkID0gZ3JvdXBQZXJtaXR0ZWQgfHwgY29tcGFyZVJGQzgyMk5hbWUoc3ViamVjdEFsdE5hbWVzW2tdLnZhbHVlLCBncm91cFtqXS5iYXNlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNlcnQuc3ViamVjdC50eXBlc0FuZFZhbHVlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY2VydC5zdWJqZWN0LnR5cGVzQW5kVmFsdWVzW2tdLnR5cGUgPT09IFwiMS4yLjg0MC4xMTM1NDkuMS45LjFcIikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNlcnQuc3ViamVjdC50eXBlc0FuZFZhbHVlc1trXS50eXBlID09PSBcIjAuOS4yMzQyLjE5MjAwMzAwLjEwMC4xLjNcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVFeGlzdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cFBlcm1pdHRlZCA9IGdyb3VwUGVybWl0dGVkIHx8IGNvbXBhcmVSRkM4MjJOYW1lKGNlcnQuc3ViamVjdC50eXBlc0FuZFZhbHVlc1trXS52YWx1ZS52YWx1ZUJsb2NrLnZhbHVlLCBncm91cFtqXS5iYXNlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViamVjdEFsdE5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc3ViamVjdEFsdE5hbWVzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmplY3RBbHROYW1lc1trXS50eXBlID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlRXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBQZXJtaXR0ZWQgPSBncm91cFBlcm1pdHRlZCB8fCBjb21wYXJlRE5TTmFtZShzdWJqZWN0QWx0TmFtZXNba10udmFsdWUsIGdyb3VwW2pdLmJhc2UudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlRXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBQZXJtaXR0ZWQgPSBjb21wYXJlRGlyZWN0b3J5TmFtZShjZXJ0LnN1YmplY3QsIGdyb3VwW2pdLmJhc2UudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJqZWN0QWx0TmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBzdWJqZWN0QWx0TmFtZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViamVjdEFsdE5hbWVzW2tdLnR5cGUgPT09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVFeGlzdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cFBlcm1pdHRlZCA9IGdyb3VwUGVybWl0dGVkIHx8IGNvbXBhcmVVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyKHN1YmplY3RBbHROYW1lc1trXS52YWx1ZSwgZ3JvdXBbal0uYmFzZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmplY3RBbHROYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHN1YmplY3RBbHROYW1lcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJqZWN0QWx0TmFtZXNba10udHlwZSA9PT0gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUV4aXN0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwUGVybWl0dGVkID0gZ3JvdXBQZXJtaXR0ZWQgfHwgY29tcGFyZUlQQWRkcmVzcyhzdWJqZWN0QWx0TmFtZXNba10udmFsdWUsIGdyb3VwW2pdLmJhc2UudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VwUGVybWl0dGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZ3JvdXBQZXJtaXR0ZWQgPT09IGZhbHNlKSAmJiAoZ3JvdXAubGVuZ3RoID4gMCkgJiYgdmFsdWVFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVJlc3VsdC5yZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVJlc3VsdC5yZXN1bHRDb2RlID0gNDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lSZXN1bHQucmVzdWx0TWVzc2FnZSA9IFwiRmFpbGVkIHRvIG1lZXQgXFxcInBlcm1pdHRlZCBzdWItdHJlZXNcXFwiIG5hbWUgY29uc3RyYWludFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgcG9saWN5UmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBleGNsdWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZXhjbHVkZWRTdWJ0cmVlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGV4Y2x1ZGVkU3VidHJlZXNbal0uYmFzZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmplY3RBbHROYW1lcy5sZW5ndGggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHN1YmplY3RBbHROYW1lcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmplY3RBbHROYW1lc1trXS50eXBlID09PSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVkID0gZXhjbHVkZWQgfHwgY29tcGFyZVJGQzgyMk5hbWUoc3ViamVjdEFsdE5hbWVzW2tdLnZhbHVlLCBleGNsdWRlZFN1YnRyZWVzW2pdLmJhc2UudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNlcnQuc3ViamVjdC50eXBlc0FuZFZhbHVlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjZXJ0LnN1YmplY3QudHlwZXNBbmRWYWx1ZXNba10udHlwZSA9PT0gXCIxLjIuODQwLjExMzU0OS4xLjkuMVwiKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjZXJ0LnN1YmplY3QudHlwZXNBbmRWYWx1ZXNba10udHlwZSA9PT0gXCIwLjkuMjM0Mi4xOTIwMDMwMC4xMDAuMS4zXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVkID0gZXhjbHVkZWQgfHwgY29tcGFyZVJGQzgyMk5hbWUoY2VydC5zdWJqZWN0LnR5cGVzQW5kVmFsdWVzW2tdLnZhbHVlLnZhbHVlQmxvY2sudmFsdWUsIGV4Y2x1ZGVkU3VidHJlZXNbal0uYmFzZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmplY3RBbHROYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc3ViamVjdEFsdE5hbWVzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViamVjdEFsdE5hbWVzW2tdLnR5cGUgPT09IDIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQgPSBleGNsdWRlZCB8fCBjb21wYXJlRE5TTmFtZShzdWJqZWN0QWx0TmFtZXNba10udmFsdWUsIGV4Y2x1ZGVkU3VidHJlZXNbal0uYmFzZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQgPSBleGNsdWRlZCB8fCBjb21wYXJlRGlyZWN0b3J5TmFtZShjZXJ0LnN1YmplY3QsIGV4Y2x1ZGVkU3VidHJlZXNbal0uYmFzZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmplY3RBbHROYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc3ViamVjdEFsdE5hbWVzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViamVjdEFsdE5hbWVzW2tdLnR5cGUgPT09IDYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQgPSBleGNsdWRlZCB8fCBjb21wYXJlVW5pZm9ybVJlc291cmNlSWRlbnRpZmllcihzdWJqZWN0QWx0TmFtZXNba10udmFsdWUsIGV4Y2x1ZGVkU3VidHJlZXNbal0uYmFzZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmplY3RBbHROYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc3ViamVjdEFsdE5hbWVzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViamVjdEFsdE5hbWVzW2tdLnR5cGUgPT09IDcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWQgPSBleGNsdWRlZCB8fCBjb21wYXJlSVBBZGRyZXNzKHN1YmplY3RBbHROYW1lc1trXS52YWx1ZSwgZXhjbHVkZWRTdWJ0cmVlc1tqXS5iYXNlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2x1ZGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChleGNsdWRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBwb2xpY3lSZXN1bHQucmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHBvbGljeVJlc3VsdC5yZXN1bHRDb2RlID0gNDI7XG4gICAgICAgICAgICAgICAgICAgIHBvbGljeVJlc3VsdC5yZXN1bHRNZXNzYWdlID0gXCJGYWlsZWQgdG8gbWVldCBcXFwiZXhjbHVkZWQgc3ViLXRyZWVzXFxcIiBuYW1lIGNvbnN0cmFpbnRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcG9saWN5UmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwZXJtaXR0ZWRTdWJ0cmVlcyA9IHBlcm1pdHRlZFN1YnRyZWVzLmNvbmNhdChjZXJ0UGVybWl0dGVkU3VidHJlZXMpO1xuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkU3VidHJlZXMgPSBleGNsdWRlZFN1YnRyZWVzLmNvbmNhdChjZXJ0RXhjbHVkZWRTdWJ0cmVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcG9saWN5UmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBDaGFpblZhbGlkYXRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDb2RlOiBDaGFpblZhbGlkYXRpb25Db2RlLnVua25vd24sXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdE1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBcInJlc3VsdE1lc3NhZ2VcIiBpbiBlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZXN1bHRDb2RlOiAtMSxcbiAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlOiBgJHtlcnJvcn1gLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgVEJTX1JFU1BPTlNFX0RBVEEgPSBcInRic1Jlc3BvbnNlRGF0YVwiO1xuY29uc3QgU0lHTkFUVVJFX0FMR09SSVRITSQzID0gXCJzaWduYXR1cmVBbGdvcml0aG1cIjtcbmNvbnN0IFNJR05BVFVSRSQyID0gXCJzaWduYXR1cmVcIjtcbmNvbnN0IENFUlRTJDEgPSBcImNlcnRzXCI7XG5jb25zdCBCQVNJQ19PQ1NQX1JFU1BPTlNFID0gXCJCYXNpY09DU1BSZXNwb25zZVwiO1xuY29uc3QgQkFTSUNfT0NTUF9SRVNQT05TRV9UQlNfUkVTUE9OU0VfREFUQSA9IGAke0JBU0lDX09DU1BfUkVTUE9OU0V9LiR7VEJTX1JFU1BPTlNFX0RBVEF9YDtcbmNvbnN0IEJBU0lDX09DU1BfUkVTUE9OU0VfU0lHTkFUVVJFX0FMR09SSVRITSA9IGAke0JBU0lDX09DU1BfUkVTUE9OU0V9LiR7U0lHTkFUVVJFX0FMR09SSVRITSQzfWA7XG5jb25zdCBCQVNJQ19PQ1NQX1JFU1BPTlNFX1NJR05BVFVSRSA9IGAke0JBU0lDX09DU1BfUkVTUE9OU0V9LiR7U0lHTkFUVVJFJDJ9YDtcbmNvbnN0IEJBU0lDX09DU1BfUkVTUE9OU0VfQ0VSVFMgPSBgJHtCQVNJQ19PQ1NQX1JFU1BPTlNFfS4ke0NFUlRTJDF9YDtcbmNvbnN0IENMRUFSX1BST1BTJGcgPSBbXG4gICAgQkFTSUNfT0NTUF9SRVNQT05TRV9UQlNfUkVTUE9OU0VfREFUQSxcbiAgICBCQVNJQ19PQ1NQX1JFU1BPTlNFX1NJR05BVFVSRV9BTEdPUklUSE0sXG4gICAgQkFTSUNfT0NTUF9SRVNQT05TRV9TSUdOQVRVUkUsXG4gICAgQkFTSUNfT0NTUF9SRVNQT05TRV9DRVJUU1xuXTtcbmNsYXNzIEJhc2ljT0NTUFJlc3BvbnNlIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50YnNSZXNwb25zZURhdGEgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBUQlNfUkVTUE9OU0VfREFUQSwgQmFzaWNPQ1NQUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhUQlNfUkVTUE9OU0VfREFUQSkpO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNJR05BVFVSRV9BTEdPUklUSE0kMywgQmFzaWNPQ1NQUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhTSUdOQVRVUkVfQUxHT1JJVEhNJDMpKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkUkMiwgQmFzaWNPQ1NQUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhTSUdOQVRVUkUkMikpO1xuICAgICAgICBpZiAoQ0VSVFMkMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmNlcnRzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ0VSVFMkMSwgQmFzaWNPQ1NQUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhDRVJUUyQxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRCU19SRVNQT05TRV9EQVRBOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2VEYXRhKCk7XG4gICAgICAgICAgICBjYXNlIFNJR05BVFVSRV9BTEdPUklUSE0kMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBjYXNlIENFUlRTJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBcInR5cGVcIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb21wYXJpc29uUmVzdWx0ID0gKChSZXNwb25zZURhdGEuY29tcGFyZVdpdGhEZWZhdWx0KFwidGJzXCIsIG1lbWJlclZhbHVlLnRicykpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoUmVzcG9uc2VEYXRhLmNvbXBhcmVXaXRoRGVmYXVsdChcInJlc3BvbmRlcklEXCIsIG1lbWJlclZhbHVlLnJlc3BvbmRlcklEKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChSZXNwb25zZURhdGEuY29tcGFyZVdpdGhEZWZhdWx0KFwicHJvZHVjZWRBdFwiLCBtZW1iZXJWYWx1ZS5wcm9kdWNlZEF0KSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChSZXNwb25zZURhdGEuY29tcGFyZVdpdGhEZWZhdWx0KFwicmVzcG9uc2VzXCIsIG1lbWJlclZhbHVlLnJlc3BvbnNlcykpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwicmVzcG9uc2VFeHRlbnNpb25zXCIgaW4gbWVtYmVyVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJpc29uUmVzdWx0ID0gY29tcGFyaXNvblJlc3VsdCAmJiAoUmVzcG9uc2VEYXRhLmNvbXBhcmVXaXRoRGVmYXVsdChcInJlc3BvbnNlRXh0ZW5zaW9uc1wiLCBtZW1iZXJWYWx1ZS5yZXNwb25zZUV4dGVuc2lvbnMpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb25SZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTSUdOQVRVUkVfQUxHT1JJVEhNJDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgobWVtYmVyVmFsdWUuYWxnb3JpdGhtSWQgPT09IEVNUFRZX1NUUklORykgJiYgKChcImFsZ29yaXRobVBhcmFtc1wiIGluIG1lbWJlclZhbHVlKSA9PT0gZmFsc2UpKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5pc0VxdWFsKEJhc2ljT0NTUFJlc3BvbnNlLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpKTtcbiAgICAgICAgICAgIGNhc2UgQ0VSVFMkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEJBU0lDX09DU1BfUkVTUE9OU0UpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBSZXNwb25zZURhdGEuc2NoZW1hKG5hbWVzLnRic1Jlc3BvbnNlRGF0YSB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEJBU0lDX09DU1BfUkVTUE9OU0VfVEJTX1JFU1BPTlNFX0RBVEFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnNpZ25hdHVyZUFsZ29yaXRobSB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEJBU0lDX09DU1BfUkVTUE9OU0VfU0lHTkFUVVJFX0FMR09SSVRITVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc2lnbmF0dXJlIHx8IEJBU0lDX09DU1BfUkVTUE9OU0VfU0lHTkFUVVJFKSB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogQkFTSUNfT0NTUF9SRVNQT05TRV9DRVJUUyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBDZXJ0aWZpY2F0ZS5zY2hlbWEobmFtZXMuY2VydHMgfHwge30pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkZyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgQmFzaWNPQ1NQUmVzcG9uc2Uuc2NoZW1hKCkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnRic1Jlc3BvbnNlRGF0YSA9IG5ldyBSZXNwb25zZURhdGEoeyBzY2hlbWE6IGFzbjEucmVzdWx0W0JBU0lDX09DU1BfUkVTUE9OU0VfVEJTX1JFU1BPTlNFX0RBVEFdIH0pO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdFtCQVNJQ19PQ1NQX1JFU1BPTlNFX1NJR05BVFVSRV9BTEdPUklUSE1dIH0pO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZSA9IGFzbjEucmVzdWx0W0JBU0lDX09DU1BfUkVTUE9OU0VfU0lHTkFUVVJFXTtcbiAgICAgICAgaWYgKEJBU0lDX09DU1BfUkVTUE9OU0VfQ0VSVFMgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuY2VydHMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0W0JBU0lDX09DU1BfUkVTUE9OU0VfQ0VSVFNdLCBlbGVtZW50ID0+IG5ldyBDZXJ0aWZpY2F0ZSh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy50YnNSZXNwb25zZURhdGEudG9TY2hlbWEoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9TY2hlbWEoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zaWduYXR1cmUpO1xuICAgICAgICBpZiAodGhpcy5jZXJ0cykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5jZXJ0cywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIHRic1Jlc3BvbnNlRGF0YTogdGhpcy50YnNSZXNwb25zZURhdGEudG9KU09OKCksXG4gICAgICAgICAgICBzaWduYXR1cmVBbGdvcml0aG06IHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgc2lnbmF0dXJlOiB0aGlzLnNpZ25hdHVyZS50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuY2VydHMpIHtcbiAgICAgICAgICAgIHJlcy5jZXJ0cyA9IEFycmF5LmZyb20odGhpcy5jZXJ0cywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBhc3luYyBnZXRDZXJ0aWZpY2F0ZVN0YXR1cyhjZXJ0aWZpY2F0ZSwgaXNzdWVyQ2VydGlmaWNhdGUsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBpc0ZvckNlcnRpZmljYXRlOiBmYWxzZSxcbiAgICAgICAgICAgIHN0YXR1czogMlxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYXNoZXNPYmplY3QgPSB7fTtcbiAgICAgICAgY29uc3QgY2VydElEcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHJlc3BvbnNlIG9mIHRoaXMudGJzUmVzcG9uc2VEYXRhLnJlc3BvbnNlcykge1xuICAgICAgICAgICAgY29uc3QgaGFzaEFsZ29yaXRobSA9IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRChyZXNwb25zZS5jZXJ0SUQuaGFzaEFsZ29yaXRobS5hbGdvcml0aG1JZCwgdHJ1ZSwgXCJDZXJ0SUQuaGFzaEFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgIGlmICghaGFzaGVzT2JqZWN0W2hhc2hBbGdvcml0aG0ubmFtZV0pIHtcbiAgICAgICAgICAgICAgICBoYXNoZXNPYmplY3RbaGFzaEFsZ29yaXRobS5uYW1lXSA9IDE7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VydElEID0gbmV3IENlcnRJRCgpO1xuICAgICAgICAgICAgICAgIGNlcnRJRHMucHVzaChjZXJ0SUQpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGNlcnRJRC5jcmVhdGVGb3JDZXJ0aWZpY2F0ZShjZXJ0aWZpY2F0ZSwge1xuICAgICAgICAgICAgICAgICAgICBoYXNoQWxnb3JpdGhtOiBoYXNoQWxnb3JpdGhtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGlzc3VlckNlcnRpZmljYXRlXG4gICAgICAgICAgICAgICAgfSwgY3J5cHRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHJlc3BvbnNlIG9mIHRoaXMudGJzUmVzcG9uc2VEYXRhLnJlc3BvbnNlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpZCBvZiBjZXJ0SURzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNlcnRJRC5pc0VxdWFsKGlkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuaXNGb3JDZXJ0aWZpY2F0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLmNlcnRTdGF0dXMuaWRCbG9jay5pc0NvbnN0cnVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB0cnVlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY2VydFN0YXR1cy5pZEJsb2NrLnRhZ051bWJlciA9PT0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0dXMgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGZhbHNlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLmNlcnRTdGF0dXMuaWRCbG9jay50YWdOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdHVzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdHVzID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBzaWduKHByaXZhdGVLZXksIGhhc2hBbGdvcml0aG0gPSBcIlNIQS0xXCIsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICBpZiAoIXByaXZhdGVLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5lZWQgdG8gcHJvdmlkZSBhIHByaXZhdGUga2V5IGZvciBzaWduaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZVBhcmFtcyA9IGF3YWl0IGNyeXB0by5nZXRTaWduYXR1cmVQYXJhbWV0ZXJzKHByaXZhdGVLZXksIGhhc2hBbGdvcml0aG0pO1xuICAgICAgICBjb25zdCBhbGdvcml0aG0gPSBzaWduYXR1cmVQYXJhbXMucGFyYW1ldGVycy5hbGdvcml0aG07XG4gICAgICAgIGlmICghKFwibmFtZVwiIGluIGFsZ29yaXRobSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVtcHR5IGFsZ29yaXRobVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IHNpZ25hdHVyZVBhcmFtcy5zaWduYXR1cmVBbGdvcml0aG07XG4gICAgICAgIHRoaXMudGJzUmVzcG9uc2VEYXRhLnRic1ZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLnRic1Jlc3BvbnNlRGF0YS50b1NjaGVtYSh0cnVlKS50b0JFUigpKTtcbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgY3J5cHRvLnNpZ25XaXRoUHJpdmF0ZUtleSh0aGlzLnRic1Jlc3BvbnNlRGF0YS50YnNWaWV3LCBwcml2YXRlS2V5LCB7IGFsZ29yaXRobSB9KTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmUgPSBuZXcgYXNuMWpzLkJpdFN0cmluZyh7IHZhbHVlSGV4OiBzaWduYXR1cmUgfSk7XG4gICAgfVxuICAgIGFzeW5jIHZlcmlmeShwYXJhbXMgPSB7fSwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGxldCBzaWduZXJDZXJ0ID0gbnVsbDtcbiAgICAgICAgbGV0IGNlcnRJbmRleCA9IC0xO1xuICAgICAgICBjb25zdCB0cnVzdGVkQ2VydHMgPSBwYXJhbXMudHJ1c3RlZENlcnRzIHx8IFtdO1xuICAgICAgICBpZiAoIXRoaXMuY2VydHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNlcnRpZmljYXRlcyBhdHRhY2hlZCB0byB0aGUgQmFzaWNPQ1NQUmVzcG9uc2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICBjYXNlICh0aGlzLnRic1Jlc3BvbnNlRGF0YS5yZXNwb25kZXJJRCBpbnN0YW5jZW9mIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzKTpcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgY2VydGlmaWNhdGVdIG9mIHRoaXMuY2VydHMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZXJ0aWZpY2F0ZS5zdWJqZWN0LmlzRXF1YWwodGhpcy50YnNSZXNwb25zZURhdGEucmVzcG9uZGVySUQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAodGhpcy50YnNSZXNwb25zZURhdGEucmVzcG9uZGVySUQgaW5zdGFuY2VvZiBhc24xanMuT2N0ZXRTdHJpbmcpOlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBjZXJ0XSBvZiB0aGlzLmNlcnRzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgY3J5cHRvLmRpZ2VzdCh7IG5hbWU6IFwic2hhLTFcIiB9LCBjZXJ0LnN1YmplY3RQdWJsaWNLZXlJbmZvLnN1YmplY3RQdWJsaWNLZXkudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHZ1dGlscy5pc0VxdWFsQnVmZmVyKGhhc2gsIHRoaXMudGJzUmVzcG9uc2VEYXRhLnJlc3BvbmRlcklELnZhbHVlQmxvY2sudmFsdWVIZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXcm9uZyB2YWx1ZSBmb3IgcmVzcG9uZGVySURcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlcnRJbmRleCA9PT0gKC0xKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvcnJlY3QgY2VydGlmaWNhdGUgd2FzIG5vdCBmb3VuZCBpbiBPQ1NQIHJlc3BvbnNlXCIpO1xuICAgICAgICBzaWduZXJDZXJ0ID0gdGhpcy5jZXJ0c1tjZXJ0SW5kZXhdO1xuICAgICAgICBjb25zdCBhZGRpdGlvbmFsQ2VydHMgPSBbc2lnbmVyQ2VydF07XG4gICAgICAgIGZvciAoY29uc3QgY2VydCBvZiB0aGlzLmNlcnRzKSB7XG4gICAgICAgICAgICBjb25zdCBjYUNlcnQgPSBhd2FpdCBjaGVja0NBKGNlcnQsIHNpZ25lckNlcnQpO1xuICAgICAgICAgICAgaWYgKGNhQ2VydCkge1xuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxDZXJ0cy5wdXNoKGNhQ2VydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2VydENoYWluID0gbmV3IENlcnRpZmljYXRlQ2hhaW5WYWxpZGF0aW9uRW5naW5lKHtcbiAgICAgICAgICAgIGNlcnRzOiBhZGRpdGlvbmFsQ2VydHMsXG4gICAgICAgICAgICB0cnVzdGVkQ2VydHMsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB2ZXJpZmljYXRpb25SZXN1bHQgPSBhd2FpdCBjZXJ0Q2hhaW4udmVyaWZ5KHt9LCBjcnlwdG8pO1xuICAgICAgICBpZiAoIXZlcmlmaWNhdGlvblJlc3VsdC5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhbGlkYXRpb24gb2Ygc2lnbmVyJ3MgY2VydGlmaWNhdGUgZmFpbGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcnlwdG8udmVyaWZ5V2l0aFB1YmxpY0tleSh0aGlzLnRic1Jlc3BvbnNlRGF0YS50YnNWaWV3LCB0aGlzLnNpZ25hdHVyZSwgdGhpcy5jZXJ0c1tjZXJ0SW5kZXhdLnN1YmplY3RQdWJsaWNLZXlJbmZvLCB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSk7XG4gICAgfVxufVxuQmFzaWNPQ1NQUmVzcG9uc2UuQ0xBU1NfTkFNRSA9IFwiQmFzaWNPQ1NQUmVzcG9uc2VcIjtcblxuY29uc3QgVEJTJDEgPSBcInRic1wiO1xuY29uc3QgVkVSU0lPTiQ2ID0gXCJ2ZXJzaW9uXCI7XG5jb25zdCBTVUJKRUNUID0gXCJzdWJqZWN0XCI7XG5jb25zdCBTUEtJID0gXCJzdWJqZWN0UHVibGljS2V5SW5mb1wiO1xuY29uc3QgQVRUUklCVVRFUyQxID0gXCJhdHRyaWJ1dGVzXCI7XG5jb25zdCBTSUdOQVRVUkVfQUxHT1JJVEhNJDIgPSBcInNpZ25hdHVyZUFsZ29yaXRobVwiO1xuY29uc3QgU0lHTkFUVVJFX1ZBTFVFID0gXCJzaWduYXR1cmVWYWx1ZVwiO1xuY29uc3QgQ1NSX0lORk8gPSBcIkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mb1wiO1xuY29uc3QgQ1NSX0lORk9fVkVSU0lPTiA9IGAke0NTUl9JTkZPfS52ZXJzaW9uYDtcbmNvbnN0IENTUl9JTkZPX1NVQkpFQ1QgPSBgJHtDU1JfSU5GT30uc3ViamVjdGA7XG5jb25zdCBDU1JfSU5GT19TUEtJID0gYCR7Q1NSX0lORk99LnN1YmplY3RQdWJsaWNLZXlJbmZvYDtcbmNvbnN0IENTUl9JTkZPX0FUVFJTID0gYCR7Q1NSX0lORk99LmF0dHJpYnV0ZXNgO1xuY29uc3QgQ0xFQVJfUFJPUFMkZiA9IFtcbiAgICBDU1JfSU5GTyxcbiAgICBDU1JfSU5GT19WRVJTSU9OLFxuICAgIENTUl9JTkZPX1NVQkpFQ1QsXG4gICAgQ1NSX0lORk9fU1BLSSxcbiAgICBDU1JfSU5GT19BVFRSUyxcbiAgICBTSUdOQVRVUkVfQUxHT1JJVEhNJDIsXG4gICAgU0lHTkFUVVJFX1ZBTFVFXG5dO1xuZnVuY3Rpb24gQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgbmFtZTogKG5hbWVzLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyB8fCBDU1JfSU5GTyksXG4gICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMuQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvVmVyc2lvbiB8fCBDU1JfSU5GT19WRVJTSU9OKSB9KSxcbiAgICAgICAgICAgIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzLnNjaGVtYShuYW1lcy5zdWJqZWN0IHx8IHtcbiAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IENTUl9JTkZPX1NVQkpFQ1RcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIFB1YmxpY0tleUluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IENTUl9JTkZPX1NQS0lcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm9BdHRyaWJ1dGVzIHx8IENTUl9JTkZPX0FUVFJTKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBBdHRyaWJ1dGUuc2NoZW1hKG5hbWVzLmF0dHJpYnV0ZXMgfHwge30pXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH0pKTtcbn1cbmNsYXNzIENlcnRpZmljYXRpb25SZXF1ZXN0IGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBnZXQgdGJzKCkge1xuICAgICAgICByZXR1cm4gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b0FycmF5QnVmZmVyKHRoaXMudGJzVmlldyk7XG4gICAgfVxuICAgIHNldCB0YnModmFsdWUpIHtcbiAgICAgICAgdGhpcy50YnNWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodmFsdWUpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50YnNWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVEJTJDEsIENlcnRpZmljYXRpb25SZXF1ZXN0LmRlZmF1bHRWYWx1ZXMoVEJTJDEpKSk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZFUlNJT04kNiwgQ2VydGlmaWNhdGlvblJlcXVlc3QuZGVmYXVsdFZhbHVlcyhWRVJTSU9OJDYpKTtcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU1VCSkVDVCwgQ2VydGlmaWNhdGlvblJlcXVlc3QuZGVmYXVsdFZhbHVlcyhTVUJKRUNUKSk7XG4gICAgICAgIHRoaXMuc3ViamVjdFB1YmxpY0tleUluZm8gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTUEtJLCBDZXJ0aWZpY2F0aW9uUmVxdWVzdC5kZWZhdWx0VmFsdWVzKFNQS0kpKTtcbiAgICAgICAgaWYgKEFUVFJJQlVURVMkMSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBVFRSSUJVVEVTJDEsIENlcnRpZmljYXRpb25SZXF1ZXN0LmRlZmF1bHRWYWx1ZXMoQVRUUklCVVRFUyQxKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkVfQUxHT1JJVEhNJDIsIENlcnRpZmljYXRpb25SZXF1ZXN0LmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX0FMR09SSVRITSQyKSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlVmFsdWUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkVfVkFMVUUsIENlcnRpZmljYXRpb25SZXF1ZXN0LmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX1ZBTFVFKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBUQlMkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJDY6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIFNVQkpFQ1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lcygpO1xuICAgICAgICAgICAgY2FzZSBTUEtJOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHVibGljS2V5SW5mbygpO1xuICAgICAgICAgICAgY2FzZSBBVFRSSUJVVEVTJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY2FzZSBTSUdOQVRVUkVfQUxHT1JJVEhNJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIFNJR05BVFVSRV9WQUxVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5CaXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvKG5hbWVzLmNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5zaWduYXR1cmVBbGdvcml0aG0gfHwgU0lHTkFUVVJFX0FMR09SSVRITSQyKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5BbnkoeyBvcHRpb25hbDogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc2lnbmF0dXJlVmFsdWUgfHwgU0lHTkFUVVJFX1ZBTFVFKSB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJGYpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIENlcnRpZmljYXRpb25SZXF1ZXN0LnNjaGVtYSgpKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy50YnNWaWV3ID0gYXNuMS5yZXN1bHQuQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvLnZhbHVlQmVmb3JlRGVjb2RlVmlldztcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gYXNuMS5yZXN1bHRbQ1NSX0lORk9fVkVSU0lPTl0udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gbmV3IFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVzKHsgc2NoZW1hOiBhc24xLnJlc3VsdFtDU1JfSU5GT19TVUJKRUNUXSB9KTtcbiAgICAgICAgdGhpcy5zdWJqZWN0UHVibGljS2V5SW5mbyA9IG5ldyBQdWJsaWNLZXlJbmZvKHsgc2NoZW1hOiBhc24xLnJlc3VsdFtDU1JfSU5GT19TUEtJXSB9KTtcbiAgICAgICAgaWYgKENTUl9JTkZPX0FUVFJTIGluIGFzbjEucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0W0NTUl9JTkZPX0FUVFJTXSwgZWxlbWVudCA9PiBuZXcgQXR0cmlidXRlKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5zaWduYXR1cmVBbGdvcml0aG0gfSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlVmFsdWUgPSBhc24xLnJlc3VsdC5zaWduYXR1cmVWYWx1ZTtcbiAgICB9XG4gICAgZW5jb2RlVEJTKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtcbiAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLnZlcnNpb24gfSksXG4gICAgICAgICAgICB0aGlzLnN1YmplY3QudG9TY2hlbWEoKSxcbiAgICAgICAgICAgIHRoaXMuc3ViamVjdFB1YmxpY0tleUluZm8udG9TY2hlbWEoKVxuICAgICAgICBdO1xuICAgICAgICBpZiAoQVRUUklCVVRFUyQxIGluIHRoaXMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmF0dHJpYnV0ZXMgfHwgW10sIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1NjaGVtYShlbmNvZGVGbGFnID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHRic1NjaGVtYTtcbiAgICAgICAgaWYgKGVuY29kZUZsYWcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YnNWaWV3LmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGlvblJlcXVlc3Quc2NoZW1hKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmZyb21CRVIodGhpcy50YnNWaWV3KTtcbiAgICAgICAgICAgIEFzbkVycm9yLmFzc2VydChhc24xLCBcIlBLQ1MjMTAgQ2VydGlmaWNhdGUgUmVxdWVzdFwiKTtcbiAgICAgICAgICAgIHRic1NjaGVtYSA9IGFzbjEucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGJzU2NoZW1hID0gdGhpcy5lbmNvZGVUQlMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICB0YnNTY2hlbWEsXG4gICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9TY2hlbWEoKSxcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZVZhbHVlXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvYmplY3QgPSB7XG4gICAgICAgICAgICB0YnM6IHB2dHN1dGlscy5Db252ZXJ0LlRvSGV4KHRoaXMudGJzVmlldyksXG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICAgICAgICBzdWJqZWN0OiB0aGlzLnN1YmplY3QudG9KU09OKCksXG4gICAgICAgICAgICBzdWJqZWN0UHVibGljS2V5SW5mbzogdGhpcy5zdWJqZWN0UHVibGljS2V5SW5mby50b0pTT04oKSxcbiAgICAgICAgICAgIHNpZ25hdHVyZUFsZ29yaXRobTogdGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICBzaWduYXR1cmVWYWx1ZTogdGhpcy5zaWduYXR1cmVWYWx1ZS50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFUVFJJQlVURVMkMSBpbiB0aGlzKSB7XG4gICAgICAgICAgICBvYmplY3QuYXR0cmlidXRlcyA9IEFycmF5LmZyb20odGhpcy5hdHRyaWJ1dGVzIHx8IFtdLCBvID0+IG8udG9KU09OKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuICAgIGFzeW5jIHNpZ24ocHJpdmF0ZUtleSwgaGFzaEFsZ29yaXRobSA9IFwiU0hBLTFcIiwgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIGlmICghcHJpdmF0ZUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmVlZCB0byBwcm92aWRlIGEgcHJpdmF0ZSBrZXkgZm9yIHNpZ25pbmdcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlUGFyYW1zID0gYXdhaXQgY3J5cHRvLmdldFNpZ25hdHVyZVBhcmFtZXRlcnMocHJpdmF0ZUtleSwgaGFzaEFsZ29yaXRobSk7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBzaWduYXR1cmVQYXJhbXMucGFyYW1ldGVycztcbiAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0gPSBzaWduYXR1cmVQYXJhbXMuc2lnbmF0dXJlQWxnb3JpdGhtO1xuICAgICAgICB0aGlzLnRic1ZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLmVuY29kZVRCUygpLnRvQkVSKCkpO1xuICAgICAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBjcnlwdG8uc2lnbldpdGhQcml2YXRlS2V5KHRoaXMudGJzVmlldywgcHJpdmF0ZUtleSwgcGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlVmFsdWUgPSBuZXcgYXNuMWpzLkJpdFN0cmluZyh7IHZhbHVlSGV4OiBzaWduYXR1cmUgfSk7XG4gICAgfVxuICAgIGFzeW5jIHZlcmlmeShjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by52ZXJpZnlXaXRoUHVibGljS2V5KHRoaXMudGJzVmlldywgdGhpcy5zaWduYXR1cmVWYWx1ZSwgdGhpcy5zdWJqZWN0UHVibGljS2V5SW5mbywgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRQdWJsaWNLZXkocGFyYW1ldGVycywgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8uZ2V0UHVibGljS2V5KHRoaXMuc3ViamVjdFB1YmxpY0tleUluZm8sIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtLCBwYXJhbWV0ZXJzKTtcbiAgICB9XG59XG5DZXJ0aWZpY2F0aW9uUmVxdWVzdC5DTEFTU19OQU1FID0gXCJDZXJ0aWZpY2F0aW9uUmVxdWVzdFwiO1xuXG5jb25zdCBESUdFU1RfQUxHT1JJVEhNJDEgPSBcImRpZ2VzdEFsZ29yaXRobVwiO1xuY29uc3QgRElHRVNUID0gXCJkaWdlc3RcIjtcbmNvbnN0IENMRUFSX1BST1BTJGUgPSBbXG4gICAgRElHRVNUX0FMR09SSVRITSQxLFxuICAgIERJR0VTVFxuXTtcbmNsYXNzIERpZ2VzdEluZm8gZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmRpZ2VzdEFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIERJR0VTVF9BTEdPUklUSE0kMSwgRGlnZXN0SW5mby5kZWZhdWx0VmFsdWVzKERJR0VTVF9BTEdPUklUSE0kMSkpO1xuICAgICAgICB0aGlzLmRpZ2VzdCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIERJR0VTVCwgRGlnZXN0SW5mby5kZWZhdWx0VmFsdWVzKERJR0VTVCkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgRElHRVNUX0FMR09SSVRITSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcigpO1xuICAgICAgICAgICAgY2FzZSBESUdFU1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgRElHRVNUX0FMR09SSVRITSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKEFsZ29yaXRobUlkZW50aWZpZXIuY29tcGFyZVdpdGhEZWZhdWx0KFwiYWxnb3JpdGhtSWRcIiwgbWVtYmVyVmFsdWUuYWxnb3JpdGhtSWQpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoKFwiYWxnb3JpdGhtUGFyYW1zXCIgaW4gbWVtYmVyVmFsdWUpID09PSBmYWxzZSkpO1xuICAgICAgICAgICAgY2FzZSBESUdFU1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5pc0VxdWFsKERpZ2VzdEluZm8uZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBBbGdvcml0aG1JZGVudGlmaWVyLnNjaGVtYShuYW1lcy5kaWdlc3RBbGdvcml0aG0gfHwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBESUdFU1RfQUxHT1JJVEhNJDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuZGlnZXN0IHx8IERJR0VTVCkgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRlKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBEaWdlc3RJbmZvLnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIGRpZ2VzdEFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBESUdFU1RfQUxHT1JJVEhNJDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGlnZXN0OiBESUdFU1RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmRpZ2VzdEFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5kaWdlc3RBbGdvcml0aG0gfSk7XG4gICAgICAgIHRoaXMuZGlnZXN0ID0gYXNuMS5yZXN1bHQuZGlnZXN0O1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5kaWdlc3RBbGdvcml0aG0udG9TY2hlbWEoKSxcbiAgICAgICAgICAgICAgICB0aGlzLmRpZ2VzdFxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpZ2VzdEFsZ29yaXRobTogdGhpcy5kaWdlc3RBbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICBkaWdlc3Q6IHRoaXMuZGlnZXN0LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbkRpZ2VzdEluZm8uQ0xBU1NfTkFNRSA9IFwiRGlnZXN0SW5mb1wiO1xuXG5jb25zdCBFX0NPTlRFTlRfVFlQRSA9IFwiZUNvbnRlbnRUeXBlXCI7XG5jb25zdCBFX0NPTlRFTlQgPSBcImVDb250ZW50XCI7XG5jb25zdCBDTEVBUl9QUk9QUyRkID0gW1xuICAgIEVfQ09OVEVOVF9UWVBFLFxuICAgIEVfQ09OVEVOVCxcbl07XG5jbGFzcyBFbmNhcHN1bGF0ZWRDb250ZW50SW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZUNvbnRlbnRUeXBlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRV9DT05URU5UX1RZUEUsIEVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLmRlZmF1bHRWYWx1ZXMoRV9DT05URU5UX1RZUEUpKTtcbiAgICAgICAgaWYgKEVfQ09OVEVOVCBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmVDb250ZW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRV9DT05URU5ULCBFbmNhcHN1bGF0ZWRDb250ZW50SW5mby5kZWZhdWx0VmFsdWVzKEVfQ09OVEVOVCkpO1xuICAgICAgICAgICAgaWYgKCh0aGlzLmVDb250ZW50LmlkQmxvY2sudGFnQ2xhc3MgPT09IDEpICYmXG4gICAgICAgICAgICAgICAgKHRoaXMuZUNvbnRlbnQuaWRCbG9jay50YWdOdW1iZXIgPT09IDQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZUNvbnRlbnQuaWRCbG9jay5pc0NvbnN0cnVjdGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25zdHJTdHJpbmcgPSBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHsgaXNDb25zdHJ1Y3RlZDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDb25zdHJ1Y3RlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdIZXggPSB0aGlzLmVDb250ZW50LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3LnNsaWNlKCkuYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGVuZ3RoID0gdmlld0hleC5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGllY2VWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodmlld0hleCwgb2Zmc2V0LCAoKG9mZnNldCArIDY1NTM2KSA+IHZpZXdIZXguYnl0ZUxlbmd0aCkgPyAodmlld0hleC5ieXRlTGVuZ3RoIC0gb2Zmc2V0KSA6IDY1NTM2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9hcnJheSA9IG5ldyBBcnJheUJ1ZmZlcihwaWVjZVZpZXcubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF92aWV3ID0gbmV3IFVpbnQ4QXJyYXkoX2FycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX3ZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdmlld1tpXSA9IHBpZWNlVmlld1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0clN0cmluZy52YWx1ZUJsb2NrLnZhbHVlLnB1c2gobmV3IGFzbjFqcy5PY3RldFN0cmluZyh7IHZhbHVlSGV4OiBfYXJyYXkgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoIC09IHBpZWNlVmlldy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gcGllY2VWaWV3Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVDb250ZW50ID0gY29uc3RyU3RyaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgRV9DT05URU5UX1RZUEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgRV9DT05URU5UOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEVfQ09OVEVOVF9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IEVNUFRZX1NUUklORyk7XG4gICAgICAgICAgICBjYXNlIEVfQ09OVEVOVDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgobWVtYmVyVmFsdWUuaWRCbG9jay50YWdDbGFzcyA9PT0gMSkgJiYgKG1lbWJlclZhbHVlLmlkQmxvY2sudGFnTnVtYmVyID09PSA0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChFbmNhcHN1bGF0ZWRDb250ZW50SW5mby5kZWZhdWx0VmFsdWVzKEVfQ09OVEVOVCkpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLmVDb250ZW50VHlwZSB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQW55KHsgbmFtZTogKG5hbWVzLmVDb250ZW50IHx8IEVNUFRZX1NUUklORykgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkZCk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgRW5jYXBzdWxhdGVkQ29udGVudEluZm8uc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgZUNvbnRlbnRUeXBlOiBFX0NPTlRFTlRfVFlQRSxcbiAgICAgICAgICAgICAgICBlQ29udGVudDogRV9DT05URU5UXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5lQ29udGVudFR5cGUgPSBhc24xLnJlc3VsdC5lQ29udGVudFR5cGUudmFsdWVCbG9jay50b1N0cmluZygpO1xuICAgICAgICBpZiAoRV9DT05URU5UIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5lQ29udGVudCA9IGFzbjEucmVzdWx0LmVDb250ZW50O1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoeyB2YWx1ZTogdGhpcy5lQ29udGVudFR5cGUgfSkpO1xuICAgICAgICBpZiAodGhpcy5lQ29udGVudCkge1xuICAgICAgICAgICAgaWYgKEVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLmNvbXBhcmVXaXRoRGVmYXVsdChFX0NPTlRFTlQsIHRoaXMuZUNvbnRlbnQpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW3RoaXMuZUNvbnRlbnRdXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIGVDb250ZW50VHlwZTogdGhpcy5lQ29udGVudFR5cGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuZUNvbnRlbnQgJiYgRW5jYXBzdWxhdGVkQ29udGVudEluZm8uY29tcGFyZVdpdGhEZWZhdWx0KEVfQ09OVEVOVCwgdGhpcy5lQ29udGVudCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXMuZUNvbnRlbnQgPSB0aGlzLmVDb250ZW50LnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuRW5jYXBzdWxhdGVkQ29udGVudEluZm8uQ0xBU1NfTkFNRSA9IFwiRW5jYXBzdWxhdGVkQ29udGVudEluZm9cIjtcblxuY2xhc3MgS2V5QmFnIGV4dGVuZHMgUHJpdmF0ZUtleUluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcihwYXJhbWV0ZXJzKTtcbiAgICB9XG59XG5cbmNvbnN0IE1BQyA9IFwibWFjXCI7XG5jb25zdCBNQUNfU0FMVCA9IFwibWFjU2FsdFwiO1xuY29uc3QgSVRFUkFUSU9OUyA9IFwiaXRlcmF0aW9uc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkYyA9IFtcbiAgICBNQUMsXG4gICAgTUFDX1NBTFQsXG4gICAgSVRFUkFUSU9OU1xuXTtcbmNsYXNzIE1hY0RhdGEgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm1hYyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE1BQywgTWFjRGF0YS5kZWZhdWx0VmFsdWVzKE1BQykpO1xuICAgICAgICB0aGlzLm1hY1NhbHQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBNQUNfU0FMVCwgTWFjRGF0YS5kZWZhdWx0VmFsdWVzKE1BQ19TQUxUKSk7XG4gICAgICAgIGlmIChJVEVSQVRJT05TIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIElURVJBVElPTlMsIE1hY0RhdGEuZGVmYXVsdFZhbHVlcyhJVEVSQVRJT05TKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIE1BQzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERpZ2VzdEluZm8oKTtcbiAgICAgICAgICAgIGNhc2UgTUFDX1NBTFQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGNhc2UgSVRFUkFUSU9OUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgTUFDOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKERpZ2VzdEluZm8uY29tcGFyZVdpdGhEZWZhdWx0KFwiZGlnZXN0QWxnb3JpdGhtXCIsIG1lbWJlclZhbHVlLmRpZ2VzdEFsZ29yaXRobSkpICYmXG4gICAgICAgICAgICAgICAgICAgIChEaWdlc3RJbmZvLmNvbXBhcmVXaXRoRGVmYXVsdChcImRpZ2VzdFwiLCBtZW1iZXJWYWx1ZS5kaWdlc3QpKSk7XG4gICAgICAgICAgICBjYXNlIE1BQ19TQUxUOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChNYWNEYXRhLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpKTtcbiAgICAgICAgICAgIGNhc2UgSVRFUkFUSU9OUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSBNYWNEYXRhLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgb3B0aW9uYWw6IChuYW1lcy5vcHRpb25hbCB8fCB0cnVlKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgRGlnZXN0SW5mby5zY2hlbWEobmFtZXMubWFjIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogTUFDXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgbmFtZTogKG5hbWVzLm1hY1NhbHQgfHwgTUFDX1NBTFQpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuaXRlcmF0aW9ucyB8fCBJVEVSQVRJT05TKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkYyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgTWFjRGF0YS5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBtYWM6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogTUFDXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1hY1NhbHQ6IE1BQ19TQUxULFxuICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IElURVJBVElPTlNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLm1hYyA9IG5ldyBEaWdlc3RJbmZvKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5tYWMgfSk7XG4gICAgICAgIHRoaXMubWFjU2FsdCA9IGFzbjEucmVzdWx0Lm1hY1NhbHQ7XG4gICAgICAgIGlmIChJVEVSQVRJT05TIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5pdGVyYXRpb25zID0gYXNuMS5yZXN1bHQuaXRlcmF0aW9ucy52YWx1ZUJsb2NrLnZhbHVlRGVjO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXG4gICAgICAgICAgICB0aGlzLm1hYy50b1NjaGVtYSgpLFxuICAgICAgICAgICAgdGhpcy5tYWNTYWx0XG4gICAgICAgIF07XG4gICAgICAgIGlmICh0aGlzLml0ZXJhdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy5pdGVyYXRpb25zIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICBtYWM6IHRoaXMubWFjLnRvSlNPTigpLFxuICAgICAgICAgICAgbWFjU2FsdDogdGhpcy5tYWNTYWx0LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pdGVyYXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlcy5pdGVyYXRpb25zID0gdGhpcy5pdGVyYXRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuTWFjRGF0YS5DTEFTU19OQU1FID0gXCJNYWNEYXRhXCI7XG5cbmNvbnN0IEhBU0hfQUxHT1JJVEhNID0gXCJoYXNoQWxnb3JpdGhtXCI7XG5jb25zdCBIQVNIRURfTUVTU0FHRSA9IFwiaGFzaGVkTWVzc2FnZVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkYiA9IFtcbiAgICBIQVNIX0FMR09SSVRITSxcbiAgICBIQVNIRURfTUVTU0FHRSxcbl07XG5jbGFzcyBNZXNzYWdlSW1wcmludCBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShoYXNoQWxnb3JpdGhtLCBtZXNzYWdlLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgY29uc3QgaGFzaEFsZ29yaXRobU9JRCA9IGNyeXB0by5nZXRPSURCeUFsZ29yaXRobSh7IG5hbWU6IGhhc2hBbGdvcml0aG0gfSwgdHJ1ZSwgXCJoYXNoQWxnb3JpdGhtXCIpO1xuICAgICAgICBjb25zdCBoYXNoZWRNZXNzYWdlID0gYXdhaXQgY3J5cHRvLmRpZ2VzdChoYXNoQWxnb3JpdGhtLCBtZXNzYWdlKTtcbiAgICAgICAgY29uc3QgcmVzID0gbmV3IE1lc3NhZ2VJbXByaW50KHtcbiAgICAgICAgICAgIGhhc2hBbGdvcml0aG06IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogaGFzaEFsZ29yaXRobU9JRCxcbiAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuTnVsbCgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBoYXNoZWRNZXNzYWdlOiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IGhhc2hlZE1lc3NhZ2UgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmhhc2hBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBIQVNIX0FMR09SSVRITSwgTWVzc2FnZUltcHJpbnQuZGVmYXVsdFZhbHVlcyhIQVNIX0FMR09SSVRITSkpO1xuICAgICAgICB0aGlzLmhhc2hlZE1lc3NhZ2UgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBIQVNIRURfTUVTU0FHRSwgTWVzc2FnZUltcHJpbnQuZGVmYXVsdFZhbHVlcyhIQVNIRURfTUVTU0FHRSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgSEFTSF9BTEdPUklUSE06XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKCk7XG4gICAgICAgICAgICBjYXNlIEhBU0hFRF9NRVNTQUdFOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIEhBU0hfQUxHT1JJVEhNOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLmFsZ29yaXRobUlkID09PSBFTVBUWV9TVFJJTkcpICYmICgoXCJhbGdvcml0aG1QYXJhbXNcIiBpbiBtZW1iZXJWYWx1ZSkgPT09IGZhbHNlKSk7XG4gICAgICAgICAgICBjYXNlIEhBU0hFRF9NRVNTQUdFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChNZXNzYWdlSW1wcmludC5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpKSA9PT0gMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmhhc2hBbGdvcml0aG0gfHwge30pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuaGFzaGVkTWVzc2FnZSB8fCBFTVBUWV9TVFJJTkcpIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkYik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgTWVzc2FnZUltcHJpbnQuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgaGFzaEFsZ29yaXRobToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBIQVNIX0FMR09SSVRITVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYXNoZWRNZXNzYWdlOiBIQVNIRURfTUVTU0FHRVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuaGFzaEFsZ29yaXRobSA9IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5oYXNoQWxnb3JpdGhtIH0pO1xuICAgICAgICB0aGlzLmhhc2hlZE1lc3NhZ2UgPSBhc24xLnJlc3VsdC5oYXNoZWRNZXNzYWdlO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNoQWxnb3JpdGhtLnRvU2NoZW1hKCksXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNoZWRNZXNzYWdlXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGFzaEFsZ29yaXRobTogdGhpcy5oYXNoQWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgaGFzaGVkTWVzc2FnZTogdGhpcy5oYXNoZWRNZXNzYWdlLnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbk1lc3NhZ2VJbXByaW50LkNMQVNTX05BTUUgPSBcIk1lc3NhZ2VJbXByaW50XCI7XG5cbmNvbnN0IFJFUV9DRVJUID0gXCJyZXFDZXJ0XCI7XG5jb25zdCBTSU5HTEVfUkVRVUVTVF9FWFRFTlNJT05TID0gXCJzaW5nbGVSZXF1ZXN0RXh0ZW5zaW9uc1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkYSA9IFtcbiAgICBSRVFfQ0VSVCxcbiAgICBTSU5HTEVfUkVRVUVTVF9FWFRFTlNJT05TLFxuXTtcbmNsYXNzIFJlcXVlc3QgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJlcUNlcnQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBSRVFfQ0VSVCwgUmVxdWVzdC5kZWZhdWx0VmFsdWVzKFJFUV9DRVJUKSk7XG4gICAgICAgIGlmIChTSU5HTEVfUkVRVUVTVF9FWFRFTlNJT05TIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlUmVxdWVzdEV4dGVuc2lvbnMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSU5HTEVfUkVRVUVTVF9FWFRFTlNJT05TLCBSZXF1ZXN0LmRlZmF1bHRWYWx1ZXMoU0lOR0xFX1JFUVVFU1RfRVhURU5TSU9OUykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBSRVFfQ0VSVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENlcnRJRCgpO1xuICAgICAgICAgICAgY2FzZSBTSU5HTEVfUkVRVUVTVF9FWFRFTlNJT05TOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgUkVRX0NFUlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5pc0VxdWFsKFJlcXVlc3QuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSkpO1xuICAgICAgICAgICAgY2FzZSBTSU5HTEVfUkVRVUVTVF9FWFRFTlNJT05TOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgQ2VydElELnNjaGVtYShuYW1lcy5yZXFDZXJ0IHx8IHt9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbRXh0ZW5zaW9uLnNjaGVtYShuYW1lcy5leHRlbnNpb25zIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IChuYW1lcy5zaW5nbGVSZXF1ZXN0RXh0ZW5zaW9ucyB8fCBFTVBUWV9TVFJJTkcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyRhKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBSZXF1ZXN0LnNjaGVtYSh7XG4gICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgIHJlcUNlcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogUkVRX0NFUlRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBTSU5HTEVfUkVRVUVTVF9FWFRFTlNJT05TXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5yZXFDZXJ0ID0gbmV3IENlcnRJRCh7IHNjaGVtYTogYXNuMS5yZXN1bHQucmVxQ2VydCB9KTtcbiAgICAgICAgaWYgKFNJTkdMRV9SRVFVRVNUX0VYVEVOU0lPTlMgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlUmVxdWVzdEV4dGVuc2lvbnMgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0LnNpbmdsZVJlcXVlc3RFeHRlbnNpb25zLnZhbHVlQmxvY2sudmFsdWUsIGVsZW1lbnQgPT4gbmV3IEV4dGVuc2lvbih7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5yZXFDZXJ0LnRvU2NoZW1hKCkpO1xuICAgICAgICBpZiAodGhpcy5zaW5nbGVSZXF1ZXN0RXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5zaW5nbGVSZXF1ZXN0RXh0ZW5zaW9ucywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIHJlcUNlcnQ6IHRoaXMucmVxQ2VydC50b0pTT04oKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5zaW5nbGVSZXF1ZXN0RXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgcmVzLnNpbmdsZVJlcXVlc3RFeHRlbnNpb25zID0gQXJyYXkuZnJvbSh0aGlzLnNpbmdsZVJlcXVlc3RFeHRlbnNpb25zLCBvID0+IG8udG9KU09OKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuUmVxdWVzdC5DTEFTU19OQU1FID0gXCJSZXF1ZXN0XCI7XG5cbmNvbnN0IFRCUyA9IFwidGJzXCI7XG5jb25zdCBWRVJTSU9OJDUgPSBcInZlcnNpb25cIjtcbmNvbnN0IFJFUVVFU1RPUl9OQU1FID0gXCJyZXF1ZXN0b3JOYW1lXCI7XG5jb25zdCBSRVFVRVNUX0xJU1QgPSBcInJlcXVlc3RMaXN0XCI7XG5jb25zdCBSRVFVRVNUX0VYVEVOU0lPTlMgPSBcInJlcXVlc3RFeHRlbnNpb25zXCI7XG5jb25zdCBUQlNfUkVRVUVTVCQxID0gXCJUQlNSZXF1ZXN0XCI7XG5jb25zdCBUQlNfUkVRVUVTVF9WRVJTSU9OID0gYCR7VEJTX1JFUVVFU1QkMX0uJHtWRVJTSU9OJDV9YDtcbmNvbnN0IFRCU19SRVFVRVNUX1JFUVVFU1RPUl9OQU1FID0gYCR7VEJTX1JFUVVFU1QkMX0uJHtSRVFVRVNUT1JfTkFNRX1gO1xuY29uc3QgVEJTX1JFUVVFU1RfUkVRVUVTVFMgPSBgJHtUQlNfUkVRVUVTVCQxfS5yZXF1ZXN0c2A7XG5jb25zdCBUQlNfUkVRVUVTVF9SRVFVRVNUX0VYVEVOU0lPTlMgPSBgJHtUQlNfUkVRVUVTVCQxfS4ke1JFUVVFU1RfRVhURU5TSU9OU31gO1xuY29uc3QgQ0xFQVJfUFJPUFMkOSA9IFtcbiAgICBUQlNfUkVRVUVTVCQxLFxuICAgIFRCU19SRVFVRVNUX1ZFUlNJT04sXG4gICAgVEJTX1JFUVVFU1RfUkVRVUVTVE9SX05BTUUsXG4gICAgVEJTX1JFUVVFU1RfUkVRVUVTVFMsXG4gICAgVEJTX1JFUVVFU1RfUkVRVUVTVF9FWFRFTlNJT05TXG5dO1xuY2xhc3MgVEJTUmVxdWVzdCBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgZ2V0IHRicygpIHtcbiAgICAgICAgcmV0dXJuIHB2dHN1dGlscy5CdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9BcnJheUJ1ZmZlcih0aGlzLnRic1ZpZXcpO1xuICAgIH1cbiAgICBzZXQgdGJzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGJzVmlldyA9IG5ldyBVaW50OEFycmF5KHZhbHVlKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudGJzVmlldyA9IG5ldyBVaW50OEFycmF5KHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRCUywgVEJTUmVxdWVzdC5kZWZhdWx0VmFsdWVzKFRCUykpKTtcbiAgICAgICAgaWYgKFZFUlNJT04kNSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWRVJTSU9OJDUsIFRCU1JlcXVlc3QuZGVmYXVsdFZhbHVlcyhWRVJTSU9OJDUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoUkVRVUVTVE9SX05BTUUgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0b3JOYW1lID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVRVUVTVE9SX05BTUUsIFRCU1JlcXVlc3QuZGVmYXVsdFZhbHVlcyhSRVFVRVNUT1JfTkFNRSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVxdWVzdExpc3QgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBSRVFVRVNUX0xJU1QsIFRCU1JlcXVlc3QuZGVmYXVsdFZhbHVlcyhSRVFVRVNUX0xJU1QpKTtcbiAgICAgICAgaWYgKFJFUVVFU1RfRVhURU5TSU9OUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RFeHRlbnNpb25zID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVRVUVTVF9FWFRFTlNJT05TLCBUQlNSZXF1ZXN0LmRlZmF1bHRWYWx1ZXMoUkVRVUVTVF9FWFRFTlNJT05TKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRCUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJDU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIFJFUVVFU1RPUl9OQU1FOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJhbE5hbWUoKTtcbiAgICAgICAgICAgIGNhc2UgUkVRVUVTVF9MSVNUOlxuICAgICAgICAgICAgY2FzZSBSRVFVRVNUX0VYVEVOU0lPTlM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBUQlM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5ieXRlTGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiQ1OlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IFRCU1JlcXVlc3QuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSk7XG4gICAgICAgICAgICBjYXNlIFJFUVVFU1RPUl9OQU1FOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLnR5cGUgPT09IEdlbmVyYWxOYW1lLmRlZmF1bHRWYWx1ZXMoXCJ0eXBlXCIpKSAmJiAoT2JqZWN0LmtleXMobWVtYmVyVmFsdWUudmFsdWUpLmxlbmd0aCA9PT0gMCkpO1xuICAgICAgICAgICAgY2FzZSBSRVFVRVNUX0xJU1Q6XG4gICAgICAgICAgICBjYXNlIFJFUVVFU1RfRVhURU5TSU9OUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IFRCU19SRVFVRVNUJDEpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLlRCU1JlcXVlc3RWZXJzaW9uIHx8IFRCU19SRVFVRVNUX1ZFUlNJT04pIH0pXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtHZW5lcmFsTmFtZS5zY2hlbWEobmFtZXMucmVxdWVzdG9yTmFtZSB8fCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBUQlNfUkVRVUVTVF9SRVFVRVNUT1JfTkFNRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMucmVxdWVzdExpc3QgfHwgXCJUQlNSZXF1ZXN0LnJlcXVlc3RMaXN0XCIpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLnJlcXVlc3RzIHx8IFRCU19SRVFVRVNUX1JFUVVFU1RTKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogUmVxdWVzdC5zY2hlbWEobmFtZXMucmVxdWVzdE5hbWVzIHx8IHt9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtFeHRlbnNpb25zLnNjaGVtYShuYW1lcy5leHRlbnNpb25zIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IChuYW1lcy5yZXF1ZXN0RXh0ZW5zaW9ucyB8fCBUQlNfUkVRVUVTVF9SRVFVRVNUX0VYVEVOU0lPTlMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQ5KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBUQlNSZXF1ZXN0LnNjaGVtYSgpKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy50YnNWaWV3ID0gYXNuMS5yZXN1bHQuVEJTUmVxdWVzdC52YWx1ZUJlZm9yZURlY29kZVZpZXc7XG4gICAgICAgIGlmIChUQlNfUkVRVUVTVF9WRVJTSU9OIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gYXNuMS5yZXN1bHRbVEJTX1JFUVVFU1RfVkVSU0lPTl0udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgaWYgKFRCU19SRVFVRVNUX1JFUVVFU1RPUl9OQU1FIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0b3JOYW1lID0gbmV3IEdlbmVyYWxOYW1lKHsgc2NoZW1hOiBhc24xLnJlc3VsdFtUQlNfUkVRVUVTVF9SRVFVRVNUT1JfTkFNRV0gfSk7XG4gICAgICAgIHRoaXMucmVxdWVzdExpc3QgPSBBcnJheS5mcm9tKGFzbjEucmVzdWx0W1RCU19SRVFVRVNUX1JFUVVFU1RTXSwgZWxlbWVudCA9PiBuZXcgUmVxdWVzdCh7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgICAgIGlmIChUQlNfUkVRVUVTVF9SRVFVRVNUX0VYVEVOU0lPTlMgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RFeHRlbnNpb25zID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdFtUQlNfUkVRVUVTVF9SRVFVRVNUX0VYVEVOU0lPTlNdLnZhbHVlQmxvY2sudmFsdWUsIGVsZW1lbnQgPT4gbmV3IEV4dGVuc2lvbih7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKGVuY29kZUZsYWcgPSBmYWxzZSkge1xuICAgICAgICBsZXQgdGJzU2NoZW1hO1xuICAgICAgICBpZiAoZW5jb2RlRmxhZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRic1ZpZXcuYnl0ZUxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gVEJTUmVxdWVzdC5zY2hlbWEoKTtcbiAgICAgICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuZnJvbUJFUih0aGlzLnRic1ZpZXcpO1xuICAgICAgICAgICAgQXNuRXJyb3IuYXNzZXJ0KGFzbjEsIFwiVEJTIFJlcXVlc3RcIik7XG4gICAgICAgICAgICBpZiAoIShhc24xLnJlc3VsdCBpbnN0YW5jZW9mIGFzbjFqcy5TZXF1ZW5jZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBU04uMSByZXN1bHQgc2hvdWxkIGJlIFNFUVVFTkNFXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGJzU2NoZW1hID0gYXNuMS5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMudmVyc2lvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy52ZXJzaW9uIH0pXVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnJlcXVlc3Rvck5hbWUpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW3RoaXMucmVxdWVzdG9yTmFtZS50b1NjaGVtYSgpXVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5yZXF1ZXN0TGlzdCwgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0RXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAyXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLnJlcXVlc3RFeHRlbnNpb25zLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YnNTY2hlbWEgPSBuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YnNTY2hlbWE7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge307XG4gICAgICAgIGlmICh0aGlzLnZlcnNpb24gIT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVzLnZlcnNpb24gPSB0aGlzLnZlcnNpb247XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3Rvck5hbWUpIHtcbiAgICAgICAgICAgIHJlcy5yZXF1ZXN0b3JOYW1lID0gdGhpcy5yZXF1ZXN0b3JOYW1lLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5yZXF1ZXN0TGlzdCA9IEFycmF5LmZyb20odGhpcy5yZXF1ZXN0TGlzdCwgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgaWYgKHRoaXMucmVxdWVzdEV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIHJlcy5yZXF1ZXN0RXh0ZW5zaW9ucyA9IEFycmF5LmZyb20odGhpcy5yZXF1ZXN0RXh0ZW5zaW9ucywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cblRCU1JlcXVlc3QuQ0xBU1NfTkFNRSA9IFwiVEJTUmVxdWVzdFwiO1xuXG5jb25zdCBTSUdOQVRVUkVfQUxHT1JJVEhNJDEgPSBcInNpZ25hdHVyZUFsZ29yaXRobVwiO1xuY29uc3QgU0lHTkFUVVJFJDEgPSBcInNpZ25hdHVyZVwiO1xuY29uc3QgQ0VSVFMgPSBcImNlcnRzXCI7XG5jbGFzcyBTaWduYXR1cmUgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZUFsZ29yaXRobSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNJR05BVFVSRV9BTEdPUklUSE0kMSwgU2lnbmF0dXJlLmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX0FMR09SSVRITSQxKSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkFUVVJFJDEsIFNpZ25hdHVyZS5kZWZhdWx0VmFsdWVzKFNJR05BVFVSRSQxKSk7XG4gICAgICAgIGlmIChDRVJUUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmNlcnRzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ0VSVFMsIFNpZ25hdHVyZS5kZWZhdWx0VmFsdWVzKENFUlRTKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFNJR05BVFVSRV9BTEdPUklUSE0kMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuQml0U3RyaW5nKCk7XG4gICAgICAgICAgICBjYXNlIENFUlRTOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFX0FMR09SSVRITSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLmFsZ29yaXRobUlkID09PSBFTVBUWV9TVFJJTkcpICYmICgoXCJhbGdvcml0aG1QYXJhbXNcIiBpbiBtZW1iZXJWYWx1ZSkgPT09IGZhbHNlKSk7XG4gICAgICAgICAgICBjYXNlIFNJR05BVFVSRSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChTaWduYXR1cmUuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSkpO1xuICAgICAgICAgICAgY2FzZSBDRVJUUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnNpZ25hdHVyZUFsZ29yaXRobSB8fCB7fSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5CaXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc2lnbmF0dXJlIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5jZXJ0cyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IENlcnRpZmljYXRlLnNjaGVtYSh7fSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBbXG4gICAgICAgICAgICBTSUdOQVRVUkVfQUxHT1JJVEhNJDEsXG4gICAgICAgICAgICBTSUdOQVRVUkUkMSxcbiAgICAgICAgICAgIENFUlRTXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFNpZ25hdHVyZS5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBzaWduYXR1cmVBbGdvcml0aG06IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogU0lHTkFUVVJFX0FMR09SSVRITSQxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogU0lHTkFUVVJFJDEsXG4gICAgICAgICAgICAgICAgY2VydHM6IENFUlRTXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7IHNjaGVtYTogYXNuMS5yZXN1bHQuc2lnbmF0dXJlQWxnb3JpdGhtIH0pO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZSA9IGFzbjEucmVzdWx0LnNpZ25hdHVyZTtcbiAgICAgICAgaWYgKENFUlRTIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5jZXJ0cyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQuY2VydHMsIGVsZW1lbnQgPT4gbmV3IENlcnRpZmljYXRlKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9TY2hlbWEoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zaWduYXR1cmUpO1xuICAgICAgICBpZiAodGhpcy5jZXJ0cykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5jZXJ0cywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIHNpZ25hdHVyZUFsZ29yaXRobTogdGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICBzaWduYXR1cmU6IHRoaXMuc2lnbmF0dXJlLnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5jZXJ0cykge1xuICAgICAgICAgICAgcmVzLmNlcnRzID0gQXJyYXkuZnJvbSh0aGlzLmNlcnRzLCBvID0+IG8udG9KU09OKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuU2lnbmF0dXJlLkNMQVNTX05BTUUgPSBcIlNpZ25hdHVyZVwiO1xuXG5jb25zdCBUQlNfUkVRVUVTVCA9IFwidGJzUmVxdWVzdFwiO1xuY29uc3QgT1BUSU9OQUxfU0lHTkFUVVJFID0gXCJvcHRpb25hbFNpZ25hdHVyZVwiO1xuY29uc3QgQ0xFQVJfUFJPUFMkOCA9IFtcbiAgICBUQlNfUkVRVUVTVCxcbiAgICBPUFRJT05BTF9TSUdOQVRVUkVcbl07XG5jbGFzcyBPQ1NQUmVxdWVzdCBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudGJzUmVxdWVzdCA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRCU19SRVFVRVNULCBPQ1NQUmVxdWVzdC5kZWZhdWx0VmFsdWVzKFRCU19SRVFVRVNUKSk7XG4gICAgICAgIGlmIChPUFRJT05BTF9TSUdOQVRVUkUgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25hbFNpZ25hdHVyZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9QVElPTkFMX1NJR05BVFVSRSwgT0NTUFJlcXVlc3QuZGVmYXVsdFZhbHVlcyhPUFRJT05BTF9TSUdOQVRVUkUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVEJTX1JFUVVFU1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUQlNSZXF1ZXN0KCk7XG4gICAgICAgICAgICBjYXNlIE9QVElPTkFMX1NJR05BVFVSRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNpZ25hdHVyZSgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBUQlNfUkVRVUVTVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChUQlNSZXF1ZXN0LmNvbXBhcmVXaXRoRGVmYXVsdChcInRic1wiLCBtZW1iZXJWYWx1ZS50YnMpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoVEJTUmVxdWVzdC5jb21wYXJlV2l0aERlZmF1bHQoXCJ2ZXJzaW9uXCIsIG1lbWJlclZhbHVlLnZlcnNpb24pKSAmJlxuICAgICAgICAgICAgICAgICAgICAoVEJTUmVxdWVzdC5jb21wYXJlV2l0aERlZmF1bHQoXCJyZXF1ZXN0b3JOYW1lXCIsIG1lbWJlclZhbHVlLnJlcXVlc3Rvck5hbWUpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoVEJTUmVxdWVzdC5jb21wYXJlV2l0aERlZmF1bHQoXCJyZXF1ZXN0TGlzdFwiLCBtZW1iZXJWYWx1ZS5yZXF1ZXN0TGlzdCkpICYmXG4gICAgICAgICAgICAgICAgICAgIChUQlNSZXF1ZXN0LmNvbXBhcmVXaXRoRGVmYXVsdChcInJlcXVlc3RFeHRlbnNpb25zXCIsIG1lbWJlclZhbHVlLnJlcXVlc3RFeHRlbnNpb25zKSkpO1xuICAgICAgICAgICAgY2FzZSBPUFRJT05BTF9TSUdOQVRVUkU6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgoU2lnbmF0dXJlLmNvbXBhcmVXaXRoRGVmYXVsdChcInNpZ25hdHVyZUFsZ29yaXRobVwiLCBtZW1iZXJWYWx1ZS5zaWduYXR1cmVBbGdvcml0aG0pKSAmJlxuICAgICAgICAgICAgICAgICAgICAoU2lnbmF0dXJlLmNvbXBhcmVXaXRoRGVmYXVsdChcInNpZ25hdHVyZVwiLCBtZW1iZXJWYWx1ZS5zaWduYXR1cmUpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoU2lnbmF0dXJlLmNvbXBhcmVXaXRoRGVmYXVsdChcImNlcnRzXCIsIG1lbWJlclZhbHVlLmNlcnRzKSkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogbmFtZXMuYmxvY2tOYW1lIHx8IFwiT0NTUFJlcXVlc3RcIixcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgVEJTUmVxdWVzdC5zY2hlbWEobmFtZXMudGJzUmVxdWVzdCB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFRCU19SRVFVRVNUXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBTaWduYXR1cmUuc2NoZW1hKG5hbWVzLm9wdGlvbmFsU2lnbmF0dXJlIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IE9QVElPTkFMX1NJR05BVFVSRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDgpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIE9DU1BSZXF1ZXN0LnNjaGVtYSgpKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy50YnNSZXF1ZXN0ID0gbmV3IFRCU1JlcXVlc3QoeyBzY2hlbWE6IGFzbjEucmVzdWx0LnRic1JlcXVlc3QgfSk7XG4gICAgICAgIGlmIChPUFRJT05BTF9TSUdOQVRVUkUgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLm9wdGlvbmFsU2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZSh7IHNjaGVtYTogYXNuMS5yZXN1bHQub3B0aW9uYWxTaWduYXR1cmUgfSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKGVuY29kZUZsYWcgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMudGJzUmVxdWVzdC50b1NjaGVtYShlbmNvZGVGbGFnKSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbmFsU2lnbmF0dXJlKVxuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uYWxTaWduYXR1cmUudG9TY2hlbWEoKVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgdGJzUmVxdWVzdDogdGhpcy50YnNSZXF1ZXN0LnRvSlNPTigpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbmFsU2lnbmF0dXJlKSB7XG4gICAgICAgICAgICByZXMub3B0aW9uYWxTaWduYXR1cmUgPSB0aGlzLm9wdGlvbmFsU2lnbmF0dXJlLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZUZvckNlcnRpZmljYXRlKGNlcnRpZmljYXRlLCBwYXJhbWV0ZXJzLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgY29uc3QgY2VydElEID0gbmV3IENlcnRJRCgpO1xuICAgICAgICBhd2FpdCBjZXJ0SUQuY3JlYXRlRm9yQ2VydGlmaWNhdGUoY2VydGlmaWNhdGUsIHBhcmFtZXRlcnMsIGNyeXB0byk7XG4gICAgICAgIHRoaXMudGJzUmVxdWVzdC5yZXF1ZXN0TGlzdC5wdXNoKG5ldyBSZXF1ZXN0KHtcbiAgICAgICAgICAgIHJlcUNlcnQ6IGNlcnRJRCxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBzaWduKHByaXZhdGVLZXksIGhhc2hBbGdvcml0aG0gPSBcIlNIQS0xXCIsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICBQYXJhbWV0ZXJFcnJvci5hc3NlcnRFbXB0eShwcml2YXRlS2V5LCBcInByaXZhdGVLZXlcIiwgXCJPQ1NQUmVxdWVzdC5zaWduIG1ldGhvZFwiKTtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbmFsU2lnbmF0dXJlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZWVkIHRvIGNyZWF0ZSBcXFwib3B0aW9uYWxTaWduYXR1cmVcXFwiIGZpZWxkIGJlZm9yZSBzaWduaW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZVBhcmFtcyA9IGF3YWl0IGNyeXB0by5nZXRTaWduYXR1cmVQYXJhbWV0ZXJzKHByaXZhdGVLZXksIGhhc2hBbGdvcml0aG0pO1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gc2lnbmF0dXJlUGFyYW1zLnBhcmFtZXRlcnM7XG4gICAgICAgIHRoaXMub3B0aW9uYWxTaWduYXR1cmUuc2lnbmF0dXJlQWxnb3JpdGhtID0gc2lnbmF0dXJlUGFyYW1zLnNpZ25hdHVyZUFsZ29yaXRobTtcbiAgICAgICAgY29uc3QgdGJzID0gdGhpcy50YnNSZXF1ZXN0LnRvU2NoZW1hKHRydWUpLnRvQkVSKGZhbHNlKTtcbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgY3J5cHRvLnNpZ25XaXRoUHJpdmF0ZUtleSh0YnMsIHByaXZhdGVLZXksIHBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsU2lnbmF0dXJlLnNpZ25hdHVyZSA9IG5ldyBhc24xanMuQml0U3RyaW5nKHsgdmFsdWVIZXg6IHNpZ25hdHVyZSB9KTtcbiAgICB9XG4gICAgdmVyaWZ5KCkge1xuICAgIH1cbn1cbk9DU1BSZXF1ZXN0LkNMQVNTX05BTUUgPSBcIk9DU1BSZXF1ZXN0XCI7XG5cbmNvbnN0IFJFU1BPTlNFX1RZUEUgPSBcInJlc3BvbnNlVHlwZVwiO1xuY29uc3QgUkVTUE9OU0UgPSBcInJlc3BvbnNlXCI7XG5jb25zdCBDTEVBUl9QUk9QUyQ3ID0gW1xuICAgIFJFU1BPTlNFX1RZUEUsXG4gICAgUkVTUE9OU0Vcbl07XG5jbGFzcyBSZXNwb25zZUJ5dGVzIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yZXNwb25zZVR5cGUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBSRVNQT05TRV9UWVBFLCBSZXNwb25zZUJ5dGVzLmRlZmF1bHRWYWx1ZXMoUkVTUE9OU0VfVFlQRSkpO1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVTUE9OU0UsIFJlc3BvbnNlQnl0ZXMuZGVmYXVsdFZhbHVlcyhSRVNQT05TRSkpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgUkVTUE9OU0VfVFlQRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfU1RSSU5HO1xuICAgICAgICAgICAgY2FzZSBSRVNQT05TRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5PY3RldFN0cmluZygpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBSRVNQT05TRV9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IEVNUFRZX1NUUklORyk7XG4gICAgICAgICAgICBjYXNlIFJFU1BPTlNFOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChSZXNwb25zZUJ5dGVzLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgbmFtZTogKG5hbWVzLnJlc3BvbnNlVHlwZSB8fCBFTVBUWV9TVFJJTkcpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMucmVzcG9uc2UgfHwgRU1QVFlfU1RSSU5HKSB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDcpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFJlc3BvbnNlQnl0ZXMuc2NoZW1hKHtcbiAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBSRVNQT05TRV9UWVBFLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBSRVNQT05TRVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMucmVzcG9uc2VUeXBlID0gYXNuMS5yZXN1bHQucmVzcG9uc2VUeXBlLnZhbHVlQmxvY2sudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5yZXNwb25zZSA9IGFzbjEucmVzdWx0LnJlc3BvbnNlO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IHRoaXMucmVzcG9uc2VUeXBlIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGU6IHRoaXMucmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgcmVzcG9uc2U6IHRoaXMucmVzcG9uc2UudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuUmVzcG9uc2VCeXRlcy5DTEFTU19OQU1FID0gXCJSZXNwb25zZUJ5dGVzXCI7XG5cbmNvbnN0IFJFU1BPTlNFX1NUQVRVUyA9IFwicmVzcG9uc2VTdGF0dXNcIjtcbmNvbnN0IFJFU1BPTlNFX0JZVEVTID0gXCJyZXNwb25zZUJ5dGVzXCI7XG5jbGFzcyBPQ1NQUmVzcG9uc2UgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUkVTUE9OU0VfU1RBVFVTLCBPQ1NQUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhSRVNQT05TRV9TVEFUVVMpKTtcbiAgICAgICAgaWYgKFJFU1BPTlNFX0JZVEVTIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VCeXRlcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFJFU1BPTlNFX0JZVEVTLCBPQ1NQUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhSRVNQT05TRV9CWVRFUykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBSRVNQT05TRV9TVEFUVVM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuRW51bWVyYXRlZCgpO1xuICAgICAgICAgICAgY2FzZSBSRVNQT05TRV9CWVRFUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlQnl0ZXMoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgUkVTUE9OU0VfU1RBVFVTOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChPQ1NQUmVzcG9uc2UuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSkpO1xuICAgICAgICAgICAgY2FzZSBSRVNQT05TRV9CWVRFUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChSZXNwb25zZUJ5dGVzLmNvbXBhcmVXaXRoRGVmYXVsdChcInJlc3BvbnNlVHlwZVwiLCBtZW1iZXJWYWx1ZS5yZXNwb25zZVR5cGUpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoUmVzcG9uc2VCeXRlcy5jb21wYXJlV2l0aERlZmF1bHQoXCJyZXNwb25zZVwiLCBtZW1iZXJWYWx1ZS5yZXNwb25zZSkpKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNjaGVtYShwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBcIm5hbWVzXCIsIHt9KTtcbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIG5hbWU6IChuYW1lcy5ibG9ja05hbWUgfHwgXCJPQ1NQUmVzcG9uc2VcIiksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuRW51bWVyYXRlZCh7IG5hbWU6IChuYW1lcy5yZXNwb25zZVN0YXR1cyB8fCBSRVNQT05TRV9TVEFUVVMpIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlQnl0ZXMuc2NoZW1hKG5hbWVzLnJlc3BvbnNlQnl0ZXMgfHwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogUkVTUE9OU0VfQllURVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBbXG4gICAgICAgICAgICBSRVNQT05TRV9TVEFUVVMsXG4gICAgICAgICAgICBSRVNQT05TRV9CWVRFU1xuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBPQ1NQUmVzcG9uc2Uuc2NoZW1hKCkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzID0gYXNuMS5yZXN1bHQucmVzcG9uc2VTdGF0dXM7XG4gICAgICAgIGlmIChSRVNQT05TRV9CWVRFUyBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VCeXRlcyA9IG5ldyBSZXNwb25zZUJ5dGVzKHsgc2NoZW1hOiBhc24xLnJlc3VsdC5yZXNwb25zZUJ5dGVzIH0pO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLnJlc3BvbnNlU3RhdHVzKTtcbiAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VCeXRlcykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBbdGhpcy5yZXNwb25zZUJ5dGVzLnRvU2NoZW1hKCldXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgcmVzcG9uc2VTdGF0dXM6IHRoaXMucmVzcG9uc2VTdGF0dXMudG9KU09OKClcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VCeXRlcykge1xuICAgICAgICAgICAgcmVzLnJlc3BvbnNlQnl0ZXMgPSB0aGlzLnJlc3BvbnNlQnl0ZXMudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2VydGlmaWNhdGVTdGF0dXMoY2VydGlmaWNhdGUsIGlzc3VlckNlcnRpZmljYXRlLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgbGV0IGJhc2ljUmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGlzRm9yQ2VydGlmaWNhdGU6IGZhbHNlLFxuICAgICAgICAgICAgc3RhdHVzOiAyXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5yZXNwb25zZUJ5dGVzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VCeXRlcy5yZXNwb25zZVR5cGUgIT09IGlkX1BLSVhfT0NTUF9CYXNpYylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhc24xQmFzaWMgPSBhc24xanMuZnJvbUJFUih0aGlzLnJlc3BvbnNlQnl0ZXMucmVzcG9uc2UudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpO1xuICAgICAgICAgICAgQXNuRXJyb3IuYXNzZXJ0KGFzbjFCYXNpYywgXCJCYXNpYyBPQ1NQIHJlc3BvbnNlXCIpO1xuICAgICAgICAgICAgYmFzaWNSZXNwb25zZSA9IG5ldyBCYXNpY09DU1BSZXNwb25zZSh7IHNjaGVtYTogYXNuMUJhc2ljLnJlc3VsdCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2ljUmVzcG9uc2UuZ2V0Q2VydGlmaWNhdGVTdGF0dXMoY2VydGlmaWNhdGUsIGlzc3VlckNlcnRpZmljYXRlLCBjcnlwdG8pO1xuICAgIH1cbiAgICBhc3luYyBzaWduKHByaXZhdGVLZXksIGhhc2hBbGdvcml0aG0sIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNlQnl0ZXMgJiYgdGhpcy5yZXNwb25zZUJ5dGVzLnJlc3BvbnNlVHlwZSA9PT0gaWRfUEtJWF9PQ1NQX0Jhc2ljKSB7XG4gICAgICAgICAgICBjb25zdCBiYXNpY1Jlc3BvbnNlID0gQmFzaWNPQ1NQUmVzcG9uc2UuZnJvbUJFUih0aGlzLnJlc3BvbnNlQnl0ZXMucmVzcG9uc2UudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpO1xuICAgICAgICAgICAgcmV0dXJuIGJhc2ljUmVzcG9uc2Uuc2lnbihwcml2YXRlS2V5LCBoYXNoQWxnb3JpdGhtLCBjcnlwdG8pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBSZXNwb25zZUJ5dGVzIHR5cGU6ICR7KChfYSA9IHRoaXMucmVzcG9uc2VCeXRlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlc3BvbnNlVHlwZSkgfHwgXCJVbmtub3duXCJ9YCk7XG4gICAgfVxuICAgIGFzeW5jIHZlcmlmeShpc3N1ZXJDZXJ0aWZpY2F0ZSA9IG51bGwsIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICgoUkVTUE9OU0VfQllURVMgaW4gdGhpcykgPT09IGZhbHNlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW1wdHkgUmVzcG9uc2VCeXRlcyBmaWVsZFwiKTtcbiAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VCeXRlcyAmJiB0aGlzLnJlc3BvbnNlQnl0ZXMucmVzcG9uc2VUeXBlID09PSBpZF9QS0lYX09DU1BfQmFzaWMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhc2ljUmVzcG9uc2UgPSBCYXNpY09DU1BSZXNwb25zZS5mcm9tQkVSKHRoaXMucmVzcG9uc2VCeXRlcy5yZXNwb25zZS52YWx1ZUJsb2NrLnZhbHVlSGV4Vmlldyk7XG4gICAgICAgICAgICBpZiAoaXNzdWVyQ2VydGlmaWNhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2ljUmVzcG9uc2UuY2VydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzaWNSZXNwb25zZS5jZXJ0cyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiYXNpY1Jlc3BvbnNlLmNlcnRzLnB1c2goaXNzdWVyQ2VydGlmaWNhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJhc2ljUmVzcG9uc2UudmVyaWZ5KHt9LCBjcnlwdG8pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBSZXNwb25zZUJ5dGVzIHR5cGU6ICR7KChfYSA9IHRoaXMucmVzcG9uc2VCeXRlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlc3BvbnNlVHlwZSkgfHwgXCJVbmtub3duXCJ9YCk7XG4gICAgfVxufVxuT0NTUFJlc3BvbnNlLkNMQVNTX05BTUUgPSBcIk9DU1BSZXNwb25zZVwiO1xuXG5jb25zdCBUWVBFID0gXCJ0eXBlXCI7XG5jb25zdCBBVFRSSUJVVEVTID0gXCJhdHRyaWJ1dGVzXCI7XG5jb25zdCBFTkNPREVEX1ZBTFVFID0gXCJlbmNvZGVkVmFsdWVcIjtcbmNvbnN0IENMRUFSX1BST1BTJDYgPSBbXG4gICAgQVRUUklCVVRFU1xuXTtcbmNsYXNzIFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudHlwZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRZUEUsIFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcy5kZWZhdWx0VmFsdWVzKFRZUEUpKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQVRUUklCVVRFUywgU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzLmRlZmF1bHRWYWx1ZXMoQVRUUklCVVRFUykpO1xuICAgICAgICB0aGlzLmVuY29kZWRWYWx1ZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEVOQ09ERURfVkFMVUUsIFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcy5kZWZhdWx0VmFsdWVzKEVOQ09ERURfVkFMVUUpKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRZUEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgtMSk7XG4gICAgICAgICAgICBjYXNlIEFUVFJJQlVURVM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY2FzZSBFTkNPREVEX1ZBTFVFOlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9CVUZGRVI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFRZUEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzLmRlZmF1bHRWYWx1ZXMoVFlQRSkpO1xuICAgICAgICAgICAgY2FzZSBBVFRSSUJVVEVTOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUubGVuZ3RoID09PSAwKTtcbiAgICAgICAgICAgIGNhc2UgRU5DT0RFRF9WQUxVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmJ5dGVMZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgdGFnTnVtYmVyOiBuYW1lcy50YWdOdW1iZXIgfHwgMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5hdHRyaWJ1dGVzIHx8IEVNUFRZX1NUUklORyksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBBdHRyaWJ1dGUuc2NoZW1hKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHB2dXRpbHMuY2xlYXJQcm9wcyhzY2hlbWEsIENMRUFSX1BST1BTJDYpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcy5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IHRoaXMudHlwZSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBBVFRSSUJVVEVTXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy50eXBlID0gYXNuMS5yZXN1bHQuaWRCbG9jay50YWdOdW1iZXI7XG4gICAgICAgIHRoaXMuZW5jb2RlZFZhbHVlID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b0FycmF5QnVmZmVyKGFzbjEucmVzdWx0LnZhbHVlQmVmb3JlRGVjb2RlVmlldyk7XG4gICAgICAgIGNvbnN0IGVuY29kZWRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5lbmNvZGVkVmFsdWUpO1xuICAgICAgICBlbmNvZGVkVmlld1swXSA9IDB4MzE7XG4gICAgICAgIGlmICgoQVRUUklCVVRFUyBpbiBhc24xLnJlc3VsdCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIldyb25nIHN0cnVjdHVyZSBvZiBTaWduZWRVbnNpZ25lZEF0dHJpYnV0ZXNcIik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHQuYXR0cmlidXRlcywgZWxlbWVudCA9PiBuZXcgQXR0cmlidXRlKHsgc2NoZW1hOiBlbGVtZW50IH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGlmIChTaWduZWRBbmRVbnNpZ25lZEF0dHJpYnV0ZXMuY29tcGFyZVdpdGhEZWZhdWx0KFRZUEUsIHRoaXMudHlwZSkgfHwgU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzLmNvbXBhcmVXaXRoRGVmYXVsdChBVFRSSUJVVEVTLCB0aGlzLmF0dHJpYnV0ZXMpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5jb3JyZWN0bHkgaW5pdGlhbGl6ZWQgXFxcIlNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlc1xcXCIgY2xhc3NcIik7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IHRoaXMudHlwZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiBBcnJheS5mcm9tKHRoaXMuYXR0cmlidXRlcywgbyA9PiBvLnRvU2NoZW1hKCkpXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAoU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzLmNvbXBhcmVXaXRoRGVmYXVsdChUWVBFLCB0aGlzLnR5cGUpIHx8IFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcy5jb21wYXJlV2l0aERlZmF1bHQoQVRUUklCVVRFUywgdGhpcy5hdHRyaWJ1dGVzKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdGx5IGluaXRpYWxpemVkIFxcXCJTaWduZWRBbmRVbnNpZ25lZEF0dHJpYnV0ZXNcXFwiIGNsYXNzXCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgYXR0cmlidXRlczogQXJyYXkuZnJvbSh0aGlzLmF0dHJpYnV0ZXMsIG8gPT4gby50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5TaWduZWRBbmRVbnNpZ25lZEF0dHJpYnV0ZXMuQ0xBU1NfTkFNRSA9IFwiU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzXCI7XG5cbmNvbnN0IFZFUlNJT04kNCA9IFwidmVyc2lvblwiO1xuY29uc3QgU0lEID0gXCJzaWRcIjtcbmNvbnN0IERJR0VTVF9BTEdPUklUSE0gPSBcImRpZ2VzdEFsZ29yaXRobVwiO1xuY29uc3QgU0lHTkVEX0FUVFJTID0gXCJzaWduZWRBdHRyc1wiO1xuY29uc3QgU0lHTkFUVVJFX0FMR09SSVRITSA9IFwic2lnbmF0dXJlQWxnb3JpdGhtXCI7XG5jb25zdCBTSUdOQVRVUkUgPSBcInNpZ25hdHVyZVwiO1xuY29uc3QgVU5TSUdORURfQVRUUlMgPSBcInVuc2lnbmVkQXR0cnNcIjtcbmNvbnN0IFNJR05FUl9JTkZPID0gXCJTaWduZXJJbmZvXCI7XG5jb25zdCBTSUdORVJfSU5GT19WRVJTSU9OID0gYCR7U0lHTkVSX0lORk99LiR7VkVSU0lPTiQ0fWA7XG5jb25zdCBTSUdORVJfSU5GT19TSUQgPSBgJHtTSUdORVJfSU5GT30uJHtTSUR9YDtcbmNvbnN0IFNJR05FUl9JTkZPX0RJR0VTVF9BTEdPUklUSE0gPSBgJHtTSUdORVJfSU5GT30uJHtESUdFU1RfQUxHT1JJVEhNfWA7XG5jb25zdCBTSUdORVJfSU5GT19TSUdORURfQVRUUlMgPSBgJHtTSUdORVJfSU5GT30uJHtTSUdORURfQVRUUlN9YDtcbmNvbnN0IFNJR05FUl9JTkZPX1NJR05BVFVSRV9BTEdPUklUSE0gPSBgJHtTSUdORVJfSU5GT30uJHtTSUdOQVRVUkVfQUxHT1JJVEhNfWA7XG5jb25zdCBTSUdORVJfSU5GT19TSUdOQVRVUkUgPSBgJHtTSUdORVJfSU5GT30uJHtTSUdOQVRVUkV9YDtcbmNvbnN0IFNJR05FUl9JTkZPX1VOU0lHTkVEX0FUVFJTID0gYCR7U0lHTkVSX0lORk99LiR7VU5TSUdORURfQVRUUlN9YDtcbmNvbnN0IENMRUFSX1BST1BTJDUgPSBbXG4gICAgU0lHTkVSX0lORk9fVkVSU0lPTixcbiAgICBTSUdORVJfSU5GT19TSUQsXG4gICAgU0lHTkVSX0lORk9fRElHRVNUX0FMR09SSVRITSxcbiAgICBTSUdORVJfSU5GT19TSUdORURfQVRUUlMsXG4gICAgU0lHTkVSX0lORk9fU0lHTkFUVVJFX0FMR09SSVRITSxcbiAgICBTSUdORVJfSU5GT19TSUdOQVRVUkUsXG4gICAgU0lHTkVSX0lORk9fVU5TSUdORURfQVRUUlNcbl07XG5jbGFzcyBTaWduZXJJbmZvIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVkVSU0lPTiQ0LCBTaWduZXJJbmZvLmRlZmF1bHRWYWx1ZXMoVkVSU0lPTiQ0KSk7XG4gICAgICAgIHRoaXMuc2lkID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lELCBTaWduZXJJbmZvLmRlZmF1bHRWYWx1ZXMoU0lEKSk7XG4gICAgICAgIHRoaXMuZGlnZXN0QWxnb3JpdGhtID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRElHRVNUX0FMR09SSVRITSwgU2lnbmVySW5mby5kZWZhdWx0VmFsdWVzKERJR0VTVF9BTEdPUklUSE0pKTtcbiAgICAgICAgaWYgKFNJR05FRF9BVFRSUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnNpZ25lZEF0dHJzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkVEX0FUVFJTLCBTaWduZXJJbmZvLmRlZmF1bHRWYWx1ZXMoU0lHTkVEX0FUVFJTKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaWduYXR1cmVBbGdvcml0aG0gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTSUdOQVRVUkVfQUxHT1JJVEhNLCBTaWduZXJJbmZvLmRlZmF1bHRWYWx1ZXMoU0lHTkFUVVJFX0FMR09SSVRITSkpO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNJR05BVFVSRSwgU2lnbmVySW5mby5kZWZhdWx0VmFsdWVzKFNJR05BVFVSRSkpO1xuICAgICAgICBpZiAoVU5TSUdORURfQVRUUlMgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy51bnNpZ25lZEF0dHJzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgVU5TSUdORURfQVRUUlMsIFNpZ25lckluZm8uZGVmYXVsdFZhbHVlcyhVTlNJR05FRF9BVFRSUykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIFNJRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5BbnkoKTtcbiAgICAgICAgICAgIGNhc2UgRElHRVNUX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkVEX0FUVFJTOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzKHsgdHlwZTogMCB9KTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKCk7XG4gICAgICAgICAgICBjYXNlIFVOU0lHTkVEX0FUVFJTOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzKHsgdHlwZTogMSB9KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiQ0OlxuICAgICAgICAgICAgICAgIHJldHVybiAoU2lnbmVySW5mby5kZWZhdWx0VmFsdWVzKFZFUlNJT04kNCkgPT09IG1lbWJlclZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgU0lEOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgaW5zdGFuY2VvZiBhc24xanMuQW55KTtcbiAgICAgICAgICAgIGNhc2UgRElHRVNUX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICBpZiAoKG1lbWJlclZhbHVlIGluc3RhbmNlb2YgQWxnb3JpdGhtSWRlbnRpZmllcikgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lbWJlclZhbHVlLmlzRXF1YWwoU2lnbmVySW5mby5kZWZhdWx0VmFsdWVzKERJR0VTVF9BTEdPUklUSE0pKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkVEX0FUVFJTOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcy5jb21wYXJlV2l0aERlZmF1bHQoXCJ0eXBlXCIsIG1lbWJlclZhbHVlLnR5cGUpKVxuICAgICAgICAgICAgICAgICAgICAmJiAoU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzLmNvbXBhcmVXaXRoRGVmYXVsdChcImF0dHJpYnV0ZXNcIiwgbWVtYmVyVmFsdWUuYXR0cmlidXRlcykpXG4gICAgICAgICAgICAgICAgICAgICYmIChTaWduZWRBbmRVbnNpZ25lZEF0dHJpYnV0ZXMuY29tcGFyZVdpdGhEZWZhdWx0KFwiZW5jb2RlZFZhbHVlXCIsIG1lbWJlclZhbHVlLmVuY29kZWRWYWx1ZSkpKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFX0FMR09SSVRITTpcbiAgICAgICAgICAgICAgICBpZiAoKG1lbWJlclZhbHVlIGluc3RhbmNlb2YgQWxnb3JpdGhtSWRlbnRpZmllcikgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lbWJlclZhbHVlLmlzRXF1YWwoU2lnbmVySW5mby5kZWZhdWx0VmFsdWVzKFNJR05BVFVSRV9BTEdPUklUSE0pKTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkFUVVJFOlxuICAgICAgICAgICAgY2FzZSBVTlNJR05FRF9BVFRSUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChTaWduZWRBbmRVbnNpZ25lZEF0dHJpYnV0ZXMuY29tcGFyZVdpdGhEZWZhdWx0KFwidHlwZVwiLCBtZW1iZXJWYWx1ZS50eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgJiYgKFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcy5jb21wYXJlV2l0aERlZmF1bHQoXCJhdHRyaWJ1dGVzXCIsIG1lbWJlclZhbHVlLmF0dHJpYnV0ZXMpKVxuICAgICAgICAgICAgICAgICAgICAmJiAoU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzLmNvbXBhcmVXaXRoRGVmYXVsdChcImVuY29kZWRWYWx1ZVwiLCBtZW1iZXJWYWx1ZS5lbmNvZGVkVmFsdWUpKSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiBTSUdORVJfSU5GTyxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnZlcnNpb24gfHwgU0lHTkVSX0lORk9fVkVSU0lPTikgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5DaG9pY2Uoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgSXNzdWVyQW5kU2VyaWFsTnVtYmVyLnNjaGVtYShuYW1lcy5zaWRTY2hlbWEgfHwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogU0lHTkVSX0lORk9fU0lEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNob2ljZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5zaWQgfHwgU0lHTkVSX0lORk9fU0lEKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuT2N0ZXRTdHJpbmcoKV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUHJpbWl0aXZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLnNpZCB8fCBTSUdORVJfSU5GT19TSUQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLmRpZ2VzdEFsZ29yaXRobSB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFNJR05FUl9JTkZPX0RJR0VTVF9BTEdPUklUSE1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcy5zY2hlbWEobmFtZXMuc2lnbmVkQXR0cnMgfHwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBTSUdORVJfSU5GT19TSUdORURfQVRUUlMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEFsZ29yaXRobUlkZW50aWZpZXIuc2NoZW1hKG5hbWVzLnNpZ25hdHVyZUFsZ29yaXRobSB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IFNJR05FUl9JTkZPX1NJR05BVFVSRV9BTEdPUklUSE1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyBuYW1lOiAobmFtZXMuc2lnbmF0dXJlIHx8IFNJR05FUl9JTkZPX1NJR05BVFVSRSkgfSksXG4gICAgICAgICAgICAgICAgU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzLnNjaGVtYShuYW1lcy51bnNpZ25lZEF0dHJzIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogU0lHTkVSX0lORk9fVU5TSUdORURfQVRUUlMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkNSk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgU2lnbmVySW5mby5zY2hlbWEoKSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGFzbjEucmVzdWx0W1NJR05FUl9JTkZPX1ZFUlNJT05dLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTaWQgPSBhc24xLnJlc3VsdFtTSUdORVJfSU5GT19TSURdO1xuICAgICAgICBpZiAoY3VycmVudFNpZC5pZEJsb2NrLnRhZ0NsYXNzID09PSAxKVxuICAgICAgICAgICAgdGhpcy5zaWQgPSBuZXcgSXNzdWVyQW5kU2VyaWFsTnVtYmVyKHsgc2NoZW1hOiBjdXJyZW50U2lkIH0pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnNpZCA9IGN1cnJlbnRTaWQ7XG4gICAgICAgIHRoaXMuZGlnZXN0QWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0W1NJR05FUl9JTkZPX0RJR0VTVF9BTEdPUklUSE1dIH0pO1xuICAgICAgICBpZiAoU0lHTkVSX0lORk9fU0lHTkVEX0FUVFJTIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5zaWduZWRBdHRycyA9IG5ldyBTaWduZWRBbmRVbnNpZ25lZEF0dHJpYnV0ZXMoeyB0eXBlOiAwLCBzY2hlbWE6IGFzbjEucmVzdWx0W1NJR05FUl9JTkZPX1NJR05FRF9BVFRSU10gfSk7XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtID0gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFzbjEucmVzdWx0W1NJR05FUl9JTkZPX1NJR05BVFVSRV9BTEdPUklUSE1dIH0pO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZSA9IGFzbjEucmVzdWx0W1NJR05FUl9JTkZPX1NJR05BVFVSRV07XG4gICAgICAgIGlmIChTSUdORVJfSU5GT19VTlNJR05FRF9BVFRSUyBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMudW5zaWduZWRBdHRycyA9IG5ldyBTaWduZWRBbmRVbnNpZ25lZEF0dHJpYnV0ZXMoeyB0eXBlOiAxLCBzY2hlbWE6IGFzbjEucmVzdWx0W1NJR05FUl9JTkZPX1VOU0lHTkVEX0FUVFJTXSB9KTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGlmIChTaWduZXJJbmZvLmNvbXBhcmVXaXRoRGVmYXVsdChTSUQsIHRoaXMuc2lkKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdGx5IGluaXRpYWxpemVkIFxcXCJTaWduZXJJbmZvXFxcIiBjbGFzc1wiKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy52ZXJzaW9uIH0pKTtcbiAgICAgICAgaWYgKHRoaXMuc2lkIGluc3RhbmNlb2YgSXNzdWVyQW5kU2VyaWFsTnVtYmVyKVxuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLnNpZC50b1NjaGVtYSgpKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLnNpZCk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5kaWdlc3RBbGdvcml0aG0udG9TY2hlbWEoKSk7XG4gICAgICAgIGlmICh0aGlzLnNpZ25lZEF0dHJzKSB7XG4gICAgICAgICAgICBpZiAoU2lnbmVySW5mby5jb21wYXJlV2l0aERlZmF1bHQoU0lHTkVEX0FUVFJTLCB0aGlzLnNpZ25lZEF0dHJzKSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLnNpZ25lZEF0dHJzLnRvU2NoZW1hKCkpO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zaWduYXR1cmVBbGdvcml0aG0udG9TY2hlbWEoKSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zaWduYXR1cmUpO1xuICAgICAgICBpZiAodGhpcy51bnNpZ25lZEF0dHJzKSB7XG4gICAgICAgICAgICBpZiAoU2lnbmVySW5mby5jb21wYXJlV2l0aERlZmF1bHQoVU5TSUdORURfQVRUUlMsIHRoaXMudW5zaWduZWRBdHRycykgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy51bnNpZ25lZEF0dHJzLnRvU2NoZW1hKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGlmIChTaWduZXJJbmZvLmNvbXBhcmVXaXRoRGVmYXVsdChTSUQsIHRoaXMuc2lkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5jb3JyZWN0bHkgaW5pdGlhbGl6ZWQgXFxcIlNpZ25lckluZm9cXFwiIGNsYXNzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbixcbiAgICAgICAgICAgIGRpZ2VzdEFsZ29yaXRobTogdGhpcy5kaWdlc3RBbGdvcml0aG0udG9KU09OKCksXG4gICAgICAgICAgICBzaWduYXR1cmVBbGdvcml0aG06IHRoaXMuc2lnbmF0dXJlQWxnb3JpdGhtLnRvSlNPTigpLFxuICAgICAgICAgICAgc2lnbmF0dXJlOiB0aGlzLnNpZ25hdHVyZS50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCEodGhpcy5zaWQgaW5zdGFuY2VvZiBhc24xanMuQW55KSlcbiAgICAgICAgICAgIHJlcy5zaWQgPSB0aGlzLnNpZC50b0pTT04oKTtcbiAgICAgICAgaWYgKHRoaXMuc2lnbmVkQXR0cnMgJiYgU2lnbmVySW5mby5jb21wYXJlV2l0aERlZmF1bHQoU0lHTkVEX0FUVFJTLCB0aGlzLnNpZ25lZEF0dHJzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJlcy5zaWduZWRBdHRycyA9IHRoaXMuc2lnbmVkQXR0cnMudG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudW5zaWduZWRBdHRycyAmJiBTaWduZXJJbmZvLmNvbXBhcmVXaXRoRGVmYXVsdChVTlNJR05FRF9BVFRSUywgdGhpcy51bnNpZ25lZEF0dHJzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJlcy51bnNpZ25lZEF0dHJzID0gdGhpcy51bnNpZ25lZEF0dHJzLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuU2lnbmVySW5mby5DTEFTU19OQU1FID0gXCJTaWduZXJJbmZvXCI7XG5cbmNvbnN0IFZFUlNJT04kMyA9IFwidmVyc2lvblwiO1xuY29uc3QgUE9MSUNZID0gXCJwb2xpY3lcIjtcbmNvbnN0IE1FU1NBR0VfSU1QUklOVCQxID0gXCJtZXNzYWdlSW1wcmludFwiO1xuY29uc3QgU0VSSUFMX05VTUJFUiA9IFwic2VyaWFsTnVtYmVyXCI7XG5jb25zdCBHRU5fVElNRSA9IFwiZ2VuVGltZVwiO1xuY29uc3QgT1JERVJJTkcgPSBcIm9yZGVyaW5nXCI7XG5jb25zdCBOT05DRSQxID0gXCJub25jZVwiO1xuY29uc3QgQUNDVVJBQ1kgPSBcImFjY3VyYWN5XCI7XG5jb25zdCBUU0EgPSBcInRzYVwiO1xuY29uc3QgRVhURU5TSU9OUyQxID0gXCJleHRlbnNpb25zXCI7XG5jb25zdCBUU1RfSU5GTyA9IFwiVFNUSW5mb1wiO1xuY29uc3QgVFNUX0lORk9fVkVSU0lPTiA9IGAke1RTVF9JTkZPfS4ke1ZFUlNJT04kM31gO1xuY29uc3QgVFNUX0lORk9fUE9MSUNZID0gYCR7VFNUX0lORk99LiR7UE9MSUNZfWA7XG5jb25zdCBUU1RfSU5GT19NRVNTQUdFX0lNUFJJTlQgPSBgJHtUU1RfSU5GT30uJHtNRVNTQUdFX0lNUFJJTlQkMX1gO1xuY29uc3QgVFNUX0lORk9fU0VSSUFMX05VTUJFUiA9IGAke1RTVF9JTkZPfS4ke1NFUklBTF9OVU1CRVJ9YDtcbmNvbnN0IFRTVF9JTkZPX0dFTl9USU1FID0gYCR7VFNUX0lORk99LiR7R0VOX1RJTUV9YDtcbmNvbnN0IFRTVF9JTkZPX0FDQ1VSQUNZID0gYCR7VFNUX0lORk99LiR7QUNDVVJBQ1l9YDtcbmNvbnN0IFRTVF9JTkZPX09SREVSSU5HID0gYCR7VFNUX0lORk99LiR7T1JERVJJTkd9YDtcbmNvbnN0IFRTVF9JTkZPX05PTkNFID0gYCR7VFNUX0lORk99LiR7Tk9OQ0UkMX1gO1xuY29uc3QgVFNUX0lORk9fVFNBID0gYCR7VFNUX0lORk99LiR7VFNBfWA7XG5jb25zdCBUU1RfSU5GT19FWFRFTlNJT05TID0gYCR7VFNUX0lORk99LiR7RVhURU5TSU9OUyQxfWA7XG5jb25zdCBDTEVBUl9QUk9QUyQ0ID0gW1xuICAgIFRTVF9JTkZPX1ZFUlNJT04sXG4gICAgVFNUX0lORk9fUE9MSUNZLFxuICAgIFRTVF9JTkZPX01FU1NBR0VfSU1QUklOVCxcbiAgICBUU1RfSU5GT19TRVJJQUxfTlVNQkVSLFxuICAgIFRTVF9JTkZPX0dFTl9USU1FLFxuICAgIFRTVF9JTkZPX0FDQ1VSQUNZLFxuICAgIFRTVF9JTkZPX09SREVSSU5HLFxuICAgIFRTVF9JTkZPX05PTkNFLFxuICAgIFRTVF9JTkZPX1RTQSxcbiAgICBUU1RfSU5GT19FWFRFTlNJT05TXG5dO1xuY2xhc3MgVFNUSW5mbyBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZFUlNJT04kMywgVFNUSW5mby5kZWZhdWx0VmFsdWVzKFZFUlNJT04kMykpO1xuICAgICAgICB0aGlzLnBvbGljeSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFBPTElDWSwgVFNUSW5mby5kZWZhdWx0VmFsdWVzKFBPTElDWSkpO1xuICAgICAgICB0aGlzLm1lc3NhZ2VJbXByaW50ID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTUVTU0FHRV9JTVBSSU5UJDEsIFRTVEluZm8uZGVmYXVsdFZhbHVlcyhNRVNTQUdFX0lNUFJJTlQkMSkpO1xuICAgICAgICB0aGlzLnNlcmlhbE51bWJlciA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFNFUklBTF9OVU1CRVIsIFRTVEluZm8uZGVmYXVsdFZhbHVlcyhTRVJJQUxfTlVNQkVSKSk7XG4gICAgICAgIHRoaXMuZ2VuVGltZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEdFTl9USU1FLCBUU1RJbmZvLmRlZmF1bHRWYWx1ZXMoR0VOX1RJTUUpKTtcbiAgICAgICAgaWYgKEFDQ1VSQUNZIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjdXJhY3kgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBQ0NVUkFDWSwgVFNUSW5mby5kZWZhdWx0VmFsdWVzKEFDQ1VSQUNZKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9SREVSSU5HIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJpbmcgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBPUkRFUklORywgVFNUSW5mby5kZWZhdWx0VmFsdWVzKE9SREVSSU5HKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE5PTkNFJDEgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5ub25jZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE5PTkNFJDEsIFRTVEluZm8uZGVmYXVsdFZhbHVlcyhOT05DRSQxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFRTQSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnRzYSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRTQSwgVFNUSW5mby5kZWZhdWx0VmFsdWVzKFRTQSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChFWFRFTlNJT05TJDEgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5leHRlbnNpb25zID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRVhURU5TSU9OUyQxLCBUU1RJbmZvLmRlZmF1bHRWYWx1ZXMoRVhURU5TSU9OUyQxKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNhc2UgUE9MSUNZOlxuICAgICAgICAgICAgICAgIHJldHVybiBFTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBjYXNlIE1FU1NBR0VfSU1QUklOVCQxOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWVzc2FnZUltcHJpbnQoKTtcbiAgICAgICAgICAgIGNhc2UgU0VSSUFMX05VTUJFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5JbnRlZ2VyKCk7XG4gICAgICAgICAgICBjYXNlIEdFTl9USU1FOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgwLCAwLCAwKTtcbiAgICAgICAgICAgIGNhc2UgQUNDVVJBQ1k6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBY2N1cmFjeSgpO1xuICAgICAgICAgICAgY2FzZSBPUkRFUklORzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIE5PTkNFJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgY2FzZSBUU0E6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmFsTmFtZSgpO1xuICAgICAgICAgICAgY2FzZSBFWFRFTlNJT05TJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJDM6XG4gICAgICAgICAgICBjYXNlIFBPTElDWTpcbiAgICAgICAgICAgIGNhc2UgR0VOX1RJTUU6XG4gICAgICAgICAgICBjYXNlIE9SREVSSU5HOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IFRTVEluZm8uZGVmYXVsdFZhbHVlcyhPUkRFUklORykpO1xuICAgICAgICAgICAgY2FzZSBNRVNTQUdFX0lNUFJJTlQkMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChNZXNzYWdlSW1wcmludC5jb21wYXJlV2l0aERlZmF1bHQoSEFTSF9BTEdPUklUSE0sIG1lbWJlclZhbHVlLmhhc2hBbGdvcml0aG0pKSAmJlxuICAgICAgICAgICAgICAgICAgICAoTWVzc2FnZUltcHJpbnQuY29tcGFyZVdpdGhEZWZhdWx0KEhBU0hFRF9NRVNTQUdFLCBtZW1iZXJWYWx1ZS5oYXNoZWRNZXNzYWdlKSkpO1xuICAgICAgICAgICAgY2FzZSBTRVJJQUxfTlVNQkVSOlxuICAgICAgICAgICAgY2FzZSBOT05DRSQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUuaXNFcXVhbChUU1RJbmZvLmRlZmF1bHRWYWx1ZXMoTk9OQ0UkMSkpKTtcbiAgICAgICAgICAgIGNhc2UgQUNDVVJBQ1k6XG4gICAgICAgICAgICAgICAgcmV0dXJuICgoQWNjdXJhY3kuY29tcGFyZVdpdGhEZWZhdWx0KFNFQ09ORFMsIG1lbWJlclZhbHVlLnNlY29uZHMpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoQWNjdXJhY3kuY29tcGFyZVdpdGhEZWZhdWx0KE1JTExJUywgbWVtYmVyVmFsdWUubWlsbGlzKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKEFjY3VyYWN5LmNvbXBhcmVXaXRoRGVmYXVsdChNSUNST1MsIG1lbWJlclZhbHVlLm1pY3JvcykpKTtcbiAgICAgICAgICAgIGNhc2UgVFNBOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKEdlbmVyYWxOYW1lLmNvbXBhcmVXaXRoRGVmYXVsdChUWVBFJDQsIG1lbWJlclZhbHVlLnR5cGUpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoR2VuZXJhbE5hbWUuY29tcGFyZVdpdGhEZWZhdWx0KFZBTFVFJDUsIG1lbWJlclZhbHVlLnZhbHVlKSkpO1xuICAgICAgICAgICAgY2FzZSBFWFRFTlNJT05TJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBUU1RfSU5GTyksXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy52ZXJzaW9uIHx8IFRTVF9JTkZPX1ZFUlNJT04pIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IG5hbWU6IChuYW1lcy5wb2xpY3kgfHwgVFNUX0lORk9fUE9MSUNZKSB9KSxcbiAgICAgICAgICAgICAgICBNZXNzYWdlSW1wcmludC5zY2hlbWEobmFtZXMubWVzc2FnZUltcHJpbnQgfHwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBUU1RfSU5GT19NRVNTQUdFX0lNUFJJTlRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy5zZXJpYWxOdW1iZXIgfHwgVFNUX0lORk9fU0VSSUFMX05VTUJFUikgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyBuYW1lOiAobmFtZXMuZ2VuVGltZSB8fCBUU1RfSU5GT19HRU5fVElNRSkgfSksXG4gICAgICAgICAgICAgICAgQWNjdXJhY3kuc2NoZW1hKG5hbWVzLmFjY3VyYWN5IHx8IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogVFNUX0lORk9fQUNDVVJBQ1lcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuQm9vbGVhbih7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5vcmRlcmluZyB8fCBUU1RfSU5GT19PUkRFUklORyksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLm5vbmNlIHx8IFRTVF9JTkZPX05PTkNFKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbR2VuZXJhbE5hbWUuc2NoZW1hKG5hbWVzLnRzYSB8fCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBUU1RfSU5GT19UU0FcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuZXh0ZW5zaW9ucyB8fCBUU1RfSU5GT19FWFRFTlNJT05TKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogRXh0ZW5zaW9uLnNjaGVtYShuYW1lcy5leHRlbnNpb24gfHwge30pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyQ0KTtcbiAgICAgICAgY29uc3QgYXNuMSA9IGFzbjFqcy5jb21wYXJlU2NoZW1hKHNjaGVtYSwgc2NoZW1hLCBUU1RJbmZvLnNjaGVtYSgpKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gYXNuMS5yZXN1bHRbVFNUX0lORk9fVkVSU0lPTl0udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgdGhpcy5wb2xpY3kgPSBhc24xLnJlc3VsdFtUU1RfSU5GT19QT0xJQ1ldLnZhbHVlQmxvY2sudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlSW1wcmludCA9IG5ldyBNZXNzYWdlSW1wcmludCh7IHNjaGVtYTogYXNuMS5yZXN1bHRbVFNUX0lORk9fTUVTU0FHRV9JTVBSSU5UXSB9KTtcbiAgICAgICAgdGhpcy5zZXJpYWxOdW1iZXIgPSBhc24xLnJlc3VsdFtUU1RfSU5GT19TRVJJQUxfTlVNQkVSXTtcbiAgICAgICAgdGhpcy5nZW5UaW1lID0gYXNuMS5yZXN1bHRbVFNUX0lORk9fR0VOX1RJTUVdLnRvRGF0ZSgpO1xuICAgICAgICBpZiAoVFNUX0lORk9fQUNDVVJBQ1kgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLmFjY3VyYWN5ID0gbmV3IEFjY3VyYWN5KHsgc2NoZW1hOiBhc24xLnJlc3VsdFtUU1RfSU5GT19BQ0NVUkFDWV0gfSk7XG4gICAgICAgIGlmIChUU1RfSU5GT19PUkRFUklORyBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMub3JkZXJpbmcgPSBhc24xLnJlc3VsdFtUU1RfSU5GT19PUkRFUklOR10udmFsdWVCbG9jay52YWx1ZTtcbiAgICAgICAgaWYgKFRTVF9JTkZPX05PTkNFIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5ub25jZSA9IGFzbjEucmVzdWx0W1RTVF9JTkZPX05PTkNFXTtcbiAgICAgICAgaWYgKFRTVF9JTkZPX1RTQSBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMudHNhID0gbmV3IEdlbmVyYWxOYW1lKHsgc2NoZW1hOiBhc24xLnJlc3VsdFtUU1RfSU5GT19UU0FdIH0pO1xuICAgICAgICBpZiAoVFNUX0lORk9fRVhURU5TSU9OUyBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHRbVFNUX0lORk9fRVhURU5TSU9OU10sIGVsZW1lbnQgPT4gbmV3IEV4dGVuc2lvbih7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLnZlcnNpb24gfSkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiB0aGlzLnBvbGljeSB9KSk7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5tZXNzYWdlSW1wcmludC50b1NjaGVtYSgpKTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLnNlcmlhbE51bWJlcik7XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5HZW5lcmFsaXplZFRpbWUoeyB2YWx1ZURhdGU6IHRoaXMuZ2VuVGltZSB9KSk7XG4gICAgICAgIGlmICh0aGlzLmFjY3VyYWN5KVxuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLmFjY3VyYWN5LnRvU2NoZW1hKCkpO1xuICAgICAgICBpZiAodGhpcy5vcmRlcmluZyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkJvb2xlYW4oeyB2YWx1ZTogdGhpcy5vcmRlcmluZyB9KSk7XG4gICAgICAgIGlmICh0aGlzLm5vbmNlKVxuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLm5vbmNlKTtcbiAgICAgICAgaWYgKHRoaXMudHNhKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFt0aGlzLnRzYS50b1NjaGVtYSgpXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmV4dGVuc2lvbnMsIG8gPT4gby50b1NjaGVtYSgpKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICB2YWx1ZTogb3V0cHV0QXJyYXlcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbixcbiAgICAgICAgICAgIHBvbGljeTogdGhpcy5wb2xpY3ksXG4gICAgICAgICAgICBtZXNzYWdlSW1wcmludDogdGhpcy5tZXNzYWdlSW1wcmludC50b0pTT04oKSxcbiAgICAgICAgICAgIHNlcmlhbE51bWJlcjogdGhpcy5zZXJpYWxOdW1iZXIudG9KU09OKCksXG4gICAgICAgICAgICBnZW5UaW1lOiB0aGlzLmdlblRpbWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYWNjdXJhY3kpXG4gICAgICAgICAgICByZXMuYWNjdXJhY3kgPSB0aGlzLmFjY3VyYWN5LnRvSlNPTigpO1xuICAgICAgICBpZiAodGhpcy5vcmRlcmluZyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVzLm9yZGVyaW5nID0gdGhpcy5vcmRlcmluZztcbiAgICAgICAgaWYgKHRoaXMubm9uY2UpXG4gICAgICAgICAgICByZXMubm9uY2UgPSB0aGlzLm5vbmNlLnRvSlNPTigpO1xuICAgICAgICBpZiAodGhpcy50c2EpXG4gICAgICAgICAgICByZXMudHNhID0gdGhpcy50c2EudG9KU09OKCk7XG4gICAgICAgIGlmICh0aGlzLmV4dGVuc2lvbnMpXG4gICAgICAgICAgICByZXMuZXh0ZW5zaW9ucyA9IEFycmF5LmZyb20odGhpcy5leHRlbnNpb25zLCBvID0+IG8udG9KU09OKCkpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBhc3luYyB2ZXJpZnkocGFyYW1zLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgaWYgKCFwYXJhbXMuZGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFxcImRhdGFcXFwiIGlzIGEgbWFuZGF0b3J5IGF0dHJpYnV0ZSBmb3IgVFNUX0lORk8gdmVyaWZpY2F0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBwYXJhbXMuZGF0YTtcbiAgICAgICAgaWYgKHBhcmFtcy5ub3RCZWZvcmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdlblRpbWUgPCBwYXJhbXMubm90QmVmb3JlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRpb24gdGltZSBmb3IgVFNUSW5mbyBvYmplY3QgaXMgbGVzcyB0aGFuIG5vdEJlZm9yZSB2YWx1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLm5vdEFmdGVyKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZW5UaW1lID4gcGFyYW1zLm5vdEFmdGVyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRpb24gdGltZSBmb3IgVFNUSW5mbyBvYmplY3QgaXMgbW9yZSB0aGFuIG5vdEFmdGVyIHZhbHVlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNoYUFsZ29yaXRobSA9IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRCh0aGlzLm1lc3NhZ2VJbXByaW50Lmhhc2hBbGdvcml0aG0uYWxnb3JpdGhtSWQsIHRydWUsIFwiTWVzc2FnZUltcHJpbnQuaGFzaEFsZ29yaXRobVwiKTtcbiAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGNyeXB0by5kaWdlc3Qoc2hhQWxnb3JpdGhtLm5hbWUsIG5ldyBVaW50OEFycmF5KGRhdGEpKTtcbiAgICAgICAgcmV0dXJuIHB2dHN1dGlscy5CdWZmZXJTb3VyY2VDb252ZXJ0ZXIuaXNFcXVhbChoYXNoLCB0aGlzLm1lc3NhZ2VJbXByaW50Lmhhc2hlZE1lc3NhZ2UudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpO1xuICAgIH1cbn1cblRTVEluZm8uQ0xBU1NfTkFNRSA9IFwiVFNUSW5mb1wiO1xuXG5jb25zdCBWRVJTSU9OJDIgPSBcInZlcnNpb25cIjtcbmNvbnN0IERJR0VTVF9BTEdPUklUSE1TID0gXCJkaWdlc3RBbGdvcml0aG1zXCI7XG5jb25zdCBFTkNBUF9DT05URU5UX0lORk8gPSBcImVuY2FwQ29udGVudEluZm9cIjtcbmNvbnN0IENFUlRJRklDQVRFUyA9IFwiY2VydGlmaWNhdGVzXCI7XG5jb25zdCBDUkxTID0gXCJjcmxzXCI7XG5jb25zdCBTSUdORVJfSU5GT1MgPSBcInNpZ25lckluZm9zXCI7XG5jb25zdCBPQ1NQUyA9IFwib2NzcHNcIjtcbmNvbnN0IFNJR05FRF9EQVRBID0gXCJTaWduZWREYXRhXCI7XG5jb25zdCBTSUdORURfREFUQV9WRVJTSU9OID0gYCR7U0lHTkVEX0RBVEF9LiR7VkVSU0lPTiQyfWA7XG5jb25zdCBTSUdORURfREFUQV9ESUdFU1RfQUxHT1JJVEhNUyA9IGAke1NJR05FRF9EQVRBfS4ke0RJR0VTVF9BTEdPUklUSE1TfWA7XG5jb25zdCBTSUdORURfREFUQV9FTkNBUF9DT05URU5UX0lORk8gPSBgJHtTSUdORURfREFUQX0uJHtFTkNBUF9DT05URU5UX0lORk99YDtcbmNvbnN0IFNJR05FRF9EQVRBX0NFUlRJRklDQVRFUyA9IGAke1NJR05FRF9EQVRBfS4ke0NFUlRJRklDQVRFU31gO1xuY29uc3QgU0lHTkVEX0RBVEFfQ1JMUyA9IGAke1NJR05FRF9EQVRBfS4ke0NSTFN9YDtcbmNvbnN0IFNJR05FRF9EQVRBX1NJR05FUl9JTkZPUyA9IGAke1NJR05FRF9EQVRBfS4ke1NJR05FUl9JTkZPU31gO1xuY29uc3QgQ0xFQVJfUFJPUFMkMyA9IFtcbiAgICBTSUdORURfREFUQV9WRVJTSU9OLFxuICAgIFNJR05FRF9EQVRBX0RJR0VTVF9BTEdPUklUSE1TLFxuICAgIFNJR05FRF9EQVRBX0VOQ0FQX0NPTlRFTlRfSU5GTyxcbiAgICBTSUdORURfREFUQV9DRVJUSUZJQ0FURVMsXG4gICAgU0lHTkVEX0RBVEFfQ1JMUyxcbiAgICBTSUdORURfREFUQV9TSUdORVJfSU5GT1Ncbl07XG5jbGFzcyBTaWduZWREYXRhVmVyaWZ5RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjb2RlID0gMCwgZGF0ZSA9IG5ldyBEYXRlKCksIHNpZ25hdHVyZVZlcmlmaWVkID0gbnVsbCwgc2lnbmVyQ2VydGlmaWNhdGUgPSBudWxsLCBzaWduZXJDZXJ0aWZpY2F0ZVZlcmlmaWVkID0gbnVsbCwgdGltZXN0YW1wU2VyaWFsID0gbnVsbCwgY2VydGlmaWNhdGVQYXRoID0gW10sIH0pIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiU2lnbmVkRGF0YVZlcmlmeUVycm9yXCI7XG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMudGltZXN0YW1wU2VyaWFsID0gdGltZXN0YW1wU2VyaWFsO1xuICAgICAgICB0aGlzLnNpZ25hdHVyZVZlcmlmaWVkID0gc2lnbmF0dXJlVmVyaWZpZWQ7XG4gICAgICAgIHRoaXMuc2lnbmVyQ2VydGlmaWNhdGUgPSBzaWduZXJDZXJ0aWZpY2F0ZTtcbiAgICAgICAgdGhpcy5zaWduZXJDZXJ0aWZpY2F0ZVZlcmlmaWVkID0gc2lnbmVyQ2VydGlmaWNhdGVWZXJpZmllZDtcbiAgICAgICAgdGhpcy5jZXJ0aWZpY2F0ZVBhdGggPSBjZXJ0aWZpY2F0ZVBhdGg7XG4gICAgfVxufVxuY2xhc3MgU2lnbmVkRGF0YSBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZFUlNJT04kMiwgU2lnbmVkRGF0YS5kZWZhdWx0VmFsdWVzKFZFUlNJT04kMikpO1xuICAgICAgICB0aGlzLmRpZ2VzdEFsZ29yaXRobXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBESUdFU1RfQUxHT1JJVEhNUywgU2lnbmVkRGF0YS5kZWZhdWx0VmFsdWVzKERJR0VTVF9BTEdPUklUSE1TKSk7XG4gICAgICAgIHRoaXMuZW5jYXBDb250ZW50SW5mbyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIEVOQ0FQX0NPTlRFTlRfSU5GTywgU2lnbmVkRGF0YS5kZWZhdWx0VmFsdWVzKEVOQ0FQX0NPTlRFTlRfSU5GTykpO1xuICAgICAgICBpZiAoQ0VSVElGSUNBVEVTIGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuY2VydGlmaWNhdGVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ0VSVElGSUNBVEVTLCBTaWduZWREYXRhLmRlZmF1bHRWYWx1ZXMoQ0VSVElGSUNBVEVTKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKENSTFMgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5jcmxzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgQ1JMUywgU2lnbmVkRGF0YS5kZWZhdWx0VmFsdWVzKENSTFMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT0NTUFMgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5vY3NwcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE9DU1BTLCBTaWduZWREYXRhLmRlZmF1bHRWYWx1ZXMoT0NTUFMpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNpZ25lckluZm9zID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgU0lHTkVSX0lORk9TLCBTaWduZWREYXRhLmRlZmF1bHRWYWx1ZXMoU0lHTkVSX0lORk9TKSk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLnNjaGVtYSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tU2NoZW1hKHBhcmFtZXRlcnMuc2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OJDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIERJR0VTVF9BTEdPUklUSE1TOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNhc2UgRU5DQVBfQ09OVEVOVF9JTkZPOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRW5jYXBzdWxhdGVkQ29udGVudEluZm8oKTtcbiAgICAgICAgICAgIGNhc2UgQ0VSVElGSUNBVEVTOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNhc2UgQ1JMUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjYXNlIE9DU1BTOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNhc2UgU0lHTkVSX0lORk9TOlxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiQyOlxuICAgICAgICAgICAgICAgIHJldHVybiAobWVtYmVyVmFsdWUgPT09IFNpZ25lZERhdGEuZGVmYXVsdFZhbHVlcyhWRVJTSU9OJDIpKTtcbiAgICAgICAgICAgIGNhc2UgRU5DQVBfQ09OVEVOVF9JTkZPOlxuICAgICAgICAgICAgICAgIHJldHVybiBFbmNhcHN1bGF0ZWRDb250ZW50SW5mby5jb21wYXJlV2l0aERlZmF1bHQoXCJlQ29udGVudFR5cGVcIiwgbWVtYmVyVmFsdWUuZUNvbnRlbnRUeXBlKSAmJlxuICAgICAgICAgICAgICAgICAgICBFbmNhcHN1bGF0ZWRDb250ZW50SW5mby5jb21wYXJlV2l0aERlZmF1bHQoXCJlQ29udGVudFwiLCBtZW1iZXJWYWx1ZS5lQ29udGVudCk7XG4gICAgICAgICAgICBjYXNlIERJR0VTVF9BTEdPUklUSE1TOlxuICAgICAgICAgICAgY2FzZSBDRVJUSUZJQ0FURVM6XG4gICAgICAgICAgICBjYXNlIENSTFM6XG4gICAgICAgICAgICBjYXNlIE9DU1BTOlxuICAgICAgICAgICAgY2FzZSBTSUdORVJfSU5GT1M6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICBpZiAobmFtZXMub3B0aW9uYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmFtZXMub3B0aW9uYWwgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBTSUdORURfREFUQSksXG4gICAgICAgICAgICBvcHRpb25hbDogbmFtZXMub3B0aW9uYWwsXG4gICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuSW50ZWdlcih7IG5hbWU6IChuYW1lcy52ZXJzaW9uIHx8IFNJR05FRF9EQVRBX1ZFUlNJT04pIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBhc24xanMuU2V0KHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5kaWdlc3RBbGdvcml0aG1zIHx8IFNJR05FRF9EQVRBX0RJR0VTVF9BTEdPUklUSE1TKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogQWxnb3JpdGhtSWRlbnRpZmllci5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIEVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLnNjaGVtYShuYW1lcy5lbmNhcENvbnRlbnRJbmZvIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogU0lHTkVEX0RBVEFfRU5DQVBfQ09OVEVOVF9JTkZPXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLmNlcnRpZmljYXRlcyB8fCBTSUdORURfREFUQV9DRVJUSUZJQ0FURVMpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWRCbG9jazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOdW1iZXI6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IENlcnRpZmljYXRlU2V0LnNjaGVtYSgpLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkNvbnN0cnVjdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0NsYXNzOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTnVtYmVyOiAxXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBSZXZvY2F0aW9uSW5mb0Nob2ljZXMuc2NoZW1hKG5hbWVzLmNybHMgfHwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmxzOiBTSUdORURfREFUQV9DUkxTXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlNldCh7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlJlcGVhdGVkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuc2lnbmVySW5mb3MgfHwgU0lHTkVEX0RBVEFfU0lHTkVSX0lORk9TKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogU2lnbmVySW5mby5zY2hlbWEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgU2lnbmVkRGF0YS5zY2hlbWEoKSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGFzbjEucmVzdWx0W1NJR05FRF9EQVRBX1ZFUlNJT05dLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIGlmIChTSUdORURfREFUQV9ESUdFU1RfQUxHT1JJVEhNUyBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMuZGlnZXN0QWxnb3JpdGhtcyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHRbU0lHTkVEX0RBVEFfRElHRVNUX0FMR09SSVRITVNdLCBhbGdvcml0aG0gPT4gbmV3IEFsZ29yaXRobUlkZW50aWZpZXIoeyBzY2hlbWE6IGFsZ29yaXRobSB9KSk7XG4gICAgICAgIHRoaXMuZW5jYXBDb250ZW50SW5mbyA9IG5ldyBFbmNhcHN1bGF0ZWRDb250ZW50SW5mbyh7IHNjaGVtYTogYXNuMS5yZXN1bHRbU0lHTkVEX0RBVEFfRU5DQVBfQ09OVEVOVF9JTkZPXSB9KTtcbiAgICAgICAgaWYgKFNJR05FRF9EQVRBX0NFUlRJRklDQVRFUyBpbiBhc24xLnJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3QgY2VydGlmaWNhdGVTZXQgPSBuZXcgQ2VydGlmaWNhdGVTZXQoe1xuICAgICAgICAgICAgICAgIHNjaGVtYTogbmV3IGFzbjFqcy5TZXQoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXNuMS5yZXN1bHRbU0lHTkVEX0RBVEFfQ0VSVElGSUNBVEVTXS52YWx1ZUJsb2NrLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jZXJ0aWZpY2F0ZXMgPSBjZXJ0aWZpY2F0ZVNldC5jZXJ0aWZpY2F0ZXMuc2xpY2UoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFNJR05FRF9EQVRBX0NSTFMgaW4gYXNuMS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuY3JscyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHRbU0lHTkVEX0RBVEFfQ1JMU10sIChjcmwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY3JsLmlkQmxvY2sudGFnQ2xhc3MgPT09IDEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdCh7IHNjaGVtYTogY3JsIH0pO1xuICAgICAgICAgICAgICAgIGNybC5pZEJsb2NrLnRhZ0NsYXNzID0gMTtcbiAgICAgICAgICAgICAgICBjcmwuaWRCbG9jay50YWdOdW1iZXIgPSAxNjtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE90aGVyUmV2b2NhdGlvbkluZm9Gb3JtYXQoeyBzY2hlbWE6IGNybCB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChTSUdORURfREFUQV9TSUdORVJfSU5GT1MgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLnNpZ25lckluZm9zID0gQXJyYXkuZnJvbShhc24xLnJlc3VsdFtTSUdORURfREFUQV9TSUdORVJfSU5GT1NdLCBzaWduZXJJbmZvU2NoZW1hID0+IG5ldyBTaWduZXJJbmZvKHsgc2NoZW1hOiBzaWduZXJJbmZvU2NoZW1hIH0pKTtcbiAgICB9XG4gICAgdG9TY2hlbWEoZW5jb2RlRmxhZyA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIGlmICgodGhpcy5jZXJ0aWZpY2F0ZXMgJiYgdGhpcy5jZXJ0aWZpY2F0ZXMubGVuZ3RoICYmIHRoaXMuY2VydGlmaWNhdGVzLnNvbWUobyA9PiBvIGluc3RhbmNlb2YgT3RoZXJDZXJ0aWZpY2F0ZUZvcm1hdCkpXG4gICAgICAgICAgICB8fCAodGhpcy5jcmxzICYmIHRoaXMuY3Jscy5sZW5ndGggJiYgdGhpcy5jcmxzLnNvbWUobyA9PiBvIGluc3RhbmNlb2YgT3RoZXJSZXZvY2F0aW9uSW5mb0Zvcm1hdCkpKSB7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb24gPSA1O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY2VydGlmaWNhdGVzICYmIHRoaXMuY2VydGlmaWNhdGVzLmxlbmd0aCAmJiB0aGlzLmNlcnRpZmljYXRlcy5zb21lKG8gPT4gbyBpbnN0YW5jZW9mIEF0dHJpYnV0ZUNlcnRpZmljYXRlVjIpKSB7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb24gPSA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCh0aGlzLmNlcnRpZmljYXRlcyAmJiB0aGlzLmNlcnRpZmljYXRlcy5sZW5ndGggJiYgdGhpcy5jZXJ0aWZpY2F0ZXMuc29tZShvID0+IG8gaW5zdGFuY2VvZiBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZVYxKSlcbiAgICAgICAgICAgIHx8IHRoaXMuc2lnbmVySW5mb3Muc29tZShvID0+IG8udmVyc2lvbiA9PT0gMylcbiAgICAgICAgICAgIHx8IHRoaXMuZW5jYXBDb250ZW50SW5mby5lQ29udGVudFR5cGUgIT09IFNpZ25lZERhdGEuSURfREFUQSkge1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gMztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmVyc2lvbiA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy52ZXJzaW9uIH0pKTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlNldCh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLmRpZ2VzdEFsZ29yaXRobXMsIGFsZ29yaXRobSA9PiBhbGdvcml0aG0udG9TY2hlbWEoKSlcbiAgICAgICAgfSkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMuZW5jYXBDb250ZW50SW5mby50b1NjaGVtYSgpKTtcbiAgICAgICAgaWYgKHRoaXMuY2VydGlmaWNhdGVzKSB7XG4gICAgICAgICAgICBjb25zdCBjZXJ0aWZpY2F0ZVNldCA9IG5ldyBDZXJ0aWZpY2F0ZVNldCh7IGNlcnRpZmljYXRlczogdGhpcy5jZXJ0aWZpY2F0ZXMgfSk7XG4gICAgICAgICAgICBjb25zdCBjZXJ0aWZpY2F0ZVNldFNjaGVtYSA9IGNlcnRpZmljYXRlU2V0LnRvU2NoZW1hKCk7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNlcnRpZmljYXRlU2V0U2NoZW1hLnZhbHVlQmxvY2sudmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jcmxzKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5jcmxzLCBjcmwgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3JsIGluc3RhbmNlb2YgT3RoZXJSZXZvY2F0aW9uSW5mb0Zvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JsU2NoZW1hID0gY3JsLnRvU2NoZW1hKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmxTY2hlbWEuaWRCbG9jay50YWdDbGFzcyA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmxTY2hlbWEuaWRCbG9jay50YWdOdW1iZXIgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNybFNjaGVtYTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JsLnRvU2NoZW1hKGVuY29kZUZsYWcpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLlNldCh7XG4gICAgICAgICAgICB2YWx1ZTogQXJyYXkuZnJvbSh0aGlzLnNpZ25lckluZm9zLCBzaWduZXJJbmZvID0+IHNpZ25lckluZm8udG9TY2hlbWEoKSlcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICAgICAgICBkaWdlc3RBbGdvcml0aG1zOiBBcnJheS5mcm9tKHRoaXMuZGlnZXN0QWxnb3JpdGhtcywgYWxnb3JpdGhtID0+IGFsZ29yaXRobS50b0pTT04oKSksXG4gICAgICAgICAgICBlbmNhcENvbnRlbnRJbmZvOiB0aGlzLmVuY2FwQ29udGVudEluZm8udG9KU09OKCksXG4gICAgICAgICAgICBzaWduZXJJbmZvczogQXJyYXkuZnJvbSh0aGlzLnNpZ25lckluZm9zLCBzaWduZXJJbmZvID0+IHNpZ25lckluZm8udG9KU09OKCkpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5jZXJ0aWZpY2F0ZXMpIHtcbiAgICAgICAgICAgIHJlcy5jZXJ0aWZpY2F0ZXMgPSBBcnJheS5mcm9tKHRoaXMuY2VydGlmaWNhdGVzLCBjZXJ0aWZpY2F0ZSA9PiBjZXJ0aWZpY2F0ZS50b0pTT04oKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY3Jscykge1xuICAgICAgICAgICAgcmVzLmNybHMgPSBBcnJheS5mcm9tKHRoaXMuY3JscywgY3JsID0+IGNybC50b0pTT04oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgYXN5bmMgdmVyaWZ5KHsgc2lnbmVyID0gKC0xKSwgZGF0YSA9IChFTVBUWV9CVUZGRVIpLCB0cnVzdGVkQ2VydHMgPSBbXSwgY2hlY2tEYXRlID0gKG5ldyBEYXRlKCkpLCBjaGVja0NoYWluID0gZmFsc2UsIHBhc3NlZFdoZW5Ob3RSZXZWYWx1ZXMgPSBmYWxzZSwgZXh0ZW5kZWRNb2RlID0gZmFsc2UsIGZpbmRPcmlnaW4gPSBudWxsLCBmaW5kSXNzdWVyID0gbnVsbCB9ID0ge30sIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICBsZXQgc2lnbmVyQ2VydCA9IG51bGw7XG4gICAgICAgIGxldCB0aW1lc3RhbXBTZXJpYWwgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2VEaWdlc3RWYWx1ZSA9IEVNUFRZX0JVRkZFUjtcbiAgICAgICAgICAgIGxldCBzaGFBbGdvcml0aG0gPSBFTVBUWV9TVFJJTkc7XG4gICAgICAgICAgICBsZXQgY2VydGlmaWNhdGVQYXRoID0gW107XG4gICAgICAgICAgICBjb25zdCBzaWduZXJJbmZvID0gdGhpcy5zaWduZXJJbmZvc1tzaWduZXJdO1xuICAgICAgICAgICAgaWYgKCFzaWduZXJJbmZvKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNpZ25lZERhdGFWZXJpZnlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGNoZWNrRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJVbmFibGUgdG8gZ2V0IHNpZ25lciBieSBzdXBwbGllZCBpbmRleFwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmNlcnRpZmljYXRlcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTaWduZWREYXRhVmVyaWZ5RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiBjaGVja0RhdGUsXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm8gY2VydGlmaWNhdGVzIGF0dGFjaGVkIHRvIHRoaXMgc2lnbmVkIGRhdGFcIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaWduZXJJbmZvLnNpZCBpbnN0YW5jZW9mIElzc3VlckFuZFNlcmlhbE51bWJlcikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2VydGlmaWNhdGUgb2YgdGhpcy5jZXJ0aWZpY2F0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoY2VydGlmaWNhdGUgaW5zdGFuY2VvZiBDZXJ0aWZpY2F0ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjZXJ0aWZpY2F0ZS5pc3N1ZXIuaXNFcXVhbChzaWduZXJJbmZvLnNpZC5pc3N1ZXIpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGNlcnRpZmljYXRlLnNlcmlhbE51bWJlci5pc0VxdWFsKHNpZ25lckluZm8uc2lkLnNlcmlhbE51bWJlcikpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0ID0gY2VydGlmaWNhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpZCA9IHNpZ25lckluZm8uc2lkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleUlkID0gc2lkLmlkQmxvY2suaXNDb25zdHJ1Y3RlZFxuICAgICAgICAgICAgICAgICAgICA/IHNpZC52YWx1ZUJsb2NrLnZhbHVlWzBdLnZhbHVlQmxvY2sudmFsdWVIZXhcbiAgICAgICAgICAgICAgICAgICAgOiBzaWQudmFsdWVCbG9jay52YWx1ZUhleDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNlcnRpZmljYXRlIG9mIHRoaXMuY2VydGlmaWNhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGNlcnRpZmljYXRlIGluc3RhbmNlb2YgQ2VydGlmaWNhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWdlc3QgPSBhd2FpdCBjcnlwdG8uZGlnZXN0KHsgbmFtZTogXCJzaGEtMVwiIH0sIGNlcnRpZmljYXRlLnN1YmplY3RQdWJsaWNLZXlJbmZvLnN1YmplY3RQdWJsaWNLZXkudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHZ1dGlscy5pc0VxdWFsQnVmZmVyKGRpZ2VzdCwga2V5SWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0ID0gY2VydGlmaWNhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc2lnbmVyQ2VydCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTaWduZWREYXRhVmVyaWZ5RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiBjaGVja0RhdGUsXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDMsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGZpbmQgc2lnbmVyIGNlcnRpZmljYXRlXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmNhcENvbnRlbnRJbmZvLmVDb250ZW50VHlwZSA9PT0gaWRfZUNvbnRlbnRUeXBlX1RTVEluZm8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5jYXBDb250ZW50SW5mby5lQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2lnbmVkRGF0YVZlcmlmeUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGNoZWNrRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDE1LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJFcnJvciBkdXJpbmcgdmVyaWZpY2F0aW9uOiBUU1RJbmZvIGVDb250ZW50IGlzIGVtcHR5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVWZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25lckNlcnRpZmljYXRlOiBzaWduZXJDZXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wU2VyaWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVyQ2VydGlmaWNhdGVWZXJpZmllZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHRzdEluZm87XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdHN0SW5mbyA9IFRTVEluZm8uZnJvbUJFUih0aGlzLmVuY2FwQ29udGVudEluZm8uZUNvbnRlbnQudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNpZ25lZERhdGFWZXJpZnlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBjaGVja0RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAxNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgZHVyaW5nIHZlcmlmaWNhdGlvbjogVFNUSW5mbyB3cm9uZyBBU04uMSBzY2hlbWEgXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVWZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25lckNlcnRpZmljYXRlOiBzaWduZXJDZXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wU2VyaWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVyQ2VydGlmaWNhdGVWZXJpZmllZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hlY2tEYXRlID0gdHN0SW5mby5nZW5UaW1lO1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFNlcmlhbCA9IHRzdEluZm8uc2VyaWFsTnVtYmVyLnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3LnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2lnbmVkRGF0YVZlcmlmeUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGNoZWNrRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk1pc3NlZCBkZXRhY2hlZCBkYXRhIGlucHV0IGFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIShhd2FpdCB0c3RJbmZvLnZlcmlmeSh7IGRhdGEgfSwgY3J5cHRvKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNpZ25lZERhdGFWZXJpZnlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBjaGVja0RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAxNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgZHVyaW5nIHZlcmlmaWNhdGlvbjogVFNUSW5mbyB2ZXJpZmljYXRpb24gaXMgZmFpbGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVWZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZTogc2lnbmVyQ2VydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFNlcmlhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25lckNlcnRpZmljYXRlVmVyaWZpZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoZWNrQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjZXJ0cyA9IHRoaXMuY2VydGlmaWNhdGVzLmZpbHRlcihjZXJ0aWZpY2F0ZSA9PiAoY2VydGlmaWNhdGUgaW5zdGFuY2VvZiBDZXJ0aWZpY2F0ZSAmJiAhIWNoZWNrQ0EoY2VydGlmaWNhdGUsIHNpZ25lckNlcnQpKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhaW5QYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgY2VydHMsXG4gICAgICAgICAgICAgICAgICAgIHRydXN0ZWRDZXJ0cyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChmaW5kSXNzdWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYWluUGFyYW1zLmZpbmRJc3N1ZXIgPSBmaW5kSXNzdWVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmluZE9yaWdpbikge1xuICAgICAgICAgICAgICAgICAgICBjaGFpblBhcmFtcy5maW5kT3JpZ2luID0gZmluZE9yaWdpbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhaW5FbmdpbmUgPSBuZXcgQ2VydGlmaWNhdGVDaGFpblZhbGlkYXRpb25FbmdpbmUoY2hhaW5QYXJhbXMpO1xuICAgICAgICAgICAgICAgIGNoYWluRW5naW5lLmNlcnRzLnB1c2goc2lnbmVyQ2VydCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3Jscykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNybCBvZiB0aGlzLmNybHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInRoaXNVcGRhdGVcIiBpbiBjcmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5FbmdpbmUuY3Jscy5wdXNoKGNybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3JsLm90aGVyUmV2SW5mb0Zvcm1hdCA9PT0gaWRfUEtJWF9PQ1NQX0Jhc2ljKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbkVuZ2luZS5vY3Nwcy5wdXNoKG5ldyBCYXNpY09DU1BSZXNwb25zZSh7IHNjaGVtYTogY3JsLm90aGVyUmV2SW5mbyB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub2NzcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5FbmdpbmUub2NzcHMucHVzaCguLi4odGhpcy5vY3NwcykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZmljYXRpb25SZXN1bHQgPSBhd2FpdCBjaGFpbkVuZ2luZS52ZXJpZnkoeyBwYXNzZWRXaGVuTm90UmV2VmFsdWVzIH0sIGNyeXB0bylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2lnbmVkRGF0YVZlcmlmeUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGNoZWNrRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVmFsaWRhdGlvbiBvZiBzaWduZXIncyBjZXJ0aWZpY2F0ZSBmYWlsZWQgd2l0aCBlcnJvcjogJHsoKGUgaW5zdGFuY2VvZiBPYmplY3QpID8gZS5yZXN1bHRNZXNzYWdlIDogZSl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25lckNlcnRpZmljYXRlOiBzaWduZXJDZXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVyQ2VydGlmaWNhdGVWZXJpZmllZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHZlcmlmaWNhdGlvblJlc3VsdC5jZXJ0aWZpY2F0ZVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VydGlmaWNhdGVQYXRoID0gdmVyaWZpY2F0aW9uUmVzdWx0LmNlcnRpZmljYXRlUGF0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF2ZXJpZmljYXRpb25SZXN1bHQucmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2lnbmVkRGF0YVZlcmlmeUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGNoZWNrRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVmFsaWRhdGlvbiBvZiBzaWduZXIncyBjZXJ0aWZpY2F0ZSBmYWlsZWQ6ICR7dmVyaWZpY2F0aW9uUmVzdWx0LnJlc3VsdE1lc3NhZ2V9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25lckNlcnRpZmljYXRlOiBzaWduZXJDZXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVyQ2VydGlmaWNhdGVWZXJpZmllZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaWduZXJJbmZvSGFzaEFsZ29yaXRobSA9IGNyeXB0by5nZXRBbGdvcml0aG1CeU9JRChzaWduZXJJbmZvLmRpZ2VzdEFsZ29yaXRobS5hbGdvcml0aG1JZCk7XG4gICAgICAgICAgICBpZiAoIShcIm5hbWVcIiBpbiBzaWduZXJJbmZvSGFzaEFsZ29yaXRobSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU2lnbmVkRGF0YVZlcmlmeUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogY2hlY2tEYXRlLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiA3LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVW5zdXBwb3J0ZWQgc2lnbmF0dXJlIGFsZ29yaXRobTogJHtzaWduZXJJbmZvLmRpZ2VzdEFsZ29yaXRobS5hbGdvcml0aG1JZH1gLFxuICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZTogc2lnbmVyQ2VydCxcbiAgICAgICAgICAgICAgICAgICAgc2lnbmVyQ2VydGlmaWNhdGVWZXJpZmllZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hhQWxnb3JpdGhtID0gc2lnbmVySW5mb0hhc2hBbGdvcml0aG0ubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IGVDb250ZW50ID0gdGhpcy5lbmNhcENvbnRlbnRJbmZvLmVDb250ZW50O1xuICAgICAgICAgICAgaWYgKGVDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKChlQ29udGVudC5pZEJsb2NrLnRhZ0NsYXNzID09PSAxKSAmJlxuICAgICAgICAgICAgICAgICAgICAoZUNvbnRlbnQuaWRCbG9jay50YWdOdW1iZXIgPT09IDQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBlQ29udGVudC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBlQ29udGVudC52YWx1ZUJsb2NrLnZhbHVlQmVmb3JlRGVjb2RlVmlldztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNpZ25lZERhdGFWZXJpZnlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBjaGVja0RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiA4LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJNaXNzZWQgZGV0YWNoZWQgZGF0YSBpbnB1dCBhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVyQ2VydGlmaWNhdGU6IHNpZ25lckNlcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZVZlcmlmaWVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaWduZXJJbmZvLnNpZ25lZEF0dHJzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZvdW5kQ29udGVudFR5cGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmRNZXNzYWdlRGlnZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2Ygc2lnbmVySW5mby5zaWduZWRBdHRycy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUudHlwZSA9PT0gXCIxLjIuODQwLjExMzU0OS4xLjkuM1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRDb250ZW50VHlwZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUudHlwZSA9PT0gXCIxLjIuODQwLjExMzU0OS4xLjkuNFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZE1lc3NhZ2VEaWdlc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZURpZ2VzdFZhbHVlID0gYXR0cmlidXRlLnZhbHVlc1swXS52YWx1ZUJsb2NrLnZhbHVlSGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZENvbnRlbnRUeXBlICYmIGZvdW5kTWVzc2FnZURpZ2VzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm91bmRDb250ZW50VHlwZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNpZ25lZERhdGFWZXJpZnlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBjaGVja0RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiA5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBdHRyaWJ1dGUgXFxcImNvbnRlbnQtdHlwZVxcXCIgaXMgYSBtYW5kYXRvcnkgYXR0cmlidXRlIGZvciBcXFwic2lnbmVkIGF0dHJpYnV0ZXNcXFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZTogc2lnbmVyQ2VydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25lckNlcnRpZmljYXRlVmVyaWZpZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3VuZE1lc3NhZ2VEaWdlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTaWduZWREYXRhVmVyaWZ5RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogY2hlY2tEYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkF0dHJpYnV0ZSBcXFwibWVzc2FnZS1kaWdlc3RcXFwiIGlzIGEgbWFuZGF0b3J5IGF0dHJpYnV0ZSBmb3IgXFxcInNpZ25lZCBhdHRyaWJ1dGVzXFxcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVmVyaWZpZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZTogc2lnbmVyQ2VydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25lckNlcnRpZmljYXRlVmVyaWZpZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNpZ25lckluZm8uc2lnbmVkQXR0cnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRGlnZXN0ID0gYXdhaXQgY3J5cHRvLmRpZ2VzdChzaGFBbGdvcml0aG0sIG5ldyBVaW50OEFycmF5KGRhdGEpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXB2dXRpbHMuaXNFcXVhbEJ1ZmZlcihtZXNzYWdlRGlnZXN0LCBtZXNzYWdlRGlnZXN0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTaWduZWREYXRhVmVyaWZ5RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogY2hlY2tEYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogMTUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkVycm9yIGR1cmluZyB2ZXJpZmljYXRpb246IE1lc3NhZ2UgZGlnZXN0IGRvZXNuJ3QgbWF0Y2hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVZlcmlmaWVkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVyQ2VydGlmaWNhdGU6IHNpZ25lckNlcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBTZXJpYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZVZlcmlmaWVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhID0gc2lnbmVySW5mby5zaWduZWRBdHRycy5lbmNvZGVkVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB2ZXJpZnlSZXN1bHQgPSBzaWduZXJJbmZvLnNpZ25hdHVyZUFsZ29yaXRobS5hbGdvcml0aG1JZCA9PT0gXCIxLjIuODQwLjExMzU0OS4xLjEuMVwiXG4gICAgICAgICAgICAgICAgPyBhd2FpdCBjcnlwdG8udmVyaWZ5V2l0aFB1YmxpY0tleShkYXRhLCBzaWduZXJJbmZvLnNpZ25hdHVyZSwgc2lnbmVyQ2VydC5zdWJqZWN0UHVibGljS2V5SW5mbywgc2lnbmVySW5mby5zaWduYXR1cmVBbGdvcml0aG0sIHNoYUFsZ29yaXRobSlcbiAgICAgICAgICAgICAgICA6IGF3YWl0IGNyeXB0by52ZXJpZnlXaXRoUHVibGljS2V5KGRhdGEsIHNpZ25lckluZm8uc2lnbmF0dXJlLCBzaWduZXJDZXJ0LnN1YmplY3RQdWJsaWNLZXlJbmZvLCBzaWduZXJJbmZvLnNpZ25hdHVyZUFsZ29yaXRobSk7XG4gICAgICAgICAgICBpZiAoZXh0ZW5kZWRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogY2hlY2tEYXRlLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAxNCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogRU1QVFlfU1RSSU5HLFxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVWZXJpZmllZDogdmVyaWZ5UmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZTogc2lnbmVyQ2VydCxcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wU2VyaWFsLFxuICAgICAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZVZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpY2F0ZVBhdGhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZlcmlmeVJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTaWduZWREYXRhVmVyaWZ5RXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNpZ25lZERhdGFWZXJpZnlFcnJvcih7XG4gICAgICAgICAgICAgICAgZGF0ZTogY2hlY2tEYXRlLFxuICAgICAgICAgICAgICAgIGNvZGU6IDE1LFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBFcnJvciBkdXJpbmcgdmVyaWZpY2F0aW9uOiAke2UgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6IGV9YCxcbiAgICAgICAgICAgICAgICBzaWduYXR1cmVWZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgICAgICBzaWduZXJDZXJ0aWZpY2F0ZTogc2lnbmVyQ2VydCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBTZXJpYWwsXG4gICAgICAgICAgICAgICAgc2lnbmVyQ2VydGlmaWNhdGVWZXJpZmllZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2lnbihwcml2YXRlS2V5LCBzaWduZXJJbmRleCwgaGFzaEFsZ29yaXRobSA9IFwiU0hBLTFcIiwgZGF0YSA9IChFTVBUWV9CVUZGRVIpLCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXByaXZhdGVLZXkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZWVkIHRvIHByb3ZpZGUgYSBwcml2YXRlIGtleSBmb3Igc2lnbmluZ1wiKTtcbiAgICAgICAgY29uc3Qgc2lnbmVySW5mbyA9IHRoaXMuc2lnbmVySW5mb3Nbc2lnbmVySW5kZXhdO1xuICAgICAgICBpZiAoIXNpZ25lckluZm8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiU2lnbmVySW5mbyBpbmRleCBpcyBvdXQgb2YgcmFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoKF9hID0gc2lnbmVySW5mby5zaWduZWRBdHRycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmF0dHJpYnV0ZXMubGVuZ3RoKSAmJiBcImhhc2hcIiBpbiBwcml2YXRlS2V5LmFsZ29yaXRobSAmJiBcImhhc2hcIiBpbiBwcml2YXRlS2V5LmFsZ29yaXRobSAmJiBwcml2YXRlS2V5LmFsZ29yaXRobS5oYXNoKSB7XG4gICAgICAgICAgICBoYXNoQWxnb3JpdGhtID0gcHJpdmF0ZUtleS5hbGdvcml0aG0uaGFzaC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc2hBbGdvcml0aG1PSUQgPSBjcnlwdG8uZ2V0T0lEQnlBbGdvcml0aG0oeyBuYW1lOiBoYXNoQWxnb3JpdGhtIH0sIHRydWUsIFwiaGFzaEFsZ29yaXRobVwiKTtcbiAgICAgICAgaWYgKCh0aGlzLmRpZ2VzdEFsZ29yaXRobXMuZmlsdGVyKGFsZ29yaXRobSA9PiBhbGdvcml0aG0uYWxnb3JpdGhtSWQgPT09IGhhc2hBbGdvcml0aG1PSUQpKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGlnZXN0QWxnb3JpdGhtcy5wdXNoKG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICBhbGdvcml0aG1JZDogaGFzaEFsZ29yaXRobU9JRCxcbiAgICAgICAgICAgICAgICBhbGdvcml0aG1QYXJhbXM6IG5ldyBhc24xanMuTnVsbCgpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgc2lnbmVySW5mby5kaWdlc3RBbGdvcml0aG0gPSBuZXcgQWxnb3JpdGhtSWRlbnRpZmllcih7XG4gICAgICAgICAgICBhbGdvcml0aG1JZDogaGFzaEFsZ29yaXRobU9JRCxcbiAgICAgICAgICAgIGFsZ29yaXRobVBhcmFtczogbmV3IGFzbjFqcy5OdWxsKClcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZVBhcmFtcyA9IGF3YWl0IGNyeXB0by5nZXRTaWduYXR1cmVQYXJhbWV0ZXJzKHByaXZhdGVLZXksIGhhc2hBbGdvcml0aG0pO1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gc2lnbmF0dXJlUGFyYW1zLnBhcmFtZXRlcnM7XG4gICAgICAgIHNpZ25lckluZm8uc2lnbmF0dXJlQWxnb3JpdGhtID0gc2lnbmF0dXJlUGFyYW1zLnNpZ25hdHVyZUFsZ29yaXRobTtcbiAgICAgICAgaWYgKHNpZ25lckluZm8uc2lnbmVkQXR0cnMpIHtcbiAgICAgICAgICAgIGlmIChzaWduZXJJbmZvLnNpZ25lZEF0dHJzLmVuY29kZWRWYWx1ZS5ieXRlTGVuZ3RoICE9PSAwKVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzaWduZXJJbmZvLnNpZ25lZEF0dHJzLmVuY29kZWRWYWx1ZTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBzaWduZXJJbmZvLnNpZ25lZEF0dHJzLnRvU2NoZW1hKCkudG9CRVIoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gcHZ0c3V0aWxzLkJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkoZGF0YSk7XG4gICAgICAgICAgICAgICAgdmlld1swXSA9IDB4MzE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlQ29udGVudCA9IHRoaXMuZW5jYXBDb250ZW50SW5mby5lQ29udGVudDtcbiAgICAgICAgICAgIGlmIChlQ29udGVudCkge1xuICAgICAgICAgICAgICAgIGlmICgoZUNvbnRlbnQuaWRCbG9jay50YWdDbGFzcyA9PT0gMSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKGVDb250ZW50LmlkQmxvY2sudGFnTnVtYmVyID09PSA0KSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZUNvbnRlbnQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZUNvbnRlbnQudmFsdWVCbG9jay52YWx1ZUJlZm9yZURlY29kZVZpZXc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ieXRlTGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzZWQgZGV0YWNoZWQgZGF0YSBpbnB1dCBhcnJheVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBjcnlwdG8uc2lnbldpdGhQcml2YXRlS2V5KGRhdGEsIHByaXZhdGVLZXksIHBhcmFtZXRlcnMpO1xuICAgICAgICBzaWduZXJJbmZvLnNpZ25hdHVyZSA9IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogc2lnbmF0dXJlIH0pO1xuICAgIH1cbn1cblNpZ25lZERhdGEuQ0xBU1NfTkFNRSA9IFwiU2lnbmVkRGF0YVwiO1xuU2lnbmVkRGF0YS5JRF9EQVRBID0gaWRfQ29udGVudFR5cGVfRGF0YTtcblxuY29uc3QgVkVSU0lPTiQxID0gXCJ2ZXJzaW9uXCI7XG5jb25zdCBBVVRIX1NBRkUgPSBcImF1dGhTYWZlXCI7XG5jb25zdCBNQUNfREFUQSA9IFwibWFjRGF0YVwiO1xuY29uc3QgUEFSU0VEX1ZBTFVFID0gXCJwYXJzZWRWYWx1ZVwiO1xuY29uc3QgQ0xFUkFfUFJPUFMgPSBbXG4gICAgVkVSU0lPTiQxLFxuICAgIEFVVEhfU0FGRSxcbiAgICBNQUNfREFUQVxuXTtcbmNsYXNzIFBGWCBleHRlbmRzIFBraU9iamVjdCB7XG4gICAgY29uc3RydWN0b3IocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFZFUlNJT04kMSwgUEZYLmRlZmF1bHRWYWx1ZXMoVkVSU0lPTiQxKSk7XG4gICAgICAgIHRoaXMuYXV0aFNhZmUgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBBVVRIX1NBRkUsIFBGWC5kZWZhdWx0VmFsdWVzKEFVVEhfU0FGRSkpO1xuICAgICAgICBpZiAoTUFDX0RBVEEgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5tYWNEYXRhID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgTUFDX0RBVEEsIFBGWC5kZWZhdWx0VmFsdWVzKE1BQ19EQVRBKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBBUlNFRF9WQUxVRSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlZFZhbHVlID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgUEFSU0VEX1ZBTFVFLCBQRlguZGVmYXVsdFZhbHVlcyhQQVJTRURfVkFMVUUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5zY2hlbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJvbVNjaGVtYShwYXJhbWV0ZXJzLnNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgVkVSU0lPTiQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgY2FzZSBBVVRIX1NBRkU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgQ29udGVudEluZm8oKSk7XG4gICAgICAgICAgICBjYXNlIE1BQ19EQVRBOlxuICAgICAgICAgICAgICAgIHJldHVybiAobmV3IE1hY0RhdGEoKSk7XG4gICAgICAgICAgICBjYXNlIFBBUlNFRF9WQUxVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT04kMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSBQRlguZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSk7XG4gICAgICAgICAgICBjYXNlIEFVVEhfU0FGRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChDb250ZW50SW5mby5jb21wYXJlV2l0aERlZmF1bHQoXCJjb250ZW50VHlwZVwiLCBtZW1iZXJWYWx1ZS5jb250ZW50VHlwZSkpICYmXG4gICAgICAgICAgICAgICAgICAgIChDb250ZW50SW5mby5jb21wYXJlV2l0aERlZmF1bHQoXCJjb250ZW50XCIsIG1lbWJlclZhbHVlLmNvbnRlbnQpKSk7XG4gICAgICAgICAgICBjYXNlIE1BQ19EQVRBOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKE1hY0RhdGEuY29tcGFyZVdpdGhEZWZhdWx0KFwibWFjXCIsIG1lbWJlclZhbHVlLm1hYykpICYmXG4gICAgICAgICAgICAgICAgICAgIChNYWNEYXRhLmNvbXBhcmVXaXRoRGVmYXVsdChcIm1hY1NhbHRcIiwgbWVtYmVyVmFsdWUubWFjU2FsdCkpICYmXG4gICAgICAgICAgICAgICAgICAgIChNYWNEYXRhLmNvbXBhcmVXaXRoRGVmYXVsdChcIml0ZXJhdGlvbnNcIiwgbWVtYmVyVmFsdWUuaXRlcmF0aW9ucykpKTtcbiAgICAgICAgICAgIGNhc2UgUEFSU0VEX1ZBTFVFOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSAmJiAoT2JqZWN0LmtleXMobWVtYmVyVmFsdWUpLmxlbmd0aCA9PT0gMCkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMudmVyc2lvbiB8fCBWRVJTSU9OJDEpIH0pLFxuICAgICAgICAgICAgICAgIENvbnRlbnRJbmZvLnNjaGVtYShuYW1lcy5hdXRoU2FmZSB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IEFVVEhfU0FGRVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgTWFjRGF0YS5zY2hlbWEobmFtZXMubWFjRGF0YSB8fCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja05hbWU6IE1BQ19EQVRBLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFUkFfUFJPUFMpO1xuICAgICAgICBjb25zdCBhc24xID0gYXNuMWpzLmNvbXBhcmVTY2hlbWEoc2NoZW1hLCBzY2hlbWEsIFBGWC5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBWRVJTSU9OJDEsXG4gICAgICAgICAgICAgICAgYXV0aFNhZmU6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogQVVUSF9TQUZFXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1hY0RhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogTUFDX0RBVEFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBhc24xLnJlc3VsdC52ZXJzaW9uLnZhbHVlQmxvY2sudmFsdWVEZWM7XG4gICAgICAgIHRoaXMuYXV0aFNhZmUgPSBuZXcgQ29udGVudEluZm8oeyBzY2hlbWE6IGFzbjEucmVzdWx0LmF1dGhTYWZlIH0pO1xuICAgICAgICBpZiAoTUFDX0RBVEEgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLm1hY0RhdGEgPSBuZXcgTWFjRGF0YSh7IHNjaGVtYTogYXNuMS5yZXN1bHQubWFjRGF0YSB9KTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW1xuICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgdmFsdWU6IHRoaXMudmVyc2lvbiB9KSxcbiAgICAgICAgICAgIHRoaXMuYXV0aFNhZmUudG9TY2hlbWEoKVxuICAgICAgICBdO1xuICAgICAgICBpZiAodGhpcy5tYWNEYXRhKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMubWFjRGF0YS50b1NjaGVtYSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICAgICAgICBhdXRoU2FmZTogdGhpcy5hdXRoU2FmZS50b0pTT04oKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5tYWNEYXRhKSB7XG4gICAgICAgICAgICBvdXRwdXQubWFjRGF0YSA9IHRoaXMubWFjRGF0YS50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyBtYWtlSW50ZXJuYWxWYWx1ZXMocGFyYW1ldGVycyA9IHt9LCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgQXJndW1lbnRFcnJvci5hc3NlcnQocGFyYW1ldGVycywgXCJwYXJhbWV0ZXJzXCIsIFwib2JqZWN0XCIpO1xuICAgICAgICBpZiAoIXRoaXMucGFyc2VkVmFsdWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBjYWxsIFxcXCJwYXJzZVZhbHVlc1xcXCIgZnVuY3Rpb24gZmlyc3QgaW4gb3JkZXIgdG8gbWFrZSBcXFwicGFyc2VkVmFsdWVcXFwiIGRhdGFcIik7XG4gICAgICAgIH1cbiAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0RW1wdHkodGhpcy5wYXJzZWRWYWx1ZS5pbnRlZ3JpdHlNb2RlLCBcImludGVncml0eU1vZGVcIiwgXCJwYXJzZWRWYWx1ZVwiKTtcbiAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0RW1wdHkodGhpcy5wYXJzZWRWYWx1ZS5hdXRoZW50aWNhdGVkU2FmZSwgXCJhdXRoZW50aWNhdGVkU2FmZVwiLCBcInBhcnNlZFZhbHVlXCIpO1xuICAgICAgICBzd2l0Y2ggKHRoaXMucGFyc2VkVmFsdWUuaW50ZWdyaXR5TW9kZSkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoXCJpdGVyYXRpb25zXCIgaW4gcGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGFyYW1ldGVyRXJyb3IoXCJpdGVyYXRpb25zXCIpO1xuICAgICAgICAgICAgICAgICAgICBQYXJhbWV0ZXJFcnJvci5hc3NlcnRFbXB0eShwYXJhbWV0ZXJzLnBia2RmMkhhc2hBbGdvcml0aG0sIFwicGJrZGYySGFzaEFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0RW1wdHkocGFyYW1ldGVycy5obWFjSGFzaEFsZ29yaXRobSwgXCJobWFjSGFzaEFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0RW1wdHkocGFyYW1ldGVycy5wYXNzd29yZCwgXCJwYXNzd29yZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FsdEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig2NCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbHRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoc2FsdEJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoc2FsdFZpZXcpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5wYXJzZWRWYWx1ZS5hdXRoZW50aWNhdGVkU2FmZS50b1NjaGVtYSgpLnRvQkVSKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRoU2FmZSA9IG5ldyBDb250ZW50SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogQ29udGVudEluZm8uREFUQSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogZGF0YSB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3J5cHRvLnN0YW1wRGF0YVdpdGhQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFyYW1ldGVycy5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hBbGdvcml0aG06IHBhcmFtZXRlcnMuaG1hY0hhc2hBbGdvcml0aG0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzYWx0OiBzYWx0QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0aW9uQ291bnQ6IHBhcmFtZXRlcnMuaXRlcmF0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUb1N0YW1wOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hY0RhdGEgPSBuZXcgTWFjRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWM6IG5ldyBEaWdlc3RJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWdlc3RBbGdvcml0aG06IG5ldyBBbGdvcml0aG1JZGVudGlmaWVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtSWQ6IGNyeXB0by5nZXRPSURCeUFsZ29yaXRobSh7IG5hbWU6IHBhcmFtZXRlcnMuaG1hY0hhc2hBbGdvcml0aG0gfSwgdHJ1ZSwgXCJobWFjSGFzaEFsZ29yaXRobVwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWdlc3Q6IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogcmVzdWx0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hY1NhbHQ6IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogc2FsdEJ1ZmZlciB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IHBhcmFtZXRlcnMuaXRlcmF0aW9uc1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShcInNpZ25pbmdDZXJ0aWZpY2F0ZVwiIGluIHBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGFyYW1ldGVyRXJyb3IoXCJzaWduaW5nQ2VydGlmaWNhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVyRXJyb3IuYXNzZXJ0RW1wdHkocGFyYW1ldGVycy5wcml2YXRlS2V5LCBcInByaXZhdGVLZXlcIik7XG4gICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlckVycm9yLmFzc2VydEVtcHR5KHBhcmFtZXRlcnMuaGFzaEFsZ29yaXRobSwgXCJoYXNoQWxnb3JpdGhtXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0JlU2lnbmVkID0gdGhpcy5wYXJzZWRWYWx1ZS5hdXRoZW50aWNhdGVkU2FmZS50b1NjaGVtYSgpLnRvQkVSKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY21zU2lnbmVkID0gbmV3IFNpZ25lZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuY2FwQ29udGVudEluZm86IG5ldyBFbmNhcHN1bGF0ZWRDb250ZW50SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNvbnRlbnRUeXBlOiBcIjEuMi44NDAuMTEzNTQ5LjEuNy4xXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZUNvbnRlbnQ6IG5ldyBhc24xanMuT2N0ZXRTdHJpbmcoeyB2YWx1ZUhleDogdG9CZVNpZ25lZCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpY2F0ZXM6IFtwYXJhbWV0ZXJzLnNpZ25pbmdDZXJ0aWZpY2F0ZV1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyeXB0by5kaWdlc3QoeyBuYW1lOiBwYXJhbWV0ZXJzLmhhc2hBbGdvcml0aG0gfSwgbmV3IFVpbnQ4QXJyYXkodG9CZVNpZ25lZCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRBdHRyID0gW107XG4gICAgICAgICAgICAgICAgICAgIHNpZ25lZEF0dHIucHVzaChuZXcgQXR0cmlidXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhc24xanMuT2JqZWN0SWRlbnRpZmllcih7IHZhbHVlOiBcIjEuMi44NDAuMTEzNTQ5LjEuNy4xXCIgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBzaWduZWRBdHRyLnB1c2gobmV3IEF0dHJpYnV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS41XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLlVUQ1RpbWUoeyB2YWx1ZURhdGU6IG5ldyBEYXRlKCkgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBzaWduZWRBdHRyLnB1c2gobmV3IEF0dHJpYnV0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS40XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9jdGV0U3RyaW5nKHsgdmFsdWVIZXg6IHJlc3VsdCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGNtc1NpZ25lZC5zaWduZXJJbmZvcy5wdXNoKG5ldyBTaWduZXJJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWQ6IG5ldyBJc3N1ZXJBbmRTZXJpYWxOdW1iZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlcjogcGFyYW1ldGVycy5zaWduaW5nQ2VydGlmaWNhdGUuaXNzdWVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlcjogcGFyYW1ldGVycy5zaWduaW5nQ2VydGlmaWNhdGUuc2VyaWFsTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25lZEF0dHJzOiBuZXcgU2lnbmVkQW5kVW5zaWduZWRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHNpZ25lZEF0dHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY21zU2lnbmVkLnNpZ24ocGFyYW1ldGVycy5wcml2YXRlS2V5LCAwLCBwYXJhbWV0ZXJzLmhhc2hBbGdvcml0aG0sIHVuZGVmaW5lZCwgY3J5cHRvKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRoU2FmZSA9IG5ldyBDb250ZW50SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogXCIxLjIuODQwLjExMzU0OS4xLjcuMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY21zU2lnbmVkLnRvU2NoZW1hKHRydWUpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXJhbWV0ZXIgXCJpbnRlZ3JpdHlNb2RlXCIgaGFzIHVua25vd24gdmFsdWU6ICR7dGhpcy5wYXJzZWRWYWx1ZS5pbnRlZ3JpdHlNb2RlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlSW50ZXJuYWxWYWx1ZXMocGFyYW1ldGVycywgY3J5cHRvID0gZ2V0Q3J5cHRvKHRydWUpKSB7XG4gICAgICAgIEFyZ3VtZW50RXJyb3IuYXNzZXJ0KHBhcmFtZXRlcnMsIFwicGFyYW1ldGVyc1wiLCBcIm9iamVjdFwiKTtcbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuY2hlY2tJbnRlZ3JpdHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFyYW1ldGVycy5jaGVja0ludGVncml0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWRWYWx1ZSA9IHt9O1xuICAgICAgICBzd2l0Y2ggKHRoaXMuYXV0aFNhZmUuY29udGVudFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgQ29udGVudEluZm8uREFUQTpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlckVycm9yLmFzc2VydEVtcHR5KHBhcmFtZXRlcnMucGFzc3dvcmQsIFwicGFzc3dvcmRcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkVmFsdWUuaW50ZWdyaXR5TW9kZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIEFyZ3VtZW50RXJyb3IuYXNzZXJ0KHRoaXMuYXV0aFNhZmUuY29udGVudCwgXCJhdXRoU2FmZS5jb250ZW50XCIsIGFzbjFqcy5PY3RldFN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhTYWZlQ29udGVudCA9IHRoaXMuYXV0aFNhZmUuY29udGVudC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFZhbHVlLmF1dGhlbnRpY2F0ZWRTYWZlID0gQXV0aGVudGljYXRlZFNhZmUuZnJvbUJFUihhdXRoU2FmZUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVycy5jaGVja0ludGVncml0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1hY0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBYnNlbnQgXFxcIm1hY0RhdGFcXFwiIHZhbHVlLCBjYW4gbm90IGNoZWNrIFBLQ1MjMTIgZGF0YSBpbnRlZ3JpdHlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNoQWxnb3JpdGhtID0gY3J5cHRvLmdldEFsZ29yaXRobUJ5T0lEKHRoaXMubWFjRGF0YS5tYWMuZGlnZXN0QWxnb3JpdGhtLmFsZ29yaXRobUlkLCB0cnVlLCBcImRpZ2VzdEFsZ29yaXRobVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyeXB0by52ZXJpZnlEYXRhU3RhbXBlZFdpdGhQYXNzd29yZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhcmFtZXRlcnMucGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaEFsZ29yaXRobTogaGFzaEFsZ29yaXRobS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbHQ6IEJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b0FycmF5QnVmZmVyKHRoaXMubWFjRGF0YS5tYWNTYWx0LnZhbHVlQmxvY2sudmFsdWVIZXhWaWV3KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25Db3VudDogdGhpcy5tYWNEYXRhLml0ZXJhdGlvbnMgfHwgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VG9WZXJpZnk6IGF1dGhTYWZlQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUb1ZlcmlmeTogQnVmZmVyU291cmNlQ29udmVydGVyLnRvQXJyYXlCdWZmZXIodGhpcy5tYWNEYXRhLm1hYy5kaWdlc3QudmFsdWVCbG9jay52YWx1ZUhleFZpZXcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludGVncml0eSBmb3IgdGhlIFBLQ1MjMTIgZGF0YSBpcyBicm9rZW4hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50SW5mby5TSUdORURfREFUQTpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkVmFsdWUuaW50ZWdyaXR5TW9kZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNtc1NpZ25lZCA9IG5ldyBTaWduZWREYXRhKHsgc2NoZW1hOiB0aGlzLmF1dGhTYWZlLmNvbnRlbnQgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVDb250ZW50ID0gY21zU2lnbmVkLmVuY2FwQ29udGVudEluZm8uZUNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlckVycm9yLmFzc2VydChlQ29udGVudCwgXCJlQ29udGVudFwiLCBcImNtc1NpZ25lZC5lbmNhcENvbnRlbnRJbmZvXCIpO1xuICAgICAgICAgICAgICAgICAgICBBcmd1bWVudEVycm9yLmFzc2VydChlQ29udGVudCwgXCJlQ29udGVudFwiLCBhc24xanMuT2N0ZXRTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gZUNvbnRlbnQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRWYWx1ZS5hdXRoZW50aWNhdGVkU2FmZSA9IEF1dGhlbnRpY2F0ZWRTYWZlLmZyb21CRVIoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9rID0gYXdhaXQgY21zU2lnbmVkLnZlcmlmeSh7IHNpZ25lcjogMCwgY2hlY2tDaGFpbjogZmFsc2UgfSwgY3J5cHRvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW50ZWdyaXR5IGZvciB0aGUgUEtDUyMxMiBkYXRhIGlzIGJyb2tlbiFcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5jb3JyZWN0IHZhbHVlIGZvciBcInRoaXMuYXV0aFNhZmUuY29udGVudFR5cGVcIjogJHt0aGlzLmF1dGhTYWZlLmNvbnRlbnRUeXBlfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuUEZYLkNMQVNTX05BTUUgPSBcIlBGWFwiO1xuXG5jb25zdCBTVEFUVVMkMSA9IFwic3RhdHVzXCI7XG5jb25zdCBTVEFUVVNfU1RSSU5HUyA9IFwic3RhdHVzU3RyaW5nc1wiO1xuY29uc3QgRkFJTF9JTkZPID0gXCJmYWlsSW5mb1wiO1xuY29uc3QgQ0xFQVJfUFJPUFMkMiA9IFtcbiAgICBTVEFUVVMkMSxcbiAgICBTVEFUVVNfU1RSSU5HUyxcbiAgICBGQUlMX0lORk9cbl07XG52YXIgUEtJU3RhdHVzO1xuKGZ1bmN0aW9uIChQS0lTdGF0dXMpIHtcbiAgICBQS0lTdGF0dXNbUEtJU3RhdHVzW1wiZ3JhbnRlZFwiXSA9IDBdID0gXCJncmFudGVkXCI7XG4gICAgUEtJU3RhdHVzW1BLSVN0YXR1c1tcImdyYW50ZWRXaXRoTW9kc1wiXSA9IDFdID0gXCJncmFudGVkV2l0aE1vZHNcIjtcbiAgICBQS0lTdGF0dXNbUEtJU3RhdHVzW1wicmVqZWN0aW9uXCJdID0gMl0gPSBcInJlamVjdGlvblwiO1xuICAgIFBLSVN0YXR1c1tQS0lTdGF0dXNbXCJ3YWl0aW5nXCJdID0gM10gPSBcIndhaXRpbmdcIjtcbiAgICBQS0lTdGF0dXNbUEtJU3RhdHVzW1wicmV2b2NhdGlvbldhcm5pbmdcIl0gPSA0XSA9IFwicmV2b2NhdGlvbldhcm5pbmdcIjtcbiAgICBQS0lTdGF0dXNbUEtJU3RhdHVzW1wicmV2b2NhdGlvbk5vdGlmaWNhdGlvblwiXSA9IDVdID0gXCJyZXZvY2F0aW9uTm90aWZpY2F0aW9uXCI7XG59KShQS0lTdGF0dXMgfHwgKFBLSVN0YXR1cyA9IHt9KSk7XG5jbGFzcyBQS0lTdGF0dXNJbmZvIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTVEFUVVMkMSwgUEtJU3RhdHVzSW5mby5kZWZhdWx0VmFsdWVzKFNUQVRVUyQxKSk7XG4gICAgICAgIGlmIChTVEFUVVNfU1RSSU5HUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c1N0cmluZ3MgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTVEFUVVNfU1RSSU5HUywgUEtJU3RhdHVzSW5mby5kZWZhdWx0VmFsdWVzKFNUQVRVU19TVFJJTkdTKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEZBSUxfSU5GTyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmZhaWxJbmZvID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgRkFJTF9JTkZPLCBQS0lTdGF0dXNJbmZvLmRlZmF1bHRWYWx1ZXMoRkFJTF9JTkZPKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFNUQVRVUyQxOlxuICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgY2FzZSBTVEFUVVNfU1RSSU5HUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjYXNlIEZBSUxfSU5GTzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGFzbjFqcy5CaXRTdHJpbmcoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVXaXRoRGVmYXVsdChtZW1iZXJOYW1lLCBtZW1iZXJWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKG1lbWJlck5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgU1RBVFVTJDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZSA9PT0gUEtJU3RhdHVzSW5mby5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpKTtcbiAgICAgICAgICAgIGNhc2UgU1RBVFVTX1NUUklOR1M6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5sZW5ndGggPT09IDApO1xuICAgICAgICAgICAgY2FzZSBGQUlMX0lORk86XG4gICAgICAgICAgICAgICAgcmV0dXJuIChtZW1iZXJWYWx1ZS5pc0VxdWFsKFBLSVN0YXR1c0luZm8uZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkludGVnZXIoeyBuYW1lOiAobmFtZXMuc3RhdHVzIHx8IEVNUFRZX1NUUklORykgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5SZXBlYXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLnN0YXR1c1N0cmluZ3MgfHwgRU1QVFlfU1RSSU5HKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbmV3IGFzbjFqcy5VdGY4U3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkJpdFN0cmluZyh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5mYWlsSW5mbyB8fCBFTVBUWV9TVFJJTkcpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMik7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgUEtJU3RhdHVzSW5mby5zY2hlbWEoe1xuICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFNUQVRVUyQxLFxuICAgICAgICAgICAgICAgIHN0YXR1c1N0cmluZ3M6IFNUQVRVU19TVFJJTkdTLFxuICAgICAgICAgICAgICAgIGZhaWxJbmZvOiBGQUlMX0lORk9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBBc25FcnJvci5hc3NlcnRTY2hlbWEoYXNuMSwgdGhpcy5jbGFzc05hbWUpO1xuICAgICAgICBjb25zdCBfc3RhdHVzID0gYXNuMS5yZXN1bHQuc3RhdHVzO1xuICAgICAgICBpZiAoKF9zdGF0dXMudmFsdWVCbG9jay5pc0hleE9ubHkgPT09IHRydWUpIHx8XG4gICAgICAgICAgICAoX3N0YXR1cy52YWx1ZUJsb2NrLnZhbHVlRGVjIDwgMCkgfHxcbiAgICAgICAgICAgIChfc3RhdHVzLnZhbHVlQmxvY2sudmFsdWVEZWMgPiA1KSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBLSVN0YXR1c0luZm8gXFxcInN0YXR1c1xcXCIgaGFzIGludmFsaWQgdmFsdWVcIik7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gX3N0YXR1cy52YWx1ZUJsb2NrLnZhbHVlRGVjO1xuICAgICAgICBpZiAoU1RBVFVTX1NUUklOR1MgaW4gYXNuMS5yZXN1bHQpXG4gICAgICAgICAgICB0aGlzLnN0YXR1c1N0cmluZ3MgPSBhc24xLnJlc3VsdC5zdGF0dXNTdHJpbmdzO1xuICAgICAgICBpZiAoRkFJTF9JTkZPIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy5mYWlsSW5mbyA9IGFzbjEucmVzdWx0LmZhaWxJbmZvO1xuICAgIH1cbiAgICB0b1NjaGVtYSgpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBbXTtcbiAgICAgICAgb3V0cHV0QXJyYXkucHVzaChuZXcgYXNuMWpzLkludGVnZXIoeyB2YWx1ZTogdGhpcy5zdGF0dXMgfSkpO1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNTdHJpbmdzKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXR1c1N0cmluZ3NcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mYWlsSW5mbykge1xuICAgICAgICAgICAgb3V0cHV0QXJyYXkucHVzaCh0aGlzLmZhaWxJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c1N0cmluZ3MpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXNTdHJpbmdzID0gQXJyYXkuZnJvbSh0aGlzLnN0YXR1c1N0cmluZ3MsIG8gPT4gby50b0pTT04oKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZmFpbEluZm8pIHtcbiAgICAgICAgICAgIHJlcy5mYWlsSW5mbyA9IHRoaXMuZmFpbEluZm8udG9KU09OKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG5QS0lTdGF0dXNJbmZvLkNMQVNTX05BTUUgPSBcIlBLSVN0YXR1c0luZm9cIjtcblxuY29uc3QgVkVSU0lPTiA9IFwidmVyc2lvblwiO1xuY29uc3QgTUVTU0FHRV9JTVBSSU5UID0gXCJtZXNzYWdlSW1wcmludFwiO1xuY29uc3QgUkVRX1BPTElDWSA9IFwicmVxUG9saWN5XCI7XG5jb25zdCBOT05DRSA9IFwibm9uY2VcIjtcbmNvbnN0IENFUlRfUkVRID0gXCJjZXJ0UmVxXCI7XG5jb25zdCBFWFRFTlNJT05TID0gXCJleHRlbnNpb25zXCI7XG5jb25zdCBUSU1FX1NUQU1QX1JFUSA9IFwiVGltZVN0YW1wUmVxXCI7XG5jb25zdCBUSU1FX1NUQU1QX1JFUV9WRVJTSU9OID0gYCR7VElNRV9TVEFNUF9SRVF9LiR7VkVSU0lPTn1gO1xuY29uc3QgVElNRV9TVEFNUF9SRVFfTUVTU0FHRV9JTVBSSU5UID0gYCR7VElNRV9TVEFNUF9SRVF9LiR7TUVTU0FHRV9JTVBSSU5UfWA7XG5jb25zdCBUSU1FX1NUQU1QX1JFUV9QT0xJQ1kgPSBgJHtUSU1FX1NUQU1QX1JFUX0uJHtSRVFfUE9MSUNZfWA7XG5jb25zdCBUSU1FX1NUQU1QX1JFUV9OT05DRSA9IGAke1RJTUVfU1RBTVBfUkVRfS4ke05PTkNFfWA7XG5jb25zdCBUSU1FX1NUQU1QX1JFUV9DRVJUX1JFUSA9IGAke1RJTUVfU1RBTVBfUkVRfS4ke0NFUlRfUkVRfWA7XG5jb25zdCBUSU1FX1NUQU1QX1JFUV9FWFRFTlNJT05TID0gYCR7VElNRV9TVEFNUF9SRVF9LiR7RVhURU5TSU9OU31gO1xuY29uc3QgQ0xFQVJfUFJPUFMkMSA9IFtcbiAgICBUSU1FX1NUQU1QX1JFUV9WRVJTSU9OLFxuICAgIFRJTUVfU1RBTVBfUkVRX01FU1NBR0VfSU1QUklOVCxcbiAgICBUSU1FX1NUQU1QX1JFUV9QT0xJQ1ksXG4gICAgVElNRV9TVEFNUF9SRVFfTk9OQ0UsXG4gICAgVElNRV9TVEFNUF9SRVFfQ0VSVF9SRVEsXG4gICAgVElNRV9TVEFNUF9SRVFfRVhURU5TSU9OUyxcbl07XG5jbGFzcyBUaW1lU3RhbXBSZXEgZXh0ZW5kcyBQa2lPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBWRVJTSU9OLCBUaW1lU3RhbXBSZXEuZGVmYXVsdFZhbHVlcyhWRVJTSU9OKSk7XG4gICAgICAgIHRoaXMubWVzc2FnZUltcHJpbnQgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBNRVNTQUdFX0lNUFJJTlQsIFRpbWVTdGFtcFJlcS5kZWZhdWx0VmFsdWVzKE1FU1NBR0VfSU1QUklOVCkpO1xuICAgICAgICBpZiAoUkVRX1BPTElDWSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnJlcVBvbGljeSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFJFUV9QT0xJQ1ksIFRpbWVTdGFtcFJlcS5kZWZhdWx0VmFsdWVzKFJFUV9QT0xJQ1kpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTk9OQ0UgaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy5ub25jZSA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIE5PTkNFLCBUaW1lU3RhbXBSZXEuZGVmYXVsdFZhbHVlcyhOT05DRSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChDRVJUX1JFUSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmNlcnRSZXEgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBDRVJUX1JFUSwgVGltZVN0YW1wUmVxLmRlZmF1bHRWYWx1ZXMoQ0VSVF9SRVEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoRVhURU5TSU9OUyBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBFWFRFTlNJT05TLCBUaW1lU3RhbXBSZXEuZGVmYXVsdFZhbHVlcyhFWFRFTlNJT05TKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFZFUlNJT046XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlIE1FU1NBR0VfSU1QUklOVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VJbXByaW50KCk7XG4gICAgICAgICAgICBjYXNlIFJFUV9QT0xJQ1k6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVNUFRZX1NUUklORztcbiAgICAgICAgICAgIGNhc2UgTk9OQ0U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhc24xanMuSW50ZWdlcigpO1xuICAgICAgICAgICAgY2FzZSBDRVJUX1JFUTpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIEVYVEVOU0lPTlM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyZVdpdGhEZWZhdWx0KG1lbWJlck5hbWUsIG1lbWJlclZhbHVlKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVyTmFtZSkge1xuICAgICAgICAgICAgY2FzZSBWRVJTSU9OOlxuICAgICAgICAgICAgY2FzZSBSRVFfUE9MSUNZOlxuICAgICAgICAgICAgY2FzZSBDRVJUX1JFUTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlID09PSBUaW1lU3RhbXBSZXEuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKSk7XG4gICAgICAgICAgICBjYXNlIE1FU1NBR0VfSU1QUklOVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChNZXNzYWdlSW1wcmludC5jb21wYXJlV2l0aERlZmF1bHQoXCJoYXNoQWxnb3JpdGhtXCIsIG1lbWJlclZhbHVlLmhhc2hBbGdvcml0aG0pKSAmJlxuICAgICAgICAgICAgICAgICAgICAoTWVzc2FnZUltcHJpbnQuY29tcGFyZVdpdGhEZWZhdWx0KFwiaGFzaGVkTWVzc2FnZVwiLCBtZW1iZXJWYWx1ZS5oYXNoZWRNZXNzYWdlKSkpO1xuICAgICAgICAgICAgY2FzZSBOT05DRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmlzRXF1YWwoVGltZVN0YW1wUmVxLmRlZmF1bHRWYWx1ZXMobWVtYmVyTmFtZSkpKTtcbiAgICAgICAgICAgIGNhc2UgRVhURU5TSU9OUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1lbWJlclZhbHVlLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzY2hlbWEocGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gcHZ1dGlscy5nZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgXCJuYW1lc1wiLCB7fSk7XG4gICAgICAgIHJldHVybiAobmV3IGFzbjFqcy5TZXF1ZW5jZSh7XG4gICAgICAgICAgICBuYW1lOiAobmFtZXMuYmxvY2tOYW1lIHx8IFRJTUVfU1RBTVBfUkVRKSxcbiAgICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHsgbmFtZTogKG5hbWVzLnZlcnNpb24gfHwgVElNRV9TVEFNUF9SRVFfVkVSU0lPTikgfSksXG4gICAgICAgICAgICAgICAgTWVzc2FnZUltcHJpbnQuc2NoZW1hKG5hbWVzLm1lc3NhZ2VJbXByaW50IHx8IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZTogVElNRV9TVEFNUF9SRVFfTUVTU0FHRV9JTVBSSU5UXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLk9iamVjdElkZW50aWZpZXIoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMucmVxUG9saWN5IHx8IFRJTUVfU1RBTVBfUkVRX1BPTElDWSksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5JbnRlZ2VyKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogKG5hbWVzLm5vbmNlIHx8IFRJTUVfU1RBTVBfUkVRX05PTkNFKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgYXNuMWpzLkJvb2xlYW4oe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAobmFtZXMuY2VydFJlcSB8fCBUSU1FX1NUQU1QX1JFUV9DRVJUX1JFUSksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IGFzbjFqcy5Db25zdHJ1Y3RlZCh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZEJsb2NrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdDbGFzczogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW25ldyBhc24xanMuUmVwZWF0ZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChuYW1lcy5leHRlbnNpb25zIHx8IFRJTUVfU1RBTVBfUkVRX0VYVEVOU0lPTlMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBFeHRlbnNpb24uc2NoZW1hKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcHZ1dGlscy5jbGVhclByb3BzKHNjaGVtYSwgQ0xFQVJfUFJPUFMkMSk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgVGltZVN0YW1wUmVxLnNjaGVtYSgpKTtcbiAgICAgICAgQXNuRXJyb3IuYXNzZXJ0U2NoZW1hKGFzbjEsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gYXNuMS5yZXN1bHRbVElNRV9TVEFNUF9SRVFfVkVSU0lPTl0udmFsdWVCbG9jay52YWx1ZURlYztcbiAgICAgICAgdGhpcy5tZXNzYWdlSW1wcmludCA9IG5ldyBNZXNzYWdlSW1wcmludCh7IHNjaGVtYTogYXNuMS5yZXN1bHRbVElNRV9TVEFNUF9SRVFfTUVTU0FHRV9JTVBSSU5UXSB9KTtcbiAgICAgICAgaWYgKFRJTUVfU1RBTVBfUkVRX1BPTElDWSBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMucmVxUG9saWN5ID0gYXNuMS5yZXN1bHRbVElNRV9TVEFNUF9SRVFfUE9MSUNZXS52YWx1ZUJsb2NrLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmIChUSU1FX1NUQU1QX1JFUV9OT05DRSBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMubm9uY2UgPSBhc24xLnJlc3VsdFtUSU1FX1NUQU1QX1JFUV9OT05DRV07XG4gICAgICAgIGlmIChUSU1FX1NUQU1QX1JFUV9DRVJUX1JFUSBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMuY2VydFJlcSA9IGFzbjEucmVzdWx0W1RJTUVfU1RBTVBfUkVRX0NFUlRfUkVRXS52YWx1ZUJsb2NrLnZhbHVlO1xuICAgICAgICBpZiAoVElNRV9TVEFNUF9SRVFfRVhURU5TSU9OUyBpbiBhc24xLnJlc3VsdClcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IEFycmF5LmZyb20oYXNuMS5yZXN1bHRbVElNRV9TVEFNUF9SRVFfRVhURU5TSU9OU10sIGVsZW1lbnQgPT4gbmV3IEV4dGVuc2lvbih7IHNjaGVtYTogZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIHRvU2NoZW1hKCkge1xuICAgICAgICBjb25zdCBvdXRwdXRBcnJheSA9IFtdO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuSW50ZWdlcih7IHZhbHVlOiB0aGlzLnZlcnNpb24gfSkpO1xuICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMubWVzc2FnZUltcHJpbnQudG9TY2hlbWEoKSk7XG4gICAgICAgIGlmICh0aGlzLnJlcVBvbGljeSlcbiAgICAgICAgICAgIG91dHB1dEFycmF5LnB1c2gobmV3IGFzbjFqcy5PYmplY3RJZGVudGlmaWVyKHsgdmFsdWU6IHRoaXMucmVxUG9saWN5IH0pKTtcbiAgICAgICAgaWYgKHRoaXMubm9uY2UpXG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMubm9uY2UpO1xuICAgICAgICBpZiAoKENFUlRfUkVRIGluIHRoaXMpICYmIChUaW1lU3RhbXBSZXEuY29tcGFyZVdpdGhEZWZhdWx0KENFUlRfUkVRLCB0aGlzLmNlcnRSZXEpID09PSBmYWxzZSkpXG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQm9vbGVhbih7IHZhbHVlOiB0aGlzLmNlcnRSZXEgfSkpO1xuICAgICAgICBpZiAodGhpcy5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKG5ldyBhc24xanMuQ29uc3RydWN0ZWQoe1xuICAgICAgICAgICAgICAgIGlkQmxvY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2xhc3M6IDMsXG4gICAgICAgICAgICAgICAgICAgIHRhZ051bWJlcjogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IEFycmF5LmZyb20odGhpcy5leHRlbnNpb25zLCBvID0+IG8udG9TY2hlbWEoKSlcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgdmFsdWU6IG91dHB1dEFycmF5XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCByZXMgPSB7XG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICAgICAgICBtZXNzYWdlSW1wcmludDogdGhpcy5tZXNzYWdlSW1wcmludC50b0pTT04oKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5yZXFQb2xpY3kgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlcy5yZXFQb2xpY3kgPSB0aGlzLnJlcVBvbGljeTtcbiAgICAgICAgaWYgKHRoaXMubm9uY2UgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlcy5ub25jZSA9IHRoaXMubm9uY2UudG9KU09OKCk7XG4gICAgICAgIGlmICgodGhpcy5jZXJ0UmVxICE9PSB1bmRlZmluZWQpICYmIChUaW1lU3RhbXBSZXEuY29tcGFyZVdpdGhEZWZhdWx0KENFUlRfUkVRLCB0aGlzLmNlcnRSZXEpID09PSBmYWxzZSkpXG4gICAgICAgICAgICByZXMuY2VydFJlcSA9IHRoaXMuY2VydFJlcTtcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgcmVzLmV4dGVuc2lvbnMgPSBBcnJheS5mcm9tKHRoaXMuZXh0ZW5zaW9ucywgbyA9PiBvLnRvSlNPTigpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn1cblRpbWVTdGFtcFJlcS5DTEFTU19OQU1FID0gXCJUaW1lU3RhbXBSZXFcIjtcblxuY29uc3QgU1RBVFVTID0gXCJzdGF0dXNcIjtcbmNvbnN0IFRJTUVfU1RBTVBfVE9LRU4gPSBcInRpbWVTdGFtcFRva2VuXCI7XG5jb25zdCBUSU1FX1NUQU1QX1JFU1AgPSBcIlRpbWVTdGFtcFJlc3BcIjtcbmNvbnN0IFRJTUVfU1RBTVBfUkVTUF9TVEFUVVMgPSBgJHtUSU1FX1NUQU1QX1JFU1B9LiR7U1RBVFVTfWA7XG5jb25zdCBUSU1FX1NUQU1QX1JFU1BfVE9LRU4gPSBgJHtUSU1FX1NUQU1QX1JFU1B9LiR7VElNRV9TVEFNUF9UT0tFTn1gO1xuY29uc3QgQ0xFQVJfUFJPUFMgPSBbXG4gICAgVElNRV9TVEFNUF9SRVNQX1NUQVRVUyxcbiAgICBUSU1FX1NUQU1QX1JFU1BfVE9LRU5cbl07XG5jbGFzcyBUaW1lU3RhbXBSZXNwIGV4dGVuZHMgUGtpT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBwdnV0aWxzLmdldFBhcmFtZXRlcnNWYWx1ZShwYXJhbWV0ZXJzLCBTVEFUVVMsIFRpbWVTdGFtcFJlc3AuZGVmYXVsdFZhbHVlcyhTVEFUVVMpKTtcbiAgICAgICAgaWYgKFRJTUVfU1RBTVBfVE9LRU4gaW4gcGFyYW1ldGVycykge1xuICAgICAgICAgICAgdGhpcy50aW1lU3RhbXBUb2tlbiA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFRJTUVfU1RBTVBfVE9LRU4sIFRpbWVTdGFtcFJlc3AuZGVmYXVsdFZhbHVlcyhUSU1FX1NUQU1QX1RPS0VOKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuc2NoZW1hKSB7XG4gICAgICAgICAgICB0aGlzLmZyb21TY2hlbWEocGFyYW1ldGVycy5zY2hlbWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFNUQVRVUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBLSVN0YXR1c0luZm8oKTtcbiAgICAgICAgICAgIGNhc2UgVElNRV9TVEFNUF9UT0tFTjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbnRlbnRJbmZvKCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5kZWZhdWx0VmFsdWVzKG1lbWJlck5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJlV2l0aERlZmF1bHQobWVtYmVyTmFtZSwgbWVtYmVyVmFsdWUpIHtcbiAgICAgICAgc3dpdGNoIChtZW1iZXJOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFNUQVRVUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKChQS0lTdGF0dXNJbmZvLmNvbXBhcmVXaXRoRGVmYXVsdChTVEFUVVMsIG1lbWJlclZhbHVlLnN0YXR1cykpICYmXG4gICAgICAgICAgICAgICAgICAgICgoXCJzdGF0dXNTdHJpbmdzXCIgaW4gbWVtYmVyVmFsdWUpID09PSBmYWxzZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKChcImZhaWxJbmZvXCIgaW4gbWVtYmVyVmFsdWUpID09PSBmYWxzZSkpO1xuICAgICAgICAgICAgY2FzZSBUSU1FX1NUQU1QX1RPS0VOOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKG1lbWJlclZhbHVlLmNvbnRlbnRUeXBlID09PSBFTVBUWV9TVFJJTkcpICYmXG4gICAgICAgICAgICAgICAgICAgIChtZW1iZXJWYWx1ZS5jb250ZW50IGluc3RhbmNlb2YgYXNuMWpzLkFueSkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZGVmYXVsdFZhbHVlcyhtZW1iZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgc2NoZW1hKHBhcmFtZXRlcnMgPSB7fSkge1xuICAgICAgICBjb25zdCBuYW1lcyA9IHB2dXRpbHMuZ2V0UGFyYW1ldGVyc1ZhbHVlKHBhcmFtZXRlcnMsIFwibmFtZXNcIiwge30pO1xuICAgICAgICByZXR1cm4gKG5ldyBhc24xanMuU2VxdWVuY2Uoe1xuICAgICAgICAgICAgbmFtZTogKG5hbWVzLmJsb2NrTmFtZSB8fCBUSU1FX1NUQU1QX1JFU1ApLFxuICAgICAgICAgICAgdmFsdWU6IFtcbiAgICAgICAgICAgICAgICBQS0lTdGF0dXNJbmZvLnNjaGVtYShuYW1lcy5zdGF0dXMgfHwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBUSU1FX1NUQU1QX1JFU1BfU1RBVFVTXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBDb250ZW50SW5mby5zY2hlbWEobmFtZXMudGltZVN0YW1wVG9rZW4gfHwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tOYW1lOiBUSU1FX1NUQU1QX1JFU1BfVE9LRU4sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBwdnV0aWxzLmNsZWFyUHJvcHMoc2NoZW1hLCBDTEVBUl9QUk9QUyk7XG4gICAgICAgIGNvbnN0IGFzbjEgPSBhc24xanMuY29tcGFyZVNjaGVtYShzY2hlbWEsIHNjaGVtYSwgVGltZVN0YW1wUmVzcC5zY2hlbWEoKSk7XG4gICAgICAgIEFzbkVycm9yLmFzc2VydFNjaGVtYShhc24xLCB0aGlzLmNsYXNzTmFtZSk7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gbmV3IFBLSVN0YXR1c0luZm8oeyBzY2hlbWE6IGFzbjEucmVzdWx0W1RJTUVfU1RBTVBfUkVTUF9TVEFUVVNdIH0pO1xuICAgICAgICBpZiAoVElNRV9TVEFNUF9SRVNQX1RPS0VOIGluIGFzbjEucmVzdWx0KVxuICAgICAgICAgICAgdGhpcy50aW1lU3RhbXBUb2tlbiA9IG5ldyBDb250ZW50SW5mbyh7IHNjaGVtYTogYXNuMS5yZXN1bHRbVElNRV9TVEFNUF9SRVNQX1RPS0VOXSB9KTtcbiAgICB9XG4gICAgdG9TY2hlbWEoKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dEFycmF5ID0gW107XG4gICAgICAgIG91dHB1dEFycmF5LnB1c2godGhpcy5zdGF0dXMudG9TY2hlbWEoKSk7XG4gICAgICAgIGlmICh0aGlzLnRpbWVTdGFtcFRva2VuKSB7XG4gICAgICAgICAgICBvdXRwdXRBcnJheS5wdXNoKHRoaXMudGltZVN0YW1wVG9rZW4udG9TY2hlbWEoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChuZXcgYXNuMWpzLlNlcXVlbmNlKHtcbiAgICAgICAgICAgIHZhbHVlOiBvdXRwdXRBcnJheVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cy50b0pTT04oKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy50aW1lU3RhbXBUb2tlbikge1xuICAgICAgICAgICAgcmVzLnRpbWVTdGFtcFRva2VuID0gdGhpcy50aW1lU3RhbXBUb2tlbi50b0pTT04oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBhc3luYyBzaWduKHByaXZhdGVLZXksIGhhc2hBbGdvcml0aG0sIGNyeXB0byA9IGdldENyeXB0byh0cnVlKSkge1xuICAgICAgICB0aGlzLmFzc2VydENvbnRlbnRUeXBlKCk7XG4gICAgICAgIGNvbnN0IHNpZ25lZCA9IG5ldyBTaWduZWREYXRhKHsgc2NoZW1hOiB0aGlzLnRpbWVTdGFtcFRva2VuLmNvbnRlbnQgfSk7XG4gICAgICAgIHJldHVybiBzaWduZWQuc2lnbihwcml2YXRlS2V5LCAwLCBoYXNoQWxnb3JpdGhtLCB1bmRlZmluZWQsIGNyeXB0byk7XG4gICAgfVxuICAgIGFzeW5jIHZlcmlmeSh2ZXJpZmljYXRpb25QYXJhbWV0ZXJzID0geyBzaWduZXI6IDAsIHRydXN0ZWRDZXJ0czogW10sIGRhdGE6IEVNUFRZX0JVRkZFUiB9LCBjcnlwdG8gPSBnZXRDcnlwdG8odHJ1ZSkpIHtcbiAgICAgICAgdGhpcy5hc3NlcnRDb250ZW50VHlwZSgpO1xuICAgICAgICBjb25zdCBzaWduZWQgPSBuZXcgU2lnbmVkRGF0YSh7IHNjaGVtYTogdGhpcy50aW1lU3RhbXBUb2tlbi5jb250ZW50IH0pO1xuICAgICAgICByZXR1cm4gc2lnbmVkLnZlcmlmeSh2ZXJpZmljYXRpb25QYXJhbWV0ZXJzLCBjcnlwdG8pO1xuICAgIH1cbiAgICBhc3NlcnRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVTdGFtcFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aW1lU3RhbXBUb2tlbiBpcyBhYnNlbnQgaW4gVFNQIHJlc3BvbnNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRpbWVTdGFtcFRva2VuLmNvbnRlbnRUeXBlICE9PSBpZF9Db250ZW50VHlwZV9TaWduZWREYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFdyb25nIGZvcm1hdCBvZiB0aW1lU3RhbXBUb2tlbjogJHt0aGlzLnRpbWVTdGFtcFRva2VuLmNvbnRlbnRUeXBlfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuVGltZVN0YW1wUmVzcC5DTEFTU19OQU1FID0gXCJUaW1lU3RhbXBSZXNwXCI7XG5cbmZ1bmN0aW9uIGluaXRDcnlwdG9FbmdpbmUoKSB7XG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmIChcImNyeXB0b1wiIGluIHNlbGYpIHtcbiAgICAgICAgICAgIGxldCBlbmdpbmVOYW1lID0gXCJ3ZWJjcnlwdG9cIjtcbiAgICAgICAgICAgIGlmIChcIndlYmtpdFN1YnRsZVwiIGluIHNlbGYuY3J5cHRvKSB7XG4gICAgICAgICAgICAgICAgZW5naW5lTmFtZSA9IFwic2FmYXJpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRFbmdpbmUoZW5naW5lTmFtZSwgbmV3IENyeXB0b0VuZ2luZSh7IG5hbWU6IGVuZ2luZU5hbWUsIGNyeXB0bzogY3J5cHRvIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgY3J5cHRvICE9PSBcInVuZGVmaW5lZFwiICYmIFwid2ViY3J5cHRvXCIgaW4gY3J5cHRvKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBcIk5vZGVKUyBeMTVcIjtcbiAgICAgICAgY29uc3Qgbm9kZUNyeXB0byA9IGNyeXB0by53ZWJjcnlwdG87XG4gICAgICAgIHNldEVuZ2luZShuYW1lLCBuZXcgQ3J5cHRvRW5naW5lKHsgbmFtZSwgY3J5cHRvOiBub2RlQ3J5cHRvIH0pKTtcbiAgICB9XG59XG5cbmluaXRDcnlwdG9FbmdpbmUoKTtcblxuZXhwb3J0IHsgQWJzdHJhY3RDcnlwdG9FbmdpbmUsIEFjY2Vzc0Rlc2NyaXB0aW9uLCBBY2N1cmFjeSwgQWxnb3JpdGhtSWRlbnRpZmllciwgQWx0TmFtZSwgQXJndW1lbnRFcnJvciwgQXNuRXJyb3IsIEF0dENlcnRWYWxpZGl0eVBlcmlvZCwgQXR0cmlidXRlLCBBdHRyaWJ1dGVDZXJ0aWZpY2F0ZUluZm9WMSwgQXR0cmlidXRlQ2VydGlmaWNhdGVJbmZvVjIsIEF0dHJpYnV0ZUNlcnRpZmljYXRlVjEsIEF0dHJpYnV0ZUNlcnRpZmljYXRlVjIsIEF0dHJpYnV0ZVR5cGVBbmRWYWx1ZSwgQXV0aGVudGljYXRlZFNhZmUsIEF1dGhvcml0eUtleUlkZW50aWZpZXIsIEJhc2ljQ29uc3RyYWludHMsIEJhc2ljT0NTUFJlc3BvbnNlLCBDQVZlcnNpb24sIENSTEJhZywgQ1JMRGlzdHJpYnV0aW9uUG9pbnRzLCBDZXJ0QmFnLCBDZXJ0SUQsIENlcnRpZmljYXRlLCBDZXJ0aWZpY2F0ZUNoYWluVmFsaWRhdGlvbkVuZ2luZSwgQ2VydGlmaWNhdGVQb2xpY2llcywgQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdCwgQ2VydGlmaWNhdGVTZXQsIENlcnRpZmljYXRlVGVtcGxhdGUsIENlcnRpZmljYXRpb25SZXF1ZXN0LCBDaGFpblZhbGlkYXRpb25Db2RlLCBDaGFpblZhbGlkYXRpb25FcnJvciwgQ29udGVudEluZm8sIENyeXB0b0VuZ2luZSwgRGlnZXN0SW5mbywgRGlzdHJpYnV0aW9uUG9pbnQsIEVDQ0NNU1NoYXJlZEluZm8sIEVDTmFtZWRDdXJ2ZXMsIEVDUHJpdmF0ZUtleSwgRUNQdWJsaWNLZXksIEVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLCBFbmNyeXB0ZWRDb250ZW50SW5mbywgRW5jcnlwdGVkRGF0YSwgRW52ZWxvcGVkRGF0YSwgRXh0S2V5VXNhZ2UsIEV4dGVuc2lvbiwgRXh0ZW5zaW9uVmFsdWVGYWN0b3J5LCBFeHRlbnNpb25zLCBHZW5lcmFsTmFtZSwgR2VuZXJhbE5hbWVzLCBHZW5lcmFsU3VidHJlZSwgSEFTSEVEX01FU1NBR0UsIEhBU0hfQUxHT1JJVEhNLCBIb2xkZXIsIEluZm9BY2Nlc3MsIElzc3VlckFuZFNlcmlhbE51bWJlciwgSXNzdWVyU2VyaWFsLCBJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQsIEtFS0lkZW50aWZpZXIsIEtFS1JlY2lwaWVudEluZm8sIEtleUFncmVlUmVjaXBpZW50SWRlbnRpZmllciwgS2V5QWdyZWVSZWNpcGllbnRJbmZvLCBLZXlCYWcsIEtleVRyYW5zUmVjaXBpZW50SW5mbywgTUlDUk9TLCBNSUxMSVMsIE1hY0RhdGEsIE1lc3NhZ2VJbXByaW50LCBOYW1lQ29uc3RyYWludHMsIE9DU1BSZXF1ZXN0LCBPQ1NQUmVzcG9uc2UsIE9iamVjdERpZ2VzdEluZm8sIE9yaWdpbmF0b3JJZGVudGlmaWVyT3JLZXksIE9yaWdpbmF0b3JJbmZvLCBPcmlnaW5hdG9yUHVibGljS2V5LCBPdGhlckNlcnRpZmljYXRlRm9ybWF0LCBPdGhlcktleUF0dHJpYnV0ZSwgT3RoZXJQcmltZUluZm8sIE90aGVyUmVjaXBpZW50SW5mbywgT3RoZXJSZXZvY2F0aW9uSW5mb0Zvcm1hdCwgUEJFUzJQYXJhbXMsIFBCS0RGMlBhcmFtcywgUEZYLCBQS0NTOFNocm91ZGVkS2V5QmFnLCBQS0lTdGF0dXMsIFBLSVN0YXR1c0luZm8sIFBPTElDWV9JREVOVElGSUVSLCBQT0xJQ1lfUVVBTElGSUVSUywgUGFyYW1ldGVyRXJyb3IsIFBhc3N3b3JkUmVjaXBpZW50aW5mbywgUGtpT2JqZWN0LCBQb2xpY3lDb25zdHJhaW50cywgUG9saWN5SW5mb3JtYXRpb24sIFBvbGljeU1hcHBpbmcsIFBvbGljeU1hcHBpbmdzLCBQb2xpY3lRdWFsaWZpZXJJbmZvLCBQcml2YXRlS2V5SW5mbywgUHJpdmF0ZUtleVVzYWdlUGVyaW9kLCBQdWJsaWNLZXlJbmZvLCBRQ1N0YXRlbWVudCwgUUNTdGF0ZW1lbnRzLCBSRE4sIFJTQUVTT0FFUFBhcmFtcywgUlNBUHJpdmF0ZUtleSwgUlNBUHVibGljS2V5LCBSU0FTU0FQU1NQYXJhbXMsIFJlY2lwaWVudEVuY3J5cHRlZEtleSwgUmVjaXBpZW50RW5jcnlwdGVkS2V5cywgUmVjaXBpZW50SWRlbnRpZmllciwgUmVjaXBpZW50SW5mbywgUmVjaXBpZW50S2V5SWRlbnRpZmllciwgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZXMsIFJlcXVlc3QsIFJlc3BvbnNlQnl0ZXMsIFJlc3BvbnNlRGF0YSwgUmV2b2NhdGlvbkluZm9DaG9pY2VzLCBSZXZva2VkQ2VydGlmaWNhdGUsIFNFQ09ORFMsIFNhZmVCYWcsIFNhZmVCYWdWYWx1ZUZhY3RvcnksIFNhZmVDb250ZW50cywgU2VjcmV0QmFnLCBTaWduYXR1cmUsIFNpZ25lZEFuZFVuc2lnbmVkQXR0cmlidXRlcywgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXAsIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdCwgU2lnbmVkRGF0YSwgU2lnbmVkRGF0YVZlcmlmeUVycm9yLCBTaWduZXJJbmZvLCBTaW5nbGVSZXNwb25zZSwgU3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXMsIFRCU1JlcXVlc3QsIFRTVEluZm8sIFRZUEUkNCBhcyBUWVBFLCBUWVBFX0FORF9WQUxVRVMsIFRpbWUsIFRpbWVTdGFtcFJlcSwgVGltZVN0YW1wUmVzcCwgVGltZVR5cGUsIFYyRm9ybSwgVkFMVUUkNSBhcyBWQUxVRSwgVkFMVUVfQkVGT1JFX0RFQ09ERSwgY2hlY2tDQSwgY3JlYXRlQ01TRUNEU0FTaWduYXR1cmUsIGNyZWF0ZUVDRFNBU2lnbmF0dXJlRnJvbUNNUywgZW5naW5lLCBnZXRBbGdvcml0aG1CeU9JRCwgZ2V0QWxnb3JpdGhtUGFyYW1ldGVycywgZ2V0Q3J5cHRvLCBnZXRFbmdpbmUsIGdldEhhc2hBbGdvcml0aG0sIGdldE9JREJ5QWxnb3JpdGhtLCBnZXRSYW5kb21WYWx1ZXMsIGlkX0FueVBvbGljeSwgaWRfQXV0aG9yaXR5SW5mb0FjY2VzcywgaWRfQXV0aG9yaXR5S2V5SWRlbnRpZmllciwgaWRfQmFzZUNSTE51bWJlciwgaWRfQmFzaWNDb25zdHJhaW50cywgaWRfQ1JMQmFnX1g1MDlDUkwsIGlkX0NSTERpc3RyaWJ1dGlvblBvaW50cywgaWRfQ1JMTnVtYmVyLCBpZF9DUkxSZWFzb24sIGlkX0NlcnRCYWdfQXR0cmlidXRlQ2VydGlmaWNhdGUsIGlkX0NlcnRCYWdfU0RTSUNlcnRpZmljYXRlLCBpZF9DZXJ0QmFnX1g1MDlDZXJ0aWZpY2F0ZSwgaWRfQ2VydGlmaWNhdGVJc3N1ZXIsIGlkX0NlcnRpZmljYXRlUG9saWNpZXMsIGlkX0NvbnRlbnRUeXBlX0RhdGEsIGlkX0NvbnRlbnRUeXBlX0VuY3J5cHRlZERhdGEsIGlkX0NvbnRlbnRUeXBlX0VudmVsb3BlZERhdGEsIGlkX0NvbnRlbnRUeXBlX1NpZ25lZERhdGEsIGlkX0V4dEtleVVzYWdlLCBpZF9GcmVzaGVzdENSTCwgaWRfSW5oaWJpdEFueVBvbGljeSwgaWRfSW52YWxpZGl0eURhdGUsIGlkX0lzc3VlckFsdE5hbWUsIGlkX0lzc3VpbmdEaXN0cmlidXRpb25Qb2ludCwgaWRfS2V5VXNhZ2UsIGlkX01pY3Jvc29mdEFwcFBvbGljaWVzLCBpZF9NaWNyb3NvZnRDYVZlcnNpb24sIGlkX01pY3Jvc29mdENlcnRUZW1wbGF0ZVYxLCBpZF9NaWNyb3NvZnRDZXJ0VGVtcGxhdGVWMiwgaWRfTWljcm9zb2Z0UHJldkNhQ2VydEhhc2gsIGlkX05hbWVDb25zdHJhaW50cywgaWRfUEtJWF9PQ1NQX0Jhc2ljLCBpZF9Qb2xpY3lDb25zdHJhaW50cywgaWRfUG9saWN5TWFwcGluZ3MsIGlkX1ByaXZhdGVLZXlVc2FnZVBlcmlvZCwgaWRfUUNTdGF0ZW1lbnRzLCBpZF9TaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcExpc3QsIGlkX1N1YmplY3RBbHROYW1lLCBpZF9TdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcywgaWRfU3ViamVjdEluZm9BY2Nlc3MsIGlkX1N1YmplY3RLZXlJZGVudGlmaWVyLCBpZF9hZCwgaWRfYWRfY2FJc3N1ZXJzLCBpZF9hZF9vY3NwLCBpZF9lQ29udGVudFR5cGVfVFNUSW5mbywgaWRfcGtpeCwgaWRfc2hhMSwgaWRfc2hhMjU2LCBpZF9zaGEzODQsIGlkX3NoYTUxMiwga2RmLCBzZXRFbmdpbmUsIHN0cmluZ1ByZXAsIHZlcmlmeVNDVHNGb3JDZXJ0aWZpY2F0ZSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/pkijs/build/index.es.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/pvtsutils/build/index.js":
/*!***********************************************!*\
  !*** ./node_modules/pvtsutils/build/index.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"(app-pages-browser)/./node_modules/next/dist/compiled/buffer/index.js\")[\"Buffer\"];\n/*!\n * MIT License\n * \n * Copyright (c) 2017-2024 Peculiar Ventures, LLC\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n */\n\n\n\nconst ARRAY_BUFFER_NAME = \"[object ArrayBuffer]\";\nclass BufferSourceConverter {\n    static isArrayBuffer(data) {\n        return Object.prototype.toString.call(data) === ARRAY_BUFFER_NAME;\n    }\n    static toArrayBuffer(data) {\n        if (this.isArrayBuffer(data)) {\n            return data;\n        }\n        if (data.byteLength === data.buffer.byteLength) {\n            return data.buffer;\n        }\n        if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n            return data.buffer;\n        }\n        return this.toUint8Array(data.buffer)\n            .slice(data.byteOffset, data.byteOffset + data.byteLength)\n            .buffer;\n    }\n    static toUint8Array(data) {\n        return this.toView(data, Uint8Array);\n    }\n    static toView(data, type) {\n        if (data.constructor === type) {\n            return data;\n        }\n        if (this.isArrayBuffer(data)) {\n            return new type(data);\n        }\n        if (this.isArrayBufferView(data)) {\n            return new type(data.buffer, data.byteOffset, data.byteLength);\n        }\n        throw new TypeError(\"The provided value is not of type '(ArrayBuffer or ArrayBufferView)'\");\n    }\n    static isBufferSource(data) {\n        return this.isArrayBufferView(data)\n            || this.isArrayBuffer(data);\n    }\n    static isArrayBufferView(data) {\n        return ArrayBuffer.isView(data)\n            || (data && this.isArrayBuffer(data.buffer));\n    }\n    static isEqual(a, b) {\n        const aView = BufferSourceConverter.toUint8Array(a);\n        const bView = BufferSourceConverter.toUint8Array(b);\n        if (aView.length !== bView.byteLength) {\n            return false;\n        }\n        for (let i = 0; i < aView.length; i++) {\n            if (aView[i] !== bView[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static concat(...args) {\n        let buffers;\n        if (Array.isArray(args[0]) && !(args[1] instanceof Function)) {\n            buffers = args[0];\n        }\n        else if (Array.isArray(args[0]) && args[1] instanceof Function) {\n            buffers = args[0];\n        }\n        else {\n            if (args[args.length - 1] instanceof Function) {\n                buffers = args.slice(0, args.length - 1);\n            }\n            else {\n                buffers = args;\n            }\n        }\n        let size = 0;\n        for (const buffer of buffers) {\n            size += buffer.byteLength;\n        }\n        const res = new Uint8Array(size);\n        let offset = 0;\n        for (const buffer of buffers) {\n            const view = this.toUint8Array(buffer);\n            res.set(view, offset);\n            offset += view.length;\n        }\n        if (args[args.length - 1] instanceof Function) {\n            return this.toView(res, args[args.length - 1]);\n        }\n        return res.buffer;\n    }\n}\n\nconst STRING_TYPE = \"string\";\nconst HEX_REGEX = /^[0-9a-f\\s]+$/i;\nconst BASE64_REGEX = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;\nconst BASE64URL_REGEX = /^[a-zA-Z0-9-_]+$/;\nclass Utf8Converter {\n    static fromString(text) {\n        const s = unescape(encodeURIComponent(text));\n        const uintArray = new Uint8Array(s.length);\n        for (let i = 0; i < s.length; i++) {\n            uintArray[i] = s.charCodeAt(i);\n        }\n        return uintArray.buffer;\n    }\n    static toString(buffer) {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        let encodedString = \"\";\n        for (let i = 0; i < buf.length; i++) {\n            encodedString += String.fromCharCode(buf[i]);\n        }\n        const decodedString = decodeURIComponent(escape(encodedString));\n        return decodedString;\n    }\n}\nclass Utf16Converter {\n    static toString(buffer, littleEndian = false) {\n        const arrayBuffer = BufferSourceConverter.toArrayBuffer(buffer);\n        const dataView = new DataView(arrayBuffer);\n        let res = \"\";\n        for (let i = 0; i < arrayBuffer.byteLength; i += 2) {\n            const code = dataView.getUint16(i, littleEndian);\n            res += String.fromCharCode(code);\n        }\n        return res;\n    }\n    static fromString(text, littleEndian = false) {\n        const res = new ArrayBuffer(text.length * 2);\n        const dataView = new DataView(res);\n        for (let i = 0; i < text.length; i++) {\n            dataView.setUint16(i * 2, text.charCodeAt(i), littleEndian);\n        }\n        return res;\n    }\n}\nclass Convert {\n    static isHex(data) {\n        return typeof data === STRING_TYPE\n            && HEX_REGEX.test(data);\n    }\n    static isBase64(data) {\n        return typeof data === STRING_TYPE\n            && BASE64_REGEX.test(data);\n    }\n    static isBase64Url(data) {\n        return typeof data === STRING_TYPE\n            && BASE64URL_REGEX.test(data);\n    }\n    static ToString(buffer, enc = \"utf8\") {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        switch (enc.toLowerCase()) {\n            case \"utf8\":\n                return this.ToUtf8String(buf);\n            case \"binary\":\n                return this.ToBinary(buf);\n            case \"hex\":\n                return this.ToHex(buf);\n            case \"base64\":\n                return this.ToBase64(buf);\n            case \"base64url\":\n                return this.ToBase64Url(buf);\n            case \"utf16le\":\n                return Utf16Converter.toString(buf, true);\n            case \"utf16\":\n            case \"utf16be\":\n                return Utf16Converter.toString(buf);\n            default:\n                throw new Error(`Unknown type of encoding '${enc}'`);\n        }\n    }\n    static FromString(str, enc = \"utf8\") {\n        if (!str) {\n            return new ArrayBuffer(0);\n        }\n        switch (enc.toLowerCase()) {\n            case \"utf8\":\n                return this.FromUtf8String(str);\n            case \"binary\":\n                return this.FromBinary(str);\n            case \"hex\":\n                return this.FromHex(str);\n            case \"base64\":\n                return this.FromBase64(str);\n            case \"base64url\":\n                return this.FromBase64Url(str);\n            case \"utf16le\":\n                return Utf16Converter.fromString(str, true);\n            case \"utf16\":\n            case \"utf16be\":\n                return Utf16Converter.fromString(str);\n            default:\n                throw new Error(`Unknown type of encoding '${enc}'`);\n        }\n    }\n    static ToBase64(buffer) {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        if (typeof btoa !== \"undefined\") {\n            const binary = this.ToString(buf, \"binary\");\n            return btoa(binary);\n        }\n        else {\n            return Buffer.from(buf).toString(\"base64\");\n        }\n    }\n    static FromBase64(base64) {\n        const formatted = this.formatString(base64);\n        if (!formatted) {\n            return new ArrayBuffer(0);\n        }\n        if (!Convert.isBase64(formatted)) {\n            throw new TypeError(\"Argument 'base64Text' is not Base64 encoded\");\n        }\n        if (typeof atob !== \"undefined\") {\n            return this.FromBinary(atob(formatted));\n        }\n        else {\n            return new Uint8Array(Buffer.from(formatted, \"base64\")).buffer;\n        }\n    }\n    static FromBase64Url(base64url) {\n        const formatted = this.formatString(base64url);\n        if (!formatted) {\n            return new ArrayBuffer(0);\n        }\n        if (!Convert.isBase64Url(formatted)) {\n            throw new TypeError(\"Argument 'base64url' is not Base64Url encoded\");\n        }\n        return this.FromBase64(this.Base64Padding(formatted.replace(/\\-/g, \"+\").replace(/\\_/g, \"/\")));\n    }\n    static ToBase64Url(data) {\n        return this.ToBase64(data).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/\\=/g, \"\");\n    }\n    static FromUtf8String(text, encoding = Convert.DEFAULT_UTF8_ENCODING) {\n        switch (encoding) {\n            case \"ascii\":\n                return this.FromBinary(text);\n            case \"utf8\":\n                return Utf8Converter.fromString(text);\n            case \"utf16\":\n            case \"utf16be\":\n                return Utf16Converter.fromString(text);\n            case \"utf16le\":\n            case \"usc2\":\n                return Utf16Converter.fromString(text, true);\n            default:\n                throw new Error(`Unknown type of encoding '${encoding}'`);\n        }\n    }\n    static ToUtf8String(buffer, encoding = Convert.DEFAULT_UTF8_ENCODING) {\n        switch (encoding) {\n            case \"ascii\":\n                return this.ToBinary(buffer);\n            case \"utf8\":\n                return Utf8Converter.toString(buffer);\n            case \"utf16\":\n            case \"utf16be\":\n                return Utf16Converter.toString(buffer);\n            case \"utf16le\":\n            case \"usc2\":\n                return Utf16Converter.toString(buffer, true);\n            default:\n                throw new Error(`Unknown type of encoding '${encoding}'`);\n        }\n    }\n    static FromBinary(text) {\n        const stringLength = text.length;\n        const resultView = new Uint8Array(stringLength);\n        for (let i = 0; i < stringLength; i++) {\n            resultView[i] = text.charCodeAt(i);\n        }\n        return resultView.buffer;\n    }\n    static ToBinary(buffer) {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        let res = \"\";\n        for (let i = 0; i < buf.length; i++) {\n            res += String.fromCharCode(buf[i]);\n        }\n        return res;\n    }\n    static ToHex(buffer) {\n        const buf = BufferSourceConverter.toUint8Array(buffer);\n        let result = \"\";\n        const len = buf.length;\n        for (let i = 0; i < len; i++) {\n            const byte = buf[i];\n            if (byte < 16) {\n                result += \"0\";\n            }\n            result += byte.toString(16);\n        }\n        return result;\n    }\n    static FromHex(hexString) {\n        let formatted = this.formatString(hexString);\n        if (!formatted) {\n            return new ArrayBuffer(0);\n        }\n        if (!Convert.isHex(formatted)) {\n            throw new TypeError(\"Argument 'hexString' is not HEX encoded\");\n        }\n        if (formatted.length % 2) {\n            formatted = `0${formatted}`;\n        }\n        const res = new Uint8Array(formatted.length / 2);\n        for (let i = 0; i < formatted.length; i = i + 2) {\n            const c = formatted.slice(i, i + 2);\n            res[i / 2] = parseInt(c, 16);\n        }\n        return res.buffer;\n    }\n    static ToUtf16String(buffer, littleEndian = false) {\n        return Utf16Converter.toString(buffer, littleEndian);\n    }\n    static FromUtf16String(text, littleEndian = false) {\n        return Utf16Converter.fromString(text, littleEndian);\n    }\n    static Base64Padding(base64) {\n        const padCount = 4 - (base64.length % 4);\n        if (padCount < 4) {\n            for (let i = 0; i < padCount; i++) {\n                base64 += \"=\";\n            }\n        }\n        return base64;\n    }\n    static formatString(data) {\n        return (data === null || data === void 0 ? void 0 : data.replace(/[\\n\\r\\t ]/g, \"\")) || \"\";\n    }\n}\nConvert.DEFAULT_UTF8_ENCODING = \"utf8\";\n\nfunction assign(target, ...sources) {\n    const res = arguments[0];\n    for (let i = 1; i < arguments.length; i++) {\n        const obj = arguments[i];\n        for (const prop in obj) {\n            res[prop] = obj[prop];\n        }\n    }\n    return res;\n}\nfunction combine(...buf) {\n    const totalByteLength = buf.map((item) => item.byteLength).reduce((prev, cur) => prev + cur);\n    const res = new Uint8Array(totalByteLength);\n    let currentPos = 0;\n    buf.map((item) => new Uint8Array(item)).forEach((arr) => {\n        for (const item2 of arr) {\n            res[currentPos++] = item2;\n        }\n    });\n    return res.buffer;\n}\nfunction isEqual(bytes1, bytes2) {\n    if (!(bytes1 && bytes2)) {\n        return false;\n    }\n    if (bytes1.byteLength !== bytes2.byteLength) {\n        return false;\n    }\n    const b1 = new Uint8Array(bytes1);\n    const b2 = new Uint8Array(bytes2);\n    for (let i = 0; i < bytes1.byteLength; i++) {\n        if (b1[i] !== b2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexports.BufferSourceConverter = BufferSourceConverter;\nexports.Convert = Convert;\nexports.assign = assign;\nexports.combine = combine;\nexports.isEqual = isEqual;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9wdnRzdXRpbHMvYnVpbGQvaW5kZXguanMiLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0NBQXdDLEVBQUUsbUJBQW1CLEVBQUUsaUJBQWlCLEVBQUU7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixjQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRCQUE0QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxJQUFJO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsSUFBSTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsTUFBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLE1BQU07QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsU0FBUztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsU0FBUztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVTtBQUN0QztBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGNBQWM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkI7QUFDN0IsZUFBZTtBQUNmLGNBQWM7QUFDZCxlQUFlO0FBQ2YsZUFBZSIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9wdnRzdXRpbHMvYnVpbGQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBNSVQgTGljZW5zZVxuICogXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctMjAyNCBQZWN1bGlhciBWZW50dXJlcywgTExDXG4gKiBcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqIFxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4gKiBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICogXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4gKiBTT0ZUV0FSRS5cbiAqIFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgQVJSQVlfQlVGRkVSX05BTUUgPSBcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI7XG5jbGFzcyBCdWZmZXJTb3VyY2VDb252ZXJ0ZXIge1xuICAgIHN0YXRpYyBpc0FycmF5QnVmZmVyKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkYXRhKSA9PT0gQVJSQVlfQlVGRkVSX05BTUU7XG4gICAgfVxuICAgIHN0YXRpYyB0b0FycmF5QnVmZmVyKGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBcnJheUJ1ZmZlcihkYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEuYnl0ZUxlbmd0aCA9PT0gZGF0YS5idWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhLmJ5dGVPZmZzZXQgPT09IDAgJiYgZGF0YS5ieXRlTGVuZ3RoID09PSBkYXRhLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudG9VaW50OEFycmF5KGRhdGEuYnVmZmVyKVxuICAgICAgICAgICAgLnNsaWNlKGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlT2Zmc2V0ICsgZGF0YS5ieXRlTGVuZ3RoKVxuICAgICAgICAgICAgLmJ1ZmZlcjtcbiAgICB9XG4gICAgc3RhdGljIHRvVWludDhBcnJheShkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvVmlldyhkYXRhLCBVaW50OEFycmF5KTtcbiAgICB9XG4gICAgc3RhdGljIHRvVmlldyhkYXRhLCB0eXBlKSB7XG4gICAgICAgIGlmIChkYXRhLmNvbnN0cnVjdG9yID09PSB0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0FycmF5QnVmZmVyKGRhdGEpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHR5cGUoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdHlwZShkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVMZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgcHJvdmlkZWQgdmFsdWUgaXMgbm90IG9mIHR5cGUgJyhBcnJheUJ1ZmZlciBvciBBcnJheUJ1ZmZlclZpZXcpJ1wiKTtcbiAgICB9XG4gICAgc3RhdGljIGlzQnVmZmVyU291cmNlKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSlcbiAgICAgICAgICAgIHx8IHRoaXMuaXNBcnJheUJ1ZmZlcihkYXRhKTtcbiAgICB9XG4gICAgc3RhdGljIGlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKVxuICAgICAgICAgICAgfHwgKGRhdGEgJiYgdGhpcy5pc0FycmF5QnVmZmVyKGRhdGEuYnVmZmVyKSk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0VxdWFsKGEsIGIpIHtcbiAgICAgICAgY29uc3QgYVZpZXcgPSBCdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9VaW50OEFycmF5KGEpO1xuICAgICAgICBjb25zdCBiVmlldyA9IEJ1ZmZlclNvdXJjZUNvbnZlcnRlci50b1VpbnQ4QXJyYXkoYik7XG4gICAgICAgIGlmIChhVmlldy5sZW5ndGggIT09IGJWaWV3LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFWaWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYVZpZXdbaV0gIT09IGJWaWV3W2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBzdGF0aWMgY29uY2F0KC4uLmFyZ3MpIHtcbiAgICAgICAgbGV0IGJ1ZmZlcnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pICYmICEoYXJnc1sxXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkge1xuICAgICAgICAgICAgYnVmZmVycyA9IGFyZ3NbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiBhcmdzWzFdIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGJ1ZmZlcnMgPSBhcmdzWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGFyZ3NbYXJncy5sZW5ndGggLSAxXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVycyA9IGFyZ3Muc2xpY2UoMCwgYXJncy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcnMgPSBhcmdzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBzaXplID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBidWZmZXIgb2YgYnVmZmVycykge1xuICAgICAgICAgICAgc2l6ZSArPSBidWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXMgPSBuZXcgVWludDhBcnJheShzaXplKTtcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgYnVmZmVyIG9mIGJ1ZmZlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnRvVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICAgICAgcmVzLnNldCh2aWV3LCBvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHZpZXcubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9WaWV3KHJlcywgYXJnc1thcmdzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzLmJ1ZmZlcjtcbiAgICB9XG59XG5cbmNvbnN0IFNUUklOR19UWVBFID0gXCJzdHJpbmdcIjtcbmNvbnN0IEhFWF9SRUdFWCA9IC9eWzAtOWEtZlxcc10rJC9pO1xuY29uc3QgQkFTRTY0X1JFR0VYID0gL14oPzpbQS1aYS16MC05Ky9dezR9KSooPzpbQS1aYS16MC05Ky9dezJ9PT18W0EtWmEtejAtOSsvXXszfT0pPyQvO1xuY29uc3QgQkFTRTY0VVJMX1JFR0VYID0gL15bYS16QS1aMC05LV9dKyQvO1xuY2xhc3MgVXRmOENvbnZlcnRlciB7XG4gICAgc3RhdGljIGZyb21TdHJpbmcodGV4dCkge1xuICAgICAgICBjb25zdCBzID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHRleHQpKTtcbiAgICAgICAgY29uc3QgdWludEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHVpbnRBcnJheVtpXSA9IHMuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdWludEFycmF5LmJ1ZmZlcjtcbiAgICB9XG4gICAgc3RhdGljIHRvU3RyaW5nKGJ1ZmZlcikge1xuICAgICAgICBjb25zdCBidWYgPSBCdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9VaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGxldCBlbmNvZGVkU3RyaW5nID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWYubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGVuY29kZWRTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlY29kZWRTdHJpbmcgPSBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGVuY29kZWRTdHJpbmcpKTtcbiAgICAgICAgcmV0dXJuIGRlY29kZWRTdHJpbmc7XG4gICAgfVxufVxuY2xhc3MgVXRmMTZDb252ZXJ0ZXIge1xuICAgIHN0YXRpYyB0b1N0cmluZyhidWZmZXIsIGxpdHRsZUVuZGlhbiA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gQnVmZmVyU291cmNlQ29udmVydGVyLnRvQXJyYXlCdWZmZXIoYnVmZmVyKTtcbiAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIpO1xuICAgICAgICBsZXQgcmVzID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheUJ1ZmZlci5ieXRlTGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBkYXRhVmlldy5nZXRVaW50MTYoaSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3RyaW5nKHRleHQsIGxpdHRsZUVuZGlhbiA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IG5ldyBBcnJheUJ1ZmZlcih0ZXh0Lmxlbmd0aCAqIDIpO1xuICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhyZXMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRhdGFWaWV3LnNldFVpbnQxNihpICogMiwgdGV4dC5jaGFyQ29kZUF0KGkpLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuY2xhc3MgQ29udmVydCB7XG4gICAgc3RhdGljIGlzSGV4KGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSBTVFJJTkdfVFlQRVxuICAgICAgICAgICAgJiYgSEVYX1JFR0VYLnRlc3QoZGF0YSk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0Jhc2U2NChkYXRhKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gU1RSSU5HX1RZUEVcbiAgICAgICAgICAgICYmIEJBU0U2NF9SRUdFWC50ZXN0KGRhdGEpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNCYXNlNjRVcmwoZGF0YSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGRhdGEgPT09IFNUUklOR19UWVBFXG4gICAgICAgICAgICAmJiBCQVNFNjRVUkxfUkVHRVgudGVzdChkYXRhKTtcbiAgICB9XG4gICAgc3RhdGljIFRvU3RyaW5nKGJ1ZmZlciwgZW5jID0gXCJ1dGY4XCIpIHtcbiAgICAgICAgY29uc3QgYnVmID0gQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICBzd2l0Y2ggKGVuYy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwidXRmOFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLlRvVXRmOFN0cmluZyhidWYpO1xuICAgICAgICAgICAgY2FzZSBcImJpbmFyeVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLlRvQmluYXJ5KGJ1Zik7XG4gICAgICAgICAgICBjYXNlIFwiaGV4XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuVG9IZXgoYnVmKTtcbiAgICAgICAgICAgIGNhc2UgXCJiYXNlNjRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Ub0Jhc2U2NChidWYpO1xuICAgICAgICAgICAgY2FzZSBcImJhc2U2NHVybFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLlRvQmFzZTY0VXJsKGJ1Zik7XG4gICAgICAgICAgICBjYXNlIFwidXRmMTZsZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBVdGYxNkNvbnZlcnRlci50b1N0cmluZyhidWYsIHRydWUpO1xuICAgICAgICAgICAgY2FzZSBcInV0ZjE2XCI6XG4gICAgICAgICAgICBjYXNlIFwidXRmMTZiZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBVdGYxNkNvbnZlcnRlci50b1N0cmluZyhidWYpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdHlwZSBvZiBlbmNvZGluZyAnJHtlbmN9J2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBGcm9tU3RyaW5nKHN0ciwgZW5jID0gXCJ1dGY4XCIpIHtcbiAgICAgICAgaWYgKCFzdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChlbmMudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcInV0ZjhcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Gcm9tVXRmOFN0cmluZyhzdHIpO1xuICAgICAgICAgICAgY2FzZSBcImJpbmFyeVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkZyb21CaW5hcnkoc3RyKTtcbiAgICAgICAgICAgIGNhc2UgXCJoZXhcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Gcm9tSGV4KHN0cik7XG4gICAgICAgICAgICBjYXNlIFwiYmFzZTY0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRnJvbUJhc2U2NChzdHIpO1xuICAgICAgICAgICAgY2FzZSBcImJhc2U2NHVybFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkZyb21CYXNlNjRVcmwoc3RyKTtcbiAgICAgICAgICAgIGNhc2UgXCJ1dGYxNmxlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFV0ZjE2Q29udmVydGVyLmZyb21TdHJpbmcoc3RyLCB0cnVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJ1dGYxNlwiOlxuICAgICAgICAgICAgY2FzZSBcInV0ZjE2YmVcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gVXRmMTZDb252ZXJ0ZXIuZnJvbVN0cmluZyhzdHIpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdHlwZSBvZiBlbmNvZGluZyAnJHtlbmN9J2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBUb0Jhc2U2NChidWZmZXIpIHtcbiAgICAgICAgY29uc3QgYnVmID0gQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICBpZiAodHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGJpbmFyeSA9IHRoaXMuVG9TdHJpbmcoYnVmLCBcImJpbmFyeVwiKTtcbiAgICAgICAgICAgIHJldHVybiBidG9hKGJpbmFyeSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYnVmKS50b1N0cmluZyhcImJhc2U2NFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgRnJvbUJhc2U2NChiYXNlNjQpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRTdHJpbmcoYmFzZTY0KTtcbiAgICAgICAgaWYgKCFmb3JtYXR0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFDb252ZXJ0LmlzQmFzZTY0KGZvcm1hdHRlZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCAnYmFzZTY0VGV4dCcgaXMgbm90IEJhc2U2NCBlbmNvZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYXRvYiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuRnJvbUJpbmFyeShhdG9iKGZvcm1hdHRlZCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KEJ1ZmZlci5mcm9tKGZvcm1hdHRlZCwgXCJiYXNlNjRcIikpLmJ1ZmZlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgRnJvbUJhc2U2NFVybChiYXNlNjR1cmwpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRTdHJpbmcoYmFzZTY0dXJsKTtcbiAgICAgICAgaWYgKCFmb3JtYXR0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFDb252ZXJ0LmlzQmFzZTY0VXJsKGZvcm1hdHRlZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCAnYmFzZTY0dXJsJyBpcyBub3QgQmFzZTY0VXJsIGVuY29kZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuRnJvbUJhc2U2NCh0aGlzLkJhc2U2NFBhZGRpbmcoZm9ybWF0dGVkLnJlcGxhY2UoL1xcLS9nLCBcIitcIikucmVwbGFjZSgvXFxfL2csIFwiL1wiKSkpO1xuICAgIH1cbiAgICBzdGF0aWMgVG9CYXNlNjRVcmwoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ub0Jhc2U2NChkYXRhKS5yZXBsYWNlKC9cXCsvZywgXCItXCIpLnJlcGxhY2UoL1xcLy9nLCBcIl9cIikucmVwbGFjZSgvXFw9L2csIFwiXCIpO1xuICAgIH1cbiAgICBzdGF0aWMgRnJvbVV0ZjhTdHJpbmcodGV4dCwgZW5jb2RpbmcgPSBDb252ZXJ0LkRFRkFVTFRfVVRGOF9FTkNPRElORykge1xuICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICAgICAgICBjYXNlIFwiYXNjaWlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Gcm9tQmluYXJ5KHRleHQpO1xuICAgICAgICAgICAgY2FzZSBcInV0ZjhcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gVXRmOENvbnZlcnRlci5mcm9tU3RyaW5nKHRleHQpO1xuICAgICAgICAgICAgY2FzZSBcInV0ZjE2XCI6XG4gICAgICAgICAgICBjYXNlIFwidXRmMTZiZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBVdGYxNkNvbnZlcnRlci5mcm9tU3RyaW5nKHRleHQpO1xuICAgICAgICAgICAgY2FzZSBcInV0ZjE2bGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ1c2MyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFV0ZjE2Q29udmVydGVyLmZyb21TdHJpbmcodGV4dCwgdHJ1ZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biB0eXBlIG9mIGVuY29kaW5nICcke2VuY29kaW5nfSdgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgVG9VdGY4U3RyaW5nKGJ1ZmZlciwgZW5jb2RpbmcgPSBDb252ZXJ0LkRFRkFVTFRfVVRGOF9FTkNPRElORykge1xuICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICAgICAgICBjYXNlIFwiYXNjaWlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Ub0JpbmFyeShidWZmZXIpO1xuICAgICAgICAgICAgY2FzZSBcInV0ZjhcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gVXRmOENvbnZlcnRlci50b1N0cmluZyhidWZmZXIpO1xuICAgICAgICAgICAgY2FzZSBcInV0ZjE2XCI6XG4gICAgICAgICAgICBjYXNlIFwidXRmMTZiZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBVdGYxNkNvbnZlcnRlci50b1N0cmluZyhidWZmZXIpO1xuICAgICAgICAgICAgY2FzZSBcInV0ZjE2bGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ1c2MyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFV0ZjE2Q29udmVydGVyLnRvU3RyaW5nKGJ1ZmZlciwgdHJ1ZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biB0eXBlIG9mIGVuY29kaW5nICcke2VuY29kaW5nfSdgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgRnJvbUJpbmFyeSh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHN0cmluZ0xlbmd0aCA9IHRleHQubGVuZ3RoO1xuICAgICAgICBjb25zdCByZXN1bHRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoc3RyaW5nTGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmdMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0Vmlld1tpXSA9IHRleHQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0Vmlldy5idWZmZXI7XG4gICAgfVxuICAgIHN0YXRpYyBUb0JpbmFyeShidWZmZXIpIHtcbiAgICAgICAgY29uc3QgYnVmID0gQnVmZmVyU291cmNlQ29udmVydGVyLnRvVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICBsZXQgcmVzID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWYubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgc3RhdGljIFRvSGV4KGJ1ZmZlcikge1xuICAgICAgICBjb25zdCBidWYgPSBCdWZmZXJTb3VyY2VDb252ZXJ0ZXIudG9VaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBjb25zdCBsZW4gPSBidWYubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBieXRlID0gYnVmW2ldO1xuICAgICAgICAgICAgaWYgKGJ5dGUgPCAxNikge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIjBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCArPSBieXRlLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBzdGF0aWMgRnJvbUhleChoZXhTdHJpbmcpIHtcbiAgICAgICAgbGV0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0U3RyaW5nKGhleFN0cmluZyk7XG4gICAgICAgIGlmICghZm9ybWF0dGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghQ29udmVydC5pc0hleChmb3JtYXR0ZWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgJ2hleFN0cmluZycgaXMgbm90IEhFWCBlbmNvZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXR0ZWQubGVuZ3RoICUgMikge1xuICAgICAgICAgICAgZm9ybWF0dGVkID0gYDAke2Zvcm1hdHRlZH1gO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IG5ldyBVaW50OEFycmF5KGZvcm1hdHRlZC5sZW5ndGggLyAyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtYXR0ZWQubGVuZ3RoOyBpID0gaSArIDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBmb3JtYXR0ZWQuc2xpY2UoaSwgaSArIDIpO1xuICAgICAgICAgICAgcmVzW2kgLyAyXSA9IHBhcnNlSW50KGMsIDE2KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzLmJ1ZmZlcjtcbiAgICB9XG4gICAgc3RhdGljIFRvVXRmMTZTdHJpbmcoYnVmZmVyLCBsaXR0bGVFbmRpYW4gPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gVXRmMTZDb252ZXJ0ZXIudG9TdHJpbmcoYnVmZmVyLCBsaXR0bGVFbmRpYW4pO1xuICAgIH1cbiAgICBzdGF0aWMgRnJvbVV0ZjE2U3RyaW5nKHRleHQsIGxpdHRsZUVuZGlhbiA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBVdGYxNkNvbnZlcnRlci5mcm9tU3RyaW5nKHRleHQsIGxpdHRsZUVuZGlhbik7XG4gICAgfVxuICAgIHN0YXRpYyBCYXNlNjRQYWRkaW5nKGJhc2U2NCkge1xuICAgICAgICBjb25zdCBwYWRDb3VudCA9IDQgLSAoYmFzZTY0Lmxlbmd0aCAlIDQpO1xuICAgICAgICBpZiAocGFkQ291bnQgPCA0KSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZENvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBiYXNlNjQgKz0gXCI9XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2U2NDtcbiAgICB9XG4gICAgc3RhdGljIGZvcm1hdFN0cmluZyhkYXRhKSB7XG4gICAgICAgIHJldHVybiAoZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnJlcGxhY2UoL1tcXG5cXHJcXHQgXS9nLCBcIlwiKSkgfHwgXCJcIjtcbiAgICB9XG59XG5Db252ZXJ0LkRFRkFVTFRfVVRGOF9FTkNPRElORyA9IFwidXRmOFwiO1xuXG5mdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCAuLi5zb3VyY2VzKSB7XG4gICAgY29uc3QgcmVzID0gYXJndW1lbnRzWzBdO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgcmVzW3Byb3BdID0gb2JqW3Byb3BdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBjb21iaW5lKC4uLmJ1Zikge1xuICAgIGNvbnN0IHRvdGFsQnl0ZUxlbmd0aCA9IGJ1Zi5tYXAoKGl0ZW0pID0+IGl0ZW0uYnl0ZUxlbmd0aCkucmVkdWNlKChwcmV2LCBjdXIpID0+IHByZXYgKyBjdXIpO1xuICAgIGNvbnN0IHJlcyA9IG5ldyBVaW50OEFycmF5KHRvdGFsQnl0ZUxlbmd0aCk7XG4gICAgbGV0IGN1cnJlbnRQb3MgPSAwO1xuICAgIGJ1Zi5tYXAoKGl0ZW0pID0+IG5ldyBVaW50OEFycmF5KGl0ZW0pKS5mb3JFYWNoKChhcnIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtMiBvZiBhcnIpIHtcbiAgICAgICAgICAgIHJlc1tjdXJyZW50UG9zKytdID0gaXRlbTI7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLmJ1ZmZlcjtcbn1cbmZ1bmN0aW9uIGlzRXF1YWwoYnl0ZXMxLCBieXRlczIpIHtcbiAgICBpZiAoIShieXRlczEgJiYgYnl0ZXMyKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChieXRlczEuYnl0ZUxlbmd0aCAhPT0gYnl0ZXMyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBiMSA9IG5ldyBVaW50OEFycmF5KGJ5dGVzMSk7XG4gICAgY29uc3QgYjIgPSBuZXcgVWludDhBcnJheShieXRlczIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMxLmJ5dGVMZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYjFbaV0gIT09IGIyW2ldKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydHMuQnVmZmVyU291cmNlQ29udmVydGVyID0gQnVmZmVyU291cmNlQ29udmVydGVyO1xuZXhwb3J0cy5Db252ZXJ0ID0gQ29udmVydDtcbmV4cG9ydHMuYXNzaWduID0gYXNzaWduO1xuZXhwb3J0cy5jb21iaW5lID0gY29tYmluZTtcbmV4cG9ydHMuaXNFcXVhbCA9IGlzRXF1YWw7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/pvtsutils/build/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/pvutils/build/utils.es.js":
/*!************************************************!*\
  !*** ./node_modules/pvutils/build/utils.es.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   arrayBufferToString: () => (/* binding */ arrayBufferToString),\n/* harmony export */   bufferToHexCodes: () => (/* binding */ bufferToHexCodes),\n/* harmony export */   checkBufferParams: () => (/* binding */ checkBufferParams),\n/* harmony export */   clearProps: () => (/* binding */ clearProps),\n/* harmony export */   fromBase64: () => (/* binding */ fromBase64),\n/* harmony export */   getParametersValue: () => (/* binding */ getParametersValue),\n/* harmony export */   getUTCDate: () => (/* binding */ getUTCDate),\n/* harmony export */   isEqualBuffer: () => (/* binding */ isEqualBuffer),\n/* harmony export */   nearestPowerOf2: () => (/* binding */ nearestPowerOf2),\n/* harmony export */   padNumber: () => (/* binding */ padNumber),\n/* harmony export */   stringToArrayBuffer: () => (/* binding */ stringToArrayBuffer),\n/* harmony export */   toBase64: () => (/* binding */ toBase64),\n/* harmony export */   utilConcatBuf: () => (/* binding */ utilConcatBuf),\n/* harmony export */   utilConcatView: () => (/* binding */ utilConcatView),\n/* harmony export */   utilDecodeTC: () => (/* binding */ utilDecodeTC),\n/* harmony export */   utilEncodeTC: () => (/* binding */ utilEncodeTC),\n/* harmony export */   utilFromBase: () => (/* binding */ utilFromBase),\n/* harmony export */   utilToBase: () => (/* binding */ utilToBase)\n/* harmony export */ });\n/*!\n Copyright (c) Peculiar Ventures, LLC\n*/\n\nfunction getUTCDate(date) {\r\n    return new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n}\r\nfunction getParametersValue(parameters, name, defaultValue) {\r\n    var _a;\r\n    if ((parameters instanceof Object) === false) {\r\n        return defaultValue;\r\n    }\r\n    return (_a = parameters[name]) !== null && _a !== void 0 ? _a : defaultValue;\r\n}\r\nfunction bufferToHexCodes(inputBuffer, inputOffset = 0, inputLength = (inputBuffer.byteLength - inputOffset), insertSpace = false) {\r\n    let result = \"\";\r\n    for (const item of (new Uint8Array(inputBuffer, inputOffset, inputLength))) {\r\n        const str = item.toString(16).toUpperCase();\r\n        if (str.length === 1) {\r\n            result += \"0\";\r\n        }\r\n        result += str;\r\n        if (insertSpace) {\r\n            result += \" \";\r\n        }\r\n    }\r\n    return result.trim();\r\n}\r\nfunction checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength) {\r\n    if (!(inputBuffer instanceof ArrayBuffer)) {\r\n        baseBlock.error = \"Wrong parameter: inputBuffer must be \\\"ArrayBuffer\\\"\";\r\n        return false;\r\n    }\r\n    if (!inputBuffer.byteLength) {\r\n        baseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\r\n        return false;\r\n    }\r\n    if (inputOffset < 0) {\r\n        baseBlock.error = \"Wrong parameter: inputOffset less than zero\";\r\n        return false;\r\n    }\r\n    if (inputLength < 0) {\r\n        baseBlock.error = \"Wrong parameter: inputLength less than zero\";\r\n        return false;\r\n    }\r\n    if ((inputBuffer.byteLength - inputOffset - inputLength) < 0) {\r\n        baseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction utilFromBase(inputBuffer, inputBase) {\r\n    let result = 0;\r\n    if (inputBuffer.length === 1) {\r\n        return inputBuffer[0];\r\n    }\r\n    for (let i = (inputBuffer.length - 1); i >= 0; i--) {\r\n        result += inputBuffer[(inputBuffer.length - 1) - i] * Math.pow(2, inputBase * i);\r\n    }\r\n    return result;\r\n}\r\nfunction utilToBase(value, base, reserved = (-1)) {\r\n    const internalReserved = reserved;\r\n    let internalValue = value;\r\n    let result = 0;\r\n    let biggest = Math.pow(2, base);\r\n    for (let i = 1; i < 8; i++) {\r\n        if (value < biggest) {\r\n            let retBuf;\r\n            if (internalReserved < 0) {\r\n                retBuf = new ArrayBuffer(i);\r\n                result = i;\r\n            }\r\n            else {\r\n                if (internalReserved < i) {\r\n                    return (new ArrayBuffer(0));\r\n                }\r\n                retBuf = new ArrayBuffer(internalReserved);\r\n                result = internalReserved;\r\n            }\r\n            const retView = new Uint8Array(retBuf);\r\n            for (let j = (i - 1); j >= 0; j--) {\r\n                const basis = Math.pow(2, j * base);\r\n                retView[result - j - 1] = Math.floor(internalValue / basis);\r\n                internalValue -= (retView[result - j - 1]) * basis;\r\n            }\r\n            return retBuf;\r\n        }\r\n        biggest *= Math.pow(2, base);\r\n    }\r\n    return new ArrayBuffer(0);\r\n}\r\nfunction utilConcatBuf(...buffers) {\r\n    let outputLength = 0;\r\n    let prevLength = 0;\r\n    for (const buffer of buffers) {\r\n        outputLength += buffer.byteLength;\r\n    }\r\n    const retBuf = new ArrayBuffer(outputLength);\r\n    const retView = new Uint8Array(retBuf);\r\n    for (const buffer of buffers) {\r\n        retView.set(new Uint8Array(buffer), prevLength);\r\n        prevLength += buffer.byteLength;\r\n    }\r\n    return retBuf;\r\n}\r\nfunction utilConcatView(...views) {\r\n    let outputLength = 0;\r\n    let prevLength = 0;\r\n    for (const view of views) {\r\n        outputLength += view.length;\r\n    }\r\n    const retBuf = new ArrayBuffer(outputLength);\r\n    const retView = new Uint8Array(retBuf);\r\n    for (const view of views) {\r\n        retView.set(view, prevLength);\r\n        prevLength += view.length;\r\n    }\r\n    return retView;\r\n}\r\nfunction utilDecodeTC() {\r\n    const buf = new Uint8Array(this.valueHex);\r\n    if (this.valueHex.byteLength >= 2) {\r\n        const condition1 = (buf[0] === 0xFF) && (buf[1] & 0x80);\r\n        const condition2 = (buf[0] === 0x00) && ((buf[1] & 0x80) === 0x00);\r\n        if (condition1 || condition2) {\r\n            this.warnings.push(\"Needlessly long format\");\r\n        }\r\n    }\r\n    const bigIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n    const bigIntView = new Uint8Array(bigIntBuffer);\r\n    for (let i = 0; i < this.valueHex.byteLength; i++) {\r\n        bigIntView[i] = 0;\r\n    }\r\n    bigIntView[0] = (buf[0] & 0x80);\r\n    const bigInt = utilFromBase(bigIntView, 8);\r\n    const smallIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n    const smallIntView = new Uint8Array(smallIntBuffer);\r\n    for (let j = 0; j < this.valueHex.byteLength; j++) {\r\n        smallIntView[j] = buf[j];\r\n    }\r\n    smallIntView[0] &= 0x7F;\r\n    const smallInt = utilFromBase(smallIntView, 8);\r\n    return (smallInt - bigInt);\r\n}\r\nfunction utilEncodeTC(value) {\r\n    const modValue = (value < 0) ? (value * (-1)) : value;\r\n    let bigInt = 128;\r\n    for (let i = 1; i < 8; i++) {\r\n        if (modValue <= bigInt) {\r\n            if (value < 0) {\r\n                const smallInt = bigInt - modValue;\r\n                const retBuf = utilToBase(smallInt, 8, i);\r\n                const retView = new Uint8Array(retBuf);\r\n                retView[0] |= 0x80;\r\n                return retBuf;\r\n            }\r\n            let retBuf = utilToBase(modValue, 8, i);\r\n            let retView = new Uint8Array(retBuf);\r\n            if (retView[0] & 0x80) {\r\n                const tempBuf = retBuf.slice(0);\r\n                const tempView = new Uint8Array(tempBuf);\r\n                retBuf = new ArrayBuffer(retBuf.byteLength + 1);\r\n                retView = new Uint8Array(retBuf);\r\n                for (let k = 0; k < tempBuf.byteLength; k++) {\r\n                    retView[k + 1] = tempView[k];\r\n                }\r\n                retView[0] = 0x00;\r\n            }\r\n            return retBuf;\r\n        }\r\n        bigInt *= Math.pow(2, 8);\r\n    }\r\n    return (new ArrayBuffer(0));\r\n}\r\nfunction isEqualBuffer(inputBuffer1, inputBuffer2) {\r\n    if (inputBuffer1.byteLength !== inputBuffer2.byteLength) {\r\n        return false;\r\n    }\r\n    const view1 = new Uint8Array(inputBuffer1);\r\n    const view2 = new Uint8Array(inputBuffer2);\r\n    for (let i = 0; i < view1.length; i++) {\r\n        if (view1[i] !== view2[i]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction padNumber(inputNumber, fullLength) {\r\n    const str = inputNumber.toString(10);\r\n    if (fullLength < str.length) {\r\n        return \"\";\r\n    }\r\n    const dif = fullLength - str.length;\r\n    const padding = new Array(dif);\r\n    for (let i = 0; i < dif; i++) {\r\n        padding[i] = \"0\";\r\n    }\r\n    const paddingString = padding.join(\"\");\r\n    return paddingString.concat(str);\r\n}\r\nconst base64Template = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\nconst base64UrlTemplate = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\";\r\nfunction toBase64(input, useUrlTemplate = false, skipPadding = false, skipLeadingZeros = false) {\r\n    let i = 0;\r\n    let flag1 = 0;\r\n    let flag2 = 0;\r\n    let output = \"\";\r\n    const template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n    if (skipLeadingZeros) {\r\n        let nonZeroPosition = 0;\r\n        for (let i = 0; i < input.length; i++) {\r\n            if (input.charCodeAt(i) !== 0) {\r\n                nonZeroPosition = i;\r\n                break;\r\n            }\r\n        }\r\n        input = input.slice(nonZeroPosition);\r\n    }\r\n    while (i < input.length) {\r\n        const chr1 = input.charCodeAt(i++);\r\n        if (i >= input.length) {\r\n            flag1 = 1;\r\n        }\r\n        const chr2 = input.charCodeAt(i++);\r\n        if (i >= input.length) {\r\n            flag2 = 1;\r\n        }\r\n        const chr3 = input.charCodeAt(i++);\r\n        const enc1 = chr1 >> 2;\r\n        const enc2 = ((chr1 & 0x03) << 4) | (chr2 >> 4);\r\n        let enc3 = ((chr2 & 0x0F) << 2) | (chr3 >> 6);\r\n        let enc4 = chr3 & 0x3F;\r\n        if (flag1 === 1) {\r\n            enc3 = enc4 = 64;\r\n        }\r\n        else {\r\n            if (flag2 === 1) {\r\n                enc4 = 64;\r\n            }\r\n        }\r\n        if (skipPadding) {\r\n            if (enc3 === 64) {\r\n                output += `${template.charAt(enc1)}${template.charAt(enc2)}`;\r\n            }\r\n            else {\r\n                if (enc4 === 64) {\r\n                    output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}`;\r\n                }\r\n                else {\r\n                    output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n        }\r\n    }\r\n    return output;\r\n}\r\nfunction fromBase64(input, useUrlTemplate = false, cutTailZeros = false) {\r\n    const template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n    function indexOf(toSearch) {\r\n        for (let i = 0; i < 64; i++) {\r\n            if (template.charAt(i) === toSearch)\r\n                return i;\r\n        }\r\n        return 64;\r\n    }\r\n    function test(incoming) {\r\n        return ((incoming === 64) ? 0x00 : incoming);\r\n    }\r\n    let i = 0;\r\n    let output = \"\";\r\n    while (i < input.length) {\r\n        const enc1 = indexOf(input.charAt(i++));\r\n        const enc2 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const enc3 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const enc4 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const chr1 = (test(enc1) << 2) | (test(enc2) >> 4);\r\n        const chr2 = ((test(enc2) & 0x0F) << 4) | (test(enc3) >> 2);\r\n        const chr3 = ((test(enc3) & 0x03) << 6) | test(enc4);\r\n        output += String.fromCharCode(chr1);\r\n        if (enc3 !== 64) {\r\n            output += String.fromCharCode(chr2);\r\n        }\r\n        if (enc4 !== 64) {\r\n            output += String.fromCharCode(chr3);\r\n        }\r\n    }\r\n    if (cutTailZeros) {\r\n        const outputLength = output.length;\r\n        let nonZeroStart = (-1);\r\n        for (let i = (outputLength - 1); i >= 0; i--) {\r\n            if (output.charCodeAt(i) !== 0) {\r\n                nonZeroStart = i;\r\n                break;\r\n            }\r\n        }\r\n        if (nonZeroStart !== (-1)) {\r\n            output = output.slice(0, nonZeroStart + 1);\r\n        }\r\n        else {\r\n            output = \"\";\r\n        }\r\n    }\r\n    return output;\r\n}\r\nfunction arrayBufferToString(buffer) {\r\n    let resultString = \"\";\r\n    const view = new Uint8Array(buffer);\r\n    for (const element of view) {\r\n        resultString += String.fromCharCode(element);\r\n    }\r\n    return resultString;\r\n}\r\nfunction stringToArrayBuffer(str) {\r\n    const stringLength = str.length;\r\n    const resultBuffer = new ArrayBuffer(stringLength);\r\n    const resultView = new Uint8Array(resultBuffer);\r\n    for (let i = 0; i < stringLength; i++) {\r\n        resultView[i] = str.charCodeAt(i);\r\n    }\r\n    return resultBuffer;\r\n}\r\nconst log2 = Math.log(2);\r\nfunction nearestPowerOf2(length) {\r\n    const base = (Math.log(length) / log2);\r\n    const floor = Math.floor(base);\r\n    const round = Math.round(base);\r\n    return ((floor === round) ? floor : round);\r\n}\r\nfunction clearProps(object, propsArray) {\r\n    for (const prop of propsArray) {\r\n        delete object[prop];\r\n    }\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9wdnV0aWxzL2J1aWxkL3V0aWxzLmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsUUFBUTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhCQUE4QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msd0JBQXdCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsc0JBQXNCLEVBQUUsc0JBQXNCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0I7QUFDdkc7QUFDQTtBQUNBLGlDQUFpQyxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0I7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCLEVBQUUsc0JBQXNCO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxRQUFRO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUUyUiIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy9wdnV0aWxzL2J1aWxkL3V0aWxzLmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuIENvcHlyaWdodCAoYykgUGVjdWxpYXIgVmVudHVyZXMsIExMQ1xuKi9cblxuZnVuY3Rpb24gZ2V0VVRDRGF0ZShkYXRlKSB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyAoZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApKTtcclxufVxyXG5mdW5jdGlvbiBnZXRQYXJhbWV0ZXJzVmFsdWUocGFyYW1ldGVycywgbmFtZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBpZiAoKHBhcmFtZXRlcnMgaW5zdGFuY2VvZiBPYmplY3QpID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKF9hID0gcGFyYW1ldGVyc1tuYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZGVmYXVsdFZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIGJ1ZmZlclRvSGV4Q29kZXMoaW5wdXRCdWZmZXIsIGlucHV0T2Zmc2V0ID0gMCwgaW5wdXRMZW5ndGggPSAoaW5wdXRCdWZmZXIuYnl0ZUxlbmd0aCAtIGlucHV0T2Zmc2V0KSwgaW5zZXJ0U3BhY2UgPSBmYWxzZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgKG5ldyBVaW50OEFycmF5KGlucHV0QnVmZmVyLCBpbnB1dE9mZnNldCwgaW5wdXRMZW5ndGgpKSkge1xyXG4gICAgICAgIGNvbnN0IHN0ciA9IGl0ZW0udG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IFwiMFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXN1bHQgKz0gc3RyO1xyXG4gICAgICAgIGlmIChpbnNlcnRTcGFjZSkge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gXCIgXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdC50cmltKCk7XHJcbn1cclxuZnVuY3Rpb24gY2hlY2tCdWZmZXJQYXJhbXMoYmFzZUJsb2NrLCBpbnB1dEJ1ZmZlciwgaW5wdXRPZmZzZXQsIGlucHV0TGVuZ3RoKSB7XHJcbiAgICBpZiAoIShpbnB1dEJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xyXG4gICAgICAgIGJhc2VCbG9jay5lcnJvciA9IFwiV3JvbmcgcGFyYW1ldGVyOiBpbnB1dEJ1ZmZlciBtdXN0IGJlIFxcXCJBcnJheUJ1ZmZlclxcXCJcIjtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlucHV0QnVmZmVyLmJ5dGVMZW5ndGgpIHtcclxuICAgICAgICBiYXNlQmxvY2suZXJyb3IgPSBcIldyb25nIHBhcmFtZXRlcjogaW5wdXRCdWZmZXIgaGFzIHplcm8gbGVuZ3RoXCI7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKGlucHV0T2Zmc2V0IDwgMCkge1xyXG4gICAgICAgIGJhc2VCbG9jay5lcnJvciA9IFwiV3JvbmcgcGFyYW1ldGVyOiBpbnB1dE9mZnNldCBsZXNzIHRoYW4gemVyb1wiO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChpbnB1dExlbmd0aCA8IDApIHtcclxuICAgICAgICBiYXNlQmxvY2suZXJyb3IgPSBcIldyb25nIHBhcmFtZXRlcjogaW5wdXRMZW5ndGggbGVzcyB0aGFuIHplcm9cIjtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoKGlucHV0QnVmZmVyLmJ5dGVMZW5ndGggLSBpbnB1dE9mZnNldCAtIGlucHV0TGVuZ3RoKSA8IDApIHtcclxuICAgICAgICBiYXNlQmxvY2suZXJyb3IgPSBcIkVuZCBvZiBpbnB1dCByZWFjaGVkIGJlZm9yZSBtZXNzYWdlIHdhcyBmdWxseSBkZWNvZGVkIChpbmNvbnNpc3RlbnQgb2Zmc2V0IGFuZCBsZW5ndGggdmFsdWVzKVwiO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIHV0aWxGcm9tQmFzZShpbnB1dEJ1ZmZlciwgaW5wdXRCYXNlKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gMDtcclxuICAgIGlmIChpbnB1dEJ1ZmZlci5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gaW5wdXRCdWZmZXJbMF07XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gKGlucHV0QnVmZmVyLmxlbmd0aCAtIDEpOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIHJlc3VsdCArPSBpbnB1dEJ1ZmZlclsoaW5wdXRCdWZmZXIubGVuZ3RoIC0gMSkgLSBpXSAqIE1hdGgucG93KDIsIGlucHV0QmFzZSAqIGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiB1dGlsVG9CYXNlKHZhbHVlLCBiYXNlLCByZXNlcnZlZCA9ICgtMSkpIHtcclxuICAgIGNvbnN0IGludGVybmFsUmVzZXJ2ZWQgPSByZXNlcnZlZDtcclxuICAgIGxldCBpbnRlcm5hbFZhbHVlID0gdmFsdWU7XHJcbiAgICBsZXQgcmVzdWx0ID0gMDtcclxuICAgIGxldCBiaWdnZXN0ID0gTWF0aC5wb3coMiwgYmFzZSk7XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IDg7IGkrKykge1xyXG4gICAgICAgIGlmICh2YWx1ZSA8IGJpZ2dlc3QpIHtcclxuICAgICAgICAgICAgbGV0IHJldEJ1ZjtcclxuICAgICAgICAgICAgaWYgKGludGVybmFsUmVzZXJ2ZWQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXRCdWYgPSBuZXcgQXJyYXlCdWZmZXIoaSk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGludGVybmFsUmVzZXJ2ZWQgPCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgQXJyYXlCdWZmZXIoMCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0QnVmID0gbmV3IEFycmF5QnVmZmVyKGludGVybmFsUmVzZXJ2ZWQpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaW50ZXJuYWxSZXNlcnZlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCByZXRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocmV0QnVmKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IChpIC0gMSk7IGogPj0gMDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNpcyA9IE1hdGgucG93KDIsIGogKiBiYXNlKTtcclxuICAgICAgICAgICAgICAgIHJldFZpZXdbcmVzdWx0IC0gaiAtIDFdID0gTWF0aC5mbG9vcihpbnRlcm5hbFZhbHVlIC8gYmFzaXMpO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxWYWx1ZSAtPSAocmV0Vmlld1tyZXN1bHQgLSBqIC0gMV0pICogYmFzaXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJldEJ1ZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYmlnZ2VzdCAqPSBNYXRoLnBvdygyLCBiYXNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7XHJcbn1cclxuZnVuY3Rpb24gdXRpbENvbmNhdEJ1ZiguLi5idWZmZXJzKSB7XHJcbiAgICBsZXQgb3V0cHV0TGVuZ3RoID0gMDtcclxuICAgIGxldCBwcmV2TGVuZ3RoID0gMDtcclxuICAgIGZvciAoY29uc3QgYnVmZmVyIG9mIGJ1ZmZlcnMpIHtcclxuICAgICAgICBvdXRwdXRMZW5ndGggKz0gYnVmZmVyLmJ5dGVMZW5ndGg7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXRCdWYgPSBuZXcgQXJyYXlCdWZmZXIob3V0cHV0TGVuZ3RoKTtcclxuICAgIGNvbnN0IHJldFZpZXcgPSBuZXcgVWludDhBcnJheShyZXRCdWYpO1xyXG4gICAgZm9yIChjb25zdCBidWZmZXIgb2YgYnVmZmVycykge1xyXG4gICAgICAgIHJldFZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlciksIHByZXZMZW5ndGgpO1xyXG4gICAgICAgIHByZXZMZW5ndGggKz0gYnVmZmVyLmJ5dGVMZW5ndGg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0QnVmO1xyXG59XHJcbmZ1bmN0aW9uIHV0aWxDb25jYXRWaWV3KC4uLnZpZXdzKSB7XHJcbiAgICBsZXQgb3V0cHV0TGVuZ3RoID0gMDtcclxuICAgIGxldCBwcmV2TGVuZ3RoID0gMDtcclxuICAgIGZvciAoY29uc3QgdmlldyBvZiB2aWV3cykge1xyXG4gICAgICAgIG91dHB1dExlbmd0aCArPSB2aWV3Lmxlbmd0aDtcclxuICAgIH1cclxuICAgIGNvbnN0IHJldEJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihvdXRwdXRMZW5ndGgpO1xyXG4gICAgY29uc3QgcmV0VmlldyA9IG5ldyBVaW50OEFycmF5KHJldEJ1Zik7XHJcbiAgICBmb3IgKGNvbnN0IHZpZXcgb2Ygdmlld3MpIHtcclxuICAgICAgICByZXRWaWV3LnNldCh2aWV3LCBwcmV2TGVuZ3RoKTtcclxuICAgICAgICBwcmV2TGVuZ3RoICs9IHZpZXcubGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldFZpZXc7XHJcbn1cclxuZnVuY3Rpb24gdXRpbERlY29kZVRDKCkge1xyXG4gICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkodGhpcy52YWx1ZUhleCk7XHJcbiAgICBpZiAodGhpcy52YWx1ZUhleC5ieXRlTGVuZ3RoID49IDIpIHtcclxuICAgICAgICBjb25zdCBjb25kaXRpb24xID0gKGJ1ZlswXSA9PT0gMHhGRikgJiYgKGJ1ZlsxXSAmIDB4ODApO1xyXG4gICAgICAgIGNvbnN0IGNvbmRpdGlvbjIgPSAoYnVmWzBdID09PSAweDAwKSAmJiAoKGJ1ZlsxXSAmIDB4ODApID09PSAweDAwKTtcclxuICAgICAgICBpZiAoY29uZGl0aW9uMSB8fCBjb25kaXRpb24yKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2FybmluZ3MucHVzaChcIk5lZWRsZXNzbHkgbG9uZyBmb3JtYXRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYmlnSW50QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMudmFsdWVIZXguYnl0ZUxlbmd0aCk7XHJcbiAgICBjb25zdCBiaWdJbnRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYmlnSW50QnVmZmVyKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZUhleC5ieXRlTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBiaWdJbnRWaWV3W2ldID0gMDtcclxuICAgIH1cclxuICAgIGJpZ0ludFZpZXdbMF0gPSAoYnVmWzBdICYgMHg4MCk7XHJcbiAgICBjb25zdCBiaWdJbnQgPSB1dGlsRnJvbUJhc2UoYmlnSW50VmlldywgOCk7XHJcbiAgICBjb25zdCBzbWFsbEludEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLnZhbHVlSGV4LmJ5dGVMZW5ndGgpO1xyXG4gICAgY29uc3Qgc21hbGxJbnRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoc21hbGxJbnRCdWZmZXIpO1xyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnZhbHVlSGV4LmJ5dGVMZW5ndGg7IGorKykge1xyXG4gICAgICAgIHNtYWxsSW50Vmlld1tqXSA9IGJ1ZltqXTtcclxuICAgIH1cclxuICAgIHNtYWxsSW50Vmlld1swXSAmPSAweDdGO1xyXG4gICAgY29uc3Qgc21hbGxJbnQgPSB1dGlsRnJvbUJhc2Uoc21hbGxJbnRWaWV3LCA4KTtcclxuICAgIHJldHVybiAoc21hbGxJbnQgLSBiaWdJbnQpO1xyXG59XHJcbmZ1bmN0aW9uIHV0aWxFbmNvZGVUQyh2YWx1ZSkge1xyXG4gICAgY29uc3QgbW9kVmFsdWUgPSAodmFsdWUgPCAwKSA/ICh2YWx1ZSAqICgtMSkpIDogdmFsdWU7XHJcbiAgICBsZXQgYmlnSW50ID0gMTI4O1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4OyBpKyspIHtcclxuICAgICAgICBpZiAobW9kVmFsdWUgPD0gYmlnSW50KSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNtYWxsSW50ID0gYmlnSW50IC0gbW9kVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXRCdWYgPSB1dGlsVG9CYXNlKHNtYWxsSW50LCA4LCBpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJldFZpZXcgPSBuZXcgVWludDhBcnJheShyZXRCdWYpO1xyXG4gICAgICAgICAgICAgICAgcmV0Vmlld1swXSB8PSAweDgwO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldEJ1ZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgcmV0QnVmID0gdXRpbFRvQmFzZShtb2RWYWx1ZSwgOCwgaSk7XHJcbiAgICAgICAgICAgIGxldCByZXRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocmV0QnVmKTtcclxuICAgICAgICAgICAgaWYgKHJldFZpZXdbMF0gJiAweDgwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wQnVmID0gcmV0QnVmLnNsaWNlKDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcFZpZXcgPSBuZXcgVWludDhBcnJheSh0ZW1wQnVmKTtcclxuICAgICAgICAgICAgICAgIHJldEJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihyZXRCdWYuYnl0ZUxlbmd0aCArIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0VmlldyA9IG5ldyBVaW50OEFycmF5KHJldEJ1Zik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHRlbXBCdWYuYnl0ZUxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0Vmlld1trICsgMV0gPSB0ZW1wVmlld1trXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldFZpZXdbMF0gPSAweDAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXRCdWY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJpZ0ludCAqPSBNYXRoLnBvdygyLCA4KTtcclxuICAgIH1cclxuICAgIHJldHVybiAobmV3IEFycmF5QnVmZmVyKDApKTtcclxufVxyXG5mdW5jdGlvbiBpc0VxdWFsQnVmZmVyKGlucHV0QnVmZmVyMSwgaW5wdXRCdWZmZXIyKSB7XHJcbiAgICBpZiAoaW5wdXRCdWZmZXIxLmJ5dGVMZW5ndGggIT09IGlucHV0QnVmZmVyMi5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdmlldzEgPSBuZXcgVWludDhBcnJheShpbnB1dEJ1ZmZlcjEpO1xyXG4gICAgY29uc3QgdmlldzIgPSBuZXcgVWludDhBcnJheShpbnB1dEJ1ZmZlcjIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aWV3MS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICh2aWV3MVtpXSAhPT0gdmlldzJbaV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIHBhZE51bWJlcihpbnB1dE51bWJlciwgZnVsbExlbmd0aCkge1xyXG4gICAgY29uc3Qgc3RyID0gaW5wdXROdW1iZXIudG9TdHJpbmcoMTApO1xyXG4gICAgaWYgKGZ1bGxMZW5ndGggPCBzdHIubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkaWYgPSBmdWxsTGVuZ3RoIC0gc3RyLmxlbmd0aDtcclxuICAgIGNvbnN0IHBhZGRpbmcgPSBuZXcgQXJyYXkoZGlmKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlmOyBpKyspIHtcclxuICAgICAgICBwYWRkaW5nW2ldID0gXCIwXCI7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYWRkaW5nU3RyaW5nID0gcGFkZGluZy5qb2luKFwiXCIpO1xyXG4gICAgcmV0dXJuIHBhZGRpbmdTdHJpbmcuY29uY2F0KHN0cik7XHJcbn1cclxuY29uc3QgYmFzZTY0VGVtcGxhdGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XHJcbmNvbnN0IGJhc2U2NFVybFRlbXBsYXRlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OS1fPVwiO1xyXG5mdW5jdGlvbiB0b0Jhc2U2NChpbnB1dCwgdXNlVXJsVGVtcGxhdGUgPSBmYWxzZSwgc2tpcFBhZGRpbmcgPSBmYWxzZSwgc2tpcExlYWRpbmdaZXJvcyA9IGZhbHNlKSB7XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICBsZXQgZmxhZzEgPSAwO1xyXG4gICAgbGV0IGZsYWcyID0gMDtcclxuICAgIGxldCBvdXRwdXQgPSBcIlwiO1xyXG4gICAgY29uc3QgdGVtcGxhdGUgPSAodXNlVXJsVGVtcGxhdGUpID8gYmFzZTY0VXJsVGVtcGxhdGUgOiBiYXNlNjRUZW1wbGF0ZTtcclxuICAgIGlmIChza2lwTGVhZGluZ1plcm9zKSB7XHJcbiAgICAgICAgbGV0IG5vblplcm9Qb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChpKSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbm9uWmVyb1Bvc2l0aW9uID0gaTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlucHV0ID0gaW5wdXQuc2xpY2Uobm9uWmVyb1Bvc2l0aW9uKTtcclxuICAgIH1cclxuICAgIHdoaWxlIChpIDwgaW5wdXQubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgY2hyMSA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcclxuICAgICAgICBpZiAoaSA+PSBpbnB1dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZmxhZzEgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjaHIyID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xyXG4gICAgICAgIGlmIChpID49IGlucHV0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmbGFnMiA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNocjMgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7XHJcbiAgICAgICAgY29uc3QgZW5jMSA9IGNocjEgPj4gMjtcclxuICAgICAgICBjb25zdCBlbmMyID0gKChjaHIxICYgMHgwMykgPDwgNCkgfCAoY2hyMiA+PiA0KTtcclxuICAgICAgICBsZXQgZW5jMyA9ICgoY2hyMiAmIDB4MEYpIDw8IDIpIHwgKGNocjMgPj4gNik7XHJcbiAgICAgICAgbGV0IGVuYzQgPSBjaHIzICYgMHgzRjtcclxuICAgICAgICBpZiAoZmxhZzEgPT09IDEpIHtcclxuICAgICAgICAgICAgZW5jMyA9IGVuYzQgPSA2NDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChmbGFnMiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgZW5jNCA9IDY0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChza2lwUGFkZGluZykge1xyXG4gICAgICAgICAgICBpZiAoZW5jMyA9PT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIG91dHB1dCArPSBgJHt0ZW1wbGF0ZS5jaGFyQXQoZW5jMSl9JHt0ZW1wbGF0ZS5jaGFyQXQoZW5jMil9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbmM0ID09PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBgJHt0ZW1wbGF0ZS5jaGFyQXQoZW5jMSl9JHt0ZW1wbGF0ZS5jaGFyQXQoZW5jMil9JHt0ZW1wbGF0ZS5jaGFyQXQoZW5jMyl9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBgJHt0ZW1wbGF0ZS5jaGFyQXQoZW5jMSl9JHt0ZW1wbGF0ZS5jaGFyQXQoZW5jMil9JHt0ZW1wbGF0ZS5jaGFyQXQoZW5jMyl9JHt0ZW1wbGF0ZS5jaGFyQXQoZW5jNCl9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0cHV0ICs9IGAke3RlbXBsYXRlLmNoYXJBdChlbmMxKX0ke3RlbXBsYXRlLmNoYXJBdChlbmMyKX0ke3RlbXBsYXRlLmNoYXJBdChlbmMzKX0ke3RlbXBsYXRlLmNoYXJBdChlbmM0KX1gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuZnVuY3Rpb24gZnJvbUJhc2U2NChpbnB1dCwgdXNlVXJsVGVtcGxhdGUgPSBmYWxzZSwgY3V0VGFpbFplcm9zID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHRlbXBsYXRlID0gKHVzZVVybFRlbXBsYXRlKSA/IGJhc2U2NFVybFRlbXBsYXRlIDogYmFzZTY0VGVtcGxhdGU7XHJcbiAgICBmdW5jdGlvbiBpbmRleE9mKHRvU2VhcmNoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2NDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZS5jaGFyQXQoaSkgPT09IHRvU2VhcmNoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiA2NDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHRlc3QoaW5jb21pbmcpIHtcclxuICAgICAgICByZXR1cm4gKChpbmNvbWluZyA9PT0gNjQpID8gMHgwMCA6IGluY29taW5nKTtcclxuICAgIH1cclxuICAgIGxldCBpID0gMDtcclxuICAgIGxldCBvdXRwdXQgPSBcIlwiO1xyXG4gICAgd2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBlbmMxID0gaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XHJcbiAgICAgICAgY29uc3QgZW5jMiA9IChpID49IGlucHV0Lmxlbmd0aCkgPyAweDAwIDogaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XHJcbiAgICAgICAgY29uc3QgZW5jMyA9IChpID49IGlucHV0Lmxlbmd0aCkgPyAweDAwIDogaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XHJcbiAgICAgICAgY29uc3QgZW5jNCA9IChpID49IGlucHV0Lmxlbmd0aCkgPyAweDAwIDogaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XHJcbiAgICAgICAgY29uc3QgY2hyMSA9ICh0ZXN0KGVuYzEpIDw8IDIpIHwgKHRlc3QoZW5jMikgPj4gNCk7XHJcbiAgICAgICAgY29uc3QgY2hyMiA9ICgodGVzdChlbmMyKSAmIDB4MEYpIDw8IDQpIHwgKHRlc3QoZW5jMykgPj4gMik7XHJcbiAgICAgICAgY29uc3QgY2hyMyA9ICgodGVzdChlbmMzKSAmIDB4MDMpIDw8IDYpIHwgdGVzdChlbmM0KTtcclxuICAgICAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIxKTtcclxuICAgICAgICBpZiAoZW5jMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbmM0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY3V0VGFpbFplcm9zKSB7XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0TGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDtcclxuICAgICAgICBsZXQgbm9uWmVyb1N0YXJ0ID0gKC0xKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gKG91dHB1dExlbmd0aCAtIDEpOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZiAob3V0cHV0LmNoYXJDb2RlQXQoaSkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIG5vblplcm9TdGFydCA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9uWmVyb1N0YXJ0ICE9PSAoLTEpKSB7XHJcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dC5zbGljZSgwLCBub25aZXJvU3RhcnQgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dHB1dCA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5mdW5jdGlvbiBhcnJheUJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcikge1xyXG4gICAgbGV0IHJlc3VsdFN0cmluZyA9IFwiXCI7XHJcbiAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcclxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB2aWV3KSB7XHJcbiAgICAgICAgcmVzdWx0U3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0U3RyaW5nO1xyXG59XHJcbmZ1bmN0aW9uIHN0cmluZ1RvQXJyYXlCdWZmZXIoc3RyKSB7XHJcbiAgICBjb25zdCBzdHJpbmdMZW5ndGggPSBzdHIubGVuZ3RoO1xyXG4gICAgY29uc3QgcmVzdWx0QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHN0cmluZ0xlbmd0aCk7XHJcbiAgICBjb25zdCByZXN1bHRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkocmVzdWx0QnVmZmVyKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5nTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICByZXN1bHRWaWV3W2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0QnVmZmVyO1xyXG59XHJcbmNvbnN0IGxvZzIgPSBNYXRoLmxvZygyKTtcclxuZnVuY3Rpb24gbmVhcmVzdFBvd2VyT2YyKGxlbmd0aCkge1xyXG4gICAgY29uc3QgYmFzZSA9IChNYXRoLmxvZyhsZW5ndGgpIC8gbG9nMik7XHJcbiAgICBjb25zdCBmbG9vciA9IE1hdGguZmxvb3IoYmFzZSk7XHJcbiAgICBjb25zdCByb3VuZCA9IE1hdGgucm91bmQoYmFzZSk7XHJcbiAgICByZXR1cm4gKChmbG9vciA9PT0gcm91bmQpID8gZmxvb3IgOiByb3VuZCk7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJQcm9wcyhvYmplY3QsIHByb3BzQXJyYXkpIHtcclxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBwcm9wc0FycmF5KSB7XHJcbiAgICAgICAgZGVsZXRlIG9iamVjdFtwcm9wXTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBhcnJheUJ1ZmZlclRvU3RyaW5nLCBidWZmZXJUb0hleENvZGVzLCBjaGVja0J1ZmZlclBhcmFtcywgY2xlYXJQcm9wcywgZnJvbUJhc2U2NCwgZ2V0UGFyYW1ldGVyc1ZhbHVlLCBnZXRVVENEYXRlLCBpc0VxdWFsQnVmZmVyLCBuZWFyZXN0UG93ZXJPZjIsIHBhZE51bWJlciwgc3RyaW5nVG9BcnJheUJ1ZmZlciwgdG9CYXNlNjQsIHV0aWxDb25jYXRCdWYsIHV0aWxDb25jYXRWaWV3LCB1dGlsRGVjb2RlVEMsIHV0aWxFbmNvZGVUQywgdXRpbEZyb21CYXNlLCB1dGlsVG9CYXNlIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/pvutils/build/utils.es.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/react-hot-toast/dist/index.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/react-hot-toast/dist/index.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CheckmarkIcon: () => (/* binding */ L),\n/* harmony export */   ErrorIcon: () => (/* binding */ C),\n/* harmony export */   LoaderIcon: () => (/* binding */ F),\n/* harmony export */   ToastBar: () => (/* binding */ N),\n/* harmony export */   ToastIcon: () => (/* binding */ $),\n/* harmony export */   Toaster: () => (/* binding */ Fe),\n/* harmony export */   \"default\": () => (/* binding */ zt),\n/* harmony export */   resolveValue: () => (/* binding */ h),\n/* harmony export */   toast: () => (/* binding */ n),\n/* harmony export */   useToaster: () => (/* binding */ w),\n/* harmony export */   useToasterStore: () => (/* binding */ V)\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @swc/helpers/_/_tagged_template_literal */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_tagged_template_literal.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var goober__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! goober */ \"(app-pages-browser)/./node_modules/goober/dist/goober.modern.js\");\n/* __next_internal_client_entry_do_not_use__ CheckmarkIcon,ErrorIcon,LoaderIcon,ToastBar,ToastIcon,Toaster,default,resolveValue,toast,useToaster,useToasterStore auto */ \nfunction _templateObject() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\nfrom {\\n  transform: scale(0) rotate(45deg);\\n\topacity: 0;\\n}\\nto {\\n transform: scale(1) rotate(45deg);\\n  opacity: 1;\\n}\"\n    ]);\n    _templateObject = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject1() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\nfrom {\\n  transform: scale(0);\\n  opacity: 0;\\n}\\nto {\\n  transform: scale(1);\\n  opacity: 1;\\n}\"\n    ]);\n    _templateObject1 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject2() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\nfrom {\\n  transform: scale(0) rotate(90deg);\\n\topacity: 0;\\n}\\nto {\\n  transform: scale(1) rotate(90deg);\\n\topacity: 1;\\n}\"\n    ]);\n    _templateObject2 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject3() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  width: 20px;\\n  opacity: 0;\\n  height: 20px;\\n  border-radius: 10px;\\n  background: \",\n        \";\\n  position: relative;\\n  transform: rotate(45deg);\\n\\n  animation: \",\n        \" 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\\n    forwards;\\n  animation-delay: 100ms;\\n\\n  &:after,\\n  &:before {\\n    content: '';\\n    animation: \",\n        \" 0.15s ease-out forwards;\\n    animation-delay: 150ms;\\n    position: absolute;\\n    border-radius: 3px;\\n    opacity: 0;\\n    background: \",\n        \";\\n    bottom: 9px;\\n    left: 4px;\\n    height: 2px;\\n    width: 12px;\\n  }\\n\\n  &:before {\\n    animation: \",\n        \" 0.15s ease-out forwards;\\n    animation-delay: 180ms;\\n    transform: rotate(90deg);\\n  }\\n\"\n    ]);\n    _templateObject3 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject4() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  from {\\n    transform: rotate(0deg);\\n  }\\n  to {\\n    transform: rotate(360deg);\\n  }\\n\"\n    ]);\n    _templateObject4 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject5() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  width: 12px;\\n  height: 12px;\\n  box-sizing: border-box;\\n  border: 2px solid;\\n  border-radius: 100%;\\n  border-color: \",\n        \";\\n  border-right-color: \",\n        \";\\n  animation: \",\n        \" 1s linear infinite;\\n\"\n    ]);\n    _templateObject5 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject6() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\nfrom {\\n  transform: scale(0) rotate(45deg);\\n\topacity: 0;\\n}\\nto {\\n  transform: scale(1) rotate(45deg);\\n\topacity: 1;\\n}\"\n    ]);\n    _templateObject6 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject7() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n0% {\\n\theight: 0;\\n\twidth: 0;\\n\topacity: 0;\\n}\\n40% {\\n  height: 0;\\n\twidth: 6px;\\n\topacity: 1;\\n}\\n100% {\\n  opacity: 1;\\n  height: 10px;\\n}\"\n    ]);\n    _templateObject7 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject8() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  width: 20px;\\n  opacity: 0;\\n  height: 20px;\\n  border-radius: 10px;\\n  background: \",\n        \";\\n  position: relative;\\n  transform: rotate(45deg);\\n\\n  animation: \",\n        \" 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\\n    forwards;\\n  animation-delay: 100ms;\\n  &:after {\\n    content: '';\\n    box-sizing: border-box;\\n    animation: \",\n        \" 0.2s ease-out forwards;\\n    opacity: 0;\\n    animation-delay: 200ms;\\n    position: absolute;\\n    border-right: 2px solid;\\n    border-bottom: 2px solid;\\n    border-color: \",\n        \";\\n    bottom: 6px;\\n    left: 6px;\\n    height: 10px;\\n    width: 6px;\\n  }\\n\"\n    ]);\n    _templateObject8 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject9() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  position: absolute;\\n\"\n    ]);\n    _templateObject9 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject10() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  position: relative;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  min-width: 20px;\\n  min-height: 20px;\\n\"\n    ]);\n    _templateObject10 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject11() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\nfrom {\\n  transform: scale(0.6);\\n  opacity: 0.4;\\n}\\nto {\\n  transform: scale(1);\\n  opacity: 1;\\n}\"\n    ]);\n    _templateObject11 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject12() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  position: relative;\\n  transform: scale(0.6);\\n  opacity: 0.4;\\n  min-width: 20px;\\n  animation: \",\n        \" 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\\n    forwards;\\n\"\n    ]);\n    _templateObject12 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject13() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  display: flex;\\n  align-items: center;\\n  background: #fff;\\n  color: #363636;\\n  line-height: 1.3;\\n  will-change: transform;\\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\\n  max-width: 350px;\\n  pointer-events: auto;\\n  padding: 8px 10px;\\n  border-radius: 8px;\\n\"\n    ]);\n    _templateObject13 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject14() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  display: flex;\\n  justify-content: center;\\n  margin: 4px 10px;\\n  color: inherit;\\n  flex: 1 1 auto;\\n  white-space: pre-line;\\n\"\n    ]);\n    _templateObject14 = function() {\n        return data;\n    };\n    return data;\n}\nfunction _templateObject15() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n  z-index: 9999;\\n  > * {\\n    pointer-events: auto;\\n  }\\n\"\n    ]);\n    _templateObject15 = function() {\n        return data;\n    };\n    return data;\n}\nvar _s = $RefreshSig$();\nvar Z = (e)=>typeof e == \"function\", h = (e, t)=>Z(e) ? e(t) : e;\nvar W = (()=>{\n    let e = 0;\n    return ()=>(++e).toString();\n})(), E = (()=>{\n    let e;\n    return ()=>{\n        if (e === void 0 && typeof window < \"u\") {\n            let t = matchMedia(\"(prefers-reduced-motion: reduce)\");\n            e = !t || t.matches;\n        }\n        return e;\n    };\n})();\n\nvar re = 20, k = \"default\";\nvar H = (e, t)=>{\n    let { toastLimit: o } = e.settings;\n    switch(t.type){\n        case 0:\n            return {\n                ...e,\n                toasts: [\n                    t.toast,\n                    ...e.toasts\n                ].slice(0, o)\n            };\n        case 1:\n            return {\n                ...e,\n                toasts: e.toasts.map((r)=>r.id === t.toast.id ? {\n                        ...r,\n                        ...t.toast\n                    } : r)\n            };\n        case 2:\n            let { toast: s } = t;\n            return H(e, {\n                type: e.toasts.find((r)=>r.id === s.id) ? 1 : 0,\n                toast: s\n            });\n        case 3:\n            let { toastId: a } = t;\n            return {\n                ...e,\n                toasts: e.toasts.map((r)=>r.id === a || a === void 0 ? {\n                        ...r,\n                        dismissed: !0,\n                        visible: !1\n                    } : r)\n            };\n        case 4:\n            return t.toastId === void 0 ? {\n                ...e,\n                toasts: []\n            } : {\n                ...e,\n                toasts: e.toasts.filter((r)=>r.id !== t.toastId)\n            };\n        case 5:\n            return {\n                ...e,\n                pausedAt: t.time\n            };\n        case 6:\n            let i = t.time - (e.pausedAt || 0);\n            return {\n                ...e,\n                pausedAt: void 0,\n                toasts: e.toasts.map((r)=>({\n                        ...r,\n                        pauseDuration: r.pauseDuration + i\n                    }))\n            };\n    }\n}, v = [], j = {\n    toasts: [],\n    pausedAt: void 0,\n    settings: {\n        toastLimit: re\n    }\n}, f = {}, Y = function(e) {\n    let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : k;\n    f[t] = H(f[t] || j, e), v.forEach((param)=>{\n        let [o, s] = param;\n        o === t && s(f[t]);\n    });\n}, _ = (e)=>Object.keys(f).forEach((t)=>Y(e, t)), Q = (e)=>Object.keys(f).find((t)=>f[t].toasts.some((o)=>o.id === e)), S = function() {\n    let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : k;\n    return (t)=>{\n        Y(t, e);\n    };\n}, se = {\n    blank: 4e3,\n    error: 4e3,\n    success: 2e3,\n    loading: 1 / 0,\n    custom: 4e3\n}, V = function() {\n    let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : k;\n    let [o, s] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(f[t] || j), a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(f[t]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>(a.current !== f[t] && s(f[t]), v.push([\n            t,\n            s\n        ]), ()=>{\n            let r = v.findIndex((param)=>{\n                let [l] = param;\n                return l === t;\n            });\n            r > -1 && v.splice(r, 1);\n        }), [\n        t\n    ]);\n    let i = o.toasts.map((r)=>{\n        var l, g, T;\n        return {\n            ...e,\n            ...e[r.type],\n            ...r,\n            removeDelay: r.removeDelay || ((l = e[r.type]) == null ? void 0 : l.removeDelay) || (e == null ? void 0 : e.removeDelay),\n            duration: r.duration || ((g = e[r.type]) == null ? void 0 : g.duration) || (e == null ? void 0 : e.duration) || se[r.type],\n            style: {\n                ...e.style,\n                ...(T = e[r.type]) == null ? void 0 : T.style,\n                ...r.style\n            }\n        };\n    });\n    return {\n        ...o,\n        toasts: i\n    };\n};\nvar ie = function(e) {\n    let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"blank\", o = arguments.length > 2 ? arguments[2] : void 0;\n    return {\n        createdAt: Date.now(),\n        visible: !0,\n        dismissed: !1,\n        type: t,\n        ariaProps: {\n            role: \"status\",\n            \"aria-live\": \"polite\"\n        },\n        message: e,\n        pauseDuration: 0,\n        ...o,\n        id: (o == null ? void 0 : o.id) || W()\n    };\n}, P = (e)=>(t, o)=>{\n        let s = ie(t, e, o);\n        return S(s.toasterId || Q(s.id))({\n            type: 2,\n            toast: s\n        }), s.id;\n    }, n = (e, t)=>P(\"blank\")(e, t);\nn.error = P(\"error\");\nn.success = P(\"success\");\nn.loading = P(\"loading\");\nn.custom = P(\"custom\");\nn.dismiss = (e, t)=>{\n    let o = {\n        type: 3,\n        toastId: e\n    };\n    t ? S(t)(o) : _(o);\n};\nn.dismissAll = (e)=>n.dismiss(void 0, e);\nn.remove = (e, t)=>{\n    let o = {\n        type: 4,\n        toastId: e\n    };\n    t ? S(t)(o) : _(o);\n};\nn.removeAll = (e)=>n.remove(void 0, e);\nn.promise = (e, t, o)=>{\n    let s = n.loading(t.loading, {\n        ...o,\n        ...o == null ? void 0 : o.loading\n    });\n    return typeof e == \"function\" && (e = e()), e.then((a)=>{\n        let i = t.success ? h(t.success, a) : void 0;\n        return i ? n.success(i, {\n            id: s,\n            ...o,\n            ...o == null ? void 0 : o.success\n        }) : n.dismiss(s), a;\n    }).catch((a)=>{\n        let i = t.error ? h(t.error, a) : void 0;\n        i ? n.error(i, {\n            id: s,\n            ...o,\n            ...o == null ? void 0 : o.error\n        }) : n.dismiss(s);\n    }), e;\n};\n\nvar ce = 1e3, w = function(e) {\n    let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"default\";\n    let { toasts: o, pausedAt: s } = V(e, t), a = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map).current, i = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(c) {\n        let m = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : ce;\n        if (a.has(c)) return;\n        let p = setTimeout(()=>{\n            a.delete(c), r({\n                type: 4,\n                toastId: c\n            });\n        }, m);\n        a.set(c, p);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (s) return;\n        let c = Date.now(), m = o.map((p)=>{\n            if (p.duration === 1 / 0) return;\n            let R = (p.duration || 0) + p.pauseDuration - (c - p.createdAt);\n            if (R < 0) {\n                p.visible && n.dismiss(p.id);\n                return;\n            }\n            return setTimeout(()=>n.dismiss(p.id, t), R);\n        });\n        return ()=>{\n            m.forEach((p)=>p && clearTimeout(p));\n        };\n    }, [\n        o,\n        s,\n        t\n    ]);\n    let r = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(S(t), [\n        t\n    ]), l = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        r({\n            type: 5,\n            time: Date.now()\n        });\n    }, [\n        r\n    ]), g = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((c, m)=>{\n        r({\n            type: 1,\n            toast: {\n                id: c,\n                height: m\n            }\n        });\n    }, [\n        r\n    ]), T = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        s && r({\n            type: 6,\n            time: Date.now()\n        });\n    }, [\n        s,\n        r\n    ]), d = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((c, m)=>{\n        let { reverseOrder: p = !1, gutter: R = 8, defaultPosition: z } = m || {}, O = o.filter((u)=>(u.position || z) === (c.position || z) && u.height), K = O.findIndex((u)=>u.id === c.id), B = O.filter((u, I)=>I < K && u.visible).length;\n        return O.filter((u)=>u.visible).slice(...p ? [\n            B + 1\n        ] : [\n            0,\n            B\n        ]).reduce((u, I)=>u + (I.height || 0) + R, 0);\n    }, [\n        o\n    ]);\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        o.forEach((c)=>{\n            if (c.dismissed) i(c.id, c.removeDelay);\n            else {\n                let m = a.get(c.id);\n                m && (clearTimeout(m), a.delete(c.id));\n            }\n        });\n    }, [\n        o,\n        i\n    ]), {\n        toasts: o,\n        handlers: {\n            updateHeight: g,\n            startPause: l,\n            endPause: T,\n            calculateOffset: d\n        }\n    };\n};\n\n\n\n\n\nvar de = (0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(_templateObject()), me = (0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(_templateObject1()), le = (0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(_templateObject2()), C = (0,goober__WEBPACK_IMPORTED_MODULE_2__.styled)(\"div\")(_templateObject3(), (e)=>e.primary || \"#ff4b4b\", de, me, (e)=>e.secondary || \"#fff\", le);\n\nvar Te = (0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(_templateObject4()), F = (0,goober__WEBPACK_IMPORTED_MODULE_2__.styled)(\"div\")(_templateObject5(), (e)=>e.secondary || \"#e0e0e0\", (e)=>e.primary || \"#616161\", Te);\n\nvar ge = (0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(_templateObject6()), he = (0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(_templateObject7()), L = (0,goober__WEBPACK_IMPORTED_MODULE_2__.styled)(\"div\")(_templateObject8(), (e)=>e.primary || \"#61d345\", ge, he, (e)=>e.secondary || \"#fff\");\nvar be = (0,goober__WEBPACK_IMPORTED_MODULE_2__.styled)(\"div\")(_templateObject9()), Se = (0,goober__WEBPACK_IMPORTED_MODULE_2__.styled)(\"div\")(_templateObject10()), Ae = (0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(_templateObject11()), Pe = (0,goober__WEBPACK_IMPORTED_MODULE_2__.styled)(\"div\")(_templateObject12(), Ae), $ = (param)=>{\n    let { toast: e } = param;\n    let { icon: t, type: o, iconTheme: s } = e;\n    return t !== void 0 ? typeof t == \"string\" ? /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(Pe, null, t) : t : o === \"blank\" ? null : /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(Se, null, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(F, {\n        ...s\n    }), o !== \"loading\" && /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(be, null, o === \"error\" ? /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(C, {\n        ...s\n    }) : /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(L, {\n        ...s\n    })));\n};\nvar Re = (e)=>\"\\n0% {transform: translate3d(0,\".concat(e * -200, \"%,0) scale(.6); opacity:.5;}\\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\\n\"), Ee = (e)=>\"\\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\\n100% {transform: translate3d(0,\".concat(e * -150, \"%,-1px) scale(.6); opacity:0;}\\n\"), ve = \"0%{opacity:0;} 100%{opacity:1;}\", De = \"0%{opacity:1;} 100%{opacity:0;}\", Oe = (0,goober__WEBPACK_IMPORTED_MODULE_2__.styled)(\"div\")(_templateObject13()), Ie = (0,goober__WEBPACK_IMPORTED_MODULE_2__.styled)(\"div\")(_templateObject14()), ke = (e, t)=>{\n    let s = e.includes(\"top\") ? 1 : -1, [a, i] = E() ? [\n        ve,\n        De\n    ] : [\n        Re(s),\n        Ee(s)\n    ];\n    return {\n        animation: t ? \"\".concat((0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(a), \" 0.35s cubic-bezier(.21,1.02,.73,1) forwards\") : \"\".concat((0,goober__WEBPACK_IMPORTED_MODULE_2__.keyframes)(i), \" 0.4s forwards cubic-bezier(.06,.71,.55,1)\")\n    };\n}, N = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.memo((param)=>{\n    let { toast: e, position: t, style: o, children: s } = param;\n    let a = e.height ? ke(e.position || t || \"top-center\", e.visible) : {\n        opacity: 0\n    }, i = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement($, {\n        toast: e\n    }), r = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(Ie, {\n        ...e.ariaProps\n    }, h(e.message, e));\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(Oe, {\n        className: e.className,\n        style: {\n            ...a,\n            ...o,\n            ...e.style\n        }\n    }, typeof s == \"function\" ? s({\n        icon: i,\n        message: r\n    }) : /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, i, r));\n});\n\n\n(0,goober__WEBPACK_IMPORTED_MODULE_2__.setup)(react__WEBPACK_IMPORTED_MODULE_1__.createElement);\nvar we = (param)=>{\n    let { id: e, className: t, style: o, onHeightUpdate: s, children: a } = param;\n    _s();\n    let i = react__WEBPACK_IMPORTED_MODULE_1__.useCallback({\n        \"we.useCallback[i]\": (r)=>{\n            if (r) {\n                let l = {\n                    \"we.useCallback[i].l\": ()=>{\n                        let g = r.getBoundingClientRect().height;\n                        s(e, g);\n                    }\n                }[\"we.useCallback[i].l\"];\n                l(), new MutationObserver(l).observe(r, {\n                    subtree: !0,\n                    childList: !0,\n                    characterData: !0\n                });\n            }\n        }\n    }[\"we.useCallback[i]\"], [\n        e,\n        s\n    ]);\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"div\", {\n        ref: i,\n        className: t,\n        style: o\n    }, a);\n}, Me = (e, t)=>{\n    let o = e.includes(\"top\"), s = o ? {\n        top: 0\n    } : {\n        bottom: 0\n    }, a = e.includes(\"center\") ? {\n        justifyContent: \"center\"\n    } : e.includes(\"right\") ? {\n        justifyContent: \"flex-end\"\n    } : {};\n    return {\n        left: 0,\n        right: 0,\n        display: \"flex\",\n        position: \"absolute\",\n        transition: E() ? void 0 : \"all 230ms cubic-bezier(.21,1.02,.73,1)\",\n        transform: \"translateY(\".concat(t * (o ? 1 : -1), \"px)\"),\n        ...s,\n        ...a\n    };\n}, Ce = (0,goober__WEBPACK_IMPORTED_MODULE_2__.css)(_templateObject15()), D = 16, Fe = (param)=>{\n    let { reverseOrder: e, position: t = \"top-center\", toastOptions: o, gutter: s, children: a, toasterId: i, containerStyle: r, containerClassName: l } = param;\n    let { toasts: g, handlers: T } = w(o, i);\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"div\", {\n        \"data-rht-toaster\": i || \"\",\n        style: {\n            position: \"fixed\",\n            zIndex: 9999,\n            top: D,\n            left: D,\n            right: D,\n            bottom: D,\n            pointerEvents: \"none\",\n            ...r\n        },\n        className: l,\n        onMouseEnter: T.startPause,\n        onMouseLeave: T.endPause\n    }, g.map((d)=>{\n        let c = d.position || t, m = T.calculateOffset(d, {\n            reverseOrder: e,\n            gutter: s,\n            defaultPosition: t\n        }), p = Me(c, m);\n        return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(we, {\n            id: d.id,\n            key: d.id,\n            onHeightUpdate: T.updateHeight,\n            className: d.visible ? Ce : \"\",\n            style: p\n        }, d.type === \"custom\" ? h(d.message, d) : a ? a(d) : /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(N, {\n            toast: d,\n            position: c\n        }));\n    }));\n};\n_s(we, \"I3jlzT54Bk7ZM7+mV1Jh8N0yt+Q=\");\nvar zt = n;\n //# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9yZWFjdC1ob3QtdG9hc3QvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkEsSUFBTUEsSUFDSkMsS0FFQSxPQUFPQSxLQUFrQixZQUVkQyxJQUFlLENBQzFCRCxHQUNBRSxJQUNZSCxFQUFXQyxDQUFhLElBQUlBLEVBQWNFLENBQUcsSUFBSUY7QUMvQnhELElBQU1HLElBQUFBLENBQVMsSUFBTTtJQUMxQixJQUFJQyxJQUFRO0lBQ1osT0FBTyxLQUNHLEdBQUVBLEVBQU8sU0FBUztDQUU5QixHQUFHLEVBRVVDLElBQUFBLENBQXdCLElBQU07SUFFekMsSUFBSUM7SUFFSixPQUFPLElBQU07UUFDWCxJQUFJQSxNQUF1QixVQUFhLE9BQU8sU0FBVyxLQUFhO1lBQ3JFLElBQU1DLElBQWEsV0FBVyxrQ0FBa0M7WUFDaEVELElBQXFCLENBQUNDLEtBQWNBLEVBQVc7UUFBQTtRQUVqRCxPQUFPRDtJQUNUO0NBQ0YsR0FBRztBQ2xCeUM7QUFJckMsSUFBTUssS0FBYyxJQUNkQyxJQUFxQjtBQXdEM0IsSUFBTUMsSUFBVSxDQUFDQyxHQUFxQkMsSUFBaUM7SUFDNUUsSUFBTSxFQUFFLFlBQUFDLENBQVcsS0FBSUYsRUFBTTtJQUU3QixPQUFRQyxFQUFPLEtBQU07UUFDbkIsSUFBSztZQUNILE9BQU87Z0JBQ0wsR0FBR0QsQ0FBQUE7Z0JBQ0gsUUFBUTtvQkFBQ0MsRUFBTyxNQUFPO3VCQUFHRCxFQUFNLE1BQU07aUJBQUEsQ0FBRSxNQUFNLEdBQUdFLENBQVU7WUFDN0Q7UUFFRixJQUFL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Q3pCLFdBQVcvRyxFQUFFLFVBQVUwRyxLQUFjO1lBQ3JDLE9BQU9PO1FBQUFBLEdBRU5qSCxFQUFFLFNBQVMsV0FDVmhCLEVBQWFnQixFQUFFLFNBQVNBLENBQUMsSUFDdkI0RixJQUNGQSxFQUFTNUYsQ0FBQyxrQkFFVixpREFBQzBGLEdBQUE7WUFBUyxPQUFPMUY7WUFBRyxVQUFVZ0g7UUFBQUEsQ0FBZSxDQUVqRDtJQUVKLENBQUMsQ0FDSDtBQUVKO0dBaElNaEI7QUNGTixJQUFPa0IsS0FBUWpIO0FBQUFBIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9zcmMvY29yZS90eXBlcy50cyIsIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL3NyYy9jb3JlL3V0aWxzLnRzIiwiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3Avc3JjL2NvcmUvc3RvcmUudHMiLCIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9zcmMvY29yZS90b2FzdC50cyIsIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL3NyYy9jb3JlL3VzZS10b2FzdGVyLnRzIiwiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3Avc3JjL2NvbXBvbmVudHMvdG9hc3QtYmFyLnRzeCIsIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL3NyYy9jb21wb25lbnRzL3RvYXN0LWljb24udHN4IiwiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3Avc3JjL2NvbXBvbmVudHMvZXJyb3IudHN4IiwiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3Avc3JjL2NvbXBvbmVudHMvbG9hZGVyLnRzeCIsIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL3NyYy9jb21wb25lbnRzL2NoZWNrbWFyay50c3giLCIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9zcmMvY29tcG9uZW50cy90b2FzdGVyLnRzeCIsIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDU1NQcm9wZXJ0aWVzIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgdHlwZSBUb2FzdFR5cGUgPSAnc3VjY2VzcycgfCAnZXJyb3InIHwgJ2xvYWRpbmcnIHwgJ2JsYW5rJyB8ICdjdXN0b20nO1xuZXhwb3J0IHR5cGUgVG9hc3RQb3NpdGlvbiA9XG4gIHwgJ3RvcC1sZWZ0J1xuICB8ICd0b3AtY2VudGVyJ1xuICB8ICd0b3AtcmlnaHQnXG4gIHwgJ2JvdHRvbS1sZWZ0J1xuICB8ICdib3R0b20tY2VudGVyJ1xuICB8ICdib3R0b20tcmlnaHQnO1xuXG5leHBvcnQgdHlwZSBSZW5kZXJhYmxlID0gUmVhY3QuUmVhY3RFbGVtZW50IHwgc3RyaW5nIHwgbnVsbDtcblxuZXhwb3J0IGludGVyZmFjZSBJY29uVGhlbWUge1xuICBwcmltYXJ5OiBzdHJpbmc7XG4gIHNlY29uZGFyeTogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBWYWx1ZUZ1bmN0aW9uPFRWYWx1ZSwgVEFyZz4gPSAoYXJnOiBUQXJnKSA9PiBUVmFsdWU7XG5leHBvcnQgdHlwZSBWYWx1ZU9yRnVuY3Rpb248VFZhbHVlLCBUQXJnPiA9XG4gIHwgVFZhbHVlXG4gIHwgVmFsdWVGdW5jdGlvbjxUVmFsdWUsIFRBcmc+O1xuXG5jb25zdCBpc0Z1bmN0aW9uID0gPFRWYWx1ZSwgVEFyZz4oXG4gIHZhbE9yRnVuY3Rpb246IFZhbHVlT3JGdW5jdGlvbjxUVmFsdWUsIFRBcmc+XG4pOiB2YWxPckZ1bmN0aW9uIGlzIFZhbHVlRnVuY3Rpb248VFZhbHVlLCBUQXJnPiA9PlxuICB0eXBlb2YgdmFsT3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IHJlc29sdmVWYWx1ZSA9IDxUVmFsdWUsIFRBcmc+KFxuICB2YWxPckZ1bmN0aW9uOiBWYWx1ZU9yRnVuY3Rpb248VFZhbHVlLCBUQXJnPixcbiAgYXJnOiBUQXJnXG4pOiBUVmFsdWUgPT4gKGlzRnVuY3Rpb24odmFsT3JGdW5jdGlvbikgPyB2YWxPckZ1bmN0aW9uKGFyZykgOiB2YWxPckZ1bmN0aW9uKTtcblxuZXhwb3J0IGludGVyZmFjZSBUb2FzdCB7XG4gIHR5cGU6IFRvYXN0VHlwZTtcbiAgaWQ6IHN0cmluZztcbiAgdG9hc3RlcklkPzogc3RyaW5nO1xuICBtZXNzYWdlOiBWYWx1ZU9yRnVuY3Rpb248UmVuZGVyYWJsZSwgVG9hc3Q+O1xuICBpY29uPzogUmVuZGVyYWJsZTtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIHBhdXNlRHVyYXRpb246IG51bWJlcjtcbiAgcG9zaXRpb24/OiBUb2FzdFBvc2l0aW9uO1xuICByZW1vdmVEZWxheT86IG51bWJlcjtcblxuICBhcmlhUHJvcHM6IHtcbiAgICByb2xlOiAnc3RhdHVzJyB8ICdhbGVydCc7XG4gICAgJ2FyaWEtbGl2ZSc6ICdhc3NlcnRpdmUnIHwgJ29mZicgfCAncG9saXRlJztcbiAgfTtcblxuICBzdHlsZT86IENTU1Byb3BlcnRpZXM7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgaWNvblRoZW1lPzogSWNvblRoZW1lO1xuXG4gIGNyZWF0ZWRBdDogbnVtYmVyO1xuICB2aXNpYmxlOiBib29sZWFuO1xuICBkaXNtaXNzZWQ6IGJvb2xlYW47XG4gIGhlaWdodD86IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgVG9hc3RPcHRpb25zID0gUGFydGlhbDxcbiAgUGljazxcbiAgICBUb2FzdCxcbiAgICB8ICdpZCdcbiAgICB8ICdpY29uJ1xuICAgIHwgJ2R1cmF0aW9uJ1xuICAgIHwgJ2FyaWFQcm9wcydcbiAgICB8ICdjbGFzc05hbWUnXG4gICAgfCAnc3R5bGUnXG4gICAgfCAncG9zaXRpb24nXG4gICAgfCAnaWNvblRoZW1lJ1xuICAgIHwgJ3RvYXN0ZXJJZCdcbiAgICB8ICdyZW1vdmVEZWxheSdcbiAgPlxuPjtcblxuZXhwb3J0IHR5cGUgRGVmYXVsdFRvYXN0T3B0aW9ucyA9IFRvYXN0T3B0aW9ucyAmIHtcbiAgW2tleSBpbiBUb2FzdFR5cGVdPzogVG9hc3RPcHRpb25zO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBUb2FzdGVyUHJvcHMge1xuICBwb3NpdGlvbj86IFRvYXN0UG9zaXRpb247XG4gIHRvYXN0T3B0aW9ucz86IERlZmF1bHRUb2FzdE9wdGlvbnM7XG4gIHJldmVyc2VPcmRlcj86IGJvb2xlYW47XG4gIGd1dHRlcj86IG51bWJlcjtcbiAgY29udGFpbmVyU3R5bGU/OiBSZWFjdC5DU1NQcm9wZXJ0aWVzO1xuICBjb250YWluZXJDbGFzc05hbWU/OiBzdHJpbmc7XG4gIHRvYXN0ZXJJZD86IHN0cmluZztcbiAgY2hpbGRyZW4/OiAodG9hc3Q6IFRvYXN0KSA9PiBSZWFjdC5SZWFjdEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9hc3RXcmFwcGVyUHJvcHMge1xuICBpZDogc3RyaW5nO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgb25IZWlnaHRVcGRhdGU6IChpZDogc3RyaW5nLCBoZWlnaHQ6IG51bWJlcikgPT4gdm9pZDtcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG59XG4iLCJleHBvcnQgY29uc3QgZ2VuSWQgPSAoKCkgPT4ge1xuICBsZXQgY291bnQgPSAwO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJldHVybiAoKytjb3VudCkudG9TdHJpbmcoKTtcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBwcmVmZXJzUmVkdWNlZE1vdGlvbiA9ICgoKSA9PiB7XG4gIC8vIENhY2hlIHJlc3VsdFxuICBsZXQgc2hvdWxkUmVkdWNlTW90aW9uOiBib29sZWFuIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgaWYgKHNob3VsZFJlZHVjZU1vdGlvbiA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBtZWRpYVF1ZXJ5ID0gbWF0Y2hNZWRpYSgnKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSknKTtcbiAgICAgIHNob3VsZFJlZHVjZU1vdGlvbiA9ICFtZWRpYVF1ZXJ5IHx8IG1lZGlhUXVlcnkubWF0Y2hlcztcbiAgICB9XG4gICAgcmV0dXJuIHNob3VsZFJlZHVjZU1vdGlvbjtcbiAgfTtcbn0pKCk7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBEZWZhdWx0VG9hc3RPcHRpb25zLCBUb2FzdCwgVG9hc3RUeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBUT0FTVF9FWFBJUkVfRElTTUlTU19ERUxBWSA9IDEwMDA7XG5leHBvcnQgY29uc3QgVE9BU1RfTElNSVQgPSAyMDtcbmV4cG9ydCBjb25zdCBERUZBVUxUX1RPQVNURVJfSUQgPSAnZGVmYXVsdCc7XG5cbmludGVyZmFjZSBUb2FzdGVyU2V0dGluZ3Mge1xuICB0b2FzdExpbWl0OiBudW1iZXI7XG59XG5cbmV4cG9ydCBlbnVtIEFjdGlvblR5cGUge1xuICBBRERfVE9BU1QsXG4gIFVQREFURV9UT0FTVCxcbiAgVVBTRVJUX1RPQVNULFxuICBESVNNSVNTX1RPQVNULFxuICBSRU1PVkVfVE9BU1QsXG4gIFNUQVJUX1BBVVNFLFxuICBFTkRfUEFVU0UsXG59XG5cbmV4cG9ydCB0eXBlIEFjdGlvbiA9XG4gIHwge1xuICAgICAgdHlwZTogQWN0aW9uVHlwZS5BRERfVE9BU1Q7XG4gICAgICB0b2FzdDogVG9hc3Q7XG4gICAgfVxuICB8IHtcbiAgICAgIHR5cGU6IEFjdGlvblR5cGUuVVBTRVJUX1RPQVNUO1xuICAgICAgdG9hc3Q6IFRvYXN0O1xuICAgIH1cbiAgfCB7XG4gICAgICB0eXBlOiBBY3Rpb25UeXBlLlVQREFURV9UT0FTVDtcbiAgICAgIHRvYXN0OiBQYXJ0aWFsPFRvYXN0PjtcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogQWN0aW9uVHlwZS5ESVNNSVNTX1RPQVNUO1xuICAgICAgdG9hc3RJZD86IHN0cmluZztcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogQWN0aW9uVHlwZS5SRU1PVkVfVE9BU1Q7XG4gICAgICB0b2FzdElkPzogc3RyaW5nO1xuICAgIH1cbiAgfCB7XG4gICAgICB0eXBlOiBBY3Rpb25UeXBlLlNUQVJUX1BBVVNFO1xuICAgICAgdGltZTogbnVtYmVyO1xuICAgIH1cbiAgfCB7XG4gICAgICB0eXBlOiBBY3Rpb25UeXBlLkVORF9QQVVTRTtcbiAgICAgIHRpbWU6IG51bWJlcjtcbiAgICB9O1xuXG5pbnRlcmZhY2UgVG9hc3RlclN0YXRlIHtcbiAgdG9hc3RzOiBUb2FzdFtdO1xuICBzZXR0aW5nczogVG9hc3RlclNldHRpbmdzO1xuICBwYXVzZWRBdDogbnVtYmVyIHwgdW5kZWZpbmVkO1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBbdG9hc3RlcklkOiBzdHJpbmddOiBUb2FzdGVyU3RhdGU7XG59XG5cbmV4cG9ydCBjb25zdCByZWR1Y2VyID0gKHN0YXRlOiBUb2FzdGVyU3RhdGUsIGFjdGlvbjogQWN0aW9uKTogVG9hc3RlclN0YXRlID0+IHtcbiAgY29uc3QgeyB0b2FzdExpbWl0IH0gPSBzdGF0ZS5zZXR0aW5ncztcblxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBBY3Rpb25UeXBlLkFERF9UT0FTVDpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICB0b2FzdHM6IFthY3Rpb24udG9hc3QsIC4uLnN0YXRlLnRvYXN0c10uc2xpY2UoMCwgdG9hc3RMaW1pdCksXG4gICAgICB9O1xuXG4gICAgY2FzZSBBY3Rpb25UeXBlLlVQREFURV9UT0FTVDpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICB0b2FzdHM6IHN0YXRlLnRvYXN0cy5tYXAoKHQpID0+XG4gICAgICAgICAgdC5pZCA9PT0gYWN0aW9uLnRvYXN0LmlkID8geyAuLi50LCAuLi5hY3Rpb24udG9hc3QgfSA6IHRcbiAgICAgICAgKSxcbiAgICAgIH07XG5cbiAgICBjYXNlIEFjdGlvblR5cGUuVVBTRVJUX1RPQVNUOlxuICAgICAgY29uc3QgeyB0b2FzdCB9ID0gYWN0aW9uO1xuICAgICAgcmV0dXJuIHJlZHVjZXIoc3RhdGUsIHtcbiAgICAgICAgdHlwZTogc3RhdGUudG9hc3RzLmZpbmQoKHQpID0+IHQuaWQgPT09IHRvYXN0LmlkKVxuICAgICAgICAgID8gQWN0aW9uVHlwZS5VUERBVEVfVE9BU1RcbiAgICAgICAgICA6IEFjdGlvblR5cGUuQUREX1RPQVNULFxuICAgICAgICB0b2FzdCxcbiAgICAgIH0pO1xuXG4gICAgY2FzZSBBY3Rpb25UeXBlLkRJU01JU1NfVE9BU1Q6XG4gICAgICBjb25zdCB7IHRvYXN0SWQgfSA9IGFjdGlvbjtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHRvYXN0czogc3RhdGUudG9hc3RzLm1hcCgodCkgPT5cbiAgICAgICAgICB0LmlkID09PSB0b2FzdElkIHx8IHRvYXN0SWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgLi4udCxcbiAgICAgICAgICAgICAgICBkaXNtaXNzZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdFxuICAgICAgICApLFxuICAgICAgfTtcbiAgICBjYXNlIEFjdGlvblR5cGUuUkVNT1ZFX1RPQVNUOlxuICAgICAgaWYgKGFjdGlvbi50b2FzdElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICB0b2FzdHM6IFtdLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHRvYXN0czogc3RhdGUudG9hc3RzLmZpbHRlcigodCkgPT4gdC5pZCAhPT0gYWN0aW9uLnRvYXN0SWQpLFxuICAgICAgfTtcblxuICAgIGNhc2UgQWN0aW9uVHlwZS5TVEFSVF9QQVVTRTpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBwYXVzZWRBdDogYWN0aW9uLnRpbWUsXG4gICAgICB9O1xuXG4gICAgY2FzZSBBY3Rpb25UeXBlLkVORF9QQVVTRTpcbiAgICAgIGNvbnN0IGRpZmYgPSBhY3Rpb24udGltZSAtIChzdGF0ZS5wYXVzZWRBdCB8fCAwKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHBhdXNlZEF0OiB1bmRlZmluZWQsXG4gICAgICAgIHRvYXN0czogc3RhdGUudG9hc3RzLm1hcCgodCkgPT4gKHtcbiAgICAgICAgICAuLi50LFxuICAgICAgICAgIHBhdXNlRHVyYXRpb246IHQucGF1c2VEdXJhdGlvbiArIGRpZmYsXG4gICAgICAgIH0pKSxcbiAgICAgIH07XG4gIH1cbn07XG5cbmNvbnN0IGxpc3RlbmVyczogQXJyYXk8XG4gIFt0b2FzdGVySWQ6IHN0cmluZywgcmVkdWNlcjogKHN0YXRlOiBUb2FzdGVyU3RhdGUpID0+IHZvaWRdXG4+ID0gW107XG5cbmNvbnN0IGRlZmF1bHRUb2FzdGVyU3RhdGU6IFRvYXN0ZXJTdGF0ZSA9IHtcbiAgdG9hc3RzOiBbXSxcbiAgcGF1c2VkQXQ6IHVuZGVmaW5lZCxcbiAgc2V0dGluZ3M6IHtcbiAgICB0b2FzdExpbWl0OiBUT0FTVF9MSU1JVCxcbiAgfSxcbn07XG5sZXQgbWVtb3J5U3RhdGU6IFN0YXRlID0ge307XG5cbmV4cG9ydCBjb25zdCBkaXNwYXRjaCA9IChhY3Rpb246IEFjdGlvbiwgdG9hc3RlcklkID0gREVGQVVMVF9UT0FTVEVSX0lEKSA9PiB7XG4gIG1lbW9yeVN0YXRlW3RvYXN0ZXJJZF0gPSByZWR1Y2VyKFxuICAgIG1lbW9yeVN0YXRlW3RvYXN0ZXJJZF0gfHwgZGVmYXVsdFRvYXN0ZXJTdGF0ZSxcbiAgICBhY3Rpb25cbiAgKTtcbiAgbGlzdGVuZXJzLmZvckVhY2goKFtpZCwgbGlzdGVuZXJdKSA9PiB7XG4gICAgaWYgKGlkID09PSB0b2FzdGVySWQpIHtcbiAgICAgIGxpc3RlbmVyKG1lbW9yeVN0YXRlW3RvYXN0ZXJJZF0pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZGlzcGF0Y2hBbGwgPSAoYWN0aW9uOiBBY3Rpb24pID0+XG4gIE9iamVjdC5rZXlzKG1lbW9yeVN0YXRlKS5mb3JFYWNoKCh0b2FzdGVySWQpID0+IGRpc3BhdGNoKGFjdGlvbiwgdG9hc3RlcklkKSk7XG5cbmV4cG9ydCBjb25zdCBnZXRUb2FzdGVySWRGcm9tVG9hc3RJZCA9ICh0b2FzdElkOiBzdHJpbmcpID0+XG4gIE9iamVjdC5rZXlzKG1lbW9yeVN0YXRlKS5maW5kKCh0b2FzdGVySWQpID0+XG4gICAgbWVtb3J5U3RhdGVbdG9hc3RlcklkXS50b2FzdHMuc29tZSgodCkgPT4gdC5pZCA9PT0gdG9hc3RJZClcbiAgKTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZURpc3BhdGNoID1cbiAgKHRvYXN0ZXJJZCA9IERFRkFVTFRfVE9BU1RFUl9JRCkgPT5cbiAgKGFjdGlvbjogQWN0aW9uKSA9PiB7XG4gICAgZGlzcGF0Y2goYWN0aW9uLCB0b2FzdGVySWQpO1xuICB9O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdFRpbWVvdXRzOiB7XG4gIFtrZXkgaW4gVG9hc3RUeXBlXTogbnVtYmVyO1xufSA9IHtcbiAgYmxhbms6IDQwMDAsXG4gIGVycm9yOiA0MDAwLFxuICBzdWNjZXNzOiAyMDAwLFxuICBsb2FkaW5nOiBJbmZpbml0eSxcbiAgY3VzdG9tOiA0MDAwLFxufTtcblxuZXhwb3J0IGNvbnN0IHVzZVN0b3JlID0gKFxuICB0b2FzdE9wdGlvbnM6IERlZmF1bHRUb2FzdE9wdGlvbnMgPSB7fSxcbiAgdG9hc3RlcklkOiBzdHJpbmcgPSBERUZBVUxUX1RPQVNURVJfSURcbik6IFRvYXN0ZXJTdGF0ZSA9PiB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8VG9hc3RlclN0YXRlPihcbiAgICBtZW1vcnlTdGF0ZVt0b2FzdGVySWRdIHx8IGRlZmF1bHRUb2FzdGVyU3RhdGVcbiAgKTtcbiAgY29uc3QgaW5pdGlhbCA9IHVzZVJlZihtZW1vcnlTdGF0ZVt0b2FzdGVySWRdKTtcblxuICAvLyBUT0RPOiBTd2l0Y2ggdG8gdXNlU3luY0V4dGVybmFsU3RvcmUgd2hlbiB0YXJnZXRpbmcgUmVhY3QgMTgrXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGluaXRpYWwuY3VycmVudCAhPT0gbWVtb3J5U3RhdGVbdG9hc3RlcklkXSkge1xuICAgICAgc2V0U3RhdGUobWVtb3J5U3RhdGVbdG9hc3RlcklkXSk7XG4gICAgfVxuICAgIGxpc3RlbmVycy5wdXNoKFt0b2FzdGVySWQsIHNldFN0YXRlXSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmZpbmRJbmRleCgoW2lkXSkgPT4gaWQgPT09IHRvYXN0ZXJJZCk7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbdG9hc3RlcklkXSk7XG5cbiAgY29uc3QgbWVyZ2VkVG9hc3RzID0gc3RhdGUudG9hc3RzLm1hcCgodCkgPT4gKHtcbiAgICAuLi50b2FzdE9wdGlvbnMsXG4gICAgLi4udG9hc3RPcHRpb25zW3QudHlwZV0sXG4gICAgLi4udCxcbiAgICByZW1vdmVEZWxheTpcbiAgICAgIHQucmVtb3ZlRGVsYXkgfHxcbiAgICAgIHRvYXN0T3B0aW9uc1t0LnR5cGVdPy5yZW1vdmVEZWxheSB8fFxuICAgICAgdG9hc3RPcHRpb25zPy5yZW1vdmVEZWxheSxcbiAgICBkdXJhdGlvbjpcbiAgICAgIHQuZHVyYXRpb24gfHxcbiAgICAgIHRvYXN0T3B0aW9uc1t0LnR5cGVdPy5kdXJhdGlvbiB8fFxuICAgICAgdG9hc3RPcHRpb25zPy5kdXJhdGlvbiB8fFxuICAgICAgZGVmYXVsdFRpbWVvdXRzW3QudHlwZV0sXG4gICAgc3R5bGU6IHtcbiAgICAgIC4uLnRvYXN0T3B0aW9ucy5zdHlsZSxcbiAgICAgIC4uLnRvYXN0T3B0aW9uc1t0LnR5cGVdPy5zdHlsZSxcbiAgICAgIC4uLnQuc3R5bGUsXG4gICAgfSxcbiAgfSkpO1xuXG4gIHJldHVybiB7XG4gICAgLi4uc3RhdGUsXG4gICAgdG9hc3RzOiBtZXJnZWRUb2FzdHMsXG4gIH07XG59O1xuIiwiaW1wb3J0IHtcbiAgUmVuZGVyYWJsZSxcbiAgVG9hc3QsXG4gIFRvYXN0T3B0aW9ucyxcbiAgVG9hc3RUeXBlLFxuICBEZWZhdWx0VG9hc3RPcHRpb25zLFxuICBWYWx1ZU9yRnVuY3Rpb24sXG4gIHJlc29sdmVWYWx1ZSxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBnZW5JZCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlRGlzcGF0Y2gsXG4gIEFjdGlvbixcbiAgQWN0aW9uVHlwZSxcbiAgZGlzcGF0Y2hBbGwsXG4gIGdldFRvYXN0ZXJJZEZyb21Ub2FzdElkLFxufSBmcm9tICcuL3N0b3JlJztcblxudHlwZSBNZXNzYWdlID0gVmFsdWVPckZ1bmN0aW9uPFJlbmRlcmFibGUsIFRvYXN0PjtcblxudHlwZSBUb2FzdEhhbmRsZXIgPSAobWVzc2FnZTogTWVzc2FnZSwgb3B0aW9ucz86IFRvYXN0T3B0aW9ucykgPT4gc3RyaW5nO1xuXG5jb25zdCBjcmVhdGVUb2FzdCA9IChcbiAgbWVzc2FnZTogTWVzc2FnZSxcbiAgdHlwZTogVG9hc3RUeXBlID0gJ2JsYW5rJyxcbiAgb3B0cz86IFRvYXN0T3B0aW9uc1xuKTogVG9hc3QgPT4gKHtcbiAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICB2aXNpYmxlOiB0cnVlLFxuICBkaXNtaXNzZWQ6IGZhbHNlLFxuICB0eXBlLFxuICBhcmlhUHJvcHM6IHtcbiAgICByb2xlOiAnc3RhdHVzJyxcbiAgICAnYXJpYS1saXZlJzogJ3BvbGl0ZScsXG4gIH0sXG4gIG1lc3NhZ2UsXG4gIHBhdXNlRHVyYXRpb246IDAsXG4gIC4uLm9wdHMsXG4gIGlkOiBvcHRzPy5pZCB8fCBnZW5JZCgpLFxufSk7XG5cbmNvbnN0IGNyZWF0ZUhhbmRsZXIgPVxuICAodHlwZT86IFRvYXN0VHlwZSk6IFRvYXN0SGFuZGxlciA9PlxuICAobWVzc2FnZSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHRvYXN0ID0gY3JlYXRlVG9hc3QobWVzc2FnZSwgdHlwZSwgb3B0aW9ucyk7XG5cbiAgICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZURpc3BhdGNoKFxuICAgICAgdG9hc3QudG9hc3RlcklkIHx8IGdldFRvYXN0ZXJJZEZyb21Ub2FzdElkKHRvYXN0LmlkKVxuICAgICk7XG5cbiAgICBkaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuVVBTRVJUX1RPQVNULCB0b2FzdCB9KTtcbiAgICByZXR1cm4gdG9hc3QuaWQ7XG4gIH07XG5cbmNvbnN0IHRvYXN0ID0gKG1lc3NhZ2U6IE1lc3NhZ2UsIG9wdHM/OiBUb2FzdE9wdGlvbnMpID0+XG4gIGNyZWF0ZUhhbmRsZXIoJ2JsYW5rJykobWVzc2FnZSwgb3B0cyk7XG5cbnRvYXN0LmVycm9yID0gY3JlYXRlSGFuZGxlcignZXJyb3InKTtcbnRvYXN0LnN1Y2Nlc3MgPSBjcmVhdGVIYW5kbGVyKCdzdWNjZXNzJyk7XG50b2FzdC5sb2FkaW5nID0gY3JlYXRlSGFuZGxlcignbG9hZGluZycpO1xudG9hc3QuY3VzdG9tID0gY3JlYXRlSGFuZGxlcignY3VzdG9tJyk7XG5cbi8qKlxuICogRGlzbWlzc2VzIHRoZSB0b2FzdCB3aXRoIHRoZSBnaXZlbiBpZC4gSWYgbm8gaWQgaXMgZ2l2ZW4sIGRpc21pc3NlcyBhbGwgdG9hc3RzLlxuICogVGhlIHRvYXN0IHdpbGwgdHJhbnNpdGlvbiBvdXQgYW5kIHRoZW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBET00uXG4gKiBBcHBsaWVzIHRvIGFsbCB0b2FzdGVycywgZXhjZXB0IHdoZW4gYSBgdG9hc3RlcklkYCBpcyBnaXZlbi5cbiAqL1xudG9hc3QuZGlzbWlzcyA9ICh0b2FzdElkPzogc3RyaW5nLCB0b2FzdGVySWQ/OiBzdHJpbmcpID0+IHtcbiAgY29uc3QgYWN0aW9uOiBBY3Rpb24gPSB7XG4gICAgdHlwZTogQWN0aW9uVHlwZS5ESVNNSVNTX1RPQVNULFxuICAgIHRvYXN0SWQsXG4gIH07XG5cbiAgaWYgKHRvYXN0ZXJJZCkge1xuICAgIGNyZWF0ZURpc3BhdGNoKHRvYXN0ZXJJZCkoYWN0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICBkaXNwYXRjaEFsbChhY3Rpb24pO1xuICB9XG59O1xuXG4vKipcbiAqIERpc21pc3NlcyBhbGwgdG9hc3RzLlxuICovXG50b2FzdC5kaXNtaXNzQWxsID0gKHRvYXN0ZXJJZD86IHN0cmluZykgPT4gdG9hc3QuZGlzbWlzcyh1bmRlZmluZWQsIHRvYXN0ZXJJZCk7XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgdG9hc3Qgd2l0aCB0aGUgZ2l2ZW4gaWQuXG4gKiBUaGUgdG9hc3Qgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIERPTSB3aXRob3V0IGFueSB0cmFuc2l0aW9uLlxuICovXG50b2FzdC5yZW1vdmUgPSAodG9hc3RJZD86IHN0cmluZywgdG9hc3RlcklkPzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGFjdGlvbjogQWN0aW9uID0ge1xuICAgIHR5cGU6IEFjdGlvblR5cGUuUkVNT1ZFX1RPQVNULFxuICAgIHRvYXN0SWQsXG4gIH07XG4gIGlmICh0b2FzdGVySWQpIHtcbiAgICBjcmVhdGVEaXNwYXRjaCh0b2FzdGVySWQpKGFjdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgZGlzcGF0Y2hBbGwoYWN0aW9uKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCB0b2FzdHMuXG4gKi9cbnRvYXN0LnJlbW92ZUFsbCA9ICh0b2FzdGVySWQ/OiBzdHJpbmcpID0+IHRvYXN0LnJlbW92ZSh1bmRlZmluZWQsIHRvYXN0ZXJJZCk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbG9hZGluZyB0b2FzdCB0aGF0IHdpbGwgYXV0b21hdGljYWxseSB1cGRhdGVzIHdpdGggdGhlIHByb21pc2UuXG4gKi9cbnRvYXN0LnByb21pc2UgPSA8VD4oXG4gIHByb21pc2U6IFByb21pc2U8VD4gfCAoKCkgPT4gUHJvbWlzZTxUPiksXG4gIG1zZ3M6IHtcbiAgICBsb2FkaW5nOiBSZW5kZXJhYmxlO1xuICAgIHN1Y2Nlc3M/OiBWYWx1ZU9yRnVuY3Rpb248UmVuZGVyYWJsZSwgVD47XG4gICAgZXJyb3I/OiBWYWx1ZU9yRnVuY3Rpb248UmVuZGVyYWJsZSwgYW55PjtcbiAgfSxcbiAgb3B0cz86IERlZmF1bHRUb2FzdE9wdGlvbnNcbikgPT4ge1xuICBjb25zdCBpZCA9IHRvYXN0LmxvYWRpbmcobXNncy5sb2FkaW5nLCB7IC4uLm9wdHMsIC4uLm9wdHM/LmxvYWRpbmcgfSk7XG5cbiAgaWYgKHR5cGVvZiBwcm9taXNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UoKTtcbiAgfVxuXG4gIHByb21pc2VcbiAgICAudGhlbigocCkgPT4ge1xuICAgICAgY29uc3Qgc3VjY2Vzc01lc3NhZ2UgPSBtc2dzLnN1Y2Nlc3NcbiAgICAgICAgPyByZXNvbHZlVmFsdWUobXNncy5zdWNjZXNzLCBwKVxuICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHN1Y2Nlc3NNZXNzYWdlKSB7XG4gICAgICAgIHRvYXN0LnN1Y2Nlc3Moc3VjY2Vzc01lc3NhZ2UsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICAuLi5vcHRzLFxuICAgICAgICAgIC4uLm9wdHM/LnN1Y2Nlc3MsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3QuZGlzbWlzcyhpZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcDtcbiAgICB9KVxuICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gbXNncy5lcnJvciA/IHJlc29sdmVWYWx1ZShtc2dzLmVycm9yLCBlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKGVycm9yTWVzc2FnZSkge1xuICAgICAgICB0b2FzdC5lcnJvcihlcnJvck1lc3NhZ2UsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICAuLi5vcHRzLFxuICAgICAgICAgIC4uLm9wdHM/LmVycm9yLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvYXN0LmRpc21pc3MoaWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuZXhwb3J0IHsgdG9hc3QgfTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNyZWF0ZURpc3BhdGNoLCBBY3Rpb25UeXBlLCB1c2VTdG9yZSwgZGlzcGF0Y2ggfSBmcm9tICcuL3N0b3JlJztcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAnLi90b2FzdCc7XG5pbXBvcnQgeyBEZWZhdWx0VG9hc3RPcHRpb25zLCBUb2FzdCwgVG9hc3RQb3NpdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgUkVNT1ZFX0RFTEFZID0gMTAwMDtcblxuZXhwb3J0IGNvbnN0IHVzZVRvYXN0ZXIgPSAoXG4gIHRvYXN0T3B0aW9ucz86IERlZmF1bHRUb2FzdE9wdGlvbnMsXG4gIHRvYXN0ZXJJZDogc3RyaW5nID0gJ2RlZmF1bHQnXG4pID0+IHtcbiAgY29uc3QgeyB0b2FzdHMsIHBhdXNlZEF0IH0gPSB1c2VTdG9yZSh0b2FzdE9wdGlvbnMsIHRvYXN0ZXJJZCk7XG4gIGNvbnN0IHRvYXN0VGltZW91dHMgPSB1c2VSZWYoXG4gICAgbmV3IE1hcDxUb2FzdFsnaWQnXSwgUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4+KClcbiAgKS5jdXJyZW50O1xuXG4gIGNvbnN0IGFkZFRvUmVtb3ZlUXVldWUgPSB1c2VDYWxsYmFjayhcbiAgICAodG9hc3RJZDogc3RyaW5nLCByZW1vdmVEZWxheSA9IFJFTU9WRV9ERUxBWSkgPT4ge1xuICAgICAgaWYgKHRvYXN0VGltZW91dHMuaGFzKHRvYXN0SWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0b2FzdFRpbWVvdXRzLmRlbGV0ZSh0b2FzdElkKTtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFjdGlvblR5cGUuUkVNT1ZFX1RPQVNULFxuICAgICAgICAgIHRvYXN0SWQ6IHRvYXN0SWQsXG4gICAgICAgIH0pO1xuICAgICAgfSwgcmVtb3ZlRGVsYXkpO1xuXG4gICAgICB0b2FzdFRpbWVvdXRzLnNldCh0b2FzdElkLCB0aW1lb3V0KTtcbiAgICB9LFxuICAgIFtdXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocGF1c2VkQXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHRpbWVvdXRzID0gdG9hc3RzLm1hcCgodCkgPT4ge1xuICAgICAgaWYgKHQuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZHVyYXRpb25MZWZ0ID1cbiAgICAgICAgKHQuZHVyYXRpb24gfHwgMCkgKyB0LnBhdXNlRHVyYXRpb24gLSAobm93IC0gdC5jcmVhdGVkQXQpO1xuXG4gICAgICBpZiAoZHVyYXRpb25MZWZ0IDwgMCkge1xuICAgICAgICBpZiAodC52aXNpYmxlKSB7XG4gICAgICAgICAgdG9hc3QuZGlzbWlzcyh0LmlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gc2V0VGltZW91dCgoKSA9PiB0b2FzdC5kaXNtaXNzKHQuaWQsIHRvYXN0ZXJJZCksIGR1cmF0aW9uTGVmdCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGltZW91dHMuZm9yRWFjaCgodGltZW91dCkgPT4gdGltZW91dCAmJiBjbGVhclRpbWVvdXQodGltZW91dCkpO1xuICAgIH07XG4gIH0sIFt0b2FzdHMsIHBhdXNlZEF0LCB0b2FzdGVySWRdKTtcblxuICBjb25zdCBkaXNwYXRjaCA9IHVzZUNhbGxiYWNrKGNyZWF0ZURpc3BhdGNoKHRvYXN0ZXJJZCksIFt0b2FzdGVySWRdKTtcblxuICBjb25zdCBzdGFydFBhdXNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFjdGlvblR5cGUuU1RBUlRfUEFVU0UsXG4gICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuICB9LCBbZGlzcGF0Y2hdKTtcblxuICBjb25zdCB1cGRhdGVIZWlnaHQgPSB1c2VDYWxsYmFjayhcbiAgICAodG9hc3RJZDogc3RyaW5nLCBoZWlnaHQ6IG51bWJlcikgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBY3Rpb25UeXBlLlVQREFURV9UT0FTVCxcbiAgICAgICAgdG9hc3Q6IHsgaWQ6IHRvYXN0SWQsIGhlaWdodCB9LFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBbZGlzcGF0Y2hdXG4gICk7XG5cbiAgY29uc3QgZW5kUGF1c2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHBhdXNlZEF0KSB7XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGUuRU5EX1BBVVNFLCB0aW1lOiBEYXRlLm5vdygpIH0pO1xuICAgIH1cbiAgfSwgW3BhdXNlZEF0LCBkaXNwYXRjaF0pO1xuXG4gIGNvbnN0IGNhbGN1bGF0ZU9mZnNldCA9IHVzZUNhbGxiYWNrKFxuICAgIChcbiAgICAgIHRvYXN0OiBUb2FzdCxcbiAgICAgIG9wdHM/OiB7XG4gICAgICAgIHJldmVyc2VPcmRlcj86IGJvb2xlYW47XG4gICAgICAgIGd1dHRlcj86IG51bWJlcjtcbiAgICAgICAgZGVmYXVsdFBvc2l0aW9uPzogVG9hc3RQb3NpdGlvbjtcbiAgICAgIH1cbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHsgcmV2ZXJzZU9yZGVyID0gZmFsc2UsIGd1dHRlciA9IDgsIGRlZmF1bHRQb3NpdGlvbiB9ID0gb3B0cyB8fCB7fTtcblxuICAgICAgY29uc3QgcmVsZXZhbnRUb2FzdHMgPSB0b2FzdHMuZmlsdGVyKFxuICAgICAgICAodCkgPT5cbiAgICAgICAgICAodC5wb3NpdGlvbiB8fCBkZWZhdWx0UG9zaXRpb24pID09PVxuICAgICAgICAgICAgKHRvYXN0LnBvc2l0aW9uIHx8IGRlZmF1bHRQb3NpdGlvbikgJiYgdC5oZWlnaHRcbiAgICAgICk7XG4gICAgICBjb25zdCB0b2FzdEluZGV4ID0gcmVsZXZhbnRUb2FzdHMuZmluZEluZGV4KCh0KSA9PiB0LmlkID09PSB0b2FzdC5pZCk7XG4gICAgICBjb25zdCB0b2FzdHNCZWZvcmUgPSByZWxldmFudFRvYXN0cy5maWx0ZXIoXG4gICAgICAgICh0b2FzdCwgaSkgPT4gaSA8IHRvYXN0SW5kZXggJiYgdG9hc3QudmlzaWJsZVxuICAgICAgKS5sZW5ndGg7XG5cbiAgICAgIGNvbnN0IG9mZnNldCA9IHJlbGV2YW50VG9hc3RzXG4gICAgICAgIC5maWx0ZXIoKHQpID0+IHQudmlzaWJsZSlcbiAgICAgICAgLnNsaWNlKC4uLihyZXZlcnNlT3JkZXIgPyBbdG9hc3RzQmVmb3JlICsgMV0gOiBbMCwgdG9hc3RzQmVmb3JlXSkpXG4gICAgICAgIC5yZWR1Y2UoKGFjYywgdCkgPT4gYWNjICsgKHQuaGVpZ2h0IHx8IDApICsgZ3V0dGVyLCAwKTtcblxuICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9LFxuICAgIFt0b2FzdHNdXG4gICk7XG5cbiAgLy8gS2VlcCB0cmFjayBvZiBkaXNtaXNzZWQgdG9hc3RzIGFuZCByZW1vdmUgdGhlbSBhZnRlciB0aGUgZGVsYXlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0b2FzdHMuZm9yRWFjaCgodG9hc3QpID0+IHtcbiAgICAgIGlmICh0b2FzdC5kaXNtaXNzZWQpIHtcbiAgICAgICAgYWRkVG9SZW1vdmVRdWV1ZSh0b2FzdC5pZCwgdG9hc3QucmVtb3ZlRGVsYXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdG9hc3QgYmVjb21lcyB2aXNpYmxlIGFnYWluLCByZW1vdmUgaXQgZnJvbSB0aGUgcXVldWVcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHRvYXN0VGltZW91dHMuZ2V0KHRvYXN0LmlkKTtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgdG9hc3RUaW1lb3V0cy5kZWxldGUodG9hc3QuaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFt0b2FzdHMsIGFkZFRvUmVtb3ZlUXVldWVdKTtcblxuICByZXR1cm4ge1xuICAgIHRvYXN0cyxcbiAgICBoYW5kbGVyczoge1xuICAgICAgdXBkYXRlSGVpZ2h0LFxuICAgICAgc3RhcnRQYXVzZSxcbiAgICAgIGVuZFBhdXNlLFxuICAgICAgY2FsY3VsYXRlT2Zmc2V0LFxuICAgIH0sXG4gIH07XG59O1xuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgc3R5bGVkLCBrZXlmcmFtZXMgfSBmcm9tICdnb29iZXInO1xuXG5pbXBvcnQgeyBUb2FzdCwgVG9hc3RQb3NpdGlvbiwgcmVzb2x2ZVZhbHVlLCBSZW5kZXJhYmxlIH0gZnJvbSAnLi4vY29yZS90eXBlcyc7XG5pbXBvcnQgeyBUb2FzdEljb24gfSBmcm9tICcuL3RvYXN0LWljb24nO1xuaW1wb3J0IHsgcHJlZmVyc1JlZHVjZWRNb3Rpb24gfSBmcm9tICcuLi9jb3JlL3V0aWxzJztcblxuY29uc3QgZW50ZXJBbmltYXRpb24gPSAoZmFjdG9yOiBudW1iZXIpID0+IGBcbjAlIHt0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsJHtmYWN0b3IgKiAtMjAwfSUsMCkgc2NhbGUoLjYpOyBvcGFjaXR5Oi41O31cbjEwMCUge3RyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlKDEpOyBvcGFjaXR5OjE7fVxuYDtcblxuY29uc3QgZXhpdEFuaW1hdGlvbiA9IChmYWN0b3I6IG51bWJlcikgPT4gYFxuMCUge3RyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwwLC0xcHgpIHNjYWxlKDEpOyBvcGFjaXR5OjE7fVxuMTAwJSB7dHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCR7ZmFjdG9yICogLTE1MH0lLC0xcHgpIHNjYWxlKC42KTsgb3BhY2l0eTowO31cbmA7XG5cbmNvbnN0IGZhZGVJbkFuaW1hdGlvbiA9IGAwJXtvcGFjaXR5OjA7fSAxMDAle29wYWNpdHk6MTt9YDtcbmNvbnN0IGZhZGVPdXRBbmltYXRpb24gPSBgMCV7b3BhY2l0eToxO30gMTAwJXtvcGFjaXR5OjA7fWA7XG5cbmNvbnN0IFRvYXN0QmFyQmFzZSA9IHN0eWxlZCgnZGl2JylgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJhY2tncm91bmQ6ICNmZmY7XG4gIGNvbG9yOiAjMzYzNjM2O1xuICBsaW5lLWhlaWdodDogMS4zO1xuICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtO1xuICBib3gtc2hhZG93OiAwIDNweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKSwgMCAzcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG4gIG1heC13aWR0aDogMzUwcHg7XG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICBwYWRkaW5nOiA4cHggMTBweDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuYDtcblxuY29uc3QgTWVzc2FnZSA9IHN0eWxlZCgnZGl2JylgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBtYXJnaW46IDRweCAxMHB4O1xuICBjb2xvcjogaW5oZXJpdDtcbiAgZmxleDogMSAxIGF1dG87XG4gIHdoaXRlLXNwYWNlOiBwcmUtbGluZTtcbmA7XG5cbmludGVyZmFjZSBUb2FzdEJhclByb3BzIHtcbiAgdG9hc3Q6IFRvYXN0O1xuICBwb3NpdGlvbj86IFRvYXN0UG9zaXRpb247XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2hpbGRyZW4/OiAoY29tcG9uZW50czoge1xuICAgIGljb246IFJlbmRlcmFibGU7XG4gICAgbWVzc2FnZTogUmVuZGVyYWJsZTtcbiAgfSkgPT4gUmVuZGVyYWJsZTtcbn1cblxuY29uc3QgZ2V0QW5pbWF0aW9uU3R5bGUgPSAoXG4gIHBvc2l0aW9uOiBUb2FzdFBvc2l0aW9uLFxuICB2aXNpYmxlOiBib29sZWFuXG4pOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0+IHtcbiAgY29uc3QgdG9wID0gcG9zaXRpb24uaW5jbHVkZXMoJ3RvcCcpO1xuICBjb25zdCBmYWN0b3IgPSB0b3AgPyAxIDogLTE7XG5cbiAgY29uc3QgW2VudGVyLCBleGl0XSA9IHByZWZlcnNSZWR1Y2VkTW90aW9uKClcbiAgICA/IFtmYWRlSW5BbmltYXRpb24sIGZhZGVPdXRBbmltYXRpb25dXG4gICAgOiBbZW50ZXJBbmltYXRpb24oZmFjdG9yKSwgZXhpdEFuaW1hdGlvbihmYWN0b3IpXTtcblxuICByZXR1cm4ge1xuICAgIGFuaW1hdGlvbjogdmlzaWJsZVxuICAgICAgPyBgJHtrZXlmcmFtZXMoZW50ZXIpfSAwLjM1cyBjdWJpYy1iZXppZXIoLjIxLDEuMDIsLjczLDEpIGZvcndhcmRzYFxuICAgICAgOiBgJHtrZXlmcmFtZXMoZXhpdCl9IDAuNHMgZm9yd2FyZHMgY3ViaWMtYmV6aWVyKC4wNiwuNzEsLjU1LDEpYCxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBUb2FzdEJhcjogUmVhY3QuRkM8VG9hc3RCYXJQcm9wcz4gPSBSZWFjdC5tZW1vKFxuICAoeyB0b2FzdCwgcG9zaXRpb24sIHN0eWxlLCBjaGlsZHJlbiB9KSA9PiB7XG4gICAgY29uc3QgYW5pbWF0aW9uU3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSB0b2FzdC5oZWlnaHRcbiAgICAgID8gZ2V0QW5pbWF0aW9uU3R5bGUoXG4gICAgICAgICAgdG9hc3QucG9zaXRpb24gfHwgcG9zaXRpb24gfHwgJ3RvcC1jZW50ZXInLFxuICAgICAgICAgIHRvYXN0LnZpc2libGVcbiAgICAgICAgKVxuICAgICAgOiB7IG9wYWNpdHk6IDAgfTtcblxuICAgIGNvbnN0IGljb24gPSA8VG9hc3RJY29uIHRvYXN0PXt0b2FzdH0gLz47XG4gICAgY29uc3QgbWVzc2FnZSA9IChcbiAgICAgIDxNZXNzYWdlIHsuLi50b2FzdC5hcmlhUHJvcHN9PlxuICAgICAgICB7cmVzb2x2ZVZhbHVlKHRvYXN0Lm1lc3NhZ2UsIHRvYXN0KX1cbiAgICAgIDwvTWVzc2FnZT5cbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxUb2FzdEJhckJhc2VcbiAgICAgICAgY2xhc3NOYW1lPXt0b2FzdC5jbGFzc05hbWV9XG4gICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgLi4uYW5pbWF0aW9uU3R5bGUsXG4gICAgICAgICAgLi4uc3R5bGUsXG4gICAgICAgICAgLi4udG9hc3Quc3R5bGUsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIHt0eXBlb2YgY2hpbGRyZW4gPT09ICdmdW5jdGlvbicgPyAoXG4gICAgICAgICAgY2hpbGRyZW4oe1xuICAgICAgICAgICAgaWNvbixcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgfSlcbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAge2ljb259XG4gICAgICAgICAgICB7bWVzc2FnZX1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvVG9hc3RCYXJCYXNlPlxuICAgICk7XG4gIH1cbik7XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBzdHlsZWQsIGtleWZyYW1lcyB9IGZyb20gJ2dvb2Jlcic7XG5cbmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnLi4vY29yZS90eXBlcyc7XG5pbXBvcnQgeyBFcnJvckljb24sIEVycm9yVGhlbWUgfSBmcm9tICcuL2Vycm9yJztcbmltcG9ydCB7IExvYWRlckljb24sIExvYWRlclRoZW1lIH0gZnJvbSAnLi9sb2FkZXInO1xuaW1wb3J0IHsgQ2hlY2ttYXJrSWNvbiwgQ2hlY2ttYXJrVGhlbWUgfSBmcm9tICcuL2NoZWNrbWFyayc7XG5cbmNvbnN0IFN0YXR1c1dyYXBwZXIgPSBzdHlsZWQoJ2RpdicpYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5gO1xuXG5jb25zdCBJbmRpY2F0b3JXcmFwcGVyID0gc3R5bGVkKCdkaXYnKWBcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWluLXdpZHRoOiAyMHB4O1xuICBtaW4taGVpZ2h0OiAyMHB4O1xuYDtcblxuY29uc3QgZW50ZXIgPSBrZXlmcmFtZXNgXG5mcm9tIHtcbiAgdHJhbnNmb3JtOiBzY2FsZSgwLjYpO1xuICBvcGFjaXR5OiAwLjQ7XG59XG50byB7XG4gIHRyYW5zZm9ybTogc2NhbGUoMSk7XG4gIG9wYWNpdHk6IDE7XG59YDtcblxuZXhwb3J0IGNvbnN0IEFuaW1hdGVkSWNvbldyYXBwZXIgPSBzdHlsZWQoJ2RpdicpYFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHRyYW5zZm9ybTogc2NhbGUoMC42KTtcbiAgb3BhY2l0eTogMC40O1xuICBtaW4td2lkdGg6IDIwcHg7XG4gIGFuaW1hdGlvbjogJHtlbnRlcn0gMC4zcyAwLjEycyBjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyLCAxLjI3NSlcbiAgICBmb3J3YXJkcztcbmA7XG5cbmV4cG9ydCB0eXBlIEljb25UaGVtZXMgPSBQYXJ0aWFsPHtcbiAgc3VjY2VzczogQ2hlY2ttYXJrVGhlbWU7XG4gIGVycm9yOiBFcnJvclRoZW1lO1xuICBsb2FkaW5nOiBMb2FkZXJUaGVtZTtcbn0+O1xuXG5leHBvcnQgY29uc3QgVG9hc3RJY29uOiBSZWFjdC5GQzx7XG4gIHRvYXN0OiBUb2FzdDtcbn0+ID0gKHsgdG9hc3QgfSkgPT4ge1xuICBjb25zdCB7IGljb24sIHR5cGUsIGljb25UaGVtZSB9ID0gdG9hc3Q7XG4gIGlmIChpY29uICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIGljb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gPEFuaW1hdGVkSWNvbldyYXBwZXI+e2ljb259PC9BbmltYXRlZEljb25XcmFwcGVyPjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGljb247XG4gICAgfVxuICB9XG5cbiAgaWYgKHR5cGUgPT09ICdibGFuaycpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEluZGljYXRvcldyYXBwZXI+XG4gICAgICA8TG9hZGVySWNvbiB7Li4uaWNvblRoZW1lfSAvPlxuICAgICAge3R5cGUgIT09ICdsb2FkaW5nJyAmJiAoXG4gICAgICAgIDxTdGF0dXNXcmFwcGVyPlxuICAgICAgICAgIHt0eXBlID09PSAnZXJyb3InID8gKFxuICAgICAgICAgICAgPEVycm9ySWNvbiB7Li4uaWNvblRoZW1lfSAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8Q2hlY2ttYXJrSWNvbiB7Li4uaWNvblRoZW1lfSAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvU3RhdHVzV3JhcHBlcj5cbiAgICAgICl9XG4gICAgPC9JbmRpY2F0b3JXcmFwcGVyPlxuICApO1xufTtcbiIsImltcG9ydCB7IHN0eWxlZCwga2V5ZnJhbWVzIH0gZnJvbSAnZ29vYmVyJztcblxuY29uc3QgY2lyY2xlQW5pbWF0aW9uID0ga2V5ZnJhbWVzYFxuZnJvbSB7XG4gIHRyYW5zZm9ybTogc2NhbGUoMCkgcm90YXRlKDQ1ZGVnKTtcblx0b3BhY2l0eTogMDtcbn1cbnRvIHtcbiB0cmFuc2Zvcm06IHNjYWxlKDEpIHJvdGF0ZSg0NWRlZyk7XG4gIG9wYWNpdHk6IDE7XG59YDtcblxuY29uc3QgZmlyc3RMaW5lQW5pbWF0aW9uID0ga2V5ZnJhbWVzYFxuZnJvbSB7XG4gIHRyYW5zZm9ybTogc2NhbGUoMCk7XG4gIG9wYWNpdHk6IDA7XG59XG50byB7XG4gIHRyYW5zZm9ybTogc2NhbGUoMSk7XG4gIG9wYWNpdHk6IDE7XG59YDtcblxuY29uc3Qgc2Vjb25kTGluZUFuaW1hdGlvbiA9IGtleWZyYW1lc2BcbmZyb20ge1xuICB0cmFuc2Zvcm06IHNjYWxlKDApIHJvdGF0ZSg5MGRlZyk7XG5cdG9wYWNpdHk6IDA7XG59XG50byB7XG4gIHRyYW5zZm9ybTogc2NhbGUoMSkgcm90YXRlKDkwZGVnKTtcblx0b3BhY2l0eTogMTtcbn1gO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yVGhlbWUge1xuICBwcmltYXJ5Pzogc3RyaW5nO1xuICBzZWNvbmRhcnk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBFcnJvckljb24gPSBzdHlsZWQoJ2RpdicpPEVycm9yVGhlbWU+YFxuICB3aWR0aDogMjBweDtcbiAgb3BhY2l0eTogMDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBiYWNrZ3JvdW5kOiAkeyhwKSA9PiBwLnByaW1hcnkgfHwgJyNmZjRiNGInfTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG5cbiAgYW5pbWF0aW9uOiAke2NpcmNsZUFuaW1hdGlvbn0gMC4zcyBjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyLCAxLjI3NSlcbiAgICBmb3J3YXJkcztcbiAgYW5pbWF0aW9uLWRlbGF5OiAxMDBtcztcblxuICAmOmFmdGVyLFxuICAmOmJlZm9yZSB7XG4gICAgY29udGVudDogJyc7XG4gICAgYW5pbWF0aW9uOiAke2ZpcnN0TGluZUFuaW1hdGlvbn0gMC4xNXMgZWFzZS1vdXQgZm9yd2FyZHM7XG4gICAgYW5pbWF0aW9uLWRlbGF5OiAxNTBtcztcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgIG9wYWNpdHk6IDA7XG4gICAgYmFja2dyb3VuZDogJHsocCkgPT4gcC5zZWNvbmRhcnkgfHwgJyNmZmYnfTtcbiAgICBib3R0b206IDlweDtcbiAgICBsZWZ0OiA0cHg7XG4gICAgaGVpZ2h0OiAycHg7XG4gICAgd2lkdGg6IDEycHg7XG4gIH1cblxuICAmOmJlZm9yZSB7XG4gICAgYW5pbWF0aW9uOiAke3NlY29uZExpbmVBbmltYXRpb259IDAuMTVzIGVhc2Utb3V0IGZvcndhcmRzO1xuICAgIGFuaW1hdGlvbi1kZWxheTogMTgwbXM7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpO1xuICB9XG5gO1xuIiwiaW1wb3J0IHsgc3R5bGVkLCBrZXlmcmFtZXMgfSBmcm9tICdnb29iZXInO1xuXG5jb25zdCByb3RhdGUgPSBrZXlmcmFtZXNgXG4gIGZyb20ge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xuICB9XG4gIHRvIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICB9XG5gO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvYWRlclRoZW1lIHtcbiAgcHJpbWFyeT86IHN0cmluZztcbiAgc2Vjb25kYXJ5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgTG9hZGVySWNvbiA9IHN0eWxlZCgnZGl2Jyk8TG9hZGVyVGhlbWU+YFxuICB3aWR0aDogMTJweDtcbiAgaGVpZ2h0OiAxMnB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IDJweCBzb2xpZDtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgYm9yZGVyLWNvbG9yOiAkeyhwKSA9PiBwLnNlY29uZGFyeSB8fCAnI2UwZTBlMCd9O1xuICBib3JkZXItcmlnaHQtY29sb3I6ICR7KHApID0+IHAucHJpbWFyeSB8fCAnIzYxNjE2MSd9O1xuICBhbmltYXRpb246ICR7cm90YXRlfSAxcyBsaW5lYXIgaW5maW5pdGU7XG5gO1xuIiwiaW1wb3J0IHsgc3R5bGVkLCBrZXlmcmFtZXMgfSBmcm9tICdnb29iZXInO1xuXG5jb25zdCBjaXJjbGVBbmltYXRpb24gPSBrZXlmcmFtZXNgXG5mcm9tIHtcbiAgdHJhbnNmb3JtOiBzY2FsZSgwKSByb3RhdGUoNDVkZWcpO1xuXHRvcGFjaXR5OiAwO1xufVxudG8ge1xuICB0cmFuc2Zvcm06IHNjYWxlKDEpIHJvdGF0ZSg0NWRlZyk7XG5cdG9wYWNpdHk6IDE7XG59YDtcblxuY29uc3QgY2hlY2ttYXJrQW5pbWF0aW9uID0ga2V5ZnJhbWVzYFxuMCUge1xuXHRoZWlnaHQ6IDA7XG5cdHdpZHRoOiAwO1xuXHRvcGFjaXR5OiAwO1xufVxuNDAlIHtcbiAgaGVpZ2h0OiAwO1xuXHR3aWR0aDogNnB4O1xuXHRvcGFjaXR5OiAxO1xufVxuMTAwJSB7XG4gIG9wYWNpdHk6IDE7XG4gIGhlaWdodDogMTBweDtcbn1gO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoZWNrbWFya1RoZW1lIHtcbiAgcHJpbWFyeT86IHN0cmluZztcbiAgc2Vjb25kYXJ5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgQ2hlY2ttYXJrSWNvbiA9IHN0eWxlZCgnZGl2Jyk8Q2hlY2ttYXJrVGhlbWU+YFxuICB3aWR0aDogMjBweDtcbiAgb3BhY2l0eTogMDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBiYWNrZ3JvdW5kOiAkeyhwKSA9PiBwLnByaW1hcnkgfHwgJyM2MWQzNDUnfTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG5cbiAgYW5pbWF0aW9uOiAke2NpcmNsZUFuaW1hdGlvbn0gMC4zcyBjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyLCAxLjI3NSlcbiAgICBmb3J3YXJkcztcbiAgYW5pbWF0aW9uLWRlbGF5OiAxMDBtcztcbiAgJjphZnRlciB7XG4gICAgY29udGVudDogJyc7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBhbmltYXRpb246ICR7Y2hlY2ttYXJrQW5pbWF0aW9ufSAwLjJzIGVhc2Utb3V0IGZvcndhcmRzO1xuICAgIG9wYWNpdHk6IDA7XG4gICAgYW5pbWF0aW9uLWRlbGF5OiAyMDBtcztcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQ7XG4gICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkO1xuICAgIGJvcmRlci1jb2xvcjogJHsocCkgPT4gcC5zZWNvbmRhcnkgfHwgJyNmZmYnfTtcbiAgICBib3R0b206IDZweDtcbiAgICBsZWZ0OiA2cHg7XG4gICAgaGVpZ2h0OiAxMHB4O1xuICAgIHdpZHRoOiA2cHg7XG4gIH1cbmA7XG4iLCJpbXBvcnQgeyBjc3MsIHNldHVwIH0gZnJvbSAnZ29vYmVyJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7XG4gIHJlc29sdmVWYWx1ZSxcbiAgVG9hc3RlclByb3BzLFxuICBUb2FzdFBvc2l0aW9uLFxuICBUb2FzdFdyYXBwZXJQcm9wcyxcbn0gZnJvbSAnLi4vY29yZS90eXBlcyc7XG5pbXBvcnQgeyB1c2VUb2FzdGVyIH0gZnJvbSAnLi4vY29yZS91c2UtdG9hc3Rlcic7XG5pbXBvcnQgeyBwcmVmZXJzUmVkdWNlZE1vdGlvbiB9IGZyb20gJy4uL2NvcmUvdXRpbHMnO1xuaW1wb3J0IHsgVG9hc3RCYXIgfSBmcm9tICcuL3RvYXN0LWJhcic7XG5cbnNldHVwKFJlYWN0LmNyZWF0ZUVsZW1lbnQpO1xuXG5jb25zdCBUb2FzdFdyYXBwZXIgPSAoe1xuICBpZCxcbiAgY2xhc3NOYW1lLFxuICBzdHlsZSxcbiAgb25IZWlnaHRVcGRhdGUsXG4gIGNoaWxkcmVuLFxufTogVG9hc3RXcmFwcGVyUHJvcHMpID0+IHtcbiAgY29uc3QgcmVmID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKGVsOiBIVE1MRWxlbWVudCB8IG51bGwpID0+IHtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICBjb25zdCB1cGRhdGVIZWlnaHQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgICAgICAgIG9uSGVpZ2h0VXBkYXRlKGlkLCBoZWlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICB1cGRhdGVIZWlnaHQoKTtcbiAgICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIodXBkYXRlSGVpZ2h0KS5vYnNlcnZlKGVsLCB7XG4gICAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbaWQsIG9uSGVpZ2h0VXBkYXRlXVxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e3JlZn0gY2xhc3NOYW1lPXtjbGFzc05hbWV9IHN0eWxlPXtzdHlsZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5jb25zdCBnZXRQb3NpdGlvblN0eWxlID0gKFxuICBwb3NpdGlvbjogVG9hc3RQb3NpdGlvbixcbiAgb2Zmc2V0OiBudW1iZXJcbik6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPT4ge1xuICBjb25zdCB0b3AgPSBwb3NpdGlvbi5pbmNsdWRlcygndG9wJyk7XG4gIGNvbnN0IHZlcnRpY2FsU3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSB0b3AgPyB7IHRvcDogMCB9IDogeyBib3R0b206IDAgfTtcbiAgY29uc3QgaG9yaXpvbnRhbFN0eWxlOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0gcG9zaXRpb24uaW5jbHVkZXMoJ2NlbnRlcicpXG4gICAgPyB7XG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgIH1cbiAgICA6IHBvc2l0aW9uLmluY2x1ZGVzKCdyaWdodCcpXG4gICAgPyB7XG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuICAgICAgfVxuICAgIDoge307XG4gIHJldHVybiB7XG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMCxcbiAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdHJhbnNpdGlvbjogcHJlZmVyc1JlZHVjZWRNb3Rpb24oKVxuICAgICAgPyB1bmRlZmluZWRcbiAgICAgIDogYGFsbCAyMzBtcyBjdWJpYy1iZXppZXIoLjIxLDEuMDIsLjczLDEpYCxcbiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7b2Zmc2V0ICogKHRvcCA/IDEgOiAtMSl9cHgpYCxcbiAgICAuLi52ZXJ0aWNhbFN0eWxlLFxuICAgIC4uLmhvcml6b250YWxTdHlsZSxcbiAgfTtcbn07XG5cbmNvbnN0IGFjdGl2ZUNsYXNzID0gY3NzYFxuICB6LWluZGV4OiA5OTk5O1xuICA+ICoge1xuICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICB9XG5gO1xuXG5jb25zdCBERUZBVUxUX09GRlNFVCA9IDE2O1xuXG5leHBvcnQgY29uc3QgVG9hc3RlcjogUmVhY3QuRkM8VG9hc3RlclByb3BzPiA9ICh7XG4gIHJldmVyc2VPcmRlcixcbiAgcG9zaXRpb24gPSAndG9wLWNlbnRlcicsXG4gIHRvYXN0T3B0aW9ucyxcbiAgZ3V0dGVyLFxuICBjaGlsZHJlbixcbiAgdG9hc3RlcklkLFxuICBjb250YWluZXJTdHlsZSxcbiAgY29udGFpbmVyQ2xhc3NOYW1lLFxufSkgPT4ge1xuICBjb25zdCB7IHRvYXN0cywgaGFuZGxlcnMgfSA9IHVzZVRvYXN0ZXIodG9hc3RPcHRpb25zLCB0b2FzdGVySWQpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgZGF0YS1yaHQtdG9hc3Rlcj17dG9hc3RlcklkIHx8ICcnfVxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgIHpJbmRleDogOTk5OSxcbiAgICAgICAgdG9wOiBERUZBVUxUX09GRlNFVCxcbiAgICAgICAgbGVmdDogREVGQVVMVF9PRkZTRVQsXG4gICAgICAgIHJpZ2h0OiBERUZBVUxUX09GRlNFVCxcbiAgICAgICAgYm90dG9tOiBERUZBVUxUX09GRlNFVCxcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICAuLi5jb250YWluZXJTdHlsZSxcbiAgICAgIH19XG4gICAgICBjbGFzc05hbWU9e2NvbnRhaW5lckNsYXNzTmFtZX1cbiAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlcnMuc3RhcnRQYXVzZX1cbiAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlcnMuZW5kUGF1c2V9XG4gICAgPlxuICAgICAge3RvYXN0cy5tYXAoKHQpID0+IHtcbiAgICAgICAgY29uc3QgdG9hc3RQb3NpdGlvbiA9IHQucG9zaXRpb24gfHwgcG9zaXRpb247XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGhhbmRsZXJzLmNhbGN1bGF0ZU9mZnNldCh0LCB7XG4gICAgICAgICAgcmV2ZXJzZU9yZGVyLFxuICAgICAgICAgIGd1dHRlcixcbiAgICAgICAgICBkZWZhdWx0UG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcG9zaXRpb25TdHlsZSA9IGdldFBvc2l0aW9uU3R5bGUodG9hc3RQb3NpdGlvbiwgb2Zmc2V0KTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxUb2FzdFdyYXBwZXJcbiAgICAgICAgICAgIGlkPXt0LmlkfVxuICAgICAgICAgICAga2V5PXt0LmlkfVxuICAgICAgICAgICAgb25IZWlnaHRVcGRhdGU9e2hhbmRsZXJzLnVwZGF0ZUhlaWdodH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17dC52aXNpYmxlID8gYWN0aXZlQ2xhc3MgOiAnJ31cbiAgICAgICAgICAgIHN0eWxlPXtwb3NpdGlvblN0eWxlfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0LnR5cGUgPT09ICdjdXN0b20nID8gKFxuICAgICAgICAgICAgICByZXNvbHZlVmFsdWUodC5tZXNzYWdlLCB0KVxuICAgICAgICAgICAgKSA6IGNoaWxkcmVuID8gKFxuICAgICAgICAgICAgICBjaGlsZHJlbih0KVxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPFRvYXN0QmFyIHRvYXN0PXt0fSBwb3NpdGlvbj17dG9hc3RQb3NpdGlvbn0gLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9Ub2FzdFdyYXBwZXI+XG4gICAgICAgICk7XG4gICAgICB9KX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG4iLCJpbXBvcnQgeyB0b2FzdCB9IGZyb20gJy4vY29yZS90b2FzdCc7XG5cbmV4cG9ydCAqIGZyb20gJy4vaGVhZGxlc3MnO1xuXG5leHBvcnQgeyBUb2FzdEJhciB9IGZyb20gJy4vY29tcG9uZW50cy90b2FzdC1iYXInO1xuZXhwb3J0IHsgVG9hc3RJY29uIH0gZnJvbSAnLi9jb21wb25lbnRzL3RvYXN0LWljb24nO1xuZXhwb3J0IHsgVG9hc3RlciB9IGZyb20gJy4vY29tcG9uZW50cy90b2FzdGVyJztcbmV4cG9ydCB7IENoZWNrbWFya0ljb24gfSBmcm9tICcuL2NvbXBvbmVudHMvY2hlY2ttYXJrJztcbmV4cG9ydCB7IEVycm9ySWNvbiB9IGZyb20gJy4vY29tcG9uZW50cy9lcnJvcic7XG5leHBvcnQgeyBMb2FkZXJJY29uIH0gZnJvbSAnLi9jb21wb25lbnRzL2xvYWRlcic7XG5cbmV4cG9ydCB7IHRvYXN0IH07XG5leHBvcnQgZGVmYXVsdCB0b2FzdDtcbiJdLCJuYW1lcyI6WyJpc0Z1bmN0aW9uIiwidmFsT3JGdW5jdGlvbiIsInJlc29sdmVWYWx1ZSIsImFyZyIsImdlbklkIiwiY291bnQiLCJwcmVmZXJzUmVkdWNlZE1vdGlvbiIsInNob3VsZFJlZHVjZU1vdGlvbiIsIm1lZGlhUXVlcnkiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsIlRPQVNUX0xJTUlUIiwiREVGQVVMVF9UT0FTVEVSX0lEIiwicmVkdWNlciIsInN0YXRlIiwiYWN0aW9uIiwidG9hc3RMaW1pdCIsInQiLCJ0b2FzdCIsInRvYXN0SWQiLCJkaWZmIiwibGlzdGVuZXJzIiwiZGVmYXVsdFRvYXN0ZXJTdGF0ZSIsIm1lbW9yeVN0YXRlIiwiZGlzcGF0Y2giLCJ0b2FzdGVySWQiLCJpZCIsImxpc3RlbmVyIiwiZGlzcGF0Y2hBbGwiLCJnZXRUb2FzdGVySWRGcm9tVG9hc3RJZCIsImNyZWF0ZURpc3BhdGNoIiwiZGVmYXVsdFRpbWVvdXRzIiwidXNlU3RvcmUiLCJ0b2FzdE9wdGlvbnMiLCJzZXRTdGF0ZSIsImluaXRpYWwiLCJpbmRleCIsIm1lcmdlZFRvYXN0cyIsIl9hIiwiX2IiLCJfYyIsImNyZWF0ZVRvYXN0IiwibWVzc2FnZSIsInR5cGUiLCJvcHRzIiwiY3JlYXRlSGFuZGxlciIsIm9wdGlvbnMiLCJwcm9taXNlIiwibXNncyIsInAiLCJzdWNjZXNzTWVzc2FnZSIsImUiLCJlcnJvck1lc3NhZ2UiLCJ1c2VDYWxsYmFjayIsIlJFTU9WRV9ERUxBWSIsInVzZVRvYXN0ZXIiLCJ0b2FzdHMiLCJwYXVzZWRBdCIsInRvYXN0VGltZW91dHMiLCJhZGRUb1JlbW92ZVF1ZXVlIiwicmVtb3ZlRGVsYXkiLCJ0aW1lb3V0Iiwibm93IiwidGltZW91dHMiLCJkdXJhdGlvbkxlZnQiLCJzdGFydFBhdXNlIiwidXBkYXRlSGVpZ2h0IiwiaGVpZ2h0IiwiZW5kUGF1c2UiLCJjYWxjdWxhdGVPZmZzZXQiLCJyZXZlcnNlT3JkZXIiLCJndXR0ZXIiLCJkZWZhdWx0UG9zaXRpb24iLCJyZWxldmFudFRvYXN0cyIsInRvYXN0SW5kZXgiLCJ0b2FzdHNCZWZvcmUiLCJpIiwiYWNjIiwiUmVhY3QiLCJzdHlsZWQiLCJrZXlmcmFtZXMiLCJjaXJjbGVBbmltYXRpb24iLCJmaXJzdExpbmVBbmltYXRpb24iLCJzZWNvbmRMaW5lQW5pbWF0aW9uIiwiRXJyb3JJY29uIiwicm90YXRlIiwiTG9hZGVySWNvbiIsImNoZWNrbWFya0FuaW1hdGlvbiIsIkNoZWNrbWFya0ljb24iLCJTdGF0dXNXcmFwcGVyIiwiSW5kaWNhdG9yV3JhcHBlciIsImVudGVyIiwiQW5pbWF0ZWRJY29uV3JhcHBlciIsIlRvYXN0SWNvbiIsImljb24iLCJpY29uVGhlbWUiLCJlbnRlckFuaW1hdGlvbiIsImZhY3RvciIsImV4aXRBbmltYXRpb24iLCJmYWRlSW5BbmltYXRpb24iLCJmYWRlT3V0QW5pbWF0aW9uIiwiVG9hc3RCYXJCYXNlIiwiTWVzc2FnZSIsImdldEFuaW1hdGlvblN0eWxlIiwicG9zaXRpb24iLCJ2aXNpYmxlIiwiZXhpdCIsIlRvYXN0QmFyIiwic3R5bGUiLCJjaGlsZHJlbiIsImFuaW1hdGlvblN0eWxlIiwiY3NzIiwic2V0dXAiLCJUb2FzdFdyYXBwZXIiLCJjbGFzc05hbWUiLCJvbkhlaWdodFVwZGF0ZSIsInJlZiIsImVsIiwiZ2V0UG9zaXRpb25TdHlsZSIsIm9mZnNldCIsInRvcCIsInZlcnRpY2FsU3R5bGUiLCJob3Jpem9udGFsU3R5bGUiLCJhY3RpdmVDbGFzcyIsIkRFRkFVTFRfT0ZGU0VUIiwiVG9hc3RlciIsImNvbnRhaW5lclN0eWxlIiwiY29udGFpbmVyQ2xhc3NOYW1lIiwiaGFuZGxlcnMiLCJ0b2FzdFBvc2l0aW9uIiwicG9zaXRpb25TdHlsZSIsInNyY19kZWZhdWx0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/react-hot-toast/dist/index.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zod/v3/ZodError.js":
/*!*****************************************!*\
  !*** ./node_modules/zod/v3/ZodError.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZodError: () => (/* binding */ ZodError),\n/* harmony export */   ZodIssueCode: () => (/* binding */ ZodIssueCode),\n/* harmony export */   quotelessJson: () => (/* binding */ quotelessJson)\n/* harmony export */ });\n/* harmony import */ var _helpers_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers/util.js */ \"(app-pages-browser)/./node_modules/zod/v3/helpers/util.js\");\n\nconst ZodIssueCode = _helpers_util_js__WEBPACK_IMPORTED_MODULE_0__.util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nclass ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, _helpers_util_js__WEBPACK_IMPORTED_MODULE_0__.util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96b2QvdjMvWm9kRXJyb3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5QztBQUNsQyxxQkFBcUIsa0RBQUk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQSwwREFBMEQ7QUFDMUQsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxNQUFNO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxrREFBSTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy96b2QvdjMvWm9kRXJyb3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvdXRpbC5qc1wiO1xuZXhwb3J0IGNvbnN0IFpvZElzc3VlQ29kZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwiaW52YWxpZF90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2xpdGVyYWxcIixcbiAgICBcImN1c3RvbVwiLFxuICAgIFwiaW52YWxpZF91bmlvblwiLFxuICAgIFwiaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yXCIsXG4gICAgXCJpbnZhbGlkX2VudW1fdmFsdWVcIixcbiAgICBcInVucmVjb2duaXplZF9rZXlzXCIsXG4gICAgXCJpbnZhbGlkX2FyZ3VtZW50c1wiLFxuICAgIFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiLFxuICAgIFwiaW52YWxpZF9kYXRlXCIsXG4gICAgXCJpbnZhbGlkX3N0cmluZ1wiLFxuICAgIFwidG9vX3NtYWxsXCIsXG4gICAgXCJ0b29fYmlnXCIsXG4gICAgXCJpbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlc1wiLFxuICAgIFwibm90X211bHRpcGxlX29mXCIsXG4gICAgXCJub3RfZmluaXRlXCIsXG5dKTtcbmV4cG9ydCBjb25zdCBxdW90ZWxlc3NKc29uID0gKG9iaikgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDIpO1xuICAgIHJldHVybiBqc29uLnJlcGxhY2UoL1wiKFteXCJdKylcIjovZywgXCIkMTpcIik7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGdldCBlcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3VlcztcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaXNzdWVzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gW107XG4gICAgICAgIHRoaXMuYWRkSXNzdWUgPSAoc3ViKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3Vlcywgc3ViXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZXMgPSAoc3VicyA9IFtdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3VlcywgLi4uc3Vic107XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFjdHVhbFByb3RvID0gbmV3LnRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgYWN0dWFsUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fX3Byb3RvX18gPSBhY3R1YWxQcm90bztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBcIlpvZEVycm9yXCI7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gaXNzdWVzO1xuICAgIH1cbiAgICBmb3JtYXQoX21hcHBlcikge1xuICAgICAgICBjb25zdCBtYXBwZXIgPSBfbWFwcGVyIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoaXNzdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNzdWUubWVzc2FnZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0geyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICBjb25zdCBwcm9jZXNzRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXNzdWUgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF91bmlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlLnVuaW9uRXJyb3JzLm1hcChwcm9jZXNzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfcmV0dXJuX3R5cGVcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUucmV0dXJuVHlwZUVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX2FyZ3VtZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5hcmd1bWVudHNFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyID0gZmllbGRFcnJvcnM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBpc3N1ZS5wYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBpc3N1ZS5wYXRoW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZS5wYXRoLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1pbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIGlmICh0eXBlb2YgZWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnN0IGVycm9yQXJyYXk6IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZXJyb3JBcnJheS5fZXJyb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IGVycm9yQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0uX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyciA9IGN1cnJbZWxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwcm9jZXNzRXJyb3IodGhpcyk7XG4gICAgICAgIHJldHVybiBmaWVsZEVycm9ycztcbiAgICB9XG4gICAgc3RhdGljIGFzc2VydCh2YWx1ZSkge1xuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIFpvZEVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgYSBab2RFcnJvcjogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlzc3VlcywgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIsIDIpO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgZmxhdHRlbihtYXBwZXIgPSAoaXNzdWUpID0+IGlzc3VlLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7fTtcbiAgICAgICAgY29uc3QgZm9ybUVycm9ycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiB0aGlzLmlzc3Vlcykge1xuICAgICAgICAgICAgaWYgKHN1Yi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdEVsID0gc3ViLnBhdGhbMF07XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbZmlyc3RFbF0gPSBmaWVsZEVycm9yc1tmaXJzdEVsXSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tmaXJzdEVsXS5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1FcnJvcnMucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZm9ybUVycm9ycywgZmllbGRFcnJvcnMgfTtcbiAgICB9XG4gICAgZ2V0IGZvcm1FcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXR0ZW4oKTtcbiAgICB9XG59XG5ab2RFcnJvci5jcmVhdGUgPSAoaXNzdWVzKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoaXNzdWVzKTtcbiAgICByZXR1cm4gZXJyb3I7XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zod/v3/ZodError.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zod/v3/errors.js":
/*!***************************************!*\
  !*** ./node_modules/zod/v3/errors.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultErrorMap: () => (/* reexport safe */ _locales_en_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   getErrorMap: () => (/* binding */ getErrorMap),\n/* harmony export */   setErrorMap: () => (/* binding */ setErrorMap)\n/* harmony export */ });\n/* harmony import */ var _locales_en_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locales/en.js */ \"(app-pages-browser)/./node_modules/zod/v3/locales/en.js\");\n\nlet overrideErrorMap = _locales_en_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96b2QvdjMvZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEM7QUFDOUMsdUJBQXVCLHNEQUFlO0FBQ1g7QUFDcEI7QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvamVyZW1pYWgvRGVza3RvcC9jMnBhIHRvb2wvbm9kZV9tb2R1bGVzL3pvZC92My9lcnJvcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi9sb2NhbGVzL2VuLmpzXCI7XG5sZXQgb3ZlcnJpZGVFcnJvck1hcCA9IGRlZmF1bHRFcnJvck1hcDtcbmV4cG9ydCB7IGRlZmF1bHRFcnJvck1hcCB9O1xuZXhwb3J0IGZ1bmN0aW9uIHNldEVycm9yTWFwKG1hcCkge1xuICAgIG92ZXJyaWRlRXJyb3JNYXAgPSBtYXA7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXJyb3JNYXAoKSB7XG4gICAgcmV0dXJuIG92ZXJyaWRlRXJyb3JNYXA7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zod/v3/errors.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zod/v3/helpers/errorUtil.js":
/*!**************************************************!*\
  !*** ./node_modules/zod/v3/helpers/errorUtil.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   errorUtil: () => (/* binding */ errorUtil)\n/* harmony export */ });\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96b2QvdjMvaGVscGVycy9lcnJvclV0aWwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQSxzRUFBc0UsVUFBVTtBQUNoRjtBQUNBO0FBQ0EsQ0FBQyw4QkFBOEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvZXJyb3JVdGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zod/v3/helpers/errorUtil.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zod/v3/helpers/parseUtil.js":
/*!**************************************************!*\
  !*** ./node_modules/zod/v3/helpers/parseUtil.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DIRTY: () => (/* binding */ DIRTY),\n/* harmony export */   EMPTY_PATH: () => (/* binding */ EMPTY_PATH),\n/* harmony export */   INVALID: () => (/* binding */ INVALID),\n/* harmony export */   OK: () => (/* binding */ OK),\n/* harmony export */   ParseStatus: () => (/* binding */ ParseStatus),\n/* harmony export */   addIssueToContext: () => (/* binding */ addIssueToContext),\n/* harmony export */   isAborted: () => (/* binding */ isAborted),\n/* harmony export */   isAsync: () => (/* binding */ isAsync),\n/* harmony export */   isDirty: () => (/* binding */ isDirty),\n/* harmony export */   isValid: () => (/* binding */ isValid),\n/* harmony export */   makeIssue: () => (/* binding */ makeIssue)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/zod/v3/errors.js\");\n/* harmony import */ var _locales_en_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../locales/en.js */ \"(app-pages-browser)/./node_modules/zod/v3/locales/en.js\");\n\n\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nconst EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const overrideMap = (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.getErrorMap)();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === _locales_en_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"] ? undefined : _locales_en_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"], // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nconst INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nconst OK = (value) => ({ status: \"valid\", value });\nconst isAborted = (x) => x.status === \"aborted\";\nconst isDirty = (x) => x.status === \"dirty\";\nconst isValid = (x) => x.status === \"valid\";\nconst isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96b2QvdjMvaGVscGVycy9wYXJzZVV0aWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUEyQztBQUNJO0FBQ3hDO0FBQ1AsWUFBWSxtQ0FBbUM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGtDQUFrQztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDUCx3QkFBd0IsdURBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzREFBZSxlQUFlLHNEQUFlO0FBQ3pFO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ087QUFDUDtBQUNBLENBQUM7QUFDTSw0QkFBNEIsd0JBQXdCO0FBQ3BELHlCQUF5Qix3QkFBd0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvcGFyc2VVdGlsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEVycm9yTWFwIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi4vbG9jYWxlcy9lbi5qc1wiO1xuZXhwb3J0IGNvbnN0IG1ha2VJc3N1ZSA9IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIHBhdGgsIGVycm9yTWFwcywgaXNzdWVEYXRhIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgZnVsbFBhdGggPSBbLi4ucGF0aCwgLi4uKGlzc3VlRGF0YS5wYXRoIHx8IFtdKV07XG4gICAgY29uc3QgZnVsbElzc3VlID0ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgIH07XG4gICAgaWYgKGlzc3VlRGF0YS5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICAgICAgbWVzc2FnZTogaXNzdWVEYXRhLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIGNvbnN0IG1hcHMgPSBlcnJvck1hcHNcbiAgICAgICAgLmZpbHRlcigobSkgPT4gISFtKVxuICAgICAgICAuc2xpY2UoKVxuICAgICAgICAucmV2ZXJzZSgpO1xuICAgIGZvciAoY29uc3QgbWFwIG9mIG1hcHMpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gbWFwKGZ1bGxJc3N1ZSwgeyBkYXRhLCBkZWZhdWx0RXJyb3I6IGVycm9yTWVzc2FnZSB9KS5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgRU1QVFlfUEFUSCA9IFtdO1xuZXhwb3J0IGZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVNYXAgPSBnZXRFcnJvck1hcCgpO1xuICAgIGNvbnN0IGlzc3VlID0gbWFrZUlzc3VlKHtcbiAgICAgICAgaXNzdWVEYXRhOiBpc3N1ZURhdGEsXG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgLy8gY29udGV4dHVhbCBlcnJvciBtYXAgaXMgZmlyc3QgcHJpb3JpdHlcbiAgICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCwgLy8gdGhlbiBzY2hlbWEtYm91bmQgbWFwIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAsIC8vIHRoZW4gZ2xvYmFsIG92ZXJyaWRlIG1hcFxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAgPT09IGRlZmF1bHRFcnJvck1hcCA/IHVuZGVmaW5lZCA6IGRlZmF1bHRFcnJvck1hcCwgLy8gdGhlbiBnbG9iYWwgZGVmYXVsdCBtYXBcbiAgICAgICAgXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgfSk7XG4gICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaChpc3N1ZSk7XG59XG5leHBvcnQgY2xhc3MgUGFyc2VTdGF0dXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJ2YWxpZFwiO1xuICAgIH1cbiAgICBkaXJ0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IFwidmFsaWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImRpcnR5XCI7XG4gICAgfVxuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJhYm9ydGVkXCI7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cykge1xuICAgICAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBhcnJheVZhbHVlLnB1c2gocy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBhcnJheVZhbHVlIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBtZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gcGFpcjtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiYgKHR5cGVvZiB2YWx1ZS52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiB8fCBwYWlyLmFsd2F5c1NldCkpIHtcbiAgICAgICAgICAgICAgICBmaW5hbE9iamVjdFtrZXkudmFsdWVdID0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE9iamVjdCB9O1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBJTlZBTElEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhdHVzOiBcImFib3J0ZWRcIixcbn0pO1xuZXhwb3J0IGNvbnN0IERJUlRZID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwiZGlydHlcIiwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgT0sgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBpc0Fib3J0ZWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiO1xuZXhwb3J0IGNvbnN0IGlzRGlydHkgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiZGlydHlcIjtcbmV4cG9ydCBjb25zdCBpc1ZhbGlkID0gKHgpID0+IHguc3RhdHVzID09PSBcInZhbGlkXCI7XG5leHBvcnQgY29uc3QgaXNBc3luYyA9ICh4KSA9PiB0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB4IGluc3RhbmNlb2YgUHJvbWlzZTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zod/v3/helpers/parseUtil.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zod/v3/helpers/util.js":
/*!*********************************************!*\
  !*** ./node_modules/zod/v3/helpers/util.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZodParsedType: () => (/* binding */ ZodParsedType),\n/* harmony export */   getParsedType: () => (/* binding */ getParsedType),\n/* harmony export */   objectUtil: () => (/* binding */ objectUtil),\n/* harmony export */   util: () => (/* binding */ util)\n/* harmony export */ });\nvar util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nconst ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96b2QvdjMvaGVscGVycy91dGlsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxJQUFJO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9CQUFvQjtBQUNkO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUMxQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvdXRpbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKF8pID0+IHsgfTtcbiAgICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbiAgICB1dGlsLmFzc2VydElzID0gYXNzZXJ0SXM7XG4gICAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIgPSBhc3NlcnROZXZlcjtcbiAgICB1dGlsLmFycmF5VG9FbnVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIG9ialtpdGVtXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSB1dGlsLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiB2YWxpZEtleXMpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ialtlXTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdEtleXMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09IFwiZnVuY3Rpb25cIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIHV0aWwuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICAgICAgaWYgKGNoZWNrZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHV0aWwuaXNJbnRlZ2VyID0gdHlwZW9mIE51bWJlci5pc0ludGVnZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/ICh2YWwpID0+IE51bWJlci5pc0ludGVnZXIodmFsKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgfVxuICAgIHV0aWwuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gICAgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIgPSAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbmV4cG9ydCB2YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3RyaW5nO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zod/v3/helpers/util.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zod/v3/locales/en.js":
/*!*******************************************!*\
  !*** ./node_modules/zod/v3/locales/en.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _ZodError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ZodError.js */ \"(app-pages-browser)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _helpers_util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/util.js */ \"(app-pages-browser)/./node_modules/zod/v3/helpers/util.js\");\n\n\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_type:\n            if (issue.received === _helpers_util_js__WEBPACK_IMPORTED_MODULE_1__.ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, _helpers_util_js__WEBPACK_IMPORTED_MODULE_1__.util.jsonStringifyReplacer)}`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${_helpers_util_js__WEBPACK_IMPORTED_MODULE_1__.util.joinValues(issue.keys, \", \")}`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${_helpers_util_js__WEBPACK_IMPORTED_MODULE_1__.util.joinValues(issue.options)}`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${_helpers_util_js__WEBPACK_IMPORTED_MODULE_1__.util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    _helpers_util_js__WEBPACK_IMPORTED_MODULE_1__.util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case _ZodError_js__WEBPACK_IMPORTED_MODULE_0__.ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            _helpers_util_js__WEBPACK_IMPORTED_MODULE_1__.util.assertNever(issue);\n    }\n    return { message };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (errorMap);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96b2QvdjMvbG9jYWxlcy9lbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFDVztBQUN6RDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCLG1DQUFtQywyREFBYTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZUFBZSxhQUFhLGVBQWU7QUFDakY7QUFDQTtBQUNBLGFBQWEsc0RBQVk7QUFDekIseURBQXlELCtCQUErQixrREFBSSx3QkFBd0I7QUFDcEg7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCLHdEQUF3RCxrREFBSSw4QkFBOEI7QUFDMUY7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCLCtEQUErRCxrREFBSSwyQkFBMkI7QUFDOUY7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCLHNEQUFzRCxrREFBSSwyQkFBMkIsY0FBYyxlQUFlO0FBQ2xIO0FBQ0EsYUFBYSxzREFBWTtBQUN6QjtBQUNBO0FBQ0EsYUFBYSxzREFBWTtBQUN6QjtBQUNBO0FBQ0EsYUFBYSxzREFBWTtBQUN6QjtBQUNBO0FBQ0EsYUFBYSxzREFBWTtBQUN6QjtBQUNBO0FBQ0EsOERBQThELDBCQUEwQjtBQUN4RjtBQUNBLHFDQUFxQyxTQUFTLG9EQUFvRCwwQkFBMEI7QUFDNUg7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLDRCQUE0QjtBQUM3RjtBQUNBO0FBQ0EsK0RBQStELDBCQUEwQjtBQUN6RjtBQUNBO0FBQ0Esb0JBQW9CLGtEQUFJO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxpQkFBaUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0RBQVk7QUFDekI7QUFDQSxnREFBZ0Qsc0VBQXNFLEVBQUUsZUFBZTtBQUN2STtBQUNBLGlEQUFpRCxpRUFBaUUsRUFBRSxlQUFlO0FBQ25JO0FBQ0EsNENBQTRDLG9HQUFvRyxFQUFFLGNBQWM7QUFDaEs7QUFDQSw0Q0FBNEMsb0dBQW9HLEVBQUUsY0FBYztBQUNoSztBQUNBLDBDQUEwQyxvR0FBb0csRUFBRSxnQ0FBZ0M7QUFDaEw7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzREFBWTtBQUN6QjtBQUNBLGdEQUFnRCxxRUFBcUUsRUFBRSxlQUFlO0FBQ3RJO0FBQ0EsaURBQWlELGlFQUFpRSxFQUFFLGVBQWU7QUFDbkk7QUFDQSw0Q0FBNEMsbUZBQW1GLEVBQUUsY0FBYztBQUMvSTtBQUNBLDRDQUE0QyxtRkFBbUYsRUFBRSxjQUFjO0FBQy9JO0FBQ0EsMENBQTBDLHlGQUF5RixFQUFFLGdDQUFnQztBQUNySztBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCLHNEQUFzRCxpQkFBaUI7QUFDdkU7QUFDQSxhQUFhLHNEQUFZO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrREFBSTtBQUNoQjtBQUNBLGFBQWE7QUFDYjtBQUNBLGlFQUFlLFFBQVEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2plcmVtaWFoL0Rlc2t0b3AvYzJwYSB0b29sL25vZGVfbW9kdWxlcy96b2QvdjMvbG9jYWxlcy9lbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBab2RJc3N1ZUNvZGUgfSBmcm9tIFwiLi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUgfSBmcm9tIFwiLi4vaGVscGVycy91dGlsLmpzXCI7XG5jb25zdCBlcnJvck1hcCA9IChpc3N1ZSwgX2N0eCkgPT4ge1xuICAgIGxldCBtZXNzYWdlO1xuICAgIHN3aXRjaCAoaXNzdWUuY29kZSkge1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGU6XG4gICAgICAgICAgICBpZiAoaXNzdWUucmVjZWl2ZWQgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiUmVxdWlyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRXhwZWN0ZWQgJHtpc3N1ZS5leHBlY3RlZH0sIHJlY2VpdmVkICR7aXNzdWUucmVjZWl2ZWR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2xpdGVyYWw6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgbGl0ZXJhbCB2YWx1ZSwgZXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShpc3N1ZS5leHBlY3RlZCwgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudW5yZWNvZ25pemVkX2tleXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYFVucmVjb2duaXplZCBrZXkocykgaW4gb2JqZWN0OiAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5rZXlzLCBcIiwgXCIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGVudW0gdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfSwgcmVjZWl2ZWQgJyR7aXNzdWUucmVjZWl2ZWR9J2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gYXJndW1lbnRzYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3JldHVybl90eXBlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIHJldHVybiB0eXBlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGF0ZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmc6XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbmNsdWRlc1wiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGluY2x1ZGUgXCIke2lzc3VlLnZhbGlkYXRpb24uaW5jbHVkZXN9XCJgO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24ucG9zaXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBhdCBvbmUgb3IgbW9yZSBwb3NpdGlvbnMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7aXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwic3RhcnRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IHN0YXJ0IHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uc3RhcnRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwiZW5kc1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBlbmQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5lbmRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlLnZhbGlkYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnZhbGlkYXRpb24gIT09IFwicmVnZXhcIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCAke2lzc3VlLnZhbGlkYXRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fc21hbGw6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgbW9yZSB0aGFuYH0gJHtpc3N1ZS5taW5pbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgb3ZlcmB9ICR7aXNzdWUubWluaW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1pbmltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fYmlnOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYHVuZGVyYH0gJHtpc3N1ZS5tYXhpbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBCaWdJbnQgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYHNtYWxsZXIgdGhhbiBvciBlcXVhbCB0b2AgOiBgc21hbGxlciB0aGFuYH0gJHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWF4aW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmN1c3RvbTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludGVyc2VjdGlvbiByZXN1bHRzIGNvdWxkIG5vdCBiZSBtZXJnZWRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke2lzc3VlLm11bHRpcGxlT2Z9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfZmluaXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiTnVtYmVyIG11c3QgYmUgZmluaXRlXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBfY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBtZXNzYWdlIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZXJyb3JNYXA7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zod/v3/locales/en.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zod/v3/types.js":
/*!**************************************!*\
  !*** ./node_modules/zod/v3/types.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BRAND: () => (/* binding */ BRAND),\n/* harmony export */   NEVER: () => (/* binding */ NEVER),\n/* harmony export */   Schema: () => (/* binding */ ZodType),\n/* harmony export */   ZodAny: () => (/* binding */ ZodAny),\n/* harmony export */   ZodArray: () => (/* binding */ ZodArray),\n/* harmony export */   ZodBigInt: () => (/* binding */ ZodBigInt),\n/* harmony export */   ZodBoolean: () => (/* binding */ ZodBoolean),\n/* harmony export */   ZodBranded: () => (/* binding */ ZodBranded),\n/* harmony export */   ZodCatch: () => (/* binding */ ZodCatch),\n/* harmony export */   ZodDate: () => (/* binding */ ZodDate),\n/* harmony export */   ZodDefault: () => (/* binding */ ZodDefault),\n/* harmony export */   ZodDiscriminatedUnion: () => (/* binding */ ZodDiscriminatedUnion),\n/* harmony export */   ZodEffects: () => (/* binding */ ZodEffects),\n/* harmony export */   ZodEnum: () => (/* binding */ ZodEnum),\n/* harmony export */   ZodFirstPartyTypeKind: () => (/* binding */ ZodFirstPartyTypeKind),\n/* harmony export */   ZodFunction: () => (/* binding */ ZodFunction),\n/* harmony export */   ZodIntersection: () => (/* binding */ ZodIntersection),\n/* harmony export */   ZodLazy: () => (/* binding */ ZodLazy),\n/* harmony export */   ZodLiteral: () => (/* binding */ ZodLiteral),\n/* harmony export */   ZodMap: () => (/* binding */ ZodMap),\n/* harmony export */   ZodNaN: () => (/* binding */ ZodNaN),\n/* harmony export */   ZodNativeEnum: () => (/* binding */ ZodNativeEnum),\n/* harmony export */   ZodNever: () => (/* binding */ ZodNever),\n/* harmony export */   ZodNull: () => (/* binding */ ZodNull),\n/* harmony export */   ZodNullable: () => (/* binding */ ZodNullable),\n/* harmony export */   ZodNumber: () => (/* binding */ ZodNumber),\n/* harmony export */   ZodObject: () => (/* binding */ ZodObject),\n/* harmony export */   ZodOptional: () => (/* binding */ ZodOptional),\n/* harmony export */   ZodPipeline: () => (/* binding */ ZodPipeline),\n/* harmony export */   ZodPromise: () => (/* binding */ ZodPromise),\n/* harmony export */   ZodReadonly: () => (/* binding */ ZodReadonly),\n/* harmony export */   ZodRecord: () => (/* binding */ ZodRecord),\n/* harmony export */   ZodSchema: () => (/* binding */ ZodType),\n/* harmony export */   ZodSet: () => (/* binding */ ZodSet),\n/* harmony export */   ZodString: () => (/* binding */ ZodString),\n/* harmony export */   ZodSymbol: () => (/* binding */ ZodSymbol),\n/* harmony export */   ZodTransformer: () => (/* binding */ ZodEffects),\n/* harmony export */   ZodTuple: () => (/* binding */ ZodTuple),\n/* harmony export */   ZodType: () => (/* binding */ ZodType),\n/* harmony export */   ZodUndefined: () => (/* binding */ ZodUndefined),\n/* harmony export */   ZodUnion: () => (/* binding */ ZodUnion),\n/* harmony export */   ZodUnknown: () => (/* binding */ ZodUnknown),\n/* harmony export */   ZodVoid: () => (/* binding */ ZodVoid),\n/* harmony export */   any: () => (/* binding */ anyType),\n/* harmony export */   array: () => (/* binding */ arrayType),\n/* harmony export */   bigint: () => (/* binding */ bigIntType),\n/* harmony export */   boolean: () => (/* binding */ booleanType),\n/* harmony export */   coerce: () => (/* binding */ coerce),\n/* harmony export */   custom: () => (/* binding */ custom),\n/* harmony export */   date: () => (/* binding */ dateType),\n/* harmony export */   datetimeRegex: () => (/* binding */ datetimeRegex),\n/* harmony export */   discriminatedUnion: () => (/* binding */ discriminatedUnionType),\n/* harmony export */   effect: () => (/* binding */ effectsType),\n/* harmony export */   \"enum\": () => (/* binding */ enumType),\n/* harmony export */   \"function\": () => (/* binding */ functionType),\n/* harmony export */   \"instanceof\": () => (/* binding */ instanceOfType),\n/* harmony export */   intersection: () => (/* binding */ intersectionType),\n/* harmony export */   late: () => (/* binding */ late),\n/* harmony export */   lazy: () => (/* binding */ lazyType),\n/* harmony export */   literal: () => (/* binding */ literalType),\n/* harmony export */   map: () => (/* binding */ mapType),\n/* harmony export */   nan: () => (/* binding */ nanType),\n/* harmony export */   nativeEnum: () => (/* binding */ nativeEnumType),\n/* harmony export */   never: () => (/* binding */ neverType),\n/* harmony export */   \"null\": () => (/* binding */ nullType),\n/* harmony export */   nullable: () => (/* binding */ nullableType),\n/* harmony export */   number: () => (/* binding */ numberType),\n/* harmony export */   object: () => (/* binding */ objectType),\n/* harmony export */   oboolean: () => (/* binding */ oboolean),\n/* harmony export */   onumber: () => (/* binding */ onumber),\n/* harmony export */   optional: () => (/* binding */ optionalType),\n/* harmony export */   ostring: () => (/* binding */ ostring),\n/* harmony export */   pipeline: () => (/* binding */ pipelineType),\n/* harmony export */   preprocess: () => (/* binding */ preprocessType),\n/* harmony export */   promise: () => (/* binding */ promiseType),\n/* harmony export */   record: () => (/* binding */ recordType),\n/* harmony export */   set: () => (/* binding */ setType),\n/* harmony export */   strictObject: () => (/* binding */ strictObjectType),\n/* harmony export */   string: () => (/* binding */ stringType),\n/* harmony export */   symbol: () => (/* binding */ symbolType),\n/* harmony export */   transformer: () => (/* binding */ effectsType),\n/* harmony export */   tuple: () => (/* binding */ tupleType),\n/* harmony export */   undefined: () => (/* binding */ undefinedType),\n/* harmony export */   union: () => (/* binding */ unionType),\n/* harmony export */   unknown: () => (/* binding */ unknownType),\n/* harmony export */   \"void\": () => (/* binding */ voidType)\n/* harmony export */ });\n/* harmony import */ var _ZodError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ZodError.js */ \"(app-pages-browser)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./errors.js */ \"(app-pages-browser)/./node_modules/zod/v3/errors.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./errors.js */ \"(app-pages-browser)/./node_modules/zod/v3/locales/en.js\");\n/* harmony import */ var _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers/errorUtil.js */ \"(app-pages-browser)/./node_modules/zod/v3/helpers/errorUtil.js\");\n/* harmony import */ var _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers/parseUtil.js */ \"(app-pages-browser)/./node_modules/zod/v3/helpers/parseUtil.js\");\n/* harmony import */ var _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers/util.js */ \"(app-pages-browser)/./node_modules/zod/v3/helpers/util.js\");\n\n\n\n\n\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if ((0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.getParsedType)(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.getParsedType)(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.getParsedType)(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if ((0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isAsync)(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.getParsedType)(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.getParsedType)(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.getParsedType)(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await ((0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isAsync)(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nfunction datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nclass ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const status = new _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                            code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                            code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"email\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"emoji\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"uuid\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"nanoid\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"cuid\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"cuid2\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"ulid\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"url\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"regex\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"duration\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"ip\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"jwt\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"cidr\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"base64\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        validation: \"base64url\",\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_string,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ..._helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        let ctx = undefined;\n        const status = new _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n            code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n            expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_date,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const status = new _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n            code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n            expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.array) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                    code: tooBig ? _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big : _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                    code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                    code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                        code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodError(result.ctx.common.issues));\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodError(issues));\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.object) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.getParsedType)(a);\n    const bType = (0,_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.getParsedType)(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.object && bType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.object) {\n        const bKeys = _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectKeys(b);\n        const sharedKeys = _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.array && bType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.date && bType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if ((0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isAborted)(parsedLeft) || (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isAborted)(parsedRight)) {\n                return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                    code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_intersection_types,\n                });\n                return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n            }\n            if ((0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isDirty)(parsedLeft) || (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isDirty)(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.array) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.object) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nclass ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.map) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.set) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                    code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                    code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: _helpers_errorUtil_js__WEBPACK_IMPORTED_MODULE_3__.errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.function) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.makeIssue)({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, (0,_errors_js__WEBPACK_IMPORTED_MODULE_4__.getErrorMap)(), _errors_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]].filter((x) => !!x),\n                issueData: {\n                    code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.makeIssue)({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, (0,_errors_js__WEBPACK_IMPORTED_MODULE_4__.getErrorMap)(), _errors_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]].filter((x) => !!x),\n                issueData: {\n                    code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(async function (...args) {\n                const error = new _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                received: ctx.data,\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                received: ctx.data,\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.string && ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.number) {\n            const expectedValues = _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectValues(nativeEnumValues);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(_helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.objectValues(nativeEnumValues);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                received: ctx.data,\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.promise && ctx.common.async === false) {\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        const promisified = ctx.parsedType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                    if (result.status === \"dirty\")\n                        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.DIRTY)(result.value);\n                    if (status.value === \"dirty\")\n                        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.DIRTY)(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                if (result.status === \"dirty\")\n                    return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.DIRTY)(result.value);\n                if (status.value === \"dirty\")\n                    return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.DIRTY)(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!(0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(base))\n                    return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!(0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(base))\n                        return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\n\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.undefined) {\n            return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.null) {\n            return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.OK)(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nclass ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if ((0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isAsync)(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.addIssueToContext)(ctx, {\n                code: _ZodError_js__WEBPACK_IMPORTED_MODULE_1__.ZodIssueCode.invalid_type,\n                expected: _helpers_util_js__WEBPACK_IMPORTED_MODULE_2__.ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nconst BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nclass ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.DIRTY)(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nclass ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if ((0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return (0,_helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.isAsync)(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nfunction custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\n\nconst late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nconst coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\n\nconst NEVER = _helpers_parseUtil_js__WEBPACK_IMPORTED_MODULE_0__.INVALID;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96b2QvdjMvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDRztBQUNSO0FBQzJGO0FBQ3ZFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQU87QUFDZixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msa0RBQVE7QUFDMUM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDREQUE0RDtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGdCQUFnQixVQUFVO0FBQzFCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwrREFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLCtEQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0RBQXNEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLFNBQVM7QUFDL0MsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCx5Q0FBeUMsc0JBQXNCO0FBQy9ELHlDQUF5QyxzQkFBc0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHlDQUF5QyxzQkFBc0I7QUFDL0QscUNBQXFDLHNCQUFzQjtBQUMzRDtBQUN3M0I7QUFDajNCLGNBQWMsMERBQU8iLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9EZXNrdG9wL2MycGEgdG9vbC9ub2RlX21vZHVsZXMvem9kL3YzL3R5cGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFpvZEVycm9yLCBab2RJc3N1ZUNvZGUsIH0gZnJvbSBcIi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRFcnJvck1hcCwgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGVycm9yVXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvZXJyb3JVdGlsLmpzXCI7XG5pbXBvcnQgeyBESVJUWSwgSU5WQUxJRCwgT0ssIFBhcnNlU3RhdHVzLCBhZGRJc3N1ZVRvQ29udGV4dCwgaXNBYm9ydGVkLCBpc0FzeW5jLCBpc0RpcnR5LCBpc1ZhbGlkLCBtYWtlSXNzdWUsIH0gZnJvbSBcIi4vaGVscGVycy9wYXJzZVV0aWwuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUsIGdldFBhcnNlZFR5cGUgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNsYXNzIFBhcnNlSW5wdXRMYXp5UGF0aCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB2YWx1ZSwgcGF0aCwga2V5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY3R4LmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gcmVxdWlyZWRfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBpbnZhbGlkX3R5cGVfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbmV4cG9ydCBjbGFzcyBab2RUeXBlIHtcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIF9nZXRUeXBlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBfZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCkge1xuICAgICAgICByZXR1cm4gKGN0eCB8fCB7XG4gICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ldyBQYXJzZVN0YXR1cygpLFxuICAgICAgICAgICAgY3R4OiB7XG4gICAgICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfcGFyc2VTeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luY2hyb25vdXMgcGFyc2UgZW5jb3VudGVyZWQgcHJvbWlzZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX3BhcnNlQXN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfVxuICAgIHBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNhZmVQYXJzZShkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgc2FmZVBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBwYXJhbXM/LmFzeW5jID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIFwifnZhbGlkYXRlXCIoZGF0YSkge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAhIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnI/Lm1lc3NhZ2U/LnRvTG93ZXJDYXNlKCk/LmluY2x1ZGVzKFwiZW5jb3VudGVyZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5jb21tb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlQXN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSkudGhlbigocmVzdWx0KSA9PiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIGFzeW5jIHNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1heWJlQXN5bmNSZXN1bHQgPSB0aGlzLl9wYXJzZSh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKGlzQXN5bmMobWF5YmVBc3luY1Jlc3VsdCkgPyBtYXliZUFzeW5jUmVzdWx0IDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgLyoqIEFsaWFzIG9mIHNhZmVQYXJzZUFzeW5jICovXG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zYWZlUGFyc2VBc3luYztcbiAgICAgICAgdGhpcy5fZGVmID0gZGVmO1xuICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZSA9IHRoaXMuc2FmZVBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZUFzeW5jID0gdGhpcy5zYWZlUGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc3BhLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmVtZW50ID0gdGhpcy5yZWZpbmVtZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VwZXJSZWZpbmUgPSB0aGlzLnN1cGVyUmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGFibGUgPSB0aGlzLm51bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGlzaCA9IHRoaXMubnVsbGlzaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vciA9IHRoaXMub3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYnJhbmQgPSB0aGlzLmJyYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5jYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc2NyaWJlID0gdGhpcy5kZXNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHRoaXMucmVhZG9ubHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc051bGxhYmxlID0gdGhpcy5pc051bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgIHZlbmRvcjogXCJ6b2RcIixcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdGhpc1tcIn52YWxpZGF0ZVwiXShkYXRhKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGlzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbGFibGUoKS5vcHRpb25hbCgpO1xuICAgIH1cbiAgICBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kL2k7XG4vLyBjb25zdCB1dWlkUmVnZXggPVxuLy8gICAvXihbYS1mMC05XXs4fS1bYS1mMC05XXs0fS1bMS01XVthLWYwLTldezN9LVthLWYwLTldezR9LVthLWYwLTldezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mQS1GXXs4fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXsxMn0kL2k7XG5jb25zdCBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG5jb25zdCBqd3RSZWdleCA9IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC87XG5jb25zdCBkdXJhdGlvblJlZ2V4ID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfJytcXC1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbi8vIGZhc3Rlciwgc2ltcGxlciwgc2FmZXJcbmNvbnN0IGlwdjRSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5jb25zdCBpcHY0Q2lkclJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC87XG4vLyBjb25zdCBpcHY2UmVnZXggPVxuLy8gL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSkkLztcbmNvbnN0IGlwdjZDaWRyUmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIGh0dHBzOi8vYmFzZTY0Lmd1cnUvc3RhbmRhcmRzL2Jhc2U2NHVybFxuY29uc3QgYmFzZTY0dXJsUmVnZXggPSAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC87XG4vLyBzaW1wbGVcbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfWA7XG4vLyBubyBsZWFwIHllYXIgdmFsaWRhdGlvblxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LSgoMFsxMzU3OF18MTB8MTIpLTMxfCgwWzEzLTldfDFbMC0yXSktMzB8KDBbMS05XXwxWzAtMl0pLSgwWzEtOV18MVxcXFxkfDJcXFxcZCkpYDtcbi8vIHdpdGggbGVhcCB5ZWFyIHZhbGlkYXRpb25cbmNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7ZGF0ZVJlZ2V4U291cmNlfSRgKTtcbmZ1bmN0aW9uIHRpbWVSZWdleFNvdXJjZShhcmdzKSB7XG4gICAgbGV0IHNlY29uZHNSZWdleFNvdXJjZSA9IGBbMC01XVxcXFxkYDtcbiAgICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19YDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5wcmVjaXNpb24gPT0gbnVsbCkge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9KFxcXFwuXFxcXGQrKT9gO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRzUXVhbnRpZmllciA9IGFyZ3MucHJlY2lzaW9uID8gXCIrXCIgOiBcIj9cIjsgLy8gcmVxdWlyZSBzZWNvbmRzIGlmIHByZWNpc2lvbiBpcyBub256ZXJvXG4gICAgcmV0dXJuIGAoWzAxXVxcXFxkfDJbMC0zXSk6WzAtNV1cXFxcZCg6JHtzZWNvbmRzUmVnZXhTb3VyY2V9KSR7c2Vjb25kc1F1YW50aWZpZXJ9YDtcbn1cbmZ1bmN0aW9uIHRpbWVSZWdleChhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNDMyMzFcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgICBsZXQgcmVnZXggPSBgJHtkYXRlUmVnZXhTb3VyY2V9VCR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfWA7XG4gICAgY29uc3Qgb3B0cyA9IFtdO1xuICAgIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gICAgaWYgKGFyZ3Mub2Zmc2V0KVxuICAgICAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICAgIHJlZ2V4ID0gYCR7cmVnZXh9KCR7b3B0cy5qb2luKFwifFwiKX0pYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEpXVChqd3QsIGFsZykge1xuICAgIGlmICghand0UmVnZXgudGVzdChqd3QpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2hlYWRlcl0gPSBqd3Quc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zod/v3/types.js\n"));

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["main-app"], () => (__webpack_exec__("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fjeremiah%2FDesktop%2Fc2pa%20tool%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);